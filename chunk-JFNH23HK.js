import{a as Br}from"./chunk-CVC7PA2O.js";import{b as Fr,c as Lt,f as Rr,g as $r}from"./chunk-FBKWWOXA.js";import{$ as tr,$b as Lr,A as Jo,Ba as Je,Bb as Sr,C as re,Ca as ct,D as Wo,Da as Vt,E as Qo,F as ge,Fa as qn,Gb as wr,Ha as lr,Hb as Ir,Ia as dr,Ja as pr,Ka as ur,Kb as Li,L as Vn,M as Xo,Ma as mr,Mb as kr,N as _e,Na as gr,Nb as Tr,O as Zo,Oa as _r,Ob as Er,P as Ko,Pa as fr,Pb as Dr,Qa as hr,Qb as Wn,R as er,Ra as jn,Rb as Qn,S as ot,Sa as br,Sb as Dc,Tb as Ar,U as ae,Va as Cr,Vb as Xn,W as Ni,Wb as Nr,Xa as vr,Xb as Vr,Y as zn,Ya as st,Yb as Zn,Z as Ln,Zb as Kn,_ as rt,_b as zr,a as $o,aa as nr,ba as ir,bc as Ur,cc as qr,da as E,db as Pr,fa as or,fb as lt,ga as at,gb as xr,hb as We,ia as Un,j as Go,kb as $n,l as Ye,la as Vi,m as q,ma as zi,mb as Or,n as Ho,na as rr,oa as Kt,p as Yo,pa as ar,q as ie,qa as fe,qb as Gn,qc as jr,r as T,rb as Mr,s as Q,sa as cr,sb as zt,t as oe,ta as X,tb as Hn,ub as Yn,vb as yr,wa as sr,wb as Jn,x as Be,xa as Re,y as Me,ya as Ne,z as Nn,za as en}from"./chunk-MBWBBTNW.js";import{A as Bn,Ac as ce,Ad as Lo,Bc as Nt,Cc as Ri,Da as ve,Ea as P,Ec as zo,F as Di,Fa as x,Fb as f,Gd as Uo,Hc as _,Hd as qo,Ib as Ai,Ic as b,Jb as d,Jc as ht,Jd as jo,K as ko,Kb as Fo,Lb as G,M as $e,Mb as ft,Mc as xe,Nb as Ao,O as Tt,Oa as Y,Ob as Bo,Q as To,Ra as Eo,T as Et,U as Ge,Ub as s,Vb as c,Wb as h,Xb as V,Yb as z,Zb as Bi,_b as w,_c as He,a as D,b as U,ba as Rn,bc as C,c as So,ca as Ce,d as W,dc as u,e as wo,ea as Fi,ec as Ro,fc as No,gc as H,h as ke,hb as it,hc as Vo,ib as le,jc as At,ka as ne,kc as Bt,la as Dt,lc as Rt,n as Le,nb as a,o as An,ob as y,oc as de,pa as Z,pc as p,qc as v,qd as Fe,rc as S,sc as Ue,sd as Ae,u as Oe,ua as F,ub as Do,uc as pe,ud as ee,va as Ft,vc as ue,vd as R,wc as me,z as Io,zc as Ee}from"./chunk-7JLUKY3W.js";var Oa=W((Bh,xa)=>{"use strict";xa.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var pt=W(Ot=>{"use strict";var no,lu=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Ot.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};Ot.getSymbolTotalCodewords=function(t){return lu[t]};Ot.getBCHDigit=function(i){let t=0;for(;i!==0;)t++,i>>>=1;return t};Ot.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');no=t};Ot.isKanjiModeEnabled=function(){return typeof no<"u"};Ot.toSJIS=function(t){return no(t)}});var hi=W(Ve=>{"use strict";Ve.L={bit:1};Ve.M={bit:0};Ve.Q={bit:3};Ve.H={bit:2};function du(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"l":case"low":return Ve.L;case"m":case"medium":return Ve.M;case"q":case"quartile":return Ve.Q;case"h":case"high":return Ve.H;default:throw new Error("Unknown EC Level: "+i)}}Ve.isValid=function(t){return t&&typeof t.bit<"u"&&t.bit>=0&&t.bit<4};Ve.from=function(t,e){if(Ve.isValid(t))return t;try{return du(t)}catch{return e}}});var Sa=W((Vh,ya)=>{"use strict";function Ma(){this.buffer=[],this.length=0}Ma.prototype={get:function(i){let t=Math.floor(i/8);return(this.buffer[t]>>>7-i%8&1)===1},put:function(i,t){for(let e=0;e<t;e++)this.putBit((i>>>t-e-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(i){let t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),i&&(this.buffer[t]|=128>>>this.length%8),this.length++}};ya.exports=Ma});var Ia=W((zh,wa)=>{"use strict";function hn(i){if(!i||i<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=i,this.data=new Uint8Array(i*i),this.reservedBit=new Uint8Array(i*i)}hn.prototype.set=function(i,t,e,n){let o=i*this.size+t;this.data[o]=e,n&&(this.reservedBit[o]=!0)};hn.prototype.get=function(i,t){return this.data[i*this.size+t]};hn.prototype.xor=function(i,t,e){this.data[i*this.size+t]^=e};hn.prototype.isReserved=function(i,t){return this.reservedBit[i*this.size+t]};wa.exports=hn});var ka=W(bi=>{"use strict";var pu=pt().getSymbolSize;bi.getRowColCoords=function(t){if(t===1)return[];let e=Math.floor(t/7)+2,n=pu(t),o=n===145?26:Math.ceil((n-13)/(2*e-2))*2,r=[n-7];for(let l=1;l<e-1;l++)r[l]=r[l-1]-o;return r.push(6),r.reverse()};bi.getPositions=function(t){let e=[],n=bi.getRowColCoords(t),o=n.length;for(let r=0;r<o;r++)for(let l=0;l<o;l++)r===0&&l===0||r===0&&l===o-1||r===o-1&&l===0||e.push([n[r],n[l]]);return e}});var Da=W(Ea=>{"use strict";var uu=pt().getSymbolSize,Ta=7;Ea.getPositions=function(t){let e=uu(t);return[[0,0],[e-Ta,0],[0,e-Ta]]}});var Fa=W(K=>{"use strict";K.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var Mt={N1:3,N2:3,N3:40,N4:10};K.isValid=function(t){return t!=null&&t!==""&&!isNaN(t)&&t>=0&&t<=7};K.from=function(t){return K.isValid(t)?parseInt(t,10):void 0};K.getPenaltyN1=function(t){let e=t.size,n=0,o=0,r=0,l=null,m=null;for(let g=0;g<e;g++){o=r=0,l=m=null;for(let O=0;O<e;O++){let M=t.get(g,O);M===l?o++:(o>=5&&(n+=Mt.N1+(o-5)),l=M,o=1),M=t.get(O,g),M===m?r++:(r>=5&&(n+=Mt.N1+(r-5)),m=M,r=1)}o>=5&&(n+=Mt.N1+(o-5)),r>=5&&(n+=Mt.N1+(r-5))}return n};K.getPenaltyN2=function(t){let e=t.size,n=0;for(let o=0;o<e-1;o++)for(let r=0;r<e-1;r++){let l=t.get(o,r)+t.get(o,r+1)+t.get(o+1,r)+t.get(o+1,r+1);(l===4||l===0)&&n++}return n*Mt.N2};K.getPenaltyN3=function(t){let e=t.size,n=0,o=0,r=0;for(let l=0;l<e;l++){o=r=0;for(let m=0;m<e;m++)o=o<<1&2047|t.get(l,m),m>=10&&(o===1488||o===93)&&n++,r=r<<1&2047|t.get(m,l),m>=10&&(r===1488||r===93)&&n++}return n*Mt.N3};K.getPenaltyN4=function(t){let e=0,n=t.data.length;for(let r=0;r<n;r++)e+=t.data[r];return Math.abs(Math.ceil(e*100/n/5)-10)*Mt.N4};function mu(i,t,e){switch(i){case K.Patterns.PATTERN000:return(t+e)%2===0;case K.Patterns.PATTERN001:return t%2===0;case K.Patterns.PATTERN010:return e%3===0;case K.Patterns.PATTERN011:return(t+e)%3===0;case K.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(e/3))%2===0;case K.Patterns.PATTERN101:return t*e%2+t*e%3===0;case K.Patterns.PATTERN110:return(t*e%2+t*e%3)%2===0;case K.Patterns.PATTERN111:return(t*e%3+(t+e)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}K.applyMask=function(t,e){let n=e.size;for(let o=0;o<n;o++)for(let r=0;r<n;r++)e.isReserved(r,o)||e.xor(r,o,mu(t,r,o))};K.getBestMask=function(t,e){let n=Object.keys(K.Patterns).length,o=0,r=1/0;for(let l=0;l<n;l++){e(l),K.applyMask(l,t);let m=K.getPenaltyN1(t)+K.getPenaltyN2(t)+K.getPenaltyN3(t)+K.getPenaltyN4(t);K.applyMask(l,t),m<r&&(r=m,o=l)}return o}});var oo=W(io=>{"use strict";var ut=hi(),Ci=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],vi=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];io.getBlocksCount=function(t,e){switch(e){case ut.L:return Ci[(t-1)*4+0];case ut.M:return Ci[(t-1)*4+1];case ut.Q:return Ci[(t-1)*4+2];case ut.H:return Ci[(t-1)*4+3];default:return}};io.getTotalCodewordsCount=function(t,e){switch(e){case ut.L:return vi[(t-1)*4+0];case ut.M:return vi[(t-1)*4+1];case ut.Q:return vi[(t-1)*4+2];case ut.H:return vi[(t-1)*4+3];default:return}}});var Aa=W(xi=>{"use strict";var bn=new Uint8Array(512),Pi=new Uint8Array(256);(function(){let t=1;for(let e=0;e<255;e++)bn[e]=t,Pi[t]=e,t<<=1,t&256&&(t^=285);for(let e=255;e<512;e++)bn[e]=bn[e-255]})();xi.log=function(t){if(t<1)throw new Error("log("+t+")");return Pi[t]};xi.exp=function(t){return bn[t]};xi.mul=function(t,e){return t===0||e===0?0:bn[Pi[t]+Pi[e]]}});var Ba=W(Cn=>{"use strict";var ro=Aa();Cn.mul=function(t,e){let n=new Uint8Array(t.length+e.length-1);for(let o=0;o<t.length;o++)for(let r=0;r<e.length;r++)n[o+r]^=ro.mul(t[o],e[r]);return n};Cn.mod=function(t,e){let n=new Uint8Array(t);for(;n.length-e.length>=0;){let o=n[0];for(let l=0;l<e.length;l++)n[l]^=ro.mul(e[l],o);let r=0;for(;r<n.length&&n[r]===0;)r++;n=n.slice(r)}return n};Cn.generateECPolynomial=function(t){let e=new Uint8Array([1]);for(let n=0;n<t;n++)e=Cn.mul(e,new Uint8Array([1,ro.exp(n)]));return e}});var Va=W((Hh,Na)=>{"use strict";var Ra=Ba();function ao(i){this.genPoly=void 0,this.degree=i,this.degree&&this.initialize(this.degree)}ao.prototype.initialize=function(t){this.degree=t,this.genPoly=Ra.generateECPolynomial(this.degree)};ao.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");let e=new Uint8Array(t.length+this.degree);e.set(t);let n=Ra.mod(e,this.genPoly),o=this.degree-n.length;if(o>0){let r=new Uint8Array(this.degree);return r.set(n,o),r}return n};Na.exports=ao});var co=W(za=>{"use strict";za.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}});var so=W(et=>{"use strict";var La="[0-9]+",gu="[A-Z $%*+\\-./:]+",vn="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";vn=vn.replace(/u/g,"\\u");var _u="(?:(?![A-Z0-9 $%*+\\-./:]|"+vn+`)(?:.|[\r
]))+`;et.KANJI=new RegExp(vn,"g");et.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");et.BYTE=new RegExp(_u,"g");et.NUMERIC=new RegExp(La,"g");et.ALPHANUMERIC=new RegExp(gu,"g");var fu=new RegExp("^"+vn+"$"),hu=new RegExp("^"+La+"$"),bu=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");et.testKanji=function(t){return fu.test(t)};et.testNumeric=function(t){return hu.test(t)};et.testAlphanumeric=function(t){return bu.test(t)}});var mt=W(he=>{"use strict";var Cu=co(),lo=so();he.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};he.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};he.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};he.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};he.MIXED={bit:-1};he.getCharCountIndicator=function(t,e){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!Cu.isValid(e))throw new Error("Invalid version: "+e);return e>=1&&e<10?t.ccBits[0]:e<27?t.ccBits[1]:t.ccBits[2]};he.getBestModeForData=function(t){return lo.testNumeric(t)?he.NUMERIC:lo.testAlphanumeric(t)?he.ALPHANUMERIC:lo.testKanji(t)?he.KANJI:he.BYTE};he.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")};he.isValid=function(t){return t&&t.bit&&t.ccBits};function vu(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return he.NUMERIC;case"alphanumeric":return he.ALPHANUMERIC;case"kanji":return he.KANJI;case"byte":return he.BYTE;default:throw new Error("Unknown mode: "+i)}}he.from=function(t,e){if(he.isValid(t))return t;try{return vu(t)}catch{return e}}});var Ga=W(yt=>{"use strict";var Oi=pt(),Pu=oo(),Ua=hi(),gt=mt(),po=co(),ja=7973,qa=Oi.getBCHDigit(ja);function xu(i,t,e){for(let n=1;n<=40;n++)if(t<=yt.getCapacity(n,e,i))return n}function $a(i,t){return gt.getCharCountIndicator(i,t)+4}function Ou(i,t){let e=0;return i.forEach(function(n){let o=$a(n.mode,t);e+=o+n.getBitsLength()}),e}function Mu(i,t){for(let e=1;e<=40;e++)if(Ou(i,e)<=yt.getCapacity(e,t,gt.MIXED))return e}yt.from=function(t,e){return po.isValid(t)?parseInt(t,10):e};yt.getCapacity=function(t,e,n){if(!po.isValid(t))throw new Error("Invalid QR Code version");typeof n>"u"&&(n=gt.BYTE);let o=Oi.getSymbolTotalCodewords(t),r=Pu.getTotalCodewordsCount(t,e),l=(o-r)*8;if(n===gt.MIXED)return l;let m=l-$a(n,t);switch(n){case gt.NUMERIC:return Math.floor(m/10*3);case gt.ALPHANUMERIC:return Math.floor(m/11*2);case gt.KANJI:return Math.floor(m/13);case gt.BYTE:default:return Math.floor(m/8)}};yt.getBestVersionForData=function(t,e){let n,o=Ua.from(e,Ua.M);if(Array.isArray(t)){if(t.length>1)return Mu(t,o);if(t.length===0)return 1;n=t[0]}else n=t;return xu(n.mode,n.getLength(),o)};yt.getEncodedBits=function(t){if(!po.isValid(t)||t<7)throw new Error("Invalid QR Code version");let e=t<<12;for(;Oi.getBCHDigit(e)-qa>=0;)e^=ja<<Oi.getBCHDigit(e)-qa;return t<<12|e}});var Wa=W(Ja=>{"use strict";var uo=pt(),Ya=1335,yu=21522,Ha=uo.getBCHDigit(Ya);Ja.getEncodedBits=function(t,e){let n=t.bit<<3|e,o=n<<10;for(;uo.getBCHDigit(o)-Ha>=0;)o^=Ya<<uo.getBCHDigit(o)-Ha;return(n<<10|o)^yu}});var Xa=W((Zh,Qa)=>{"use strict";var Su=mt();function Yt(i){this.mode=Su.NUMERIC,this.data=i.toString()}Yt.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};Yt.prototype.getLength=function(){return this.data.length};Yt.prototype.getBitsLength=function(){return Yt.getBitsLength(this.data.length)};Yt.prototype.write=function(t){let e,n,o;for(e=0;e+3<=this.data.length;e+=3)n=this.data.substr(e,3),o=parseInt(n,10),t.put(o,10);let r=this.data.length-e;r>0&&(n=this.data.substr(e),o=parseInt(n,10),t.put(o,r*3+1))};Qa.exports=Yt});var Ka=W((Kh,Za)=>{"use strict";var wu=mt(),mo=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Jt(i){this.mode=wu.ALPHANUMERIC,this.data=i}Jt.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};Jt.prototype.getLength=function(){return this.data.length};Jt.prototype.getBitsLength=function(){return Jt.getBitsLength(this.data.length)};Jt.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let n=mo.indexOf(this.data[e])*45;n+=mo.indexOf(this.data[e+1]),t.put(n,11)}this.data.length%2&&t.put(mo.indexOf(this.data[e]),6)};Za.exports=Jt});var tc=W((eb,ec)=>{"use strict";ec.exports=function(t){for(var e=[],n=t.length,o=0;o<n;o++){var r=t.charCodeAt(o);if(r>=55296&&r<=56319&&n>o+1){var l=t.charCodeAt(o+1);l>=56320&&l<=57343&&(r=(r-55296)*1024+l-56320+65536,o+=1)}if(r<128){e.push(r);continue}if(r<2048){e.push(r>>6|192),e.push(r&63|128);continue}if(r<55296||r>=57344&&r<65536){e.push(r>>12|224),e.push(r>>6&63|128),e.push(r&63|128);continue}if(r>=65536&&r<=1114111){e.push(r>>18|240),e.push(r>>12&63|128),e.push(r>>6&63|128),e.push(r&63|128);continue}e.push(239,191,189)}return new Uint8Array(e).buffer}});var ic=W((tb,nc)=>{"use strict";var Iu=tc(),ku=mt();function Wt(i){this.mode=ku.BYTE,typeof i=="string"&&(i=Iu(i)),this.data=new Uint8Array(i)}Wt.getBitsLength=function(t){return t*8};Wt.prototype.getLength=function(){return this.data.length};Wt.prototype.getBitsLength=function(){return Wt.getBitsLength(this.data.length)};Wt.prototype.write=function(i){for(let t=0,e=this.data.length;t<e;t++)i.put(this.data[t],8)};nc.exports=Wt});var rc=W((nb,oc)=>{"use strict";var Tu=mt(),Eu=pt();function Qt(i){this.mode=Tu.KANJI,this.data=i}Qt.getBitsLength=function(t){return t*13};Qt.prototype.getLength=function(){return this.data.length};Qt.prototype.getBitsLength=function(){return Qt.getBitsLength(this.data.length)};Qt.prototype.write=function(i){let t;for(t=0;t<this.data.length;t++){let e=Eu.toSJIS(this.data[t]);if(e>=33088&&e<=40956)e-=33088;else if(e>=57408&&e<=60351)e-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);e=(e>>>8&255)*192+(e&255),i.put(e,13)}};oc.exports=Qt});var ac=W((ib,go)=>{"use strict";var Pn={single_source_shortest_paths:function(i,t,e){var n={},o={};o[t]=0;var r=Pn.PriorityQueue.make();r.push(t,0);for(var l,m,g,O,M,I,k,A,B;!r.empty();){l=r.pop(),m=l.value,O=l.cost,M=i[m]||{};for(g in M)M.hasOwnProperty(g)&&(I=M[g],k=O+I,A=o[g],B=typeof o[g]>"u",(B||A>k)&&(o[g]=k,r.push(g,k),n[g]=m))}if(typeof e<"u"&&typeof o[e]>"u"){var $=["Could not find a path from ",t," to ",e,"."].join("");throw new Error($)}return n},extract_shortest_path_from_predecessor_list:function(i,t){for(var e=[],n=t,o;n;)e.push(n),o=i[n],n=i[n];return e.reverse(),e},find_path:function(i,t,e){var n=Pn.single_source_shortest_paths(i,t,e);return Pn.extract_shortest_path_from_predecessor_list(n,e)},PriorityQueue:{make:function(i){var t=Pn.PriorityQueue,e={},n;i=i||{};for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e.queue=[],e.sorter=i.sorter||t.default_sorter,e},default_sorter:function(i,t){return i.cost-t.cost},push:function(i,t){var e={value:i,cost:t};this.queue.push(e),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof go<"u"&&(go.exports=Pn)});var gc=W(Xt=>{"use strict";var J=mt(),lc=Xa(),dc=Ka(),pc=ic(),uc=rc(),xn=so(),Mi=pt(),Du=ac();function cc(i){return unescape(encodeURIComponent(i)).length}function On(i,t,e){let n=[],o;for(;(o=i.exec(e))!==null;)n.push({data:o[0],index:o.index,mode:t,length:o[0].length});return n}function mc(i){let t=On(xn.NUMERIC,J.NUMERIC,i),e=On(xn.ALPHANUMERIC,J.ALPHANUMERIC,i),n,o;return Mi.isKanjiModeEnabled()?(n=On(xn.BYTE,J.BYTE,i),o=On(xn.KANJI,J.KANJI,i)):(n=On(xn.BYTE_KANJI,J.BYTE,i),o=[]),t.concat(e,n,o).sort(function(l,m){return l.index-m.index}).map(function(l){return{data:l.data,mode:l.mode,length:l.length}})}function _o(i,t){switch(t){case J.NUMERIC:return lc.getBitsLength(i);case J.ALPHANUMERIC:return dc.getBitsLength(i);case J.KANJI:return uc.getBitsLength(i);case J.BYTE:return pc.getBitsLength(i)}}function Fu(i){return i.reduce(function(t,e){let n=t.length-1>=0?t[t.length-1]:null;return n&&n.mode===e.mode?(t[t.length-1].data+=e.data,t):(t.push(e),t)},[])}function Au(i){let t=[];for(let e=0;e<i.length;e++){let n=i[e];switch(n.mode){case J.NUMERIC:t.push([n,{data:n.data,mode:J.ALPHANUMERIC,length:n.length},{data:n.data,mode:J.BYTE,length:n.length}]);break;case J.ALPHANUMERIC:t.push([n,{data:n.data,mode:J.BYTE,length:n.length}]);break;case J.KANJI:t.push([n,{data:n.data,mode:J.BYTE,length:cc(n.data)}]);break;case J.BYTE:t.push([{data:n.data,mode:J.BYTE,length:cc(n.data)}])}}return t}function Bu(i,t){let e={},n={start:{}},o=["start"];for(let r=0;r<i.length;r++){let l=i[r],m=[];for(let g=0;g<l.length;g++){let O=l[g],M=""+r+g;m.push(M),e[M]={node:O,lastCount:0},n[M]={};for(let I=0;I<o.length;I++){let k=o[I];e[k]&&e[k].node.mode===O.mode?(n[k][M]=_o(e[k].lastCount+O.length,O.mode)-_o(e[k].lastCount,O.mode),e[k].lastCount+=O.length):(e[k]&&(e[k].lastCount=O.length),n[k][M]=_o(O.length,O.mode)+4+J.getCharCountIndicator(O.mode,t))}}o=m}for(let r=0;r<o.length;r++)n[o[r]].end=0;return{map:n,table:e}}function sc(i,t){let e,n=J.getBestModeForData(i);if(e=J.from(t,n),e!==J.BYTE&&e.bit<n.bit)throw new Error('"'+i+'" cannot be encoded with mode '+J.toString(e)+`.
 Suggested mode is: `+J.toString(n));switch(e===J.KANJI&&!Mi.isKanjiModeEnabled()&&(e=J.BYTE),e){case J.NUMERIC:return new lc(i);case J.ALPHANUMERIC:return new dc(i);case J.KANJI:return new uc(i);case J.BYTE:return new pc(i)}}Xt.fromArray=function(t){return t.reduce(function(e,n){return typeof n=="string"?e.push(sc(n,null)):n.data&&e.push(sc(n.data,n.mode)),e},[])};Xt.fromString=function(t,e){let n=mc(t,Mi.isKanjiModeEnabled()),o=Au(n),r=Bu(o,e),l=Du.find_path(r.map,"start","end"),m=[];for(let g=1;g<l.length-1;g++)m.push(r.table[l[g]].node);return Xt.fromArray(Fu(m))};Xt.rawSplit=function(t){return Xt.fromArray(mc(t,Mi.isKanjiModeEnabled()))}});var fc=W(_c=>{"use strict";var Si=pt(),fo=hi(),Ru=Sa(),Nu=Ia(),Vu=ka(),zu=Da(),Co=Fa(),vo=oo(),Lu=Va(),yi=Ga(),Uu=Wa(),qu=mt(),ho=gc();function ju(i,t){let e=i.size,n=zu.getPositions(t);for(let o=0;o<n.length;o++){let r=n[o][0],l=n[o][1];for(let m=-1;m<=7;m++)if(!(r+m<=-1||e<=r+m))for(let g=-1;g<=7;g++)l+g<=-1||e<=l+g||(m>=0&&m<=6&&(g===0||g===6)||g>=0&&g<=6&&(m===0||m===6)||m>=2&&m<=4&&g>=2&&g<=4?i.set(r+m,l+g,!0,!0):i.set(r+m,l+g,!1,!0))}}function $u(i){let t=i.size;for(let e=8;e<t-8;e++){let n=e%2===0;i.set(e,6,n,!0),i.set(6,e,n,!0)}}function Gu(i,t){let e=Vu.getPositions(t);for(let n=0;n<e.length;n++){let o=e[n][0],r=e[n][1];for(let l=-2;l<=2;l++)for(let m=-2;m<=2;m++)l===-2||l===2||m===-2||m===2||l===0&&m===0?i.set(o+l,r+m,!0,!0):i.set(o+l,r+m,!1,!0)}}function Hu(i,t){let e=i.size,n=yi.getEncodedBits(t),o,r,l;for(let m=0;m<18;m++)o=Math.floor(m/3),r=m%3+e-8-3,l=(n>>m&1)===1,i.set(o,r,l,!0),i.set(r,o,l,!0)}function bo(i,t,e){let n=i.size,o=Uu.getEncodedBits(t,e),r,l;for(r=0;r<15;r++)l=(o>>r&1)===1,r<6?i.set(r,8,l,!0):r<8?i.set(r+1,8,l,!0):i.set(n-15+r,8,l,!0),r<8?i.set(8,n-r-1,l,!0):r<9?i.set(8,15-r-1+1,l,!0):i.set(8,15-r-1,l,!0);i.set(n-8,8,1,!0)}function Yu(i,t){let e=i.size,n=-1,o=e-1,r=7,l=0;for(let m=e-1;m>0;m-=2)for(m===6&&m--;;){for(let g=0;g<2;g++)if(!i.isReserved(o,m-g)){let O=!1;l<t.length&&(O=(t[l]>>>r&1)===1),i.set(o,m-g,O),r--,r===-1&&(l++,r=7)}if(o+=n,o<0||e<=o){o-=n,n=-n;break}}}function Ju(i,t,e){let n=new Ru;e.forEach(function(g){n.put(g.mode.bit,4),n.put(g.getLength(),qu.getCharCountIndicator(g.mode,i)),g.write(n)});let o=Si.getSymbolTotalCodewords(i),r=vo.getTotalCodewordsCount(i,t),l=(o-r)*8;for(n.getLengthInBits()+4<=l&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);let m=(l-n.getLengthInBits())/8;for(let g=0;g<m;g++)n.put(g%2?17:236,8);return Wu(n,i,t)}function Wu(i,t,e){let n=Si.getSymbolTotalCodewords(t),o=vo.getTotalCodewordsCount(t,e),r=n-o,l=vo.getBlocksCount(t,e),m=n%l,g=l-m,O=Math.floor(n/l),M=Math.floor(r/l),I=M+1,k=O-M,A=new Lu(k),B=0,$=new Array(l),ze=new Array(l),be=0,_t=new Uint8Array(i.buffer);for(let kt=0;kt<l;kt++){let Ei=kt<g?M:I;$[kt]=_t.slice(B,B+Ei),ze[kt]=A.encode($[kt]),B+=Ei,be=Math.max(be,Ei)}let nt=new Uint8Array(n),It=0,Te,Se;for(Te=0;Te<be;Te++)for(Se=0;Se<l;Se++)Te<$[Se].length&&(nt[It++]=$[Se][Te]);for(Te=0;Te<k;Te++)for(Se=0;Se<l;Se++)nt[It++]=ze[Se][Te];return nt}function Qu(i,t,e,n){let o;if(Array.isArray(i))o=ho.fromArray(i);else if(typeof i=="string"){let O=t;if(!O){let M=ho.rawSplit(i);O=yi.getBestVersionForData(M,e)}o=ho.fromString(i,O||40)}else throw new Error("Invalid data");let r=yi.getBestVersionForData(o,e);if(!r)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=r;else if(t<r)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+r+`.
`);let l=Ju(t,e,o),m=Si.getSymbolSize(t),g=new Nu(m);return ju(g,t),$u(g),Gu(g,t),bo(g,e,0),t>=7&&Hu(g,t),Yu(g,l),isNaN(n)&&(n=Co.getBestMask(g,bo.bind(null,g,e))),Co.applyMask(n,g),bo(g,e,n),{modules:g,version:t,errorCorrectionLevel:e,maskPattern:n,segments:o}}_c.create=function(t,e){if(typeof t>"u"||t==="")throw new Error("No input text");let n=fo.M,o,r;return typeof e<"u"&&(n=fo.from(e.errorCorrectionLevel,fo.M),o=yi.from(e.version),r=Co.from(e.maskPattern),e.toSJISFunc&&Si.setToSJISFunction(e.toSJISFunc)),Qu(t,o,n,r)}});var Po=W(St=>{"use strict";function hc(i){if(typeof i=="number"&&(i=i.toString()),typeof i!="string")throw new Error("Color should be defined as hex string");let t=i.slice().replace("#","").split("");if(t.length<3||t.length===5||t.length>8)throw new Error("Invalid hex color: "+i);(t.length===3||t.length===4)&&(t=Array.prototype.concat.apply([],t.map(function(n){return[n,n]}))),t.length===6&&t.push("F","F");let e=parseInt(t.join(""),16);return{r:e>>24&255,g:e>>16&255,b:e>>8&255,a:e&255,hex:"#"+t.slice(0,6).join("")}}St.getOptions=function(t){t||(t={}),t.color||(t.color={});let e=typeof t.margin>"u"||t.margin===null||t.margin<0?4:t.margin,n=t.width&&t.width>=21?t.width:void 0,o=t.scale||4;return{width:n,scale:n?4:o,margin:e,color:{dark:hc(t.color.dark||"#000000ff"),light:hc(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}};St.getScale=function(t,e){return e.width&&e.width>=t+e.margin*2?e.width/(t+e.margin*2):e.scale};St.getImageWidth=function(t,e){let n=St.getScale(t,e);return Math.floor((t+e.margin*2)*n)};St.qrToImageData=function(t,e,n){let o=e.modules.size,r=e.modules.data,l=St.getScale(o,n),m=Math.floor((o+n.margin*2)*l),g=n.margin*l,O=[n.color.light,n.color.dark];for(let M=0;M<m;M++)for(let I=0;I<m;I++){let k=(M*m+I)*4,A=n.color.light;if(M>=g&&I>=g&&M<m-g&&I<m-g){let B=Math.floor((M-g)/l),$=Math.floor((I-g)/l);A=O[r[B*o+$]?1:0]}t[k++]=A.r,t[k++]=A.g,t[k++]=A.b,t[k]=A.a}}});var bc=W(wi=>{"use strict";var xo=Po();function Xu(i,t,e){i.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=e,t.width=e,t.style.height=e+"px",t.style.width=e+"px"}function Zu(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}wi.render=function(t,e,n){let o=n,r=e;typeof o>"u"&&(!e||!e.getContext)&&(o=e,e=void 0),e||(r=Zu()),o=xo.getOptions(o);let l=xo.getImageWidth(t.modules.size,o),m=r.getContext("2d"),g=m.createImageData(l,l);return xo.qrToImageData(g.data,t,o),Xu(m,r,l),m.putImageData(g,0,0),r};wi.renderToDataURL=function(t,e,n){let o=n;typeof o>"u"&&(!e||!e.getContext)&&(o=e,e=void 0),o||(o={});let r=wi.render(t,e,o),l=o.type||"image/png",m=o.rendererOpts||{};return r.toDataURL(l,m.quality)}});var Pc=W(vc=>{"use strict";var Ku=Po();function Cc(i,t){let e=i.a/255,n=t+'="'+i.hex+'"';return e<1?n+" "+t+'-opacity="'+e.toFixed(2).slice(1)+'"':n}function Oo(i,t,e){let n=i+t;return typeof e<"u"&&(n+=" "+e),n}function em(i,t,e){let n="",o=0,r=!1,l=0;for(let m=0;m<i.length;m++){let g=Math.floor(m%t),O=Math.floor(m/t);!g&&!r&&(r=!0),i[m]?(l++,m>0&&g>0&&i[m-1]||(n+=r?Oo("M",g+e,.5+O+e):Oo("m",o,0),o=0,r=!1),g+1<t&&i[m+1]||(n+=Oo("h",l),l=0)):o++}return n}vc.render=function(t,e,n){let o=Ku.getOptions(e),r=t.modules.size,l=t.modules.data,m=r+o.margin*2,g=o.color.light.a?"<path "+Cc(o.color.light,"fill")+' d="M0 0h'+m+"v"+m+'H0z"/>':"",O="<path "+Cc(o.color.dark,"stroke")+' d="'+em(l,r,o.margin)+'"/>',M='viewBox="0 0 '+m+" "+m+'"',k='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+M+' shape-rendering="crispEdges">'+g+O+`</svg>
`;return typeof n=="function"&&n(null,k),k}});var Oc=W(Mn=>{"use strict";var tm=Oa(),Mo=fc(),xc=bc(),nm=Pc();function yo(i,t,e,n,o){let r=[].slice.call(arguments,1),l=r.length,m=typeof r[l-1]=="function";if(!m&&!tm())throw new Error("Callback required as last argument");if(m){if(l<2)throw new Error("Too few arguments provided");l===2?(o=e,e=t,t=n=void 0):l===3&&(t.getContext&&typeof o>"u"?(o=n,n=void 0):(o=n,n=e,e=t,t=void 0))}else{if(l<1)throw new Error("Too few arguments provided");return l===1?(e=t,t=n=void 0):l===2&&!t.getContext&&(n=e,e=t,t=void 0),new Promise(function(g,O){try{let M=Mo.create(e,n);g(i(M,t,n))}catch(M){O(M)}})}try{let g=Mo.create(e,n);o(null,i(g,t,n))}catch(g){o(g)}}Mn.create=Mo.create;Mn.toCanvas=yo.bind(null,xc.render);Mn.toDataURL=yo.bind(null,xc.renderToDataURL);Mn.toString=yo.bind(null,function(i,t,e){return nm.render(i,e)})});var bt=(e=>(e.PROVIDER="PROVIDER",e.CUSTOMER="CUSTOMER",e))(bt||{});var Ut=class i extends Je{constructor(e,n){let o=n.getSelectedProviderId(),r=i.getQueryParam({provider_id:o}),l={create:E.ENQUIRY.URL,update:E.ENQUIRY.URL,list:`${E.ENQUIRY.LIST}`,delete:E.ENQUIRY.URL};super(e,"enquiry_id",l,"enquiry");this.authServ=n}static getQueryParam(e){let n=new URLSearchParams;for(let[o,r]of Object.entries(e))r!=null&&n.append(o,String(r));return n.toString()}static \u0275fac=function(n){return new(n||i)(Z(fe),Z(X))};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"})};var qt=class i extends Je{constructor(e,n){let o=n.getSelectedProviderId(),r=i.getUrlObj(o);super(e,"approval_id",r,"approvals");this.authServ=n}list(){return this.setUrl(i.getUrlObj(this.authServ.getSelectedProviderId())),super.list()}updateProviderUrl(e){if(!e||e===0)return;let n=i.getUrlObj(e);this.setUrl(n)}static getUrlObj(e){let n=E.MEMBER_APPROVAL.LIST.replace("_PROVIDER_ID_",e.toString());return{create:E.MEMBER_APPROVAL.URL,update:E.MEMBER_APPROVAL.URL,list:n,delete:E.MEMBER_APPROVAL.URL}}submitApproval(e){return this.http.post(E.MEMBER_APPROVAL.URL,e)}approve(e){let n=E.MEMBER_APPROVAL.APPROVE.replace("_ID_",e.toString());return this.http.post(n,{})}reject(e){let n=E.MEMBER_APPROVAL.REJECT.replace("_ID_",e.toString());return this.http.delete(n)}checkMemberExists(e,n){let o=n??this.authServ.getSelectedProviderId();if(!o)throw new Error("Provider ID is missing for member existence check.");let r=E.MEMBER_APPROVAL.CHECK_EXISTS.replace("_PROVIDER_ID_",o.toString());return this.http.get(r,{params:{user_id:e},headers:{accept:"application/json"}})}static \u0275fac=function(n){return new(n||i)(Z(fe),Z(X))};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"})};var Fc=["*"],Ac=(i,t)=>({"pi-minus-circle":i,"pi-plus-circle":t});function Bc(i,t){if(i&1){let e=w();s(0,"button",10),C("click",function(){P(e);let o=u(3);return x(o.buttonClicked(o.buttonTypeEnumValues.cancel))}),p(1),c()}if(i&2){let e=u(3);a(),S(" ",e.cancelBtnText,"")}}function Rc(i,t){if(i&1){let e=w();s(0,"button",11),C("click",function(){P(e);let o=u(3);return x(o.buttonClicked(o.buttonTypeEnumValues.submit))}),p(1),c()}if(i&2){let e=u(3);d("disabled",e.inputForm.invalid),a(),v(e.submitBtnText)}}function Nc(i,t){if(i&1&&(s(0,"div",7),f(1,Bc,2,1,"button",8)(2,Rc,2,2,"button",9),c()),i&2){let e=u(2);a(),d("ngIf",e.showCancelBtn),a(),d("ngIf",e.showSubmitBtn)}}function Vc(i,t){if(i&1&&(s(0,"div",5),No(1),f(2,Nc,3,2,"div",6),c()),i&2){let e=u();a(2),d("ngIf",e.showBtnContainer)}}var ei=class i{inputForm;compName="";title="";cancelBtnText="Cancel";submitBtnText="Submit";showBtnContainer=!0;showSubmitBtn=!0;showCancelBtn=!0;isBlockExpand=!1;buttonEventTriggered=new Y;isExpanded=!1;buttonTypeEnumValues=Un;expandContainer(){this.isBlockExpand||(this.isExpanded=!this.isExpanded)}buttonClicked(t){this.buttonEventTriggered.emit({buttonType:t})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=F({type:i,selectors:[["form-template"]],inputs:{inputForm:"inputForm",compName:"compName",title:"title",cancelBtnText:"cancelBtnText",submitBtnText:"submitBtnText",showBtnContainer:"showBtnContainer",showSubmitBtn:"showSubmitBtn",showCancelBtn:"showCancelBtn",isBlockExpand:"isBlockExpand",isExpanded:"isExpanded"},outputs:{buttonEventTriggered:"buttonEventTriggered"},ngContentSelectors:Fc,decls:7,vars:9,consts:[[1,"title-container",3,"click"],[1,"title"],[1,"expander-icon-container"],[1,"expander-icon","pi",3,"ngClass"],["class","form-container",4,"ngIf"],[1,"form-container"],["class","button-container",4,"ngIf"],[1,"button-container"],["class","cancel-button",3,"click",4,"ngIf"],["class","submit-button",3,"disabled","click",4,"ngIf"],[1,"cancel-button",3,"click"],[1,"submit-button",3,"click","disabled"]],template:function(e,n){e&1&&(Ro(),s(0,"div")(1,"div",0),C("click",function(){return n.expandContainer()}),s(2,"div",1),p(3),c(),s(4,"div",2),h(5,"i",3),c()(),f(6,Vc,3,1,"div",4),c()),e&2&&(Bo("",n.compName,"-form-container template-container"),a(3),S(" ",n.title," "),a(2),d("ngClass",Nt(6,Ac,n.isExpanded,!n.isExpanded)),a(),d("ngIf",n.isExpanded))},dependencies:[Ae,R],styles:[".template-container[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:1rem;margin-bottom:.5rem}.template-container[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;color:#4f126a}.template-container[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]   .expander-icon-container[_ngcontent-%COMP%]   .expander-icon[_ngcontent-%COMP%]{color:#5d157c;font-size:1.5rem}.template-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{padding:1rem;padding-top:0}.template-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]     .form-group{font-size:.875rem;color:#4f126a;display:flex;flex-direction:column;margin-bottom:.375rem}.template-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]     .form-group label{font-weight:700;margin-bottom:.125rem}.template-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]     .form-group input{background:#f9f2fd;height:2.25rem;border-radius:50px;padding-left:1rem;width:100%}.template-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]     .form-group input:focus-visible{border:1px solid;outline:0}.template-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]     .form-group textarea{background:#f9f2fd;border-radius:5px;height:auto;padding:.4rem}.template-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]     .form-group textarea:focus-visible{border:1px solid;outline:0}.template-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]     .form-group .error-message{color:red;font-size:12px}.template-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]     .button-container{display:flex;justify-content:space-around;margin-top:1rem;margin-bottom:1rem}.template-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]     .button-container button{height:2.25Rem;min-width:1rem;padding:0 1rem;border-radius:5px}.template-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]     .button-container button.submit-button{background-color:#5d157c;color:#fff}.template-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]     .button-container button.submit-button:disabled{opacity:.5}.template-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]     .button-container button.cancel-button{border:1px solid #5d157c;color:#5d157c}"]})};function Lc(i,t){i&1&&(s(0,"div",10),p(1),_(2,"translate"),c()),i&2&&(a(),S(" ",b(2,1,"enquiry.name_required")," "))}function Uc(i,t){i&1&&(s(0,"div",10),p(1),_(2,"translate"),c()),i&2&&(a(),S(" ",b(2,1,"enquiry.valid_mobile_required")," "))}function qc(i,t){i&1&&(s(0,"div",10),p(1),_(2,"translate"),c()),i&2&&(a(),S(" ",b(2,1,"enquiry.valid_description_required")," "))}var ti=class i{constructor(t,e,n,o,r,l,m){this.fb=t;this.authService=e;this.enquiryService=n;this.toast=o;this.memberApprovalService=r;this.dialogRef=l;this.data=m;this.enquiryForm=this.fb.group({enquiry_text:["",T.required],mobile_number:["",T.required],product_id:[""],user_id:[""],name:["",T.required]})}enquiryForm;formExpanded=!0;editFormValues;saveSuccess=new Y;submitBtnText="Add";ngOnInit(){}ngOnChanges(t){t.editFormValues&&t.editFormValues.currentValue!=null&&this.setEditFormValue()}setEditFormValue(){this.submitBtnText="Update",this.enquiryForm.patchValue({enquiry_text:this.editFormValues?.enquiry_text,mobile_number:this.editFormValues?.mobile_number,product_id:this.editFormValues?.product_id,user_id:this.editFormValues?.user_id,name:this.editFormValues?.name}),this.formExpanded=!0}onSubmit(){if(Object.keys(this.enquiryForm.controls).forEach(t=>{this.enquiryForm.get(t)?.markAsTouched()}),this.enquiryForm.valid){let t={provider_id:this.data?.providerId||this.authService.getSelectedProviderId(),user_id:this.authService.getUserId()||0,mobile_number:this.enquiryForm.value.mobile_number,name:this.enquiryForm.value.name,description:this.enquiryForm.value.enquiry_text};this.memberApprovalService.submitApproval(t).subscribe({next:e=>{this.saveSuccess.emit(e),this.enquiryForm.reset(),this.dialogRef.close(e),this.toast.success("Success","Your request has been submitted successfully!")},error:e=>{console.error("\u274C Error submitting member approval:",e),this.toast.error("Error",e?.error?.message||"Failed to submit request. Please try again.")}})}else this.toast.error("Validation Error","Please fill in all required fields correctly.")}buttonClicked(t){t.buttonType===1?this.onSubmit():t.buttonType===2&&this.onCancel()}onCancel(){this.dialogRef.close()}static \u0275fac=function(e){return new(e||i)(y(_e),y(X),y(Ut),y(Ne),y(qt),y(zn),y(Ln))};static \u0275cmp=F({type:i,selectors:[["member-approval"]],inputs:{editFormValues:"editFormValues"},outputs:{saveSuccess:"saveSuccess"},features:[ve],decls:24,vars:29,consts:[[3,"buttonEventTriggered","compName","title","inputForm","isExpanded","submitBtnText"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","name"],["id","name","type","text","formControlName","name",3,"placeholder"],["class","error-message",4,"ngIf"],["for","mobile"],["id","mobile","type","text","formControlName","mobile_number",3,"placeholder"],["for","description"],["id","description","type","text","formControlName","enquiry_text",3,"placeholder"],[1,"error-message"]],template:function(e,n){if(e&1&&(s(0,"form-template",0),_(1,"translate"),C("buttonEventTriggered",function(r){return n.buttonClicked(r)}),s(2,"form",1),C("ngSubmit",function(){return n.onSubmit()}),s(3,"div",2)(4,"label",3),p(5),_(6,"translate"),c(),h(7,"input",4),_(8,"translate"),f(9,Lc,3,3,"div",5),c(),s(10,"div",2)(11,"label",6),p(12),_(13,"translate"),c(),h(14,"input",7),_(15,"translate"),f(16,Uc,3,3,"div",5),c(),s(17,"div",2)(18,"label",8),p(19),_(20,"translate"),c(),h(21,"input",9),_(22,"translate"),f(23,qc,3,3,"div",5),c()()()),e&2){let o,r,l;d("compName","member-approval")("title",b(1,15,"enquiry.submit_for_approval"))("inputForm",n.enquiryForm)("isExpanded",n.formExpanded)("submitBtnText",n.submitBtnText),a(2),d("formGroup",n.enquiryForm),a(3),v(b(6,17,"enquiry.customer_name")),a(2),d("placeholder",b(8,19,"enquiry.name_placeholder")),a(2),d("ngIf",((o=n.enquiryForm.get("name"))==null?null:o.invalid)&&((o=n.enquiryForm.get("name"))==null?null:o.touched)),a(3),S(" ",b(13,21,"enquiry.mobile_number"),""),a(2),d("placeholder",b(15,23,"enquiry.mobile_placeholder")),a(2),d("ngIf",((r=n.enquiryForm.get("mobile_number"))==null?null:r.invalid)&&((r=n.enquiryForm.get("mobile_number"))==null?null:r.touched)),a(3),S(" ",b(20,25,"enquiry.description"),""),a(2),d("placeholder",b(22,27,"enquiry.description_placeholder")),a(2),d("ngIf",((l=n.enquiryForm.get("enquiry_text"))==null?null:l.invalid)&&((l=n.enquiryForm.get("enquiry_text"))==null?null:l.touched))}},dependencies:[R,Me,ie,Q,oe,re,ge,ei,q]})};var Pe=class i{constructor(t,e){this._http=t;this.authService=e}viewType$=new An("PROVIDER_VIEW");cachedProduct=[];selectedProductForView;categoryCache=new Map;productCache=new Map;submitRegister(t){this._http.post("",t)}getCategories(t,e=0,n=10){if(e===0&&n===10&&this.categoryCache.has(t))return Oe(this.categoryCache.get(t));let o=Li({offset:e,limit:n});return this._http.get(E.PROVIDER_INFO.GET_CATEGORIES+`/${t}?${o}`).pipe(Fi(r=>{e===0&&n===10&&this.categoryCache.set(t,r)}))}getProductByCategory(t,e){let r=`${t}-${e}-1000-0`;if(this.productCache.has(r))return Oe(this.productCache.get(r));let l=Li({provider_id:t,category_id:e,limit:1e3,offset:0});return this._http.get(E.PROVIDER_INFO.GET_PRODUCTS+`?${l}`).pipe(Fi(m=>this.productCache.set(r,m)))}getProviderDetails(t){return this._http.get(E.PROVIDER_INFO.PROVIDER_URL+`/${t}`)}updateProvider(t,e){return this._http.put(`${E.PROVIDER_INFO.PROVIDER_UPDATE}/${t}`,e)}getProviderSettings(t){return this._http.get(`${E.PROVIDER_INFO.PROVIDER_SETTINGS}/${t}`)}updateProviderSettings(t){return this._http.post("provider-settings/",t)}createOrUpdateProviderSettings(t,e){return e?this._http.put(`provider-settings/${e}/`,t):this._http.post("provider-settings/",t)}getSlots(t,e,n,o=0,r=10){let l=`${t}/slots?provider_id=${e}&offset=${o}&limit=${r}`;return n!=null&&(l+=`&product_id=${n}`),this._http.get(l)}getServiceSlotAvailability(t,e,n){let o=`serviceSlots/availability/${t}?product_id=${e}&date=${n}`;return this._http.get(o)}registerProvider(t){return this._http.post(E.PROVIDER_INFO.PROVIDER_REGISTER,t)}getProductDetails(t){return this._http.get(E.PROVIDER_INFO.GET_PRODUCTS+`/${t}`)}getSubscriptionListForProvider(t){return this._http.get(E.PROVIDER_INFO.GET_SUBSCRIPTION_LIST+`?provider_id=${t}`)}getUserSubscriptions(t,e){let n=`subscriptions/list/by-user?user_id=${t}`;return e&&(n+=`&provider_id=${e}`),this._http.get(n)}createSubscription(t){return this._http.post(E.PROVIDER_INFO.CREATE_SUBSCRIPTION,t)}updateSubscription(t,e){return this._http.put(`${E.PROVIDER_INFO.GET_SUBSCRIPTION_LIST}${e}`,t)}uploadImages(t,e){return this._http.post(E.PROVIDER_INFO.UPLOAD_IMAGES,t,e?{params:e}:void 0)}static \u0275fac=function(e){return new(e||i)(Z(fe),Z(X))};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"})};var jt=class i extends Je{constructor(e,n){let o=n.getSelectedProviderId()||0,r=E.PRODUCT.LIST.replace("_PROVIDER_ID_",o.toString()),l={create:E.PRODUCT.URL,update:E.PRODUCT.URL,list:r,delete:E.PRODUCT.URL};super(e,"product_id",l,"products");this.authServ=n}updateProviderUrl(e){if(!e||e===0)return;let n=E.PRODUCT.LIST.replace("_PROVIDER_ID_",e.toString()),o={create:E.PRODUCT.URL,update:E.PRODUCT.URL,list:n,delete:E.PRODUCT.URL};this.setUrl(o)}listWithTotalForProvider(e,n,o){if(!e||e===0)throw console.error("ProductService: Cannot list products - invalid provider ID:",e),new Error("Invalid provider ID");return this.updateProviderUrl(e),this.listWithTotal(n,o)}getProductsByCategory(e,n,o){if(!e||e===0)throw console.error("ProductService: Cannot get products - invalid provider ID:",e),new Error("Invalid provider ID");if(!n||n===0)throw console.error("ProductService: Cannot get products - invalid category ID:",n),new Error("Invalid category ID");let r=`provider/products?provider_id=${e}&category_id=${n}`;return this.http.get(r,o)}static \u0275fac=function(n){return new(n||i)(Z(fe),Z(X))};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"})};var $t=class i extends Je{constructor(e,n){let o=n.getSelectedProviderId(),r=i.getUrlObj(o);super(e,"card_id",r,"membership");this.authServ=n}list(){return this.setUrl(i.getUrlObj(this.authServ.getSelectedProviderId())),super.list()}listByProviderId(e){return this.setUrl(i.getUrlObj(e)),super.list()}static getUrlObj(e){let n=E.CARD.LIST.replace("_PROVIDER_ID_",e.toString());return{create:E.CARD.URL,update:E.CARD.URL,list:n,delete:E.CARD.URL}}static \u0275fac=function(n){return new(n||i)(Z(fe),Z(X))};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"})};var ni=class i{constructor(t,e){this.http=t;this.loader=e}getSubscriptionProducts(t,e,n=0,o=10,r="subscription",l){let m=`provider/${t}/products?`,g=[];return e&&g.push(`search=${encodeURIComponent(e)}`),g.push("visibility=true"),g.push(`skip=${n}`),g.push(`limit=${o}`),g.push(`product_type=${r}`),l&&g.push(`product_subtype=${l}`),m+=g.join("&"),Di(()=>(this.loader.show(),this.http.get(m).pipe(Bn(O=>({status:!0,data:O})),Ge(()=>this.loader.hide()))))}getSubscriptionProduct(t){return Di(()=>(this.loader.show(),this.http.get(`provider/products/${t}`).pipe(Ge(()=>this.loader.hide()))))}static \u0275fac=function(e){return new(e||i)(Z(fe),Z(ar))};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"})};function Gc(i,t){if(i&1){let e=w();s(0,"div",13)(1,"button",14),C("click",function(){P(e);let o=u();return x(o.goBack())}),h(2,"i",15),c(),s(3,"h2"),p(4),_(5,"translate"),c()()}i&2&&(a(4),v(b(5,1,"providerInfo.subscription.registration_form")))}function Hc(i,t){i&1&&(s(0,"div",16),h(1,"div",17),s(2,"p",18),p(3),_(4,"translate"),c()()),i&2&&(a(3),v(b(4,1,"providerInfo.subscription.loading_members")))}function Yc(i,t){if(i&1){let e=w();s(0,"div",26),C("click",function(){let o=P(e).$implicit,r=u(2);return x(r.selectAndProceed(o))}),s(1,"div",27)(2,"input",28),C("change",function(){let o=P(e).$implicit,r=u(2);return x(r.selectAndProceed(o))}),c(),h(3,"label",29),c(),s(4,"div",30)(5,"div",31),p(6),c(),s(7,"div",32),p(8),c()()()}if(i&2){let e=t.$implicit,n=u(2);G("selected",(n.selectedMember==null?null:n.selectedMember.member_id)===e.member_id),a(2),d("id","member-"+e.member_id)("checked",(n.selectedMember==null?null:n.selectedMember.member_id)===e.member_id),a(),d("for","member-"+e.member_id),a(3),v(e.member_name),a(2),v(e.mobile_number)}}function Jc(i,t){if(i&1&&(s(0,"div",19)(1,"h3",20),p(2),_(3,"translate"),c(),s(4,"p",21),p(5),_(6,"translate"),c(),s(7,"div",22),f(8,Yc,9,7,"div",23),c(),s(9,"div",24)(10,"span",25),p(11),_(12,"translate"),c()(),s(13,"h3",20),p(14),_(15,"translate"),c(),s(16,"p",21),p(17),_(18,"translate"),c()()),i&2){let e=u();a(2),v(b(3,6,"providerInfo.subscription.select_existing_member")),a(3),v(b(6,8,"providerInfo.subscription.select_member_description")),a(3),d("ngForOf",e.existingMembers),a(3),v(b(12,10,"providerInfo.subscription.or")),a(3),v(b(15,12,"providerInfo.subscription.add_new_member_title")),a(3),v(b(18,14,"providerInfo.subscription.add_new_member_description"))}}function Wc(i,t){i&1&&(s(0,"small"),p(1),_(2,"translate"),c()),i&2&&(a(),v(b(2,1,"providerInfo.subscription.name_required")))}function Qc(i,t){i&1&&(s(0,"small"),p(1),_(2,"translate"),c()),i&2&&(a(),v(b(2,1,"providerInfo.subscription.name_min")))}function Xc(i,t){if(i&1&&(s(0,"div"),f(1,Wc,3,3,"small",7)(2,Qc,3,3,"small",7),c()),i&2){let e,n,o=u();a(),d("ngIf",(e=o.registerForm.get("member_name"))==null||e.errors==null?null:e.errors.required),a(),d("ngIf",(n=o.registerForm.get("member_name"))==null||n.errors==null?null:n.errors.minlength)}}function Zc(i,t){i&1&&(s(0,"small"),p(1),_(2,"translate"),c()),i&2&&(a(),v(b(2,1,"providerInfo.subscription.mobile_required")))}function Kc(i,t){if(i&1&&(s(0,"div"),f(1,Zc,3,3,"small",7),c()),i&2){let e,n=u();a(),d("ngIf",(e=n.registerForm.get("mobile_number"))==null||e.errors==null?null:e.errors.required)}}function es(i,t){if(i&1&&(s(0,"div",37)(1,"span",38),p(2),c()()),i&2){let e=t.$implicit,n=u(2);a(),d("title",e.group_name),a(),v(n.truncateText(e.group_name,30))}}function ts(i,t){if(i&1&&(s(0,"div",39)(1,"span",38),p(2),c()()),i&2){let e=t.$implicit,n=u(2);a(),d("title",e.group_name),a(),v(n.truncateText(e.group_name,30))}}function ns(i,t){i&1&&(s(0,"small"),p(1),c()),i&2&&(a(),v("Group is required"))}function is(i,t){if(i&1&&(s(0,"div"),f(1,ns,2,1,"small",7),c()),i&2){let e,n=u(2);a(),d("ngIf",(e=n.registerForm.get("group"))==null||e.errors==null?null:e.errors.required)}}function os(i,t){if(i&1){let e=w();s(0,"div")(1,"label",33),p(2),c(),s(3,"p-dropdown",34),C("onChange",function(o){P(e);let r=u();return x(r.onGroupChange(o))}),f(4,es,3,2,"ng-template",35)(5,ts,3,2,"ng-template",36),c(),f(6,is,2,1,"div",7),c()}if(i&2){let e,n=u();a(2),v("Group"),a(),H("placeholder","Select group"),d("options",n.groups)("baseZIndex",1e5)("autoZIndex",!0),a(3),d("ngIf",((e=n.registerForm.get("group"))==null?null:e.invalid)&&((e=n.registerForm.get("group"))==null?null:e.touched))}}function rs(i,t){if(i&1&&(s(0,"div",37)(1,"span",38),p(2),c()()),i&2){let e=t.$implicit,n=u(2);a(),d("title",e.name),a(),v(n.truncateText(e.name,30))}}function as(i,t){if(i&1&&(s(0,"div",39)(1,"span",38),p(2),c()()),i&2){let e=t.$implicit,n=u(2);a(),d("title",e.name),a(),v(n.truncateText(e.name,30))}}function cs(i,t){i&1&&(s(0,"div",43),p(1),_(2,"translate"),c()),i&2&&(a(),S(" ",b(2,1,"providerInfo.subscription.no_plans_for_group")," "))}function ss(i,t){i&1&&(s(0,"small"),p(1),_(2,"translate"),c()),i&2&&(a(),v(b(2,1,"providerInfo.subscription.plan_required")))}function ls(i,t){if(i&1&&(s(0,"div"),f(1,ss,3,3,"small",7),c()),i&2){let e,n=u(2);a(),d("ngIf",(e=n.registerForm.get("plan"))==null||e.errors==null?null:e.errors.required)}}function ds(i,t){if(i&1&&(s(0,"div")(1,"label",40),p(2),_(3,"translate"),c(),s(4,"p-dropdown",41),_(5,"translate"),f(6,rs,3,2,"ng-template",35)(7,as,3,2,"ng-template",36),c(),f(8,cs,3,3,"div",42)(9,ls,2,1,"div",7),c()),i&2){let e,n,o=u();a(2),v(b(3,7,"providerInfo.subscription.plan")),a(2),H("placeholder",b(5,9,"providerInfo.subscription.select_plan")),d("options",o.availablePlans)("baseZIndex",1e5)("autoZIndex",!0),a(4),d("ngIf",((e=o.registerForm.get("group"))==null?null:e.value)&&o.availablePlans.length===0),a(),d("ngIf",((n=o.registerForm.get("plan"))==null?null:n.invalid)&&((n=o.registerForm.get("plan"))==null?null:n.touched))}}function ps(i,t){if(i&1&&(s(0,"small"),p(1),c()),i&2){let e=u(2).$implicit;a(),S("",e.name," is required.")}}function us(i,t){if(i&1&&(s(0,"div"),f(1,ps,2,1,"small",7),c()),i&2){let e,n=u().$implicit,o=u();a(),d("ngIf",(e=o.registerForm.get(n.name))==null||e.errors==null?null:e.errors.required)}}function ms(i,t){if(i&1&&(s(0,"div")(1,"label",29),p(2),c(),h(3,"input",44),f(4,us,2,1,"div",7),c()),i&2){let e,n=t.$implicit,o=u();a(),H("for",n.name),a(),v(n.name),a(),H("id",n.name),H("placeholder",n.name),H("formControlName",n.name),a(),d("ngIf",((e=o.registerForm.get(n.name))==null?null:e.invalid)&&((e=o.registerForm.get(n.name))==null?null:e.touched))}}var on=class i{constructor(t,e,n,o,r){this.fb=t;this._setupRegistrationService=e;this.translate=n;this.subscriptionService=o;this.location=r;this.registerForm=this.fb.group({member_name:["",[T.required,T.minLength(2)]],mobile_number:["",[T.required]],group:[""],plan:[""]})}ngOnChanges(t){(t.groups||t.allPlans||t.isProvider)&&this.updateValidators(),t.allPlans&&(this.selectedGroupId?this.filterPlansByGroup(this.selectedGroupId):this.registerForm?.get("group")?.value&&this.filterPlansByGroup(this.registerForm.get("group")?.value)),t.selectedGroupId&&this.selectedGroupId&&this.registerForm&&(this.registerForm.patchValue({group:this.selectedGroupId}),this.filterPlansByGroup(this.selectedGroupId))}ngOnInit(){this.updateValidators(),this.getResgisterFormFields(),this.fetchExistingMembers(),this.selectedGroupId&&(this.registerForm.patchValue({group:this.selectedGroupId}),this.filterPlansByGroup(this.selectedGroupId))}updateValidators(){this.registerForm&&(this.isProvider&&this.groups&&this.groups.length>0?this.registerForm.get("group")?.setValidators([T.required]):this.registerForm.get("group")?.clearValidators(),this.registerForm.get("group")?.updateValueAndValidity(),this.isProvider&&this.allPlans&&this.allPlans.length>0?this.registerForm.get("plan")?.setValidators([T.required]):this.registerForm.get("plan")?.clearValidators(),this.registerForm.get("plan")?.updateValueAndValidity())}registerForm;providerId;userId;isProvider=!1;groups=[];allPlans=[];selectedGroupId;availablePlans=[];extrafields=[];existingMembers=[];selectedMember;isLoadingMembers=!1;selectedPlan;registerBtn=new Y;onSubmit(){if(this.selectedMember)this.registerBtn.emit({member_name:this.selectedMember.member_name,mobile_number:this.selectedMember.mobile_number,member_id:this.selectedMember.member_id});else if(this.registerForm.valid){let t=this.registerForm.value;this.registerBtn.emit(U(D({},t),{plan_id:t.plan,group_id:t.group}))}else this.registerForm.markAllAsTouched()}getResgisterFormFields(){this.providerId&&this._setupRegistrationService.getRegisteredForm("user",this.providerId).subscribe(t=>{t.forEach(e=>{e.form_data.forEach(n=>{n.elements.forEach(o=>{o.display_for_user&&(this.registerForm.addControl(o.label_name,this.fb.control("",[T.required])),this.extrafields.push({name:o.label_name}))})})})})}fetchExistingMembers(){this.userId&&this.providerId&&(this.isLoadingMembers=!0,this.subscriptionService.getSubscriptionsByUserAndProvider(this.userId,this.providerId,"active,inactive,expired").subscribe({next:t=>{if(t.data?.grouped_subscriptions&&t.data.grouped_subscriptions.length>0){let e=[];t.data.grouped_subscriptions.forEach(n=>{n.provider.provider_id===this.providerId&&n.subscriptions.forEach(o=>{o.member&&o.provider_id===this.providerId&&e.push({member_id:o.member.member_id,member_name:o.member.member_name,mobile_number:o.member.mobile_number,email:o.member.email})})}),this.existingMembers=this.removeDuplicateMembers(e)}this.isLoadingMembers=!1},error:t=>{console.error("Error fetching existing members:",t),this.existingMembers=[],this.isLoadingMembers=!1}}))}removeDuplicateMembers(t){let e=new Map;return t.forEach(n=>{let o=`${n.member_name.toLowerCase().trim()}_${n.mobile_number.trim()}`;e.has(o)||e.set(o,n)}),Array.from(e.values())}selectMember(t){this.selectedMember=t}selectAndProceed(t){this.selectedMember=t,this.onSubmit()}goBack(){this.location.back()}filterPlansByGroup(t){if(!t){this.availablePlans=[];return}this.availablePlans=this.allPlans.filter(n=>n.group_ids&&Array.isArray(n.group_ids)?n.group_ids.some(o=>Number(o.group_id)===Number(t)):Number(n.group_id)===Number(t));let e=this.registerForm.get("plan")?.value;e&&(this.availablePlans.some(o=>o.id===e||o.plan_id===e)||this.registerForm.patchValue({plan:""}))}onGroupChange(t){this.filterPlansByGroup(t.value)}truncateText(t,e=40){return t?t.length<=e?t:t.substring(0,e)+"...":""}static \u0275fac=function(e){return new(e||i)(y(_e),y(Vt),y(Ye),y(Fr),y(Fe))};static \u0275cmp=F({type:i,selectors:[["app-register-subscription"]],inputs:{providerId:"providerId",userId:"userId",isProvider:"isProvider",groups:"groups",allPlans:"allPlans",selectedGroupId:"selectedGroupId"},outputs:{registerBtn:"registerBtn"},features:[ve],decls:26,vars:27,consts:[[1,"container"],["class","header",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","members-section",4,"ngIf"],[1,"form",3,"ngSubmit","formGroup"],["for","name"],["pInputText","","id","name","formControlName","member_name",3,"placeholder"],[4,"ngIf"],["for","mobile_number"],["pInputText","","type","tel","id","mobile_number","formControlName","mobile_number",3,"placeholder"],[4,"ngFor","ngForOf"],[2,"margin-bottom","24px"],["pButton","","pRipple","","type","submit",1,"p-button-success","submit-btn",3,"disabled"],[1,"header"],[1,"back-btn",3,"click"],[1,"pi","pi-arrow-left"],[1,"loading-container"],[1,"spinner"],[1,"loading-text"],[1,"members-section"],[1,"section-title"],[1,"section-description"],[1,"member-cards"],["class","member-card",3,"selected","click",4,"ngFor","ngForOf"],[1,"divider"],[1,"divider-text"],[1,"member-card",3,"click"],[1,"radio-wrapper"],["type","radio","name","selectedMember",3,"change","id","checked"],[3,"for"],[1,"member-info"],[1,"member-name"],[1,"member-mobile"],["for","group"],["formControlName","group","optionValue","group_id","optionLabel","group_name","appendTo","body","styleClass","plan-dropdown","panelStyleClass","plan-dropdown-panel",3,"onChange","options","baseZIndex","autoZIndex","placeholder"],["pTemplate","item"],["pTemplate","selectedItem"],[1,"plan-item"],[3,"title"],[1,"plan-item","selected"],["for","plan"],["formControlName","plan","optionValue","id","optionLabel","name","appendTo","body","styleClass","plan-dropdown","panelStyleClass","plan-dropdown-panel",3,"options","baseZIndex","autoZIndex","placeholder"],["style","color: red; font-size: 12px; margin-top: 4px;",4,"ngIf"],[2,"color","red","font-size","12px","margin-top","4px"],["pInputText","",3,"id","placeholder","formControlName"]],template:function(e,n){if(e&1&&(s(0,"div",0),f(1,Gc,6,3,"div",1)(2,Hc,5,3,"div",2)(3,Jc,19,16,"div",3),s(4,"form",4),C("ngSubmit",function(){return n.onSubmit()}),s(5,"div")(6,"label",5),p(7),_(8,"translate"),c(),h(9,"input",6),_(10,"translate"),f(11,Xc,3,2,"div",7),c(),s(12,"div")(13,"label",8),p(14),_(15,"translate"),c(),h(16,"input",9),_(17,"translate"),f(18,Kc,2,1,"div",7),c(),f(19,os,7,6,"div",7)(20,ds,10,11,"div",7)(21,ms,5,6,"div",10),h(22,"div",11),s(23,"button",12),p(24),_(25,"translate"),c()()()),e&2){let o,r;a(),d("ngIf",!n.isProvider),a(),d("ngIf",n.isLoadingMembers),a(),d("ngIf",!n.isLoadingMembers&&n.existingMembers.length>0),a(),G("no-members",n.existingMembers.length===0),d("formGroup",n.registerForm),a(3),v(b(8,17,"providerInfo.subscription.name")),a(2),H("placeholder",b(10,19,"providerInfo.subscription.name")),a(2),d("ngIf",((o=n.registerForm.get("member_name"))==null?null:o.invalid)&&((o=n.registerForm.get("member_name"))==null?null:o.touched)),a(3),v(b(15,21,"providerInfo.subscription.mobile_number")),a(2),H("placeholder",b(17,23,"providerInfo.subscription.mobile_placeholder")),a(2),d("ngIf",((r=n.registerForm.get("mobile_number"))==null?null:r.invalid)&&((r=n.registerForm.get("mobile_number"))==null?null:r.touched)),a(),d("ngIf",n.isProvider&&n.groups&&n.groups.length>0),a(),d("ngIf",n.isProvider&&n.allPlans&&n.allPlans.length>0),a(),d("ngForOf",n.extrafields),a(2),d("disabled",n.registerForm.invalid),a(),S(" ",b(25,25,"providerInfo.subscription.submit")," ")}},dependencies:[ee,R,lt,Re,$n,We,Me,ie,Q,oe,st,re,ge,q],styles:['.modal-body[_nghost-%COMP%]   .container[_ngcontent-%COMP%], .modal-body   [_nghost-%COMP%]   .container[_ngcontent-%COMP%]{padding:0!important}.container[_ngcontent-%COMP%]{width:100%;margin:0 auto;padding:20px 16px;box-sizing:border-box}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:24px}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;border:none;border-radius:8px;background-color:#f3f4f6;color:#4b5563;cursor:pointer;transition:all .2s ease}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background-color:#e5e7eb;color:#1f2937}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:#111827}.container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 0}.container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;border:3px solid #f3f4f6;border-top-color:#7b1fa2;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}.container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%]{margin-top:1rem;color:#6b7280;font-size:.875rem;font-weight:500}.container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]{margin-bottom:24px}.container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:1rem;color:#111827;font-weight:600;margin-bottom:.5rem}.container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .section-description[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;margin-bottom:1rem}.container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .member-cards[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px;background-color:#fff;border:1px solid #e5e7eb;border-radius:8px;cursor:pointer;transition:all .2s ease}.container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]:hover{border-color:#7b1fa2;background-color:#fcfaff}.container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .member-card.selected[_ngcontent-%COMP%]{border-color:#7b1fa2;background-color:#fcfaff;box-shadow:0 0 0 1px #7b1fa2}.container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .radio-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .radio-wrapper[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{width:1.125rem;height:1.125rem;cursor:pointer;accent-color:#7b1fa2;margin:0}.container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]{flex:1}.container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]   .member-name[_ngcontent-%COMP%]{font-size:.9375rem;font-weight:600;color:#1f2937;margin-bottom:2px}.container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]   .member-mobile[_ngcontent-%COMP%]{font-size:.8125rem;color:#6b7280}.container[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{position:relative;text-align:center;margin:24px 0}.container[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#e5e7eb}.container[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]   .divider-text[_ngcontent-%COMP%]{position:relative;display:inline-block;padding:0 12px;background:#fff;color:#6b7280;font-weight:500;font-size:.75rem;text-transform:uppercase;letter-spacing:.05em}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:#374151;margin-bottom:6px}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #d1d5db;border-radius:8px;font-size:.9375rem;color:#1f2937;background-color:#fff;transition:all .2s ease;margin-bottom:0;box-sizing:border-box}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#7b1fa2;box-shadow:0 0 0 3px #7b1fa21a}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]     .plan-dropdown{width:100%}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]     .plan-dropdown .p-dropdown{width:100%;border-radius:8px;border:1px solid #d1d5db;background-color:#fff;padding:0;transition:all .2s ease;box-sizing:border-box}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]     .plan-dropdown .p-dropdown:not(.p-disabled):hover{border-color:#7b1fa2}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]     .plan-dropdown .p-dropdown.p-focus{border-color:#7b1fa2;box-shadow:0 0 0 3px #7b1fa21a}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]     .plan-dropdown .p-dropdown .p-dropdown-label{padding:10px 12px;font-size:.9375rem;color:#1f2937;line-height:1.5}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]     .plan-dropdown .p-dropdown .p-dropdown-trigger{width:3rem;color:#6b7280}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;margin-top:4px;color:#dc2626;font-size:.75rem}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:80px;width:100%;padding:12px;background:linear-gradient(135deg,#7b1fa2,#9c27b0);color:#fff;border:none;border-radius:8px;font-weight:600;font-size:.9375rem;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;box-sizing:border-box}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#6a1b9a,#8e24aa);transform:translateY(-1px);box-shadow:0 4px 12px #7b1fa233}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;background:#9ca3af}.plan-item[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}.plan-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#1f2937}.plan-item.selected[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;color:#7b1fa2}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}  .plan-dropdown-panel{z-index:100000!important;border-radius:8px;box-shadow:0 10px 25px #0000001a;border:1px solid #e5e7eb;background:#fff}  .plan-dropdown-panel .p-dropdown-items{padding:4px}  .plan-dropdown-panel .p-dropdown-items .p-dropdown-item{border-radius:6px;margin-bottom:2px;padding:10px 12px;font-size:.9375rem;color:#374151}  .plan-dropdown-panel .p-dropdown-items .p-dropdown-item:not(.p-highlight):not(.p-disabled):hover{background-color:#f3e8ff;color:#5d157c}  .plan-dropdown-panel .p-dropdown-items .p-dropdown-item.p-highlight{background-color:#f3e8ff;color:#5d157c;font-weight:600}']})};function fs(i,t){if(i&1){let e=w();s(0,"div",6)(1,"button",7),C("click",function(){P(e);let o=u();return x(o.goBack())}),h(2,"i",8),c(),s(3,"h2"),p(4),_(5,"translate"),c()()}i&2&&(a(4),v(b(5,1,"providerInfo.subscription.select_plan")))}function hs(i,t){if(i&1&&(s(0,"div",9)(1,"small",10),p(2),c()()),i&2){let e=u();a(2),v(e.errorMessage)}}function bs(i,t){if(i&1&&(s(0,"div",11)(1,"small",12),p(2),c()()),i&2){let e=u();a(2),v(e.successMessage)}}function Cs(i,t){i&1&&(s(0,"div",13),h(1,"div",14),s(2,"p",15),p(3),_(4,"translate"),c()()),i&2&&(a(3),S(" ",b(4,1,"providerInfo.subscription.loading_plans")," "))}function vs(i,t){i&1&&(s(0,"div")(1,"small"),p(2),_(3,"translate"),c()()),i&2&&(a(2),v(b(3,1,"providerInfo.subscription.group_required")))}function Ps(i,t){i&1&&(s(0,"div",24),h(1,"i",25),s(2,"span"),p(3,"Please select a group to see the respective plans."),c()())}function xs(i,t){if(i&1){let e=w();s(0,"div",36),C("click",function(o){return P(e),x(o.stopPropagation())}),h(1,"div",37),c()}if(i&2){let e=u().$implicit;a(),d("innerHTML",e.description,it)}}function Os(i,t){if(i&1){let e=w();V(0),s(1,"mat-radio-button",29),C("click",function(){let o=P(e).$implicit,r=u(3);return x(r.togglePlanDetails(o.id))}),s(2,"div",30)(3,"div",31)(4,"div",32)(5,"div",33),p(6),c(),s(7,"div",34),p(8),c()()(),f(9,xs,2,1,"div",35),c()(),z()}if(i&2){let e=t.$implicit,n=u(3);a(),d("value",e.id),a(5),v(e.name),a(2),Ue(" ",e.price," / ",e.billing_type," "),a(),d("ngIf",n.expandedPlans[e.id])}}function Ms(i,t){if(i&1){let e=w();s(0,"div",26)(1,"mat-radio-group",27),C("change",function(){P(e);let o=u(2);return x(o.planChanged())}),f(2,Os,10,5,"ng-container",28),c()()}if(i&2){let e=u(2);a(2),d("ngForOf",e.filteredPlans)}}function ys(i,t){i&1&&(s(0,"span"),p(1),_(2,"translate"),c()),i&2&&(a(),v(b(2,1,"providerInfo.subscription.submit")))}function Ss(i,t){i&1&&(s(0,"span"),p(1),_(2,"translate"),c()),i&2&&(a(),v(b(2,1,"providerInfo.subscription.creating_order")))}function ws(i,t){if(i&1&&(s(0,"button",38),f(1,ys,3,3,"span",20)(2,Ss,3,3,"span",20),c()),i&2){let e=u(2);d("disabled",e.registerForm.invalid||e.isCreatingOrder),a(),d("ngIf",!e.isCreatingOrder),a(),d("ngIf",e.isCreatingOrder)}}function Is(i,t){if(i&1){let e=w();s(0,"form",16),C("ngSubmit",function(){P(e);let o=u();return x(o.isProvider?o.onProviderSubmit():o.onSubmit())}),s(1,"div",17)(2,"label",18),p(3),_(4,"translate"),c(),s(5,"p-dropdown",19),_(6,"translate"),C("onChange",function(){P(e);let o=u();return x(o.groupChanged())}),c(),f(7,vs,4,3,"div",20)(8,Ps,4,0,"div",21)(9,Ms,3,1,"div",22),c(),f(10,ws,3,3,"button",23),c()}if(i&2){let e,n,o,r=u();d("formGroup",r.registerForm),a(3),v(b(4,8,"providerInfo.subscription.group")),a(2),H("placeholder",b(6,10,"providerInfo.subscription.select_group")),d("options",r.groups),a(2),d("ngIf",((e=r.registerForm.get("group"))==null?null:e.invalid)&&((e=r.registerForm.get("group"))==null?null:e.touched)),a(),d("ngIf",!r.isProvider&&!((n=r.registerForm.get("group"))!=null&&n.value)),a(),d("ngIf",!r.isProvider&&((o=r.registerForm.get("group"))==null?null:o.value)),a(),d("ngIf",!r.isProvider)}}var an=class i{constructor(t,e,n,o,r){this._route=t;this.fb=e;this._setupRegistrationService=n;this.translate=o;this.location=r;this.registerForm=this.fb.group({group:["",T.required],plan:[""]})}providerId;isProvider=!1;selectedProduct;registerBtn=new Y;groupChange=new Y;planChange=new Y;registerForm;plans=[];filteredPlans=[];groups=[];selectedGroupId;isCreatingOrder=!1;isLoadingPlans=!1;errorMessage="";successMessage="";destroy$=new Le;expandedPlans={};togglePlanDetails(t){let e=String(t);this.expandedPlans[e]=!this.expandedPlans[e]}ngOnInit(){let t=this.registerForm.get("plan");this.isProvider?t?.clearValidators():t?.setValidators([T.required]),t?.updateValueAndValidity()}ngOnChanges(t){t.selectedProduct&&t.selectedProduct.currentValue&&this.handleSelectedProduct()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onSubmit(){if(!this.registerForm.valid){this.errorMessage=this.translate.instant("providerInfo.subscription.form_invalid"),console.error("Form is not valid");return}let t=this.filteredPlans.find(o=>o.id===this.registerForm.get("plan")?.value),e=this.registerForm.get("group")?.value;if(!t||!e){this.errorMessage=this.translate.instant("providerInfo.subscription.plan_group_required"),console.error("Plan or group not selected");return}let n={plan:t,group:e,selectedProduct:this.selectedProduct};if(this._route.url.includes("customers")){let o={isProvider:!1,data:n};sessionStorage.setItem("checkout_navigation_state",JSON.stringify(o)),this._route.navigate(["customers/info/view-cart"],{state:o})}else{let o={isProvider:!0,data:n};sessionStorage.setItem("checkout_navigation_state",JSON.stringify(o)),this._route.navigate(["providers/info/view-cart"],{state:o})}}onProviderSubmit(){if(!this.registerForm.valid){this.errorMessage=this.translate.instant("providerInfo.subscription.form_invalid"),console.error("Form is not valid in onProviderSubmit");return}let t=this.filteredPlans.find(r=>r.id===this.registerForm.get("plan")?.value),e=this.registerForm.get("group")?.value;if(!t||!e){this.errorMessage=this.translate.instant("providerInfo.subscription.plan_group_required"),console.error("Plan or group not selected in onProviderSubmit");return}let n={plan:t,group:e,selectedProduct:this.selectedProduct},o={isProvider:this.isProvider,data:n};sessionStorage.setItem("checkout_navigation_state",JSON.stringify(o)),this._route.navigate(["providers/info/view-cart"],{state:o})}getPlans(){this.providerId&&this.selectedProduct?.product_id?(this.isLoadingPlans=!0,this._setupRegistrationService.getSubscriptionPlan(this.providerId,this.selectedProduct.product_id).pipe(Ce(this.destroy$)).subscribe({next:t=>{if(this.plans=t||[],this.filteredPlans=t||[],this.groups=this._setupRegistrationService.getGroupsFromPlans(this.plans),this.isProvider&&this.groups.length>0){let e=this.groups[0];this.registerForm.patchValue({group:e.group_id}),this.selectedGroupId=e.group_id,this.filteredPlans=this._setupRegistrationService.filterPlansByGroup(this.plans,e.group_id),this.groupChange.emit(e.group_id)}else this.filteredPlans=[];this.errorMessage="",this.isLoadingPlans=!1},error:t=>{console.error("Error fetching plans",t),this.errorMessage=this.translate.instant("providerInfo.subscription.fetch_plans_error"),this.plans=[],this.filteredPlans=[],this.groups=[],this.isLoadingPlans=!1}})):(this.plans=[],this.filteredPlans=[],this.groups=[])}groupChanged(){let t=this.registerForm.get("group")?.value;this.selectedGroupId=t,this.filteredPlans=this._setupRegistrationService.filterPlansByGroup(this.plans,t),this.registerForm.get("plan")?.reset(),this.errorMessage="",this.isProvider&&this.groupChange.emit(t)}handleSelectedProduct(){this.selectedProduct&&(this.registerForm.reset(),this.selectedGroupId=null,this.plans=[],this.filteredPlans=[],this.groups=[],this.errorMessage="",this.successMessage="",this.getPlans())}planChanged(){let t=this.registerForm.get("plan")?.value;this.isProvider&&t&&this.planChange.emit(t)}goBack(){this.location.back()}static \u0275fac=function(e){return new(e||i)(y(ae),y(_e),y(Vt),y(Ye),y(Fe))};static \u0275cmp=F({type:i,selectors:[["app-select-plan"]],inputs:{providerId:"providerId",isProvider:"isProvider",selectedProduct:"selectedProduct"},outputs:{registerBtn:"registerBtn",groupChange:"groupChange",planChange:"planChange"},features:[ve],decls:6,vars:5,consts:[[1,"container"],["class","header",4,"ngIf"],["class","error-message",4,"ngIf"],["class","success-message",4,"ngIf"],["class","loading-container",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"header"],[1,"back-btn",3,"click"],[1,"pi","pi-arrow-left"],[1,"error-message"],[1,"text-error"],[1,"success-message"],[1,"text-success"],[1,"loading-container"],[1,"spinner"],[1,"loading-text"],[3,"ngSubmit","formGroup"],[1,"group-plan-wrapper"],["for","group"],["formControlName","group","optionValue","group_id","optionLabel","group_name",3,"onChange","options","placeholder"],[4,"ngIf"],["class","warning-message",4,"ngIf"],["class","plan-list-container",4,"ngIf"],["pButton","","pRipple","","type","submit","class","p-button-success submit-btn",3,"disabled",4,"ngIf"],[1,"warning-message"],[1,"pi","pi-exclamation-triangle"],[1,"plan-list-container"],["aria-label","Book date","formControlName","plan",3,"change"],[4,"ngFor","ngForOf"],["color","primary",3,"click","value"],[1,"ml-3","plan-content-wrapper"],[1,"plan-header"],[1,"plan-info"],[1,"plan-name"],[1,"plan-price"],["class","plan-details-dropdown",3,"click",4,"ngIf"],[1,"plan-details-dropdown",3,"click"],[3,"innerHTML"],["pButton","","pRipple","","type","submit",1,"p-button-success","submit-btn",3,"disabled"]],template:function(e,n){e&1&&(s(0,"div",0),f(1,fs,6,3,"div",1)(2,hs,3,1,"div",2)(3,bs,3,1,"div",3)(4,Cs,5,3,"div",4)(5,Is,11,12,"form",5),c()),e&2&&(a(),d("ngIf",!n.isProvider),a(),d("ngIf",n.errorMessage),a(),d("ngIf",n.successMessage),a(),d("ngIf",n.isLoadingPlans),a(),d("ngIf",!n.isLoadingPlans))},dependencies:[ee,R,Wn,Qn,lt,We,Me,Q,oe,st,re,ge,q],styles:['.container[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;padding:0 1rem;display:flex;flex-direction:column;min-height:20rem}.container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem 1rem;min-height:200px}.container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid #f9f2fd;border-top:4px solid #5d157c;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%]{margin-top:1rem;color:#5d157c;font-size:.95rem;font-weight:500}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:16px}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border:none;border-radius:50%;background-color:#f3f4f6;color:#111827;cursor:pointer;transition:all .2s ease;flex-shrink:0}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background-color:#e5e7eb;transform:scale(1.05)}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:#5d157c;flex:1}.container[_ngcontent-%COMP%]   h2.title[_ngcontent-%COMP%]{position:relative;font-size:1.5rem;color:#5d157c;font-weight:700;width:fit-content;margin:auto}.container[_ngcontent-%COMP%]   h2.title[_ngcontent-%COMP%]:before{content:" ";border-bottom:.313rem solid #f9f2fd;position:absolute;height:100%;width:55%;left:-.5rem;padding:1.375rem}.container[_ngcontent-%COMP%]   h2.title[_ngcontent-%COMP%]:after{content:" ";border-bottom:.313rem solid #5d157c;position:absolute;height:100%;width:55%;right:-.5rem;padding:1.375rem}.container[_ngcontent-%COMP%]   .selected-product-info[_ngcontent-%COMP%]{background-color:#f9f2fd;border:1px solid #dee1e6;border-radius:.5rem;padding:1rem;margin:1rem 0}.container[_ngcontent-%COMP%]   .selected-product-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#5d157c;font-size:1.1rem;font-weight:600;margin:0 0 .5rem}.container[_ngcontent-%COMP%]   .selected-product-info[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-weight:600;font-size:1rem;color:#333;margin-bottom:.25rem}.container[_ngcontent-%COMP%]   .selected-product-info[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .product-price[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;color:#5d157c;margin-bottom:.25rem}.container[_ngcontent-%COMP%]   .selected-product-info[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .product-description[_ngcontent-%COMP%]{font-size:.9rem;color:#666;line-height:1.4}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-top:0;display:flex;flex-direction:column;justify-content:space-between;flex:1}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1rem;color:#5d157c;font-weight:700}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#f9f2fd}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   p-dropdown[_ngcontent-%COMP%]{margin-bottom:0}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   p-dropdown[_ngcontent-%COMP%]    >div{background-color:#f9f2fd;width:100%;border:1px solid #e5e7eb;border-radius:8px;transition:all .2s ease}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   p-dropdown[_ngcontent-%COMP%]    >div:hover{border-color:#7b1fa2}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:0;padding-bottom:0}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .plan-list-container[_ngcontent-%COMP%]{margin-top:0;padding-top:0}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0 0 4px}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:0}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .group-plan-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin:0;padding:0}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .group-plan-wrapper[_ngcontent-%COMP%]   .warning-message[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404;padding:.75rem 1rem;border-radius:8px;border:1px solid #ffeeba;border-left:4px solid #ffc107;display:flex;align-items:center;gap:.75rem;font-size:.9rem;font-weight:500;margin-top:.5rem;margin-bottom:.5rem}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .group-plan-wrapper[_ngcontent-%COMP%]   .warning-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem;color:#ffc107}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]    >div{border:2px solid #e5e7eb;width:100%;margin:0 0 12px;padding:14px;border-radius:10px;transition:all .2s ease;background:#fff}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]     .mdc-form-field{width:100%}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]     .mdc-radio{align-self:flex-start;margin-top:0}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]     .mdc-label{width:100%}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button.mat-mdc-radio-checked[_ngcontent-%COMP%]    >div{background-color:#f9f2fd;border-color:#5d157c}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;width:100%;gap:.75rem}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-header[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]{flex:1;min-width:0}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-header[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   .plan-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:#000;margin-bottom:.25rem;line-height:1.3}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-header[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   .plan-price[_ngcontent-%COMP%]{font-size:.85rem;font-weight:400;color:#666;margin-bottom:0;line-height:1.2}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-header[_ngcontent-%COMP%]   .plan-action[_ngcontent-%COMP%]{flex-shrink:0;display:flex;align-items:flex-start;padding-top:.35rem;margin-right:.75rem}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .view-details-btn[_ngcontent-%COMP%]{background-color:#ffd814;border:none;color:#000;font-weight:500;font-size:.8rem;cursor:pointer;display:inline-block;padding:.4rem .8rem;border-radius:20px;width:fit-content;line-height:1.2;white-space:nowrap;transition:all .2s ease;box-shadow:0 1px 3px #ffd81433;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .view-details-btn[_ngcontent-%COMP%]:hover{box-shadow:0 2px 4px #ffd8144d;transform:translateY(-1px)}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .view-details-btn[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 1px 2px #ffd81433}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]{margin-top:.5rem;padding-top:.5rem;border-top:1px solid rgba(0,0,0,.05);animation:_ngcontent-%COMP%_slideDown .3s ease-out;font-size:.85rem;color:#444;line-height:1.6}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     h1, .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     h2, .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     h3, .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     h4, .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     h5, .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     h6{font-weight:600;margin:.75rem 0 .5rem;color:#000;line-height:1.3}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     h1:first-child, .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     h2:first-child, .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     h3:first-child, .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     h4:first-child, .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     h5:first-child, .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     h6:first-child{margin-top:0}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     h1{font-size:1.1rem}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     h2{font-size:1rem}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     h3{font-size:.95rem}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     h4{font-size:.9rem}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     h5, .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     h6{font-size:.85rem}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     p{margin:.5rem 0;font-size:.85rem;line-height:1.6;color:#444}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     p:first-child{margin-top:0}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     p:last-child{margin-bottom:0}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     ul, .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     ol{margin:.5rem 0;padding-left:1.5rem}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     ul:first-child, .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     ol:first-child{margin-top:0}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     ul:last-child, .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     ol:last-child{margin-bottom:0}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     ul li, .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     ol li{margin-bottom:.4rem;font-size:.85rem;color:#444;line-height:1.5}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     ul li:last-child, .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     ol li:last-child{margin-bottom:0}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     ul{list-style-type:disc}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     ol{list-style-type:decimal}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     strong, .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     b{font-weight:600;color:#000}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     em, .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     i{font-style:italic}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     br{display:block;margin:.25rem 0;content:""}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     a{color:#5d157c;text-decoration:none}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     a:hover{text-decoration:underline}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]     div{margin:.25rem 0}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]    >*:first-child{margin-top:0}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-details-dropdown[_ngcontent-%COMP%]    >*:last-child{margin-bottom:0}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button.submit-btn[_ngcontent-%COMP%]{background-color:#5d157c;width:100%;color:#fff;justify-content:center}label[_ngcontent-%COMP%]{display:block;margin:10px 0 5px}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{width:100%;padding:8px;margin-bottom:10px}small[_ngcontent-%COMP%]{color:red;font-size:12px}.provider-subscription-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{max-width:100%;padding:0;margin:0}.provider-subscription-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-top:0}.provider-subscription-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]     .mdc-radio{width:20px;height:20px;padding:0}.provider-subscription-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]     .mdc-radio .mdc-radio__native-control{width:20px;height:20px}.provider-subscription-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]     .mdc-radio .mdc-radio__background{width:20px;height:20px}.provider-subscription-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]    >div{cursor:pointer;transition:all .2s ease}.provider-subscription-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]    >div:hover{background-color:#f9f2fd;border-color:#7b1fa2;transform:translateY(-1px);box-shadow:0 2px 8px #7b1fa21a}.provider-subscription-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]{cursor:pointer}.provider-subscription-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-header[_ngcontent-%COMP%]{width:100%}.provider-subscription-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   .plan-content-wrapper[_ngcontent-%COMP%]   .plan-header[_ngcontent-%COMP%]   .plan-action[_ngcontent-%COMP%]{display:none}']})};var cn=class i{constructor(t){this.translate=t}registerBtn=new Y;paymentMode="";paymentModes=Vi;onSubmit(){this.registerBtn.emit(this.paymentMode)}static \u0275fac=function(e){return new(e||i)(y(Ye))};static \u0275cmp=F({type:i,selectors:[["app-subscription-payment"]],outputs:{registerBtn:"registerBtn"},decls:15,vars:16,consts:[[1,"subscription-payment-container"],[1,"title"],[1,"payment-mode-container"],["aria-label","payment mode",3,"ngModelChange","ngModel"],["color","primary",3,"value"],["pButton","","pRipple","","type","submit",1,"p-button-success","submit-btn",3,"click","disabled"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"h2",1),p(2),_(3,"translate"),c(),s(4,"div",2)(5,"mat-radio-group",3),me("ngModelChange",function(r){return ue(n.paymentMode,r)||(n.paymentMode=r),r}),s(6,"mat-radio-button",4),p(7),_(8,"translate"),c(),s(9,"mat-radio-button",4),p(10),_(11,"translate"),c()()(),s(12,"button",5),C("click",function(){return n.onSubmit()}),p(13),_(14,"translate"),c()()),e&2&&(a(2),v(b(3,8,"providerInfo.subscription.payment_mode")),a(3),pe("ngModel",n.paymentMode),a(),d("value",n.paymentModes.cash_on_hand),a(),v(b(8,10,"providerInfo.subscription.cash_on_hand")),a(2),d("value",n.paymentModes.online),a(),v(b(11,12,"providerInfo.subscription.online")),a(2),d("disabled",!n.paymentMode),a(),S(" ",b(14,14,"providerInfo.subscription.submit")," "))},dependencies:[Wn,Qn,lt,Q,Be,st,q],styles:[".subscription-payment-container[_ngcontent-%COMP%]{padding:1rem;display:flex;flex-direction:column;min-height:20rem}.subscription-payment-container[_ngcontent-%COMP%]   h2.title[_ngcontent-%COMP%]{font-weight:600;font-size:1rem;color:#323743;margin-left:.625rem}.subscription-payment-container[_ngcontent-%COMP%]   .payment-mode-container[_ngcontent-%COMP%]{flex:1}.subscription-payment-container[_ngcontent-%COMP%]   button.submit-btn[_ngcontent-%COMP%]{background-color:#5d157c;width:100%;color:#fff;justify-content:center;height:2rem}"]})};var Es=(i,t,e,n,o)=>({"card-active":i,"card-expired":t,"card-cancelled":e,"card-pending":n,"card-new":o});function Ds(i,t){if(i&1){let e=w();s(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"h3",8),h(5,"i",9),p(6),_(7,"translate"),c(),s(8,"p",10),p(9),c()(),s(10,"div",11),p(11),c()(),s(12,"div",12)(13,"p",13),h(14,"i",14),p(15),c()(),s(16,"div",15)(17,"div",16)(18,"div",17)(19,"span",18),p(20),c()()()(),s(21,"div",19)(22,"span",20),p(23),c(),s(24,"div",21)(25,"button",22),C("click",function(){let o=P(e).$implicit,r=u();return x(r.emitAction(o.status))}),p(26),_(27,"translate"),c()()()()()}if(i&2){let e,n=t.$implicit,o=u();a(),d("ngClass",zo(12,Es,n.status==="active",n.status==="inactive"||n.status==="expired",n.status==="cancelled",n.status==="pending"||n.status==="pending_payment",n.status==="Get New Card")),a(5),S(" ",(e=n.member_name)!==null&&e!==void 0?e:b(7,8,"providerInfo.subscription.sample_name")," "),a(3),v(n.card_name),a(2),v(n.status==="Get New Card"?"NEW":(n.status||"ACTIVE").toUpperCase()),a(4),S(" ",n.business_name," "),a(5),v(n.card_number),a(3),v(n.type==="subscription"?"SUBSCRIPTION":"MEMBERSHIP"),a(3),S(" ",n.status==="Get New Card"?b(27,10,"providerInfo.subscription.get_new_card"):o.getDisplayStatus(n.status)," ")}}var ri=class i{constructor(t,e,n,o){this.translate=t;this.auth=e;this.memberCardService=n;this.providerInfoService=o}business_name="";providerId;userId;styleClass;cardType;icon;brandLogo;set member_name(t){this._member_name=t??"Sample Name"}get member_name(){return this._member_name}_member_name="Sample Name";set card_number(t){this._card_number=t??"XXXX XXXXX XXXXX"}get card_number(){return this._card_number}_card_number="XXXX XXXXX XXXXX";set status(t){this._status=t??"Get New Card",this.statusProvidedByParent=t!=null}get status(){return this._status}_status="Get New Card";statusProvidedByParent=!1;set card_name(t){this._card_name=t??"Member card"}get card_name(){return this._card_name}_card_name="Member card";action=new Y;currentSlideIndex=0;subscriptionCards=[];allCards=[];totalCards=0;statusList=Kt;cardBackground;defaultGradient="linear-gradient(135deg, #1e73be, #8e2de2)";ngOnInit(){let t=this.providerId??this.auth.getSelectedProviderId();if(!t){this.cardBackground=this.defaultGradient,this.fetchUserSubscriptions();return}this.memberCardService.listByProviderId(t).subscribe({next:e=>{if(Array.isArray(e)&&e.length>0){let n=e[0],o=n?.card_color,r=n?.card_name;!this._card_name&&r&&(this._card_name=r),this.cardBackground=o||this.defaultGradient,this.statusProvidedByParent||(this._status="Active");let l=this.auth.getUserInfo()?.name;!this._member_name&&l&&(this._member_name=l);let m=n?.card_id??n?.id;m&&(!this._card_number||this._card_number==="XXXX XXXXX XXXXX")&&(this._card_number=String(m)),this.styleClass=this.styleClass??n?.styleClass??"classic-card",this.cardType=this.cardType??n?.card_type??"CLASSIC",this.icon=this.icon??(n?.icon||"pi pi-id-card"),this.brandLogo=this.brandLogo??n?.brandLogo}else this.cardBackground=this.defaultGradient;this.fetchUserSubscriptions()},error:()=>{this.cardBackground=this.defaultGradient,this.fetchUserSubscriptions()}})}fetchUserSubscriptions(){let t=this.userId??this.auth.getUserInfo()?.user_id;if(!t){this.buildAllCards();return}let e=this.providerId??this.auth.getSelectedProviderId();this.providerInfoService.getUserSubscriptions(t,e).subscribe({next:n=>{n?.grouped_subscriptions&&n.grouped_subscriptions.length>0&&n.grouped_subscriptions.forEach(o=>{o.subscriptions&&o.subscriptions.length>0&&this.subscriptionCards.push(...o.subscriptions)}),this.buildAllCards()},error:n=>{console.error("Error fetching user subscriptions:",n),this.buildAllCards()}})}buildAllCards(){this.allCards=[],this.subscriptionCards.forEach(t=>{this.allCards.push({type:"subscription",business_name:this.business_name||"Provider",card_name:t.product?.name||"Subscription",member_name:t.member?.member_name||"Member",card_number:`Sub ID: ${t.subscription_id}`,status:t.status||"active",subscription:t})}),this.allCards.push({type:"static",business_name:this.business_name||"Provider",card_name:this._card_name,member_name:this._member_name,card_number:this._card_number,status:"Get New Card"}),this.totalCards=this.allCards.length}nextSlide(){this.currentSlideIndex<this.totalCards-1&&this.currentSlideIndex++}prevSlide(){this.currentSlideIndex>0&&this.currentSlideIndex--}goToSlide(t){t>=0&&t<this.totalCards&&(this.currentSlideIndex=t)}get canGoPrev(){return this.currentSlideIndex>0}get canGoNext(){return this.currentSlideIndex<this.totalCards-1}Math=Math;touchStartX=0;touchEndX=0;onTouchStart(t){this.touchStartX=t.changedTouches[0].screenX}onTouchEnd(t){this.touchEndX=t.changedTouches[0].screenX,this.handleSwipe()}handleSwipe(){let e=this.touchStartX-this.touchEndX;Math.abs(e)>50&&(e>0?this.nextSlide():this.prevSlide())}onCardClick(t){t===this.currentSlideIndex&&this.canGoNext?this.nextSlide():t!==this.currentSlideIndex&&this.goToSlide(t)}emitAction(t){this.action.emit(t)}getDisplayStatus(t){return this.statusList[t]||t}static \u0275fac=function(e){return new(e||i)(y(Ye),y(X),y($t),y(Pe))};static \u0275cmp=F({type:i,selectors:[["membership-card-template"]],inputs:{business_name:"business_name",providerId:"providerId",userId:"userId",styleClass:"styleClass",cardType:"cardType",icon:"icon",brandLogo:"brandLogo",member_name:"member_name",card_number:"card_number",status:"status",card_name:"card_name"},outputs:{action:"action"},decls:4,vars:5,consts:[[1,"slider-container"],[1,"slider-wrapper",3,"touchstart","touchend"],[1,"slider-track"],["class","slide",4,"ngFor","ngForOf"],[1,"slide"],[1,"subscription-card",3,"ngClass"],[1,"card-header"],[1,"header-left"],[1,"member-name"],[1,"pi","pi-user"],[1,"product-name"],[1,"status-badge"],[1,"centered-info"],[1,"group-name"],[1,"pi","pi-building"],[1,"card-content"],[1,"info-grid"],[1,"info-item"],[1,"info-value"],[1,"card-footer"],[1,"billing-type"],[1,"card-actions"],[1,"btn","btn-action",3,"click"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1),C("touchstart",function(r){return n.onTouchStart(r)})("touchend",function(r){return n.onTouchEnd(r)}),s(2,"div",2),f(3,Ds,28,18,"div",3),c()()()),e&2&&(G("has-next",n.canGoNext),a(2),Fo("transform","translateX(-"+n.currentSlideIndex*100+"%)"),a(),d("ngForOf",n.allCards))},dependencies:[Ae,ee,q],styles:['.slider-container[_ngcontent-%COMP%]{position:relative;width:100%;overflow:hidden;padding:.5rem 0}.slider-container[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;right:0;bottom:0;width:40px;background:linear-gradient(to left,rgba(255,255,255,.3),transparent);pointer-events:none;z-index:10;opacity:0;transition:opacity .3s ease}.slider-container.has-next[_ngcontent-%COMP%]:after{opacity:1}.slider-wrapper[_ngcontent-%COMP%]{overflow:hidden;width:100%;touch-action:pan-y pinch-zoom}.slider-track[_ngcontent-%COMP%]{display:flex;transition:transform .3s ease-in-out}.slide[_ngcontent-%COMP%]{min-width:100%;flex-shrink:0;padding:0 .75rem}.subscription-card[_ngcontent-%COMP%]{width:100%;max-width:500px;margin:0 auto;border-radius:.75rem;overflow:visible;box-shadow:0 4px 16px #00000026;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;color:#fff;background:linear-gradient(135deg,#3498db,indigo);isolation:isolate}.subscription-card.card-active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db,indigo)}.subscription-card.card-expired[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e74c3c,#c0392b)}.subscription-card.card-cancelled[_ngcontent-%COMP%]{background:linear-gradient(135deg,#95a5a6,#7f8c8d)}.subscription-card.card-pending[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f39c12,#e67e22)}.subscription-card.card-new[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997)}.subscription-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 8px 24px #00000040}.subscription-card[_ngcontent-%COMP%]:active{transform:translateY(-1px)}.subscription-card[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:radial-gradient(circle at 15% 50%,rgba(255,255,255,.05) 0%,transparent 40%),radial-gradient(circle at 85% 30%,rgba(255,255,255,.03) 0%,transparent 50%);pointer-events:none;z-index:0;border-radius:.75rem}.subscription-card[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{position:relative;z-index:1}.subscription-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:.75rem;padding:1rem 1.125rem .625rem}.subscription-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{flex:1;min-width:0;display:flex;flex-direction:column;gap:.188rem}.subscription-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .member-name[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:800;line-height:1.3;margin:0;text-shadow:0 1px 3px rgba(0,0,0,.2);display:flex;align-items:center;gap:.5rem}.subscription-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .member-name[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.875rem;opacity:.9}.subscription-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-size:.813rem;font-weight:600;opacity:.95;margin:0;line-height:1.3}.subscription-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{background:#fffffff2;color:indigo;padding:.313rem .75rem;border-radius:1rem;font-size:.625rem;font-weight:800;letter-spacing:.5px;box-shadow:0 2px 6px #00000026;white-space:nowrap;flex-shrink:0}.subscription-card[_ngcontent-%COMP%]   .centered-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.375rem;padding:.5rem 1.125rem;text-align:center;border-bottom:1px solid rgba(255,255,255,.1)}.subscription-card[_ngcontent-%COMP%]   .centered-info[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]{font-size:.875rem;font-weight:800;margin:0;display:flex;align-items:center;gap:.438rem;background:#fff3;padding:.375rem 1rem;border-radius:.625rem;box-shadow:0 2px 6px #0000001a}.subscription-card[_ngcontent-%COMP%]   .centered-info[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.813rem}.subscription-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:.875rem;padding:.75rem 1.125rem}.subscription-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;flex:1;min-width:0;align-items:center}.subscription-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.438rem}.subscription-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{font-size:.875rem;font-weight:700;font-family:Courier New,monospace;letter-spacing:1px}.subscription-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:.75rem;padding:.75rem 1.125rem 1rem;border-top:1px solid rgba(255,255,255,.15);position:relative;z-index:1}.subscription-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .billing-type[_ngcontent-%COMP%]{font-size:.688rem;font-weight:700;padding:.313rem .625rem;border-radius:.375rem;background:#28a74559;border:1px solid rgba(40,167,69,.5);letter-spacing:.5px;white-space:nowrap;flex-shrink:0}.subscription-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]{display:flex;gap:.563rem;flex-shrink:0;position:relative;z-index:1}.subscription-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:.375rem;border:none;font-size:.75rem;font-weight:700;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 6px #0003;white-space:nowrap;position:relative;z-index:1}.subscription-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 3px 10px #0000004d}.subscription-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.subscription-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .btn.btn-action[_ngcontent-%COMP%]{background:#fffffff2;color:indigo}.subscription-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .btn.btn-action[_ngcontent-%COMP%]:hover{background:#fff}@media (max-width: 768px){.slider-container[_ngcontent-%COMP%]{padding:.25rem 0}.slide[_ngcontent-%COMP%]{padding:0 .5rem}.subscription-card[_ngcontent-%COMP%]{max-width:100%}.subscription-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:.875rem 1rem .5rem;gap:.625rem}.subscription-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{gap:.156rem}.subscription-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .member-name[_ngcontent-%COMP%]{font-size:1rem;gap:.438rem}.subscription-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .member-name[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.813rem}.subscription-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-size:.75rem}.subscription-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{font-size:.563rem;padding:.25rem .563rem}.subscription-card[_ngcontent-%COMP%]   .centered-info[_ngcontent-%COMP%]{padding:.438rem 1rem;gap:.313rem}.subscription-card[_ngcontent-%COMP%]   .centered-info[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]{font-size:.813rem;padding:.313rem .875rem;gap:.375rem}.subscription-card[_ngcontent-%COMP%]   .centered-info[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.75rem}.subscription-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding:.625rem 1rem}.subscription-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{font-size:.75rem}.subscription-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{padding:.625rem 1rem .875rem;gap:.563rem}.subscription-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .billing-type[_ngcontent-%COMP%]{font-size:.625rem;padding:.25rem .5rem}.subscription-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]{gap:.5rem}.subscription-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:.688rem;padding:.438rem .875rem}}']})};var As=["scrollSentinel"];function Bs(i,t){if(i&1){let e=w();s(0,"div",8),C("click",function(){let o=P(e).$implicit,r=u();return x(r.onViewDetails(o))}),s(1,"div",9)(2,"div",10)(3,"img",11),C("error",function(o){P(e);let r=u();return x(r.onImageError(o))}),c()()(),s(4,"div",12)(5,"div",13)(6,"h3",14),p(7),c(),s(8,"p",15),p(9),c()(),s(10,"div",16)(11,"button",17),C("click",function(o){let r=P(e).$implicit,l=u();return o.stopPropagation(),x(l.onViewDetails(r))}),p(12," View "),c(),s(13,"button",18),C("click",function(o){let r=P(e).$implicit,l=u();return o.stopPropagation(),x(l.onRegister(r))}),p(14," Register "),c()()()()}if(i&2){let e=t.$implicit,n=u();a(3),d("src",n.getProductImage(e),le)("alt",e.product_name),a(4),v(e.product_name),a(2),v(e.title1)}}function Rs(i,t){i&1&&h(0,"div",19,0)}function Ns(i,t){i&1&&(s(0,"div",20),h(1,"div",21),c())}function Vs(i,t){i&1&&(s(0,"div",22),p(1," All products loaded "),c())}function zs(i,t){i&1&&(s(0,"div",23)(1,"div",24),h(2,"i",25),c(),s(3,"h3"),p(4,"No Subscription Products"),c(),s(5,"p"),p(6,"No subscription products are currently available."),c()())}var ai=class i{constructor(t){this.router=t}products=[];providerName="";isLoading=!1;hasMore=!0;cardAction=new Y;registerProduct=new Y;loadMore=new Y;scrollSentinel;isLoadingMore=!1;observer;ngOnInit(){}ngOnChanges(t){(t.products||t.hasMore)&&this.hasMore&&this.products.length>0&&setTimeout(()=>{this.setupIntersectionObserver()},100)}ngOnDestroy(){this.observer&&this.observer.disconnect()}setupIntersectionObserver(){if(this.observer&&(this.observer.disconnect(),this.observer=void 0),!this.scrollSentinel)return;let t={root:null,rootMargin:"200px",threshold:.1};this.observer=new IntersectionObserver(e=>{e.forEach(n=>{n.isIntersecting&&this.hasMore&&!this.isLoading&&!this.isLoadingMore&&(this.isLoadingMore=!0,this.loadMore.emit(),setTimeout(()=>{this.isLoadingMore=!1},2e3))})},t),this.observer.observe(this.scrollSentinel.nativeElement)}onViewDetails(t){let n=this.router.url.includes("customers")?"customers":"providers";this.router.navigateByUrl(`${n}/info/subscription-details`,{state:{product:t}})}onRegister(t){this.registerProduct.emit(t)}getProductImage(t){return t.product_image_url&&t.product_image_url.length>0?t.product_image_url[0]:"assets/images/products/product.jpg"}getProductDescription(t){let e=[];return t.is_service&&e.push("Include hall"),t.available_stock>0?e.push(`${t.available_stock} Bathroom`):e.push("2 Bathroom"),e.length===0&&e.push("Include hall, 2 Bathroom"),e.join(", ")}onCardAction(t,e){this.cardAction.emit({card:e,action:t})}onImageError(t){let e=t.target;e&&(e.src="assets/images/products/product.jpg")}static \u0275fac=function(e){return new(e||i)(y(ae))};static \u0275cmp=F({type:i,selectors:[["subscription-products"]],viewQuery:function(e,n){if(e&1&&At(As,5,Eo),e&2){let o;Bt(o=Rt())&&(n.scrollSentinel=o.first)}},inputs:{products:"products",providerName:"providerName",isLoading:"isLoading",hasMore:"hasMore"},outputs:{cardAction:"cardAction",registerProduct:"registerProduct",loadMore:"loadMore"},features:[ve],decls:7,vars:5,consts:[["scrollSentinel",""],[1,"subscription-products-container"],[1,"products-grid"],["class","product-card",3,"click",4,"ngFor","ngForOf"],["class","scroll-sentinel",4,"ngIf"],["class","loading-indicator",4,"ngIf"],["class","end-of-list",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"product-card",3,"click"],[1,"product-image-section"],[1,"image-container"],[1,"product-image",3,"error","src","alt"],[1,"product-content-section"],[1,"product-info"],[1,"product-title"],[1,"product-description"],[1,"action-section"],[1,"view-btn",3,"click"],[1,"register-btn",3,"click"],[1,"scroll-sentinel"],[1,"loading-indicator"],[1,"spinner"],[1,"end-of-list"],[1,"empty-state"],[1,"empty-icon"],[1,"pi","pi-box"]],template:function(e,n){e&1&&(s(0,"div",1)(1,"div",2),f(2,Bs,15,4,"div",3),c(),f(3,Rs,2,0,"div",4)(4,Ns,2,0,"div",5)(5,Vs,2,0,"div",6)(6,zs,7,0,"div",7),c()),e&2&&(a(2),d("ngForOf",n.products),a(),d("ngIf",n.hasMore&&!n.isLoading),a(),d("ngIf",n.isLoading&&n.products.length>0),a(),d("ngIf",!n.hasMore&&n.products.length>0),a(),d("ngIf",n.products.length===0&&!n.isLoading))},dependencies:[ee,R],styles:[".subscription-products-container[_ngcontent-%COMP%]{padding-bottom:60px}.products-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;justify-content:flex-start}.product-card[_ngcontent-%COMP%]{display:flex;align-items:center;background:#f9f0ff;border-radius:12px;padding:12px 16px;border:1px solid #5d157c;box-shadow:0 2px 8px #0000000d;width:400px;height:100px;cursor:pointer;transition:box-shadow .2s ease}.product-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #0000001a}.product-image-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:70px;margin-right:16px}.product-image-section[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:10px;overflow:hidden;background:#fff;display:flex;justify-content:center;align-items:center}.product-image-section[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.product-image-section[_ngcontent-%COMP%]   .brand-info[_ngcontent-%COMP%]{font-size:10px;text-align:center;margin-top:4px}.product-image-section[_ngcontent-%COMP%]   .brand-info[_ngcontent-%COMP%]   .brand-name[_ngcontent-%COMP%]{font-weight:700;color:#7b1fa2}.product-image-section[_ngcontent-%COMP%]   .brand-info[_ngcontent-%COMP%]   .brand-tagline[_ngcontent-%COMP%]{font-style:italic;color:#aaa}.product-content-section[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:space-between;align-items:center}.product-content-section[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-title[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600;color:#4a148c}.product-content-section[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-description[_ngcontent-%COMP%]{margin:2px 0 0;font-size:13px;color:#666}.product-content-section[_ngcontent-%COMP%]   .action-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.product-content-section[_ngcontent-%COMP%]   .action-section[_ngcontent-%COMP%]   .view-btn[_ngcontent-%COMP%], .product-content-section[_ngcontent-%COMP%]   .action-section[_ngcontent-%COMP%]   .register-btn[_ngcontent-%COMP%]{border:none;padding:6px 16px;border-radius:20px;font-size:.75rem;font-weight:600;cursor:pointer;transition:all .2s ease;width:100%;min-width:80px}.product-content-section[_ngcontent-%COMP%]   .action-section[_ngcontent-%COMP%]   .view-btn[_ngcontent-%COMP%]{background:#ffd814;color:#000}.product-content-section[_ngcontent-%COMP%]   .action-section[_ngcontent-%COMP%]   .view-btn[_ngcontent-%COMP%]:hover{background:#e6c211;transform:translateY(-1px)}.product-content-section[_ngcontent-%COMP%]   .action-section[_ngcontent-%COMP%]   .register-btn[_ngcontent-%COMP%]{background:#ffa41c;color:#000}.product-content-section[_ngcontent-%COMP%]   .action-section[_ngcontent-%COMP%]   .register-btn[_ngcontent-%COMP%]:hover{background:#e69317;transform:translateY(-1px)}.loading-indicator[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:2rem;width:100%;min-height:80px}.loading-indicator[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{border:4px solid #f3f3f3;border-top:4px solid #5d157c;border-radius:50%;width:50px;height:50px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.end-of-list[_ngcontent-%COMP%]{text-align:center;padding:1rem;color:#666;font-size:.9rem;width:100%}.scroll-sentinel[_ngcontent-%COMP%]{height:1px;width:100%;visibility:hidden}"]})};function Us(i,t){if(i&1){let e=w();s(0,"div",7)(1,"subscription-products",8),_(2,"translate"),C("registerProduct",function(o){P(e);let r=u(2);return x(r.onRegisterProduct(o))})("loadMore",function(){P(e);let o=u(2);return x(o.onLoadMoreProducts())}),c()()}if(i&2){let e=u(2);a(),d("products",e.subscriptionProducts)("providerName",(e.provider==null?null:e.provider.business_name)||b(2,4,"providerInfo.subscription.provider_fallback"))("isLoading",e.isLoadingProducts)("hasMore",e.hasMoreProducts)}}function qs(i,t){if(i&1){let e=w();s(0,"div",4)(1,"membership-card-template",5),C("action",function(o){P(e);let r=u();return x(r.onHeaderCardAction(o))}),c(),f(2,Us,3,6,"div",6),c()}if(i&2){let e=u();a(),d("providerId",e.providerId)("business_name",e.provider==null?null:e.provider.business_name)("card_name",e.cards.length?e.cards[0].card_name:void 0)("member_name",e.userInfo==null?null:e.userInfo.name)("card_number",e.headerCardNumber)("status",e.subscriptions.length?"Active":"Get New Card"),a(),d("ngIf",e.subscriptionProducts.length>0)}}function js(i,t){if(i&1){let e=w();s(0,"app-register-subscription",9),C("registerBtn",function(o){P(e);let r=u();return x(r.nextPage(o))}),c()}if(i&2){let e=u();d("providerId",e.providerId)("userId",e.userInfo==null?null:e.userInfo.user_id)}}function $s(i,t){if(i&1){let e=w();s(0,"app-select-plan",10),C("registerBtn",function(o){P(e);let r=u();return x(r.nextPage(o))}),c()}if(i&2){let e=u();d("providerId",e.providerId)("selectedProduct",e.selectedProduct)}}function Gs(i,t){if(i&1){let e=w();s(0,"app-subscription-payment",11),C("registerBtn",function(o){P(e);let r=u();return x(r.nextPage(o))}),c()}}var sn=class i{constructor(t,e,n,o,r){this.router=t;this.auth=e;this.providerInfoService=n;this.memberShipCardService=o;this.subscriptionProductsService=r}provider;ngOnInit(){let e=this.router.getCurrentNavigation()?.extras?.state||history.state;e?.triggerRegistration&&e?.registerProduct&&(this.selectedProduct=e.registerProduct,this.addSubscription())}ngOnChanges(t){t.provider&&(this.getMembershipCards(),this.getSubscriptionProducts())}get userInfo(){return this.auth.getUserInfo()}registrationFormData;stepsForSubscription=rr;getMembershipCards(){this.provider?.provider_id&&(this.memberShipCardService.listByProviderId(this.provider.provider_id).subscribe(t=>{this.cards=t,this.updateCarouselCards()}),this.providerInfoService.getSubscriptionListForProvider(this.provider?.provider_id).subscribe(t=>{this.subscriptions=t,this.updateCarouselCards()}))}getSubscriptionProducts(){this.provider?.provider_id&&(this.isLoadingProducts=!0,this.currentPage=0,this.subscriptionProducts=[],this.subscriptionProductsService.getSubscriptionProducts(this.provider.provider_id,void 0,0,this.pageSize,"subscription","service_subscription").subscribe({next:t=>{t&&t.data?(this.subscriptionProducts=t.data.products||[],this.hasMoreProducts=(t.data.products||[]).length>=this.pageSize):t&&t.products?(this.subscriptionProducts=t.products||[],this.hasMoreProducts=(t.products||[]).length>=this.pageSize):(this.subscriptionProducts=[],this.hasMoreProducts=!1),this.isLoadingProducts=!1},error:t=>{console.error("Error fetching subscription products:",t),this.subscriptionProducts=[],this.hasMoreProducts=!1,this.isLoadingProducts=!1}}))}onLoadMoreProducts(){if(this.isLoadingProducts||!this.hasMoreProducts||!this.provider?.provider_id)return;this.isLoadingProducts=!0,this.currentPage++;let t=this.currentPage*this.pageSize;this.subscriptionProductsService.getSubscriptionProducts(this.provider.provider_id,void 0,t,this.pageSize,"subscription","service_subscription").subscribe({next:e=>{let n=[];e&&e.data?n=e.data.products||[]:e&&e.products&&(n=e.products||[]),this.subscriptionProducts=[...this.subscriptionProducts,...n],this.hasMoreProducts=n.length>=this.pageSize,this.isLoadingProducts=!1},error:e=>{console.error("\u274C Error loading more products:",e),this.hasMoreProducts=!1,this.isLoadingProducts=!1}})}pages=["list","register","select-plan","payment-mode"];activePageIndex=0;actionOnCard="Get New Card";subscriptions=[];editSubscription;cards=[];carouselCards=[];subscriptionProducts=[];selectedProduct;currentPage=0;pageSize=10;hasMoreProducts=!0;isLoadingProducts=!1;get providerId(){return this.provider?.provider_id}get headerCardNumber(){let t=this.cards&&this.cards.length>0?this.cards[0]:void 0,e=t?.card_id??t?.id;return e!=null?String(e):void 0}updateCarouselCards(){this.carouselCards=[],this.subscriptions.forEach(t=>{this.carouselCards.push({business_name:this.provider?.business_name||"Shree Enterprise",card_name:this.cards.length?this.cards[0].card_name:"Member Card",member_name:t.member_name||"Unknown Member",card_number:t.id?.toString()||"N/A",status:t.status||"Active",subscription:t})}),this.subscriptionProducts.forEach(t=>{this.carouselCards.push({business_name:this.provider?.business_name||"Shree Enterprise",card_name:t.product_name,member_name:`\u20B9${t.selling_price}`,card_number:`Product ID: ${t.product_id}`,status:"Available",subscription:void 0})}),this.carouselCards.push({business_name:this.provider?.business_name||"Shree Enterprise",card_name:this.cards.length?this.cards[0].card_name:"Member Card",member_name:this.userInfo?.name||"New Member11",card_number:"Get New Card",status:"Get New Card"})}onCarouselCardAction(t){t.action==="Get New Card"?this.addSubscription():t.card.subscription&&this.actionForExistingCard(t.action,t.card.subscription)}onHeaderCardAction(t){t==="Get New Card"&&this.addSubscription()}onRegisterProduct(t){this.selectedProduct=t,this.addSubscription()}addSubscription(){this.activePageIndex=1,this.actionOnCard="Get New Card"}actionForExistingCard(t,e){t===this.getEnumKey("Payment Pending")&&(this.activePageIndex=3,this.actionOnCard="Payment Pending",this.editSubscription=e)}getEnumKey(t){return Object.keys(Kt).find(e=>Kt[e]===t)}nextPage(t){if(this.registrationFormData||(this.registrationFormData={}),this.activePageIndex===1){this.registrationFormData.custom_registration_data=t,this.activePageIndex=2;return}else if(this.activePageIndex===2){if(this.userInfo&&this.providerId&&this.registrationFormData.custom_registration_data){t=t;let e={user_id:this.userInfo.user_id,member_name:this.registrationFormData.custom_registration_data.member_name,mobile_number:this.registrationFormData.custom_registration_data.mobile_number,provider_id:this.providerId,plan_id:t.plan.id,amount_paid:t.plan.price};this.registrationFormData.subscription=e,t.selectedProduct&&(this.selectedProduct=t.selectedProduct),this.activePageIndex=3}else console.error("\u274C Missing required data for plan selection:",{userInfo:!!this.userInfo,providerId:!!this.providerId,registrationData:!!this.registrationFormData.custom_registration_data});return}else if(this.activePageIndex===3){if(this.registrationFormData.subscription)this.registrationFormData.subscription.payment_method=t,this.registrationFormData.subscription.payment_status=zi[t],this.providerInfoService.createSubscription(this.registrationFormData).subscribe(e=>{this.activePageIndex=0,this.getMembershipCards()});else if(this.actionOnCard==="Payment Pending"&&this.userInfo&&this.providerId&&this.editSubscription?.id){let e={user_id:this.userInfo.user_id,status:t==="online"?"active":void 0,payment_method:t,payment_status:zi[t],provider_id:this.providerId};this.providerInfoService.updateSubscription(e,this.editSubscription.id).subscribe(n=>{this.activePageIndex=0,this.getMembershipCards()})}return}console.error("\u274C Unexpected state in nextPage - activePageIndex:",this.activePageIndex)}static \u0275fac=function(e){return new(e||i)(y(ae),y(X),y(Pe),y($t),y(ni))};static \u0275cmp=F({type:i,selectors:[["app-provider-subscription"]],inputs:{provider:"provider"},features:[ve],decls:4,vars:4,consts:[["class","subscription-card-container",4,"ngIf"],[3,"providerId","userId","registerBtn",4,"ngIf"],[3,"providerId","selectedProduct","registerBtn",4,"ngIf"],[3,"registerBtn",4,"ngIf"],[1,"subscription-card-container"],[3,"action","providerId","business_name","card_name","member_name","card_number","status"],["class","subscription-products-section",4,"ngIf"],[1,"subscription-products-section"],[3,"registerProduct","loadMore","products","providerName","isLoading","hasMore"],[3,"registerBtn","providerId","userId"],[3,"registerBtn","providerId","selectedProduct"],[3,"registerBtn"]],template:function(e,n){e&1&&f(0,qs,3,7,"div",0)(1,js,1,2,"app-register-subscription",1)(2,$s,1,2,"app-select-plan",2)(3,Gs,1,0,"app-subscription-payment",3),e&2&&(d("ngIf",n.activePageIndex===n.stepsForSubscription.list),a(),d("ngIf",n.activePageIndex===n.stepsForSubscription.registration),a(),d("ngIf",n.activePageIndex===n.stepsForSubscription.selectPlan),a(),d("ngIf",n.activePageIndex===n.stepsForSubscription.payment))},dependencies:[R,on,an,cn,ri,ai,q],styles:[".subscription-card-container[_ngcontent-%COMP%]{padding:1rem;background:#f8f9fa;min-height:100vh}.subscription-card-container[_ngcontent-%COMP%]   .subscription-products-section[_ngcontent-%COMP%]{margin-top:2rem;padding-top:2rem;border-top:1px solid #e5e7eb}.subscription-card-container[_ngcontent-%COMP%]   .subscription-products-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#1f2937;margin:0 0 1.5rem;text-align:center}@media (max-width: 768px){.subscription-card-container[_ngcontent-%COMP%]{padding:.5rem}.subscription-card-container[_ngcontent-%COMP%]   .subscription-products-section[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1.5rem}.subscription-card-container[_ngcontent-%COMP%]   .subscription-products-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:1rem}}"]})};var Ws=(i,t)=>({"top-44-cat-fil":i,"top-3rem":t}),Qs=i=>({"selected-item shadow-lg bg-white":i}),Qr=(i,t,e)=>({"out-of-stock-card":i,"no-variants-card":t,"highlight-product":e}),Xr=i=>({"grayscale opacity-50":i}),Gt=i=>({"text-gray-400":i}),ci=i=>({"out-of-stock-button":i}),Zr=i=>({"out-of-stock-card":i}),Kr=(i,t)=>({"text-[#5D157C] bg-[#F5E8FF] rounded-xl py-1.5 px-2 shadow":i,"text-gray-700 rounded-md p-1.5":t});function Xs(i,t){i&1&&(s(0,"div",30)(1,"ul")(2,"li"),h(3,"i",31),s(4,"div"),p(5,"Repeat your orders"),c(),h(6,"i",32),c(),s(7,"li"),h(8,"i",33),s(9,"div"),p(10,"Repeat your orders"),c(),h(11,"i",32),c()()())}function Zs(i,t){if(i&1){let e=w();s(0,"div",34),C("click",function(){let o=P(e).$implicit,r=u(2);return x(r.switchCategory(o))}),h(1,"img",35),s(2,"span",36),p(3),c()()}if(i&2){let e=t.$implicit,n=u(2);d("ngClass",ce(4,Qs,(n.selectedCategory==null?null:n.selectedCategory.name)===e.name)),a(),H("alt",e.name),d("src",e.img?e.img:"assets/images/products/prod-category.webp",le),a(2),v(e.name)}}function Ks(i,t){if(i&1&&(s(0,"span",37),p(1),c()),i&2){let e=u(2);a(),S(" ",e.getSelectedFilterLabel()," ")}}function el(i,t){if(i&1){let e=w();s(0,"button",38),C("click",function(){P(e);let o=u(2);return x(o.clearFilter())}),h(1,"i",39),c()}}function tl(i,t){if(i&1){let e=w();s(0,"p-tag",40),C("click",function(){let o=P(e).$implicit,r=u(2);return x(r.setSelectedSubcategory(o))}),c()}if(i&2){let e=t.$implicit,n=u(2);d("value",n.truncateText(e.name,7))("severity",(n.selectedSubcategory==null?null:n.selectedSubcategory.product_category_id)===e.product_category_id?"info":"secondary")}}function nl(i,t){i&1&&(s(0,"div",44),h(1,"div",45)(2,"div",46)(3,"div",47)(4,"div",48),c())}function il(i,t){if(i&1&&(V(0),s(1,"div",42),f(2,nl,5,0,"div",43),c(),z()),i&2){let e=u(3);a(2),d("ngForOf",e.productSkeletons)}}function ol(i,t){i&1&&(s(0,"div",60),p(1," UNAVAILABLE "),c())}function rl(i,t){if(i&1&&(s(0,"span",66),p(1),c()),i&2){let e=u().$implicit;a(),S("\u20B9",e.price,"")}}function al(i,t){if(i&1&&(s(0,"div",64)(1,"span"),p(2),c(),f(3,rl,2,1,"span",65),c()),i&2){let e=t.$implicit;a(2),v(e.size),a(),d("ngIf",e.price)}}function cl(i,t){if(i&1){let e=w();s(0,"div",61),C("click",function(o){return P(e),x(o.stopPropagation())}),s(1,"p-dropdown",62),me("ngModelChange",function(o){P(e);let r=u().$implicit,l=u(5);return ue(l.selectedVariant[r.id],o)||(l.selectedVariant[r.id]=o),x(o)}),C("onChange",function(o){P(e);let r=u().$implicit,l=u(5);return x(l.selectVariant(o.value,r))}),f(2,al,4,2,"ng-template",63),c()()}if(i&2){let e=u().$implicit,n=u(5);a(),d("options",e.variantsJson),pe("ngModel",n.selectedVariant[e.id]),d("appendTo","body")("panelStyleClass","variant-dropdown-panel")}}function sl(i,t){if(i&1&&(V(0),p(1),z()),i&2){let e,n=u(2).$implicit,o=u(5);a(),S(" \u20B9",((e=o.selectedVariant[n.id]==null?null:o.selectedVariant[n.id].price)!==null&&e!==void 0?e:n.variantsJson[0].price)||0," ")}}function ll(i,t){if(i&1&&(V(0),p(1),z()),i&2){let e=u(2).$implicit;a(),S(" \u20B9",e.selling_price||0," ")}}function dl(i,t){if(i&1&&(s(0,"div",67),f(1,sl,2,1,"ng-container",8)(2,ll,2,1,"ng-container",8),c()),i&2){let e=u().$implicit,n=u(5);d("ngClass",ce(3,Gt,n.isOutOfStock(e))),a(),d("ngIf",e.variantsJson&&e.variantsJson.length>0),a(),d("ngIf",!e.variantsJson||e.variantsJson.length===0)}}function pl(i,t){i&1&&h(0,"div")}function ul(i,t){if(i&1){let e=w();V(0),s(1,"div",68)(2,"button",69),C("click",function(o){P(e);let r=u().$implicit;return u(5).removeFromCart(r.id),x(o.stopPropagation())}),h(3,"i",70),c(),s(4,"span",71),p(5),c(),s(6,"button",69),C("click",function(o){P(e);let r=u().$implicit;return u(5).addToCart(r),x(o.stopPropagation())}),h(7,"i",72),c()(),z()}if(i&2){let e=u().$implicit,n=u(5);a(5),S(" ",n.getItemQuantity(e.id)," ")}}function ml(i,t){if(i&1){let e=w();s(0,"button",73),C("click",function(o){P(e);let r=u().$implicit,l=u(5);return x(!l.isOutOfStock(r)&&l.handleProductAction(r,o))}),p(1),c()}if(i&2){let e=u().$implicit,n=u(5);d("ngClass",ce(3,ci,n.isOutOfStock(e)))("disabled",n.isOutOfStock(e)),a(),S(" ",n.getActionLabel(e)," ")}}function gl(i,t){if(i&1){let e=w();V(0),s(1,"div",51),f(2,ol,2,0,"div",52),s(3,"div",53)(4,"img",54),C("click",function(o){let r=P(e).$implicit,l=u(5);return x(l.handleProductClick(r,o))}),c()(),s(5,"h3",55),p(6),c(),f(7,cl,3,4,"div",56),s(8,"div",57),f(9,dl,3,5,"div",58)(10,pl,1,0,"div",8),s(11,"div",59),f(12,ul,8,1,"ng-container",41)(13,ml,2,5,"ng-template",null,3,xe),c()()(),z()}if(i&2){let e=t.$implicit,n=de(14),o=u(5);a(),d("ngClass",Ri(12,Qr,o.isOutOfStock(e),!o.hasValidVariants(e),e.id==o.productId)),Ai("data-product-id",e.id),a(),d("ngIf",o.isOutOfStock(e)),a(),d("ngClass",ce(16,Xr,o.isOutOfStock(e))),a(),d("src",(e==null||e.img==null?null:e.img[0])||"assets/images/products/product-placeholder.png",le),a(),d("ngClass",ce(18,Gt,o.isOutOfStock(e))),a(),S(" ",e.name," "),a(),d("ngIf",o.hasValidVariants(e)),a(2),d("ngIf",e.productSubType!=="flexible"),a(),d("ngIf",e.productSubType==="flexible"),a(2),d("ngIf",!o.isOutOfStock(e)&&o.getItemQuantity(e.id)>0)("ngIfElse",n)}}function _l(i,t){if(i&1&&(V(0),s(1,"div",49),f(2,gl,15,20,"ng-container",50),c(),z()),i&2){let e=u(4);a(2),d("ngForOf",e.displayedNonServiceProducts)}}function fl(i,t){i&1&&(s(0,"div",74),p(1),_(2,"translate"),c()),i&2&&(a(),S(" ",b(2,1,"providerInfo.catalogue.no_products")," "))}function hl(i,t){if(i&1&&f(0,_l,3,1,"ng-container",41)(1,fl,3,3,"ng-template",null,2,xe),i&2){let e=de(2),n=u(3);d("ngIf",n.displayedNonServiceProducts.length>0)("ngIfElse",e)}}function bl(i,t){if(i&1&&(V(0),f(1,il,3,1,"ng-container",41)(2,hl,3,2,"ng-template",null,1,xe),z()),i&2){let e=de(3),n=u(2);a(),d("ngIf",n.isProductsLoading)("ngIfElse",e)}}function Cl(i,t){if(i&1&&(s(0,"div",88),p(1),c()),i&2){let e=u(2).$implicit,n=u(4);d("ngClass",ce(2,Gt,n.isOutOfStock(e))),a(),S(" \u20B9",e.variantsJson[0].price," ")}}function vl(i,t){i&1&&(s(0,"div",89),p(1," UNAVAILABLE "),c())}function Pl(i,t){if(i&1){let e=w();V(0),s(1,"div",76),C("click",function(o){P(e);let r=u().$implicit,l=u(4);return x(l.handleProductClick(r,o))}),h(2,"div",77),s(3,"div",78)(4,"div",79),h(5,"img",80),c(),s(6,"div",81)(7,"div",82)(8,"h3",83),p(9),c()(),s(10,"p",84),p(11),c(),f(12,Cl,2,4,"div",85),s(13,"button",86),C("click",function(o){P(e);let r=u().$implicit,l=u(4);return!l.isOutOfStock(r)&&l.book(r),x(o.stopPropagation())}),p(14),c()()(),f(15,vl,2,0,"div",87),c(),z()}if(i&2){let e=u().$implicit,n=u(4);a(),d("ngClass",ce(10,Zr,n.isOutOfStock(e))),a(4),H("alt",e.name),d("src",(e==null||e.img==null?null:e.img[0])||"assets/images/products/product-placeholder.png",le),a(4),S(" ",e.name," "),a(2),S(" ",e.description||"All Unique Designs"," "),a(),d("ngIf",(e==null?null:e.variantsJson)&&e.variantsJson.length>0&&e.productSubType!=="flexible"),a(),d("ngClass",ce(12,ci,n.isOutOfStock(e)))("disabled",n.isOutOfStock(e)),a(),S(" ",n.isOutOfStock(e)?"OUT OF STOCK":"Proceed"," "),a(),d("ngIf",n.isOutOfStock(e))}}function xl(i,t){if(i&1&&(V(0),f(1,Pl,16,14,"ng-container",8),z()),i&2){let e=t.$implicit;a(),d("ngIf",e.productType==="service")}}function Ol(i,t){if(i&1&&(V(0),s(1,"div",75),f(2,xl,2,1,"ng-container",50),c(),z()),i&2){let e=u(3);a(2),d("ngForOf",e.displayedServiceProducts)}}function Ml(i,t){i&1&&(s(0,"div",74),p(1),_(2,"translate"),c()),i&2&&(a(),S(" ",b(2,1,"providerInfo.catalogue.no_products")," "))}function yl(i,t){if(i&1&&(V(0),f(1,Ol,3,1,"ng-container",41)(2,Ml,3,3,"ng-template",null,4,xe),z()),i&2){let e=de(3),n=u(2);a(),d("ngIf",n.displayedServiceProducts.length>0)("ngIfElse",e)}}function Sl(i,t){i&1&&(s(0,"div",44),h(1,"div",45)(2,"div",46)(3,"div",47)(4,"div",48),c())}function wl(i,t){if(i&1&&(V(0),s(1,"div",42),f(2,Sl,5,0,"div",43),c(),z()),i&2){let e=u(3);a(2),d("ngForOf",e.productSkeletons)}}function Il(i,t){if(i&1&&(s(0,"div",88),p(1),c()),i&2){let e=u(2).$implicit,n=u(5);d("ngClass",ce(2,Gt,n.isOutOfStock(e))),a(),S(" \u20B9",e.variantsJson[0].price," ")}}function kl(i,t){i&1&&(s(0,"div",89),p(1," UNAVAILABLE "),c())}function Tl(i,t){if(i&1){let e=w();V(0),s(1,"div",90),C("click",function(o){P(e);let r=u().$implicit,l=u(5);return x(l.handleProductClick(r,o))}),h(2,"div",77),s(3,"div",78)(4,"div",79),h(5,"img",80),c(),s(6,"div",81)(7,"div",82)(8,"h3",83),p(9),c()(),s(10,"p",84),p(11),c(),f(12,Il,2,4,"div",85),s(13,"button",86),C("click",function(o){P(e);let r=u().$implicit,l=u(5);return!l.isOutOfStock(r)&&l.book(r),x(o.stopPropagation())}),p(14),c()()(),f(15,kl,2,0,"div",87),c(),z()}if(i&2){let e=u().$implicit,n=u(5);a(),d("ngClass",ce(10,Zr,n.isOutOfStock(e))),a(4),H("alt",e.name),d("src",(e==null||e.img==null?null:e.img[0])||"assets/images/products/product-placeholder.png",le),a(4),S(" ",e.name," "),a(2),S(" ",e.description||"All Unique Designs"," "),a(),d("ngIf",(e==null?null:e.variantsJson)&&e.variantsJson.length>0&&e.productSubType!=="flexible"),a(),d("ngClass",ce(12,ci,n.isOutOfStock(e)))("disabled",n.isOutOfStock(e)),a(),S(" ",n.isOutOfStock(e)?"OUT OF STOCK":"Proceed"," "),a(),d("ngIf",n.isOutOfStock(e))}}function El(i,t){i&1&&(s(0,"div",60),p(1," UNAVAILABLE "),c())}function Dl(i,t){if(i&1&&(s(0,"span",66),p(1),c()),i&2){let e=u().$implicit;a(),S("\u20B9",e.price,"")}}function Fl(i,t){if(i&1&&(s(0,"div",64)(1,"span"),p(2),c(),f(3,Dl,2,1,"span",65),c()),i&2){let e=t.$implicit;a(2),v(e.size),a(),d("ngIf",e.price)}}function Al(i,t){if(i&1){let e=w();s(0,"div",61),C("click",function(o){return P(e),x(o.stopPropagation())}),s(1,"p-dropdown",91),me("ngModelChange",function(o){P(e);let r=u(2).$implicit,l=u(5);return ue(l.selectedVariant[r.id],o)||(l.selectedVariant[r.id]=o),x(o)}),C("onChange",function(o){P(e);let r=u(2).$implicit,l=u(5);return x(l.selectVariant(o.value,r))}),f(2,Fl,4,2,"ng-template",63),c()()}if(i&2){let e=u(2).$implicit,n=u(5);a(),d("options",e.variantsJson),pe("ngModel",n.selectedVariant[e.id]),d("appendTo","body")("panelStyleClass","variant-dropdown-panel")}}function Bl(i,t){if(i&1&&(V(0),p(1),z()),i&2){let e,n=u(3).$implicit,o=u(5);a(),S(" \u20B9",((e=o.selectedVariant[n.id]==null?null:o.selectedVariant[n.id].price)!==null&&e!==void 0?e:n.variantsJson[0].price)||0," ")}}function Rl(i,t){if(i&1&&(V(0),p(1),z()),i&2){let e=u(3).$implicit;a(),S(" \u20B9",e.selling_price||0," ")}}function Nl(i,t){if(i&1&&(s(0,"div",67),f(1,Bl,2,1,"ng-container",8)(2,Rl,2,1,"ng-container",8),c()),i&2){let e=u(2).$implicit,n=u(5);d("ngClass",ce(3,Gt,n.isOutOfStock(e))),a(),d("ngIf",e.variantsJson&&e.variantsJson.length>0),a(),d("ngIf",!e.variantsJson||e.variantsJson.length===0)}}function Vl(i,t){i&1&&h(0,"div")}function zl(i,t){if(i&1){let e=w();V(0),s(1,"div",68)(2,"button",69),C("click",function(o){P(e);let r=u(2).$implicit;return u(5).removeFromCart(r.id),x(o.stopPropagation())}),h(3,"i",70),c(),s(4,"span",71),p(5),c(),s(6,"button",69),C("click",function(o){P(e);let r=u(2).$implicit;return u(5).addToCart(r),x(o.stopPropagation())}),h(7,"i",72),c()(),z()}if(i&2){let e=u(2).$implicit,n=u(5);a(5),S(" ",n.getItemQuantity(e.id)," ")}}function Ll(i,t){if(i&1){let e=w();s(0,"button",73),C("click",function(o){P(e);let r=u(2).$implicit,l=u(5);return x(!l.isOutOfStock(r)&&l.handleProductAction(r,o))}),p(1),c()}if(i&2){let e=u(2).$implicit,n=u(5);d("ngClass",ce(3,ci,n.isOutOfStock(e)))("disabled",n.isOutOfStock(e)),a(),S(" ",n.getActionLabel(e)," ")}}function Ul(i,t){if(i&1){let e=w();V(0),s(1,"div",51),f(2,El,2,0,"div",52),s(3,"div",53)(4,"img",54),C("click",function(o){P(e);let r=u().$implicit,l=u(5);return x(l.handleProductClick(r,o))}),c()(),s(5,"h3",55),p(6),c(),f(7,Al,3,4,"div",56),s(8,"div",57),f(9,Nl,3,5,"div",58)(10,Vl,1,0,"div",8),s(11,"div",59),f(12,zl,8,1,"ng-container",41)(13,Ll,2,5,"ng-template",null,7,xe),c()()(),z()}if(i&2){let e=de(14),n=u().$implicit,o=u(5);a(),d("ngClass",Ri(12,Qr,o.isOutOfStock(n),!o.hasValidVariants(n),n.id==o.productId)),Ai("data-product-id",n.id),a(),d("ngIf",o.isOutOfStock(n)),a(),d("ngClass",ce(16,Xr,o.isOutOfStock(n))),a(),d("src",(n==null||n.img==null?null:n.img[0])||"assets/images/products/product-placeholder.png",le),a(),d("ngClass",ce(18,Gt,o.isOutOfStock(n))),a(),S(" ",n.name," "),a(),d("ngIf",o.hasValidVariants(n)),a(2),d("ngIf",n.productSubType!=="flexible"),a(),d("ngIf",n.productSubType==="flexible"),a(2),d("ngIf",!o.isOutOfStock(n)&&o.getItemQuantity(n.id)>0)("ngIfElse",e)}}function ql(i,t){if(i&1&&(V(0),f(1,Tl,16,14,"ng-container",8)(2,Ul,15,20,"ng-container",8),z()),i&2){let e=t.$implicit;a(),d("ngIf",e.productType==="service"),a(),d("ngIf",e.productType==="product")}}function jl(i,t){if(i&1&&(V(0),s(1,"div",49),f(2,ql,3,2,"ng-container",50),c(),z()),i&2){let e=u(4);a(2),d("ngForOf",e.displayedAllProducts)}}function $l(i,t){i&1&&(s(0,"div",74),p(1),_(2,"translate"),c()),i&2&&(a(),S(" ",b(2,1,"providerInfo.catalogue.no_products")," "))}function Gl(i,t){if(i&1&&f(0,jl,3,1,"ng-container",41)(1,$l,3,3,"ng-template",null,6,xe),i&2){let e=de(2),n=u(3);d("ngIf",n.displayedAllProducts.length>0)("ngIfElse",e)}}function Hl(i,t){if(i&1&&(V(0),f(1,wl,3,1,"ng-container",41)(2,Gl,3,2,"ng-template",null,5,xe),z()),i&2){let e=de(3),n=u(2);a(),d("ngIf",n.isProductsLoading)("ngIfElse",e)}}function Yl(i,t){if(i&1&&(s(0,"div",102),p(1),c()),i&2){let e=u(3);a(),S(" +",e.cart.length-1," ")}}function Jl(i,t){if(i&1){let e=w();s(0,"div",92),C("click",function(){P(e);let o=u(2);return x(o.setShowCartSummary(!0))}),s(1,"div",93)(2,"div",94),h(3,"img",95),f(4,Yl,2,1,"div",96),c()(),s(5,"div",97)(6,"div",98),p(7,"View cart"),c(),s(8,"div",99),p(9),c()(),s(10,"div",100),h(11,"i",101),c()()}if(i&2){let e=u(2);a(3),d("src",(e.cart[0].img==null?null:e.cart[0].img[0])||"assets/images/products/product-placeholder.png",le)("alt",e.cart[0].name),a(),d("ngIf",e.cart.length>1),a(5),S("",e.getTotalItems()," items")}}function Wl(i,t){if(i&1){let e=w();V(0),f(1,Xs,12,0,"div",11),s(2,"div",12)(3,"div",13),f(4,Zs,4,6,"div",14),c(),s(5,"div",15)(6,"div",16)(7,"div",17)(8,"input",18),_(9,"translate"),me("ngModelChange",function(o){P(e);let r=u();return ue(r.filterInput,o)||(r.filterInput=o),x(o)}),C("input",function(o){P(e);let r=u();return x(r.onInputChange(o))}),c()(),s(10,"div",19)(11,"div",20)(12,"lucide-icon",21),C("click",function(o){P(e);let r=de(16);return x(r.toggle(o))}),c(),f(13,Ks,2,1,"span",22)(14,el,2,0,"button",23),s(15,"p-overlayPanel",24,0)(17,"p-dropdown",25),_(18,"translate"),me("ngModelChange",function(o){P(e);let r=u();return ue(r.isService,o)||(r.isService=o),x(o)}),C("onChange",function(){P(e);let o=de(16),r=u();return x(r.onFilterSelect(o))}),c()()(),s(19,"div",26),f(20,tl,1,2,"p-tag",27),c()()(),s(21,"div",28),f(22,bl,4,2,"ng-container",8)(23,yl,4,2,"ng-container",8)(24,Hl,4,2,"ng-container",8),c()()(),f(25,Jl,12,4,"div",29),z()}if(i&2){let e=u();a(),d("ngIf",!e.isProviderView&&!1),a(2),d("ngClass",Nt(21,Ws,!e.isProviderView,e.isProviderView)),a(),d("ngForOf",e.categories),a(4),H("placeholder",b(9,17,"providerInfo.catalogue.search")),pe("ngModel",e.filterInput),a(5),d("ngIf",e.getSelectedFilterLabel()),a(),d("ngIf",e.getSelectedFilterLabel()),a(),d("dismissable",!0),a(2),H("placeholder",b(18,19,"providerInfo.catalogue.filter_by")),d("options",e.filterOptions),pe("ngModel",e.isService),d("showClear",!1),a(3),d("ngForOf",e.selectedCategory==null?null:e.selectedCategory.children),a(2),d("ngIf",e.isService===!1),a(),d("ngIf",e.isService===!0),a(),d("ngIf",e.isService===null||e.isService===void 0),a(),d("ngIf",e.cart.length>0)}}function Ql(i,t){if(i&1&&h(0,"app-provider-subscription",103),i&2){let e=u();d("provider",e.provider)}}function Xl(i,t){if(i&1){let e=w();s(0,"div",106),C("click",function(){P(e);let o=u(2);return x(o.activeBottomTabIndex=0)}),h(1,"i",107),s(2,"span",108),p(3),_(4,"translate"),c()()}if(i&2){let e=u(2);d("ngClass",Nt(4,Kr,e.activeBottomTabIndex===0,e.activeBottomTabIndex!==0)),a(3),v(b(4,2,"providerInfo.catalogue.tab_catalogue"))}}function Zl(i,t){if(i&1){let e=w();s(0,"div",106),C("click",function(){P(e);let o=u(2);return x(o.activeBottomTabIndex=1)}),h(1,"i",109),s(2,"span",108),p(3),_(4,"translate"),c()()}if(i&2){let e=u(2);d("ngClass",Nt(4,Kr,e.activeBottomTabIndex===1,e.activeBottomTabIndex!==1)),a(3),v(b(4,2,"providerInfo.catalogue.tab_subscription"))}}function Kl(i,t){if(i&1&&(s(0,"div",104),f(1,Xl,5,7,"div",105)(2,Zl,5,7,"div",105),c()),i&2){let e=u();a(),d("ngIf",e.isOndemandAvailable),a(),d("ngIf",e.isSubscriptionAvailable)}}var Ke=class i{constructor(t,e,n,o,r,l,m,g){this._route=t;this._providerInfo=e;this._cartService=n;this.productService=o;this.router=r;this.dialog=l;this.toastService=m;this.cdr=g}activeIndex=0;isProviderView=!1;provider;hidden=!1;productId;categoryId;bottomTabIndexChange=new Y;selectedTab="on_demand";filterInput="";previewImages=[];queryParams={};searchSubject=new Le;isService=null;selectedProduct;isProductsLoading=!1;productSkeletons=Array.from({length:6});_allCategories=[];categories=[];selectedCategory=null;selectedSubcategory=null;selectedCategorySubcategories=[];products=[];productDefaultImg="assets/images/products/product-placeholder.png";_activeBottomTabIndex=0;get activeBottomTabIndex(){return this._activeBottomTabIndex}set activeBottomTabIndex(t){this._activeBottomTabIndex!==t&&(this._activeBottomTabIndex=t,this.bottomTabIndexChange.emit(t))}variants=[];selectedVariant={};enquirableProduct=[];filterOptions=[{label:"Product",value:!1},{label:"Service",value:!0}];get isOndemandAvailable(){return this.provider?.business_type?this.provider.business_type.includes("on_demand"):!1}get isSubscriptionAvailable(){return this.provider?.business_type?this.provider.business_type.includes("subscription"):!1}ngOnInit(){this.setupProviderContext(),history.state?.triggerRegistration&&(this.activeBottomTabIndex=1),this.bottomTabIndexChange.emit(this._activeBottomTabIndex),this.searchSubject.pipe(Tt(300),Et()).subscribe(e=>{this.queryParams.search=e.trim(),this.queryParams.search===""?this.selectedCategory&&this.fetchProducts(this.selectedCategory):this.provider?.provider_id&&this.provider.provider_id>0?(this.productService.updateProviderUrl(this.provider.provider_id),this.productService.listWithTotal(this.queryParams).subscribe(n=>{this.products=this.mapProductsToCategory(n.data),this.updateFilteredProducts(),this.cdr.detectChanges()})):console.warn("Cannot search products: Provider ID is missing or invalid")})}ngOnChanges(t){t.activeIndex&&(this.activeBottomTabIndex=this.activeIndex),t.provider&&this.setupProviderContext()}get cart(){return this._cartService.getCart()}getCartTotal(){return this.cart.reduce((t,e)=>{let n=Number(e.price||e.selling_price||e.price_per_quantity||0)||0,o=Number(e.quantity||1)||1;return t+n*o},0)}isOutOfStock(t){if(!t?.visibility)return!0;if(t?.variantsJson&&t.variantsJson.length>0){let e=this.selectedVariant[t.id];return e?(e.stock||0)===0:t.variantsJson.every(n=>(n.stock||0)===0)}return t.available_stock!==void 0&&t.available_stock===0}hasValidVariants(t){return!t?.variantsJson||t.variantsJson.length===0?!1:t.variantsJson.some(e=>e.size&&e.size.toString().trim().length>0)}hasVariantStock(t){if(!t?.variantsJson||t.variantsJson.length===0)return t.available_stock===void 0||t.available_stock>0;let e=this.selectedVariant[t.id];return e?(e.stock||0)>0:!1}addToCart(t){let e=this.provider?.provider_id;if(!e){console.warn("Cannot add to cart: Provider ID is missing");return}if(this.isOutOfStock(t)){console.warn("Cannot add out of stock product/variant to cart:",{product:t.name,variant:this.selectedVariant[t.id]?.size});return}if(t?.variantsJson&&t.variantsJson.length>0&&!this.selectedVariant[t.id]){this.toastService.warn("Selection Required","Please select a variant before adding to cart"),console.warn("Please select a variant before adding to cart:",t.name);return}let n=this._cartService.getCart(),o=n.findIndex(I=>{let k=I.id===t.id,A=this.selectedVariant[t.id];if(A){let B=I.selectedVariant;return B?B.variant_id&&A.variant_id?k&&B.variant_id===A.variant_id:k&&B.size===A.size:!1}return k&&!I.selectedVariant}),r,l=D({},t);if(this.selectedVariant[t.id]){let I=this.selectedVariant[t.id];l.selling_price=I.price,l.price=I.price,l.selectedVariant=I}let m=o>-1?n[o]:null,O=(m?m.quantity:0)+1,M=0;if(this.selectedVariant[t.id]?M=this.selectedVariant[t.id].stock||0:M=t.available_stock!==void 0?t.available_stock:9999,O>M){this.toastService.error("Out of Stock",`Cannot add more items. Only ${M} available.`);return}if(o>-1?r=n.map((I,k)=>k===o?U(D({},I),{quantity:O}):I):r=[...n,U(D({},l),{quantity:1})],this._cartService.setCart(e,r),typeof gtag<"u"){let I=0;t?.variantsJson&&t.variantsJson.length>0?I=this.selectedVariant[t.id]?.price||t.variantsJson[0]?.price||0:I=t.selling_price||0;let k=o>-1?n[o]:null,A=k?k.quantity+1:1;gtag("event","add_to_cart",{currency:"INR",value:I*A,items:[{item_id:t.id?.toString()||"",item_name:t.name||"",price:I,quantity:A}]})}}removeFromCart(t){let e=this.provider?.provider_id;if(!e){console.warn("Cannot remove from cart: Provider ID is missing");return}let n=this._cartService.getCart().map(o=>{let r=o.id===t,l=this.selectedVariant[t],m=!1;return r&&(l&&o.selectedVariant?o.selectedVariant.variant_id&&l.variant_id?m=o.selectedVariant.variant_id===l.variant_id:m=o.selectedVariant.size===l.size:!l&&!o.selectedVariant&&(m=!0)),m?U(D({},o),{quantity:o.quantity-1}):o}).filter(o=>o.quantity>0);this._cartService.setCart(e,n)}getItemQuantity(t){let e=this._cartService.getCart(),n=this.selectedVariant[t];if(n){let r=e.find(l=>l.id!==t||!l.selectedVariant?!1:l.selectedVariant.variant_id&&n.variant_id?l.selectedVariant.variant_id===n.variant_id:l.selectedVariant.size===n.size);return r?r.quantity:0}let o=e.find(r=>r.id===t&&!r.selectedVariant);return o?o.quantity:0}getTotalItems(){return this._cartService.getCart().reduce((t,e)=>t+e.quantity,0)}getTotalPrice(){return this._cartService.getCart().reduce((t,e)=>t+e.price*e.quantity,0)}setupProviderContext(){if(!this.provider?.provider_id){this.categories=[],this.selectedCategory=null,this.products=[],this.selectedVariant={},this.isProductsLoading=!1;return}this._cartService.validateCartProvider(this.provider.provider_id),console.log(`Loaded cart for provider ${this.provider.provider_id}: ${this.cart.length} items`),this.isSubscriptionAvailable&&!this.isOndemandAvailable?this.activeBottomTabIndex=1:this.isOndemandAvailable&&!this.isSubscriptionAvailable?this.activeBottomTabIndex=0:this.activeBottomTabIndex=this.activeIndex,this.categories=[],this.selectedCategory=null,this.selectedSubcategory=null,this.products=[],this.selectedVariant={},this._providerInfo.cachedProduct=[],this.isProductsLoading=!0,this._providerInfo.getCategories(this.provider.provider_id,0,1e3).subscribe(n=>{if(this.categories=n.categories.filter(o=>o.parent_id===null),this._allCategories=n.categories,this.categories.length>0){let o=this.categories[0],r=!1;if(this.categoryId){let l=n.categories.find(m=>+m.product_category_id==+this.categoryId);if(l)if(r=!0,l.parent_id===null)o=l;else{let m=this.categories.find(g=>g.product_category_id===l.parent_id);m?(o=m,this.selectedSubcategory=l):o=this.categories[0]}}this.selectedCategory=o,r||!this.productId?this.fetchProducts(this.selectedCategory):this.findProductAcrossCategories(this.productId)}else this.isProductsLoading=!1},()=>{this.isProductsLoading=!1})}switchCategory(t){console.log("Switching to category:",t.name),this.selectedCategory=t,this.setSelectedSubcategory(null),console.log("Subcategory cleared. SelectedSubcategory:",this.selectedSubcategory),this.fetchProducts(t)}fetchProducts(t){if(this.provider?.provider_id&&t?.product_category_id){let o=`${this.provider.provider_id}-${t.product_category_id}-1000-0`,r=this._providerInfo.productCache?.has?.(o)??!1;console.log(`Fetching products. CacheKey: ${o}, IsCached: ${r}`),r||(this.isProductsLoading=!0,this.products=[]),this.selectedVariant={},this._providerInfo.cachedProduct=[],this._providerInfo.getProductByCategory(this.provider.provider_id,t.product_category_id).pipe($e(l=>(console.error("Error fetching products:",l),Oe([{products:[]}])))).subscribe(l=>{console.log("API Response received in subscribe.");let m=Array.isArray(l)?l:[l],g=[];if(this.extractProductFromTree(m,g),console.log(`Extracted ${g.length} products.`),this._providerInfo.cachedProduct=g,this.products=[...g],this.setVariantForAll(),this.isProductsLoading=!1,this.updateFilteredProducts(),this.cdr.detectChanges(),this.productId){let O=M=>{let I=document.querySelector(".highlight-product");I||(I=document.querySelector(`[data-product-id="${this.productId}"]`)),I?(I.scrollIntoView({behavior:"auto",block:"center"}),setTimeout(()=>{let k=document.querySelector(".scrollable-content");if(k){let A=k.getBoundingClientRect(),B=I.getBoundingClientRect(),$=B.top-A.top-A.height/2+B.height/2;k.scrollBy({top:$,behavior:"smooth"})}},300)):M<4&&setTimeout(()=>O(M+1),600)};setTimeout(()=>O(1),1e3)}},()=>{this.isProductsLoading=!1,this.cdr.markForCheck()})}}findProductAcrossCategories(t){if(!this.provider?.provider_id)return;let e=this.provider.provider_id,n=o=>{if(o>=this.categories.length){this.selectedCategory=this.categories[0],this.fetchProducts(this.selectedCategory);return}let r=this.categories[o];this._providerInfo.getProductByCategory(e,r.product_category_id).pipe($e(()=>Oe([]))).subscribe(l=>{let m=Array.isArray(l)?l:[l];this.hasProductInTree(m,t)?(this.selectedCategory=r,this.fetchProducts(r)):n(o+1)})};n(0)}hasProductInTree(t,e){for(let n of t){if((n?.products||[]).some(l=>+l.product_id==+e))return!0;let r=n?.children||n?.subcategories||[];if(r.length>0&&this.hasProductInTree(r,e))return!0}return!1}setVariantForAll(){this.products.forEach(t=>{t?.variantsJson?.length&&this.selectVariant(t.variantsJson[0],t)})}selectVariant(t,e){let n;t?.variant_id?n=e.variantsJson.find(o=>o.variant_id===t.variant_id):t?.size?n=e.variantsJson.find(o=>o.size===t.size):n=t,this.selectedVariant[e.id]=n,n&&console.log(`[Catalogue] Selected variant for product ${e.id}:`,{size:n.size,price:n.price,stock:n.stock})}extractProductFromTree(t,e=[],n=new Set){return console.log("Extracting products from tree for category:",this.selectedCategory?.name),console.log("Raw API Response (cateProd):",t),t?.forEach(o=>{let r=o?.products?.map(l=>{let m=[];if(l.variants===null||l.variants===void 0)m=[];else if(typeof l.variants=="string")if(l.variants.trim()==="null"||l.variants.trim()==="")m=[];else try{m=JSON.parse(l.variants),Array.isArray(m)||(m=[])}catch{console.warn("Invalid variants JSON for product",l.product_id),m=[]}else Array.isArray(l.variants)?m=l.variants:m=[];return m=m.map(O=>U(D({},O),{disabled:(O.stock||0)===0})),U(D(D({id:l.product_id,name:l.product_name,img:l.product_image_url||"",variants:l.variants||"null",variantsJson:m,isService:!!l.is_service,productType:l.product_type,productSubType:l.product_subtype,formRegistrationId:l.form_registration_id,selling_price:l.selling_price,visibility:l.visibility},l.available_stock!==void 0&&{available_stock:l.available_stock}),l.per_day_limit!==void 0&&{per_day_limit:l.per_day_limit}),{categoryId:o.product_category_id||o.id,categoryIds:l.product_category_id||[o.product_category_id||o.id],description:l.description||l.short_description||""})});r?.length&&r.forEach(l=>{n.has(l.id)||(n.add(l.id),e.push(l))}),o?.children?.length&&this.extractProductFromTree(o.children,e,n)}),e}setSelectedSubcategory(t){this.selectedSubcategory?.product_category_id===t?.product_category_id?this.selectedSubcategory=null:this.selectedSubcategory=t,this.updateFilteredProducts()}selectTab(t){this.selectedTab=t,this.activeBottomTabIndex=t==="on_demand"?0:2}onInputChange(t){let e=t.target.value;this.searchSubject.next(e)}showProductDetails(t){if(this.isOutOfStock(t)){console.warn("Cannot view details for out of stock product");return}this.router.navigate(["customers/info/product-detail"],{state:{product:t}})}redirectToCart(t){this.router.url.includes("customers")?this.router.navigate(["customers/info/view-cart"],{state:{isProvider:!1,data:t}}):this.router.navigate(["providers/info/view-cart"],{state:{isProvider:!0,data:t}})}setShowCartSummary(t){let e=this._cartService.getCart();if(this.isProviderView?this._route.navigate(["providers/info/view-cart"],{state:{isProvider:this.isProviderView,data:e}}):this._route.navigate(["customers/info/view-cart"],{state:{data:e}}),typeof gtag<"u"&&e&&e.length>0){let n=e.reduce((o,r)=>{let l=Number(r.price||r.selling_price||r.price_per_quantity||0)||0,m=Number(r.quantity||1)||1;return o+l*m},0);gtag("event","view_cart",{currency:"INR",value:n,items:e.map(o=>({item_id:o.id?.toString()||"",item_name:o.name||"",price:o.price||0,quantity:o.quantity||1}))})}}getLastCartProduct(){return this.cart.length>0?this.cart[this.cart.length-1]:null}clearCart(t){t.stopPropagation();let e=this.provider?.provider_id;e&&this._cartService.setCart(e,[])}productView(t){if(this.isOutOfStock(t)){console.warn("Cannot view out of stock product");return}this._providerInfo.selectedProductForView=t,this._providerInfo.viewType$.next("PRODUCT_VIEW")}openDialog(t){if(this.isOutOfStock(t)){console.warn("Cannot open dialog for out of stock product");return}let e=(t.productSubType||"").toUpperCase();if(e in at){let n=e;this.dialog.open(qn,{width:"350px",panelClass:"sales-dialog-panel",data:{dialogType:at[n],providerId:this.provider?.provider_id,data:t}}).afterClosed().subscribe(r=>{})}else console.warn("Unknown product subtype:",e)}book(t){if(this.isOutOfStock(t)){console.warn("Cannot book out of stock product");return}if(t.productSubType!=="standard")this.openDialog(t);else{let e=this.provider?.provider_id;e&&this._cartService.setCart(e,[t]),this.redirectToCart(t)}}handleProductClick(t,e){if(e.stopPropagation(),!this.isOutOfStock(t)){if(t.productSubType==="flexible"||t.productSubType==="hybrid"){this.showProductDetails(t);return}t.productSubType==="product_subscription"?this.openDialog(t):this.isProviderView?this.addToCart(t):this.showProductDetails(t)}}handleProductAction(t,e){e.stopPropagation(),!this.isOutOfStock(t)&&(this.selectedProduct=t,t.productSubType==="product_subscription"||t.productSubType==="flexible"||t.productSubType==="hybrid"||t.productSubType==="forms"?this.openDialog(t):this.addToCart(t))}getActionLabel(t){return t.productType==="product"&&t.productSubType==="standard"?"ADD":"Proceed"}getSelectedFilterLabel(){if(this.isService===null||this.isService===void 0)return null;let t=this.filterOptions.find(e=>e.value===this.isService);return t?t.label:null}selectService(t){this.isService=t,this.updateFilteredProducts()}onFilterSelect(t){t.hide(),this.updateFilteredProducts(),this.cdr.detectChanges()}clearFilter(){this.isService=null,this.updateFilteredProducts()}displayedNonServiceProducts=[];displayedServiceProducts=[];displayedAllProducts=[];updateFilteredProducts(){let t=this.products.filter(o=>!o.isService&&o.productSubType!==at.SERVICE_SUBSCRIPTION&&o.productType!=="subscription");this.selectedSubcategory&&(t=t.filter(o=>o.categoryId===this.selectedSubcategory?.product_category_id||o.categoryIds?.includes(this.selectedSubcategory.product_category_id))),this.displayedNonServiceProducts=t;let e=this.products.filter(o=>o.isService&&o.productSubType!==at.SERVICE_SUBSCRIPTION&&o.productType!=="subscription");this.selectedSubcategory&&(e=e.filter(o=>o.categoryId===this.selectedSubcategory?.product_category_id||o.categoryIds?.includes(this.selectedSubcategory.product_category_id))),this.displayedServiceProducts=e,this.selectedSubcategory?this.displayedAllProducts=this.products.filter(o=>o.categoryId===this.selectedSubcategory?.product_category_id||o.categoryIds?.includes(this.selectedSubcategory.product_category_id)):this.displayedAllProducts=[...this.products];let n=this.products.length-(this.displayedNonServiceProducts.length+this.displayedServiceProducts.length);console.log("Updated filtered products:",{total:this.products.length,nonService:this.displayedNonServiceProducts.length,service:this.displayedServiceProducts.length,all:this.displayedAllProducts.length,droppedCount:n})}mapProductsToCategory(t){return t.map(e=>{let n=[],o="";if(e.variants===null||e.variants===void 0)n=[],o="null";else if(typeof e.variants=="string")if(o=e.variants,e.variants.trim()==="null"||e.variants.trim()==="")n=[];else try{n=JSON.parse(e.variants),Array.isArray(n)||(n=[])}catch{n=[]}else Array.isArray(e.variants)?(n=e.variants,o=JSON.stringify(e.variants)):(n=[],o="null");return U(D(D({id:e.product_id,name:e.product_name,img:e.product_image_url,images:e.product_image_url?.[0]||"",variants:o,variantsJson:n,isService:!!e.is_service,productType:e.product_type,productSubType:e.product_subtype,formRegistrationId:e.form_registration_id??null,selling_price:e.selling_price,visibility:e.visibility,categoryIds:e.product_category_id||[]},e.available_stock!==void 0&&{available_stock:e.available_stock}),e.per_day_limit!==void 0&&{per_day_limit:e.per_day_limit}),{description:e.description||e.short_description||""})})}truncateText(t,e){if(!t)return"";let n=t.trim();return n.length<=e?n:n.substring(0,e)+"..."}static \u0275fac=function(e){return new(e||i)(y(ae),y(Pe),y(ct),y(jt),y(ae),y(rt),y(Ne),y(He))};static \u0275cmp=F({type:i,selectors:[["provider-catalogue"]],inputs:{activeIndex:"activeIndex",isProviderView:"isProviderView",provider:"provider",hidden:"hidden",productId:"productId",categoryId:"categoryId"},outputs:{bottomTabIndexChange:"bottomTabIndexChange"},features:[ve],decls:4,vars:3,consts:[["filterOverlay",""],["productList",""],["noProducts",""],["addProductBtn",""],["noServiceProducts",""],["allProductsList",""],["noAllProducts",""],["addProductBtn2",""],[4,"ngIf"],[3,"provider",4,"ngIf"],["class","bottom-tab-switch fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg rounded-t-xl py-1 px-3 flex justify-around items-center",4,"ngIf"],["class","app-features-list",4,"ngIf"],[1,"flex","content-container","gap-1"],[1,"w-1/4","sticky","self-start","bg-white","rounded-xl","p-2","pb-20","overflow-y-auto","h-[calc(100vh-1rem)]","shadow-[0_0_15px_rgba(0,0,0,0.15)]",3,"ngClass"],["class","flex flex-col items-center p-2 border-b cursor-pointer categories-item hover:shadow-md",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"w-3/4","product-section-container"],[1,"sticky-catalogue-header"],[1,"search-wrapper"],["pInputText","","type","search",1,"search-input",3,"ngModelChange","input","placeholder","ngModel"],[1,"flex","items-center","filter-row"],[1,"flex","items-center","gap-2","filter-dropdown-wrap","relative"],["name","ListFilter",1,"w-4","h-4","text-purple-600","cursor-pointer",3,"click"],["class","text-[10px] text-gray-600 whitespace-nowrap",4,"ngIf"],["class","clear-filter-btn","aria-label","Clear filter",3,"click",4,"ngIf"],[3,"dismissable"],["optionLabel","label","optionValue","value",1,"w-[140px]","text-sm","custom-dropdown",3,"ngModelChange","onChange","options","ngModel","placeholder","showClear"],[1,"subcategory-scroll-container"],["class","cursor-pointer",3,"value","severity","click",4,"ngFor","ngForOf"],[1,"scrollable-content"],["class","view-cart-wrap animate-bounce-in",3,"click",4,"ngIf"],[1,"app-features-list"],[1,"pi","pi-shopping-cart"],[1,"pi","pi-angle-right"],[1,"pi","pi-ticket"],[1,"flex","flex-col","items-center","p-2","border-b","cursor-pointer","categories-item","hover:shadow-md",3,"click","ngClass"],[1,"w-12","h-12","object-cover","rounded-full","mb-2",3,"src","alt"],[1,"text-xs","text-center","text-gray-700"],[1,"text-[10px]","text-gray-600","whitespace-nowrap"],["aria-label","Clear filter",1,"clear-filter-btn",3,"click"],[1,"pi","pi-times"],[1,"cursor-pointer",3,"click","value","severity"],[4,"ngIf","ngIfElse"],[1,"grid","grid-cols-2","gap-1","product-list-container","product-skeleton-grid"],["class","product-card-skeleton",4,"ngFor","ngForOf"],[1,"product-card-skeleton"],[1,"skeleton-image","shimmer"],[1,"skeleton-line","skeleton-line--title","shimmer"],[1,"skeleton-line","skeleton-line--subtitle","shimmer"],[1,"skeleton-button","shimmer"],[1,"grid","grid-cols-2","gap-1","product-list-container"],[4,"ngFor","ngForOf"],[1,"bg-white","rounded-2xl","shadow-xl","p-3","flex","flex-col","items-center","text-center","relative","product-card-wrapper",3,"ngClass"],["class","out-of-stock-badge",4,"ngIf"],[1,"mb-2","rounded-lg","overflow-hidden","border","border-gray-200",3,"ngClass"],["alt","Product Image",1,"h-full","w-auto","object-contain","cursor-pointer",3,"click","src"],[1,"text-base","font-medium","text-gray-800","mb-1","leading-tight","line-clamp-2",3,"ngClass"],["class","w-full mt-1 px-1",3,"click",4,"ngIf"],[1,"flex","justify-between","items-center","w-full","mt-2","price-section"],["class","font-bold text-sm text-gray-800",3,"ngClass",4,"ngIf"],[1,"mt-1","product-price-wrap"],[1,"out-of-stock-badge"],[1,"w-full","mt-1","px-1",3,"click"],["optionLabel","size","placeholder","Select Size","styleClass","w-full text-sm custom-variant-dropdown","optionDisabled","disabled",3,"ngModelChange","onChange","options","ngModel","appendTo","panelStyleClass"],["pTemplate","item"],[1,"flex","justify-between","items-center","w-full","gap-4"],["class","font-semibold",4,"ngIf"],[1,"font-semibold"],[1,"font-bold","text-sm","text-gray-800",3,"ngClass"],[1,"flex","items-center","gap-2"],[1,"w-4","h-4","flex","items-center","justify-center","bg-purple-800","hover:bg-purple-900","text-white","rounded-full",3,"click"],[1,"pi","pi-minus","text-[0.6rem]"],[1,"text-sm","font-medium","text-gray-800"],[1,"pi","pi-plus","text-[0.6rem]"],[1,"action-button",3,"click","ngClass","disabled"],[1,"p-4","text-center","text-gray-500","font-semibold"],[1,"enq-product-list-container","flex","flex-col","gap-3"],[1,"flexible-product-card","m-2","cursor-pointer","relative","overflow-hidden","rounded-xl","shadow-md","bg-[#F8F4FC]",3,"click","ngClass"],[1,"wave-shape"],[1,"relative","z-10","flex","items-center","p-3","gap-3","h-full"],[1,"w-16","h-16","shrink-0","rounded-xl","overflow-hidden","bg-white","shadow-sm","border","border-gray-100","flex","items-center","justify-center","z-20"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"flex","flex-col","flex-1","justify-between","h-full","py-0.5","gap-1","z-20","min-w-0"],[1,"flex","justify-between","items-center"],[1,"text-sm","font-bold","text-[#4A148C]","leading-tight","line-clamp-1","mb-0.5"],[1,"text-[10px]","text-[#6A1B9A]","font-medium","line-clamp-1"],["class","text-xs font-semibold text-gray-800",3,"ngClass",4,"ngIf"],[1,"book-button",3,"click","ngClass","disabled"],["class","out-of-stock-badge-service",4,"ngIf"],[1,"text-xs","font-semibold","text-gray-800",3,"ngClass"],[1,"out-of-stock-badge-service"],[1,"flexible-product-card","col-span-2","m-2","cursor-pointer","relative","overflow-hidden","rounded-xl","shadow-md","bg-[#F8F4FC]",3,"click","ngClass"],["optionLabel","size","placeholder","Select Size","styleClass","w-full text-sm custom-variant-dropdown",3,"ngModelChange","onChange","options","ngModel","appendTo","panelStyleClass"],[1,"view-cart-wrap","animate-bounce-in",3,"click"],[1,"cart-preview-section"],[1,"product-image-wrapper"],[1,"cart-product-image",3,"src","alt"],["class","item-count-badge",4,"ngIf"],[1,"cart-info-section"],[1,"view-cart-text"],[1,"cart-items-text"],[1,"cart-arrow"],[1,"pi","pi-chevron-right"],[1,"item-count-badge"],[3,"provider"],[1,"bottom-tab-switch","fixed","bottom-0","left-0","right-0","bg-white","border-t","border-gray-200","shadow-lg","rounded-t-xl","py-1","px-3","flex","justify-around","items-center"],["class","flex flex-col items-center justify-center cursor-pointer transition-all duration-300 transform hover:scale-105 flex-1",3,"ngClass","click",4,"ngIf"],[1,"flex","flex-col","items-center","justify-center","cursor-pointer","transition-all","duration-300","transform","hover:scale-105","flex-1",3,"click","ngClass"],[1,"pi","pi-shopping-bag","text-[16px]","md:text-[18px]"],[1,"text-[9px]","md:text-[10px]","mt-0.5","font-medium","text-center"],[1,"pi","pi-credit-card","text-[16px]","md:text-[18px]"]],template:function(e,n){e&1&&(V(0),f(1,Wl,26,24,"ng-container",8)(2,Ql,1,1,"app-provider-subscription",9)(3,Kl,3,2,"div",10),z()),e&2&&(a(),d("ngIf",n.activeBottomTabIndex===0&&n.isOndemandAvailable),a(),d("ngIf",n.activeBottomTabIndex===1&&n.isSubscriptionAvailable),a(),d("ngIf",!n.isProviderView&&n.isOndemandAvailable&&n.isSubscriptionAvailable))},dependencies:[Ae,ee,R,Re,$n,We,ie,Q,Be,kr,Dr,jn,sn,q],styles:[".shimmer[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f3f4f6 25%,#e5e7eb,#f3f4f6 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_catalogue-shimmer 1.5s infinite}@keyframes _ngcontent-%COMP%_catalogue-shimmer{0%{background-position:200% 0}to{background-position:-200% 0}}.app-features-list[_ngcontent-%COMP%]{background-color:#fff}.app-features-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;justify-content:space-between;border-bottom:1px solid grey;padding:.2rem;align-items:center}.top-3rem[_ngcontent-%COMP%]{top:0}.content-container[_ngcontent-%COMP%]{margin-top:.5rem;margin-bottom:0;min-height:calc(100vh - 8rem)}.content-container[_ngcontent-%COMP%]   .top-44-cat-fil[_ngcontent-%COMP%]{top:0}.content-container[_ngcontent-%COMP%]   .category-sidebar[_ngcontent-%COMP%]{max-height:calc(100vh - 4rem)}.content-container[_ngcontent-%COMP%]   .category-sidebar[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.content-container[_ngcontent-%COMP%]   .category-sidebar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.content-container[_ngcontent-%COMP%]   .category-sidebar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:4px}.content-container[_ngcontent-%COMP%]   .category-sidebar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.content-container[_ngcontent-%COMP%]   .sticky-catalogue-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:100;background-color:#fff;padding-top:.5rem;padding-bottom:.5rem;margin-bottom:.5rem}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#fff;position:relative}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{flex-shrink:0}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]{display:flex;align-items:center;flex-shrink:0;margin-bottom:.5rem;gap:.5rem}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-dropdown-wrap[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex-shrink:0}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .clear-filter-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:18px;height:18px;border-radius:50%;background-color:#e5e7eb;border:none;cursor:pointer;transition:all .2s ease;padding:0}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .clear-filter-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:10px;color:#6b7280}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .clear-filter-btn[_ngcontent-%COMP%]:hover{background-color:#d1d5db;transform:scale(1.1)}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .clear-filter-btn[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#374151}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .clear-filter-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .subcategory-scroll-container[_ngcontent-%COMP%]{display:flex;overflow-x:auto;overflow-y:hidden;gap:.5rem;flex:1;align-items:center;-ms-overflow-style:none;scrollbar-width:none;scroll-behavior:smooth}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .subcategory-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   p-tag[_ngcontent-%COMP%]{flex-shrink:0;cursor:pointer}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   p-tag[_ngcontent-%COMP%]     .p-tag.p-tag-secondary{background-color:#f5e5ff;color:#323743;font-weight:400;white-space:nowrap}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   p-tag[_ngcontent-%COMP%]     .p-tag.p-tag-info{background-color:#5d157c;color:#fff;font-weight:600;white-space:nowrap}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .scrollable-content[_ngcontent-%COMP%]{flex:1;padding-bottom:5rem}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .product-list-container[_ngcontent-%COMP%]{position:relative;z-index:1;width:100%;display:grid;grid-template-columns:repeat(2,1fr);gap:.25rem;grid-auto-flow:row;grid-auto-rows:auto}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .product-list-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]     p-dropdown .p-dropdown.p-component.p-inputwrapper .p-element.p-dropdown-label.p-inputtext{padding:0;padding-left:.5rem}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .product-list-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]     p-dropdown p-overlay .p-overlay.p-component ul.p-dropdown-items p-dropdownitem.p-element li.p-element.p-dropdown-item{padding-left:.5rem}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .product-list-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-price-wrap[_ngcontent-%COMP%]{display:flex;justify-content:center}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .product-list-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-price-wrap[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{background-color:#5d157c}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .product-list-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-price-wrap[_ngcontent-%COMP%]   .incremental-btn-wrap[_ngcontent-%COMP%]{display:flex;justify-content:center}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .product-list-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-price-wrap[_ngcontent-%COMP%]   .incremental-btn-wrap[_ngcontent-%COMP%]   .minus-button[_ngcontent-%COMP%], .content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .product-list-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-price-wrap[_ngcontent-%COMP%]   .incremental-btn-wrap[_ngcontent-%COMP%]   .plus-button[_ngcontent-%COMP%]{background-color:#5d157c}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .product-list-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-price-wrap[_ngcontent-%COMP%]   .incremental-btn-wrap[_ngcontent-%COMP%]   .minus-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .product-list-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-price-wrap[_ngcontent-%COMP%]   .incremental-btn-wrap[_ngcontent-%COMP%]   .plus-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.6rem}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .enq-product-list-container[_ngcontent-%COMP%]{position:relative;z-index:1;padding:.5rem;gap:1rem}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .enq-product-list-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]{display:flex}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .enq-product-list-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   div.image-wrapper[_ngcontent-%COMP%]{width:30%}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .enq-product-list-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   div.product-detail[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .enq-product-list-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   div.product-detail[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#5d157c;font-size:.875rem;font-weight:700}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .enq-product-list-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   div.product-detail[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:.688rem;color:#9421c5}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .enq-product-list-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   div.product-detail[_ngcontent-%COMP%]   .btn-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#5d157c;color:#fff;font-size:.875rem;font-weight:400;margin-right:.5rem;padding:.25rem .75rem;border-radius:1rem}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .product-skeleton-grid[_ngcontent-%COMP%]   .product-card-skeleton[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;padding:1rem;display:flex;flex-direction:column;gap:.75rem;align-items:center;box-shadow:0 10px 25px #0f172a14;width:150px}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .product-skeleton-grid[_ngcontent-%COMP%]   .product-card-skeleton[_ngcontent-%COMP%]   .skeleton-image[_ngcontent-%COMP%]{width:100%;height:112px;border-radius:.75rem;background:#f1f5f9}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .product-skeleton-grid[_ngcontent-%COMP%]   .product-card-skeleton[_ngcontent-%COMP%]   .skeleton-line[_ngcontent-%COMP%]{width:100%;height:14px;border-radius:999px;background:#f1f5f9}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .product-skeleton-grid[_ngcontent-%COMP%]   .product-card-skeleton[_ngcontent-%COMP%]   .skeleton-line--title[_ngcontent-%COMP%]{width:90%}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .product-skeleton-grid[_ngcontent-%COMP%]   .product-card-skeleton[_ngcontent-%COMP%]   .skeleton-line--subtitle[_ngcontent-%COMP%]{width:70%}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .product-skeleton-grid[_ngcontent-%COMP%]   .product-card-skeleton[_ngcontent-%COMP%]   .skeleton-button[_ngcontent-%COMP%]{width:60%;height:28px;border-radius:999px;background:#f1f5f9}.categories-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#430f59;font-weight:700}.categories-item.selected-item[_ngcontent-%COMP%]{background-color:#f5e5ff}.bottom-tab-switch[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;gap:8px;padding:12px 16px;z-index:1000}.bottom-tab-switch[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease}.bottom-tab-switch[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;margin-bottom:4px}.bottom-tab-switch[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:11px;font-weight:500;text-align:center;word-wrap:break-word;overflow-wrap:break-word;white-space:normal;line-height:1.2;width:100%;max-width:100%}.bottom-tab-switch[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.tab-switcher[_ngcontent-%COMP%]{display:flex;width:97%;max-width:400px;border:2px solid #7b1fa2;border-radius:12px;overflow:hidden;margin:5px;background-color:#7b1fa2}.tab[_ngcontent-%COMP%]{flex:1;padding:5px 0;text-align:center;border:none;outline:none;font-size:14px;font-weight:500;background-color:transparent;color:#fff;cursor:pointer;transition:all .3s ease}.tab.active[_ngcontent-%COMP%]{background-color:#fff;color:#7b1fa2}.search-input[_ngcontent-%COMP%]{margin:5px;border:1px solid black;border-radius:14px;padding:2px 10px;width:97%}.action-button[_ngcontent-%COMP%]{background-color:#ffa41c;color:#000;font-size:.55rem;font-weight:500;padding:.25rem 1rem;border-radius:9999px;border:none;cursor:pointer;transition:all .3s ease}.action-button[_ngcontent-%COMP%]:hover{background-color:#d66600;transform:scale(1.02)}.action-button[_ngcontent-%COMP%]:active{transform:scale(.98)}.book-button[_ngcontent-%COMP%]{margin-top:.5rem;padding:.375rem 1rem;font-size:.55rem;font-weight:550;border-radius:9999px;background-color:#ffa41c;color:#4f126a;border:none;cursor:pointer;transition:all .3s ease;width:fit-content;align-self:flex-end}.book-button[_ngcontent-%COMP%]:hover{background-color:#d66600;transform:scale(1.02)}.book-button[_ngcontent-%COMP%]:active{transform:scale(.98)}.view-cart-wrap[_ngcontent-%COMP%]{position:fixed;bottom:85px;left:50%;transform:translate(-50%);background:linear-gradient(135deg,#5d157c,#7b1fa2);color:#fff;padding:8px 14px;border-radius:22px;display:flex;align-items:center;justify-content:space-between;box-shadow:0 4px 16px #5d157c73;cursor:pointer;transition:all .25s ease;z-index:999;width:55%;max-width:260px;min-height:48px;gap:10px}.view-cart-wrap[_ngcontent-%COMP%]   .cart-preview-section[_ngcontent-%COMP%]{position:relative;flex-shrink:0;width:42px;height:42px;display:flex;align-items:center;justify-content:center;z-index:1}.view-cart-wrap[_ngcontent-%COMP%]   .cart-preview-section[_ngcontent-%COMP%]   .product-image-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}.view-cart-wrap[_ngcontent-%COMP%]   .cart-preview-section[_ngcontent-%COMP%]   .product-image-wrapper[_ngcontent-%COMP%]   .cart-product-image[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:8px;object-fit:cover;border:2px solid rgba(255,255,255,.35);background:#ffffff1f;box-shadow:0 2px 6px #0003}.view-cart-wrap[_ngcontent-%COMP%]   .cart-preview-section[_ngcontent-%COMP%]   .product-image-wrapper[_ngcontent-%COMP%]   .item-count-badge[_ngcontent-%COMP%]{position:absolute;top:-6px;right:-6px;background:#ffa41c;color:#000;font-size:10px;font-weight:700;min-width:20px;height:20px;border-radius:10px;display:flex;align-items:center;justify-content:center;padding:0 5px;box-shadow:0 2px 6px #0000004d;border:2px solid #5d157c;z-index:2}.view-cart-wrap[_ngcontent-%COMP%]   .cart-info-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;gap:1px;min-width:0;z-index:10;position:relative;padding:0 4px}.view-cart-wrap[_ngcontent-%COMP%]   .cart-info-section[_ngcontent-%COMP%]   .view-cart-text[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#fff;line-height:1.15;letter-spacing:-.2px;position:relative;z-index:11;white-space:nowrap}.view-cart-wrap[_ngcontent-%COMP%]   .cart-info-section[_ngcontent-%COMP%]   .cart-items-text[_ngcontent-%COMP%]{font-size:10px;font-weight:400;color:#ffffffeb;line-height:1.15;position:relative;z-index:11;white-space:nowrap}.view-cart-wrap[_ngcontent-%COMP%]   .cart-arrow[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:transform .2s ease;z-index:10;padding:0}.view-cart-wrap[_ngcontent-%COMP%]   .cart-arrow[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:15px;color:#fff}.view-cart-wrap[_ngcontent-%COMP%]:hover{transform:translate(-50%) translateY(-2px);box-shadow:0 6px 20px #5d157c8c}.view-cart-wrap[_ngcontent-%COMP%]:hover   .cart-arrow[_ngcontent-%COMP%]{transform:translate(2px)}.view-cart-wrap[_ngcontent-%COMP%]:active{transform:translate(-50%) translateY(0);box-shadow:0 3px 14px #5d157c73}@keyframes _ngcontent-%COMP%_bounceIn{0%{transform:translate(-50%) translateY(100px);opacity:0}50%{transform:translate(-50%) translateY(-10px);opacity:1}70%{transform:translate(-50%) translateY(5px)}85%{transform:translate(-50%) translateY(-2px)}to{transform:translate(-50%) translateY(0)}}.animate-bounce-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounceIn .6s cubic-bezier(.34,1.56,.64,1)}.arrow[_ngcontent-%COMP%]{font-size:18px}.arrow-icon[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:24px;height:24px;border-radius:50%;background:linear-gradient(135deg,#6a1b9a,#ab47bc);color:#fff;font-weight:700;font-size:14px;cursor:pointer;transition:background .3s ease}.arrow-icon[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5e158b,#9b3fb2)}.product-card-wrapper[_ngcontent-%COMP%]{position:relative;min-height:auto;height:100%;padding-bottom:12px!important;display:flex;flex-direction:column}.product-card-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex-shrink:0}.product-card-wrapper.out-of-stock-card[_ngcontent-%COMP%]{opacity:.65;cursor:default;filter:grayscale(60%)}.product-card-wrapper.out-of-stock-card[_ngcontent-%COMP%]:hover{transform:none;box-shadow:0 10px 25px #0f172a14}.product-card-wrapper[_ngcontent-%COMP%]   .price-section[_ngcontent-%COMP%]{margin-top:auto}.out-of-stock-badge[_ngcontent-%COMP%]{position:absolute;top:8px;left:8px;background:#fd5006;color:#fff;font-size:.5rem;font-weight:700;padding:.25rem .5rem;border-radius:.375rem;z-index:10;box-shadow:0 2px 8px #fd50064d;letter-spacing:.5px;text-transform:uppercase}.service-card-wrapper[_ngcontent-%COMP%]{position:relative}.service-card-wrapper.out-of-stock-card[_ngcontent-%COMP%]{opacity:.65;pointer-events:none;filter:grayscale(60%)}.service-card-wrapper.out-of-stock-card[_ngcontent-%COMP%]:hover{transform:none}.out-of-stock-badge-service[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;background:#fd5006;color:#fff;font-size:.5rem;font-weight:700;padding:.25rem .5rem;border-radius:.375rem;z-index:10;box-shadow:0 2px 8px #fd50064d;letter-spacing:.5px;text-transform:uppercase}.out-of-stock-button[_ngcontent-%COMP%]{background-color:#9ca3af!important;color:#fff!important;cursor:not-allowed!important;opacity:.7;pointer-events:none}.out-of-stock-button[_ngcontent-%COMP%]:hover{background-color:#9ca3af!important;transform:none!important}.out-of-stock-button[_ngcontent-%COMP%]:active{transform:none!important}.grayscale[_ngcontent-%COMP%]{filter:grayscale(100%)}.opacity-50[_ngcontent-%COMP%]{opacity:.5}  p-dropdown.p-disabled .p-dropdown{background-color:#f3f4f6!important;cursor:not-allowed!important;opacity:.6}  .p-dropdown.custom-variant-dropdown{width:100%;border-radius:8px;border:1px solid #9ca3af!important;padding:0;min-height:28px;align-items:center}  .p-dropdown.custom-variant-dropdown .p-dropdown-label{padding:4px 8px;font-size:11px;color:#374151;font-weight:500}  .p-dropdown.custom-variant-dropdown .p-dropdown-trigger{width:24px;padding:0 4px}  .p-dropdown.custom-variant-dropdown .p-dropdown-trigger .p-dropdown-trigger-icon{font-size:10px}  .p-dropdown.custom-variant-dropdown:not(.p-disabled):hover{border-color:#5d157c!important}  .p-dropdown.custom-variant-dropdown.p-focus{border-color:#5d157c!important;box-shadow:0 0 0 1px #5d157c}  .highlight-product{border:2px solid #5d157c!important;box-shadow:0 0 12px #5d157c59}  .highlight-product-pulse{animation:_ngcontent-%COMP%_product-pulse .6s ease-in-out 3}@keyframes _ngcontent-%COMP%_product-pulse{0%,to{box-shadow:0 0 #5d157c4d}50%{box-shadow:0 0 16px 4px #5d157c80}}  .variant-dropdown-panel{font-size:12px;border-radius:8px;box-shadow:0 4px 12px #00000026;border:1px solid #e5e7eb}  .variant-dropdown-panel .p-dropdown-items-wrapper{max-height:150px!important}  .variant-dropdown-panel .p-dropdown-item{padding:6px 10px!important;font-size:11px}  .variant-dropdown-panel .p-dropdown-item.p-highlight{background-color:#f5e5ff;color:#5d157c}  .variant-dropdown-panel .p-dropdown-item:not(.p-highlight):not(.p-disabled):hover{background-color:#f3f4f6}.flexible-product-card[_ngcontent-%COMP%]{transition:transform .2s ease,box-shadow .2s ease;min-height:95px;border:1px solid rgba(229,231,235,.5)}.flexible-product-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 20px #5d157c26}.flexible-product-card[_ngcontent-%COMP%]   .wave-shape[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:0;background:linear-gradient(135deg,#e6cef2,#d7bde2,#c39bd3);clip-path:polygon(0 80%,30% 85%,60% 70%,100% 40%,100% 100%,0% 100%);opacity:.7}.flexible-product-card[_ngcontent-%COMP%]   .relative.z-10[_ngcontent-%COMP%]{position:relative;z-index:10}.highlight-product[_ngcontent-%COMP%]{box-shadow:0 0 0 3px #5d157c,0 4px 16px #5d157c40!important;animation:_ngcontent-%COMP%_highlight-pulse 1.5s ease-in-out}@keyframes _ngcontent-%COMP%_highlight-pulse{0%,to{box-shadow:0 0 0 3px #5d157c,0 4px 16px #5d157c40}50%{box-shadow:0 0 0 5px #5d157c,0 4px 24px #5d157c66}}.flexible-product-card.out-of-stock-card[_ngcontent-%COMP%]{opacity:.7;filter:grayscale(80%);cursor:default}.flexible-product-card.out-of-stock-card[_ngcontent-%COMP%]   .wave-shape[_ngcontent-%COMP%]{filter:grayscale(100%);opacity:.3}"]})};var Ht=class i{dataSource=new An(null);data$=this.dataSource.asObservable();setData(t){this.dataSource.next(t)}getData(){return this.dataSource.getValue()}static \u0275fac=function(e){return new(e||i)};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"})};function Yi(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Pt=Yi();function ca(i){Pt=i}var Ct={exec:()=>null};function j(i,t=""){let e=typeof i=="string"?i:i.source,n={replace:(o,r)=>{let l=typeof r=="string"?r:r.source;return l=l.replace(Ie.caret,"$1"),e=e.replace(o,l),n},getRegex:()=>new RegExp(e,t)};return n}var td=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),Ie={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:i=>new RegExp(`^( {0,3}${i})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}#`),htmlBeginRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}<(?:[a-z].*>|!--)`,"i"),blockquoteBeginRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}>`)},nd=/^(?:[ \t]*(?:\n|$))+/,id=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,od=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,un=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,rd=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Ji=/ {0,3}(?:[*+-]|\d{1,9}[.)])/,sa=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,la=j(sa).replace(/bull/g,Ji).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),ad=j(sa).replace(/bull/g,Ji).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Wi=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,cd=/^[^\n]+/,Qi=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,sd=j(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Qi).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),ld=j(/^(bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Ji).getRegex(),ui="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Xi=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,dd=j("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Xi).replace("tag",ui).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),da=j(Wi).replace("hr",un).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)])[ \\t]").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ui).getRegex(),pd=j(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",da).getRegex(),Zi={blockquote:pd,code:id,def:sd,fences:od,heading:rd,hr:un,html:dd,lheading:la,list:ld,newline:nd,paragraph:da,table:Ct,text:cd},ta=j("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",un).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)])[ \\t]").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ui).getRegex(),ud=U(D({},Zi),{lheading:ad,table:ta,paragraph:j(Wi).replace("hr",un).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ta).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)])[ \\t]").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ui).getRegex()}),md=U(D({},Zi),{html:j(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Xi).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ct,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:j(Wi).replace("hr",un).replace("heading",` *#{1,6} *[^
]`).replace("lheading",la).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()}),gd=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,_d=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,pa=/^( {2,}|\\)\n(?!\s*$)/,fd=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,mi=/[\p{P}\p{S}]/u,Ki=/[\s\p{P}\p{S}]/u,ua=/[^\s\p{P}\p{S}]/u,hd=j(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Ki).getRegex(),ma=/(?!~)[\p{P}\p{S}]/u,bd=/(?!~)[\s\p{P}\p{S}]/u,Cd=/(?:[^\s\p{P}\p{S}]|~)/u,ga=/(?![*_])[\p{P}\p{S}]/u,vd=/(?![*_])[\s\p{P}\p{S}]/u,Pd=/(?:[^\s\p{P}\p{S}]|[*_])/u,xd=j(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",td?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),_a=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Od=j(_a,"u").replace(/punct/g,mi).getRegex(),Md=j(_a,"u").replace(/punct/g,ma).getRegex(),fa="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",yd=j(fa,"gu").replace(/notPunctSpace/g,ua).replace(/punctSpace/g,Ki).replace(/punct/g,mi).getRegex(),Sd=j(fa,"gu").replace(/notPunctSpace/g,Cd).replace(/punctSpace/g,bd).replace(/punct/g,ma).getRegex(),wd=j("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,ua).replace(/punctSpace/g,Ki).replace(/punct/g,mi).getRegex(),Id=j(/^~~?(?:((?!~)punct)|[^\s~])/,"u").replace(/punct/g,ga).getRegex(),kd="^[^~]+(?=[^~])|(?!~)punct(~~?)(?=[\\s]|$)|notPunctSpace(~~?)(?!~)(?=punctSpace|$)|(?!~)punctSpace(~~?)(?=notPunctSpace)|[\\s](~~?)(?!~)(?=punct)|(?!~)punct(~~?)(?!~)(?=punct)|notPunctSpace(~~?)(?=notPunctSpace)",Td=j(kd,"gu").replace(/notPunctSpace/g,Pd).replace(/punctSpace/g,vd).replace(/punct/g,ga).getRegex(),Ed=j(/\\(punct)/,"gu").replace(/punct/g,mi).getRegex(),Dd=j(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Fd=j(Xi).replace("(?:-->|$)","-->").getRegex(),Ad=j("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Fd).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),li=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,Bd=j(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",li).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),ha=j(/^!?\[(label)\]\[(ref)\]/).replace("label",li).replace("ref",Qi).getRegex(),ba=j(/^!?\[(ref)\](?:\[\])?/).replace("ref",Qi).getRegex(),Rd=j("reflink|nolink(?!\\()","g").replace("reflink",ha).replace("nolink",ba).getRegex(),na=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,eo={_backpedal:Ct,anyPunctuation:Ed,autolink:Dd,blockSkip:xd,br:pa,code:_d,del:Ct,delLDelim:Ct,delRDelim:Ct,emStrongLDelim:Od,emStrongRDelimAst:yd,emStrongRDelimUnd:wd,escape:gd,link:Bd,nolink:ba,punctuation:hd,reflink:ha,reflinkSearch:Rd,tag:Ad,text:fd,url:Ct},Nd=U(D({},eo),{link:j(/^!?\[(label)\]\((.*?)\)/).replace("label",li).getRegex(),reflink:j(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",li).getRegex()}),$i=U(D({},eo),{emStrongRDelimAst:Sd,emStrongLDelim:Md,delLDelim:Id,delRDelim:Td,url:j(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",na).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:j(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",na).getRegex()}),Vd=U(D({},$i),{br:j(pa).replace("{2,}","*").getRegex(),text:j($i.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),si={normal:Zi,gfm:ud,pedantic:md},ln={normal:eo,gfm:$i,breaks:Vd,pedantic:Nd},zd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ia=i=>zd[i];function Qe(i,t){if(t){if(Ie.escapeTest.test(i))return i.replace(Ie.escapeReplace,ia)}else if(Ie.escapeTestNoEncode.test(i))return i.replace(Ie.escapeReplaceNoEncode,ia);return i}function oa(i){try{i=encodeURI(i).replace(Ie.percentDecode,"%")}catch{return null}return i}function ra(i,t){let e=i.replace(Ie.findPipe,(r,l,m)=>{let g=!1,O=l;for(;--O>=0&&m[O]==="\\";)g=!g;return g?"|":" |"}),n=e.split(Ie.splitPipe),o=0;if(n[0].trim()||n.shift(),n.length>0&&!n.at(-1)?.trim()&&n.pop(),t)if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;o<n.length;o++)n[o]=n[o].trim().replace(Ie.slashPipe,"|");return n}function dn(i,t,e){let n=i.length;if(n===0)return"";let o=0;for(;o<n;){let r=i.charAt(n-o-1);if(r===t&&!e)o++;else if(r!==t&&e)o++;else break}return i.slice(0,n-o)}function Ld(i,t){if(i.indexOf(t[1])===-1)return-1;let e=0;for(let n=0;n<i.length;n++)if(i[n]==="\\")n++;else if(i[n]===t[0])e++;else if(i[n]===t[1]&&(e--,e<0))return n;return e>0?-2:-1}function Ud(i,t=0){let e=t,n="";for(let o of i)if(o==="	"){let r=4-e%4;n+=" ".repeat(r),e+=r}else n+=o,e++;return n}function aa(i,t,e,n,o){let r=t.href,l=t.title||null,m=i[1].replace(o.other.outputLinkReplace,"$1");n.state.inLink=!0;let g={type:i[0].charAt(0)==="!"?"image":"link",raw:e,href:r,title:l,text:m,tokens:n.inlineTokens(m)};return n.state.inLink=!1,g}function qd(i,t,e){let n=i.match(e.other.indentCodeCompensation);if(n===null)return t;let o=n[1];return t.split(`
`).map(r=>{let l=r.match(e.other.beginningSpace);if(l===null)return r;let[m]=l;return m.length>=o.length?r.slice(o.length):r}).join(`
`)}var di=class{options;rules;lexer;constructor(i){this.options=i||Pt}space(i){let t=this.rules.block.newline.exec(i);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(i){let t=this.rules.block.code.exec(i);if(t){let e=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:dn(e,`
`)}}}fences(i){let t=this.rules.block.fences.exec(i);if(t){let e=t[0],n=qd(e,t[3]||"",this.rules);return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:n}}}heading(i){let t=this.rules.block.heading.exec(i);if(t){let e=t[2].trim();if(this.rules.other.endingHash.test(e)){let n=dn(e,"#");(this.options.pedantic||!n||this.rules.other.endingSpaceChar.test(n))&&(e=n.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(i){let t=this.rules.block.hr.exec(i);if(t)return{type:"hr",raw:dn(t[0],`
`)}}blockquote(i){let t=this.rules.block.blockquote.exec(i);if(t){let e=dn(t[0],`
`).split(`
`),n="",o="",r=[];for(;e.length>0;){let l=!1,m=[],g;for(g=0;g<e.length;g++)if(this.rules.other.blockquoteStart.test(e[g]))m.push(e[g]),l=!0;else if(!l)m.push(e[g]);else break;e=e.slice(g);let O=m.join(`
`),M=O.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}
${O}`:O,o=o?`${o}
${M}`:M;let I=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(M,r,!0),this.lexer.state.top=I,e.length===0)break;let k=r.at(-1);if(k?.type==="code")break;if(k?.type==="blockquote"){let A=k,B=A.raw+`
`+e.join(`
`),$=this.blockquote(B);r[r.length-1]=$,n=n.substring(0,n.length-A.raw.length)+$.raw,o=o.substring(0,o.length-A.text.length)+$.text;break}else if(k?.type==="list"){let A=k,B=A.raw+`
`+e.join(`
`),$=this.list(B);r[r.length-1]=$,n=n.substring(0,n.length-k.raw.length)+$.raw,o=o.substring(0,o.length-A.raw.length)+$.raw,e=B.substring(r.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:n,tokens:r,text:o}}}list(i){let t=this.rules.block.list.exec(i);if(t){let e=t[1].trim(),n=e.length>1,o={type:"list",raw:"",ordered:n,start:n?+e.slice(0,-1):"",loose:!1,items:[]};e=n?`\\d{1,9}\\${e.slice(-1)}`:`\\${e}`,this.options.pedantic&&(e=n?e:"[*+-]");let r=this.rules.other.listItemRegex(e),l=!1;for(;i;){let g=!1,O="",M="";if(!(t=r.exec(i))||this.rules.block.hr.test(i))break;O=t[0],i=i.substring(O.length);let I=Ud(t[2].split(`
`,1)[0],t[1].length),k=i.split(`
`,1)[0],A=!I.trim(),B=0;if(this.options.pedantic?(B=2,M=I.trimStart()):A?B=t[1].length+1:(B=I.search(this.rules.other.nonSpaceChar),B=B>4?1:B,M=I.slice(B),B+=t[1].length),A&&this.rules.other.blankLine.test(k)&&(O+=k+`
`,i=i.substring(k.length+1),g=!0),!g){let $=this.rules.other.nextBulletRegex(B),ze=this.rules.other.hrRegex(B),be=this.rules.other.fencesBeginRegex(B),_t=this.rules.other.headingBeginRegex(B),nt=this.rules.other.htmlBeginRegex(B),It=this.rules.other.blockquoteBeginRegex(B);for(;i;){let Te=i.split(`
`,1)[0],Se;if(k=Te,this.options.pedantic?(k=k.replace(this.rules.other.listReplaceNesting,"  "),Se=k):Se=k.replace(this.rules.other.tabCharGlobal,"    "),be.test(k)||_t.test(k)||nt.test(k)||It.test(k)||$.test(k)||ze.test(k))break;if(Se.search(this.rules.other.nonSpaceChar)>=B||!k.trim())M+=`
`+Se.slice(B);else{if(A||I.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||be.test(I)||_t.test(I)||ze.test(I))break;M+=`
`+k}A=!k.trim(),O+=Te+`
`,i=i.substring(Te.length+1),I=Se.slice(B)}}o.loose||(l?o.loose=!0:this.rules.other.doubleBlankLine.test(O)&&(l=!0)),o.items.push({type:"list_item",raw:O,task:!!this.options.gfm&&this.rules.other.listIsTask.test(M),loose:!1,text:M,tokens:[]}),o.raw+=O}let m=o.items.at(-1);if(m)m.raw=m.raw.trimEnd(),m.text=m.text.trimEnd();else return;o.raw=o.raw.trimEnd();for(let g of o.items){if(this.lexer.state.top=!1,g.tokens=this.lexer.blockTokens(g.text,[]),g.task){if(g.text=g.text.replace(this.rules.other.listReplaceTask,""),g.tokens[0]?.type==="text"||g.tokens[0]?.type==="paragraph"){g.tokens[0].raw=g.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),g.tokens[0].text=g.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let M=this.lexer.inlineQueue.length-1;M>=0;M--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[M].src)){this.lexer.inlineQueue[M].src=this.lexer.inlineQueue[M].src.replace(this.rules.other.listReplaceTask,"");break}}let O=this.rules.other.listTaskCheckbox.exec(g.raw);if(O){let M={type:"checkbox",raw:O[0]+" ",checked:O[0]!=="[ ]"};g.checked=M.checked,o.loose?g.tokens[0]&&["paragraph","text"].includes(g.tokens[0].type)&&"tokens"in g.tokens[0]&&g.tokens[0].tokens?(g.tokens[0].raw=M.raw+g.tokens[0].raw,g.tokens[0].text=M.raw+g.tokens[0].text,g.tokens[0].tokens.unshift(M)):g.tokens.unshift({type:"paragraph",raw:M.raw,text:M.raw,tokens:[M]}):g.tokens.unshift(M)}}if(!o.loose){let O=g.tokens.filter(I=>I.type==="space"),M=O.length>0&&O.some(I=>this.rules.other.anyLine.test(I.raw));o.loose=M}}if(o.loose)for(let g of o.items){g.loose=!0;for(let O of g.tokens)O.type==="text"&&(O.type="paragraph")}return o}}html(i){let t=this.rules.block.html.exec(i);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(i){let t=this.rules.block.def.exec(i);if(t){let e=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:n,title:o}}}table(i){let t=this.rules.block.table.exec(i);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let e=ra(t[1]),n=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),o=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],r={type:"table",raw:t[0],header:[],align:[],rows:[]};if(e.length===n.length){for(let l of n)this.rules.other.tableAlignRight.test(l)?r.align.push("right"):this.rules.other.tableAlignCenter.test(l)?r.align.push("center"):this.rules.other.tableAlignLeft.test(l)?r.align.push("left"):r.align.push(null);for(let l=0;l<e.length;l++)r.header.push({text:e[l],tokens:this.lexer.inline(e[l]),header:!0,align:r.align[l]});for(let l of o)r.rows.push(ra(l,r.header.length).map((m,g)=>({text:m,tokens:this.lexer.inline(m),header:!1,align:r.align[g]})));return r}}lheading(i){let t=this.rules.block.lheading.exec(i);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(i){let t=this.rules.block.paragraph.exec(i);if(t){let e=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(i){let t=this.rules.block.text.exec(i);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(i){let t=this.rules.inline.escape.exec(i);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(i){let t=this.rules.inline.tag.exec(i);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(i){let t=this.rules.inline.link.exec(i);if(t){let e=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(e)){if(!this.rules.other.endAngleBracket.test(e))return;let r=dn(e.slice(0,-1),"\\");if((e.length-r.length)%2===0)return}else{let r=Ld(t[2],"()");if(r===-2)return;if(r>-1){let l=(t[0].indexOf("!")===0?5:4)+t[1].length+r;t[2]=t[2].substring(0,r),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let n=t[2],o="";if(this.options.pedantic){let r=this.rules.other.pedanticHrefTitle.exec(n);r&&(n=r[1],o=r[3])}else o=t[3]?t[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(e)?n=n.slice(1):n=n.slice(1,-1)),aa(t,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(i,t){let e;if((e=this.rules.inline.reflink.exec(i))||(e=this.rules.inline.nolink.exec(i))){let n=(e[2]||e[1]).replace(this.rules.other.multipleSpaceGlobal," "),o=t[n.toLowerCase()];if(!o){let r=e[0].charAt(0);return{type:"text",raw:r,text:r}}return aa(e,o,e[0],this.lexer,this.rules)}}emStrong(i,t,e=""){let n=this.rules.inline.emStrongLDelim.exec(i);if(!(!n||n[3]&&e.match(this.rules.other.unicodeAlphaNumeric))&&(!(n[1]||n[2])||!e||this.rules.inline.punctuation.exec(e))){let o=[...n[0]].length-1,r,l,m=o,g=0,O=n[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(O.lastIndex=0,t=t.slice(-1*i.length+o);(n=O.exec(t))!=null;){if(r=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!r)continue;if(l=[...r].length,n[3]||n[4]){m+=l;continue}else if((n[5]||n[6])&&o%3&&!((o+l)%3)){g+=l;continue}if(m-=l,m>0)continue;l=Math.min(l,l+m+g);let M=[...n[0]][0].length,I=i.slice(0,o+n.index+M+l);if(Math.min(o,l)%2){let A=I.slice(1,-1);return{type:"em",raw:I,text:A,tokens:this.lexer.inlineTokens(A)}}let k=I.slice(2,-2);return{type:"strong",raw:I,text:k,tokens:this.lexer.inlineTokens(k)}}}}codespan(i){let t=this.rules.inline.code.exec(i);if(t){let e=t[2].replace(this.rules.other.newLineCharGlobal," "),n=this.rules.other.nonSpaceChar.test(e),o=this.rules.other.startingSpaceChar.test(e)&&this.rules.other.endingSpaceChar.test(e);return n&&o&&(e=e.substring(1,e.length-1)),{type:"codespan",raw:t[0],text:e}}}br(i){let t=this.rules.inline.br.exec(i);if(t)return{type:"br",raw:t[0]}}del(i,t,e=""){let n=this.rules.inline.delLDelim.exec(i);if(n&&(!n[1]||!e||this.rules.inline.punctuation.exec(e))){let o=[...n[0]].length-1,r,l,m=o,g=this.rules.inline.delRDelim;for(g.lastIndex=0,t=t.slice(-1*i.length+o);(n=g.exec(t))!=null;){if(r=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!r||(l=[...r].length,l!==o))continue;if(n[3]||n[4]){m+=l;continue}if(m-=l,m>0)continue;l=Math.min(l,l+m);let O=[...n[0]][0].length,M=i.slice(0,o+n.index+O+l),I=M.slice(o,-o);return{type:"del",raw:M,text:I,tokens:this.lexer.inlineTokens(I)}}}}autolink(i){let t=this.rules.inline.autolink.exec(i);if(t){let e,n;return t[2]==="@"?(e=t[1],n="mailto:"+e):(e=t[1],n=e),{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}url(i){let t;if(t=this.rules.inline.url.exec(i)){let e,n;if(t[2]==="@")e=t[0],n="mailto:"+e;else{let o;do o=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(o!==t[0]);e=t[0],t[1]==="www."?n="http://"+t[0]:n=t[0]}return{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(i){let t=this.rules.inline.text.exec(i);if(t){let e=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:e}}}},qe=class Gi{tokens;options;state;inlineQueue;tokenizer;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Pt,this.options.tokenizer=this.options.tokenizer||new di,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let e={other:Ie,block:si.normal,inline:ln.normal};this.options.pedantic?(e.block=si.pedantic,e.inline=ln.pedantic):this.options.gfm&&(e.block=si.gfm,this.options.breaks?e.inline=ln.breaks:e.inline=ln.gfm),this.tokenizer.rules=e}static get rules(){return{block:si,inline:ln}}static lex(t,e){return new Gi(e).lex(t)}static lexInline(t,e){return new Gi(e).inlineTokens(t)}lex(t){t=t.replace(Ie.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){let n=this.inlineQueue[e];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,e=[],n=!1){for(this.options.pedantic&&(t=t.replace(Ie.tabCharGlobal,"    ").replace(Ie.spaceLine,""));t;){let o;if(this.options.extensions?.block?.some(l=>(o=l.call({lexer:this},t,e))?(t=t.substring(o.raw.length),e.push(o),!0):!1))continue;if(o=this.tokenizer.space(t)){t=t.substring(o.raw.length);let l=e.at(-1);o.raw.length===1&&l!==void 0?l.raw+=`
`:e.push(o);continue}if(o=this.tokenizer.code(t)){t=t.substring(o.raw.length);let l=e.at(-1);l?.type==="paragraph"||l?.type==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+o.raw,l.text+=`
`+o.text,this.inlineQueue.at(-1).src=l.text):e.push(o);continue}if(o=this.tokenizer.fences(t)){t=t.substring(o.raw.length),e.push(o);continue}if(o=this.tokenizer.heading(t)){t=t.substring(o.raw.length),e.push(o);continue}if(o=this.tokenizer.hr(t)){t=t.substring(o.raw.length),e.push(o);continue}if(o=this.tokenizer.blockquote(t)){t=t.substring(o.raw.length),e.push(o);continue}if(o=this.tokenizer.list(t)){t=t.substring(o.raw.length),e.push(o);continue}if(o=this.tokenizer.html(t)){t=t.substring(o.raw.length),e.push(o);continue}if(o=this.tokenizer.def(t)){t=t.substring(o.raw.length);let l=e.at(-1);l?.type==="paragraph"||l?.type==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+o.raw,l.text+=`
`+o.raw,this.inlineQueue.at(-1).src=l.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title},e.push(o));continue}if(o=this.tokenizer.table(t)){t=t.substring(o.raw.length),e.push(o);continue}if(o=this.tokenizer.lheading(t)){t=t.substring(o.raw.length),e.push(o);continue}let r=t;if(this.options.extensions?.startBlock){let l=1/0,m=t.slice(1),g;this.options.extensions.startBlock.forEach(O=>{g=O.call({lexer:this},m),typeof g=="number"&&g>=0&&(l=Math.min(l,g))}),l<1/0&&l>=0&&(r=t.substring(0,l+1))}if(this.state.top&&(o=this.tokenizer.paragraph(r))){let l=e.at(-1);n&&l?.type==="paragraph"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+o.raw,l.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):e.push(o),n=r.length!==t.length,t=t.substring(o.raw.length);continue}if(o=this.tokenizer.text(t)){t=t.substring(o.raw.length);let l=e.at(-1);l?.type==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+o.raw,l.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):e.push(o);continue}if(t){let l="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let n=t,o=null;if(this.tokens.links){let g=Object.keys(this.tokens.links);if(g.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)g.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,o.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let r;for(;(o=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)r=o[2]?o[2].length:0,n=n.slice(0,o.index+r)+"["+"a".repeat(o[0].length-r-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);n=this.options.hooks?.emStrongMask?.call({lexer:this},n)??n;let l=!1,m="";for(;t;){l||(m=""),l=!1;let g;if(this.options.extensions?.inline?.some(M=>(g=M.call({lexer:this},t,e))?(t=t.substring(g.raw.length),e.push(g),!0):!1))continue;if(g=this.tokenizer.escape(t)){t=t.substring(g.raw.length),e.push(g);continue}if(g=this.tokenizer.tag(t)){t=t.substring(g.raw.length),e.push(g);continue}if(g=this.tokenizer.link(t)){t=t.substring(g.raw.length),e.push(g);continue}if(g=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(g.raw.length);let M=e.at(-1);g.type==="text"&&M?.type==="text"?(M.raw+=g.raw,M.text+=g.text):e.push(g);continue}if(g=this.tokenizer.emStrong(t,n,m)){t=t.substring(g.raw.length),e.push(g);continue}if(g=this.tokenizer.codespan(t)){t=t.substring(g.raw.length),e.push(g);continue}if(g=this.tokenizer.br(t)){t=t.substring(g.raw.length),e.push(g);continue}if(g=this.tokenizer.del(t,n,m)){t=t.substring(g.raw.length),e.push(g);continue}if(g=this.tokenizer.autolink(t)){t=t.substring(g.raw.length),e.push(g);continue}if(!this.state.inLink&&(g=this.tokenizer.url(t))){t=t.substring(g.raw.length),e.push(g);continue}let O=t;if(this.options.extensions?.startInline){let M=1/0,I=t.slice(1),k;this.options.extensions.startInline.forEach(A=>{k=A.call({lexer:this},I),typeof k=="number"&&k>=0&&(M=Math.min(M,k))}),M<1/0&&M>=0&&(O=t.substring(0,M+1))}if(g=this.tokenizer.inlineText(O)){t=t.substring(g.raw.length),g.raw.slice(-1)!=="_"&&(m=g.raw.slice(-1)),l=!0;let M=e.at(-1);M?.type==="text"?(M.raw+=g.raw,M.text+=g.text):e.push(g);continue}if(t){let M="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(M);break}else throw new Error(M)}}return e}},pi=class{options;parser;constructor(i){this.options=i||Pt}space(i){return""}code({text:i,lang:t,escaped:e}){let n=(t||"").match(Ie.notSpaceStart)?.[0],o=i.replace(Ie.endingNewline,"")+`
`;return n?'<pre><code class="language-'+Qe(n)+'">'+(e?o:Qe(o,!0))+`</code></pre>
`:"<pre><code>"+(e?o:Qe(o,!0))+`</code></pre>
`}blockquote({tokens:i}){return`<blockquote>
${this.parser.parse(i)}</blockquote>
`}html({text:i}){return i}def(i){return""}heading({tokens:i,depth:t}){return`<h${t}>${this.parser.parseInline(i)}</h${t}>
`}hr(i){return`<hr>
`}list(i){let t=i.ordered,e=i.start,n="";for(let l=0;l<i.items.length;l++){let m=i.items[l];n+=this.listitem(m)}let o=t?"ol":"ul",r=t&&e!==1?' start="'+e+'"':"";return"<"+o+r+`>
`+n+"</"+o+`>
`}listitem(i){return`<li>${this.parser.parse(i.tokens)}</li>
`}checkbox({checked:i}){return"<input "+(i?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:i}){return`<p>${this.parser.parseInline(i)}</p>
`}table(i){let t="",e="";for(let o=0;o<i.header.length;o++)e+=this.tablecell(i.header[o]);t+=this.tablerow({text:e});let n="";for(let o=0;o<i.rows.length;o++){let r=i.rows[o];e="";for(let l=0;l<r.length;l++)e+=this.tablecell(r[l]);n+=this.tablerow({text:e})}return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+n+`</table>
`}tablerow({text:i}){return`<tr>
${i}</tr>
`}tablecell(i){let t=this.parser.parseInline(i.tokens),e=i.header?"th":"td";return(i.align?`<${e} align="${i.align}">`:`<${e}>`)+t+`</${e}>
`}strong({tokens:i}){return`<strong>${this.parser.parseInline(i)}</strong>`}em({tokens:i}){return`<em>${this.parser.parseInline(i)}</em>`}codespan({text:i}){return`<code>${Qe(i,!0)}</code>`}br(i){return"<br>"}del({tokens:i}){return`<del>${this.parser.parseInline(i)}</del>`}link({href:i,title:t,tokens:e}){let n=this.parser.parseInline(e),o=oa(i);if(o===null)return n;i=o;let r='<a href="'+i+'"';return t&&(r+=' title="'+Qe(t)+'"'),r+=">"+n+"</a>",r}image({href:i,title:t,text:e,tokens:n}){n&&(e=this.parser.parseInline(n,this.parser.textRenderer));let o=oa(i);if(o===null)return Qe(e);i=o;let r=`<img src="${i}" alt="${Qe(e)}"`;return t&&(r+=` title="${Qe(t)}"`),r+=">",r}text(i){return"tokens"in i&&i.tokens?this.parser.parseInline(i.tokens):"escaped"in i&&i.escaped?i.text:Qe(i.text)}},to=class{strong({text:i}){return i}em({text:i}){return i}codespan({text:i}){return i}del({text:i}){return i}html({text:i}){return i}text({text:i}){return i}link({text:i}){return""+i}image({text:i}){return""+i}br(){return""}checkbox({raw:i}){return i}},je=class Hi{options;renderer;textRenderer;constructor(t){this.options=t||Pt,this.options.renderer=this.options.renderer||new pi,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new to}static parse(t,e){return new Hi(e).parse(t)}static parseInline(t,e){return new Hi(e).parseInline(t)}parse(t){let e="";for(let n=0;n<t.length;n++){let o=t[n];if(this.options.extensions?.renderers?.[o.type]){let l=o,m=this.options.extensions.renderers[l.type].call({parser:this},l);if(m!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(l.type)){e+=m||"";continue}}let r=o;switch(r.type){case"space":{e+=this.renderer.space(r);break}case"hr":{e+=this.renderer.hr(r);break}case"heading":{e+=this.renderer.heading(r);break}case"code":{e+=this.renderer.code(r);break}case"table":{e+=this.renderer.table(r);break}case"blockquote":{e+=this.renderer.blockquote(r);break}case"list":{e+=this.renderer.list(r);break}case"checkbox":{e+=this.renderer.checkbox(r);break}case"html":{e+=this.renderer.html(r);break}case"def":{e+=this.renderer.def(r);break}case"paragraph":{e+=this.renderer.paragraph(r);break}case"text":{e+=this.renderer.text(r);break}default:{let l='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return e}parseInline(t,e=this.renderer){let n="";for(let o=0;o<t.length;o++){let r=t[o];if(this.options.extensions?.renderers?.[r.type]){let m=this.options.extensions.renderers[r.type].call({parser:this},r);if(m!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)){n+=m||"";continue}}let l=r;switch(l.type){case"escape":{n+=e.text(l);break}case"html":{n+=e.html(l);break}case"link":{n+=e.link(l);break}case"image":{n+=e.image(l);break}case"checkbox":{n+=e.checkbox(l);break}case"strong":{n+=e.strong(l);break}case"em":{n+=e.em(l);break}case"codespan":{n+=e.codespan(l);break}case"br":{n+=e.br(l);break}case"del":{n+=e.del(l);break}case"text":{n+=e.text(l);break}default:{let m='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(m),"";throw new Error(m)}}}return n}},pn=class{options;block;constructor(i){this.options=i||Pt}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(i){return i}postprocess(i){return i}processAllTokens(i){return i}emStrongMask(i){return i}provideLexer(){return this.block?qe.lex:qe.lexInline}provideParser(){return this.block?je.parse:je.parseInline}},jd=class{defaults=Yi();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=je;Renderer=pi;TextRenderer=to;Lexer=qe;Tokenizer=di;Hooks=pn;constructor(...i){this.use(...i)}walkTokens(i,t){let e=[];for(let n of i)switch(e=e.concat(t.call(this,n)),n.type){case"table":{let o=n;for(let r of o.header)e=e.concat(this.walkTokens(r.tokens,t));for(let r of o.rows)for(let l of r)e=e.concat(this.walkTokens(l.tokens,t));break}case"list":{let o=n;e=e.concat(this.walkTokens(o.items,t));break}default:{let o=n;this.defaults.extensions?.childTokens?.[o.type]?this.defaults.extensions.childTokens[o.type].forEach(r=>{let l=o[r].flat(1/0);e=e.concat(this.walkTokens(l,t))}):o.tokens&&(e=e.concat(this.walkTokens(o.tokens,t)))}}return e}use(...i){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return i.forEach(e=>{let n=D({},e);if(n.async=this.defaults.async||n.async||!1,e.extensions&&(e.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){let r=t.renderers[o.name];r?t.renderers[o.name]=function(...l){let m=o.renderer.apply(this,l);return m===!1&&(m=r.apply(this,l)),m}:t.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let r=t[o.level];r?r.unshift(o.tokenizer):t[o.level]=[o.tokenizer],o.start&&(o.level==="block"?t.startBlock?t.startBlock.push(o.start):t.startBlock=[o.start]:o.level==="inline"&&(t.startInline?t.startInline.push(o.start):t.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(t.childTokens[o.name]=o.childTokens)}),n.extensions=t),e.renderer){let o=this.defaults.renderer||new pi(this.defaults);for(let r in e.renderer){if(!(r in o))throw new Error(`renderer '${r}' does not exist`);if(["options","parser"].includes(r))continue;let l=r,m=e.renderer[l],g=o[l];o[l]=(...O)=>{let M=m.apply(o,O);return M===!1&&(M=g.apply(o,O)),M||""}}n.renderer=o}if(e.tokenizer){let o=this.defaults.tokenizer||new di(this.defaults);for(let r in e.tokenizer){if(!(r in o))throw new Error(`tokenizer '${r}' does not exist`);if(["options","rules","lexer"].includes(r))continue;let l=r,m=e.tokenizer[l],g=o[l];o[l]=(...O)=>{let M=m.apply(o,O);return M===!1&&(M=g.apply(o,O)),M}}n.tokenizer=o}if(e.hooks){let o=this.defaults.hooks||new pn;for(let r in e.hooks){if(!(r in o))throw new Error(`hook '${r}' does not exist`);if(["options","block"].includes(r))continue;let l=r,m=e.hooks[l],g=o[l];pn.passThroughHooks.has(r)?o[l]=O=>{if(this.defaults.async&&pn.passThroughHooksRespectAsync.has(r))return ke(this,null,function*(){let I=yield m.call(o,O);return g.call(o,I)});let M=m.call(o,O);return g.call(o,M)}:o[l]=(...O)=>{if(this.defaults.async)return ke(this,null,function*(){let I=yield m.apply(o,O);return I===!1&&(I=yield g.apply(o,O)),I});let M=m.apply(o,O);return M===!1&&(M=g.apply(o,O)),M}}n.hooks=o}if(e.walkTokens){let o=this.defaults.walkTokens,r=e.walkTokens;n.walkTokens=function(l){let m=[];return m.push(r.call(this,l)),o&&(m=m.concat(o.call(this,l))),m}}this.defaults=D(D({},this.defaults),n)}),this}setOptions(i){return this.defaults=D(D({},this.defaults),i),this}lexer(i,t){return qe.lex(i,t??this.defaults)}parser(i,t){return je.parse(i,t??this.defaults)}parseMarkdown(i){return(t,e)=>{let n=D({},e),o=D(D({},this.defaults),n),r=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&n.async===!1)return r(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return r(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return r(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(o.hooks&&(o.hooks.options=o,o.hooks.block=i),o.async)return ke(this,null,function*(){let l=o.hooks?yield o.hooks.preprocess(t):t,m=yield(o.hooks?yield o.hooks.provideLexer():i?qe.lex:qe.lexInline)(l,o),g=o.hooks?yield o.hooks.processAllTokens(m):m;o.walkTokens&&(yield Promise.all(this.walkTokens(g,o.walkTokens)));let O=yield(o.hooks?yield o.hooks.provideParser():i?je.parse:je.parseInline)(g,o);return o.hooks?yield o.hooks.postprocess(O):O}).catch(r);try{o.hooks&&(t=o.hooks.preprocess(t));let l=(o.hooks?o.hooks.provideLexer():i?qe.lex:qe.lexInline)(t,o);o.hooks&&(l=o.hooks.processAllTokens(l)),o.walkTokens&&this.walkTokens(l,o.walkTokens);let m=(o.hooks?o.hooks.provideParser():i?je.parse:je.parseInline)(l,o);return o.hooks&&(m=o.hooks.postprocess(m)),m}catch(l){return r(l)}}}onError(i,t){return e=>{if(e.message+=`
Please report this to https://github.com/markedjs/marked.`,i){let n="<p>An error occurred:</p><pre>"+Qe(e.message+"",!0)+"</pre>";return t?Promise.resolve(n):n}if(t)return Promise.reject(e);throw e}}},vt=new jd;function L(i,t){return vt.parse(i,t)}L.options=L.setOptions=function(i){return vt.setOptions(i),L.defaults=vt.defaults,ca(L.defaults),L};L.getDefaults=Yi;L.defaults=Pt;L.use=function(...i){return vt.use(...i),L.defaults=vt.defaults,ca(L.defaults),L};L.walkTokens=function(i,t){return vt.walkTokens(i,t)};L.parseInline=vt.parseInline;L.Parser=je;L.parser=je.parse;L.Renderer=pi;L.TextRenderer=to;L.Lexer=qe;L.lexer=qe.lex;L.Tokenizer=di;L.Hooks=pn;L.parse=L;var Cf=L.options,vf=L.setOptions,Pf=L.use,xf=L.walkTokens,Of=L.parseInline;var Mf=je.parse,yf=qe.lex;function $d(i,t){if(i&1){let e=w();s(0,"button",10),C("click",function(){P(e);let o=u();return x(o.toggleEdit())}),h(1,"i",11),s(2,"span",12),p(3),_(4,"translate"),c()()}i&2&&(a(3),v(b(4,1,"common.edit")))}function Gd(i,t){if(i&1){let e=w();s(0,"img",19),C("click",function(){let o=P(e).index,r=u(3);return x(r.selectBannerImage(o))})("error",function(o){P(e);let r=u(3);return x(r.onImageError(o))}),c()}if(i&2){let e=t.$implicit,n=t.index,o=u(3);G("selected",o.selectedBannerIndex===n),d("src",e,le)("alt","Thumbnail "+(n+1))}}function Hd(i,t){if(i&1&&(s(0,"div",17),f(1,Gd,1,4,"img",18),c()),i&2){let e=u(2);a(),d("ngForOf",e.bannerImages)}}function Yd(i,t){if(i&1){let e=w();s(0,"div",13)(1,"div",14)(2,"img",15),C("error",function(o){P(e);let r=u();return x(r.onImageError(o))}),c()(),f(3,Hd,2,1,"div",16),c()}if(i&2){let e=u();a(2),d("src",e.bannerImages[e.selectedBannerIndex],le)("alt","Banner image "+(e.selectedBannerIndex+1)),a(),d("ngIf",e.bannerImages.length>1)}}function Jd(i,t){if(i&1&&h(0,"div",23),i&2){let e=u(2);d("innerHTML",e.formattedDescription,it)}}function Wd(i,t){i&1&&(s(0,"div",24),h(1,"i",25),s(2,"p",26),p(3,"No description provided"),c()())}function Qd(i,t){if(i&1&&(s(0,"div",20),f(1,Jd,1,1,"div",21)(2,Wd,4,0,"div",22),c()),i&2){let e=u();a(),d("ngIf",e.description),a(),d("ngIf",!e.description)}}function Xd(i,t){if(i&1&&(s(0,"div",45),h(1,"i",46),s(2,"span"),p(3),c()()),i&2){let e=u(2);a(3),v(e.uploadError)}}function Zd(i,t){if(i&1){let e=w();s(0,"div",49)(1,"img",50),C("error",function(o){P(e);let r=u(3);return x(r.onImageError(o))}),c()()}if(i&2){let e=t.$implicit,n=t.index;a(),Vo("alt","New banner preview ",n+1,""),d("src",e,le)}}function Kd(i,t){if(i&1&&(s(0,"div",47),f(1,Zd,2,3,"div",48),c()),i&2){let e=u(2);a(),d("ngForOf",e.selectedBannerPreviews)}}function ep(i,t){if(i&1){let e=w();s(0,"div",27),f(1,Xd,4,1,"div",28),s(2,"div",29)(3,"div",30)(4,"span",31),p(5,"Upload banner images"),c(),s(6,"span",32),p(7," Include images about your business, services, or store ambience. You can upload up to 5 images in total. "),c()(),s(8,"label",33),h(9,"i",34),s(10,"span"),p(11,"Select images"),c(),s(12,"input",35),C("change",function(o){P(e);let r=u();return x(r.onBannerFilesSelected(o))}),c()(),f(13,Kd,2,1,"div",36),c(),s(14,"div",37)(15,"textarea",38),me("ngModelChange",function(o){P(e);let r=u();return ue(r.description,o)||(r.description=o),x(o)}),c(),s(16,"span",39),p(17),c()(),s(18,"div",40)(19,"button",41),C("click",function(){P(e);let o=u();return x(o.toggleEdit())}),h(20,"i",42),s(21,"span"),p(22),_(23,"translate"),c()(),s(24,"button",43),C("click",function(){P(e);let o=u();return x(o.save())}),h(25,"i",44),s(26,"span"),p(27),_(28,"translate"),c()()()()}if(i&2){let e=u();a(),d("ngIf",e.uploadError),a(12),d("ngIf",e.selectedBannerPreviews.length>0),a(2),pe("ngModel",e.description),a(2),S("",e.description.length,"/500"),a(5),v(b(23,6,"common.cancel")),a(5),v(b(28,8,"providerInfo.save"))}}var mn=class i{userType="CUSTOMER";enumUserTypes=bt;provider=void 0;saveAbout=new Y;description="";formattedDescription="";isEditing=!1;bannerImages=[];selectedBannerIndex=0;selectedBannerFiles=[];selectedBannerPreviews=[];uploadError=null;MAX_BANNER_IMAGES=5;ngOnInit(){L.setOptions({breaks:!0,gfm:!0}),this.provider&&(this.description=this.provider.about_us||"",this.formattedDescription=this.convertMarkdownToHtml(this.description),this.bannerImages=this.provider.banner_images||[],this.selectedBannerIndex=0)}ngOnChanges(t){t.provider&&this.provider&&(this.description=this.provider.about_us||"",this.formattedDescription=this.convertMarkdownToHtml(this.description),this.bannerImages=this.provider.banner_images||[],this.selectedBannerIndex=0,this.selectedBannerFiles=[],this.selectedBannerPreviews=[],this.uploadError=null)}hasBannerImages(){return Array.isArray(this.bannerImages)&&this.bannerImages.length>0}toggleEdit(){this.isEditing=!this.isEditing,!this.isEditing&&this.provider&&(this.description=this.provider.about_us||"",this.selectedBannerFiles=[],this.selectedBannerPreviews=[],this.uploadError=null)}onBannerFilesSelected(t){let e=t.target,n=e.files;if(!n||n.length===0)return;let o=Array.from(n),r=this.bannerImages?.length||0,l=this.selectedBannerFiles.length;if(r+l+o.length>this.MAX_BANNER_IMAGES){this.uploadError=`You can upload up to ${this.MAX_BANNER_IMAGES} images only. Upgrade your plan to upload more.`,e.value="";return}this.uploadError=null,this.selectedBannerFiles=[...this.selectedBannerFiles,...o],this.selectedBannerPreviews=[],this.selectedBannerFiles.forEach(g=>{let O=new FileReader;O.onload=M=>{this.selectedBannerPreviews.push(M.target.result)},O.readAsDataURL(g)})}save(){let t=this.description.trim();t&&(this.saveAbout.emit({aboutUs:t,files:this.selectedBannerFiles}),this.formattedDescription=this.convertMarkdownToHtml(t),this.isEditing=!1)}selectBannerImage(t){t>=0&&t<this.bannerImages.length&&(this.selectedBannerIndex=t)}onImageError(t){}convertMarkdownToHtml(t){return t?L.parse(t):""}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=F({type:i,selectors:[["about-us"]],inputs:{userType:"userType",provider:"provider"},outputs:{saveAbout:"saveAbout"},features:[ve],decls:12,vars:7,consts:[[1,"about-us-container"],[1,"about-us-card"],[1,"card-header"],[1,"title-row"],[1,"pi","pi-info-circle","title-icon"],[1,"section-title"],["class","edit-btn","title","Edit About Us",3,"click",4,"ngIf"],["class","banner-display",4,"ngIf"],["class","card-content",4,"ngIf"],["class","card-content edit-mode",4,"ngIf"],["title","Edit About Us",1,"edit-btn",3,"click"],[1,"pi","pi-pencil"],[1,"edit-text"],[1,"banner-display"],[1,"main-banner-image"],[1,"main-image",3,"error","src","alt"],["class","thumbnail-grid",4,"ngIf"],[1,"thumbnail-grid"],["class","thumbnail-image",3,"src","alt","selected","click","error",4,"ngFor","ngForOf"],[1,"thumbnail-image",3,"click","error","src","alt"],[1,"card-content"],["class","about-text",3,"innerHTML",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"about-text",3,"innerHTML"],[1,"empty-state"],[1,"pi","pi-file-edit","empty-icon"],[1,"empty-text"],[1,"card-content","edit-mode"],["class","upload-error-banner",4,"ngIf"],[1,"banner-upload-section"],[1,"upload-header"],[1,"upload-title"],[1,"upload-subtitle"],[1,"upload-label"],[1,"pi","pi-image"],["type","file","multiple","","accept","image/*","hidden","",3,"change"],["class","upload-preview",4,"ngIf"],[1,"textarea-wrapper"],["rows","6","pInputTextarea","","placeholder","Use # Heading, **Bold**, --- Horizontal line","maxlength","500",1,"edit-textarea",3,"ngModelChange","ngModel"],[1,"char-count"],[1,"action-buttons"],[1,"btn-cancel",3,"click"],[1,"pi","pi-times"],[1,"btn-save",3,"click"],[1,"pi","pi-check"],[1,"upload-error-banner"],[1,"pi","pi-info-circle"],[1,"upload-preview"],["class","preview-item",4,"ngFor","ngForOf"],[1,"preview-item"],[3,"error","src","alt"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),h(4,"i",4),s(5,"h3",5),p(6),_(7,"translate"),c()(),f(8,$d,5,3,"button",6),c(),f(9,Yd,4,3,"div",7)(10,Qd,3,2,"div",8)(11,ep,29,10,"div",9),c()()),e&2&&(a(6),v(b(7,5,"providerInfo.about_us")),a(2),d("ngIf",n.userType===n.enumUserTypes.PROVIDER&&!n.isEditing),a(),d("ngIf",n.hasBannerImages()&&!n.isEditing),a(),d("ngIf",!n.isEditing),a(),d("ngIf",n.isEditing&&n.userType===n.enumUserTypes.PROVIDER))},dependencies:[ee,R,Ir,ie,Q,Vn,Be,q],styles:[".about-us-container[_ngcontent-%COMP%]{padding:1rem}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #00000014;border:1px solid #e5e7eb;overflow:hidden;transition:box-shadow .3s ease}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0000001f}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.25rem;background:linear-gradient(135deg,#faf5ff,#f9fafb);border-bottom:1px solid #e5e7eb}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .title-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .title-row[_ngcontent-%COMP%]   .title-icon[_ngcontent-%COMP%]{font-size:20px;color:#5d157c}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .title-row[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:700;color:#1a1a1a;letter-spacing:-.3px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 16px;background:#fff;border:1px solid #e5e7eb;border-radius:8px;cursor:pointer;color:#5d157c;font-size:14px;font-weight:600;transition:all .2s ease}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]   .edit-text[_ngcontent-%COMP%]{color:#5d157c}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]:hover{background:#5d157c;border-color:#5d157c;color:#fff;transform:translateY(-1px);box-shadow:0 4px 12px #5d157c40}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]:hover   .edit-text[_ngcontent-%COMP%]{color:#fff}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .banner-display[_ngcontent-%COMP%]{padding:1.25rem;background:#fafbfc;border-bottom:1px solid #e5e7eb}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .banner-display[_ngcontent-%COMP%]   .main-banner-image[_ngcontent-%COMP%]{margin-bottom:1rem;border-radius:10px;overflow:hidden;box-shadow:0 2px 8px #0000001a;background-color:#fff}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .banner-display[_ngcontent-%COMP%]   .main-banner-image[_ngcontent-%COMP%]   .main-image[_ngcontent-%COMP%]{width:100%;height:auto;max-height:400px;object-fit:contain;display:block}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .banner-display[_ngcontent-%COMP%]   .thumbnail-grid[_ngcontent-%COMP%]{display:flex;gap:.5rem;overflow-x:auto;padding-bottom:.5rem;-webkit-overflow-scrolling:touch}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .banner-display[_ngcontent-%COMP%]   .thumbnail-grid[_ngcontent-%COMP%]::-webkit-scrollbar{height:6px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .banner-display[_ngcontent-%COMP%]   .thumbnail-grid[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .banner-display[_ngcontent-%COMP%]   .thumbnail-grid[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:10px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .banner-display[_ngcontent-%COMP%]   .thumbnail-grid[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .banner-display[_ngcontent-%COMP%]   .thumbnail-grid[_ngcontent-%COMP%]   .thumbnail-image[_ngcontent-%COMP%]{width:4rem;height:4rem;min-width:4rem;border-radius:8px;cursor:pointer;border:2px solid transparent;transition:all .2s ease;object-fit:cover;background-color:#fff}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .banner-display[_ngcontent-%COMP%]   .thumbnail-grid[_ngcontent-%COMP%]   .thumbnail-image[_ngcontent-%COMP%]:hover{border-color:#cbd5e1;transform:translateY(-2px);box-shadow:0 4px 8px #00000026}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .banner-display[_ngcontent-%COMP%]   .thumbnail-grid[_ngcontent-%COMP%]   .thumbnail-image.selected[_ngcontent-%COMP%]{border-color:#5d157c;box-shadow:0 4px 12px #5d157c4d}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding:1.25rem;min-height:100px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content.edit-mode[_ngcontent-%COMP%]{padding:1rem 1.25rem 1.25rem}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .about-text[_ngcontent-%COMP%]{margin:0;font-size:15px;color:#4b5563;line-height:1.7;white-space:pre-wrap;word-wrap:break-word}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px;padding:1.5rem 1rem}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:36px;color:#d1d5db}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-text[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#9ca3af;font-weight:500}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .upload-error-banner[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:.75rem;padding:8px 10px;border-radius:8px;background:#fef2f2;border:1px solid #fecaca;color:#b91c1c;font-size:13px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .upload-error-banner[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .banner-upload-section[_ngcontent-%COMP%]{margin-bottom:1rem;display:flex;flex-direction:column;gap:.75rem}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .banner-upload-section[_ngcontent-%COMP%]   .upload-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .banner-upload-section[_ngcontent-%COMP%]   .upload-header[_ngcontent-%COMP%]   .upload-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#111827}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .banner-upload-section[_ngcontent-%COMP%]   .upload-header[_ngcontent-%COMP%]   .upload-subtitle[_ngcontent-%COMP%]{font-size:12px;color:#6b7280}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .banner-upload-section[_ngcontent-%COMP%]   .upload-label[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:8px 14px;border-radius:999px;border:1px dashed #d1d5db;background:#f9fafb;color:#4b5563;font-size:13px;font-weight:500;cursor:pointer;transition:all .2s ease}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .banner-upload-section[_ngcontent-%COMP%]   .upload-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px;color:#5d157c}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .banner-upload-section[_ngcontent-%COMP%]   .upload-label[_ngcontent-%COMP%]:hover{border-color:#5d157c;background:#fdf2ff;color:#111827}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .banner-upload-section[_ngcontent-%COMP%]   .upload-preview[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .banner-upload-section[_ngcontent-%COMP%]   .upload-preview[_ngcontent-%COMP%]   .preview-item[_ngcontent-%COMP%]{width:4rem;height:4rem;border-radius:8px;overflow:hidden;border:1px solid #e5e7eb;background:#fff;box-shadow:0 1px 3px #0000000f}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .banner-upload-section[_ngcontent-%COMP%]   .upload-preview[_ngcontent-%COMP%]   .preview-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .textarea-wrapper[_ngcontent-%COMP%]{position:relative;margin-bottom:1rem}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .textarea-wrapper[_ngcontent-%COMP%]   .edit-textarea[_ngcontent-%COMP%]{width:100%;padding:14px 16px 36px;border:2px solid #e5e7eb;border-radius:10px;font-size:15px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;background:#fafbfc;color:#1f2937;resize:vertical;transition:all .2s ease;line-height:1.6;min-height:130px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .textarea-wrapper[_ngcontent-%COMP%]   .edit-textarea[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .textarea-wrapper[_ngcontent-%COMP%]   .edit-textarea[_ngcontent-%COMP%]:focus{border-color:#5d157c;outline:none;background:#fff;box-shadow:0 0 0 3px #5d157c1a}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .textarea-wrapper[_ngcontent-%COMP%]   .edit-textarea[_ngcontent-%COMP%]:hover:not(:focus){border-color:#cbd5e1;background:#fff}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .textarea-wrapper[_ngcontent-%COMP%]   .char-count[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:14px;font-size:12px;color:#9ca3af;font-weight:600;background:#fafbfcf2;padding:2px 7px;border-radius:5px;backdrop-filter:blur(4px)}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:flex-end}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%], .about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{display:flex;align-items:center;gap:7px;padding:10px 20px;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s cubic-bezier(.4,0,.2,1)}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{background:#f3f4f6;color:#6b7280;border:1px solid #e5e7eb}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover{background:#e5e7eb;color:#374151;border-color:#d1d5db}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:active{transform:scale(.98)}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{background:linear-gradient(135deg,#5d157c,#4a0f5e);color:#fff;box-shadow:0 2px 8px #5d157c4d}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 14px #5d157c66}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:active{transform:translateY(0)}@media (max-width: 768px){.about-us-container[_ngcontent-%COMP%]{padding:.75rem}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:.875rem 1rem}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .title-row[_ngcontent-%COMP%]{gap:8px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .title-row[_ngcontent-%COMP%]   .title-icon[_ngcontent-%COMP%]{font-size:18px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .title-row[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:16px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]{padding:7px 14px;font-size:13px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:13px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .banner-display[_ngcontent-%COMP%]{padding:1rem}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .banner-display[_ngcontent-%COMP%]   .main-banner-image[_ngcontent-%COMP%]   .main-image[_ngcontent-%COMP%]{max-height:300px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .banner-display[_ngcontent-%COMP%]   .thumbnail-grid[_ngcontent-%COMP%]   .thumbnail-image[_ngcontent-%COMP%]{width:3.5rem;height:3.5rem;min-width:3.5rem}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%], .about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content.edit-mode[_ngcontent-%COMP%]{padding:1rem}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .about-text[_ngcontent-%COMP%]{font-size:14px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{padding:1.25rem .75rem}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:32px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-text[_ngcontent-%COMP%]{font-size:13px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .banner-upload-section[_ngcontent-%COMP%]   .upload-label[_ngcontent-%COMP%]{font-size:12px;padding:7px 12px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .banner-upload-section[_ngcontent-%COMP%]   .upload-preview[_ngcontent-%COMP%]   .preview-item[_ngcontent-%COMP%]{width:3.5rem;height:3.5rem}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .textarea-wrapper[_ngcontent-%COMP%]{margin-bottom:.875rem}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .textarea-wrapper[_ngcontent-%COMP%]   .edit-textarea[_ngcontent-%COMP%]{font-size:14px;padding:12px 14px 34px;min-height:120px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .textarea-wrapper[_ngcontent-%COMP%]   .char-count[_ngcontent-%COMP%]{font-size:11px;bottom:9px;right:12px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{gap:8px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%], .about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{padding:9px 16px;font-size:13px;gap:6px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:13px}}@media (max-width: 480px){.about-us-container[_ngcontent-%COMP%]{padding:.5rem}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:.75rem .875rem;flex-wrap:wrap;gap:.5rem}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .title-row[_ngcontent-%COMP%]{gap:7px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .title-row[_ngcontent-%COMP%]   .title-icon[_ngcontent-%COMP%]{font-size:16px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .title-row[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:15px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .banner-display[_ngcontent-%COMP%]{padding:.875rem}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .banner-display[_ngcontent-%COMP%]   .main-banner-image[_ngcontent-%COMP%]{margin-bottom:.75rem}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .banner-display[_ngcontent-%COMP%]   .main-banner-image[_ngcontent-%COMP%]   .main-image[_ngcontent-%COMP%]{max-height:250px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .banner-display[_ngcontent-%COMP%]   .thumbnail-grid[_ngcontent-%COMP%]{gap:.375rem}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .banner-display[_ngcontent-%COMP%]   .thumbnail-grid[_ngcontent-%COMP%]   .thumbnail-image[_ngcontent-%COMP%]{width:3rem;height:3rem;min-width:3rem;border-radius:6px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding:.875rem}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content.edit-mode[_ngcontent-%COMP%]{padding:.75rem .875rem .875rem}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .about-text[_ngcontent-%COMP%]{font-size:13px;line-height:1.6}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{padding:1rem .5rem}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .banner-upload-section[_ngcontent-%COMP%]   .upload-label[_ngcontent-%COMP%]{width:100%;justify-content:center}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .banner-upload-section[_ngcontent-%COMP%]   .upload-preview[_ngcontent-%COMP%]   .preview-item[_ngcontent-%COMP%]{width:3rem;height:3rem}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .textarea-wrapper[_ngcontent-%COMP%]   .edit-textarea[_ngcontent-%COMP%]{min-height:110px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{flex-direction:row;gap:8px}.about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%], .about-us-container[_ngcontent-%COMP%]   .about-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{flex:1;justify-content:center;padding:9px 14px;font-size:13px}}"]})};function np(i,t){i&1&&(s(0,"div",19),h(1,"i",20),p(2),_(3,"translate"),c()),i&2&&(a(2),S(" ",b(3,1,"providerInfo.contact.required_callus")," "))}function ip(i,t){i&1&&(s(0,"div",19),h(1,"i",20),p(2),_(3,"translate"),c()),i&2&&(a(2),S(" ",b(3,1,"providerInfo.contact.required_alternate_number")," "))}function op(i,t){i&1&&(s(0,"div",19),h(1,"i",20),p(2),_(3,"translate"),c()),i&2&&(a(2),S(" ",b(3,1,"providerInfo.contact.required_email")," "))}function rp(i,t){i&1&&(s(0,"div",19),h(1,"i",20),p(2),_(3,"translate"),c()),i&2&&(a(2),S(" ",b(3,1,"providerInfo.contact.required_website")," "))}function ap(i,t){i&1&&(s(0,"div",19),h(1,"i",20),p(2),_(3,"translate"),c()),i&2&&(a(2),S(" ",b(3,1,"providerInfo.contact.required_location")," "))}var gn=class i{contactUsForm;submitForm=new Y;onSubmit(){this.submitForm.emit()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=F({type:i,selectors:[["contact-setup-form"]],inputs:{contactUsForm:"contactUsForm"},outputs:{submitForm:"submitForm"},decls:48,vars:46,consts:[[1,"form-container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","callUs"],[1,"pi","pi-phone"],[1,"required"],["id","callUs","type","tel","formControlName","callUs",1,"form-input",3,"placeholder"],["class","error-message",4,"ngIf"],["for","alternateCallNumber"],["id","alternateCallNumber","type","text","formControlName","alternateCallNumber",1,"form-input",3,"placeholder"],["for","email"],[1,"pi","pi-envelope"],["id","email","type","email","formControlName","email",1,"form-input",3,"placeholder"],["for","website"],[1,"pi","pi-globe"],["id","website","type","url","formControlName","website",1,"form-input",3,"placeholder"],["for","location"],[1,"pi","pi-map-marker"],["id","location","type","text","formControlName","location",1,"form-input",3,"placeholder"],[1,"error-message"],[1,"pi","pi-exclamation-circle"]],template:function(e,n){if(e&1&&(s(0,"div",0)(1,"form",1),C("ngSubmit",function(){return n.onSubmit()}),s(2,"div",2)(3,"label",3),h(4,"i",4),p(5),_(6,"translate"),s(7,"span",5),p(8,"*"),c()(),h(9,"input",6),_(10,"translate"),f(11,np,4,3,"div",7),c(),s(12,"div",2)(13,"label",8),h(14,"i",4),p(15),_(16,"translate"),c(),h(17,"input",9),_(18,"translate"),f(19,ip,4,3,"div",7),c(),s(20,"div",2)(21,"label",10),h(22,"i",11),p(23),_(24,"translate"),s(25,"span",5),p(26,"*"),c()(),h(27,"input",12),_(28,"translate"),f(29,op,4,3,"div",7),c(),s(30,"div",2)(31,"label",13),h(32,"i",14),p(33),_(34,"translate"),c(),h(35,"input",15),_(36,"translate"),f(37,rp,4,3,"div",7),c(),s(38,"div",2)(39,"label",16),h(40,"i",17),p(41),_(42,"translate"),s(43,"span",5),p(44,"*"),c()(),h(45,"input",18),_(46,"translate"),f(47,ap,4,3,"div",7),c()()()),e&2){let o,r,l,m,g,O,M,I,k,A;a(),d("formGroup",n.contactUsForm),a(4),S(" ",b(6,26,"providerInfo.contact.call_us")," "),a(4),G("error",((o=n.contactUsForm.get("callUs"))==null?null:o.invalid)&&((o=n.contactUsForm.get("callUs"))==null?null:o.touched)),H("placeholder",b(10,28,"providerInfo.contact.name_ph")),a(2),d("ngIf",((r=n.contactUsForm.get("callUs"))==null?null:r.invalid)&&((r=n.contactUsForm.get("callUs"))==null?null:r.touched)),a(4),S(" ",b(16,30,"providerInfo.contact.alternate_call_number")," "),a(2),G("error",((l=n.contactUsForm.get("alternateCallNumber"))==null?null:l.invalid)&&((l=n.contactUsForm.get("alternateCallNumber"))==null?null:l.touched)),H("placeholder",b(18,32,"providerInfo.contact.alternate_number_ph")),a(2),d("ngIf",((m=n.contactUsForm.get("alternateCallNumber"))==null?null:m.invalid)&&((m=n.contactUsForm.get("alternateCallNumber"))==null?null:m.touched)),a(4),S(" ",b(24,34,"providerInfo.email")," "),a(4),G("error",((g=n.contactUsForm.get("email"))==null?null:g.invalid)&&((g=n.contactUsForm.get("email"))==null?null:g.touched)),H("placeholder",b(28,36,"providerInfo.contact.email_ph")),a(2),d("ngIf",((O=n.contactUsForm.get("email"))==null?null:O.invalid)&&((O=n.contactUsForm.get("email"))==null?null:O.touched)),a(4),S(" ",b(34,38,"providerInfo.website")," "),a(2),G("error",((M=n.contactUsForm.get("website"))==null?null:M.invalid)&&((M=n.contactUsForm.get("website"))==null?null:M.touched)),H("placeholder",b(36,40,"providerInfo.contact.website_ph")),a(2),d("ngIf",((I=n.contactUsForm.get("website"))==null?null:I.invalid)&&((I=n.contactUsForm.get("website"))==null?null:I.touched)),a(4),S(" ",b(42,42,"providerInfo.contact.location")," "),a(4),G("error",((k=n.contactUsForm.get("location"))==null?null:k.invalid)&&((k=n.contactUsForm.get("location"))==null?null:k.touched)),H("placeholder",b(46,44,"providerInfo.contact.location_ph")),a(2),d("ngIf",((A=n.contactUsForm.get("location"))==null?null:A.invalid)&&((A=n.contactUsForm.get("location"))==null?null:A.touched))}},dependencies:[R,Me,ie,Q,oe,re,ge,q],styles:[".form-container[_ngcontent-%COMP%]{width:100%}.form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px;font-weight:700;color:#374151;display:flex;align-items:center;gap:6px;letter-spacing:-.1px}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px;color:#5d157c}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#dc2626;font-size:14px;margin-left:2px}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{width:100%;height:44px;padding:0 14px;background:#fafbfc;border:2px solid #e5e7eb;border-radius:10px;font-size:14px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;color:#1f2937;transition:all .2s ease}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]::placeholder{color:#9ca3af;font-size:13px}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#cbd5e1;background:#fff}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:focus, .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:focus-visible{border-color:#5d157c;outline:none;background:#fff;box-shadow:0 0 0 3px #5d157c1a}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input.error[_ngcontent-%COMP%]{border-color:#dc2626;background:#fef2f2}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input.error[_ngcontent-%COMP%]:focus, .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input.error[_ngcontent-%COMP%]:focus-visible{border-color:#dc2626;box-shadow:0 0 0 3px #dc26261a}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:disabled{background:#f3f4f6;cursor:not-allowed;opacity:.6;border-color:#e5e7eb}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea.form-input[_ngcontent-%COMP%]{height:auto;padding:12px 14px;resize:vertical;line-height:1.6;min-height:110px}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#dc2626;font-size:12px;font-weight:600;display:flex;align-items:center;gap:5px;animation:_ngcontent-%COMP%_slideDown .2s ease}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:13px}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{gap:.875rem}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{gap:5px}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{font-size:13px}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{height:42px;padding:0 12px;font-size:13px}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]::placeholder{font-size:12px}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea.form-input[_ngcontent-%COMP%]{padding:10px 12px;min-height:100px}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{font-size:11px}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 480px){.form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{gap:.75rem}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:11px}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{font-size:12px}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{height:40px;padding:0 11px;font-size:13px;border-radius:8px}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea.form-input[_ngcontent-%COMP%]{padding:10px 11px;min-height:95px}.form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{font-size:10px}}"]})};var sp=()=>({width:"100%"});function lp(i,t){if(i&1){let e=w();s(0,"button",14),C("click",function(){P(e);let o=u();return x(o.toggleEdit())}),h(1,"i",15),s(2,"span",16),p(3),_(4,"translate"),c()()}i&2&&(a(3),v(b(4,1,"common.edit")))}function dp(i,t){if(i&1&&(s(0,"div",21)(1,"div",22),h(2,"i",23),c(),s(3,"div",24)(4,"label",25),p(5),_(6,"translate"),c(),s(7,"p",26),p(8),c()()()),i&2){let e=u(2);a(5),v(b(6,2,"providerInfo.phone")),a(3),v(e.provider==null?null:e.provider.primary_call_number)}}function pp(i,t){if(i&1&&(s(0,"div",21)(1,"div",22),h(2,"i",23),c(),s(3,"div",24)(4,"label",25),p(5),_(6,"translate"),c(),s(7,"p",26),p(8),c()()()),i&2){let e=u(2);a(5),v(b(6,2,"providerInfo.contact.alternate_call_number")),a(3),v(e.provider==null?null:e.provider.alternate_call_number)}}function up(i,t){if(i&1&&(s(0,"div",21)(1,"div",22),h(2,"i",27),c(),s(3,"div",24)(4,"label",25),p(5),_(6,"translate"),c(),s(7,"p",26),p(8),c()()()),i&2){let e=u(2);a(5),v(b(6,2,"providerInfo.email")),a(3),v(e.provider==null?null:e.provider.email)}}function mp(i,t){if(i&1&&(s(0,"div",21)(1,"div",22),h(2,"i",28),c(),s(3,"div",24)(4,"label",25),p(5),_(6,"translate"),c(),s(7,"p",26),p(8),c()()()),i&2){let e=u(2);a(5),v(b(6,2,"providerInfo.website")),a(3),v(e.provider==null?null:e.provider.website)}}function gp(i,t){if(i&1&&(s(0,"div",21)(1,"div",22),h(2,"i",29),c(),s(3,"div",24)(4,"label",25),p(5),_(6,"translate"),c(),s(7,"p",26),p(8),c()()()),i&2){let e=u(2);a(5),v(b(6,2,"providerInfo.contact.location")),a(3),v(e.provider==null||e.provider.location==null||e.provider.location[0]==null?null:e.provider.location[0].label)}}function _p(i,t){i&1&&(s(0,"div",30),h(1,"i",31),s(2,"p",32),p(3),_(4,"translate"),c()()),i&2&&(a(3),S(" ",b(4,1,"providerInfo.no_contact_provided")," "))}function fp(i,t){if(i&1&&(s(0,"div",17)(1,"div",18),f(2,dp,9,4,"div",19)(3,pp,9,4,"div",19)(4,up,9,4,"div",19)(5,mp,9,4,"div",19)(6,gp,9,4,"div",19),c(),f(7,_p,5,3,"div",20),c()),i&2){let e,n,o=u();a(2),d("ngIf",o.provider==null?null:o.provider.primary_call_number),a(),d("ngIf",o.provider==null?null:o.provider.alternate_call_number),a(),d("ngIf",o.provider==null?null:o.provider.email),a(),d("ngIf",o.provider==null?null:o.provider.website),a(),d("ngIf",(o.provider==null?null:o.provider.location)&&((e=o.provider==null||o.provider.location==null?null:o.provider.location.length)!==null&&e!==void 0?e:0)>0),a(),d("ngIf",!(o.provider!=null&&o.provider.primary_call_number)&&!(o.provider!=null&&o.provider.alternate_call_number)&&!(o.provider!=null&&o.provider.email)&&!(o.provider!=null&&o.provider.website)&&(!(o.provider!=null&&o.provider.location)||((n=o.provider==null||o.provider.location==null?null:o.provider.location.length)!==null&&n!==void 0?n:0)===0))}}function hp(i,t){if(i&1){let e=w();s(0,"div",33),h(1,"contact-setup-form",34),s(2,"div",35)(3,"button",36),C("click",function(){P(e);let o=u();return x(o.onCancel())}),h(4,"i",37),s(5,"span"),p(6),_(7,"translate"),c()(),s(8,"button",38),C("click",function(){P(e);let o=u();return x(o.onSubmit())}),h(9,"i",39),s(10,"span"),p(11),_(12,"translate"),c()()()()}if(i&2){let e=u();a(),d("contactUsForm",e.contactUsForm),a(5),v(b(7,5,"common.cancel")),a(2),d("disabled",e.isSaving||e.contactUsForm.invalid),a(),d("ngClass",e.isSaving?"pi-spin pi-spinner":"pi-check"),a(2),v(b(12,7,"providerInfo.save"))}}function bp(i,t){i&1&&(s(0,"div",55),p(1," Name is required "),c())}function Cp(i,t){i&1&&(s(0,"div"),p(1," Mobile number is required "),c())}function vp(i,t){i&1&&(s(0,"div"),p(1," Please enter a valid mobile number "),c())}function Pp(i,t){if(i&1&&(s(0,"div",55),f(1,Cp,2,0,"div",56)(2,vp,2,0,"div",56),c()),i&2){let e,n,o=u(2);a(),d("ngIf",(e=o.enquiryForm.get("mobile_number"))==null||e.errors==null?null:e.errors.required),a(),d("ngIf",(n=o.enquiryForm.get("mobile_number"))==null||n.errors==null?null:n.errors.pattern)}}function xp(i,t){i&1&&(s(0,"div",55),p(1," Enquiry text is required "),c())}function Op(i,t){if(i&1){let e=w();s(0,"div",40)(1,"form",41),C("ngSubmit",function(){P(e);let o=u();return x(o.submitEnquiry())}),s(2,"div",42)(3,"div",43)(4,"label",44),p(5,"Product (Optional)"),c(),h(6,"p-dropdown",45),c(),s(7,"div",43)(8,"label",46),p(9,"Name"),c(),h(10,"input",47),f(11,bp,2,0,"div",48),c(),s(12,"div",43)(13,"label",49),p(14,"Mobile Number"),c(),h(15,"input",50),f(16,Pp,3,2,"div",48),c(),s(17,"div",43)(18,"label",51),p(19,"Enquiry"),c(),h(20,"textarea",52),f(21,xp,2,0,"div",48),c()(),s(22,"div",53)(23,"button",54),h(24,"i",39),s(25,"span"),p(26,"Send Enquiry"),c()()()()()}if(i&2){let e,n,o,r=u();a(),d("formGroup",r.enquiryForm),a(5),ft(Ee(9,sp)),d("options",r.providerProducts),a(5),d("ngIf",((e=r.enquiryForm.get("name"))==null?null:e.invalid)&&((e=r.enquiryForm.get("name"))==null?null:e.touched)),a(5),d("ngIf",((n=r.enquiryForm.get("mobile_number"))==null?null:n.touched)&&((n=r.enquiryForm.get("mobile_number"))==null?null:n.invalid)),a(5),d("ngIf",((o=r.enquiryForm.get("enquiry_text"))==null?null:o.invalid)&&((o=r.enquiryForm.get("enquiry_text"))==null?null:o.touched)),a(2),d("disabled",r.enquiryForm.invalid||r.isSubmittingEnquiry),a(),d("ngClass",r.isSubmittingEnquiry?"pi-spin pi-spinner":"pi-send")}}var _n=class i{constructor(t,e,n,o,r,l,m){this.fb=t;this.translate=e;this.providerInfoService=n;this.toast=o;this.authService=r;this.productService=l;this.enquiryService=m;this.contactUsForm=this.fb.group({callUs:["",[T.required,T.pattern(/^[0-9]{10,15}$/)]],alternateCallNumber:[""],email:["",[T.required,T.email]],website:[""],location:["",[T.required]]}),this.enquiryForm=this.fb.group({product_id:[""],name:["",T.required],mobile_number:["",[T.required,T.pattern(/^[6-9]\d{9}$/)]],enquiry_text:["",T.required]}),this.dataObjectKeys=Object.keys(this.dataInfo)}userType="CUSTOMER";provider=void 0;providerId;saveContact=new Y;enumUserTypes=bt;isEditing=!1;isSaving=!1;dataInfo={callUs:"",alternateCallNumber:"",email:"",website:"",location:""};dataObjectKeys=[];contactUsForm;enquiryForm;providerProducts=[];isSubmittingEnquiry=!1;isEnquiryExpanded=!1;ngOnInit(){this.loadTranslations(),this.provider&&this.prefillFromProvider(this.provider),this.providerId&&this.loadProducts()}ngOnChanges(t){t.provider&&this.provider&&this.prefillFromProvider(this.provider),t.providerId&&this.providerId&&this.loadProducts()}loadProducts(){this.productService.listWithTotalForProvider(this.providerId,{limit:100}).subscribe({next:t=>{t&&t.data?this.providerProducts=t.data:Array.isArray(t)&&(this.providerProducts=t)},error:t=>{console.error("Failed to load products for enquiry",t)}})}toggleEdit(){this.isEditing=!this.isEditing,!this.isEditing&&this.provider&&this.prefillFromProvider(this.provider)}prefillFromProvider(t){let e=t.primary_call_number||"",n=t.alternate_call_number||"",o=t.email||"",r=t.website||"",l="";t.location&&t.location.length>0&&(l=t.location.map(m=>m.label).join(", ")),this.contactUsForm.patchValue({callUs:e,alternateCallNumber:n,email:o,website:r,location:l})}loadTranslations(){this.translate.get(["contactUs.sample_phone","contactUs.sample_alternate_phone","contactUs.sample_email","contactUs.sample_website","contactUs.sample_location"]).subscribe(t=>{this.dataInfo={callUs:t["contactUs.sample_phone"],alternateCallNumber:t["contactUs.sample_alternate_phone"],email:t["contactUs.sample_email"],website:t["contactUs.sample_website"],location:t["contactUs.sample_location"]}})}onSubmit(){if(!this.providerId){this.toast.error("Error","Provider information not available");return}if(!this.provider){this.toast.error("Error","Provider information not loaded yet");return}if(this.contactUsForm.invalid){Object.keys(this.contactUsForm.controls).forEach(o=>{this.contactUsForm.get(o)?.markAsTouched()});return}let t=this.contactUsForm.value,e=this.provider.location||[],n=U(D({},this.provider),{primary_call_number:t.callUs,alternate_call_number:t.alternateCallNumber,email:t.email,website:t.website,location:e});this.isSaving=!0,this.providerInfoService.updateProvider(this.providerId,n).subscribe({next:o=>{this.isSaving=!1,this.toast.success("Success","Contact information updated successfully"),this.provider&&(this.provider.primary_call_number=n.primary_call_number,this.provider.alternate_call_number=n.alternate_call_number,this.provider.email=n.email,this.provider.website=n.website,this.provider.location=n.location),this.saveContact.emit(n),this.isEditing=!1},error:o=>{this.isSaving=!1,console.error("Failed to update contact info",o),this.toast.error("Error","Failed to update contact information")}})}buttonClicked(t){t.buttonType===1?this.onSubmit():t.buttonType===2&&this.onCancel()}onCancel(){this.isEditing=!1,this.provider&&this.prefillFromProvider(this.provider)}submitEnquiry(){if(this.enquiryForm.invalid){Object.keys(this.enquiryForm.controls).forEach(n=>{this.enquiryForm.get(n)?.markAsTouched()});return}let t=this.enquiryForm.value,e={user_id:this.authService.getUserId(),provider_id:this.providerId,product_id:t.product_id?Number(t.product_id):0,name:t.name,mobile_number:String(t.mobile_number),enquiry_text:t.enquiry_text};this.isSubmittingEnquiry=!0,this.enquiryService.http.post("provider/enquiry/",e).subscribe({next:n=>{this.isSubmittingEnquiry=!1,this.toast.success("Success","Enquiry submitted successfully"),this.enquiryForm.reset({product_id:""})},error:n=>{this.isSubmittingEnquiry=!1,console.error("Failed to submit enquiry",n),this.toast.error("Error","Failed to submit enquiry")}})}static \u0275fac=function(e){return new(e||i)(y(_e),y(Ye),y(Pe),y(Ne),y(X),y(jt),y(Ut))};static \u0275cmp=F({type:i,selectors:[["contact-us"]],inputs:{userType:"userType",provider:"provider",providerId:"providerId"},outputs:{saveContact:"saveContact"},features:[ve],decls:19,vars:8,consts:[[1,"contact-us-container"],[1,"contact-us-card"],[1,"card-header"],[1,"title-row"],[1,"pi","pi-phone","title-icon"],[1,"section-title"],["class","edit-btn","title","Edit Contact Information",3,"click",4,"ngIf"],["class","card-content",4,"ngIf"],["class","card-content edit-mode",4,"ngIf"],[1,"contact-us-card","mt-3"],[1,"card-header",2,"background","#fafbfc","border-bottom","1px solid #e5e7eb","padding-bottom","0.5rem","cursor","pointer","display","flex","justify-content","space-between","align-items","center",3,"click"],[1,"pi","pi-question-circle","title-icon",2,"color","#5d157c"],[1,"pi",2,"color","#5d157c",3,"ngClass"],["class","card-content","style","padding-top: 1rem",4,"ngIf"],["title","Edit Contact Information",1,"edit-btn",3,"click"],[1,"pi","pi-pencil"],[1,"edit-text"],[1,"card-content"],[1,"info-grid"],["class","info-item",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"info-item"],[1,"info-icon-wrapper"],[1,"pi","pi-phone"],[1,"info-content"],[1,"info-label"],[1,"info-value"],[1,"pi","pi-envelope"],[1,"pi","pi-globe"],[1,"pi","pi-map-marker"],[1,"empty-state"],[1,"pi","pi-address-book","empty-icon"],[1,"empty-text"],[1,"card-content","edit-mode"],[3,"contactUsForm"],[1,"action-buttons"],[1,"btn-cancel",3,"click"],[1,"pi","pi-times"],[1,"btn-save",3,"click","disabled"],[1,"pi",3,"ngClass"],[1,"card-content",2,"padding-top","1rem"],[3,"ngSubmit","formGroup"],[2,"display","flex","flex-direction","column","gap","0.75rem"],[1,"form-group"],["for","product_id"],["id","product_id","formControlName","product_id","optionLabel","product_name","optionValue","product_id","styleClass","full-width-dropdown","placeholder","Select a product...",1,"custom-dropdown",3,"options"],["for","name"],["id","name","type","text","formControlName","name","placeholder","Enter your name",1,"form-input"],["class","error-message",4,"ngIf"],["for","mobile_number"],["id","mobile_number","type","number","formControlName","mobile_number","placeholder","Enter your mobile number",1,"form-input"],["for","enquiry_text"],["id","enquiry_text","formControlName","enquiry_text","placeholder","Type your enquiry here...","rows","4",1,"form-textarea"],[1,"action-buttons",2,"margin-top","1.5rem"],["type","submit",1,"btn-save",2,"width","100%","justify-content","center","padding","12px","font-size","14px",3,"disabled"],[1,"error-message"],[4,"ngIf"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),h(4,"i",4),s(5,"h3",5),p(6),_(7,"translate"),c()(),f(8,lp,5,3,"button",6),c(),f(9,fp,8,6,"div",7)(10,hp,13,9,"div",8),c(),s(11,"div",9)(12,"div",10),C("click",function(){return n.isEnquiryExpanded=!n.isEnquiryExpanded}),s(13,"div",3),h(14,"i",11),s(15,"h3",5),p(16,"Send us an Enquiry"),c()(),h(17,"i",12),c(),f(18,Op,27,10,"div",13),c()()),e&2&&(a(6),S(" ",b(7,6,"providerInfo.contact_us")," "),a(2),d("ngIf",n.userType===n.enumUserTypes.PROVIDER&&!n.isEditing),a(),d("ngIf",!n.isEditing),a(),d("ngIf",n.isEditing&&n.userType===n.enumUserTypes.PROVIDER),a(7),d("ngClass",n.isEnquiryExpanded?"pi-chevron-up":"pi-chevron-down"),a(),d("ngIf",n.isEnquiryExpanded))},dependencies:[Ae,R,We,Me,ie,Nn,Q,oe,re,ge,gn,q],styles:['@charset "UTF-8";.contact-us-container[_ngcontent-%COMP%]{padding:1rem}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #00000014;border:1px solid #e5e7eb;overflow:hidden;transition:box-shadow .3s ease}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0000001f}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.25rem;background:linear-gradient(135deg,#faf5ff,#f9fafb);border-bottom:1px solid #e5e7eb}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .title-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .title-row[_ngcontent-%COMP%]   .title-icon[_ngcontent-%COMP%]{font-size:20px;color:#5d157c}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .title-row[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:700;color:#1a1a1a;letter-spacing:-.3px}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 16px;background:#fff;border:1px solid #e5e7eb;border-radius:8px;cursor:pointer;color:#5d157c;font-size:14px;font-weight:600;transition:all .2s ease}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]   .edit-text[_ngcontent-%COMP%]{color:#5d157c}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]:hover{background:#5d157c;border-color:#5d157c;color:#fff;transform:translateY(-1px);box-shadow:0 4px 12px #5d157c40}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]:hover   .edit-text[_ngcontent-%COMP%]{color:#fff}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding:1.25rem;min-height:100px}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content.edit-mode[_ngcontent-%COMP%]{padding:1rem 1.25rem 1.25rem}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:1rem}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;padding:1rem;background:#fafbfc;border-radius:10px;border:1px solid #e5e7eb;transition:all .2s ease}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]:hover{background:#fff;border-color:#cbd5e1;transform:translateY(-2px);box-shadow:0 3px 10px #0000000f}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-icon-wrapper[_ngcontent-%COMP%]{width:40px;height:40px;min-width:40px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#f5e8ff,#e8d5f5);border-radius:10px}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-icon-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px;color:#5d157c}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:4px;min-width:0}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-size:12px;font-weight:700;color:#6b7280;text-transform:uppercase;letter-spacing:.6px;margin:0}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{margin:0;font-size:15px;color:#1f2937;font-weight:600;word-break:break-word;line-height:1.5}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px;padding:1.5rem 1rem}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:36px;color:#d1d5db}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-text[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#9ca3af;font-weight:500}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:flex-end;margin-top:1rem}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%], .contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{display:flex;align-items:center;gap:7px;padding:10px 20px;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s cubic-bezier(.4,0,.2,1)}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{background:#f3f4f6;color:#6b7280;border:1px solid #e5e7eb}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover{background:#e5e7eb;color:#374151;border-color:#d1d5db}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:active{transform:scale(.98)}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{background:linear-gradient(135deg,#5d157c,#4a0f5e);color:#fff;box-shadow:0 2px 8px #5d157c4d}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 14px #5d157c66}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:active{transform:translateY(0)}@media (max-width: 768px){.contact-us-container[_ngcontent-%COMP%]{padding:.75rem}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:.875rem 1rem}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .title-row[_ngcontent-%COMP%]{gap:8px}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .title-row[_ngcontent-%COMP%]   .title-icon[_ngcontent-%COMP%]{font-size:18px}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .title-row[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:16px}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]{padding:7px 14px;font-size:13px}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:13px}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding:1rem}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content.edit-mode[_ngcontent-%COMP%]{padding:.875rem 1rem 1rem}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.875rem}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{padding:.875rem;gap:11px}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-icon-wrapper[_ngcontent-%COMP%]{width:38px;height:38px;min-width:38px}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-icon-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:17px}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-size:11px}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{font-size:14px}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{padding:1.25rem .75rem}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:32px}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-text[_ngcontent-%COMP%]{font-size:13px}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{gap:8px;margin-top:.875rem}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%], .contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{padding:9px 16px;font-size:13px;gap:6px}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:13px}}@media (max-width: 480px){.contact-us-container[_ngcontent-%COMP%]{padding:.5rem}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:.75rem .875rem;flex-wrap:wrap;gap:.5rem}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .title-row[_ngcontent-%COMP%]{gap:7px}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .title-row[_ngcontent-%COMP%]   .title-icon[_ngcontent-%COMP%]{font-size:16px}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .title-row[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:15px}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding:.875rem}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content.edit-mode[_ngcontent-%COMP%]{padding:.75rem .875rem .875rem}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{gap:.75rem}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{padding:.75rem;gap:10px}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-icon-wrapper[_ngcontent-%COMP%]{width:36px;height:36px;min-width:36px;border-radius:8px}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-icon-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-size:10px}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{font-size:13px}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{padding:1rem .5rem}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{flex-direction:row;gap:8px}.contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%], .contact-us-container[_ngcontent-%COMP%]   .contact-us-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{flex:1;justify-content:center;padding:9px 14px;font-size:13px}}.dynamic-fields-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem;animation:_ngcontent-%COMP%_fadeIn .4s ease}.form-group[_ngcontent-%COMP%]{margin-bottom:0}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-size:14px;font-weight:500;color:#333;letter-spacing:.3px}.form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;font-size:14px;color:#333;background-color:#fff;border:1px solid #e5e7eb;border-radius:8px;transition:all .3s ease;box-shadow:0 1px 3px #0000000d}.form-input[_ngcontent-%COMP%]::placeholder, .form-textarea[_ngcontent-%COMP%]::placeholder{color:#9ca3af;opacity:1}.form-input[_ngcontent-%COMP%]:hover, .form-textarea[_ngcontent-%COMP%]:hover{border-color:#5d157c;box-shadow:0 2px 6px #5d157c26}.form-input[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#5d157c;box-shadow:0 0 0 3px #5d157c1a}.form-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px;font-family:inherit;line-height:1.5}.error-message[_ngcontent-%COMP%]{margin-top:.5rem;font-size:12px;color:#ef4444;display:flex;align-items:center}.error-message[_ngcontent-%COMP%]:before{content:"\\26a0";margin-right:.25rem}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.dynamic-fields-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.25rem}}']})};function yp(i,t){if(i&1){let e=w();s(0,"img",19),C("click",function(){let o=P(e).index,r=u();return x(r.selectImage(o))}),c()}if(i&2){let e=t.$implicit,n=t.index,o=u();G("selected",o.selectedImage===n),d("src",e,le)("alt","Thumbnail "+n)}}function Sp(i,t){if(i&1){let e=w();V(0),s(1,"button",22),C("click",function(){let o=P(e).$implicit,r=u(2);return x(r.selectSize(o))}),p(2),c(),z()}if(i&2){let e=t.$implicit,n=u(2);a(),G("selected",n.selectedSize===e),a(),S(" ",e," ")}}function wp(i,t){if(i&1&&(s(0,"div",20),f(1,Sp,3,3,"ng-container",21),c()),i&2){let e=u();a(),d("ngForOf",e.uniqueSizes)}}function Ip(i,t){if(i&1){let e=w();s(0,"button",22),C("click",function(){P(e);let o=u().$implicit,r=u(2);return x(r.selectColor(o))}),p(1),c()}if(i&2){let e=u().$implicit,n=u(2);G("selected",n.selectedColor===e),a(),S(" ",e," ")}}function kp(i,t){if(i&1&&(V(0),f(1,Ip,2,3,"button",24),z()),i&2){let e=t.$implicit;a(),d("ngIf",e)}}function Tp(i,t){if(i&1&&(s(0,"div",23),f(1,kp,2,1,"ng-container",21),c()),i&2){let e=u();a(),d("ngForOf",e.uniqueColors)}}function Ep(i,t){i&1&&(s(0,"div",25),p(1),_(2,"translate"),c()),i&2&&(a(),S(" ",b(2,1,"providerInfo.product.no_variants")," "))}function Dp(i,t){if(i&1&&(s(0,"div",11)(1,"h2"),p(2),_(3,"translate"),c(),s(4,"div",26)(5,"span",27),p(6),_(7,"currency"),c(),s(8,"span",28),p(9),_(10,"currency"),c()()()),i&2){let e=u();a(2),v(b(3,3,"providerInfo.product.price_details")),a(4),v(ht(7,5,e.originalPrice,"INR")),a(3),S(" ",ht(10,8,(e.selectedVariant==null?null:e.selectedVariant.price)||(e.product==null?null:e.product.selling_price)||(e.productDetail==null?null:e.productDetail.selling_price),"INR")," ")}}function Fp(i,t){if(i&1&&(s(0,"div",11)(1,"h2"),p(2),_(3,"translate"),c(),h(4,"div",29),c()),i&2){let e=u();a(2),v(b(3,2,"providerInfo.product.product_description")),a(2),d("innerHTML",e.formattedDescription,it)}}var xt=class i{constructor(t,e,n,o,r,l,m){this._providerInfoSer=t;this.router=e;this.route=n;this.cartService=o;this.toastService=r;this.location=l;this.dialog=m;let g=this.router.getCurrentNavigation();this.productDetail=g?.extras.state?.product}selectedImage=0;provider;selectedProduct;product;variants=[];formattedDescription="";productDetail;images=[];originalPrice=99.99;currentPrice=79.99;selectedVariant=void 0;parsedVariants=[];uniqueSizes=[];uniqueColors=[];selectedSize=null;selectedColor=null;isRouted=!1;specialOffers=[{title:"Special Offer",description:"Buy 1 Get 1 Free",expiry:"Ends in 5 days"},{title:"Limited Deal",description:"20% Off Over $100",expiry:"Expires soon"}];ngOnInit(){this.selectedProduct?(this.isRouted=!1,this.productDetail=this.selectedProduct):this.productDetail?(this.isRouted=!0,this.selectedProduct=this.productDetail):this.isRouted=!0,this.selectedProduct=this.productDetail,this.selectedProduct?.id&&this._providerInfoSer.getProductDetails(this.selectedProduct.id).subscribe(t=>{this.product=t;try{if(t.variants&&t.variants!=="null"&&t.variants.trim()!==""){let e=JSON.parse(t.variants);this.variants=Array.isArray(e)?e:[]}else this.variants=[]}catch(e){console.warn("Failed to parse variants:",e),this.variants=[]}this.images=this.product?.product_image_url,this.variants.length>0?(this.selectedVariant=this.variants[0],this.parsedVariants=this.variants,this.uniqueSizes=[...new Set(this.parsedVariants.map(e=>e.size))],this.uniqueColors=[...new Set(this.parsedVariants.map(e=>e.color))]):(this.selectedVariant=void 0,this.parsedVariants=[],this.uniqueSizes=[],this.uniqueColors=[]),this.product?.description&&this.convertMarkdownToHtml(this.product.description).then(e=>{this.formattedDescription=e})})}selectSize(t){this.selectedSize=t;let e=this.parsedVariants.find(n=>n.size===t);e&&(this.selectedVariant=e)}selectColor(t){this.selectedColor=t}selectImage(t){this.selectedImage=t}selectVariant(t){this.selectedVariant=t}addToCart(){let t=this.cartService.getCart(),e=t.findIndex(o=>{let r=o.id===this.productDetail.id;return this.selectedVariant?r&&o.selectedVariant?.variant_id===this.selectedVariant.variant_id:r}),n=D({},this.productDetail);if(this.selectedVariant?(n.selling_price=this.selectedVariant.price,n.price=this.selectedVariant.price,n.selectedVariant=this.selectedVariant):(n.selling_price=this.product?.selling_price||this.productDetail.selling_price,n.price=this.product?.selling_price||this.productDetail.selling_price),e!==-1)t[e].quantity+=1,this.cartService.setCart(t);else{let o=[...t,U(D({},n),{quantity:1})];this.cartService.setCart(o)}this.goBack()}getColorBg(t){return{Red:"#fee2e2",Blue:"#dbeafe",Green:"#fef9c3"}[t]||"#f3f4f6"}getColorText(t){return{Red:"#b91c1c",Blue:"#1d4ed8",Green:"#15803d"}[t]||"#374151"}getColorBorder(t){return{Red:"#fca5a5",Blue:"#93c5fd",Green:"#fde68a"}[t]||"#d1d5db"}convertMarkdownToHtml(t){return ke(this,null,function*(){return t?yield L.parse(t,{breaks:!0,gfm:!0}):""})}goBack(){if(this.isRouted){let t={};this.product?.provider_id?t.providerId=this.product.provider_id:this.provider?.provider_id&&(t.providerId=this.provider.provider_id),this.router.navigate(["../"],{relativeTo:this.route,queryParams:t,queryParamsHandling:"merge"})}else this._providerInfoSer.viewType$.next("PROVIDER_VIEW")}isFlexibleProduct(){return(this.selectedProduct?.productSubType||this.productDetail?.productSubType||this.product?.product_subtype||this.product?.productSubType)==="flexible"}isStandardProduct(){let t=this.selectedProduct?.productType||this.productDetail?.productType||this.product?.product_type||this.product?.productType,e=this.selectedProduct?.productSubType||this.productDetail?.productSubType||this.product?.product_subtype||this.product?.productSubType;return t==="product"&&e==="standard"}book(){let t=this.product||this.productDetail;if(!t){console.warn("No product available for booking");return}(this.selectedProduct?.productSubType||this.productDetail?.productSubType||t.product_subtype||t.productSubType)!=="standard"?this.openDialog(t):this.addToCart()}openDialog(t){let n=(this.selectedProduct?.productSubType||this.productDetail?.productSubType||t?.product_subtype||t?.productSubType||"").toUpperCase(),o=this.selectedProduct?.id||this.productDetail?.id,r=U(D(D({},this.selectedProduct||{}),t),{id:o,product_id:o,name:t.name||t.product_name||this.selectedProduct?.name||"",img:t.img||t.product_image_url||this.selectedProduct?.img||[],productSubType:this.selectedProduct?.productSubType||t?.productSubType||t?.product_subtype,product_subtype:this.selectedProduct?.productSubType||t?.productSubType||t?.product_subtype,formRegistrationId:this.selectedProduct?.formRegistrationId??t?.formRegistrationId??t?.form_registration_id});if(n in at){let l=n,m=this.provider?.provider_id||this.product?.provider_id||this.productDetail?.provider_id;this.dialog.open(qn,{width:"350px",data:{dialogType:at[l],providerId:m,data:r}}).afterClosed().subscribe(O=>{O&&console.log("Dialog Result:",O)})}else console.warn("Unknown product subtype:",n)}static \u0275fac=function(e){return new(e||i)(y(Pe),y(ae),y(ot),y(ct),y(Ne),y(Fe),y(rt))};static \u0275cmp=F({type:i,selectors:[["product-details"]],inputs:{provider:"provider",selectedProduct:"selectedProduct"},decls:30,vars:20,consts:[[1,"product-detail"],[1,"header"],[1,"back-btn",3,"click"],[1,"pi","pi-arrow-left"],[1,"main-content"],[1,"content-wrapper"],[1,"main-image"],[3,"src","alt"],[1,"thumbnail-grid"],[3,"src","alt","selected","click",4,"ngFor","ngForOf"],[1,"product-details-card"],[1,"details-section"],["class","size-selection mb-4",4,"ngIf"],["class","color-selection",4,"ngIf"],["class","text-gray-500 text-sm",4,"ngIf"],["class","details-section",4,"ngIf"],[1,"footer"],[1,"add-to-cart",3,"click"],[1,"terms"],[3,"click","src","alt"],[1,"size-selection","mb-4"],[4,"ngFor","ngForOf"],[3,"click"],[1,"color-selection"],[3,"selected","click",4,"ngIf"],[1,"text-gray-500","text-sm"],[1,"price-content"],[1,"original-price"],[1,"current-price"],[1,"description-content",3,"innerHTML"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"button",2),C("click",function(){return n.goBack()}),h(3,"i",3),c(),s(4,"h2"),p(5),c()(),s(6,"main",4)(7,"div",5)(8,"div",6),h(9,"img",7),_(10,"translate"),c(),s(11,"div",8),f(12,yp,1,4,"img",9),c(),s(13,"section",10)(14,"div",11)(15,"h2"),p(16),_(17,"translate"),c(),f(18,wp,2,1,"div",12)(19,Tp,2,1,"div",13)(20,Ep,3,3,"div",14),c(),f(21,Dp,11,11,"div",15)(22,Fp,5,4,"div",15),c()()(),s(23,"footer",16)(24,"button",17),C("click",function(){return n.isStandardProduct()?n.addToCart():n.book()}),p(25),_(26,"translate"),c(),s(27,"p",18),p(28),_(29,"translate"),c()()()),e&2&&(a(5),v((n.product==null?null:n.product.product_name)||n.selectedProduct.name),a(4),H("alt",b(10,12,"providerInfo.product.product_image_alt")),d("src",n.images[n.selectedImage],le),a(3),d("ngForOf",n.images),a(4),v(b(17,14,"providerInfo.product.variant_selection")),a(2),d("ngIf",((n.uniqueSizes==null?null:n.uniqueSizes.length)||0)>0),a(),d("ngIf",((n.uniqueColors==null?null:n.uniqueColors.length)||0)>0),a(),d("ngIf",((n.uniqueSizes==null?null:n.uniqueSizes.length)||0)===0&&((n.uniqueColors==null?null:n.uniqueColors.length)||0)===0),a(),d("ngIf",!n.isFlexibleProduct()),a(),d("ngIf",n.formattedDescription),a(3),S(" ",n.isStandardProduct()?b(26,16,"providerInfo.product.add_to_cart"):"Proceed"," "),a(3),v(b(29,18,"providerInfo.product.terms")))},dependencies:[ee,R,qo,q],styles:['[_nghost-%COMP%]{display:block;height:100vh}.product-detail[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;position:fixed;inset:0;background:linear-gradient(135deg,#f5f7fa,#e8edf2)}.header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:20px 30px;background:#fff;box-shadow:0 2px 10px #0000000d;position:sticky;top:0;z-index:100}.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:8px;border-radius:8px;transition:all .3s ease;color:#5d157c;font-size:20px}.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:#5d157c1a;transform:translate(-2px)}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#000;font-size:26px;font-weight:700}.main-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;-webkit-overflow-scrolling:touch}.content-wrapper[_ngcontent-%COMP%]{padding:1.5rem 1.5rem 2rem;max-width:900px;margin:0 auto}.main-image[_ngcontent-%COMP%]{margin-bottom:1.5rem;border-radius:20px;overflow:hidden;box-shadow:0 8px 30px #00000014;background-color:#fff;transition:all .3s ease}.main-image[_ngcontent-%COMP%]:hover{box-shadow:0 12px 40px #0000001f}.main-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;object-fit:contain;display:block}.thumbnail-grid[_ngcontent-%COMP%]{display:flex;gap:.75rem;overflow-x:auto;padding-bottom:1rem;-webkit-overflow-scrolling:touch}.thumbnail-grid[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:4rem;height:4rem;border-radius:12px;cursor:pointer;border:3px solid transparent;transition:all .3s ease;object-fit:cover;box-shadow:0 4px 15px #0000001a}.thumbnail-grid[_ngcontent-%COMP%]   img.selected[_ngcontent-%COMP%]{border-color:#5d157c;transform:scale(1.05)}.thumbnail-grid[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.product-details-card[_ngcontent-%COMP%]{margin-bottom:1.5rem;background-color:#fff;padding:1.5rem;border-radius:20px;box-shadow:0 8px 30px #00000014;transition:all .3s ease}.product-details-card[_ngcontent-%COMP%]:hover{box-shadow:0 12px 40px #0000001f}.product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]{padding-bottom:1.5rem;margin-bottom:1.5rem;border-bottom:1px solid #e5e7eb}.product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]:last-child{border-bottom:none;margin-bottom:0;padding-bottom:0}.product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#000;font-size:1.25rem;font-weight:700;margin-bottom:1rem}.product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]   .variant-options[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:.75rem}.product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]   .size-selection[_ngcontent-%COMP%], .product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]   .color-selection[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex-wrap:wrap}.product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]   .size-selection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]   .color-selection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;border:2px solid #e5e7eb;border-radius:50px;font-size:.875rem;font-weight:600;transition:all .3s ease;background:#fff}.product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]   .size-selection[_ngcontent-%COMP%]   button.selected[_ngcontent-%COMP%], .product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]   .color-selection[_ngcontent-%COMP%]   button.selected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#5d157c,#8b2fb8);color:#fff;border-color:#5d157c;box-shadow:0 4px 15px #5d157c4d}.product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]   .size-selection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]   .color-selection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]   .price-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]   .price-content[_ngcontent-%COMP%]   .original-price[_ngcontent-%COMP%]{color:#6b7280;text-decoration:line-through;font-size:1.125rem}.product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]   .price-content[_ngcontent-%COMP%]   .current-price[_ngcontent-%COMP%]{color:#5d157c;font-size:1.75rem;font-weight:700}.product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content{color:#5a6c7d;line-height:1.8;font-size:15px}.product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content h1, .product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content h2, .product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content h3, .product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content h4, .product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content h5, .product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content h6{color:#2c3e50;margin-top:20px;margin-bottom:10px;font-weight:700}.product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content h1:first-child, .product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content h2:first-child, .product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content h3:first-child, .product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content h4:first-child, .product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content h5:first-child, .product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content h6:first-child{margin-top:0}.product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content h2{font-size:20px}.product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content h3{font-size:18px}.product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content p{margin:10px 0;color:#5a6c7d;line-height:1.8}.product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content b, .product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content strong{color:#2c3e50;font-weight:700}.product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content i, .product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content em{font-style:italic}.product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content ul, .product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content ol{margin:12px 0;padding-left:25px}.product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content ul li, .product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content ol li{margin:6px 0;color:#5a6c7d;line-height:1.7}.product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content ul li::marker, .product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content ol li::marker{color:#5d157c}.product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content a{color:#5d157c;text-decoration:none;font-weight:600;transition:all .2s ease}.product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content a:hover{color:#8b2fb8;text-decoration:underline}.product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content code{background:#f5f7fa;padding:2px 8px;border-radius:4px;font-family:Courier New,monospace;font-size:14px;color:#e74c3c;border:1px solid #e8edf2}.product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content pre{background:#f5f7fa;padding:15px;border-radius:8px;overflow-x:auto;border:1px solid #e8edf2;margin:15px 0}.product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content pre code{background:transparent;padding:0;border:none;color:#2c3e50}.product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content blockquote{border-left:4px solid #5d157c;padding-left:15px;margin:15px 0;color:#7f8c8d;font-style:italic}.product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content hr{border:none;border-top:2px solid #e8edf2;margin:20px 0}.product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]     .description-content br{line-height:1.8}.special-offers[_ngcontent-%COMP%]{margin-bottom:1.5rem}.special-offers[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#5d157c;font-size:1.25rem;font-weight:700;margin-bottom:1rem}.special-offers[_ngcontent-%COMP%]   .offers-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.special-offers[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]{background-color:#fff;padding:1.5rem;border-radius:20px;box-shadow:0 8px 30px #00000014;transition:all .3s ease}.special-offers[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]:hover{box-shadow:0 12px 40px #0000001f}.special-offers[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2c3e50;font-weight:700;margin-bottom:.5rem}.special-offers[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem;color:#5a6c7d;line-height:1.6}.special-offers[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:#6b7280;margin-top:.5rem}.footer[_ngcontent-%COMP%]{background-color:#fff;padding:1.5rem;border-top:1px solid #e5e7eb;position:sticky;bottom:0;z-index:10;box-shadow:0 -2px 10px #0000000d}.footer[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]{width:100%;background:linear-gradient(135deg,#ffa41c,#ff8c00);color:#000;padding:1rem;border-radius:50px;font-weight:700;font-size:1.125rem;transition:all .3s ease;border:none;cursor:pointer;box-shadow:0 8px 25px #ffa41c4d;position:relative;overflow:hidden}.footer[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(135deg,#ff8c00,#ffa41c);opacity:0;transition:opacity .3s ease}.footer[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 12px 35px #ffa41c66}.footer[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]:hover:before{opacity:1}.footer[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]:active{transform:translateY(-1px)}.footer[_ngcontent-%COMP%]   .terms[_ngcontent-%COMP%]{text-align:center;font-size:.75rem;color:#6b7280;margin-top:.75rem}@media (max-width: 768px){.header[_ngcontent-%COMP%]{padding:15px 20px}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}.content-wrapper[_ngcontent-%COMP%]{padding:1rem}.product-details-card[_ngcontent-%COMP%]{padding:1.25rem}.footer[_ngcontent-%COMP%]{padding:1rem}.footer[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]{font-size:1rem}}@media (max-width: 480px){.content-wrapper[_ngcontent-%COMP%]{padding:.75rem}.product-details-card[_ngcontent-%COMP%]{padding:1rem;border-radius:15px}.product-details-card[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.125rem}}']})};function Rp(i,t){i&1&&(s(0,"div",10)(1,"div",11),h(2,"div",12),s(3,"div",13),h(4,"div",14)(5,"div",15),c()(),s(6,"div",16)(7,"div",17),h(8,"div",18)(9,"div",19),c(),s(10,"div",17),h(11,"div",18)(12,"div",19),c(),s(13,"div",17),h(14,"div",18)(15,"div",19),c()(),s(16,"div",20),h(17,"div",21)(18,"div",21)(19,"div",21),c()())}function Np(i,t){if(i&1){let e=w();s(0,"div")(1,"div",11)(2,"button",22),C("click",function(){P(e);let o=u(2);return x(o.navigateBack())}),h(3,"i",23),c(),s(4,"div",24),p(5),c(),s(6,"div",25),C("click",function(){P(e);let o=u(2);return x(o.addFavourite())}),h(7,"i",26),c()(),s(8,"div",27)(9,"div",17),h(10,"i",28),s(11,"span"),p(12),_(13,"translate"),c()(),s(14,"div",29),C("click",function(){P(e);let o=u(2);return x(o.shareProvider())})("mousedown",function(o){return P(e),x(o.preventDefault())}),h(15,"i",30),s(16,"span"),p(17),_(18,"translate"),c()(),s(19,"div",17),h(20,"i",31),s(21,"span"),p(22),_(23,"number"),_(24,"translate"),c()()(),s(25,"div",20)(26,"div",32),C("click",function(){P(e);let o=u(2);return x(o.setActiveTab(0))}),p(27),_(28,"translate"),c(),s(29,"div",32),C("click",function(){P(e);let o=u(2);return x(o.setActiveTab(1))}),p(30),_(31,"translate"),c(),s(32,"div",32),C("click",function(){P(e);let o=u(2);return x(o.setActiveTab(2))}),p(33),_(34,"translate"),c()()()}if(i&2){let e=u(2);a(5),S(" ",e.provider.display_name||"Maruthi Agency Water Service"," "),a(2),d("ngClass",e.isFavorite?"pi-thumbs-up-fill":"pi-thumbs-up"),a(5),Ue("",e.favoriteCount," ",b(13,16,"providerInfo.like"),""),a(5),v(b(18,18,"providerInfo.share")),a(5),Ue("",ht(23,20,e.providerRating,"1.1-1")," ",b(24,23,"providerInfo.rated"),""),a(4),G("active",e.activeTabIndex===0),a(),S(" ",b(28,25,"providerInfo.explore")," "),a(2),G("active",e.activeTabIndex===1),a(),S(" ",b(31,27,"providerInfo.about_us")," "),a(2),G("active",e.activeTabIndex===2),a(),S(" ",b(34,29,"providerInfo.contact_us")," ")}}function Vp(i,t){if(i&1&&(s(0,"div",33)(1,"p",34),p(2),c()()),i&2){let e=u(2);a(2),S(" ",e.display_note," ")}}function zp(i,t){i&1&&(s(0,"div",38),h(1,"div",39),c())}function Lp(i,t){if(i&1){let e=w();s(0,"div",42)(1,"div",43)(2,"div",44),h(3,"i",45),c(),s(4,"h2",46),p(5),_(6,"translate"),c(),s(7,"p",47),p(8),_(9,"translate"),c(),s(10,"button",48),C("click",function(){P(e);let o=u(5);return x(o.openMemberRequestDialog())}),h(11,"i",49),p(12),_(13,"translate"),c()()()}i&2&&(a(5),S(" ",b(6,3,"providerInfo.member_only.title")," "),a(3),S(" ",b(9,5,"providerInfo.member_only.description")," "),a(4),S(" ",b(13,7,"providerInfo.member_only.request_access")," "))}function Up(i,t){if(i&1){let e=w();s(0,"provider-catalogue",50),C("bottomTabIndexChange",function(o){P(e);let r=u(5);return x(r.onBottomTabIndexChange(o))}),c()}if(i&2){let e=u(5);d("provider",e.provider)("productId",e.productId)("categoryId",e.categoryId)}}function qp(i,t){if(i&1&&(V(0),f(1,Lp,14,9,"div",40)(2,Up,1,3,"provider-catalogue",41),z()),i&2){let e=u(4);a(),d("ngIf",e.providerSettings==null?null:e.providerSettings.member_only),a(),d("ngIf",!(e.providerSettings!=null&&e.providerSettings.member_only))}}function jp(i,t){if(i&1&&(V(0),f(1,zp,2,0,"div",37)(2,qp,3,2,"ng-container",8),z()),i&2){let e=u(3);a(),d("ngIf",e.isMemberCheckLoading),a(),d("ngIf",!e.isMemberCheckLoading)}}function $p(i,t){if(i&1){let e=w();s(0,"about-us",51),C("saveAbout",function(o){P(e);let r=u(3);return x(r.updateAboutUs(o))}),c()}if(i&2){let e=u(3);d("userType",e.userType)("provider",e.provider)}}function Gp(i,t){if(i&1&&h(0,"contact-us",52),i&2){let e=u(3);d("userType",e.userType)("provider",e.provider)("providerId",e.providerId)}}function Hp(i,t){if(i&1&&(V(0),f(1,jp,3,2,"ng-container",8)(2,$p,1,2,"about-us",35)(3,Gp,1,3,"contact-us",36),z()),i&2){let e=u(2);a(),d("ngIf",e.activeTabIndex===0&&e.userType===e.userTypeEnums.CUSTOMER),a(),d("ngIf",e.activeTabIndex===1),a(),d("ngIf",e.activeTabIndex===2)}}function Yp(i,t){if(i&1&&(s(0,"div",2)(1,"div",3)(2,"div",4),h(3,"img",5),c()(),s(4,"div",6),f(5,Rp,20,0,"div",7)(6,Np,35,31,"div",8),c(),f(7,Vp,3,1,"div",9)(8,Hp,4,3,"ng-container",8),c()),i&2){let e=u();a(5),d("ngIf",!e.provider),a(),d("ngIf",e.provider),a(),d("ngIf",e.activeTabIndex===0&&e.display_note!=""&&e.isCatalogueTabActive),a(),d("ngIf",e.provider)}}function Jp(i,t){if(i&1&&h(0,"product-details",57),i&2){let e=u(2);d("selectedProduct",e._providerInfoService.selectedProductForView)("provider",e.provider)}}function Wp(i,t){if(i&1){let e=w();s(0,"div",53),f(1,Jp,1,2,"product-details",54),s(2,"div",55),C("click",function(){P(e);let o=u();return x(o.closeProductView())}),h(3,"i",56),c()()}if(i&2){let e=u();a(),d("ngIf",e.provider)}}var fn=class i{constructor(t,e,n,o,r,l,m,g,O,M,I,k,A,B){this._route=t;this.router=e;this.activatedRoute=n;this._providerInfoService=o;this.authService=r;this.providerDetail=l;this.customerService=m;this.dialog=g;this.toast=O;this.memberApprovalService=M;this.shareService=I;this.cdr=k;this.backHandleService=A;this.searchNav=B;let $=this.router.getCurrentNavigation();this.stateInfo=$?.extras.state||history.state}catalogueComponent;showCartSummary=!1;relativeUrl="";userType="CUSTOMER";activeTabIndex=0;userTypeEnums=bt;stateInfo;providerId=0;provider=void 0;isViewProduct=!1;providerSettings;favoriteCount=0;providerRating=0;isFavorite=!1;favorites=[];isMemberCheckLoading=!1;display_note="";activeBottomTabIndex=0;productId;categoryId;tabs=[{title:"Explora",content:"Tab 1 Content"},{title:"About us",content:"Tab 2 Content"},{title:"Contact us",content:"Tab 3 Content"}];ngOnInit(){if(this.relativeUrl=this.router.url,this.stateInfo?.providerId)this.providerId=this.stateInfo.providerId;else{let e=this.activatedRoute.snapshot.queryParams.providerId;e&&(this.providerId=parseInt(e,10))}let t=this.searchNav.consumeTarget();if(t&&(this.productId=t.productId,this.categoryId=t.categoryId??void 0,!this.providerId&&t.providerId&&(this.providerId=t.providerId)),!this.productId&&this.stateInfo?.productId&&(this.productId=this.stateInfo.productId),!this.categoryId&&this.stateInfo?.categoryId&&(this.categoryId=this.stateInfo.categoryId),!this.productId){let e=this.activatedRoute.snapshot.queryParams.productId;e&&(this.productId=parseInt(e,10))}if(!this.categoryId){let e=this.activatedRoute.snapshot.queryParams.categoryId;e&&(this.categoryId=parseInt(e,10))}this.providerId&&this.providerId>0&&this._providerInfoService.getProviderDetails(this.providerId).subscribe(e=>{this.provider=e.data,this.favoriteCount=e.data.favorite_count||0,this.providerRating=e.data.provider_rating||0,this.providerDetail.setData(this.provider)}),this.relativeUrl.includes("provider")&&(this.userType="PROVIDER",this.setProviderTabIndex()),this.relativeUrl.includes("customer")&&(this.userType="CUSTOMER",this.activeTabIndex=0,this._providerInfoService.getProviderSettings(this.providerId).subscribe(e=>{if(this.providerSettings=e,this.display_note=e.note,this.providerSettings?.member_only){let n=this.authService.getUserId();if(!n){console.warn("User ID missing: skipping member existence check."),this.isMemberCheckLoading=!1;return}this.isMemberCheckLoading=!0,this.memberApprovalService.checkMemberExists(n,this.providerId).pipe(Ge(()=>{this.isMemberCheckLoading=!1})).subscribe({next:o=>{o&&typeof o=="object"&&("member_id"in o||o?.member_json_form||o?.member_mobile_number)&&this.providerSettings&&(this.providerSettings.member_only=!1)},error:o=>{o?.status!==404&&console.error("Failed to verify member existence:",o)}})}else this.isMemberCheckLoading=!1})),this._providerInfoService.viewType$.subscribe(e=>{e==="PRODUCT_VIEW"?this.isViewProduct=!0:e==="PROVIDER_VIEW"&&(this.isViewProduct=!1)}),this.authService.getUserId()>0&&(this.subscribeToFavorites(),this.loadFavorites()),this.registerBackAction()}ngAfterViewInit(){this.catalogueComponent&&(this.activeBottomTabIndex=this.catalogueComponent.activeBottomTabIndex)}onBottomTabIndexChange(t){this.activeBottomTabIndex=t}get isCatalogueTabActive(){return this.activeBottomTabIndex===0}ngOnDestroy(){this.cleanupBackAction()}registerBackAction(){let t=this.router.url,e=this.userType==="PROVIDER"?"/providers/dashboard":"/customers";[t,t.split("?")[0],"/customers/info","/providers/info"].forEach((o,r)=>{let l={id:`provider-info-back-action-${r}-${Date.now()}`,actionType:"navigate",backNavigationUrl:e,callback:()=>{},value:"",forPageUrl:o};this.backHandleService.backAction=this.backHandleService.backAction.filter(m=>!m.id.startsWith("provider-info-back-action-")||m.forPageUrl!==o),this.backHandleService.backAction.push(l)})}cleanupBackAction(){this.backHandleService.backAction=this.backHandleService.backAction.filter(t=>!t.id.startsWith("provider-info-back-action-"))}addFavourite(){let t=this.authService.getUserId();if(!t||t<=0){this.toast.error("Login Required","Please login to add to favorites");return}if(!this.providerId||this.providerId<=0){console.error("Invalid Provider ID");return}console.log("ID-->",this.providerId),this.isFavorite?this.customerService.removeFavorite(this.providerId.toString()).subscribe({next:e=>{console.log("Removed from favorites:",e),this.favoriteCount=Math.max(0,this.favoriteCount-1),this.loadFavorites(),this.toast.success("Success","Removed from favorites")},error:e=>{console.error("Error removing from favorites:",e),this.toast.error("Error","Failed to remove from favorites")}}):this.customerService.addFavorites(this.providerId).subscribe({next:e=>{console.log("Added to favorites:",e),this.favoriteCount=this.favoriteCount+1,this.loadFavorites(),this.toast.success("Success","Added to favorites")},error:e=>{console.error("Error adding to favorites:",e),this.toast.error("Error","Failed to add to favorites")}})}subscribeToFavorites(){this.customerService._favorites$.subscribe(t=>{t&&(this.favorites=t,this.isFavorite=this.favorites.some(e=>e.provider_id==this.providerId.toString()),console.log("Current provider favorite status:",this.isFavorite))})}loadFavorites(){console.log("PID-->",this.providerId),this.customerService.loadFavorites()}setActiveTab(t){this.activeTabIndex=t,t===0&&this.userType==="PROVIDER"&&this.router.navigate(["providers","dashboard"])}indexChanged(t){t===0&&this.userType==="PROVIDER"&&this.router.navigate(["providers","dashboard"])}setProviderTabIndex(){this.stateInfo?.link==="about-us"&&(this.activeTabIndex=1),this.stateInfo?.link==="contact-us"&&(this.activeTabIndex=2)}closeProductView(){this._providerInfoService.viewType$.next("PROVIDER_VIEW")}openMemberRequestDialog(){this.dialog.open(ti,{width:"500px",disableClose:!0,data:{providerId:this.providerId}}).afterClosed().subscribe(e=>{e&&this.toast.success("Success","Your request has been submitted successfully!")})}shareProvider(){this.providerId&&this.provider?this.shareService.shareProvider(this.providerId,this.provider.display_name||this.provider.name):(console.error("\u274C [ProviderInfo] providerId:",this.providerId,"provider:",this.provider),this.toast.error("Error","Unable to share provider information"))}navigateBack(){let t=this.router.url;this.backHandleService.backActionTrigger(t)}updateAboutUs(t){let{aboutUs:e,files:n}=t;if(!this.providerId||!this.provider){this.toast.error("Error","Provider information not available");return}let o=this.authService.getUserId();if(!o){this.toast.error("Error","User not logged in");return}let r;if(n&&n.length>0){let l=new FormData;n.forEach(g=>{l.append("files",g,g.name)});let m=new $o().set("user_id",String(o));r=this._providerInfoService.uploadImages(l,m)}else r=Oe({urls:[]});r.pipe(Rn(l=>{let m=l?.urls||l?.data?.urls||l?.data||[],g=this.provider?.banner_images||[],O=m.length>0?[...g,...m]:g,M=U(D({},this.provider),{about_us:e,banner_images:O});return this._providerInfoService.updateProvider(this.providerId,M)})).subscribe({next:l=>{this.provider&&(this.provider.about_us=e,this.provider.banner_images=l?.data?.banner_images||this.provider.banner_images),this.toast.success("Success","About Us information updated successfully")},error:l=>{console.error("Error updating About Us / banners:",l),this.toast.error("Error","Failed to update About Us information")}})}static \u0275fac=function(e){return new(e||i)(y(ae),y(ae),y(ot),y(Pe),y(X),y(Ht),y(Xn),y(rt),y(Ne),y(qt),y(Br),y(He),y(zt),y(Rr))};static \u0275cmp=F({type:i,selectors:[["app-provider-info"]],viewQuery:function(e,n){if(e&1&&At(Ke,5),e&2){let o;Bt(o=Rt())&&(n.catalogueComponent=o.first)}},decls:2,vars:2,consts:[["class","text-gray-800 font-sans min-h-screen provider-screen",4,"ngIf"],["class","product-view-container",4,"ngIf"],[1,"text-gray-800","font-sans","min-h-screen","provider-screen"],[1,"banner-ad","w-full","relative","overflow-hidden"],[1,"w-full"],["src","assets/images/banner-img.png","alt","Banner",1,"w-full","h-48","object-cover"],[1,"title-card"],["class","skeleton-loader",4,"ngIf"],[4,"ngIf"],["class","scroll-container",4,"ngIf"],[1,"skeleton-loader"],[1,"business-header"],[1,"skeleton-business-name"],[1,"skeleton-heart-section","hidden"],[1,"skeleton-heart-icon"],[1,"skeleton-like-text"],[1,"engagement-metrics","hidden"],[1,"metric-item"],[1,"skeleton-icon"],[1,"skeleton-text"],[1,"nav-tabs"],[1,"skeleton-tab"],["type","button",1,"back-button",3,"click"],[1,"pi","pi-arrow-left"],[1,"business-name"],[1,"heart-section",3,"click"],[1,"pi","heart-icon",3,"ngClass"],[1,"engagement-metrics"],[1,"pi","pi-heart"],[1,"metric-item",2,"cursor","pointer","user-select","none",3,"click","mousedown"],[1,"pi","pi-share-alt"],[1,"pi","pi-star"],[1,"nav-tab",3,"click"],[1,"scroll-container"],[1,"scroll-text"],[3,"userType","provider","saveAbout",4,"ngIf"],[3,"userType","provider","providerId",4,"ngIf"],["class","member-check-loader",4,"ngIf"],[1,"member-check-loader"],[1,"loading-spinner"],["class","member-only-container",4,"ngIf"],["style","position: relative; top: -35px",3,"provider","productId","categoryId","bottomTabIndexChange",4,"ngIf"],[1,"member-only-container"],[1,"member-only-blocker"],[1,"lock-icon"],[1,"pi","pi-lock"],[1,"blocker-title"],[1,"blocker-description"],[1,"request-access-btn",3,"click"],[1,"pi","pi-send"],[2,"position","relative","top","-35px",3,"bottomTabIndexChange","provider","productId","categoryId"],[3,"saveAbout","userType","provider"],[3,"userType","provider","providerId"],[1,"product-view-container"],[3,"selectedProduct","provider",4,"ngIf"],[1,"close-product-view-wrap",3,"click"],[1,"pi","pi-times-circle"],[3,"selectedProduct","provider"]],template:function(e,n){e&1&&f(0,Yp,9,4,"div",0)(1,Wp,4,1,"div",1),e&2&&(d("ngIf",!n.isViewProduct),a(),d("ngIf",n.isViewProduct))},dependencies:[Ae,R,Ke,mn,_n,xt,Uo,q],styles:['.provider-screen[_ngcontent-%COMP%]{background-color:#fff}.provider-screen[_ngcontent-%COMP%]   .banner-ad[_ngcontent-%COMP%]{height:15rem;background:linear-gradient(135deg,#1e293b,#334155);position:absolute;width:100%;top:0;left:0;z-index:-1;overflow:hidden;border-bottom-left-radius:24px;border-bottom-right-radius:24px}.provider-screen[_ngcontent-%COMP%]   .banner-ad.flex[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;color:#fff;font-size:1.2rem;font-weight:500}.provider-screen[_ngcontent-%COMP%]   .banner-ad.w-full[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;width:100%;height:100%}.provider-screen[_ngcontent-%COMP%]   .banner-ad.w-full[_ngcontent-%COMP%] > div.transition-transform[_ngcontent-%COMP%]{transition:transform .7s ease-in-out}.provider-screen[_ngcontent-%COMP%]   .banner-ad.w-full[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{min-width:100%;width:100%;flex-shrink:0}.provider-screen[_ngcontent-%COMP%]   .banner-ad.w-full[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block;border-bottom-left-radius:24px;border-bottom-right-radius:24px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]{margin:auto;margin-top:10rem;background:#fff;border-radius:16px;padding:20px 24px;position:relative;top:-50px;z-index:1;width:95%;box-shadow:0 4px 20px #00000014;border:1px solid #f3f4f6}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]   .skeleton-business-name[_ngcontent-%COMP%]{width:200px;height:24px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite;border-radius:4px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]   .skeleton-heart-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]   .skeleton-heart-section[_ngcontent-%COMP%]   .skeleton-heart-icon[_ngcontent-%COMP%]{width:24px;height:24px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite;border-radius:50%}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]   .skeleton-heart-section[_ngcontent-%COMP%]   .skeleton-like-text[_ngcontent-%COMP%]{width:60px;height:12px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite;border-radius:2px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .engagement-metrics[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;gap:20px;margin-bottom:16px;padding:0}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .engagement-metrics[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .engagement-metrics[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]   .skeleton-icon[_ngcontent-%COMP%]{width:16px;height:16px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite;border-radius:50%}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .engagement-metrics[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]   .skeleton-text[_ngcontent-%COMP%]{width:60px;height:14px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite;border-radius:2px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]{display:flex;width:calc(100% + 48px);position:relative;margin:0 -24px;padding:0 24px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .skeleton-tab[_ngcontent-%COMP%]{flex:1;height:14px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite;border-radius:2px;margin:0 8px}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-width:40px;height:40px;padding:8px;background:transparent;border:none;cursor:pointer;margin-right:12px;border-radius:8px;transition:all .2s ease}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#1f2937;font-size:20px;transition:all .2s ease}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]:hover{background:#0000000d}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#7c3aed}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]:active{transform:scale(.95);background:#0000001a}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]   .business-name[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#1f2937;line-height:1.3;flex:1;margin-right:16px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]   .heart-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-width:40px;height:40px;padding:8px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]   .heart-section[_ngcontent-%COMP%]   .heart-icon[_ngcontent-%COMP%]{color:#7c3aed;font-size:24px;cursor:pointer;transition:all .2s ease}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]   .heart-section[_ngcontent-%COMP%]   .heart-icon[_ngcontent-%COMP%]:hover{transform:scale(1.15);color:#5b21b6}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]   .heart-section[_ngcontent-%COMP%]   .heart-icon[_ngcontent-%COMP%]:active{transform:scale(.95)}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]   .heart-section[_ngcontent-%COMP%]   .heart-icon.pi-thumbs-up-fill[_ngcontent-%COMP%]{color:#5b21b6}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .engagement-metrics[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;gap:20px;margin-bottom:14px;padding:0}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .engagement-metrics[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:7px;font-size:14px;color:#111827}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .engagement-metrics[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:17px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .engagement-metrics[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]   i.pi-heart[_ngcontent-%COMP%]{color:#5d157c}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .engagement-metrics[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]   i.pi-star[_ngcontent-%COMP%]{color:#f59e0b}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .engagement-metrics[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]   i.pi-share-alt[_ngcontent-%COMP%]{color:#5d157c}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .engagement-metrics[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500;white-space:nowrap}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]{display:flex;width:calc(100% + 48px);position:relative;margin:0 -24px;padding:0 24px;border-bottom:2px solid #e5e7eb;gap:4px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-tab[_ngcontent-%COMP%]{flex:1;padding:10px 12px;cursor:pointer;position:relative;font-weight:500;color:#6b7280;font-size:14px;transition:all .3s ease;text-align:center;border-radius:8px 8px 0 0;background:transparent}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-tab.active[_ngcontent-%COMP%]{color:#7c3aed;font-weight:600;background:linear-gradient(to bottom,rgba(124,58,237,.05),transparent)}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-tab.active[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-2px;left:0;right:0;height:3px;background:linear-gradient(90deg,#7c3aed,#a78bfa);border-radius:2px 2px 0 0;box-shadow:0 -2px 8px #7c3aed4d}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-tab[_ngcontent-%COMP%]:hover:not(.active){color:#374151;background:#00000008}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-tab[_ngcontent-%COMP%]:active:not(.active){background:#0000000d}.member-only-container[_ngcontent-%COMP%]{position:relative;top:-35px;padding:40px 20px;text-align:center}.member-only-blocker[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:48px 32px;box-shadow:0 4px 20px #00000014;border:1px solid #f3f4f6;max-width:500px;margin:0 auto}.member-only-blocker[_ngcontent-%COMP%]   .lock-icon[_ngcontent-%COMP%]{font-size:64px;color:#5d157c;margin-bottom:24px}.member-only-blocker[_ngcontent-%COMP%]   .lock-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:inline-block;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.member-only-blocker[_ngcontent-%COMP%]   .blocker-title[_ngcontent-%COMP%]{color:#1f2937;margin-bottom:16px;font-size:28px;font-weight:700;line-height:1.3}.member-only-blocker[_ngcontent-%COMP%]   .blocker-description[_ngcontent-%COMP%]{color:#6b7280;margin-bottom:32px;font-size:16px;line-height:1.6}.member-only-blocker[_ngcontent-%COMP%]   .request-access-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#5d157c,#7c3aed);color:#fff;border:none;padding:14px 36px;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #5d157c4d;display:inline-flex;align-items:center;gap:8px}.member-only-blocker[_ngcontent-%COMP%]   .request-access-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.member-only-blocker[_ngcontent-%COMP%]   .request-access-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#7c3aed,#5d157c);box-shadow:0 6px 16px #5d157c66;transform:translateY(-2px)}.member-only-blocker[_ngcontent-%COMP%]   .request-access-btn[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 8px #5d157c4d}.member-check-loader[_ngcontent-%COMP%]{position:relative;top:-35px;padding:60px 0;display:flex;justify-content:center;align-items:center}.member-check-loader[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;border:4px solid #e5e7eb;border-top-color:#7c3aed;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1;transform:scale(1)}50%{opacity:.8;transform:scale(1.05)}}.product-view-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}.product-view-container[_ngcontent-%COMP%]   .close-product-view-wrap[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:16px;cursor:pointer}.product-view-container[_ngcontent-%COMP%]   .close-product-view-wrap[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:#6b7280;transition:all .2s ease}.product-view-container[_ngcontent-%COMP%]   .close-product-view-wrap[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#ef4444;transform:scale(1.1)}.hidden[_ngcontent-%COMP%]{display:none!important}@media (max-width: 768px){.member-only-container[_ngcontent-%COMP%]{padding:32px 16px}.member-only-blocker[_ngcontent-%COMP%]{padding:40px 24px}.member-only-blocker[_ngcontent-%COMP%]   .lock-icon[_ngcontent-%COMP%]{font-size:56px;margin-bottom:20px}.member-only-blocker[_ngcontent-%COMP%]   .blocker-title[_ngcontent-%COMP%]{font-size:24px}.member-only-blocker[_ngcontent-%COMP%]   .blocker-description[_ngcontent-%COMP%]{font-size:15px;margin-bottom:28px}.member-only-blocker[_ngcontent-%COMP%]   .request-access-btn[_ngcontent-%COMP%]{padding:12px 28px;font-size:15px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]{padding:16px 20px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]{margin-bottom:8px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{min-width:36px;height:36px;margin-right:10px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]   .business-name[_ngcontent-%COMP%]{font-size:18px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]   .heart-section[_ngcontent-%COMP%]{min-width:36px;height:36px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]   .heart-section[_ngcontent-%COMP%]   .heart-icon[_ngcontent-%COMP%]{font-size:22px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .engagement-metrics[_ngcontent-%COMP%]{gap:16px;margin-bottom:12px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .engagement-metrics[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]{font-size:13px;gap:6px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .engagement-metrics[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]{width:calc(100% + 40px);margin:0 -20px;padding:0 20px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-tab[_ngcontent-%COMP%]{font-size:13px;padding:9px 10px}}@media (max-width: 480px){.member-only-container[_ngcontent-%COMP%]{padding:24px 12px}.member-only-blocker[_ngcontent-%COMP%]{padding:32px 20px}.member-only-blocker[_ngcontent-%COMP%]   .lock-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px}.member-only-blocker[_ngcontent-%COMP%]   .blocker-title[_ngcontent-%COMP%]{font-size:20px;margin-bottom:12px}.member-only-blocker[_ngcontent-%COMP%]   .blocker-description[_ngcontent-%COMP%]{font-size:14px;margin-bottom:24px}.member-only-blocker[_ngcontent-%COMP%]   .request-access-btn[_ngcontent-%COMP%]{padding:12px 24px;font-size:14px;width:100%;justify-content:center}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-tab[_ngcontent-%COMP%]{font-size:12px;padding:8px}}.scroll-container[_ngcontent-%COMP%]{width:100%;overflow:hidden;white-space:nowrap;background:#f5e8ff;padding:8px 0;position:relative;top:-40px}.scroll-text[_ngcontent-%COMP%]{display:inline-block;padding-left:100%;animation:_ngcontent-%COMP%_scroll-left 20s linear infinite;font-weight:600;font-size:14px;color:#5d157c}@keyframes _ngcontent-%COMP%_scroll-left{0%{transform:translate(0)}to{transform:translate(-100%)}}']})};var gi=class i{constructor(t){this.http=t}createOrUpdate(t,e){return e?(t.group_id=e,this.updateGroup(t)):this.createGroup(t)}createGroup(t){return this.http.post(E.GROUP.URL,t)}updateGroup(t){return this.http.put(E.GROUP.URL,t)}listGroup(t,e){let n=E.GROUP.LIST.replace("_PROVIDER_ID_",t.toString());if(e){let o=Object.entries(e).map(([r,l])=>`${encodeURIComponent(r)}=${encodeURIComponent(l)}`).join("&");n=n.endsWith("/")?n.slice(0,-1):n,n+="?"+o}return this.http.get(n)}listGroupOnProduct(t,e){let n=E.GROUP.GROUP_LIST.replace("_PROVIDER_ID_",t.toString()).replace("_PRODUCT_ID_",e.toString());return this.http.get(n)}getAvailability(t,e){let n=`${E.AVAILABILITY.LIST}?product_id=${e}&provider_id=${t}`;return this.http.get(n)}listSubscriptions(t){let e=E.SUBSCRIPTIONS_V2.LIST,n=Object.entries(t).map(([o,r])=>`${encodeURIComponent(o)}=${encodeURIComponent(r)}`).join("&");return n&&(e+="?"+n),this.http.get(e)}delete(t){return this.http.delete(`${E.GROUP.URL}/${t}`)}checkGroupNameExists(t,e,n){return this.listGroup(e).pipe(Bn(o=>{let r=t.trim().toLowerCase();return o.groups.some(l=>l.group_name.trim().toLowerCase()===r&&l.group_id!==n)}))}static \u0275fac=function(e){return new(e||i)(Z(fe))};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"})};var Pa=()=>({width:"100%"});function Xp(i,t){if(i&1&&(s(0,"div",22),h(1,"i",23),p(2),c()),i&2){let e=u();a(2),S(" ",e.errorMessage," ")}}function Zp(i,t){i&1&&(s(0,"span",26),p(1," (Current)"),c())}function Kp(i,t){if(i&1&&(s(0,"div",24)(1,"span"),p(2),c(),f(3,Zp,2,0,"span",25),c()),i&2){let e=t.$implicit,n=u();a(2),v(e.group_name),a(),d("ngIf",e.group_id===n.data.subscription.group_id)}}function eu(i,t){i&1&&(s(0,"div",27),p(1),_(2,"translate"),c()),i&2&&(a(),S(" ",b(2,1,"change-plan.group_required")," "))}function tu(i,t){i&1&&(s(0,"div",28),h(1,"i",29),p(2),_(3,"translate"),c()),i&2&&(a(2),S("",b(3,1,"change-plan.loading_plans")," "))}function nu(i,t){if(i&1&&(s(0,"span"),p(1),c()),i&2){let e=t.$implicit,n=u(2);a(),v(n.getPlanLabel(e))}}function iu(i,t){if(i&1&&(s(0,"div",32)(1,"span"),p(2),c()()),i&2){let e=t.$implicit,n=u(2);G("current-plan",n.isCurrentPlan(e.id)),a(2),v(n.getPlanLabel(e))}}function ou(i,t){if(i&1){let e=w();s(0,"p-dropdown",30),C("onChange",function(){P(e);let o=u();return x(o.onPlanChange())}),f(1,nu,2,1,"ng-template",31)(2,iu,3,3,"ng-template",13),c()}if(i&2){let e=u();ft(Ee(5,Pa)),d("options",e.filteredPlans)("placeholder",e.filteredPlans.length===0?"No plans available":"Choose a plan")("disabled",e.loadingPlans)}}function ru(i,t){i&1&&(s(0,"div",27),p(1),_(2,"translate"),c()),i&2&&(a(),S(" ",b(2,1,"change-plan.plan_required")," "))}function au(i,t){if(i&1&&(s(0,"div",36)(1,"span",37),p(2),_(3,"translate"),c(),s(4,"span",38),p(5),c()()),i&2){let e=u(2);a(2),S("",b(3,2,"change-plan.description"),":"),a(3),v(e.selectedPlan.description)}}function cu(i,t){if(i&1&&(s(0,"div",33)(1,"div",34)(2,"h4"),p(3),_(4,"translate"),c(),s(5,"div",35)(6,"div",36)(7,"span",37),p(8),_(9,"translate"),c(),s(10,"span",38),p(11),c()(),s(12,"div",36)(13,"span",37),p(14),_(15,"translate"),c(),s(16,"span",39),p(17),c()(),f(18,au,6,4,"div",40),c()()()),i&2){let e=u();a(3),v(b(4,6,"change-plan.selected_plan_details")),a(5),S("",b(9,8,"change-plan.plan_name"),":"),a(3),v(e.selectedPlan.name),a(3),S("",b(15,10,"change-plan.price"),":"),a(3),S("\u20B9",e.selectedPlan.price,""),a(),d("ngIf",e.selectedPlan.description)}}var _i=class i{constructor(t,e,n,o,r,l){this.dialogRef=t;this.data=e;this.fb=n;this.groupService=o;this.setupRegistrationService=r;this.cdr=l;this.changePlanForm=this.fb.group({group:["",T.required],plan:["",T.required]})}changePlanForm;groups=[];plans=[];filteredPlans=[];selectedPlan=null;loading=!1;loadingGroups=!1;loadingPlans=!1;errorMessage="";ngOnInit(){this.loadGroupsAndPlans()}loadGroupsAndPlans(){if(!this.data.subscription.provider_id||!this.data.subscription.product_id){this.errorMessage="Invalid subscription data";return}this.loadingGroups=!0,this.loadingPlans=!0,this.errorMessage="",this.setupRegistrationService.getSubscriptionPlan(this.data.subscription.provider_id,this.data.subscription.product_id).subscribe({next:t=>{this.plans=Array.isArray(t)?t:[],this.groups=this.setupRegistrationService.getGroupsFromPlans(this.plans),this.loadingGroups=!1,this.loadingPlans=!1,this.cdr.detectChanges(),this.data.subscription.group_id?(this.groups.some(n=>n.group_id===this.data.subscription.group_id)?this.changePlanForm.get("group")?.setValue(this.data.subscription.group_id):this.groups.length>0&&this.changePlanForm.get("group")?.setValue(this.groups[0].group_id),this.onGroupChange()):this.groups.length===1&&(this.changePlanForm.get("group")?.setValue(this.groups[0].group_id),this.onGroupChange())},error:t=>{console.error("Error loading plans:",t),this.errorMessage="Failed to load plans. Please try again.",this.loadingGroups=!1,this.loadingPlans=!1,this.groups=[],this.plans=[],this.cdr.detectChanges()}})}onGroupChange(){let t=this.changePlanForm.get("group")?.value;if(this.errorMessage="",this.filteredPlans=[],this.selectedPlan=null,this.changePlanForm.get("plan")?.reset("",{emitEvent:!1}),this.changePlanForm.get("plan")?.markAsUntouched(),this.changePlanForm.get("plan")?.markAsPristine(),this.changePlanForm.get("plan")?.setErrors(null),this.cdr.detectChanges(),!t)return;let e=this.filterPlansByGroup(this.plans,t);if(this.filteredPlans=[...e],this.filteredPlans.length===0)this.errorMessage="No plans available for the selected group";else if(this.errorMessage="",this.data.subscription.group_id===t&&this.data.subscription.plan_id){let n=this.filteredPlans.find(o=>o.id===this.data.subscription.plan_id);n&&setTimeout(()=>{this.changePlanForm.get("plan")?.setValue(n.id),this.selectedPlan=n,this.cdr.detectChanges()},0)}this.cdr.detectChanges()}onPlanChange(){let t=this.changePlanForm.get("plan")?.value;this.errorMessage="",t?this.selectedPlan=this.filteredPlans.find(e=>e.id==t)||null:this.selectedPlan=null,this.cdr.detectChanges()}filterPlansByGroup(t,e){return!t||t.length===0?[]:t.filter(o=>o.group_ids&&Array.isArray(o.group_ids)?o.group_ids.some(l=>typeof l=="object"&&l!==null&&l.group_id!==void 0?l.group_id==e:l==e):o.group_id!==void 0?o.group_id==e:!0)}onCancel(){this.dialogRef.close()}onSubmit(){this.errorMessage="";let t=this.changePlanForm.get("plan")?.value,e=this.changePlanForm.get("group")?.value;if(!t||!e){this.errorMessage="Please select both group and plan";return}let n=this.filteredPlans.find(l=>l.id==t),o=this.groups.find(l=>l.group_id==e);if(!n||!o){this.errorMessage="Please select both group and plan";return}let r={plan:n,group:o};this.dialogRef.close(r)}isCurrentPlan(t){return t===this.data.subscription.plan_id}getPlanLabel(t){let e=t.name||`Plan ${t.id}`;return e.length>40&&(e=e.substring(0,40)+"..."),e}static \u0275fac=function(e){return new(e||i)(y(zn),y(Ln),y(_e),y(gi),y(Vt),y(He))};static \u0275cmp=F({type:i,selectors:[["app-change-plan-dialog"]],decls:51,vars:38,consts:[[1,"change-plan-dialog"],["mat-dialog-title","",1,"dialog-title"],[1,"dialog-content"],[1,"current-info"],[1,"info-row"],[1,"label"],[1,"value"],["class","error-message",4,"ngIf"],[1,"change-plan-form",3,"formGroup"],[1,"form-field"],["for","group"],[1,"required"],["id","group","formControlName","group","optionLabel","group_name","optionValue","group_id","styleClass","w-full",3,"onChange","options","placeholder","disabled"],["pTemplate","item"],["class","field-error",4,"ngIf"],["for","plan"],["class","loading-spinner",4,"ngIf"],["id","plan","formControlName","plan","optionLabel","name","optionValue","id","styleClass","w-full",3,"options","placeholder","disabled","style","onChange",4,"ngIf"],["class","plan-details",4,"ngIf"],[1,"dialog-actions"],["type","button",1,"btn-cancel",3,"click"],["type","button",1,"btn-submit",3,"click","disabled"],[1,"error-message"],[1,"pi","pi-exclamation-triangle"],[1,"group-item"],["class","current-tag",4,"ngIf"],[1,"current-tag"],[1,"field-error"],[1,"loading-spinner"],[1,"pi","pi-spin","pi-spinner"],["id","plan","formControlName","plan","optionLabel","name","optionValue","id","styleClass","w-full",3,"onChange","options","placeholder","disabled"],["pTemplate","selectedItem"],[1,"plan-item"],[1,"plan-details"],[1,"detail-card"],[1,"plan-info"],[1,"detail-row"],[1,"detail-label"],[1,"detail-value"],[1,"detail-value","price"],["class","detail-row",4,"ngIf"]],template:function(e,n){if(e&1&&(s(0,"div",0)(1,"h2",1),p(2,"Change Plan"),c(),s(3,"mat-dialog-content",2)(4,"div",3)(5,"div",4)(6,"span",5),p(7),_(8,"translate"),c(),s(9,"span",6),p(10),c()(),s(11,"div",4)(12,"span",5),p(13),_(14,"translate"),c(),s(15,"span",6),p(16),c()(),s(17,"div",4)(18,"span",5),p(19),_(20,"translate"),c(),s(21,"span",6),p(22),c()()(),f(23,Xp,3,1,"div",7),s(24,"form",8)(25,"div",9)(26,"label",10),p(27),_(28,"translate"),s(29,"span",11),p(30,"*"),c()(),s(31,"p-dropdown",12),C("onChange",function(){return n.onGroupChange()}),f(32,Kp,4,2,"ng-template",13),c(),f(33,eu,3,3,"div",14),c(),s(34,"div",9)(35,"label",15),p(36),_(37,"translate"),s(38,"span",11),p(39,"*"),c()(),f(40,tu,4,3,"div",16)(41,ou,3,6,"p-dropdown",17)(42,ru,3,3,"div",14),c(),f(43,cu,19,12,"div",18),c()(),s(44,"mat-dialog-actions",19)(45,"button",20),C("click",function(){return n.onCancel()}),p(46),_(47,"translate"),c(),s(48,"button",21),C("click",function(){return n.onSubmit()}),p(49),_(50,"translate"),c()()()),e&2){let o,r;a(7),S("",b(8,23,"change-plan.current_plan"),":"),a(3),v(n.data.subscription.plan.name),a(3),S("",b(14,25,"change-plan.current_group"),":"),a(3),v(n.data.subscription.group.group_name),a(3),S("",b(20,27,"change-plan.product"),":"),a(3),v(n.data.subscription.product.name),a(),d("ngIf",n.errorMessage),a(),d("formGroup",n.changePlanForm),a(3),v(b(28,29,"change-plan.select_group")),a(4),ft(Ee(37,Pa)),d("options",n.groups)("placeholder",n.loadingGroups?"Loading groups...":"Choose a group")("disabled",n.loadingGroups),a(2),d("ngIf",((o=n.changePlanForm.get("group"))==null?null:o.invalid)&&((o=n.changePlanForm.get("group"))==null?null:o.touched)),a(3),v(b(37,31,"change-plan.choose_plan")),a(4),d("ngIf",n.loadingPlans),a(),d("ngIf",!n.loadingPlans),a(),d("ngIf",((r=n.changePlanForm.get("plan"))==null?null:r.invalid)&&((r=n.changePlanForm.get("plan"))==null?null:r.touched)),a(),d("ngIf",n.selectedPlan),a(3),S(" ",b(47,33,"common.cancel")," "),a(2),d("disabled",!n.changePlanForm.valid||n.loadingGroups||n.loadingPlans),a(),S(" ",b(50,35,"change-plan.continue_to_checkout")," ")}},dependencies:[R,Me,Q,oe,re,ge,tr,ir,nr,Re,We,q],styles:['@charset "UTF-8";.change-plan-dialog[_ngcontent-%COMP%]{min-width:90vw;max-width:500px}@media (min-width: 768px){.change-plan-dialog[_ngcontent-%COMP%]{min-width:500px}}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-title[_ngcontent-%COMP%]{color:#310b41;font-size:1.5rem;font-weight:700;margin:0;padding:1rem 1.5rem;border-bottom:2px solid #f0f0f0}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{padding:1.5rem;max-height:70vh;overflow-y:auto}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .current-info[_ngcontent-%COMP%]{background:linear-gradient(62.66deg,#3498db1a 1%,#4b00821a 82%);border-radius:.5rem;padding:1rem;margin-bottom:1.5rem;border:1px solid rgba(52,152,219,.2)}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .current-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.5rem 0}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .current-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid rgba(52,152,219,.15)}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .current-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.875rem;color:indigo;font-weight:600}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .current-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:.875rem;color:#333;font-weight:500;text-align:right}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828;padding:.75rem 1rem;border-radius:.5rem;margin-bottom:1rem;display:flex;align-items:center;gap:.5rem;font-size:.875rem;border:1px solid #ef9a9a}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.125rem}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{margin-bottom:1.5rem}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:600;color:#333;margin-bottom:.5rem}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#dc3545}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:2px solid #e0e0e0;border-radius:.5rem;font-size:.938rem;color:#333;background-color:#fff;transition:all .3s ease;cursor:pointer}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 3px #3498db1a}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;cursor:not-allowed;opacity:.6}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{padding:.5rem}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#3498db;font-size:.875rem;padding:.75rem;background-color:#f8f9fa;border-radius:.5rem}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .field-error[_ngcontent-%COMP%]{color:#dc3545;font-size:.75rem;margin-top:.25rem;font-weight:500}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .plan-details[_ngcontent-%COMP%]{margin-top:1rem}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .plan-details[_ngcontent-%COMP%]   .detail-card[_ngcontent-%COMP%]{background:linear-gradient(62.66deg,#3498db0d 1%,#4b00820d 82%);border-radius:.5rem;padding:1rem;border:1px solid rgba(52,152,219,.2)}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .plan-details[_ngcontent-%COMP%]   .detail-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:#310b41;margin:0 0 1rem}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .plan-details[_ngcontent-%COMP%]   .detail-card[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.5rem 0}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .plan-details[_ngcontent-%COMP%]   .detail-card[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid rgba(52,152,219,.1)}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .plan-details[_ngcontent-%COMP%]   .detail-card[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{font-size:.875rem;color:#666;font-weight:500}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .plan-details[_ngcontent-%COMP%]   .detail-card[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{font-size:.875rem;color:#333;font-weight:600;text-align:right}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .plan-details[_ngcontent-%COMP%]   .detail-card[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-value.price[_ngcontent-%COMP%]{font-size:1.25rem;color:#28a745;font-weight:700}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-top:2px solid #f0f0f0;display:flex;justify-content:flex-end;gap:.75rem}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:.5rem;font-size:.938rem;font-weight:700;cursor:pointer;transition:all .3s ease;border:none;min-width:100px}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   button.btn-cancel[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#333}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   button.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   button.btn-submit[_ngcontent-%COMP%]{background:linear-gradient(62.66deg,#3498db 1%,indigo 82%);color:#fff;box-shadow:0 4px 15px #3498db4d}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   button.btn-submit[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #3498db66}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   button.btn-submit[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none;box-shadow:none}@media (max-width: 768px){.change-plan-dialog[_ngcontent-%COMP%]   .dialog-title[_ngcontent-%COMP%]{font-size:1.25rem;padding:.875rem 1rem}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{padding:1rem}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .current-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.25rem}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .current-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{text-align:left}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]{padding:.875rem 1rem;flex-wrap:wrap}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;min-width:120px}}  .p-dropdown{width:100%;border-radius:.5rem}  .p-dropdown .p-dropdown-label{padding:.75rem;font-size:.938rem;color:#333}  .p-dropdown:not(.p-disabled).p-focus{box-shadow:0 0 0 3px #3498db1a;border-color:#3498db}.group-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.group-item[_ngcontent-%COMP%]   .current-tag[_ngcontent-%COMP%]{font-size:.75rem;color:#28a745;background:#28a7451a;padding:2px 6px;border-radius:4px;font-weight:600}.plan-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;padding:.25rem .5rem;margin:0 -.5rem;border-radius:4px}.plan-item[_ngcontent-%COMP%]   .plan-price[_ngcontent-%COMP%]{font-weight:600;color:#28a745}.plan-item.current-plan[_ngcontent-%COMP%]{background-color:#4b008214;font-weight:600;color:indigo}.plan-item.current-plan[_ngcontent-%COMP%]:after{content:"\\2713";margin-left:.5rem;color:indigo;font-weight:700}']})};var fi=class i{constructor(t){this.http=t}createOrder(t){return this.http.post(`${E.SALES.CREATE}`,t)}createSubscriptionOrder(t){return this.http.post(`${E.SALES.CREATE}`,t)}createServiceSubscriptionOrder(t){return this.http.post(`${E.SALES.CREATE}`,t)}createFormsOrder(t){return this.http.post(`${E.SALES.CREATE}`,t)}static \u0275fac=function(e){return new(e||i)(Z(fe))};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"})};var Zt=wo(Oc(),1);var im=["qrcElement"],Mc=(()=>{class i{constructor(e,n){this.renderer=e,this.sanitizer=n,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new Y,this.context=null}ngOnChanges(){return ke(this,null,function*(){yield this.createQRCode()})}isValidQrCodeText(e){return this.allowEmptyString===!1?!(typeof e>"u"||e===""||e==="null"||e===null):!(typeof e>"u")}toDataURL(e){return new Promise((n,o)=>{(0,Zt.toDataURL)(this.qrdata,e,(r,l)=>{r?o(r):n(l)})})}toCanvas(e,n){return new Promise((o,r)=>{(0,Zt.toCanvas)(e,this.qrdata,n,l=>{l?r(l):o("success")})})}toSVG(e){return new Promise((n,o)=>{(0,Zt.toString)(this.qrdata,e,(r,l)=>{r?o(r):n(l)})})}renderElement(e){for(let n of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,n);this.renderer.appendChild(this.qrcElement.nativeElement,e)}createQRCode(){return ke(this,null,function*(){this.version&&this.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),this.version=40):this.version&&this.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),this.version=1):this.version!==void 0&&isNaN(this.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),this.version=void 0);try{if(!this.isValidQrCodeText(this.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");this.isValidQrCodeText(this.qrdata)&&this.qrdata===""&&(this.qrdata=" ");let e={color:{dark:this.colorDark,light:this.colorLight},errorCorrectionLevel:this.errorCorrectionLevel,margin:this.margin,scale:this.scale,version:this.version,width:this.width},n=this.imageSrc,o=this.imageHeight||40,r=this.imageWidth||40;switch(this.elementType){case"canvas":{let l=this.renderer.createElement("canvas");this.context=l.getContext("2d"),this.toCanvas(l,e).then(()=>{if(this.ariaLabel&&this.renderer.setAttribute(l,"aria-label",`${this.ariaLabel}`),this.title&&this.renderer.setAttribute(l,"title",`${this.title}`),n&&this.context){this.centerImage=new Image(r,o),n!==this.centerImage.src&&(this.centerImage.crossOrigin="anonymous",this.centerImage.src=n),o!==this.centerImage.height&&(this.centerImage.height=o),r!==this.centerImage.width&&(this.centerImage.width=r);let m=this.centerImage;m&&(m.onload=()=>{this.context?.drawImage(m,l.width/2-r/2,l.height/2-o/2,r,o)})}this.renderElement(l),this.emitQRCodeURL(l)}).catch(m=>{console.error("[angularx-qrcode] canvas error:",m)});break}case"svg":{let l=this.renderer.createElement("div");this.toSVG(e).then(m=>{this.renderer.setProperty(l,"innerHTML",m);let g=l.firstChild;this.renderer.setAttribute(g,"height",`${this.width}`),this.renderer.setAttribute(g,"width",`${this.width}`),this.renderElement(g),this.emitQRCodeURL(g)}).catch(m=>{console.error("[angularx-qrcode] svg error:",m)});break}case"url":case"img":default:{let l=this.renderer.createElement("img");this.toDataURL(e).then(m=>{this.alt&&l.setAttribute("alt",this.alt),this.ariaLabel&&l.setAttribute("aria-label",this.ariaLabel),l.setAttribute("src",m),this.title&&l.setAttribute("title",this.title),this.renderElement(l),this.emitQRCodeURL(l)}).catch(m=>{console.error("[angularx-qrcode] img/url error:",m)})}}}catch(e){console.error("[angularx-qrcode] Error generating QR Code:",e.message)}})}convertBase64ImageUrlToBlob(e){let n=e.split(";base64,"),o=n[0].split(":")[1],r=atob(n[1]),l=new Uint8Array(r.length);for(let m=0;m<r.length;++m)l[m]=r.charCodeAt(m);return new Blob([l],{type:o})}emitQRCodeURL(e){let n=e.constructor.name;if(n===SVGSVGElement.name){let g=e.outerHTML,O=new Blob([g],{type:"image/svg+xml"}),M=URL.createObjectURL(O),I=this.sanitizer.bypassSecurityTrustUrl(M);this.qrCodeURL.emit(I);return}let o="";n===HTMLCanvasElement.name&&(o=e.toDataURL("image/png")),n===HTMLImageElement.name&&(o=e.src);let r=this.convertBase64ImageUrlToBlob(o),l=URL.createObjectURL(r),m=this.sanitizer.bypassSecurityTrustUrl(l);this.qrCodeURL.emit(m)}static{this.\u0275fac=function(n){return new(n||i)(y(Do),y(Go))}}static{this.\u0275cmp=F({type:i,selectors:[["qrcode"]],viewQuery:function(n,o){if(n&1&&At(im,7),n&2){let r;Bt(r=Rt())&&(o.qrcElement=r.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[ve],decls:2,vars:2,consts:[["qrcElement",""]],template:function(n,o){n&1&&h(0,"div",null,0),n&2&&Ao(o.cssClass)},encapsulation:2,changeDetection:0})}}return i})(),yc=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Ft({type:i})}static{this.\u0275inj=Dt({})}}return i})();var Sc=i=>({selected:i}),sm=i=>({"chip-date--selected":i}),lm=i=>({"time-chip--selected":i});function dm(i,t){i&1&&(s(0,"div",6)(1,"div",7),h(2,"div",8),s(3,"p"),p(4),_(5,"translate"),c()()()),i&2&&(a(4),v(b(5,1,"providerInfo.checkout.loading")))}function pm(i,t){if(i&1&&(s(0,"div",48),p(1),c()),i&2){let e=u(4);a(),S(" ",e.productData==null||e.productData.delivery_address==null?null:e.productData.delivery_address.address_tag," ")}}function um(i,t){if(i&1){let e=w();s(0,"div",49),C("click",function(o){P(e);let r=u(4);return x(r.toggleDeliveryAddressExpansion(o))}),p(1),c()}if(i&2){let e=u(4);G("info-address--expanded",e.isDeliveryAddressExpanded),a(),S(" ",e.getDeliveryAddressDisplay()," ")}}function mm(i,t){i&1&&(s(0,"div",50),p(1),c()),i&2&&(a(),S(" ","No address selected"," "))}function gm(i,t){if(i&1&&(s(0,"div",51),p(1),c()),i&2){let e=u(4);a(),S(" ",e.addressValidationError," ")}}function _m(i,t){if(i&1){let e=w();s(0,"div",38),C("click",function(){P(e);let o=u(3);return x(o.selectOption("door_delivery"))}),s(1,"div",39),h(2,"img",40),_(3,"translate"),c(),s(4,"div",41)(5,"div",42)(6,"div")(7,"div",43),p(8),_(9,"translate"),c(),f(10,pm,2,1,"div",44),c()(),f(11,um,2,3,"div",45)(12,mm,2,1,"ng-template",null,2,xe)(14,gm,2,1,"div",46),s(15,"button",47),C("click",function(o){return P(e),u(3).changeAddress("select"),x(o.stopPropagation())}),p(16),_(17,"translate"),c()()()}if(i&2){let e=de(13),n=u(3);d("ngClass",ce(14,Sc,n.selectedOption==="door_delivery")),a(2),H("alt",b(3,8,"providerInfo.checkout.deliver_to")),a(6),S(" ",b(9,10,"providerInfo.checkout.deliver_to")," "),a(2),d("ngIf",n.productData==null||n.productData.delivery_address==null?null:n.productData.delivery_address.address_tag),a(),d("ngIf",n.getDeliveryAddressDisplay())("ngIfElse",e),a(3),d("ngIf",n.addressValidationError),a(2),S(" ",b(17,12,"providerInfo.checkout.change_address")," ")}}function fm(i,t){if(i&1){let e=w();s(0,"div",52),C("click",function(){P(e);let o=u(3);return x(o.selectOption("pickup"))}),h(1,"img",53),_(2,"translate"),s(3,"div")(4,"div",43),p(5),_(6,"translate"),c()()()}if(i&2){let e=u(3);d("ngClass",ce(7,Sc,e.selectedOption==="pickup")),a(),H("alt",b(2,3,"providerInfo.checkout.order_pickup")),a(4),S(" ",b(6,5,"providerInfo.checkout.order_pickup")," ")}}function hm(i,t){if(i&1&&(s(0,"div",35),f(1,_m,18,16,"div",36)(2,fm,7,9,"div",37),c()),i&2){let e=u(2);a(),d("ngIf",e.showDeliverTo),a(),d("ngIf",e.showPickup)}}function bm(i,t){if(i&1&&(s(0,"div",28)(1,"span",66),p(2),c(),s(3,"span",67),p(4),c()()),i&2){let e=u().$implicit;a(2),v(e.member_name),a(2),S("- ",e.member_mobile_number,"")}}function Cm(i,t){if(i&1&&f(0,bm,5,2,"div",65),i&2){let e=t.$implicit;d("ngIf",e)}}function vm(i,t){if(i&1){let e=w();s(0,"div",54)(1,"div",55)(2,"label",56),p(3,"Select Customer"),c(),s(4,"label",57)(5,"input",58),me("ngModelChange",function(o){P(e);let r=u(2);return ue(r.isSelfOrder,o)||(r.isSelfOrder=o),x(o)}),c(),p(6," Self Order "),c()(),s(7,"div",59)(8,"div",60)(9,"p-autoComplete",61),me("ngModelChange",function(o){P(e);let r=u(2);return ue(r.selectedCustomer,o)||(r.selectedCustomer=o),x(o)}),C("completeMethod",function(o){P(e);let r=u(2);return x(r.onFilterCustomers(o))}),f(10,Cm,1,1,"ng-template",62),c()(),s(11,"button",63),C("click",function(){P(e);let o=u(2);return x(o.addNewCustomer())}),h(12,"i",64),c()()()}if(i&2){let e=u(2);a(5),pe("ngModel",e.isSelfOrder),a(2),G("opacity-50",e.isSelfOrder)("pointer-events-none",e.isSelfOrder),a(2),pe("ngModel",e.selectedCustomer),d("suggestions",e.customers)("minLength",1)("showEmptyMessage",!1)("disabled",e.isSelfOrder),a(2),d("disabled",e.isSelfOrder)}}function Pm(i,t){if(i&1&&(s(0,"div",21)(1,"span",76),p(2,"Product:"),c(),s(3,"span",77),p(4),c()()),i&2){let e=u(3);a(4),v(e.productData==null||e.productData.selectedProduct==null?null:e.productData.selectedProduct.name)}}function xm(i,t){if(i&1&&(s(0,"div",21)(1,"span",76),p(2,"Group:"),c(),s(3,"span",77),p(4),c()()),i&2){let e=u(3);a(4),v(e.getGroupName())}}function Om(i,t){if(i&1&&(s(0,"div",21)(1,"span",76),p(2,"Billing Type:"),c(),s(3,"span",79),p(4),c()()),i&2){let e=u(3);a(4),v(e.productData==null||e.productData.plan==null?null:e.productData.plan.billing_type)}}function Mm(i,t){if(i&1&&(s(0,"div",21)(1,"span",76),p(2,"Group:"),c(),s(3,"span",77),p(4),c()()),i&2){let e=u(3);a(4),v(e.productData==null||e.productData.group==null?null:e.productData.group.group_name)}}function ym(i,t){if(i&1&&(s(0,"div",21)(1,"span",76),p(2,"Member:"),c(),s(3,"span",77),p(4),c()()),i&2){let e=u(3);a(4),v(e.productData==null||e.productData.member==null?null:e.productData.member.member_name)}}function Sm(i,t){if(i&1&&(s(0,"div",80)(1,"div",81),h(2,"i",82),s(3,"span",83),p(4),c()()()),i&2){let e=u(3);a(4),Ue("Plan changed from: ",e.productData==null||e.productData.previousPlan==null?null:e.productData.previousPlan.name," (\u20B9",e.productData==null||e.productData.previousPlan==null?null:e.productData.previousPlan.price,")")}}function wm(i,t){if(i&1&&(s(0,"div",68)(1,"div",69)(2,"div",70)(3,"div",71)(4,"div",72),h(5,"i",73),s(6,"span",43),p(7),c()()(),s(8,"div",74),f(9,Pm,5,1,"div",75),s(10,"div",21)(11,"span",76),p(12,"Plan:"),c(),s(13,"span",77),p(14),c()(),f(15,xm,5,1,"div",75)(16,Om,5,1,"div",75)(17,Mm,5,1,"div",75)(18,ym,5,1,"div",75)(19,Sm,5,2,"div",78),c()()()()),i&2){let e=u(2);a(7),S(" ",e.isRenewalMode?"\u{1F504} Subscription Renewal":"\u{1F4CB} Subscription Plan"," "),a(2),d("ngIf",!e.isServiceSubscription),a(5),v(e.productData==null||e.productData.plan==null?null:e.productData.plan.name),a(),d("ngIf",e.isServiceSubscription&&e.getGroupName()),a(),d("ngIf",e.isServiceSubscription&&(e.productData==null||e.productData.plan==null?null:e.productData.plan.billing_type)),a(),d("ngIf",!e.isServiceSubscription),a(),d("ngIf",e.productData==null||e.productData.member==null?null:e.productData.member.member_name),a(),d("ngIf",e.productData==null?null:e.productData.isPlanChange)}}function Im(i,t){i&1&&Bi(0)}function km(i,t){if(i&1&&(s(0,"expander-template",84),_(1,"translate"),f(2,Im,1,0,"ng-container",85),c()),i&2){u();let e=de(15);d("title",b(1,3,"providerInfo.checkout.other_setup"))("defaultExpandedStatus",!0),a(2),d("ngTemplateOutlet",e)}}function Tm(i,t){i&1&&Bi(0)}function Em(i,t){if(i&1&&(s(0,"div",87),f(1,Tm,1,0,"ng-container",85),c()),i&2){u(2);let e=de(15);a(),d("ngTemplateOutlet",e)}}function Dm(i,t){if(i&1&&f(0,Em,2,1,"div",86),i&2){let e=u(2);d("ngIf",!(e.productData!=null&&e.productData.isExistingMember)&&!(e.productData!=null&&e.productData.isNewMember))}}function Fm(i,t){i&1&&(s(0,"label",103),h(1,"input",104),p(2),_(3,"translate"),c()),i&2&&(a(2),S(" ",b(3,1,"providerInfo.checkout.today")," "))}function Am(i,t){i&1&&(s(0,"label",103),h(1,"input",105),p(2),_(3,"translate"),c()),i&2&&(a(2),S(" ",b(3,1,"providerInfo.checkout.schedule")," "))}function Bm(i,t){i&1&&(s(0,"label",103),h(1,"input",106),p(2),_(3,"translate"),c()),i&2&&(a(2),S(" ",b(3,1,"providerInfo.checkout.subscribe")," "))}function Rm(i,t){if(i&1){let e=w();s(0,"button",107),C("click",function(){let o=P(e).index,r=u(4);return x(r.selectDate(o))}),s(1,"div",108),p(2),c(),s(3,"div",109),p(4),c()()}if(i&2){let e=t.$implicit,n=t.index,o=u(4);d("ngClass",ce(3,sm,o.selectedDateIndex===n)),a(2),v(e.day),a(2),v(e.label)}}function Nm(i,t){if(i&1){let e=w();V(0),s(1,"button",113),C("click",function(){let o=P(e).$implicit,r=u(5);return x(r.onSlotSelect(o))}),p(2),c(),z()}if(i&2){let e,n=t.$implicit,o=u(5);a(),d("ngClass",ce(2,lm,((e=o.checkoutForm.get("bookSlot"))==null||e.value==null?null:e.value.slot_id)===n.slot_id)),a(),S(" ",n.slot_name," ")}}function Vm(i,t){if(i&1&&(s(0,"div",94)(1,"div",28),h(2,"lucide-icon",110),s(3,"span",91),p(4),_(5,"translate"),c()(),s(6,"div",111),f(7,Nm,3,4,"ng-container",112),c()()),i&2){let e=u(4);a(4),v(b(5,2,"providerInfo.checkout.book_slot")),a(3),d("ngForOf",e.availableSlots)}}function zm(i,t){if(i&1){let e=w();s(0,"div",94)(1,"label",115),p(2),_(3,"translate"),c(),s(4,"div",120)(5,"label",103)(6,"input",121),C("change",function(){P(e);let o=u(5);return x(o.toggleDay("monday"))}),c(),s(7,"span",108),p(8),_(9,"translate"),c()(),s(10,"label",103)(11,"input",121),C("change",function(){P(e);let o=u(5);return x(o.toggleDay("tuesday"))}),c(),s(12,"span",108),p(13),_(14,"translate"),c()(),s(15,"label",103)(16,"input",121),C("change",function(){P(e);let o=u(5);return x(o.toggleDay("wednesday"))}),c(),s(17,"span",108),p(18),_(19,"translate"),c()(),s(20,"label",103)(21,"input",121),C("change",function(){P(e);let o=u(5);return x(o.toggleDay("thursday"))}),c(),s(22,"span",108),p(23),_(24,"translate"),c()(),s(25,"label",103)(26,"input",121),C("change",function(){P(e);let o=u(5);return x(o.toggleDay("friday"))}),c(),s(27,"span",108),p(28),_(29,"translate"),c()(),s(30,"label",103)(31,"input",121),C("change",function(){P(e);let o=u(5);return x(o.toggleDay("saturday"))}),c(),s(32,"span",108),p(33),_(34,"translate"),c()(),s(35,"label",103)(36,"input",121),C("change",function(){P(e);let o=u(5);return x(o.toggleDay("sunday"))}),c(),s(37,"span",108),p(38),_(39,"translate"),c()()()()}if(i&2){let e=u(5);a(2),v(b(3,15,"providerInfo.checkout.delivery_days")),a(4),d("checked",e.selectedCustomDays.includes("monday")),a(2),v(b(9,17,"providerInfo.checkout.weekdays.monday")),a(3),d("checked",e.selectedCustomDays.includes("tuesday")),a(2),v(b(14,19,"providerInfo.checkout.weekdays.tuesday")),a(3),d("checked",e.selectedCustomDays.includes("wednesday")),a(2),v(b(19,21,"providerInfo.checkout.weekdays.wednesday")),a(3),d("checked",e.selectedCustomDays.includes("thursday")),a(2),v(b(24,23,"providerInfo.checkout.weekdays.thursday")),a(3),d("checked",e.selectedCustomDays.includes("friday")),a(2),v(b(29,25,"providerInfo.checkout.weekdays.friday")),a(3),d("checked",e.selectedCustomDays.includes("saturday")),a(2),v(b(34,27,"providerInfo.checkout.weekdays.saturday")),a(3),d("checked",e.selectedCustomDays.includes("sunday")),a(2),v(b(39,29,"providerInfo.checkout.weekdays.sunday"))}}function Lm(i,t){if(i&1&&(s(0,"div",89)(1,"div",28),h(2,"lucide-icon",114),s(3,"span",91),p(4),_(5,"translate"),c()(),s(6,"div",94)(7,"label",115),p(8),_(9,"translate"),c(),s(10,"div",116)(11,"label",103),h(12,"input",117),s(13,"span",108),p(14),_(15,"translate"),c()(),s(16,"label",103),h(17,"input",118),s(18,"span",108),p(19),_(20,"translate"),c()(),s(21,"label",103),h(22,"input",119),s(23,"span",108),p(24),_(25,"translate"),c()()()(),f(26,zm,40,31,"div",102),c()),i&2){let e=u(4);a(4),v(b(5,6,"providerInfo.checkout.subscription_options")),a(4),v(b(9,8,"providerInfo.checkout.frequency")),a(6),v(b(15,10,"providerInfo.checkout.daily")),a(5),v(b(20,12,"providerInfo.checkout.weekly")),a(5),v(b(25,14,"providerInfo.checkout.monthly")),a(2),d("ngIf",e.selectedFrequency==="weekly")}}function Um(i,t){if(i&1){let e=w();s(0,"div",89)(1,"div",28),h(2,"lucide-icon",90),s(3,"span",91),p(4),_(5,"translate"),c()(),s(6,"div",92),f(7,Fm,4,3,"label",93)(8,Am,4,3,"label",93)(9,Bm,4,3,"label",93),c(),s(10,"div",94)(11,"div",95)(12,"button",96),C("click",function(){P(e);let o=u(3);return x(o.loadPreviousDates())}),h(13,"i",97),c(),s(14,"div",98),f(15,Rm,5,5,"button",99),c(),s(16,"button",100),C("click",function(){P(e);let o=u(3);return x(o.loadNextDates())}),h(17,"i",101),c()()(),f(18,Vm,8,4,"div",102)(19,Lm,27,16,"div",88),c()}if(i&2){let e,n=u(3);a(4),v(b(5,13,"providerInfo.checkout.book_date")),a(3),d("ngIf",n.allowedBookTypes.includes("default")||n.allowedBookTypes.includes("today")),a(),d("ngIf",n.allowedBookTypes.includes("schedule")),a(),d("ngIf",n.allowedBookTypes.includes("product_subscription")),a(3),G("nav-arrow--disabled",!n.canLoadPreviousDates),d("disabled",!n.canLoadPreviousDates),a(3),d("ngForOf",n.dates),a(),G("nav-arrow--disabled",!n.canLoadMoreDates),d("disabled",!n.canLoadMoreDates),a(2),d("ngIf",n.slotsEnabled&&n.availableSlots.length>0),a(),d("ngIf",((e=n.checkoutForm.get("bookDateType"))==null?null:e.value)==="product_subscription")}}function qm(i,t){if(i&1&&f(0,Um,20,15,"div",88),i&2){let e=u(2);d("ngIf",!e.isServiceSubscription)}}function jm(i,t){i&1&&(s(0,"label",124),h(1,"input",125),s(2,"span",108),p(3),_(4,"translate"),c()()),i&2&&(a(),d("value","cash"),a(2),v(b(4,2,"providerInfo.checkout.cash_on_hand")))}function $m(i,t){i&1&&(s(0,"label",124),h(1,"input",125),s(2,"span",108),p(3),_(4,"translate"),c()()),i&2&&(a(),d("value","online"),a(2),v(b(4,2,"providerInfo.checkout.online")))}function Gm(i,t){if(i&1&&(s(0,"div")(1,"p",91),p(2),_(3,"translate"),c(),s(4,"div",122),f(5,jm,5,4,"label",123)(6,$m,5,4,"label",123),c()()),i&2){let e=u(2);a(2),S(" ",b(3,3,"providerInfo.checkout.payment_mode")," "),a(3),d("ngIf",e.paymentTypes.includes("cash")),a(),d("ngIf",e.paymentTypes.includes("online"))}}function Hm(i,t){if(i&1&&(s(0,"div",134)(1,"h2"),p(2),_(3,"translate"),c(),h(4,"qrcode",135),s(5,"p"),p(6),_(7,"translate"),c(),s(8,"p"),p(9),_(10,"translate"),c()()),i&2){let e=u(3);a(2),v(b(3,8,"providerInfo.checkout.scan_to_pay")),a(2),d("qrdata",e.upiUri)("width",200)("errorCorrectionLevel","M"),a(2),Ue("",b(7,10,"providerInfo.checkout.pay_to")," ",e.name,""),a(3),Ue("",b(10,12,"providerInfo.checkout.amount")," \u20B9",e.amount,"")}}function Ym(i,t){if(i&1){let e=w();s(0,"div",136)(1,"button",137),C("click",function(){P(e);let o=u(3);return x(o.markPaymentAsReceived())}),p(2),_(3,"translate"),c()()}i&2&&(a(2),S(" ",b(3,1,"providerInfo.checkout.mark_payment_received")," "))}function Jm(i,t){if(i&1){let e=w();s(0,"div",126)(1,"div")(2,"p",91),p(3),_(4,"translate"),c(),s(5,"div",122)(6,"label",124),h(7,"input",127),s(8,"span",108),p(9),_(10,"translate"),c()(),s(11,"label",124),h(12,"input",128),s(13,"span",108),p(14),_(15,"translate"),c()()()(),f(16,Hm,11,14,"div",129),s(17,"div",130)(18,"label",124)(19,"input",131),C("change",function(){P(e);let o=u(2);return x(o.onPaymentStatusChange("paid"))}),c(),s(20,"span",108),p(21),_(22,"translate"),c()(),s(23,"label",124)(24,"input",132),C("change",function(){P(e);let o=u(2);return x(o.onPaymentStatusChange("pending"))}),c(),s(25,"span",108),p(26),_(27,"translate"),c()()(),f(28,Ym,4,3,"div",133),c()}if(i&2){let e,n,o=u(2);a(3),S(" ",b(4,7,"providerInfo.checkout.payment_mode")," "),a(6),v(b(10,9,"providerInfo.checkout.cash")),a(5),v(b(15,11,"providerInfo.checkout.collect")),a(2),d("ngIf",((e=o.checkoutForm.get("paymentMode"))==null?null:e.value)==="collect"),a(5),v(b(22,13,"providerInfo.checkout.paid")),a(5),v(b(27,15,"providerInfo.checkout.pending")),a(2),d("ngIf",((n=o.checkoutForm.get("paymentMode"))==null?null:n.value)==="collect")}}function Wm(i,t){if(i&1){let e=w();s(0,"button",138),C("click",function(){P(e);let o=u(2);return x(o.goBackToProducts())}),p(1),_(2,"translate"),c()}i&2&&(a(),S(" ",b(2,1,"providerInfo.checkout.add_more")," "))}function Qm(i,t){if(i&1){let e=w();V(0),s(1,"button",144),C("click",function(){P(e);let o=u().$implicit,r=u(2);return x(r.updateQuantity(o,!1))}),h(2,"i",145),c(),s(3,"span",146),p(4),c(),s(5,"button",147),C("click",function(){P(e);let o=u().$implicit,r=u(2);return x(r.updateQuantity(o,!0))}),h(6,"i",148),c(),z()}if(i&2){let e=u().$implicit;a(4),v(e.quantity||1)}}function Xm(i,t){if(i&1){let e=w();s(0,"span",149),p(1),c(),s(2,"button",150),C("click",function(){P(e);let o=u().$implicit,r=u(2);return x(r.removeItem(o))}),h(3,"i",151),c()}if(i&2){let e=u().$implicit;a(),v(e.quantity||1)}}function Zm(i,t){if(i&1&&(s(0,"div",139)(1,"div",59),h(2,"img",140),s(3,"div")(4,"div",141),p(5),c(),s(6,"div",142),p(7),c(),s(8,"div",67),p(9),c()()(),s(10,"div",28),f(11,Qm,7,1,"ng-container",143)(12,Xm,4,1,"ng-template",null,3,xe),c()()),i&2){let e=t.$implicit,n=de(13),o=u(2);a(2),H("alt",e.name),d("src",(e.img==null?null:e.img[0])||"assets/images/products/product-placeholder.png",le),a(3),v(e.name),a(2),S(" \u20B9",(e.quantity||1)*(e.price||0)," "),a(2),S("(\u20B9",e.price||0," each)"),a(2),d("ngIf",!o.shouldHideQuantityButtons&&(e.productSubType==="standard"||e.productSubType==="flexible"))("ngIfElse",n)}}function Km(i,t){if(i&1&&(s(0,"div",152)(1,"div",153)(2,"span",154),p(3),_(4,"translate"),c(),s(5,"span",155),p(6),c()()()),i&2){let e=u(2);a(3),v(b(4,2,"providerInfo.checkout.subtotal")),a(3),S("\u20B9",e.totalAmount,"")}}function eg(i,t){if(i&1&&(s(0,"div",156),p(1),c()),i&2){let e=u(2);a(),S(" ",e.errorMessage," ")}}function tg(i,t){i&1&&(s(0,"div",157),h(1,"div",158),s(2,"p",159),p(3),_(4,"translate"),c()()),i&2&&(a(3),S(" ",b(4,1,"providerInfo.checkout.loading")," "))}function ng(i,t){if(i&1&&(s(0,"span"),p(1),c()),i&2){let e=u(2);a(),v(e.getOrderButtonText())}}function ig(i,t){i&1&&(s(0,"span"),p(1),_(2,"translate"),c()),i&2&&(a(),v(b(2,1,"providerInfo.checkout.creating_order")))}function og(i,t){if(i&1){let e=w();s(0,"div",9)(1,"div",10)(2,"button",11),C("click",function(){P(e);let o=u();return x(o.goBack())}),h(3,"i",12),c(),s(4,"h2"),p(5),_(6,"translate"),c()(),f(7,hm,3,2,"div",13)(8,vm,13,11,"div",14)(9,wm,20,8,"div",15),s(10,"form",16),f(11,km,3,5,"expander-template",17)(12,Dm,1,1,"ng-template",null,0,xe)(14,qm,1,1,"ng-template",null,1,xe),h(16,"br"),f(17,Gm,7,5,"div",18)(18,Jm,29,17,"div",19),c(),s(19,"div",20)(20,"div",21)(21,"span",22),p(22),_(23,"translate"),c(),f(24,Wm,3,3,"button",23),c(),f(25,Zm,14,7,"div",24),c(),s(26,"div",25)(27,"div",26),C("click",function(){P(e);let o=u();return x(o.toggleExpand())}),s(28,"span",27),p(29),_(30,"translate"),c(),s(31,"div",28)(32,"span",29),p(33),c(),h(34,"i",30),c()(),f(35,Km,7,4,"div",31),c(),f(36,eg,2,1,"div",32)(37,tg,5,3,"div",33),s(38,"button",34),C("click",function(){P(e);let o=u();return x(o.orderNow())}),f(39,ng,2,1,"span",18)(40,ig,3,3,"span",18),c()()}if(i&2){let e=de(13),n=u();a(5),v(b(6,23,"providerInfo.checkout.order_review")),a(2),d("ngIf",n.showDeliverTo||n.showPickup),a(),d("ngIf",n.isProvider&&!(n.productData!=null&&n.productData.isExistingMember)&&!(n.productData!=null&&n.productData.isNewMember)),a(),d("ngIf",(n.productData==null?null:n.productData.productSubType)==="product_subscription"||(n.productData==null?null:n.productData.selectedProduct)),a(),d("formGroup",n.checkoutForm),a(),d("ngIf",n.isProvider&&!(n.productData!=null&&n.productData.isExistingMember)&&!(n.productData!=null&&n.productData.isNewMember))("ngIfElse",e),a(6),d("ngIf",!n.isProvider),a(),d("ngIf",n.isProvider),a(4),v(b(23,25,"providerInfo.checkout.order_details")),a(2),d("ngIf",n.shouldShowAddMoreButton),a(),d("ngForOf",n.cartItemsList),a(4),v(b(30,27,"providerInfo.checkout.total")),a(4),S("\u20B9",n.totalAmount,""),a(),d("ngClass",n.expanded?"pi-chevron-up":"pi-chevron-down"),a(),d("ngIf",n.expanded),a(),d("ngIf",n.errorMessage),a(),d("ngIf",n.isLoading),a(),G("opacity-50",n.isCreatingOrder),d("disabled",!n.canCreateOrder),a(),d("ngIf",!n.isCreatingOrder),a(),d("ngIf",n.isCreatingOrder)}}var yn=class i{constructor(t,e,n,o,r,l,m,g,O,M,I,k,A,B,$,ze){this.fb=t;this.router=e;this.activatedRoute=n;this.memberService=o;this.cartService=r;this.providerInfoService=l;this.providerDetail=m;this.orderService=g;this.cdr=O;this.authService=M;this.dialog=I;this.pushNotificationService=k;this.locationBridge=A;this.location=B;this.backHandleService=$;this.customerService=ze;this.initializeForm(),this.initializeProviderInfo()}checkoutForm;isCreatingOrder=!1;isLoading=!1;errorMessage="";note="";paymentMode="cash";name="";amount=0;expanded=!1;selectedPaymentStatus="paid";orderCreationStartTime;subtotal=100;deliveryFee=2;promotion=3.2;gst=2;selectedDate=null;selectedDateIndex=0;selectedTime="";selectedCustomer;isRenewalMode=!1;renewalContext=null;customers=[];totalRecords=0;virtualScrollItemSize=60;cartItems=[];isProvider=!1;slots=[];cartItemsList=[];isSelfOrder=!1;timeSlots=["Default","7 AM","10 AM","12 PM","2 PM","4 PM","6 PM","8 PM","10 PM"];dates=[];providerSettings;allowedBookTypes=[];allowedDeliver=[];showPickup=!1;showDeliverTo=!1;slotsEnabled=!1;paymentTypes=[];productType="standard";providerIdForSlots=0;productIdForServiceSlot;availableSlots=[];isService=!0;productData;isDeliveryAddressExpanded=!1;pendingDeliveryAddress=null;selectedSlot;selectedOption="door_delivery";savedAddresses=[];availableAddressesCount=0;addressValidationError="";DATES_PER_PAGE=7;currentDatePage=0;MAX_FUTURE_DAYS=90;get isSubscriptionProduct(){if(this.productData?.product_type==="subscription")return!0;let t=this.productData?.productSubType||this.productData?.product_subtype;if(t==="product_subscription"||t==="service_subscribe")return!0;let e=this.cartItems.length>0?this.cartItems[0].productSubType||this.cartItems[0].product_subtype:null;if(e==="product_subscription"||e==="service_subscribe")return!0;let n=this.cartItemsList.length>0?this.cartItemsList[0].productSubType||this.cartItemsList[0].product_subtype:null;return!!(n==="product_subscription"||n==="service_subscribe"||this.productData?.selectedProduct)}get totalAmount(){console.log("CARTITES-->",this.cartItemsList);let t=this.cartItemsList.reduce((e,n)=>{let o=Number(n.quantity??1)||1,r=n.productSubType||n.product_subtype,l=0;if(console.log("SUM-->",e,o,"Item:",n),n.price&&n.price>0)l=Number(n.price)||0;else if(r==="standard"){let g=n.selectedVariant;g&&g.price?l=Number(g.price)||0:n.variantsJson&&n.variantsJson.length>0?l=Number(n.variantsJson?.[0]?.price??n.price??0)||0:l=Number(n.selling_price??n.price??0)||0}else l=Number(n.price||n.price_per_quantity||n.selling_price||0)||0;let m=o*l;return console.log(`[Total] Item ${n.id||n.name}: quantity=${o}, unitPrice=${l}, subtotal=${m}, runningTotal=${e+m}`),e+m},0);if((!t||t===0)&&this.productData?.plan?.price)return Number(this.productData.plan.price)||0;if((!t||t===0)&&this.cartItemsList.length>0){let e=this.cartItemsList[0],n=e.productSubType||e.product_subtype;return n==="product_subscription"||n==="service_subscribe"?Number(e.price||e.price_per_quantity||e.selling_price||0)||0:Number(e.price??e.selling_price??0)||0}return console.log("TOTAL_-->",t),t}get canCreateOrder(){let t=!this.isProvider||!!this.selectedCustomer||this.isSelfOrder,e=!this.isCreatingOrder,n=this.checkoutForm.valid,o=this.checkoutForm.get("paymentMode")?.value,r=this.checkoutForm.get("bookDateType")?.value,l=this.isDeliveryAddressNotRequired,m=this.hasValidDeliveryAddress(),g=this.selectedOption==="door_delivery",O=!0;l?(O=!0,this.addressValidationError=""):g?(O=m,m?this.addressValidationError="":this.addressValidationError="Please select a delivery address to proceed"):(O=!0,this.addressValidationError="");let M=l?!!o&&(this.checkoutForm.get("paymentMode")?.valid??!1):this.checkoutForm.valid,I=!!this.selectedCustomer&&typeof this.selectedCustomer=="object"&&!!this.selectedCustomer.member_id,k=!(this.isProvider&&!I&&!this.isSelfOrder)&&!this.isCreatingOrder&&M&&!!o&&O;return console.log("Can create order check:",{canCreate:t,notCreating:e,formValid:n,paymentMode:o,bookDateType:r,isProvider:this.isProvider,selectedCustomer:this.selectedCustomer,formErrors:this.getFormErrors(),isDeliverySelected:g,hasDeliveryAddress:m,addressValid:O,deliveryAddressNotRequired:l,finalResult:k,individualChecks:{providerCheck:!(this.isProvider&&!this.selectedCustomer&&!this.isSelfOrder),notCreatingCheck:!this.isCreatingOrder,formValidCheck:this.checkoutForm.valid,paymentModeCheck:!!o,addressCheck:O}}),k}hasValidDeliveryAddress(){let t=this.productData?.delivery_address||this.productData?.address||this.productData?.deliveryAddress;if(!t)return!1;if(typeof t=="string")return t.trim().length>0&&t.trim()!=="No address selected";if(typeof t=="object"){let e=!!(t.line1&&t.line1.trim().length>0),n=!!(t.formattedAddress&&t.formattedAddress.trim().length>0),o=!!(t.latlong&&t.latlong.trim().length>0);return e||n||o}return!1}getFormErrors(){let t={};return Object.keys(this.checkoutForm.controls).forEach(e=>{let n=this.checkoutForm.get(e);n&&n.errors&&(t[e]=n.errors)}),t}resetOrderCreationState(){this.isCreatingOrder=!1,this.orderCreationStartTime=void 0,this.errorMessage="",this.cdr.markForCheck()}resetOrderState(){this.resetOrderCreationState()}get selectedFrequency(){return this.checkoutForm.get("frequency")?.value||"weekly"}get selectedCustomDays(){return this.checkoutForm.get("customDays")?.value||[]}destroy$=new Le;DEBOUNCE_TIME=300;successMessage="";ngOnInit(){this.isLoading=!0,this.cdr.markForCheck(),this.registerBackAction(),this.initializeNavigationState(),this.initializeComponent(),this.setupSubscriptions(),this.loadInitialData(),this.checkRenewalContext(),this.prefillDeliveryAddress()}ngOnDestroy(){setTimeout(()=>{this.cleanupBackAction()},100),this.destroy$.next(),this.destroy$.complete()}registerBackAction(){let t=this.router.url;console.log("\u{1F519} [CheckoutComponent] Registering back action for URL:",t);let e=this.getProviderId(),n=this.isProvider?`/providers/info/products?providerId=${e}`:"/customers/info/products",o=t.split("?")[0],r=[t,o,"/providers/info/checkout","/customers/info/checkout",o.includes("/providers/")?"/providers/info/checkout":"/customers/info/checkout"];Array.from(new Set(r)).forEach((m,g)=>{let O={id:`checkout-back-action-${g}-${Date.now()}`,actionType:"function",backNavigationUrl:n,callback:()=>{console.log("\u{1F519} [CheckoutComponent] Back action callback triggered - calling goBackToProducts()");try{this.goBackToProducts()}catch(M){console.error("\u{1F519} [CheckoutComponent] Error in goBackToProducts():",M)}},value:"",forPageUrl:m};this.backHandleService.backAction=this.backHandleService.backAction.filter(M=>!M.id.startsWith("checkout-back-action-")||M.forPageUrl!==m),this.backHandleService.backAction.push(O),console.log("\u{1F519} [CheckoutComponent] Back action registered:",{id:O.id,forPageUrl:O.forPageUrl,actionType:O.actionType})}),console.log("\u{1F519} [CheckoutComponent] Total back actions:",this.backHandleService.backAction.length),console.log("\u{1F519} [CheckoutComponent] Checkout back actions:",this.backHandleService.backAction.filter(m=>m.id.startsWith("checkout-back-action-")).length)}cleanupBackAction(){let t=this.router.url;console.log("\u{1F519} [CheckoutComponent] Cleaning up back action for URL:",t);let e=this.backHandleService.backAction.length;this.backHandleService.backAction=this.backHandleService.backAction.filter(o=>!o.id.startsWith("checkout-back-action-"));let n=this.backHandleService.backAction.length;console.log("\u{1F519} [CheckoutComponent] Removed",e-n,"back actions")}selectOption(t){this.selectedOption=t,t==="pickup"&&(this.addressValidationError=""),t==="door_delivery"&&this.isProvider&&this.selectedCustomer&&this.loadAvailableAddresses(),this.cdr.markForCheck()}onCustomerChange(t){this.isProvider&&t.value&&(this.isSelfOrder=!1,this.productData&&(this.productData.delivery_address=null,this.productData.address=null,this.productData.deliveryAddress=null),this.loadAvailableAddresses(),this.loadActiveAddress(),this.addressValidationError="",this.cdr.markForCheck())}setCartItems(t){console.log("RAWITEMS-->",t),this.cartItemsList=t.map(e=>{let n=e.productSubType||e.product_subtype;if(n==="product_subscription"||n==="service_subscribe")return{id:e.id||e.product_id,name:e.name||e.product_name,img:e.img||e.product_image_url||[],price:Number(e.selling_price??e.price??e.price_per_quantity??0),quantity:e.quantity??e.base_quantity??1,productSubType:n,frequency:e.frequency,custom_days:e.custom_days};{let o=e.selectedVariant,r=o?.price||e.variantsJson&&e.variantsJson[0]?.price||e.price||0,l=0;o&&o.price?l=o.price:e.price?l=e.price:e.variantsJson&&e.variantsJson.length>0?l=e.variantsJson[0].price||0:l=e.selling_price||0;let m={id:e.id,name:o?.size?`${e.name} - ${o.size}`:e.name,img:e.img||[],price:l,quantity:e.quantity||1,productSubType:n||"standard",variants:JSON.stringify(e.variantsJson||[]),formId:e.formRegistrationId||null,formData:e.form_data,selectedVariant:o,selling_price:e.selling_price};return o?.size&&(m.displayName=`${e.name} (${o.size})`),console.log(`[Checkout] Cart item ${e.id}:`,{name:e.name,variant:o?.size||"No variant",price:r}),m}})}orderNow(){if(this.isCreatingOrder&&this.orderCreationStartTime){let l=Date.now()-this.orderCreationStartTime;l>6e4&&(console.warn(`Order creation has been stuck for ${l}ms, resetting state`),this.resetOrderCreationState())}let t=this.isDeliveryAddressNotRequired,e=this.selectedOption==="door_delivery",n=this.hasValidDeliveryAddress();if(!t&&e&&!n){this.addressValidationError="Please select a delivery address to proceed",this.errorMessage=this.addressValidationError,this.cdr.markForCheck(),console.warn("\u274C Order blocked: Delivery address is required but not selected");return}if(!this.canCreateOrder||this.isCreatingOrder){console.log("\u274C Cannot create order - validation failed:",{canCreateOrder:this.canCreateOrder,isCreatingOrder:this.isCreatingOrder,isProvider:this.isProvider,selectedCustomer:this.selectedCustomer,formValid:this.checkoutForm.valid,paymentMode:this.checkoutForm.get("paymentMode")?.value,formErrors:this.getFormErrors(),addressValidationError:this.addressValidationError,isDeliverySelected:e,hasDeliveryAddress:n,deliveryAddressNotRequired:t}),this.addressValidationError&&(this.errorMessage=this.addressValidationError,this.cdr.markForCheck());return}this.isCreatingOrder=!0,this.orderCreationStartTime=Date.now(),this.errorMessage="",this.cdr.markForCheck();let o=setTimeout(()=>{this.isCreatingOrder&&(console.error("Order creation timed out"),this.isCreatingOrder=!1,this.errorMessage="Order creation timed out. Please try again.",this.cdr.markForCheck())},3e4),r=this.getOrderType();console.log("ORDER TYPE-->",r),r==="subscription"?this.createSubscriptionOrder(o):r==="ondemand"?this.createRegularOrder():r==="forms"?this.createFormsOrder():(console.log("\u{1F504} Processing service subscription order..."),this.createServiceSubscriptionOrder()),gtag("event","place_order",{event_category:"order",event_label:"Order Placed",value:320})}updateQuantity(t,e){e?(console.log("IF"),t.quantity=t.quantity+1,this.cartService.setCart(this.cartItems)):(t.quantity=Math.max(0,t.quantity-1),t.quantity===0?this.removeItem(t):this.cartService.setCart(this.cartItems))}removeItem(t){this.productData=null,this.cartService.clearCart(),this.cartItemsList=[],this.cartItems=[],this.goBackToProducts()}updateAmount(){this.amount=this.totalAmount,this.cdr.markForCheck()}selectDate(t){this.selectedDateIndex=t,this.selectedDate=this.dates[t]?.date??null,t!==0&&this.checkoutForm.get("bookDateType")?.value!=="schedule"&&this.checkoutForm.get("bookDateType")?.setValue("schedule"),this.slotsEnabled&&this.selectedDate&&this.loadSlots()}toggleDay(t){let e=this.selectedCustomDays,n=e.includes(t)?e.filter(o=>o!==t):[...e,t];this.checkoutForm.get("customDays")?.setValue(n)}toggleExpand(){this.expanded=!this.expanded}loadNextDates(){this.currentDatePage++,this.dates=this.buildDatesList(this.currentDatePage),this.selectedDateIndex=0,this.selectedDate=this.dates[0]?.date??null,this.cdr.markForCheck()}loadPreviousDates(){this.currentDatePage>0&&(this.currentDatePage--,this.dates=this.buildDatesList(this.currentDatePage),this.selectedDateIndex=0,this.selectedDate=this.dates[0]?.date??null,this.cdr.markForCheck())}get canLoadMoreDates(){let t=Math.ceil(this.MAX_FUTURE_DAYS/this.DATES_PER_PAGE);return this.currentDatePage<t-1}get canLoadPreviousDates(){return this.currentDatePage>0}initializeForm(){this.checkoutForm=this.fb.group({bookDateType:["today",[T.required]],bookDate:["today"],bookSlot:[null],paymentMode:["cash",T.required],frequency:["weekly"],customDays:[[]],note:[""]}),this.slotsEnabled&&(this.checkoutForm.get("bookSlot")?.setValidators(T.required),this.checkoutForm.get("bookSlot")?.updateValueAndValidity())}get isServiceSubscription(){return!!(this.cartItems&&this.cartItems.length>0&&this.cartItems.some(e=>e.productSubType==="service_subscribe")||this.cartItemsList&&this.cartItemsList.length>0&&this.cartItemsList.some(e=>e.productSubType==="service_subscribe")||this.productData?.productSubType==="service_subscribe")}get isDeliveryAddressNotRequired(){return this.isServiceSubscription}get shouldHideQuantityButtons(){if(this.cartItemsList&&this.cartItemsList.length>0&&this.cartItemsList.some(e=>(e.product_type==="subscription"||e.productSubType==="service_subscribe")&&(e.product_subtype==="service_subscription"||e.productSubType==="service_subscribe")))return!0;if(this.productData){let t=this.productData.product_type==="subscription"||this.productData.productSubType==="service_subscribe",e=this.productData.product_subtype==="service_subscription"||this.productData.productSubType==="service_subscribe";if(t&&e)return!0}return!1}get shouldShowAddMoreButton(){return!this.cartItemsList||this.cartItemsList.length===0?!1:this.cartItemsList.every(e=>e.productSubType==="standard"||e.product_type==="product"&&e.product_subtype==="standard")}goBackToProducts(){let t=this.getProviderId(),e=/WebView|wv/i.test(navigator.userAgent)||window.ReactNativeWebView!==void 0;console.log("[Navigation] Environment detection:",{isWebView:e,userAgent:navigator.userAgent,hasReactNativeWebView:window.ReactNativeWebView!==void 0,historyLength:window.history.length,isProvider:this.isProvider,providerId:t}),e||window.history.length<=1?(console.log("[Navigation] Using direct navigation (WebView or no history)"),this.isProvider?this.router.navigate(["/providers/info/products"],{queryParams:{providerId:t}}):this.router.navigate(["/customers/info/products"],{state:{providerId:t}})):window.history.back()}getOrderButtonText(){let t=o=>{if(o)return o.product_subtype||o.productSubType||o.productSubtype||o.product_subType},e=o=>{if(o)return o.product_type||o.productType||o.producttype};if(this.cartItemsList&&this.cartItemsList.length===1){let o=this.cartItemsList[0],r=e(o),l=t(o);if(r==="standard"||l==="standard")return"Place Order"}return t(this.productData)==="standard"||this.productData&&this.productData.selectedProduct&&t(this.productData.selectedProduct)==="standard"||this.cartItemsList&&this.cartItemsList.length>0&&this.cartItemsList.every(r=>{let l=t(r);return l?l==="standard":r.product_type==="product"&&(r.product_subtype==="standard"||r.productSubType==="standard")})?"Order Now":"Proceed"}getGroupName(){if(!this.productData?.plan)return"";if(this.productData.plan.group_ids&&Array.isArray(this.productData.plan.group_ids)){let t=this.productData.plan.group_ids[0];if(t&&t.group_name)return t.group_name}return this.productData.group&&typeof this.productData.group=="object"&&this.productData.group.group_name?this.productData.group.group_name:""}initializeNavigationState(){let t=null,e=this.router.getCurrentNavigation();if(e?.extras?.state&&(t=e.extras.state,console.log("Checkout: Got state from getCurrentNavigation")),t||(console.log("Checkout: getCurrentNavigation returned null, trying router events"),this.router.events.pipe(ko(n=>n instanceof er),To(1)).subscribe(()=>{this.tryGetStateFromHistory()})),!t){let n=sessionStorage.getItem("checkout_navigation_state");if(n)try{t=JSON.parse(n),sessionStorage.removeItem("checkout_navigation_state")}catch(o){console.error("Checkout: Error parsing stored state:",o)}}if(t){if(this.isProvider=t.isProvider??!1,this.productData=t.data,this.isRenewalMode=t.data.isRenewal,this.applyPendingDeliveryAddress(),console.log("Checkout: DATA-->",this.productData),console.log("Checkout: Is Provider-->",this.isProvider),this.productData?.plan?console.log("\u2705 Checkout: Plan received:",{id:this.productData.plan.id,name:this.productData.plan.name,price:this.productData.plan.price,billing_type:this.productData.plan.billing_type,billing_cycle:this.productData.plan.billing_cycle,provider_id:this.productData.plan.provider_id}):console.warn("\u26A0\uFE0F Checkout: No plan data in productData"),this.productData?.member&&this.isProvider&&!this.productData?.isNewMember&&(console.log("Checkout: Auto-selecting customer from member data:",this.productData.member),this.selectedCustomer={member_id:this.productData.member.member_id,member_name:this.productData.member.member_name,mobile_number:this.productData.member.mobile_number,member_mobile_number:this.productData.member.mobile_number},setTimeout(()=>{this.loadAvailableAddresses(),this.loadActiveAddress(),this.cdr.markForCheck()},100)),this.productData?.isNewMember&&this.productData?.registration){console.log("Checkout: New member registration detected",this.productData.registration);let n=this.productData.registration;this.selectedCustomer={member_id:0,member_name:n.name||n.member_name||"New Member",member_mobile_number:n.mobile||n.mobile_number||"",mobile_number:n.mobile||n.mobile_number||""},console.log("Checkout: Temporary customer created from registration:",this.selectedCustomer),this.cdr.markForCheck()}this.productData&&this.productData.plan&&this.productData.group&&this.handleSubscriptionData()}else this.determineContext()}tryGetStateFromHistory(){this.determineContext()}handleSubscriptionData(){let t="product_subscription",e=this.productData.selectedProduct?.product_subtype;e?e==="service_subscription"?t="service_subscribe":e==="product_subscription"?t="product_subscription":t=e:this.productData.isRenewal&&(t="service_subscribe");let n={id:this.productData.plan.id,name:this.productData.selectedProduct.name||`${this.productData.plan.name}
${this.productData.selectedProduct.product_name}`||"Subscription Plan",img:[],price:this.productData.plan.price||0,quantity:1,productSubType:t,variants:"[]",variantsJson:[],isService:!0,formRegistrationId:0,base_quantity:1,price_per_quantity:this.productData.plan.price||0};this.cartItemsList=[n],this.cartItems=[n],this.productType="product_subscription",this.paymentTypes=["cash","online"],console.log("\u2705 Subscription cart item created:",{name:n.name,price:n.price,price_per_quantity:n.price_per_quantity,productSubType:n.productSubType});let o=n.productSubType==="service_subscribe";this.checkoutForm&&(this.checkoutForm.patchValue({paymentMode:"cash"}),o?(this.checkoutForm.get("bookDateType")?.clearValidators(),this.checkoutForm.get("bookDateType")?.updateValueAndValidity(),console.log("\u2705 Removed bookDateType validator for service subscription (service_subscribe)")):console.log("\u2139\uFE0F Product subscription (subscribe) - bookDateType still required")),o?(this.showPickup=!1,this.showDeliverTo=!1,console.log("\u2705 Service subscription - Delivery/pickup options hidden immediately"),this.productData&&(this.productData.delivery_address=null,this.productData.deliveryAddress=null,this.productData.address=null)):this.setDeliveryOptions(),this.updateAmount(),this.cdr.markForCheck()}initializeProviderInfo(){let t=JSON.parse(sessionStorage.getItem("provider")||"{}");this.name=t.name||"",this.amount=0}initializeComponent(){if(this.determineContext(),this.dates=this.buildDatesList(0),this.selectedDate=this.dates[0]?.date??null,!this.productData||!this.productData.plan||!this.productData.group){if(this.cartItems=this.cartService.getCart(),this.productType=this.cartItems[0]?.productSubType||"standard",this.productIdForServiceSlot=this.cartItems[0]?.id,this.isService=this.cartItems[0]?.isService??!0,this.setCartItems(this.cartItems),this.cartItemsList.length>0){let t=this.cartItemsList[0];if(t.productSubType==="product_subscription"||t.productSubType==="service_subscribe"){let e=t.frequency?t.frequency.toLowerCase():"weekly",n=[];if(t.custom_days&&Array.isArray(t.custom_days)){let o={mo:"monday",tu:"tuesday",we:"wednesday",th:"thursday",fr:"friday",sa:"saturday",su:"sunday"};n=t.custom_days.map(r=>o[r]||r)}this.checkoutForm.patchValue({frequency:e,customDays:n}),console.log("\u2705 Patched checkout form with subscription data:",{frequency:e,customDays:n})}}this.productData||(this.productData={})}else this.productIdForServiceSlot=this.cartItems[0]?.id,this.isService=this.cartItems[0]?.isService??!0;this.updateAmount(),this.setDeliveryOptions(),this.applyPendingDeliveryAddress()}setDeliveryOptions(){if(this.productType==="product_subscription")if(this.isServiceSubscription)this.showPickup=!1,this.showDeliverTo=!1,console.log("Service subscription (service_subscribe): Delivery/pickup options hidden (not required)");else{this.showPickup=!0,this.showDeliverTo=!0,console.log("Product subscription (subscribe): showPickup =",this.showPickup,"showDeliverTo =",this.showDeliverTo);let e=this.cartItems[0]?.delivery_option;e&&(e==="door_delivery"||e==="pickup")&&(this.selectedOption=e)}else this.productType==="forms"?(this.showPickup=!0,this.showDeliverTo=!0,console.log("Forms order: showPickup =",this.showPickup,"showDeliverTo =",this.showDeliverTo)):this.allowedDeliver.length>0?(this.showPickup=this.allowedDeliver.includes("pickup"),this.showDeliverTo=this.allowedDeliver.includes("Door_step"),console.log("Non-subscription with settings: showPickup =",this.showPickup,"showDeliverTo =",this.showDeliverTo)):(this.showPickup=!0,this.showDeliverTo=!0,console.log("Non-subscription fallback: showPickup =",this.showPickup,"showDeliverTo =",this.showDeliverTo));console.log("Final delivery options - showPickup:",this.showPickup,"showDeliverTo:",this.showDeliverTo)}determineContext(){let t=this.router.url||"";t.includes("providers")?this.isProvider=!0:t.includes("customers")&&(this.isProvider=!1)}setupSubscriptions(){this.checkoutForm.get("bookSlot")?.valueChanges.pipe(Ce(this.destroy$)).subscribe(t=>{this.selectedTime=t,this.cdr.markForCheck()}),this.checkoutForm.get("bookDateType")?.valueChanges.pipe(Ce(this.destroy$),Tt(this.DEBOUNCE_TIME),Et()).subscribe(t=>{t==="today"&&(this.selectedDateIndex=0,this.selectedDate=this.dates[0]?.date??null,this.slotsEnabled&&this.selectedDate&&this.loadSlots()),this.cdr.markForCheck()}),this.checkoutForm.get("frequency")?.valueChanges.pipe(Ce(this.destroy$)).subscribe(()=>this.cdr.markForCheck())}onFilterCustomers(t){let e=t.query||t.filter;if(!e||e.trim().length===0){this.customers=[];return}let n=this.isProvider?this.getProviderId():0;n&&this.memberService.getMembersWithPagination(n,0,50,e).pipe(Ce(this.destroy$)).subscribe(o=>{o.data&&Array.isArray(o.data)&&(this.customers=o.data,this.cdr.markForCheck())})}loadInitialData(){this.loadProviderSettings(),this.loadAvailableAddresses()}loadAvailableAddresses(){if(!this.customerService){console.warn("[Checkout] CustomerService not available, cannot load addresses");return}let t=null;if(this.isProvider&&this.isSelfOrder)t=this.getUserId();else if(this.isProvider&&this.selectedCustomer){let e=this.selectedCustomer.user_id||this.selectedCustomer.member_id;t=e?Number(e):null}else this.isProvider||(t=this.authService.getUserId());if(!t||isNaN(t)){this.availableAddressesCount=0,this.cdr.markForCheck();return}console.log("[Checkout] Loading addresses for user:",t,"isProvider:",this.isProvider),this.customerService.getUserAddresses(t).pipe(Ce(this.destroy$),$e(e=>(console.error("[Checkout] Error loading addresses:",e),this.availableAddressesCount=0,this.cdr.markForCheck(),Oe({status:!1,data:[]})))).subscribe(e=>{let n=[];if(e&&typeof e=="object")if(e.data&&Array.isArray(e.data))n=e.data;else if(Array.isArray(e))n=e;else{let o=e;o.items&&Array.isArray(o.items)?n=o.items:o.addresses&&Array.isArray(o.addresses)&&(n=o.addresses)}this.availableAddressesCount=n.length,console.log("[Checkout] Available addresses count:",this.availableAddressesCount,"addresses:",n),this.cdr.markForCheck()})}loadProviderSettings(){let t=JSON.parse(sessionStorage.getItem("selectedProvider")||"null"),n=this.providerDetail.getData()?.provider_id||t?.provider_id;n?(this.providerIdForSlots=n,this.providerInfoService.getProviderSettings(n).pipe(Ce(this.destroy$),$e(o=>(console.error("Error loading provider settings:",o),Oe(null))),Ge(()=>{this.isLoading=!1,this.cdr.markForCheck()})).subscribe(o=>{o?(this.providerSettings=o,this.slotsEnabled=!!o.slots_enabled,this.applySettings()):this.handleFallbackSettings(),this.cdr.markForCheck()})):(this.handleFallbackSettings(),this.isLoading=!1,this.cdr.markForCheck()),this.setDeliveryOptions()}handleFallbackSettings(){this.setDeliveryOptions()}applySettings(){if(!this.providerSettings)return;this.paymentTypes=this.providerSettings.payment_type||[];let e=(this.providerSettings.metadata||[]).find(o=>o[this.productType]),n=e?e[this.productType]:null;this.allowedDeliver=n?.deliver||[],this.allowedBookTypes=n?.book_type||[],console.log("Applied settings - allowedDeliver:",this.allowedDeliver,"productType:",this.productType),this.setDeliveryOptions(),this.slotsEnabled||this.checkoutForm.get("bookSlot")?.setValue("Default"),this.slotsEnabled&&this.loadSlots()}loadSlots(){if(!(!this.providerIdForSlots||!this.selectedDate)){if(!this.isService)this.providerInfoService.getSlots("provider",this.providerIdForSlots).pipe(Ce(this.destroy$)).subscribe(t=>{this.availableSlots=(t.slots||[]).map(e=>U(D({},e),{slot_name:e.slot_name,start_time:e.start_time,end_time:e.end_time,slot_id:e.provider_slot_id})),this.availableSlots.length&&(this.timeSlots=this.availableSlots.map(e=>this.formatSlotLabel(e.start_time,e.end_time))),this.cdr.markForCheck()});else if(this.isService&&this.productIdForServiceSlot){let t=this.selectedDate.toISOString().slice(0,10);this.providerInfoService.getSlots("service",this.providerIdForSlots,this.productIdForServiceSlot).pipe(Ce(this.destroy$)).subscribe(e=>{this.availableSlots=(e.slots||[]).map(n=>U(D({},n),{slot_name:n.slot_name,start_time:n.start_time,end_time:n.end_time,slot_id:n.service_slot_id})),this.availableSlots.length&&(this.timeSlots=this.availableSlots.map(n=>this.formatSlotLabel(n.start_time,n.end_time))),this.cdr.markForCheck()})}}}buildDatesList(t){let e=[],n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],o=new Date,r=t*this.DATES_PER_PAGE,l=r+this.DATES_PER_PAGE,m=Math.min(l,this.MAX_FUTURE_DAYS);for(let g=r;g<m;g++){let O=new Date(o);O.setDate(o.getDate()+g);let M=String(O.getDate()).padStart(2,"0"),I=n[O.getDay()];e.push({date:O,label:I,day:M})}return e}formatSlotLabel(t,e){return`${t.substring(0,5)} - ${e.substring(0,5)}`}get upiUri(){let t="merchant@upi",e=JSON.parse(sessionStorage.getItem("provider")||"{}").name||"",n=this.totalAmount;return`upi://pay?pa=${t}&pn=${encodeURIComponent(e)}&am=${n}&cu=INR&tn=${encodeURIComponent("test")}`}changeAddress(t="select"){return ke(this,null,function*(){if(!this.isCreatingOrder)try{let e=yield this.locationBridge.requestAddressSelection(t);e&&(this.applyDeliveryAddress(e),this.addressValidationError="",this.cdr.markForCheck())}catch{}})}normalizeDeliveryAddress(){let t={line1:"",line2:"",city:"",state:"",pincode:"",latlong:"",formatted:""},e=this.productData?.delivery_address||this.productData?.address||this.productData?.deliveryAddress;if(!e)return t;if(typeof e=="string")return U(D({},t),{line1:e,formatted:e});let n=e.latitude??e.lat??e.latlng?.lat??e.latLng?.lat,o=e.longitude??e.lng??e.latlng?.lng??e.latLng?.lng??e.long??e.lon,r=e.latlong||(n!==void 0&&o!==void 0?`${n},${o}`:""),l=e.formattedAddress||e.formatted_address||e.fullAddress||e.full_address||"";return{line1:e.line1||e.street||e.addressLine1||e.address_line1||l,line2:e.line2||e.addressLine2||e.address_line2||e.landmark||e.sub_locality||e.subLocality||"",city:e.city||e.district||e.town||"",state:e.state||e.region||e.province||"",pincode:e.pincode||e.postalCode||e.postal_code||e.zip||e.zipcode||"",latlong:r,formatted:l}}getDeliveryAddressDisplay(){let t=this.normalizeDeliveryAddress();return t.formatted?t.formatted:[t.line1,t.city,t.state,t.pincode].filter(n=>!!n&&n!==",").join(", ")}buildEmptyDeliveryAddressPayload(){return{line1:"",line2:"",city:"",state:"",pincode:"",latlong:"",formatted:""}}buildDeliveryAddressPayload(){if(this.selectedOption!=="door_delivery")return{line1:"",city:"",state:"",pincode:"",latlong:""};let t=this.normalizeDeliveryAddress();return console.log("NORMALIZED-->",t),{line1:t.line1,city:t.city,state:t.state,pincode:t.pincode,latlong:t.latlong}}buildSubscriptionDeliveryAddressPayload(){if(this.selectedOption!=="door_delivery")return{line1:"",line2:"",city:"",latlong:""};let t=this.normalizeDeliveryAddress();return{line1:t.line1,line2:t.line2,city:t.city,latlong:t.latlong}}buildDeliveryAddressSummary(){if(this.selectedOption!=="door_delivery")return"Pickup";let t=this.normalizeDeliveryAddress();return t.formatted?t.formatted:[t.line1,t.city,t.state,t.pincode].filter(o=>!!o&&o!==",").join(", ").replace(/\s+/g," ").trim()||"Address not provided"}toggleDeliveryAddressExpansion(t){t.stopPropagation(),this.getDeliveryAddressDisplay()&&(this.isDeliveryAddressExpanded=!this.isDeliveryAddressExpanded,this.cdr.markForCheck())}prefillDeliveryAddress(){this.loadActiveAddress().then(()=>{if(!this.hasValidDeliveryAddress()){let t=this.locationBridge.getLastSelectedAddress();t&&(this.productData?this.applyDeliveryAddress(t):this.pendingDeliveryAddress=t)}})}loadActiveAddress(){return ke(this,null,function*(){if(!this.customerService){console.log("[Checkout] CustomerService not available, skipping active address load");return}try{let t=null;if(this.isProvider&&this.isSelfOrder?t=this.getUserId():this.isProvider&&this.selectedCustomer?.user_id?t=parseInt(this.selectedCustomer.user_id,10):t=this.authService.getUserId(),!t){console.log("[Checkout] No user ID available for loading active address");return}let e=yield Io(this.customerService.getActiveUserAddress(t).pipe(Ce(this.destroy$),$e(r=>(console.error("[Checkout] Error loading active address:",r),Oe(null)))));if(!e)return;let n=null;if(Array.isArray(e)?n=e[0]:e.data&&Array.isArray(e.data)?n=e.data[0]:e.data&&!Array.isArray(e.data)?n=e.data:typeof e=="object"&&e.formatted_address&&(n=e),!n)return;let o={line1:n.address_line1||n.formatted_address||"",line2:n.address_line2||"",city:n.city||"",state:n.region||n.state||"",pincode:n.postal_code||n.pincode||"",latlong:n.latitude&&n.longitude?`${n.latitude},${n.longitude}`:"",formattedAddress:n.formatted_address||n.address_line1||"",address_tag:n.label||"Home"};this.productData?this.applyDeliveryAddress(o):this.pendingDeliveryAddress=o,this.cdr.markForCheck()}catch(t){console.error("[Checkout] Error in loadActiveAddress:",t)}})}applyPendingDeliveryAddress(){if(this.pendingDeliveryAddress&&this.productData){let t=this.pendingDeliveryAddress;this.pendingDeliveryAddress=null,this.applyDeliveryAddress(t)}}applyDeliveryAddress(t){if(!t)return;this.addressValidationError="";let e={line1:t.line1||"",line2:t.line2||"",city:t.city||"",state:t.state||"",pincode:t.pincode||"",latlong:t.latlong||"",formattedAddress:t.formattedAddress||t.line1||"",address_tag:t.address_tag||""};this.productData=U(D({},this.productData??{}),{delivery_address:e}),this.isDeliveryAddressExpanded=!1,this.cdr.markForCheck()}onSlotSelect(t){this.selectedSlot=t,this.checkoutForm.get("bookSlot")?.setValue(t),this.checkoutForm.get("bookSlot")?.markAsTouched(),this.checkoutForm.get("bookSlot")?.updateValueAndValidity(),console.log("Selected slot:",t),console.log("USER-->",this.authService.getUserInfo())}addNewCustomer(){this.dialog.open(Nr,{width:"500px",disableClose:!0,data:{}}).afterClosed().subscribe(e=>{if(e){let n=e;this.customers.find(r=>r.member_mobile_number===n.member_mobile_number)||this.customers.push(n),this.selectedCustomer=n,this.cdr.markForCheck()}})}onPaymentStatusChange(t){console.log("Payment status changed to:",t),this.selectedPaymentStatus=t,t==="paid"&&this.pushNotificationService.sendPaymentReceivedNotification({orderNumber:"TEMP_"+Date.now(),amount:this.totalAmount,paymentMethod:this.checkoutForm.get("paymentMode")?.value||"Cash",customerName:this.isProvider?this.selectedCustomer?.member_name:this.authService.getUserInfo()?.name})}markPaymentAsReceived(){this.pushNotificationService.sendPaymentReceivedNotification({orderNumber:"TEMP_"+Date.now(),amount:this.totalAmount,paymentMethod:"Collect",customerName:this.isProvider?this.selectedCustomer?.member_name:this.authService.getUserInfo()?.name})}checkRenewalContext(){this.activatedRoute.queryParams.subscribe(t=>{t.renew==="true"&&(this.isRenewalMode=!0,this.loadRenewalContext())})}loadRenewalContext(){let t=sessionStorage.getItem("subscription_renewal_context");t&&(this.renewalContext=JSON.parse(t),this.populateRenewalData())}populateRenewalData(){this.renewalContext&&(this.renewalContext.memberName&&this.checkoutForm.patchValue({customerName:this.renewalContext.memberName}),this.renewalContext.amountPaid&&(this.amount=this.renewalContext.amountPaid),this.cdr.markForCheck())}changePlan(){if(console.log("Checkout: changePlan called",this.productData),!this.productData||!this.productData.plan||!this.productData.selectedProduct){console.error("No subscription data available for plan change"),this.errorMessage="Subscription data not available for plan change",this.cdr.markForCheck();return}let t=this.productData.originalSubscription||{subscription_id:this.productData.subscriptionId||0,order_id:this.productData.orderId||0,provider_id:this.productData.plan?.provider_id||this.renewalContext?.providerId||this.getProviderId(),product_id:this.productData.selectedProduct?.product_id,plan_id:this.productData.plan?.id,start_date:"",end_date:"",group_id:this.productData.group?.group_id||(typeof this.productData.group=="number"?this.productData.group:this.productData.group?.group_id),status:"active",billing_type:this.productData.plan?.billing_type||"",amount_paid:this.productData.plan?.price||0,billing_cycle:this.productData.plan?.billing_cycle||"",form_data:null,member_id:this.productData.memberId||0,user_id:this.getUserId()||0,mobile_number:0,auto_renewal:!1,plan:{plan:this.productData.plan?.id,name:this.productData.plan?.name,price:this.productData.plan?.price,group_id:this.productData.group?.group_id||(typeof this.productData.group=="number"?this.productData.group:this.productData.group?.group_id),Subscription_cycle_start_Date:this.productData.plan?.subscription_cycle_start||""},product:{product_id:this.productData.selectedProduct?.product_id,name:this.productData.selectedProduct?.product_name||this.productData.selectedProduct?.name},group:{group_id:this.productData.group?.group_id||(typeof this.productData.group=="number"?this.productData.group:0),group_name:this.productData.group?.group_name||(typeof this.productData.group=="object"&&this.productData.group?"Selected Group":"")},member:this.productData.memberName?{member_id:this.productData.memberId||0,member_name:this.productData.memberName,mobile_number:"",email:null,status:null}:null},e={subscription:t};this.dialog.open(_i,{width:"90vw",maxWidth:"500px",data:e,disableClose:!1,panelClass:"change-plan-dialog-container"}).afterClosed().subscribe(o=>{o?(this.productData=U(D({},this.productData),{plan:o.plan,group:o.group,isPlanChange:!0,previousPlan:{id:t.plan_id,name:t.plan.name,price:t.plan.price}}),this.cartItemsList.length>0&&(this.cartItemsList[0]=U(D({},this.cartItemsList[0]),{name:o.plan.name,price:o.plan.price,price_per_quantity:o.plan.price}),this.cartItems[0]=U(D({},this.cartItems[0]),{name:o.plan.name,price:o.plan.price,price_per_quantity:o.plan.price})),this.cartService.setCart(this.cartItems),this.updateAmount(),this.cdr.markForCheck(),console.log("Checkout: Updated productData with new plan:",this.productData),console.log("Checkout: Updated cartItemsList:",this.cartItemsList),console.log("Checkout: New total amount:",this.totalAmount)):console.log("Checkout: ChangePlan dialog cancelled")})}createRegularOrder(){let e={order_type:this.getOrderType(),order_subtype:this.productType,user_id:this.isProvider?this.isSelfOrder?this.getUserId():this.selectedCustomer?.user_id?Number(this.selectedCustomer.user_id):this.getUserId():this.getUserId(),member_id:this.isProvider?this.isSelfOrder?0:this.selectedCustomer?.member_id||0:0,provider_id:this.getProviderId(),slot_id:this.getSlotId()||null,slot_info:this.selectedSlot||null,delivery_date:this.getDeliveryDate(),assigned_to:this.getAssignedTo(),fullfillment_type:this.selectedOption,product_type:this.isService?"service":"product",payment:{method:this.checkoutForm.get("paymentMode")?.value||"cash",status:this.isProvider?this.selectedPaymentStatus:"pending",transaction_id:this.generateTransactionId(),amount:this.totalAmount,payment_details:{},payment_info:this.productData?.payment_info||{}},delivery_address:this.buildDeliveryAddressPayload(),metadata:{products:this.cartItemsList.map(n=>{let o=n.selectedVariant,r;if(o){let g=o,{disabled:O}=g,M=So(g,["disabled"]);r=JSON.stringify([M]),console.log(`[Checkout] Sending only selected variant for product ${n.id}:`,M)}else r=n.variants||"[]";let l=0;n.productSubType==="flexible"||n.productSubType==="hybrid"?l=Number(n.price)||0:o?l=Number(o.price)||0:!n.variantsJson||n.variantsJson.length===0||typeof n.variants=="string"&&(n.variants==="null"||n.variants==="[]")||Array.isArray(n.variants)&&n.variants.length===0?l=Number(n.selling_price||n.price||0):l=Number(n.variantsJson&&n.variantsJson[0]?.price||n.price||0);let m={product_id:Number(n.id),product_name:n.displayName||n.name,variants:r,quantity:Number(n.quantity)||1,price_per_unit:l,gst_amount:0,total_price:(Number(n.quantity)||1)*l};return o&&(m.selected_variant={size:o.size,price:o.price,stock:o.stock},o.variant_id&&(m.selected_variant.variant_id=o.variant_id),console.log(`[Checkout] Including selected variant in order for product ${n.id}:`,m.selected_variant)),m}),order_notes:this.checkoutForm.get("note")?.value||this.note},total_amount:0,updated_by:this.getUserId()};e.total_amount=e.metadata.products.reduce((n,o)=>n+(o.total_price||0),0),e.payment.amount=e.total_amount,this.orderService.createOrder(e).pipe(Ce(this.destroy$),Ge(()=>{this.isCreatingOrder=!1,this.cdr.markForCheck()})).subscribe({next:n=>{let o=n.display_order_id||"ON"+Date.now(),r=n.amount||this.totalAmount;this.isProvider||(this.pushNotificationService.sendOrderCreatedNotification({orderId:n.order_id?.toString()||Date.now().toString(),orderNumber:o,amount:r,customerName:this.authService.getUserInfo()?.name||"Customer",providerName:JSON.parse(sessionStorage.getItem("selectedProvider")||"{}").name||"Provider",providerId:this.getProviderId(),userId:this.getUserId(),orderType:"Regular Order"}),n.id&&this.pushNotificationService.sendOrderNotificationViaAPI(n.id,this.getProviderId())),this.cartService.clearCart();let l={orderNumber:o,totalAmount:r,paymentMethod:this.checkoutForm.get("paymentMode")?.value||"Cash",deliveryAddress:this.buildDeliveryAddressSummary(),estimatedDelivery:this.selectedOption==="door_delivery"?"2-3 business days":"Ready for pickup"};this.router.navigate(["/customers/info/order-success"],{state:{orderDetails:l,providerId:this.getProviderId(),isProvider:this.isProvider},replaceUrl:!0})},error:n=>{console.error("Error creating regular order:",n),this.errorMessage="Failed to create order. Please try again.",this.cdr.markForCheck()}})}createSubscriptionOrder(t){console.log("Creating subscription order with data:",{productType:this.productType,isProvider:this.isProvider,selectedCustomer:this.selectedCustomer,providerId:this.getProviderId(),totalAmount:this.totalAmount,productData:this.productData});let e=this.cartItemsList[0];if(console.log("CART ITEM-->",e),!e){console.error("No cart items found for subscription order"),this.isCreatingOrder=!1,this.errorMessage="No items in cart",this.cdr.markForCheck();return}let n={order_type:"product_subscription",order_subtype:this.productType,user_id:this.isProvider?this.isSelfOrder?this.getUserId():Number(this.selectedCustomer?.user_id):this.getUserId(),member_id:this.isProvider?this.isSelfOrder?null:this.selectedCustomer?.member_id||null:null,provider_id:this.getProviderId(),slot_id:this.getSlotId()||null,slot_info:this.selectedSlot||null,fullfillment_type:this.selectedOption,product_type:this.isService?"service":"product",payment:{method:this.checkoutForm.get("paymentMode")?.value||"cash",status:this.isProvider?this.selectedPaymentStatus:"pending",transaction_id:this.generateTransactionId()},delivery_address:this.buildSubscriptionDeliveryAddressPayload(),metadata:{product_id:e.id,product_name:e.name,status:"active",frequency:this.selectedFrequency,custom_days:this.selectedCustomDays,start_date:new Date().toISOString().slice(0,10),end_date:null,paused_until:null,base_quantity:e.quantity||1,price_per_quantity:e.price||0},form_data:{},total_amount:this.totalAmount,updated_by:this.getUserId()};console.log("\u{1F680} Calling createSubscriptionOrder API with data:",n),console.log("API endpoint:","orders"),console.log("\u23F0 Starting API call at:",new Date().toISOString()),this.orderService.createSubscriptionOrder(n).pipe(Ce(this.destroy$),$e(o=>(console.error("\u274C Error in subscription order creation:",o),console.error("Error details:",{message:o.message,status:o.status,error:o.error,url:o.url}),this.errorMessage="Failed to create subscription order. Please try again.",Oe(null))),Ge(()=>{t&&clearTimeout(t),this.isCreatingOrder=!1,this.orderCreationStartTime=void 0,this.cdr.markForCheck()})).subscribe({next:o=>{if(!o){console.log("\u26A0\uFE0F No response received from subscription order creation");return}let r=o.display_order_id||"ON"+Date.now(),l=o.amount||this.totalAmount;this.isProvider||(this.pushNotificationService.sendOrderCreatedNotification({orderId:o.order_id?.toString()||Date.now().toString(),orderNumber:r,amount:l,customerName:this.authService.getUserInfo()?.name||"Customer",providerName:JSON.parse(sessionStorage.getItem("selectedProvider")||"{}").name||"Provider",providerId:this.getProviderId(),userId:this.getUserId(),orderType:"Subscription Order"}),o.id&&this.pushNotificationService.sendOrderNotificationViaAPI(o.id,this.getProviderId())),this.cartService.clearCart();let m={orderNumber:r,totalAmount:l,paymentMethod:this.checkoutForm.get("paymentMode")?.value||"Cash",deliveryAddress:this.buildDeliveryAddressSummary(),estimatedDelivery:this.selectedOption==="door_delivery"?"2-3 business days":"Ready for pickup"};this.router.navigate(["/customers/info/order-success"],{state:{orderDetails:m,providerId:this.getProviderId(),isProvider:this.isProvider},replaceUrl:!0})},error:o=>{console.error("Error creating subscription order:",o),this.errorMessage="Failed to create subscription. Please try again.",this.cdr.markForCheck()}})}createServiceSubscriptionOrder(){this.isCreatingOrder=!0,console.log("\u{1F50D} [Service Subscription] Creating order with productData:",this.productData),console.log("\u{1F50D} [Service Subscription] Plan data:",this.productData?.plan),console.log("\u{1F50D} [Service Subscription] Is Provider:",this.isProvider);let t=this.productData?.plan?.billing_type||"monthly",e=this.productData?.plan?.billing_cycle||"pre_cycle";console.log("\u{1F50D} [Service Subscription] Billing type:",t),console.log("\u{1F50D} [Service Subscription] Billing cycle:",e),this.productData?.plan?.billing_type||console.warn("\u26A0\uFE0F [Service Subscription] billing_type is missing from plan, using fallback:",t),this.productData?.plan?.billing_cycle||console.warn("\u26A0\uFE0F [Service Subscription] billing_cycle is missing from plan, using fallback:",e);let n=new Date,o=new Date;switch(t){case"monthly":o.setMonth(o.getMonth()+1);break;case"yearly":o.setFullYear(o.getFullYear()+1);break;case"weekly":o.setDate(o.getDate()+7);break;case"quarterly":o.setMonth(o.getMonth()+3);break;default:o.setMonth(o.getMonth()+1)}let r=this.authService.getUserInfo(),l=null,m=null,g=this.cartItemsList&&this.cartItemsList.length>0?this.cartItemsList[0]:null;if(g?.formData){let be=g.formData;l=be.name||be.member_name||be.full_name||null,m=be.mobile||be.mobile_number||be.member_mobile_number||null}l||(l=this.productData?.memberName||null),l||(l=this.isProvider?this.isSelfOrder?r?.name||null:this.selectedCustomer?.member_name:r?.name||null),m||(m=this.isProvider?this.isSelfOrder?r?.mobile_number||null:this.selectedCustomer?.member_mobile_number:r?.mobile_number||null);let O=this.isProvider?this.isSelfOrder?null:this.selectedCustomer?.member_id||null:this.productData?.memberId||null,M=this.isProvider?this.isSelfOrder?this.getUserId():Number(this.selectedCustomer?.user_id)||this.getUserId():this.getUserId(),I=this.productData?.plan?.provider_id||this.getProviderId(),k=this.productData?.plan?.price||this.totalAmount||0;this.productData?.plan?.price||console.warn("\u26A0\uFE0F [Service Subscription] plan.price is missing, using fallback:",k);let A="completed",B=this.checkoutForm.get("paymentMode")?.value||"cash",$="pending";this.isProvider?$=this.selectedPaymentStatus:$=B==="cash"?"paid":"pending",console.log("\u{1F50D} [Service Subscription] Order status:",A),console.log("\u{1F50D} [Service Subscription] Payment mode:",B,", Payment status:",$);let ze={order_type:"service_subscription",order_subtype:this.productData?.selectedProduct.product_subtype||"service_subscription",status:A,user_id:M,member_id:O,member_name:l||"Customer",member_mobile_number:m?String(m):null,provider_id:I,slot_id:this.getSlotId()||null,slot_info:this.selectedSlot||null,fullfillment_type:this.selectedOption,payment:{method:B,status:$,transaction_id:this.generateTransactionId(),amount:k,payment_details:{}},delivery_address:this.buildEmptyDeliveryAddressPayload(),metadata:{provider_id:I,subscription_id:this.productData?.subscriptionId||this.productData?.subscription?.subscription_id||this.productData?.subscription?.id||null,plan_id:this.productData?.plan.id,product_id:this.productData?.selectedProduct.product_id,group_id:this.productData?.group?.group_id||this.productData?.group,status:"active",billing_type:t,billing_cycle:e,start_date:n.toISOString().slice(0,10),end_date:o.toISOString().slice(0,10),amount_paid:k,form_data:{fields:{product_name:this.productData?.selectedProduct.product_name}},member_id:O,user_id:M,mobile_number:m?Number(m):void 0,auto_renewal:"FALSE"},total_amount:k,updated_by:M||2};console.log("\u{1F4E4} [Service Subscription] Final order payload:",JSON.stringify(ze,null,2)),this.orderService.createServiceSubscriptionOrder(ze).subscribe({next:be=>{let _t=be.display_order_id||"ON"+Date.now(),nt=be.amount||0;this.pushNotificationService.sendOrderCreatedNotification({orderId:be.order_id?.toString()||Date.now().toString(),orderNumber:_t,amount:nt,customerName:this.authService.getUserInfo()?.name||"Customer",providerName:JSON.parse(sessionStorage.getItem("selectedProvider")||"{}").name||"Provider",providerId:this.getProviderId(),userId:this.getUserId(),orderType:"Service Subscription"}),this.cartService.clearCart();let It={orderNumber:_t,totalAmount:nt,paymentMethod:"Online",deliveryAddress:this.buildDeliveryAddressSummary(),estimatedDelivery:this.selectedOption==="door_delivery"?"2-3 business days":"Ready for pickup"};this.router.navigate(["/customers/info/order-success"],{state:{orderDetails:It,providerId:this.getProviderId(),isProvider:this.isProvider},replaceUrl:!0})},error:be=>{console.error("Error creating subscription order:",be),this.errorMessage="Failed to create order. Please try again.",this.cdr.markForCheck()},complete:()=>{this.isCreatingOrder=!1}})}createFormsOrder(){let t=this.cartItemsList[0];console.log(this.isProvider),console.log("SELECTED-->",this.selectedCustomer),console.log(this.getUserId());let e={order_type:"forms",order_subtype:this.productType||"string",user_id:this.isProvider?this.isSelfOrder?this.getUserId():this.selectedCustomer?.user_id?Number(this.selectedCustomer.user_id):this.getUserId():this.getUserId(),member_id:this.isProvider?this.isSelfOrder?null:this.selectedCustomer?.member_id||null:null,provider_id:this.getProviderId()||0,delivery_date:this.getDeliveryDate(),fullfillment_type:this.selectedOption,payment:{method:this.checkoutForm.get("paymentMode")?.value||"string",status:this.isProvider?this.selectedPaymentStatus:"pending",transaction_id:this.generateTransactionId(),amount:this.totalAmount||0,payment_details:{}},delivery_address:this.buildDeliveryAddressPayload(),metadata:{form_id:t?.formId,product_id:Number(t?.id)||0,product_name:t?.name||"Form Order",form_data:t?.formId?t?.formData:{}},total_amount:this.totalAmount||0,updated_by:this.getUserId()||0};this.orderService.createFormsOrder(e).pipe(Ce(this.destroy$),Ge(()=>{this.isCreatingOrder=!1,this.cdr.markForCheck()})).subscribe({next:n=>{let o=n.display_order_id||"ON"+Date.now(),r=n.amount||this.totalAmount;this.isProvider||this.pushNotificationService.sendOrderCreatedNotification({orderId:n.order_id?.toString()||Date.now().toString(),orderNumber:o,amount:r,customerName:this.authService.getUserInfo()?.name||"Customer",providerName:JSON.parse(sessionStorage.getItem("selectedProvider")||"{}").name||"Provider",providerId:this.getProviderId(),userId:this.getUserId(),orderType:"Forms Order"}),this.cartService.clearCart();let l={orderNumber:o,totalAmount:r,paymentMethod:this.checkoutForm.get("paymentMode")?.value||"Cash",deliveryAddress:this.buildDeliveryAddressSummary(),estimatedDelivery:this.selectedOption==="door_delivery"?"2-3 business days":"Ready for pickup"};this.router.navigate(["/customers/info/order-success"],{state:{orderDetails:l,providerId:this.getProviderId(),isProvider:this.isProvider},replaceUrl:!0})},error:n=>{console.error("Error creating forms order:",n),this.errorMessage="Failed to create forms order. Please try again.",this.cdr.markForCheck()}})}getOrderType(){let t=this.cartItemsList[0];if(t)switch(t.productSubType){case"product_subscription":return"subscription";case"standard":case"flexible":case"hybrid":return"ondemand";case"forms":return"forms";default:return"service_subscription"}let e=Array.isArray(this.productData)?this.productData:[this.productData],n=this.productData?.[0]?.productSubType||e[0]?.productSubType||e[0]?.selectedProduct?.product_subtype;switch(console.log("Order type from productData (fallback):",n),n){case"product_subscription":return"subscription";case"standard":case"flexible":case"hybrid":return"ondemand";case"forms":return"forms";default:return"service_subscription"}}getProviderId(){let t=JSON.parse(sessionStorage.getItem("selectedProvider")||"null"),e=this.providerDetail.getData();return console.log("PROVIDER-->",t),console.log(e),console.log(this.authService.getSelectedProviderId()),e?.provider_id||t?.provider_id||this.authService.getSelectedProviderId()||0}getSlotId(){return this.selectedSlot?.slot_id}getDeliveryDate(){return this.selectedDate?.toISOString().slice(0,10)||new Date().toISOString().slice(0,10)}getAssignedTo(){return 0}generateTransactionId(){return`TXN_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}getUserId(){return this.authService.getUserId()}goBack(){this.location.back()}static \u0275fac=function(e){return new(e||i)(y(_e),y(ae),y(ot),y(Jn),y(ct),y(Pe),y(Ht),y(fi),y(He),y(X),y(rt),y(Vr),y(Zn),y(Fe),y(zt),y(Xn))};static \u0275cmp=F({type:i,selectors:[["app-checkout"]],decls:2,vars:2,consts:[["plainForm",""],["formContent",""],["noDeliveryAddress",""],["qtyOnly",""],["class","loading-overlay",4,"ngIf"],["class","max-w-md mx-auto p-4 space-y-4 bg-white checkout-container max-h-[90vh] overflow-y-auto",4,"ngIf"],[1,"loading-overlay"],[1,"spinner-container"],[1,"spinner"],[1,"max-w-md","mx-auto","p-4","space-y-4","bg-white","checkout-container","max-h-[90vh]","overflow-y-auto"],[1,"header"],[1,"back-btn",3,"click"],[1,"pi","pi-arrow-left"],["class","grid grid-cols-2 gap-3",4,"ngIf"],["class","selected-customer",4,"ngIf"],["class","subscription-details",4,"ngIf"],[3,"formGroup"],["class","advance-input",3,"title","defaultExpandedStatus",4,"ngIf","ngIfElse"],[4,"ngIf"],["class","p-2 border rounded shadow space-y-4",4,"ngIf"],[1,"space-y-3","text-sm","mt-4"],[1,"flex","justify-between","items-center"],[1,"font-semibold"],["type","button","class","text-primary font-medium text-sm hover:underline cursor-pointer",3,"click",4,"ngIf"],["class","flex items-center justify-between border-b pb-2",4,"ngFor","ngForOf"],[1,"summary-card","bg-white","px-4","py-3"],[1,"flex","justify-between","items-center","cursor-pointer","border-b","pb-2",3,"click"],[1,"text-gray-600","text-sm","font-semibold"],[1,"flex","items-center","gap-2"],[1,"text-gray-900","font-semibold"],[1,"pi","text-xs","transition-transform","duration-200",3,"ngClass"],["class","mt-2 space-y-1 text-sm",4,"ngIf"],["class","bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",4,"ngIf"],["class","text-center py-4",4,"ngIf"],[1,"w-full","text-white","py-2","px-4","rounded-md","text-lg","order-btn",3,"click","disabled"],[1,"grid","grid-cols-2","gap-3"],["class","info-card info-card--delivery cursor-pointer",3,"ngClass","click",4,"ngIf"],["class","info-card cursor-pointer",3,"ngClass","click",4,"ngIf"],[1,"info-card","info-card--delivery","cursor-pointer",3,"click","ngClass"],[1,"info-card__icon"],["src","assets/images/pngs/order-deliver.png","width","32","height","32",3,"alt"],[1,"info-card__body"],[1,"info-card__header"],[1,"info-title"],["class","info-tag",4,"ngIf"],["class","info-address",3,"info-address--expanded","click",4,"ngIf","ngIfElse"],["class","address-error",4,"ngIf"],["type","button",1,"change-address-btn",3,"click"],[1,"info-tag"],[1,"info-address",3,"click"],[1,"info-address","info-address--empty"],[1,"address-error"],[1,"info-card","cursor-pointer",3,"click","ngClass"],["src","assets/images/pngs/order-pickup.png","width","32","height","32",3,"alt"],[1,"selected-customer"],[1,"flex","justify-between","items-center","mb-2","block"],[1,"text-sm","font-semibold","m-0"],[1,"text-sm","font-semibold","m-0","flex","items-center","gap-2","cursor-pointer"],["type","checkbox",1,"accent-primary",3,"ngModelChange","ngModel"],[1,"flex","items-center","gap-3"],[1,"customer-autocomplete-wrapper"],["field","member_name","placeholder","Type to search","styleClass","w-full customer-autocomplete","inputStyleClass","w-full",1,"w-full",3,"ngModelChange","completeMethod","ngModel","suggestions","minLength","showEmptyMessage","disabled"],["pTemplate","item"],["type","button","title","Add New Customer",1,"add-customer-btn",3,"click","disabled"],[1,"pi","pi-user-plus","text-base"],["class","flex items-center gap-2",4,"ngIf"],[1,"font-medium","text-sm"],[1,"text-xs","text-gray-500"],[1,"subscription-details"],[1,"info-card"],[1,"flex","flex-col","gap-3","w-full"],[1,"subscription-header"],[1,"subscription-header-left"],[1,"pi","pi-credit-card","text-primary"],[1,"flex","flex-col","gap-2"],["class","flex justify-between items-center",4,"ngIf"],[1,"info-subtitle"],[1,"font-semibold","text-sm"],["class","bg-blue-50 border border-blue-200 rounded p-2 text-xs",4,"ngIf"],[1,"font-semibold","text-sm","text-capitalize"],[1,"bg-blue-50","border","border-blue-200","rounded","p-2","text-xs"],[1,"flex","items-center","gap-1","text-blue-700"],[1,"pi","pi-info-circle"],[1,"font-medium"],[1,"advance-input",3,"title","defaultExpandedStatus"],[4,"ngTemplateOutlet"],["class","advance-input",4,"ngIf"],[1,"advance-input"],["class","space-y-3",4,"ngIf"],[1,"space-y-3"],["name","Calendar",1,"w-4","h-4","text-primary"],[1,"text-sm","font-semibold"],[1,"flex","items-center","gap-6","text-sm","text-gray-800"],["class","inline-flex items-center gap-2 cursor-pointer",4,"ngIf"],[1,"space-y-2"],[1,"date-navigation-wrapper"],["type","button",1,"nav-arrow","nav-arrow--prev",3,"click","disabled"],[1,"pi","pi-chevron-left"],[1,"date-chips-container"],["type","button","class","chip-date",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button",1,"nav-arrow","nav-arrow--next",3,"click","disabled"],[1,"pi","pi-chevron-right"],["class","space-y-2",4,"ngIf"],[1,"inline-flex","items-center","gap-2","cursor-pointer"],["type","radio","formControlName","bookDateType","value","today",1,"accent-primary"],["type","radio","formControlName","bookDateType","value","schedule",1,"accent-primary"],["type","radio","formControlName","bookDateType","value","product_subscription",1,"accent-primary"],["type","button",1,"chip-date",3,"click","ngClass"],[1,"text-sm"],[1,"text-xs"],["name","Clock",1,"w-4","h-4","text-primary"],[1,"time-grid"],[4,"ngFor","ngForOf"],["type","button",1,"time-chip",3,"click","ngClass"],["name","Repeat",1,"w-4","h-4","text-primary"],[1,"text-sm","font-medium"],[1,"flex","gap-3"],["type","radio","formControlName","frequency","value","daily",1,"accent-primary"],["type","radio","formControlName","frequency","value","weekly",1,"accent-primary"],["type","radio","formControlName","frequency","value","monthly",1,"accent-primary"],[1,"grid","grid-cols-2","gap-2"],["type","checkbox",1,"accent-primary",3,"change","checked"],[1,"flex","items-center","space-x-6","mt-2"],["class","flex items-center space-x-1",4,"ngIf"],[1,"flex","items-center","space-x-1"],["type","radio","formControlName","paymentMode",1,"accent-primary",3,"value"],[1,"p-2","border","rounded","shadow","space-y-4"],["type","radio","formControlName","paymentMode","value","cash",1,"accent-primary"],["type","radio","formControlName","paymentMode","value","collect",1,"accent-primary"],["class","qr-container",4,"ngIf"],[1,"flex","items-center","space-x-6"],["type","radio","name","paymentStatus","checked","",1,"accent-primary",3,"change"],["type","radio","name","paymentStatus",1,"accent-primary",3,"change"],["class","mt-4",4,"ngIf"],[1,"qr-container"],[1,"qr-scan",3,"qrdata","width","errorCorrectionLevel"],[1,"mt-4"],["type","button",1,"px-4","py-2","bg-green-600","text-white","rounded-md","hover:bg-green-700","transition-colors",3,"click"],["type","button",1,"text-primary","font-medium","text-sm","hover:underline","cursor-pointer",3,"click"],[1,"flex","items-center","justify-between","border-b","pb-2"],[1,"w-10","h-10","object-contain","rounded",3,"src","alt"],[1,"font-semibold","text-sm","text-gray-900"],[1,"text-sm","font-semibold","text-gray-900"],[4,"ngIf","ngIfElse"],[1,"qty-btn","qty-btn--minus",3,"click"],[1,"pi","pi-minus","text-sm"],[1,"w-6","text-center","text-black"],[1,"qty-btn","qty-btn--plus",3,"click"],[1,"pi","pi-plus","text-sm"],[1,"w-6","text-center","text-black","font-semibold"],["title","Remove item",1,"text-red-500","hover:text-red-700","ml-2",3,"click"],[1,"pi","pi-trash","text-lg"],[1,"mt-2","space-y-1","text-sm"],[1,"flex","justify-between","py-1"],[1,"text-gray-500"],[1,"text-gray-900"],[1,"bg-red-100","border","border-red-400","text-red-700","px-4","py-3","rounded","mb-4"],[1,"text-center","py-4"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-primary","mx-auto"],[1,"text-sm","text-gray-600","mt-2"]],template:function(e,n){e&1&&f(0,dm,6,3,"div",4)(1,og,41,29,"div",5),e&2&&(d("ngIf",n.isLoading),a(),d("ngIf",!n.isLoading))},dependencies:[Ae,ee,R,Lo,Re,Me,ie,Yo,Jo,Q,oe,Be,Kn,re,ge,Tr,Mc,jn,q],styles:[".loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#fffffff2;display:flex;justify-content:center;align-items:center;z-index:9999}.loading-overlay[_ngcontent-%COMP%]   .spinner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:16px}.loading-overlay[_ngcontent-%COMP%]   .spinner-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid #f3f3f3;border-top:4px solid #5D157C;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-overlay[_ngcontent-%COMP%]   .spinner-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#666;font-weight:500}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.checkout-container[_ngcontent-%COMP%]{border-radius:16px;height:100%}.checkout-container[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-width:40px;height:40px;padding:8px;background:transparent;border:none;cursor:pointer;color:#111827;transition:all .2s ease;border-radius:8px}.checkout-container[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]:hover{background-color:#0000000d}.checkout-container[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]:active{transform:scale(.95)}.checkout-container[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px;font-weight:600}.checkout-container[_ngcontent-%COMP%]   .order-btn[_ngcontent-%COMP%]{position:fixed;left:.2rem;right:0;width:98%;bottom:.2rem;height:44px;border-radius:10px;background-color:#5d157c!important;transition:all .2s ease}.checkout-container[_ngcontent-%COMP%]   .order-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#3c0e50!important;transform:translateY(-1px);box-shadow:0 4px 6px #5d157c4d}.checkout-container[_ngcontent-%COMP%]   .order-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.checkout-container[_ngcontent-%COMP%]   .order-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:16px}.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border:none;border-radius:50%;background-color:#f3f4f6;color:#111827;cursor:pointer;transition:all .2s ease;flex-shrink:0}.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background-color:#e5e7eb;transform:scale(1.05)}.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:#111827;flex:1}.chip-date[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:56px;height:64px;border:2px solid #1f2937;border-radius:10px;color:#1f2937;font-weight:600;background-color:#f9fafb;cursor:pointer;transition:all .2s ease;flex-shrink:0}.chip-date[_ngcontent-%COMP%]:hover{border-color:#5d157c;background-color:#5d157c0d;box-shadow:0 2px 4px #0000001a;transform:translateY(-1px)}.chip-date[_ngcontent-%COMP%]:active{transform:translateY(0)}.chip-date--selected[_ngcontent-%COMP%]{border-color:#5d157c;border-width:2px;color:#5d157c;font-weight:700;box-shadow:0 0 0 3px #5d157c26;background-color:#5d157c1a}.date-navigation-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;width:100%}.date-chips-container[_ngcontent-%COMP%]{flex:1;display:flex;gap:12px;overflow-x:auto;padding:4px 0;-ms-overflow-style:none;scrollbar-width:none}.date-chips-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.nav-arrow[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:36px;height:36px;min-width:36px;border:1px solid #e5e7eb;border-radius:50%;background-color:#fff;color:#5d157c;cursor:pointer;transition:all .2s ease;flex-shrink:0}.nav-arrow[_ngcontent-%COMP%]:hover:not(.nav-arrow--disabled){background-color:#5d157c;color:#fff;border-color:#5d157c;transform:scale(1.1);box-shadow:0 2px 8px #5d157c4d}.nav-arrow[_ngcontent-%COMP%]:active:not(.nav-arrow--disabled){transform:scale(.95)}.nav-arrow[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600}.nav-arrow--disabled[_ngcontent-%COMP%]{cursor:not-allowed;opacity:.3;background-color:#f9fafb;color:#9ca3af;border-color:#e5e7eb}.nav-arrow--disabled[_ngcontent-%COMP%]:hover{transform:none;box-shadow:none;background-color:#f9fafb;color:#9ca3af}.time-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:.5rem}.time-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;height:36px;border-radius:6px;padding:0 4px;border:1px solid #d1d5db!important;background-color:#f9fafb!important;color:#1f2937!important;font-size:.875rem;font-weight:600;cursor:pointer;transition:all .2s ease;-webkit-user-select:none;user-select:none;box-shadow:0 1px 3px #0000000d}.time-chip[_ngcontent-%COMP%]:hover:not(.time-chip--selected){border-color:#5d157c!important;background-color:#5d157c0d!important;color:#1f2937!important;transform:translateY(-1px);box-shadow:0 2px 6px #0000001a}.time-chip[_ngcontent-%COMP%]:active:not(.time-chip--selected){transform:translateY(0)}.time-chip--selected[_ngcontent-%COMP%]{background-color:#5d157c1a!important;color:#5d157c!important;border-color:#5d157c!important;border-width:2px!important;font-weight:700!important;box-shadow:0 0 0 3px #5d157c26,0 2px 8px #5d157c33!important;transform:translateY(-2px)}.time-chip--selected[_ngcontent-%COMP%]:hover{background-color:#5d157c26!important;transform:translateY(-2px);box-shadow:0 0 0 3px #5d157c33,0 4px 10px #5d157c40!important}.info-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;border:1px solid #e5e7eb;border-radius:12px;padding:12px;background-color:#fff;transition:all .2s ease}.info-card[_ngcontent-%COMP%]:hover{border-color:#b34ae0;box-shadow:0 2px 4px #0000000d}.info-card--delivery[_ngcontent-%COMP%]{align-items:flex-start}.info-card.selected[_ngcontent-%COMP%]{border-color:#5d157c;border-width:2px;background-color:#5d157c0d;box-shadow:0 0 0 3px #5d157c1a}.info-card__icon[_ngcontent-%COMP%]{flex-shrink:0}.info-card__body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;flex:1;min-width:0}.info-card__header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px}.info-tag[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;margin-top:4px}.change-address-btn[_ngcontent-%COMP%]{margin-left:auto;border:none;background:transparent;color:#5d157c;font-size:12px;font-weight:600;text-decoration:underline;padding:0;cursor:pointer;white-space:nowrap}.change-address-btn[_ngcontent-%COMP%]:hover, .change-address-btn[_ngcontent-%COMP%]:focus-visible{color:#3c0e50;outline:none}.address-error[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;margin-top:4px;font-weight:500}.info-address[_ngcontent-%COMP%]{font-size:13px;color:#433d59;line-height:1.5;white-space:pre-line;word-break:break-word;cursor:pointer;position:relative}.info-address[_ngcontent-%COMP%]:not(.info-address--expanded){display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;white-space:normal}.info-address--empty[_ngcontent-%COMP%]{color:#9ca3af;font-style:italic}.info-address--expanded[_ngcontent-%COMP%]{white-space:pre-line}.info-title[_ngcontent-%COMP%]{font-weight:600;font-size:14px;color:#111827}.info-subtitle[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;line-height:1.2}.text-primary[_ngcontent-%COMP%]{color:#5d157c!important}.bg-primary[_ngcontent-%COMP%]{background-color:#5d157c!important}.accent-primary[_ngcontent-%COMP%]{accent-color:#5D157C}.qty-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;border-radius:8px;border:1px solid #e5e7eb;background-color:#fff;color:#111827;cursor:pointer;transition:all .2s ease}.qty-btn[_ngcontent-%COMP%]:hover{border-color:#5d157c;background-color:#5d157c0d}.qty-btn--plus[_ngcontent-%COMP%]{background-color:#5d157c;color:#fff;border-color:#5d157c}.qty-btn--plus[_ngcontent-%COMP%]:hover{background-color:#3c0e50}.summary-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:10px}.summary-card[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{animation:_ngcontent-%COMP%_slideDown .2s ease-out}.qr-container[_ngcontent-%COMP%]{text-align:center;background-color:#fff;border-radius:12px;padding:16px;box-shadow:0 0 8px #0000001a}.qr-container[_ngcontent-%COMP%]   .qr-scan[_ngcontent-%COMP%]   .qrcode[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{width:-webkit-fill-available}.qr-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:12px;font-size:1.125rem;font-weight:600;color:#111827}.qr-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;margin:4px 0}.subscription-details[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]{background-color:#f9fafb}.subscription-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;gap:12px}.subscription-header[_ngcontent-%COMP%]   .subscription-header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex:1;min-width:0}.subscription-header[_ngcontent-%COMP%]   .subscription-header-left[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{flex-shrink:0}.subscription-header[_ngcontent-%COMP%]   .subscription-header-left[_ngcontent-%COMP%]   .info-title[_ngcontent-%COMP%]{white-space:normal;word-break:break-word}.subscription-header[_ngcontent-%COMP%]   .change-plan-button[_ngcontent-%COMP%]{flex-shrink:0;display:flex;align-items:center;gap:6px;padding:6px 12px;background-color:#3b82f6;color:#fff;font-size:12px;font-weight:500;border:none;border-radius:6px;cursor:pointer;transition:all .2s ease;white-space:nowrap}.subscription-header[_ngcontent-%COMP%]   .change-plan-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:10px}.subscription-header[_ngcontent-%COMP%]   .change-plan-button[_ngcontent-%COMP%]:hover{background-color:#2563eb;transform:translateY(-1px);box-shadow:0 2px 6px #3b82f64d}.subscription-header[_ngcontent-%COMP%]   .change-plan-button[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 1px 3px #3b82f633}.subscription-header[_ngcontent-%COMP%]   .change-plan-button[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #3b82f633}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.selected-customer[_ngcontent-%COMP%]   .customer-autocomplete-wrapper[_ngcontent-%COMP%]{flex:1;max-width:calc(100% - 80px)}.selected-customer[_ngcontent-%COMP%]   .add-customer-btn[_ngcontent-%COMP%]{min-width:64px;height:44px;padding:0 16px;background-color:#5d157c;color:#fff;font-size:.875rem;font-weight:500;border:none;border-radius:8px;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;flex-shrink:0}.selected-customer[_ngcontent-%COMP%]   .add-customer-btn[_ngcontent-%COMP%]:hover{background-color:#3c0e50;transform:translateY(-1px);box-shadow:0 2px 6px #5d157c4d}.selected-customer[_ngcontent-%COMP%]   .add-customer-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}  .customer-autocomplete .p-autocomplete-input{border:1px solid #d1d5db!important;border-radius:8px!important;padding:10px 12px!important;font-size:14px!important;transition:all .2s ease!important}  .customer-autocomplete .p-autocomplete-input:focus{border-color:#5d157c!important;box-shadow:0 0 0 3px #5d157c1a!important;outline:none!important}  .customer-autocomplete .p-autocomplete-input::placeholder{color:#9ca3af!important}@media (max-width: 640px){.time-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,minmax(0,1fr));gap:.5rem}.chip-date[_ngcontent-%COMP%]{width:48px;height:56px;font-size:.875rem}.nav-arrow[_ngcontent-%COMP%]{width:32px;height:32px;min-width:32px}.nav-arrow[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.75rem}.date-navigation-wrapper[_ngcontent-%COMP%]{gap:6px}.date-chips-container[_ngcontent-%COMP%]{gap:8px}.time-chip[_ngcontent-%COMP%]{font-size:.75rem;height:34px;padding:0 2px}.subscription-header[_ngcontent-%COMP%]   .change-plan-button[_ngcontent-%COMP%]{padding:5px 10px;font-size:11px}.subscription-header[_ngcontent-%COMP%]   .change-plan-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:9px}.selected-customer[_ngcontent-%COMP%]   .customer-autocomplete-wrapper[_ngcontent-%COMP%]{max-width:calc(100% - 60px)}.selected-customer[_ngcontent-%COMP%]   .add-customer-btn[_ngcontent-%COMP%]{min-width:52px;padding:0 12px}}@media (max-width: 480px){.subscription-header[_ngcontent-%COMP%]   .subscription-header-left[_ngcontent-%COMP%]   .info-title[_ngcontent-%COMP%]{font-size:13px}.subscription-header[_ngcontent-%COMP%]   .change-plan-button[_ngcontent-%COMP%]{padding:4px 8px;font-size:10px}.subscription-header[_ngcontent-%COMP%]   .change-plan-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.subscription-header[_ngcontent-%COMP%]   .change-plan-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0}}@media print{.nav-arrow[_ngcontent-%COMP%], .order-btn[_ngcontent-%COMP%], .change-plan-button[_ngcontent-%COMP%]{display:none}}"],changeDetection:0})};var ag=()=>({name:"John Cooper"}),cg=()=>[1,2,3,4,5];function sg(i,t){if(i&1){let e=w();s(0,"button",18),C("click",function(){let o=P(e).$implicit,r=u();return x(r.setRating(o))}),s(1,"mat-icon"),p(2,"star"),c()()}if(i&2){let e=t.$implicit,n=u();a(),G("text-yellow-400",n.rating>=e)("text-gray-300",n.rating<e)}}function lg(i,t){i&1&&(s(0,"mat-icon"),p(1,"check"),c())}function dg(i,t){if(i&1){let e=w();s(0,"button",19),C("click",function(){let o=P(e).$implicit,r=u();return x(r.toggleTag(o))}),f(1,lg,2,0,"mat-icon",20),p(2),c()}if(i&2){let e=t.$implicit,n=u();G("selected-tag",n.isTagSelected(e)),a(),d("ngIf",n.isTagSelected(e)),a(),S(" ",e," ")}}var Sn=class i{rating=0;selectedTags=[];tags=["Service","Supportive","Friendly","Delivery","Contactless"];feedback="";setRating(t){this.rating=t}toggleTag(t){let e=this.selectedTags.indexOf(t);e>-1?this.selectedTags.splice(e,1):this.selectedTags.push(t)}isTagSelected(t){return this.selectedTags.includes(t)}onSubmit(){}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=F({type:i,selectors:[["app-rating-form"]],decls:31,vars:24,consts:[[1,"max-w-md","mx-auto"],[1,"pt-6"],[1,"flex","justify-end"],["mat-button","","color","primary",1,"text-sm"],[1,"flex","flex-col","items-center","space-y-4","mb-6"],[1,"avatar"],[1,"avatar-icon"],[1,"text-xl","font-semibold"],[1,"flex","space-x-1"],["class","focus:outline-none",3,"click",4,"ngFor","ngForOf"],[1,"text-sm","text-muted-foreground"],[1,"flex","flex-wrap","gap-2","mb-6"],["mat-stroked-button","",3,"selected-tag","click",4,"ngFor","ngForOf"],[1,"space-y-4"],[1,"text-sm","font-medium","mb-2"],["appearance","outline",1,"w-full"],["matInput","","rows","4",3,"ngModelChange","placeholder","ngModel"],["mat-raised-button","","color","primary",1,"w-full",3,"click"],[1,"focus:outline-none",3,"click"],["mat-stroked-button","",3,"click"],[4,"ngIf"]],template:function(e,n){e&1&&(s(0,"mat-card",0)(1,"mat-card-content",1)(2,"div",2)(3,"button",3),p(4),_(5,"translate"),c()(),s(6,"div",4)(7,"div",5)(8,"mat-icon",6),p(9,"person"),c()(),s(10,"h2",7),p(11),_(12,"translate"),c(),s(13,"div",8),f(14,sg,3,4,"button",9),c(),s(15,"p",10),p(16),_(17,"translate"),c()(),s(18,"div",11),f(19,dg,3,4,"button",12),c(),s(20,"div",13)(21,"div")(22,"p",14),p(23),_(24,"translate"),c(),s(25,"mat-form-field",15)(26,"textarea",16),_(27,"translate"),me("ngModelChange",function(r){return ue(n.feedback,r)||(n.feedback=r),r}),c()()(),s(28,"button",17),C("click",function(){return n.onSubmit()}),p(29),_(30,"translate"),c()()()()),e&2&&(a(4),v(b(5,9,"providerInfo.feedback.skip")),a(7),v(ht(12,11,"providerInfo.feedback.rate_user",Ee(22,ag))),a(3),d("ngForOf",Ee(23,cg)),a(2),v(b(17,14,"providerInfo.feedback.leave_feedback")),a(3),d("ngForOf",n.tags),a(4),v(b(24,16,"providerInfo.feedback.share_more")),a(3),H("placeholder",b(27,18,"providerInfo.feedback.placeholder")),pe("ngModel",n.feedback),a(3),S(" ",b(30,20,"providerInfo.feedback.submit")," "))},dependencies:[ee,R,Pr,Sr,Yn,yr,Cr,vr,ie,Q,Be,q],styles:[".max-w-md[_ngcontent-%COMP%]{max-width:28rem}.mx-auto[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}.pt-6[_ngcontent-%COMP%]{padding-top:1.5rem}.flex[_ngcontent-%COMP%]{display:flex}.flex-col[_ngcontent-%COMP%]{flex-direction:column}.items-center[_ngcontent-%COMP%]{align-items:center}.justify-end[_ngcontent-%COMP%]{justify-content:flex-end}.space-y-4[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:1rem}.mb-6[_ngcontent-%COMP%]{margin-bottom:1.5rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.font-semibold[_ngcontent-%COMP%]{font-weight:600}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-muted-foreground[_ngcontent-%COMP%]{color:#6b7280}.space-x-1[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:.25rem}.focus\\:outline-none[_ngcontent-%COMP%]:focus{outline:none}.text-yellow-400[_ngcontent-%COMP%]{color:#fbbf24}.text-gray-300[_ngcontent-%COMP%]{color:#d1d5db}.flex-wrap[_ngcontent-%COMP%]{flex-wrap:wrap}.gap-2[_ngcontent-%COMP%]{gap:.5rem}.w-full[_ngcontent-%COMP%]{width:100%}.selected-tag[_ngcontent-%COMP%]{background-color:#f3e8ff;color:#9333ea;border-color:#9333ea}.avatar[_ngcontent-%COMP%]{width:4rem;height:4rem;background-color:#9333ea;border-radius:50%;display:flex;justify-content:center;align-items:center}.avatar-icon[_ngcontent-%COMP%]{font-size:2rem;color:#fff}"]})};var tt=wo(Dc());var wc=()=>({width:"100%"});function ug(i,t){if(i&1&&(s(0,"div",42)(1,"div"),p(2),c()()),i&2){let e=t.$implicit;a(2),Ue(" ",e.member_name," - ",e.member_mobile_number," ")}}function mg(i,t){if(i&1){let e=w();V(0),s(1,"span",38),h(2,"i",39),s(3,"p-autoComplete",40),C("completeMethod",function(o){P(e);let r=u();return x(r.filterMembers(o))})("onSelect",function(o){P(e);let r=u();return x(r.onMemberSelect(o))}),f(4,ug,3,2,"ng-template",41),c()(),z()}if(i&2){let e=u();a(3),ft(Ee(5,wc)),d("suggestions",e.filteredMembers)("dropdown",!0)("inputStyle",Ee(6,wc))}}function gg(i,t){i&1&&h(0,"input",43)}function _g(i,t){i&1&&(s(0,"div",44),p(1," Valid User Mobile is required. "),c())}function fg(i,t){i&1&&(s(0,"div",44),p(1," Business Name is required. "),c())}function hg(i,t){i&1&&(s(0,"div",44),p(1," Display Name is required. "),c())}function bg(i,t){i&1&&(s(0,"div",44),p(1," Short Description is required. "),c())}function Cg(i,t){i&1&&(s(0,"div",44),p(1," Business Type is required. "),c())}function vg(i,t){i&1&&(s(0,"div",44),p(1," Valid Primary Number is required. "),c())}function Pg(i,t){i&1&&(s(0,"div",44),p(1," Valid Alternate Number is required. "),c())}function xg(i,t){i&1&&(s(0,"div"),p(1," Label is required. "),c())}function Og(i,t){if(i&1){let e=w();s(0,"div",53),C("click",function(){P(e);let o=u().index,r=u();return x(r.selectProviderLocation(o))}),h(1,"i",54),s(2,"span"),p(3," Location Detected"),c()()}}function Mg(i,t){if(i&1){let e=w();s(0,"div",55),C("click",function(){P(e);let o=u().index,r=u();return x(r.selectProviderLocation(o))}),h(1,"i",54),s(2,"span"),p(3," Click to detect location * "),c()()}}function yg(i,t){if(i&1){let e=w();s(0,"div",45)(1,"div",46),C("click",function(){let o=P(e).index,r=u();return x(r.removeLocation(o))}),h(2,"i",47),c(),s(3,"div",2)(4,"label",48),p(5,"Label:"),c(),h(6,"input",49),f(7,xg,2,0,"div",50),c(),f(8,Og,4,0,"div",51)(9,Mg,4,0,"div",52),c()}if(i&2){let e,n,o,r=t.$implicit,l=t.index;d("formGroupName",l),a(7),d("ngIf",((e=r.get("label"))==null?null:e.invalid)&&((e=r.get("label"))==null?null:e.touched)),a(),d("ngIf",(n=r.get("latitude"))==null?null:n.value),a(),d("ngIf",!((o=r.get("latitude"))!=null&&o.value))}}function Sg(i,t){i&1&&(s(0,"div",44),p(1," Valid Email is required. "),c())}function wg(i,t){i&1&&(s(0,"div",44),p(1," Address is required. "),c())}function Ig(i,t){i&1&&(s(0,"div",44),p(1," Logo is required. "),c())}function kg(i,t){i&1&&(s(0,"div",44),p(1," Member Only Display is required. "),c())}var wn=class i{constructor(t,e,n,o,r,l,m,g,O){this._commonService=t;this._webviewService=e;this.fb=n;this.locationBridge=o;this.platform=r;this.cdr=l;this.memberService=m;this.authService=g;this.providerInfoService=O}editData;businessInfoForm;businessTypeOptions=[{name:"On Demand",code:"on_demand"},{name:"Subscription",code:"subscription"}];filteredMembers=[];memberLoading=!1;locationsForFormIndex=0;isUpdatingMemberSetting=!1;destroy$=new Le;visibilityOptions=[{name:"Public",value:"Public"},{name:"Private",value:"Private"},{name:"True",value:"true"}];selectedLocationData={};ngOnInit(){this._commonService.providerOnboardLocation.subscribe(t=>{this.locations?.at(this.locationsForFormIndex)?.get("latitude")?.setValue(t.lat_lon.latitude),this.locations?.at(this.locationsForFormIndex)?.get("longitude")?.setValue(t.lat_lon.longitude)}),this.setFormDataFromEditData(),this.editData||this.step1Form.get("user_mobile")?.enable(),this.addLocation()}setFormDataFromEditData(){this.editData&&Object.keys(this.editData).forEach(t=>{let e=t,n=this.editData?.[e];n!=null&&(e==="location"&&Array.isArray(n)?this.setLocationArray(n):e==="logo_url"?this.step1Form.get("logo_url")?.setValue(n):this.step1Form.controls.hasOwnProperty(e)&&this.step1Form.get(e)?.setValue(n))})}setLocationArray(t){this.locations.clear(),t.forEach(e=>{this.locations.push(this.fb.group({label:e.label,latitude:e.latitude,longitude:e.longitude}))})}get step1Form(){return this.businessInfoForm?.get("step1")}selectProviderLocation(t){return ke(this,null,function*(){this.locationsForFormIndex=t;try{console.log("[Step1Component] Requesting location selection for index:",t);let e=yield this.locationBridge.requestAddressSelection("select");if(e){if(console.log("[Step1Component] Location result received:",e),e.latlong){let[n,o]=e.latlong.split(",").map(Number);!isNaN(n)&&!isNaN(o)&&(this.selectedLocationData.latitude=n.toString(),this.selectedLocationData.longitude=o.toString(),this.locations?.at(t)?.get("latitude")?.setValue(n),this.locations?.at(t)?.get("longitude")?.setValue(o),console.log("\u{1F4CD} Location coordinates stored for index",t,":",this.selectedLocationData))}this.cdr.detectChanges(),this.platform.isNativeWebView&&this._webviewService.passActionToRN({action:tt.ACTIONS.mapView,value:tt.MapViewAction.AddressMap,mapPage:tt.MapPage.PROVIDER_ONBOARD})}}catch(e){console.error("[Step1Component] Failed to get location:",e),this.platform.isNativeWebView&&this._webviewService.passActionToRN({action:tt.ACTIONS.mapView,value:tt.MapViewAction.AddressMap,mapPage:tt.MapPage.PROVIDER_ONBOARD})}})}onMemberSelect(t){let e=t.value;e&&this.step1Form.patchValue({user_mobile:e.member_mobile_number,user_id:e.user_id,display_name:e.member_name,name:e.member_name})}filterMembers(t){let e=t.query,n=this.authService.oneTownProviderId;n?this.memberService.getMembersWithPagination(n,0,1e3,e).subscribe({next:o=>{Array.isArray(o)?this.filteredMembers=o:o&&o.members?this.filteredMembers=o.members:o&&o.data&&(this.filteredMembers=o.data),this.cdr.detectChanges()},error:o=>{console.error("Failed to search members",o),this.filteredMembers=[]}}):this.filteredMembers=[]}getLocation(t){this.selectProviderLocation(t)}afterUpload(t){this.step1Form?.get("logo_url")?.setValue(t[0])}onMemberOnlyToggle(t){if(!this.editData?.provider_id)return;this.isUpdatingMemberSetting=!0;let e=t.checked,n={provider_id:this.editData.provider_id,member_only:e};this.providerInfoService.createOrUpdateProviderSettings(n,this.editData?.provider_settings?.provider_setting_id).pipe(Ce(this.destroy$)).subscribe({next:o=>{this.isUpdatingMemberSetting=!1,console.log("Provider setting updated successfully:",o),this.editData&&(this.editData.provider_settings||(this.editData.provider_settings={}),o&&o.provider_setting_id&&(this.editData.provider_settings.provider_setting_id=o.provider_setting_id))},error:o=>{this.isUpdatingMemberSetting=!1,console.error("Failed to update provider setting:",o),this.step1Form.get("member_only_display")?.setValue(!e,{emitEvent:!1})}})}get locations(){return this.step1Form.get("location")}addLocation(){let t=this.fb.group({label:[""],latitude:[0],longitude:[0]});this.locations.push(t)}removeLocation(t){this.locations.removeAt(t)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(e){return new(e||i)(y(cr),y(Ar),y(_e),y(Zn),y(lr),y(He),y(Jn),y(X),y(Pe))};static \u0275cmp=F({type:i,selectors:[["step1"]],inputs:{editData:"editData",businessInfoForm:[0,"form","businessInfoForm"]},decls:74,vars:22,consts:[["editModeMobile",""],[3,"formGroup"],[1,"form-group"],["for","userMobile"],[4,"ngIf","ngIfElse"],["class","error-message",4,"ngIf"],["for","businessName"],["id","businessName","type","text","placeholder","Business Name","formControlName","business_name"],["for","display_name"],["id","display_name","type","text","placeholder","Display Name","formControlName","display_name"],["for","shortDesc"],["id","shortDesc","type","text","placeholder","Short Description","formControlName","short_description"],["for","businessType"],["formControlName","business_type","optionLabel","name","optionValue","code","id","businessType","placeholder","Select business_type ",1,"custom-dropdown",3,"options","showToggleAll","resetFilterOnHide","showClear","filter"],["for","primaryNumber"],["id","primaryNumber","type","tel","pattern","[0-9]*","placeholder","Primary Number","formControlName","primary_call_number"],["for","alternateNumber"],["id","alternateNumber","type","tel","pattern","[0-9]*","placeholder","Alternate Number","formControlName","alternate_call_number"],["formArrayName","location",1,"location-section"],[1,"location-title"],[1,"location-note-wrap"],[1,"location-note"],[1,"note-text"],[1,"pi","pi-map-marker","location-icon",3,"click"],["formArrayName","location",1,"locations-wrap"],["class","location-row",3,"formGroupName",4,"ngFor","ngForOf"],[1,"location-btn-wrap"],["type","button",1,"primary",3,"click"],[1,"pi","pi-plus"],["for","email"],["id","email","type","email","placeholder","Email","formControlName","email"],["for","address"],["id","address","type","text","placeholder","Address","formControlName","address_to_display"],["for","logo"],[3,"uploadedUrls","uploadedFileName"],[1,"switch-btn-group"],["for","memberOnlyDisplay"],["formControlName","member_only_display",3,"onChange","disabled"],[1,"p-input-icon-left","w-full","mobile-search-wrapper"],[1,"pi","pi-search"],["field","member_mobile_number","placeholder","Select Member (Name or Mobile)","styleClass","w-full","appendTo","body",3,"completeMethod","onSelect","suggestions","dropdown","inputStyle"],["pTemplate","item"],[1,"flex","align-items-center","gap-2"],["id","userMobile","type","text","placeholder","User Mobile","formControlName","user_mobile"],[1,"error-message"],[1,"location-row",3,"formGroupName"],[1,"close-icon",3,"click"],[1,"pi","pi-times-circle"],["for","locaion_label"],["id","locaion_label","type","text","placeholder","label","formControlName","label"],[4,"ngIf"],["class","location-detected",3,"click",4,"ngIf"],["class","location-detected no-location",3,"click",4,"ngIf"],[1,"location-detected",3,"click"],[1,"pi","pi-map-marker"],[1,"location-detected","no-location",3,"click"]],template:function(e,n){if(e&1){let o=w();s(0,"div",1)(1,"div",2)(2,"label",3),p(3,"User Mobile"),c(),f(4,mg,5,7,"ng-container",4)(5,gg,1,0,"ng-template",null,0,xe)(7,_g,2,0,"div",5),c(),s(8,"div",2)(9,"label",6),p(10,"Business Name"),c(),h(11,"input",7),f(12,fg,2,0,"div",5),c(),s(13,"div",2)(14,"label",8),p(15,"Display Name"),c(),h(16,"input",9),f(17,hg,2,0,"div",5),c(),s(18,"div",2)(19,"label",10),p(20,"Short Description"),c(),h(21,"input",11),f(22,bg,2,0,"div",5),c(),s(23,"div",2)(24,"label",12),p(25,"Business Type"),c(),h(26,"p-multiSelect",13),f(27,Cg,2,0,"div",5),c(),s(28,"div",2)(29,"label",14),p(30,"Primary Number"),c(),h(31,"input",15),f(32,vg,2,0,"div",5),c(),s(33,"div",2)(34,"label",16),p(35,"Alternate Number:"),c(),h(36,"input",17),f(37,Pg,2,0,"div",5),c(),s(38,"div",18)(39,"label",19),p(40,"Location"),c(),s(41,"div",20)(42,"div",21)(43,"span",22),p(44,"location"),c(),s(45,"i",23),C("click",function(){return P(o),x(n.selectProviderLocation(0))}),c()()()(),s(46,"div",24)(47,"span"),p(48,"Location :"),c(),f(49,yg,10,4,"div",25),s(50,"div",26)(51,"button",27),C("click",function(){return P(o),x(n.addLocation())}),h(52,"i",28),p(53," Location "),c()()(),s(54,"div",2)(55,"label",29),p(56,"Email:"),c(),h(57,"input",30),f(58,Sg,2,0,"div",5),c(),s(59,"div",2)(60,"label",31),p(61,"Address:"),c(),h(62,"input",32),f(63,wg,2,0,"div",5),c(),s(64,"div",2)(65,"label",33),p(66,"Logo:"),c(),s(67,"file-upload",34),C("uploadedUrls",function(l){return P(o),x(n.afterUpload(l))}),c(),f(68,Ig,2,0,"div",5),c(),s(69,"div",35)(70,"label",36),p(71,"Member Only Display:"),c(),s(72,"p-inputSwitch",37),C("onChange",function(l){return P(o),x(n.onMemberOnlyToggle(l))}),c(),f(73,kg,2,0,"div",5),c()()}if(e&2){let o,r,l,m,g,O,M,I,k,A,B,$,ze=de(6);d("formGroup",n.step1Form),a(4),d("ngIf",!n.editData)("ngIfElse",ze),a(3),d("ngIf",(n.step1Form==null||(o=n.step1Form.get("user_mobile"))==null?null:o.invalid)&&(n.step1Form==null||(o=n.step1Form.get("user_mobile"))==null?null:o.touched)),a(5),d("ngIf",(n.step1Form==null||(r=n.step1Form.get("business_name"))==null?null:r.invalid)&&(n.step1Form==null||(r=n.step1Form.get("business_name"))==null?null:r.touched)),a(5),d("ngIf",(n.step1Form==null||(l=n.step1Form.get("display_name"))==null?null:l.invalid)&&(n.step1Form==null||(l=n.step1Form.get("display_name"))==null?null:l.touched)),a(5),d("ngIf",(n.step1Form==null||(m=n.step1Form.get("short_description"))==null?null:m.invalid)&&(n.step1Form==null||(m=n.step1Form.get("short_description"))==null?null:m.touched)),a(4),d("options",n.businessTypeOptions)("showToggleAll",!1)("resetFilterOnHide",!0)("showClear",!1)("filter",!1),a(),d("ngIf",(n.step1Form==null||(g=n.step1Form.get("business_type"))==null?null:g.invalid)&&(n.step1Form==null||(g=n.step1Form.get("business_type"))==null?null:g.touched)),a(5),d("ngIf",(n.step1Form==null||(O=n.step1Form.get("primary_call_number"))==null?null:O.invalid)&&(n.step1Form==null||(O=n.step1Form.get("primary_call_number"))==null?null:O.touched)),a(5),d("ngIf",(n.step1Form==null||(M=n.step1Form.get("alternate_call_number"))==null?null:M.invalid)&&(n.step1Form==null||(M=n.step1Form.get("alternate_call_number"))==null?null:M.touched)),a(12),d("ngForOf",n.locations==null?null:n.locations.controls),a(9),d("ngIf",(n.step1Form==null||(I=n.step1Form.get("email"))==null?null:I.invalid)&&(n.step1Form==null||(I=n.step1Form.get("email"))==null?null:I.touched)),a(5),d("ngIf",(n.step1Form==null||(k=n.step1Form.get("address_to_display"))==null?null:k.invalid)&&(n.step1Form==null||(k=n.step1Form.get("address_to_display"))==null?null:k.touched)),a(4),d("uploadedFileName",(A=n.step1Form.get("logo_url"))==null?null:A.value),a(),d("ngIf",(n.step1Form==null||(B=n.step1Form.get("logo_url"))==null?null:B.invalid)&&(n.step1Form==null||(B=n.step1Form.get("logo_url"))==null?null:B.touched)),a(4),d("disabled",n.isUpdatingMemberSetting),a(),d("ngIf",(n.step1Form==null||($=n.step1Form.get("member_only_display"))==null?null:$.invalid)&&(n.step1Form==null||($=n.step1Form.get("member_only_display"))==null?null:$.touched))}},dependencies:[ee,R,Re,Gn,wr,ie,Q,oe,Xo,Kn,re,ge,Wo,Qo,en],styles:["input[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;background-color:#f5f5f5}.form-array[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:flex;margin-top:.5rem}.form-array[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .form-group.radius[_ngcontent-%COMP%]{width:5rem;margin-left:.5rem}.form-array[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.3rem}.add-service-btn-wrap[_ngcontent-%COMP%]   button.btn[_ngcontent-%COMP%]{margin-top:.5rem;background-color:#5d157c;color:#fff;padding:0 .7rem;border-radius:.25rem}.switch-btn-group[_ngcontent-%COMP%]{margin-top:1rem;display:flex;justify-content:space-between;margin-bottom:1rem}.switch-btn-group.bolder[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;font-size:14px;color:#5d157c}.switch-btn-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#5d157c;font-weight:400;font-size:14px}.switch-btn-group[_ngcontent-%COMP%]     p-inputswitch>div{height:1.5rem}.switch-btn-group[_ngcontent-%COMP%]     .p-inputswitch.p-inputswitch-checked .p-inputswitch-slider{background-color:#5d157c!important}.locations-wrap[_ngcontent-%COMP%]   .location-row[_ngcontent-%COMP%]{position:relative;border:1px solid grey;padding:1rem;margin-bottom:1rem}.locations-wrap[_ngcontent-%COMP%]   .location-row[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{position:absolute;top:0;right:0;cursor:pointer}.locations-wrap[_ngcontent-%COMP%]   .location-row[_ngcontent-%COMP%]   .location-detected[_ngcontent-%COMP%]{margin-top:.5rem;border:1px solid #f1f1f1;padding:.3rem}.locations-wrap[_ngcontent-%COMP%]   .location-row[_ngcontent-%COMP%]   .location-detected.no-location[_ngcontent-%COMP%]{border-color:red;color:red}.locations-wrap[_ngcontent-%COMP%]   .location-row[_ngcontent-%COMP%]   .location-detected.no-location[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:red}.locations-wrap[_ngcontent-%COMP%]   .location-btn-wrap[_ngcontent-%COMP%]{text-align:right}.locations-wrap[_ngcontent-%COMP%]   .location-btn-wrap[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:1px solid #9d9d9d;padding:5px;border-radius:5px;color:#9d9d9d;background:#f3f3f3}.location-section[_ngcontent-%COMP%]{margin:1rem 0}.location-title[_ngcontent-%COMP%]{font-weight:700;color:#6a1b9a;display:block;margin-bottom:.5rem}.location-note-wrap[_ngcontent-%COMP%]{background:#f8f1fc;border-radius:8px;padding:1rem;display:flex;justify-content:space-between;align-items:center}.note-text[_ngcontent-%COMP%]{color:#b0a7b8;font-size:.95rem}.location-icon[_ngcontent-%COMP%]{color:#6a1b9a;font-size:1.5rem;cursor:pointer}  .custom-dropdown .p-multiselect{width:100%;border:1px solid #5D157C;border-radius:10px;padding:4px 12px;font-size:14px;font-weight:500;color:#333;background:#fff}  .custom-dropdown .p-multiselect-label{padding:6px 0;font-size:14px;color:#333}  .custom-dropdown .p-multiselect-trigger{color:#5d157c}  .custom-dropdown .p-multiselect-panel{border-radius:10px;box-shadow:0 4px 20px #0000000d;border:1px solid #eee;padding:.5rem 0}  .custom-dropdown .p-multiselect-header{padding:.5rem 1rem;border-bottom:1px solid #eee;font-weight:700;color:#555}  .custom-dropdown .p-multiselect-item{padding:.6rem 1rem;font-size:14px;border-radius:6px;margin:2px 8px;transition:background .2s}  .custom-dropdown .p-multiselect-item:hover{background-color:#f3e8fa}  .custom-dropdown .p-checkbox-box{border-radius:6px;border-color:#5d157c}  .custom-dropdown .p-checkbox-box.p-highlight{background-color:#5d157c;border-color:#5d157c}  .custom-dropdown .p-checkbox-icon{font-size:.8rem;color:#fff}.mobile-search-wrapper[_ngcontent-%COMP%]{position:relative;display:block}.mobile-search-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{z-index:1;top:50%;margin-top:-.5rem;left:.75rem;color:#6c757d}.mobile-search-wrapper[_ngcontent-%COMP%]     .p-autocomplete{width:100%}.mobile-search-wrapper[_ngcontent-%COMP%]     .p-autocomplete-input{padding-left:2.5rem!important}"]})};var In=class i extends Je{constructor(e,n){let o=n.getSelectedProviderId(),r=E.CATEGORY.LIST.replace("_PROVIDER_ID_",o.toString()),l={create:E.CATEGORY.URL,update:E.CATEGORY.URL,list:r,delete:E.CATEGORY.URL};super(e,"product_category_id",l,"product_categories");this.authServ=n}deleteCategory(e){super.delete(e)}updateProviderUrl(e){if(!e||e===0)return;let n=E.CATEGORY.LIST.replace("_PROVIDER_ID_",e.toString()),o={create:E.CATEGORY.URL,update:E.CATEGORY.URL,list:n,delete:E.CATEGORY.URL};this.setUrl(o)}getAllCategories(){return this.http.get(E.GET_ALL_CATEGORIES)}static \u0275fac=function(n){return new(n||i)(Z(fe),Z(X))};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"})};function Eg(i,t){i&1&&(s(0,"div",20),p(1),_(2,"translate"),c()),i&2&&(a(),S(" ",b(2,1,"businessInfo.step3.banner_required")," "))}function Dg(i,t){if(i&1){let e=w();s(0,"div",21)(1,"div",22),h(2,"input",23),_(3,"translate"),s(4,"button",24),h(5,"i",25),c()(),s(6,"div",26),h(7,"input",27),_(8,"translate"),s(9,"button",28),C("click",function(){P(e);let o=u();return x(o.addServiceLocation())}),p(10,"+"),c()()()}if(i&2){let e=t.$implicit;d("formGroup",e),a(2),d("placeholder",b(3,3,"businessInfo.step3.service_location")),a(5),d("placeholder",b(8,5,"businessInfo.step3.radius"))}}function Fg(i,t){i&1&&(s(0,"div",20),p(1),_(2,"translate"),c()),i&2&&(a(),S(" ",b(2,1,"businessInfo.step3.work_days_required")," "))}var kn=class i{constructor(t,e){this.categoryService=t;this.fb=e}ngOnInit(){this.initializeTreeData()}businessInfoForm;editData;setFormDataFromEditData(){if(this.editData){Object.keys(this.editData).forEach(e=>{let n=e,o=this.editData?.[n];o!=null&&(n==="provider_category_id"&&Array.isArray(o)?this.setTreeSelectValue(o):n==="banner_images"&&Array.isArray(o)?this.step3Form.get("banner_images")?.setValue(o):n==="location"||this.step3Form.controls.hasOwnProperty(n)&&this.step3Form.get(n)?.setValue(o))}),this.editData.payment_mode&&this.step3Form.get("payment_mode")?.patchValue({cash_on_hand:this.editData.payment_mode.cash_on_hand??!1,online:this.editData.payment_mode.online??!1});let t=this.editData.location||[];this.serviceLocations.clear(),t.slice(1).forEach(e=>{this.addServiceLocation({label:e.label,latitude:e.latitude,longitude:e.longitude,radius:"5"})})}}treeData=[];selectedCategories=[];noteMsgEnabled=!1;get step3Form(){return this.businessInfoForm?.get("step3")}get paymentMode(){return this.businessInfoForm?.get("step3")?.get("payment_mode")}orderTypesOptions=[{name:"new",code:"new"},{name:"inprogress",code:"inprogress"},{name:"close",code:"close"},{name:"appointment",code:"appointment"},{name:"token",code:"token"},{name:"wait",code:"wait"}];orderStatusOptions=[{name:"On Demand",code:"ondemand"},{name:"Schedule",code:"schedule"},{name:"Subscription",code:"subscription"}];setOrderType(t){let e=this.step3Form.get("orderType")}initializeTreeData(){this.categoryService.getAllCategories().subscribe(t=>{this.treeData=this.convertToTreeNode(t),this.setFormDataFromEditData()})}convertToTreeNode(t){return t.map(e=>({label:e.name,data:{provider_id:e.provider_id,provider_category_id:e.provider_category_id,product_category_id:e.product_category_id},key:String(e.provider_category_id),selectable:!0,children:e.children?this.convertToTreeNode(e.children):[]}))}onchange(t){let e=this.selectedCategories.map(n=>n?.data?.provider_category_id);this.step3Form?.controls.provider_category_id.setValue(e)}setTreeSelectValue(t){this.selectedCategories=this.getTreeNodesFromIds(t),this.step3Form.get("provider_category_id_temp")?.setValue(this.selectedCategories)}getTreeNodesFromIds(t){let e=[],n=o=>{o.forEach(r=>{t.includes(r.data.provider_category_id)&&e.push(r),r.children&&r.children.length>0&&n(r.children)})};return n(this.treeData),e}initDefaultForm(){this.serviceLocations.length||this.addServiceLocation()}afterUploadBanner(t){this.step3Form?.get("banner_images")?.setValue(t)}addServiceLocation(t){this.serviceLocations.push(this.fb.group({label:[t?.label||""],latitude:[t?.latitude||null],longitude:[t?.longitude||null],radius:[t?.radius||""]}))}get serviceLocationGroups(){return this.serviceLocations.controls}get serviceLocations(){return this.step3Form.get("service_location")}static \u0275fac=function(e){return new(e||i)(y(In),y(_e))};static \u0275cmp=F({type:i,selectors:[["step3"]],inputs:{businessInfoForm:[0,"form","businessInfoForm"],editData:"editData"},decls:61,vars:60,consts:[[1,"step3-container",3,"formGroup"],[1,"upload-banner"],[3,"uploadedUrls"],["class","error-message",4,"ngIf"],[1,"form-section"],[1,"form-label"],["formControlName","about_us",1,"textarea-style",3,"placeholder"],["formControlName","contact_us",1,"textarea-style",3,"placeholder"],["type","text","formControlName","website",1,"input-style",3,"placeholder"],["type","text","formControlName","location_text",1,"input-style",3,"placeholder"],["type","text","formControlName","facebook_url",1,"input-style",3,"placeholder"],["type","text","formControlName","instagram_url",1,"input-style",3,"placeholder"],["type","text","formControlName","linked_url",1,"input-style",3,"placeholder"],["class","service-row",3,"formGroup",4,"ngFor","ngForOf"],[1,"form-group"],["for","category"],[1,"dropdown-tree"],["formControlName","provider_category_id_temp","selectionMode","checkbox",1,"custom-tree-select",3,"ngModelChange","options","ngModel","placeholder"],["for","working_days_time"],["id","working_days_time","type","text","formControlName","working_days_time",3,"placeholder"],[1,"error-message"],[1,"service-row",3,"formGroup"],[1,"input-group","location-input"],["type","text","formControlName","label",3,"placeholder"],["type","button",1,"icon-btn"],[1,"pi","pi-map-marker",2,"color","#5D157C"],[1,"input-group","radius-input"],["type","text","formControlName","radius",3,"placeholder"],["type","button",1,"add-btn",3,"click"]],template:function(e,n){if(e&1&&(s(0,"div",0)(1,"div",1)(2,"file-upload",2),C("uploadedUrls",function(r){return n.afterUploadBanner(r)}),c(),f(3,Eg,3,3,"div",3),c(),s(4,"div",4)(5,"label",5),p(6),_(7,"translate"),c(),h(8,"textarea",6),_(9,"translate"),c(),s(10,"div",4)(11,"label",5),p(12),_(13,"translate"),c(),h(14,"textarea",7),_(15,"translate"),c(),s(16,"div",4)(17,"label",5),p(18),_(19,"translate"),c(),h(20,"input",8),_(21,"translate"),c(),s(22,"div",4)(23,"label",5),p(24),_(25,"translate"),c(),h(26,"input",9),_(27,"translate"),c(),s(28,"div",4)(29,"label",5),p(30),_(31,"translate"),c(),h(32,"input",10),_(33,"translate"),c(),s(34,"div",4)(35,"label",5),p(36),_(37,"translate"),c(),h(38,"input",11),_(39,"translate"),c(),s(40,"div",4)(41,"label",5),p(42),_(43,"translate"),c(),h(44,"input",12),_(45,"translate"),c(),f(46,Dg,11,7,"div",13),s(47,"div",14)(48,"label",15),p(49),_(50,"translate"),c(),s(51,"div",16)(52,"p-treeSelect",17),_(53,"translate"),me("ngModelChange",function(r){return ue(n.selectedCategories,r)||(n.selectedCategories=r),r}),C("ngModelChange",function(r){return n.onchange(r)}),c()()(),s(54,"div",14)(55,"label",18),p(56),_(57,"translate"),c(),h(58,"input",19),_(59,"translate"),f(60,Fg,3,3,"div",3),c()()),e&2){let o,r;d("formGroup",n.step3Form),a(3),d("ngIf",(n.step3Form==null||(o=n.step3Form.get("banner_images"))==null?null:o.invalid)&&(n.step3Form==null||(o=n.step3Form.get("banner_images"))==null?null:o.touched)),a(3),v(b(7,24,"businessInfo.step3.about_us")),a(2),d("placeholder",b(9,26,"businessInfo.step3.about_us_placeholder")),a(4),v(b(13,28,"businessInfo.step3.contact_us")),a(2),d("placeholder",b(15,30,"businessInfo.step3.contact_us_placeholder")),a(4),v(b(19,32,"businessInfo.step3.call_us")),a(2),d("placeholder",b(21,34,"businessInfo.step3.call_us_placeholder")),a(4),v(b(25,36,"businessInfo.step3.location")),a(2),d("placeholder",b(27,38,"businessInfo.step3.location_placeholder")),a(4),v(b(31,40,"businessInfo.step3.facebook")),a(2),d("placeholder",b(33,42,"businessInfo.step3.facebook_placeholder")),a(4),v(b(37,44,"businessInfo.step3.instagram")),a(2),d("placeholder",b(39,46,"businessInfo.step3.instagram_placeholder")),a(4),v(b(43,48,"businessInfo.step3.linkedin")),a(2),d("placeholder",b(45,50,"businessInfo.step3.linkedin_placeholder")),a(2),d("ngForOf",n.serviceLocationGroups),a(3),S(" ",b(50,52,"businessInfo.step3.category"),""),a(3),d("options",n.treeData),pe("ngModel",n.selectedCategories),d("placeholder",b(53,54,"businessInfo.step3.select_categories")),a(4),v(b(57,56,"businessInfo.step3.work_days_time")),a(2),d("placeholder",b(59,58,"businessInfo.step3.work_days_placeholder")),a(2),d("ngIf",(n.step3Form==null||(r=n.step3Form.get("working_days_time"))==null?null:r.invalid)&&(n.step3Form==null||(r=n.step3Form.get("working_days_time"))==null?null:r.touched))}},dependencies:[ee,R,ie,Q,oe,Er,re,ge,en,q],styles:[".step3-container[_ngcontent-%COMP%]{padding:16px;display:flex;flex-direction:column;gap:20px}.form-section[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-label[_ngcontent-%COMP%]{font-weight:600;font-size:14px;color:#5d157c;margin-bottom:6px}.input-style[_ngcontent-%COMP%], .textarea-style[_ngcontent-%COMP%]{background-color:#f5e8ff;border:none;border-radius:12px;padding:12px;font-size:14px;color:#333;outline:none;resize:none;width:100%}.input-style[_ngcontent-%COMP%]{height:42px}.textarea-style[_ngcontent-%COMP%]{min-height:130px;line-height:1.6}.button-container[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.save-btn[_ngcontent-%COMP%]{background-color:#5d157c;color:#fff;font-weight:600;padding:12px 40px;border-radius:8px;font-size:16px;border:none;cursor:pointer;width:100%}  .custom-tree-select .p-treeselect{border-radius:12px;border:2px solid #5D157C;padding:.4rem .75rem;font-size:14px;font-weight:500;color:#5d157c;box-shadow:0 0 0 2px #f3e8ff;transition:all .3s ease;background-color:#fff;width:100%}  .custom-tree-select .p-treeselect-label{padding:4px 0}  .custom-tree-select .p-treeselect-trigger{color:#5d157c;font-size:12px}  .custom-tree-select .p-treeselect-panel{border-radius:12px;border:1px solid #ddd6fe;padding:.5rem;box-shadow:0 4px 14px #6c00a41f}  .custom-tree-select .p-chips-token{background-color:#ede9fe;color:#5d157c;font-size:12px;font-weight:600;padding:4px 12px;border-radius:9999px;margin-right:6px;margin-top:6px;border:1px solid #5D157C;display:flex;align-items:center}  .custom-tree-select .p-chips-token .p-chips-token-icon{margin-left:6px;font-size:12px;color:#5d157c}  .custom-tree-select .p-treenode-content{padding:4px 0;display:flex;align-items:center}  .custom-tree-select .p-treenode-label{font-size:13px;color:#5d157c;font-weight:500;padding-left:.4rem}  .custom-tree-select .p-checkbox{margin-right:.25rem}  .custom-tree-select .p-checkbox-box{border:1px solid #5D157C;border-radius:4px;background-color:#fff;width:18px;height:18px}  .custom-tree-select .p-checkbox-box.p-highlight{background-color:#5d157c;border-color:#5d157c}  .custom-tree-select .p-checkbox-box.p-highlight .p-checkbox-icon{color:#fff;font-size:12px}  .custom-tree-select .p-treenode-children{padding-left:1.5rem}"]})};function Bg(i,t){if(i&1){let e=w();h(0,"step1",6),s(1,"div",7)(2,"p-button",8),C("onClick",function(){let o=P(e).nextCallback,r=u();return x(r.validateAndProceed(r.step1Form,o))}),c()()}if(i&2){let e=u();d("form",e.businessInfoForm)("editData",e.editData)}}function Rg(i,t){if(i&1){let e=w();s(0,"div",9),h(1,"step3",6),c(),s(2,"div",10)(3,"p-button",11),C("onClick",function(){let o=P(e).prevCallback;return x(o.emit())}),c(),s(4,"p-button",12),C("onClick",function(){P(e);let o=u();return x(o.onSubmit())}),c()()}if(i&2){let e=u();a(),d("form",e.businessInfoForm)("editData",e.editData)}}var wt=class i{constructor(t,e,n,o,r){this.fb=t;this.router=e;this.providerInfoService=n;this.primeNGMessageSrv=o;this.location=r;this.businessInfoForm=this.fb.group({step1:this.fb.group({primary_call_number:["",[T.required]],user_mobile:[{value:"",disabled:!0},[T.required]],user_id:[""],name:[""],role:[""],display_name:["",[T.required]],business_name:["",[T.required]],short_description:["",[T.required]],business_type:["",[T.required]],alternate_call_number:["",[T.required,T.pattern(/^\d{10}$/)]],email:["",[T.required,T.email]],address_to_display:["",[T.required]],logo_url:[""],member_only_display:[""],location:this.fb.array([]),year_of_establishment:[2e3],visibility:[""]}),step3:this.fb.group({banner_images:[[]],about_us:[""],contact_us:[""],working_days_time:[""],call_us:[""],website:[""],facebook_url:[""],instagram_url:[""],linked_url:[""],location_text:[""],service_location:this.fb.array([]),provider_category_id:["",[T.required]],provider_category_id_temp:[""]})})}businessInfoForm;editData;formSubmitted=new Y;isEditMode=!1;activeStep=0;ngOnInit(){setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"}),document.body.scrollTop=0,document.documentElement.scrollTop=0},10);let e=this.router.getCurrentNavigation()?.extras?.state||history.state;e&&e.editMode&&e.editData&&(this.editData=e.editData,this.isEditMode=!0)}goBack(){this.activeStep>0?this.activeStep--:this.location.back()}onSubmit(){let t=this.businessInfoForm.value,e=D(D({},t.step1),t.step3);e.alternate_call_number=e.alternate_call_number.toString(),e.address_to_display&&(e.address_to_display=e.address_to_display);let n=this.editData?.provider_id;this.providerInfoService.createOrUpdate(e,n).subscribe({next:()=>{this.primeNGMessageSrv.add({severity:"success",summary:"Success",detail:"Saved successfully"}),this.formSubmitted.emit(),this.isEditMode&&setTimeout(()=>{this.router.navigate(["providers/provider-management"])},1e3)},error:o=>{this.primeNGMessageSrv.add({severity:"error",summary:"Error",detail:"Failed to save"})}})}get step1Form(){return this.businessInfoForm.get("step1")}get step2Form(){return this.businessInfoForm.get("step2")}get step3Form(){return this.businessInfoForm.get("step3")}get step4Form(){return this.businessInfoForm.get("step4")}validateAndProceed(t,e){t?.invalid?(t.markAllAsTouched(),Object.keys(t.controls).forEach(n=>{let o=t.get(n);o&&o.invalid&&console.warn(`Field '${n}' is invalid:`,o.errors)})):e.emit()}static \u0275fac=function(e){return new(e||i)(y(_e),y(ae),y(Lt),y(sr),y(Fe))};static \u0275cmp=F({type:i,selectors:[["business-info-form"]],inputs:{editData:"editData"},outputs:{formSubmitted:"formSubmitted"},decls:12,vars:3,consts:[[1,"header"],["type","button",1,"back-btn",3,"click"],[1,"pi","pi-arrow-left"],[3,"ngSubmit","formGroup"],[3,"activeStepChange","activeStep"],["pTemplate","content"],[3,"form","editData"],[1,"flex","py-4"],["label","Next",3,"onClick"],[1,"flex","flex-column","h-12rem"],[1,"flex","py-4","gap-2","justify-between","mt-3"],["label","Back","severity","secondary",3,"onClick"],["label","Submit",1,"submit-btn",3,"onClick"]],template:function(e,n){e&1&&(h(0,"p-toast"),s(1,"div",0)(2,"button",1),C("click",function(){return n.goBack()}),h(3,"i",2),c(),s(4,"h1"),p(5),c()(),s(6,"form",3),C("ngSubmit",function(){return n.onSubmit()}),s(7,"p-stepper",4),me("activeStepChange",function(r){return ue(n.activeStep,r)||(n.activeStep=r),r}),s(8,"p-stepperPanel"),f(9,Bg,3,2,"ng-template",5),c(),s(10,"p-stepperPanel"),f(11,Rg,5,2,"ng-template",5),c()()()),e&2&&(a(5),v(n.isEditMode?"Edit Provider":"Provider Onboarding"),a(),d("formGroup",n.businessInfoForm),a(),pe("activeStep",n.activeStep))},dependencies:[xr,Re,Me,oe,Or,Lr,zr,re,wn,kn],styles:["p-stepper p-stepperseparator{margin:.5rem}  p-stepper p-steppercontent{padding-left:.5rem}  p-stepper p-stepper-nav{margin-top:2rem}  form{margin:1rem}  step1,   step2,   step3,   bank-details{width:100%}  step1 .form-group,   step2 .form-group,   step3 .form-group,   bank-details .form-group{margin-bottom:.5rem;font-size:.875rem;color:#4f126a;display:flex;flex-direction:column}  step1 .form-group label,   step2 .form-group label,   step3 .form-group label,   bank-details .form-group label{margin-bottom:.25rem;font-weight:700;font-size:14px;color:#5d157c}  step1 .form-group input,   step2 .form-group input,   step3 .form-group input,   bank-details .form-group input{background:#f9f2fd;height:2.25rem;border-radius:5px;padding-left:1rem}  step1 .form-group input:focus-visible,   step2 .form-group input:focus-visible,   step3 .form-group input:focus-visible,   bank-details .form-group input:focus-visible{border:1px solid;outline:0}  step1 .form-group textarea,   step2 .form-group textarea,   step3 .form-group textarea,   bank-details .form-group textarea{background:#f9f2fd;border-radius:5px;height:auto;padding:.4rem}  step1 .form-group textarea:focus-visible,   step2 .form-group textarea:focus-visible,   step3 .form-group textarea:focus-visible,   bank-details .form-group textarea:focus-visible{border:1px solid;outline:0}  step1 .form-group .error-message,   step2 .form-group .error-message,   step3 .form-group .error-message,   bank-details .form-group .error-message{color:red;font-size:12px}  p-button button.p-button.p-button-secondary{border:1px solid #5d157c;color:#5d157c;padding:.25rem 1.25rem}  p-button button:not(.p-button-secondary){background-color:#5d157c;color:#fff;padding:.25rem 1.25rem;margin-left:1rem;margin-right:1rem}.header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px 20px;background:#fff;box-shadow:0 2px 8px #0000001a;position:sticky;top:0;z-index:100;gap:12px}@media (max-width: 480px){.header[_ngcontent-%COMP%]{padding:12px 16px;gap:8px}}.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{background:#f0f0f0;border:none;width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s;flex-shrink:0}@media (max-width: 480px){.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{width:36px;height:36px}}.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#333;font-size:18px}@media (max-width: 480px){.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}}.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:#e0e0e0;transform:scale(1.05)}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px;font-weight:700;margin:0;color:#333}@media (max-width: 768px){.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 480px){.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:16px}}"]})};function zg(i,t){if(i&1){let e=w();s(0,"div",10),C("click",function(o){let r=P(e).$implicit,l=u(2);return x(l.handleActionClick(r,o))}),c()}}function Lg(i,t){if(i&1){let e=w();s(0,"div",4)(1,"div",5)(2,"h3"),p(3,"Provider List"),c(),s(4,"button",6),C("click",function(){P(e);let o=u();return x(o.addNewProvider=!0)}),h(5,"i",7),s(6,"span",8),p(7," Add New"),c()()(),s(8,"simple-grid",9),C("onEditTrigger",function(o){P(e);let r=u();return x(r.edit(o))})("onDeleteTrigger",function(o){P(e);let r=u();return x(r.remove(o))})("contentPerPageChange",function(o){P(e);let r=u();return x(r.onContentPerPageChange(o))})("searchDataChange",function(o){P(e);let r=u();return x(r.onSearchChange(o))})("pageChange",function(o){P(e);let r=u();return x(r.onPageChange(o))}),c(),f(9,zg,1,0,"ng-template",null,0,xe),c()}if(i&2){let e=de(10),n=u();a(8),d("dataSet",n.providerData)("columns",n.columns)("actionTemplate",e)("totalRecords",n.total)("pageIndex",n.pageIndex)("contentPerPage",n.contentPerPage)}}function Ug(i,t){if(i&1){let e=w();s(0,"business-info-form",11),C("formSubmitted",function(){P(e);let o=u();return x(o.handleProviderSaved())}),c()}if(i&2){let e=u();d("editData",e.editProvider)}}var Ii=class i{constructor(t){this.providerListService=t}total=0;contentPerPage=or;pageIndex=0;searchTerm="";ngOnInit(){this.triggerGetProvider(void 0)}columns=[{displayName:"User Id",displayValue:"user_id"},{displayName:"Display Name",displayValue:"display_name"},{displayName:"Business Name",displayValue:"business_name"},{displayName:"Status",displayValue:"status"}];providerData=[];editProvider=void 0;addNewProvider=!1;edit(t){t.provider_id&&this.providerListService.getProvider(t.provider_id).subscribe({next:e=>{this.editProvider=e.data},error:e=>{console.error("Error in getprovider",e)}})}remove(t){this.providerListService.delete(t.provider_id).subscribe(e=>{this.triggerGetProvider(void 0)})}handleActionClick(t,e){e.stopPropagation()}triggerGetProvider(t){let e={skip:this.pageIndex*this.contentPerPage,limit:this.contentPerPage};this.searchTerm&&this.searchTerm.trim()!==""&&(e.search=this.searchTerm.trim()),this.providerListService.listWithTotal(e).subscribe(n=>{this.total=n.total,this.convertProviderSet(n.data)})}getList(t){this.convertProviderSet(t)}convertProviderSet(t){let e=t.map(n=>U(D({},n),{id:n.provider_id??0}));setTimeout(()=>{this.providerData=e},200)}cancelEdit(){this.editProvider=void 0}handlePageChange(t){this.providerListService.listWithTotal({skip:t.skip,limit:t.limit}).subscribe(e=>{this.convertProviderSet(e.data)})}onContentPerPageChange(t){this.contentPerPage=t,this.pageIndex=0,this.triggerGetProvider(void 0)}onSearchChange(t){this.searchTerm=t,this.pageIndex=0,this.triggerGetProvider(void 0)}onPageChange(t){this.pageIndex=t,this.triggerGetProvider(void 0)}handleProviderSaved(){this.addNewProvider=!1,this.triggerGetProvider(void 0)}static \u0275fac=function(e){return new(e||i)(y(Lt))};static \u0275cmp=F({type:i,selectors:[["saved-provider-list"]],decls:3,vars:5,consts:[["viewTemplate",""],[3,"title","icon","showBack"],["class","grid-wrap",4,"ngIf"],[3,"editData","formSubmitted",4,"ngIf"],[1,"grid-wrap"],[1,"add-button-wrap"],["pButton","","pRipple","","severity","success",1,"peer",3,"click"],[1,"pi","pi-plus"],["pButtonLabel",""],[3,"onEditTrigger","onDeleteTrigger","contentPerPageChange","searchDataChange","pageChange","dataSet","columns","actionTemplate","totalRecords","pageIndex","contentPerPage"],[1,"view",3,"click"],[3,"formSubmitted","editData"]],template:function(e,n){e&1&&(h(0,"app-title-card",1),f(1,Lg,11,6,"div",2)(2,Ug,1,1,"business-info-form",3)),e&2&&(d("title","Admin")("icon","receipt_long")("showBack",!0),a(),d("ngIf",!n.editProvider&&!n.addNewProvider),a(),d("ngIf",n.editProvider||n.addNewProvider))},dependencies:[R,lt,st,Mr,Hn,wt],styles:[".grid-wrap[_ngcontent-%COMP%]{padding-left:.5rem;padding-right:.5rem;margin-top:1rem}.grid-wrap[_ngcontent-%COMP%]   .add-button-wrap[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:.5rem}.grid-wrap[_ngcontent-%COMP%]   .add-button-wrap[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#5d157c}.grid-wrap[_ngcontent-%COMP%]   .add-button-wrap[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem}.grid-wrap[_ngcontent-%COMP%]   .add-button-wrap[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:.125rem}  .grid-wrap .add-button-wrap button.p-button{background-color:#5d157c!important;color:#fff!important;border-radius:5px!important}"]})};var ki=class i{constructor(t){this._http=t}submitBankDetails(t){return this._http.post("provider/bank/",t)}getBankDetails(t){return this._http.get(`provider/bank/${t}`)}updateBankDetails(t){return this._http.put("provider/bank/",t)}static \u0275fac=function(e){return new(e||i)(Z(fe))};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"})};var jg=()=>({standalone:!0});function $g(i,t){if(i&1){let e=w();s(0,"button",27),C("click",function(){P(e);let o=u();return x(o.clearProviderSearch())}),h(1,"i",28),c()}if(i&2){let e=u();d("disabled",e.isLoadingProvider)}}function Gg(i,t){i&1&&h(0,"i",29)}function Hg(i,t){if(i&1&&(s(0,"div",36),p(1),c()),i&2){let e=u().$implicit,n=u(2);a(),S(" ",n.formatBusinessType(e.business_type)," ")}}function Yg(i,t){if(i&1){let e=w();s(0,"div",32),C("click",function(){let o=P(e).$implicit,r=u(2);return x(r.selectProviderFromDropdown(o))}),s(1,"div",33)(2,"div",34),p(3),c(),f(4,Hg,2,1,"div",35),c()()}if(i&2){let e=t.$implicit;a(3),v(e.business_name||e.display_name||e.name||"N/A"),a(),d("ngIf",e.business_type)}}function Jg(i,t){if(i&1&&(s(0,"div",30),f(1,Yg,5,2,"div",31),c()),i&2){let e=u();a(),d("ngForOf",e.providers)}}function Wg(i,t){i&1&&(s(0,"div",30)(1,"div",37),p(2,"No providers found. Try a different search term."),c()())}function Qg(i,t){i&1&&(s(0,"div",38),p(1," Type at least 2 characters to search providers "),c())}function Xg(i,t){i&1&&(s(0,"div",39),p(1," Required "),c())}function Zg(i,t){i&1&&(s(0,"div",39),p(1," Must be 9\u201318 digits "),c())}function Kg(i,t){i&1&&(s(0,"div",39),p(1," Invalid IFSC format. Must be 11 characters: 4 letters + 0 + 6 alphanumeric (e.g., ABCD0123456) "),c())}function e_(i,t){i&1&&(s(0,"div",39),p(1," Invalid UPI Detail "),c())}function t_(i,t){i&1&&(s(0,"div",39),p(1," Invalid UPI Detail "),c())}function n_(i,t){i&1&&(s(0,"div",39),p(1," Invalid Phone Number. Must be 10 digits starting with 6-9 "),c())}function i_(i,t){i&1&&(s(0,"div",39),p(1," GST is required. "),c())}function o_(i,t){i&1&&(s(0,"span"),p(1,"GSTIN is required."),c())}function r_(i,t){i&1&&(s(0,"span"),p(1,"Invalid GSTIN format. Must be 15 characters: 2 digits + 5 letters + 4 digits + 1 letter + 1 letter/digit + Z + 1 alphanumeric (e.g., 27AAPFU0939F1Z5)"),c())}function a_(i,t){if(i&1&&(s(0,"div",39),f(1,o_,2,0,"span",26)(2,r_,2,0,"span",26),c()),i&2){let e,n,o=u(2);a(),d("ngIf",(e=o.bankDetailForm.get("gstinNo"))==null||e.errors==null?null:e.errors.required),a(),d("ngIf",(n=o.bankDetailForm.get("gstinNo"))==null||n.errors==null?null:n.errors.pattern)}}function c_(i,t){if(i&1){let e=w();s(0,"div",11)(1,"label",3),p(2,"GSTIN No"),c(),s(3,"input",40),C("input",function(o){P(e);let r=u();return x(r.onGstinInput(o))}),c(),f(4,a_,3,2,"div",13),c()}if(i&2){let e,n=u();a(4),d("ngIf",((e=n.bankDetailForm.get("gstinNo"))==null?null:e.touched)&&((e=n.bankDetailForm.get("gstinNo"))==null?null:e.invalid))}}function s_(i,t){i&1&&(s(0,"span"),p(1,"GST percentage is required."),c())}function l_(i,t){i&1&&(s(0,"span"),p(1,"Enter a valid GST % between 0-100"),c())}function d_(i,t){if(i&1&&(s(0,"div",39),f(1,s_,2,0,"span",26)(2,l_,2,0,"span",26),c()),i&2){let e,n,o=u(2);a(),d("ngIf",(e=o.bankDetailForm.get("gstPercentage"))==null||e.errors==null?null:e.errors.required),a(),d("ngIf",((n=o.bankDetailForm.get("gstPercentage"))==null||n.errors==null?null:n.errors.min)||((n=o.bankDetailForm.get("gstPercentage"))==null||n.errors==null?null:n.errors.max))}}function p_(i,t){if(i&1&&(s(0,"div",11)(1,"label",3),p(2,"GST %"),c(),h(3,"input",41),f(4,d_,3,2,"div",13),c()),i&2){let e,n=u();a(4),d("ngIf",((e=n.bankDetailForm.get("gstPercentage"))==null?null:e.touched)&&((e=n.bankDetailForm.get("gstPercentage"))==null?null:e.invalid))}}function u_(i,t){i&1&&(s(0,"span"),p(1,"Submit"),c())}function m_(i,t){i&1&&(s(0,"span"),p(1,"Submitting..."),c())}var Tn=class i{constructor(t,e,n,o){this.bankDetailsService=t;this.authService=e;this.toast=n;this.providerListService=o;this.searchSubject$.pipe(Tt(400),Et(),Rn(r=>r&&r.trim().length>=2?(this.isSearchingProviders=!0,this.providerListService.searchProviders(r.trim(),0,20).pipe($e(l=>(console.error("Error searching providers:",l),this.toast.error("Error","Failed to search providers"),Oe([]))))):(this.providers=[],Oe([]))),Ce(this.destroy$)).subscribe(r=>{this.providers=r,this.isSearchingProviders=!1,this.showProviderDropdown=!this.selectedProvider&&r.length>0&&this.providerSearchText.trim().length>=2})}form;editData;loading=!1;destroy$=new Le;searchSubject$=new Le;providers=[];selectedProvider=null;isSearchingProviders=!1;providerSearchText="";showProviderDropdown=!1;isLoadingProvider=!1;currentBankDetailsId;currentProviderId;ngOnInit(){this.setFormDataFromEditData(),this.toggleGstField()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}get bankDetailForm(){return this.form}setFormDataFromEditData(){this.editData&&this.form&&Object.keys(this.form.controls).forEach(t=>{let e=t,n=this.editData?.[e];n!=null&&this.form.get(t)?.setValue(n)})}toggleGstField(){this.form.get("gstOpted")?.valueChanges.subscribe(t=>{let e=this.form.get("gstPercentage"),n=this.form.get("gstinNo");e&&(t?(e.enable(),e.setValidators([T.required,T.min(0),T.max(100)])):(e.disable(),e.clearValidators(),e.setValue("")),e.updateValueAndValidity()),n&&(t?n.setValidators([T.required,T.pattern(/^[0-9]{2}[A-Za-z]{5}[0-9]{4}[A-Za-z]{1}[1-9A-Za-z]{1}[Zz][0-9A-Za-z]{1}$/i)]):(n.clearValidators(),n.setValue("")),n.updateValueAndValidity())})}onProviderSearchInput(t){let e=t?.target?.value||this.providerSearchText||"";this.providerSearchText=e,e.trim().length>=2?this.searchSubject$.next(e):(this.providers=[],this.showProviderDropdown=!1)}selectProviderFromDropdown(t){this.selectedProvider=t,this.currentProviderId=t.provider_id,this.providerSearchText=t.business_name||t.display_name||t.name||"",this.showProviderDropdown=!1,this.providers=[],this.loadBankDetailsByProviderId(t.provider_id)}clearProviderSearch(){this.providerSearchText="",this.providers=[],this.selectedProvider=null,this.showProviderDropdown=!1,this.currentProviderId=void 0,this.currentBankDetailsId=void 0,this.resetForm()}onInputBlur(){setTimeout(()=>{this.showProviderDropdown=!1},200)}onInputFocus(){!this.selectedProvider&&this.providers.length>0&&this.providerSearchText.trim().length>=2&&(this.showProviderDropdown=!0)}formatBusinessType(t){return t?Array.isArray(t)?t.join(", "):String(t):""}onIfscInput(t){let e=t.target,n=e.value.toUpperCase().replace(/[^A-Z0-9]/g,"");n.length>11&&(n=n.substring(0,11)),this.bankDetailForm.get("ifscCode")?.setValue(n,{emitEvent:!1}),e.value=n}onGstinInput(t){let e=t.target,n=e.value.toUpperCase().replace(/[^A-Z0-9]/g,"");n.length>15&&(n=n.substring(0,15)),this.bankDetailForm.get("gstinNo")?.setValue(n,{emitEvent:!1}),e.value=n}loadBankDetailsByProviderId(t){this.isLoadingProvider=!0,this.bankDetailsService.getBankDetails(t).subscribe({next:e=>{let n=e.data||e;n&&n.id?(this.currentBankDetailsId=n.id,this.loadBankDetailsIntoForm(n),this.isLoadingProvider=!1,this.toast.success("Success","Bank details loaded successfully")):(this.currentBankDetailsId=void 0,this.resetForm(),this.isLoadingProvider=!1,this.toast.info("Info","No existing bank details found. You can create new bank details."))},error:e=>{console.error("Error loading bank details:",e),e?.status===404?(this.currentBankDetailsId=void 0,this.resetForm(),this.toast.info("Info","No existing bank details found. You can create new bank details.")):this.toast.error("Error","Failed to load bank details"),this.isLoadingProvider=!1}})}loadBankDetailsIntoForm(t){if(this.bankDetailForm.patchValue({bankName:t.bank_name||"",accountNo:t.account_no||"",ifscCode:t.ifsc||"",primaryUpi:t.primary_upi||"",secondaryUpi:t.secondary_upi||"",upiPhoneNo:t.upi_number||"",gstOpted:t.gst_opted||!1,gstinNo:t.gst_no||"",includeGst:!1}),t.gst_opted){let e=this.bankDetailForm.get("gstPercentage");e&&e.enable()}}resetForm(){this.bankDetailForm.reset({bankName:"",accountNo:"",ifscCode:"",primaryUpi:"",secondaryUpi:"",upiPhoneNo:"",gstOpted:!1,gstinNo:"",gstPercentage:"",includeGst:!1});let t=this.bankDetailForm.get("gstPercentage");t&&t.disable()}onSubmit(){if(this.bankDetailForm.valid){let t=this.currentProviderId||this.selectedProvider?.provider_id||this.authService.getSelectedProviderId();if(!t){this.toast.error("Error","Please select a provider first");return}this.loading=!0;let e=!!this.currentBankDetailsId,n={provider_id:t,bank_name:this.bankDetailForm.get("bankName")?.value,account_no:this.bankDetailForm.get("accountNo")?.value,ifsc:this.bankDetailForm.get("ifscCode")?.value,primary_upi:this.bankDetailForm.get("primaryUpi")?.value,secondary_upi:this.bankDetailForm.get("secondaryUpi")?.value||void 0,upi_number:this.bankDetailForm.get("upiPhoneNo")?.value||void 0,gst_opted:this.bankDetailForm.get("gstOpted")?.value||!1,gst_no:this.bankDetailForm.get("gstinNo")?.value||void 0},o=e?U(D({},n),{id:this.currentBankDetailsId}):n;(e?this.bankDetailsService.updateBankDetails(o):this.bankDetailsService.submitBankDetails(o)).subscribe({next:l=>{let m=l.data||l;!e&&m?.id&&(this.currentBankDetailsId=m.id),this.toast.success("Success",e?"Bank details updated successfully":"Bank details created successfully"),this.loading=!1},error:l=>{console.error("Error saving bank details:",l),this.toast.error("Error",`Failed to ${e?"update":"create"} bank details`),this.loading=!1}})}else Object.keys(this.bankDetailForm.controls).forEach(t=>{this.bankDetailForm.get(t)?.markAsTouched()})}static \u0275fac=function(e){return new(e||i)(y(ki),y(X),y(Ne),y(Lt))};static \u0275cmp=F({type:i,selectors:[["add-bank-detail"]],inputs:{form:"form",editData:"editData"},decls:60,vars:22,consts:[[1,"bank-details-form",3,"formGroup"],[1,"form-fields"],[1,"form-section"],[1,"form-label"],[1,"provider-search-container"],[1,"search-box"],["placeholder","Search by provider name or business type...","type","text","autocomplete","off",1,"input-style",3,"ngModelChange","input","focus","blur","ngModel","ngModelOptions","disabled"],["class","icon-btn","type","button",3,"disabled","click",4,"ngIf"],["class","pi pi-spin pi-spinner search-spinner",4,"ngIf"],["class","provider-dropdown",4,"ngIf"],["class","search-hint",4,"ngIf"],[1,"form-group"],["type","text","formControlName","bankName","placeholder","Enter bank name",1,"form-input"],["class","error-message",4,"ngIf"],["type","text","formControlName","accountNo","placeholder","Enter account number",1,"form-input"],["type","text","formControlName","ifscCode","placeholder","Enter IFSC code (e.g., ABCD0123456)","maxlength","11",1,"form-input",2,"text-transform","uppercase",3,"input"],["type","text","formControlName","primaryUpi","placeholder","Enter primary UPI ID",1,"form-input"],["type","text","formControlName","secondaryUpi","placeholder","Enter secondary UPI ID (optional)",1,"form-input"],["type","text","formControlName","upiPhoneNo","placeholder","Enter UPI linked phone number (optional)",1,"form-input"],[1,"form-group","toggle-group"],[1,"toggle-container"],["formControlName","gstOpted"],["class","form-group",4,"ngIf"],["formControlName","includeGst"],[1,"submit-section"],["type","button",1,"submit-btn",3,"click","disabled"],[4,"ngIf"],["type","button",1,"icon-btn",3,"click","disabled"],[1,"pi","pi-times"],[1,"pi","pi-spin","pi-spinner","search-spinner"],[1,"provider-dropdown"],["class","provider-dropdown-item",3,"click",4,"ngFor","ngForOf"],[1,"provider-dropdown-item",3,"click"],[1,"provider-item"],[1,"provider-name"],["class","provider-type",4,"ngIf"],[1,"provider-type"],[1,"no-results"],[1,"search-hint"],[1,"error-message"],["type","text","formControlName","gstinNo","placeholder","Enter GSTIN number (e.g., 27AAPFU0939F1Z5)","maxlength","15",1,"form-input",2,"text-transform","uppercase",3,"input"],["type","number","formControlName","gstPercentage","placeholder","Enter GST percentage (0-100)",1,"form-input"]],template:function(e,n){if(e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),p(4,"Provider"),c(),s(5,"div",4)(6,"div",5)(7,"input",6),me("ngModelChange",function(r){return ue(n.providerSearchText,r)||(n.providerSearchText=r),r}),C("input",function(r){return n.onProviderSearchInput(r)})("focus",function(){return n.onInputFocus()})("blur",function(){return n.onInputBlur()}),c(),f(8,$g,2,1,"button",7)(9,Gg,1,0,"i",8),c(),f(10,Jg,2,1,"div",9)(11,Wg,3,0,"div",9),c(),f(12,Qg,2,0,"div",10),c(),s(13,"div",11)(14,"label",3),p(15,"Bank"),c(),h(16,"input",12),f(17,Xg,2,0,"div",13),c(),s(18,"div",11)(19,"label",3),p(20,"Account No"),c(),h(21,"input",14),f(22,Zg,2,0,"div",13),c(),s(23,"div",11)(24,"label",3),p(25,"IFSC Code"),c(),s(26,"input",15),C("input",function(r){return n.onIfscInput(r)}),c(),f(27,Kg,2,0,"div",13),c(),s(28,"div",11)(29,"label",3),p(30,"Primary UPI Account"),c(),h(31,"input",16),f(32,e_,2,0,"div",13),c(),s(33,"div",11)(34,"label",3),p(35,"Secondary UPI Account"),c(),h(36,"input",17),f(37,t_,2,0,"div",13),c(),s(38,"div",11)(39,"label",3),p(40,"UPI Linked Ph no"),c(),h(41,"input",18),f(42,n_,2,0,"div",13),c(),s(43,"div",19)(44,"label",3),p(45,"GST Opted?"),c(),s(46,"div",20),h(47,"p-inputSwitch",21),c(),f(48,i_,2,0,"div",13),c(),f(49,c_,5,1,"div",22)(50,p_,5,1,"div",22),s(51,"div",19)(52,"label",3),p(53,"Include GST in Product Price?"),c(),s(54,"div",20),h(55,"p-inputSwitch",23),c()()(),s(56,"div",24)(57,"button",25),C("click",function(){return n.onSubmit()}),f(58,u_,2,0,"span",26)(59,m_,2,0,"span",26),c()()()),e&2){let o,r,l,m,g,O,M,I,k;d("formGroup",n.bankDetailForm),a(7),pe("ngModel",n.providerSearchText),d("ngModelOptions",Ee(21,jg))("disabled",n.isLoadingProvider),a(),d("ngIf",n.providerSearchText||n.selectedProvider),a(),d("ngIf",n.isSearchingProviders),a(),d("ngIf",n.showProviderDropdown&&n.providers.length>0&&!n.selectedProvider),a(),d("ngIf",n.showProviderDropdown&&!n.isSearchingProviders&&n.providers.length===0&&n.providerSearchText.trim().length>=2&&!n.selectedProvider),a(),d("ngIf",!n.isSearchingProviders&&(!n.providerSearchText||n.providerSearchText.length<2)&&n.selectedProvider===null),a(5),d("ngIf",((o=n.bankDetailForm.get("bankName"))==null?null:o.touched)&&((o=n.bankDetailForm.get("bankName"))==null?null:o.invalid)),a(5),d("ngIf",((r=n.bankDetailForm.get("accountNo"))==null?null:r.touched)&&((r=n.bankDetailForm.get("accountNo"))==null?null:r.invalid)),a(5),d("ngIf",((l=n.bankDetailForm.get("ifscCode"))==null?null:l.touched)&&((l=n.bankDetailForm.get("ifscCode"))==null?null:l.invalid)),a(5),d("ngIf",((m=n.bankDetailForm.get("primaryUpi"))==null?null:m.touched)&&((m=n.bankDetailForm.get("primaryUpi"))==null?null:m.invalid)),a(5),d("ngIf",((g=n.bankDetailForm.get("secondaryUpi"))==null?null:g.touched)&&((g=n.bankDetailForm.get("secondaryUpi"))==null?null:g.invalid)),a(5),d("ngIf",((O=n.bankDetailForm.get("upiPhoneNo"))==null?null:O.touched)&&((O=n.bankDetailForm.get("upiPhoneNo"))==null?null:O.invalid)),a(6),d("ngIf",(n.bankDetailForm==null||(M=n.bankDetailForm.get("gstOpted"))==null?null:M.invalid)&&(n.bankDetailForm==null||(M=n.bankDetailForm.get("gstOpted"))==null?null:M.touched)),a(),d("ngIf",(I=n.bankDetailForm.get("gstOpted"))==null?null:I.value),a(),d("ngIf",(k=n.bankDetailForm.get("gstOpted"))==null?null:k.value),a(7),d("disabled",!n.bankDetailForm.valid||n.loading),a(),d("ngIf",!n.loading),a(),d("ngIf",n.loading)}},dependencies:[ee,R,Gn,ie,Nn,Q,oe,Vn,Be,re,ge],styles:[".bank-details-form[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:1rem;max-width:600px;margin:0 auto;font-family:Inter,-apple-system,BlinkMacSystemFont,sans-serif}.bank-details-form[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]{margin-bottom:32px;text-align:center}.bank-details-form[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#5d157c;margin:0;letter-spacing:-.5px}.bank-details-form[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.bank-details-form[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{font-size:.875rem;color:#5d157c;display:flex;flex-direction:column;margin-top:.5rem}.bank-details-form[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.bank-details-form[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:#f9f2fd;height:2.25rem;border-radius:10px;padding-left:1rem;width:100%}.bank-details-form[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{border:1px solid;outline:0}.bank-details-form[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background:#f9f2fd;border-radius:5px;height:auto;padding:.4rem;border:1px solid rgba(0,0,0,.2)}.bank-details-form[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus-visible{border:1px solid;outline:0}.bank-details-form[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;font-size:12px}@media (max-width: 768px){.bank-details-form[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}.bank-details-form[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%]{gap:20px}.bank-details-form[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%]   .form-group.toggle-group[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;align-items:flex-start;gap:12px}.bank-details-form[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%]   .form-group.toggle-group[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]{align-self:flex-end}}@media (max-width: 480px){.bank-details-form[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%]{gap:16px}.bank-details-form[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{padding:14px 16px;font-size:13px}.bank-details-form[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-size:13px}}.switch-btn-group[_ngcontent-%COMP%]{margin-top:1rem;display:flex;justify-content:space-between;width:100%;margin-bottom:1rem}.switch-btn-group.bolder[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:900;font-size:14px;color:#5d157c}.switch-btn-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#5d157c;font-weight:700;font-size:14px}.switch-btn-group[_ngcontent-%COMP%]     p-inputswitch>div{height:1.5rem}.switch-btn-group[_ngcontent-%COMP%]     .p-inputswitch.p-inputswitch-checked .p-inputswitch-slider{background-color:#5d157c!important}  .toggle-group{display:flex;justify-content:space-between;align-items:center;padding:.5rem 1rem;background:#f9f2fd;border-radius:50px;margin-bottom:.5rem}  .toggle-group label{font-weight:700;margin-bottom:0;flex:1}  .add-bank-detail-form-container .form-container   .form-group input{background:#f9f2fd;height:2.25rem;border-radius:50px;padding-left:1rem;width:100%;border:none;font-size:.875rem;color:#4f126a}  .add-bank-detail-form-container .form-container   .form-group label{font-weight:700;margin-bottom:.25rem;color:#4f126a;font-size:.875rem}.submit-section[_ngcontent-%COMP%]{padding:1.5rem;display:flex;justify-content:center;border-top:1px solid #e5e7eb;margin-top:1rem}.submit-section[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]{background:#5d157c;color:#fff;border:none;border-radius:8px;padding:12px 32px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;min-width:200px}.submit-section[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 16px #5d157c4d}.submit-section[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.submit-section[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block}.form-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-label[_ngcontent-%COMP%]{color:#5d157c;font-weight:700;margin-bottom:6px;display:flex;align-items:center;gap:8px;font-size:14px}.provider-search-container[_ngcontent-%COMP%]{position:relative;width:100%}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;background:#f9f2fd;border-radius:12px;padding-right:10px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;background:transparent;padding:12px;flex-grow:1;font-size:14px;color:#333}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.icon-btn[_ngcontent-%COMP%]{background:none;border:none;color:#5d157c;font-size:16px;cursor:pointer;padding:4px 8px;display:flex;align-items:center;justify-content:center}.icon-btn[_ngcontent-%COMP%]:hover{opacity:.7}.icon-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.search-spinner[_ngcontent-%COMP%]{color:#5d157c;font-size:16px;margin-right:8px}.provider-dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;background:#fff;border:2px solid #5D157C;border-radius:10px;margin-top:4px;max-height:300px;overflow-y:auto;z-index:1000;box-shadow:0 6.25px 14px #171a1f33,0 0 2px #171a1f33}.provider-dropdown-item[_ngcontent-%COMP%]{padding:12px;cursor:pointer;border-bottom:1px solid #f0f0f0;transition:background-color .2s}.provider-dropdown-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.provider-dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f9f2fd}.provider-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.provider-name[_ngcontent-%COMP%]{font-weight:600;color:#333;font-size:14px}.provider-type[_ngcontent-%COMP%]{font-size:12px;color:#666}.no-results[_ngcontent-%COMP%]{padding:12px;text-align:center;color:#666;font-size:14px}.selected-provider-display[_ngcontent-%COMP%]{margin-top:8px;padding:12px;background:#f9f2fd;border:2px solid #5D157C;border-radius:10px}.selected-provider-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.selected-provider-name[_ngcontent-%COMP%]{font-weight:600;color:#333;font-size:14px}.selected-provider-type[_ngcontent-%COMP%]{font-size:12px;color:#666}.search-hint[_ngcontent-%COMP%]{font-size:12px;color:#666;margin-top:6px;display:flex;align-items:center;gap:6px}"]})};var En=class i{constructor(t){this.fb=t}bankDetailForm;ngOnInit(){this.initForm()}initForm(){this.bankDetailForm=this.fb.group({bankName:["",T.required],accountNo:["",[T.required,T.pattern(/^\d{9,18}$/)]],ifscCode:["",[T.required,T.pattern(/^[A-Za-z]{4}0[A-Za-z0-9]{6}$/i)]],primaryUpi:["",[T.required,T.pattern(/^[a-zA-Z0-9._-]+@[a-zA-Z]{2,}$/)]],secondaryUpi:["",[T.pattern(/^[a-zA-Z0-9._-]+@[a-zA-Z]{2,}$/)]],upiPhoneNo:["",[T.pattern(/^[6-9]\d{9}$/)]],gstOpted:[!1,T.required],gstinNo:["",[T.pattern(/^[0-9]{2}[A-Za-z]{5}[0-9]{4}[A-Za-z]{1}[1-9A-Za-z]{1}[Zz][0-9A-Za-z]{1}$/i)]],gstPercentage:[{value:"",disabled:!0},[T.min(0),T.max(100)]],includeGst:[!1]})}static \u0275fac=function(e){return new(e||i)(y(_e))};static \u0275cmp=F({type:i,selectors:[["bank-details"]],decls:4,vars:4,consts:[[3,"title","icon","showBack"],[1,"card-wrapper"],[1,"card"],[3,"form"]],template:function(e,n){e&1&&(h(0,"app-title-card",0),s(1,"div",1)(2,"mat-card",2),h(3,"add-bank-detail",3),c()()),e&2&&(d("title","Bank Detail")("icon","credit_card")("showBack",!0),a(3),d("form",n.bankDetailForm))},dependencies:[Yn,Hn,Tn],styles:[".card-wrapper[_ngcontent-%COMP%]{padding:1rem}.card-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 4px 6px #0000001a}.card-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .submit-section[_ngcontent-%COMP%]{padding:1.5rem;display:flex;justify-content:center;border-top:1px solid #e5e7eb}.card-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .submit-section[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#5d157c,#7c3aed);color:#fff;border:none;border-radius:8px;padding:12px 32px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;min-width:200px}.card-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .submit-section[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 16px #5d157c4d}.card-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .submit-section[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.card-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .submit-section[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block}"]})};var Dn=class i{constructor(t,e,n){this.router=t;this.cartService=e;this.backHandleService=n}orderDetails={orderNumber:"",totalAmount:0,paymentMethod:"",deliveryAddress:"",estimatedDelivery:""};providerId=0;isProvider=!1;ngOnInit(){this.loadOrderDetails(),this.clearCart(),this.registerBackAction()}ngOnDestroy(){this.cleanupBackAction()}registerBackAction(){let t=this.router.url;[t,t.split("?")[0],"/customers/info/order-success","/providers/info/order-success"].forEach((n,o)=>{let r={id:`order-success-back-action-${o}-${Date.now()}`,actionType:"function",callback:()=>{this.isProvider?this.router.navigate(["/providers/add-sales"],{state:{providerId:this.providerId},replaceUrl:!0}):this.router.navigate(["/customers/info"],{state:{providerId:this.providerId},replaceUrl:!0})},value:"",forPageUrl:n};this.backHandleService.backAction=this.backHandleService.backAction.filter(l=>!l.id.startsWith("order-success-back-action-")||l.forPageUrl!==n),this.backHandleService.backAction.push(r)})}cleanupBackAction(){this.backHandleService.backAction=this.backHandleService.backAction.filter(t=>!t.id.startsWith("order-success-back-action-"))}loadOrderDetails(){let t=history.state;this.isProvider=t.isProvider??!1,t?.orderDetails?this.orderDetails=D(D({},this.orderDetails),t.orderDetails):this.orderDetails={orderNumber:"ON00000035",totalAmount:19.5,paymentMethod:"Cash",deliveryAddress:"201 Katlian No.21 Street, Sitka, Alaska 99835",estimatedDelivery:"2-3 business days"},t?.providerId&&(this.providerId=t.providerId)}goToHome(){let t=this.router.url;this.backHandleService.backActionTrigger(t)}viewOrderHistory(){this.router.navigate(["/orders"],{replaceUrl:!0})}trackOrder(){this.router.navigate(["/track-order",this.orderDetails.orderNumber],{replaceUrl:!0})}clearCart(){this.cartService.clearCart()}static \u0275fac=function(e){return new(e||i)(y(ae),y(ct),y(zt))};static \u0275cmp=F({type:i,selectors:[["app-order-success"]],decls:66,vars:44,consts:[[1,"order-success-container"],[1,"success-section","text-center","py-8"],[1,"success-icon"],[1,"pi","pi-check-circle","text-purple-800",2,"font-size","4rem"],[1,"success-title"],[1,"success-subtitle"],[1,"success-message"],[1,"order-details-card"],[1,"card-header"],[1,"card-title"],[1,"order-info"],[1,"info-row"],[1,"info-label"],[1,"info-value"],[1,"info-value","amount"],[1,"info-value","payment-method"],[1,"info-value","address"],[1,"info-row","hidden-btn"],[1,"info-value","delivery"],[1,"action-buttons"],[1,"btn","btn-primary","w-full",3,"click"],[1,"pi","pi-shopping-cart","mr-2"],[1,"btn","btn-secondary","w-full","mb-3","hidden-btn",3,"click"],[1,"pi","pi-map-marker","mr-2"],[1,"btn","btn-outline","w-full","mb-3","hidden-btn",3,"click"],[1,"pi","pi-list","mr-2"],[1,"additional-info","hidden-btn"],[1,"text-sm","text-gray-600","text-center"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2),h(3,"i",3),c(),s(4,"h1",4),p(5),_(6,"translate"),c(),s(7,"p",5),p(8),_(9,"translate"),c(),s(10,"p",6),p(11),_(12,"translate"),c()(),s(13,"div",7)(14,"div",8)(15,"h2",9),p(16),_(17,"translate"),c()(),s(18,"div",10)(19,"div",11)(20,"span",12),p(21),_(22,"translate"),c(),s(23,"span",13),p(24),c()(),s(25,"div",11)(26,"span",12),p(27),_(28,"translate"),c(),s(29,"span",14),p(30),c()(),s(31,"div",11)(32,"span",12),p(33),_(34,"translate"),c(),s(35,"span",15),p(36),c()(),s(37,"div",11)(38,"span",12),p(39),_(40,"translate"),c(),s(41,"span",16),p(42),c()(),s(43,"div",17)(44,"span",12),p(45),_(46,"translate"),c(),s(47,"span",18),p(48),c()()()(),s(49,"div",19)(50,"button",20),C("click",function(){return n.goToHome()}),h(51,"i",21),p(52),_(53,"translate"),c(),s(54,"button",22),C("click",function(){return n.trackOrder()}),h(55,"i",23),p(56),_(57,"translate"),c(),s(58,"button",24),C("click",function(){return n.viewOrderHistory()}),h(59,"i",25),p(60),_(61,"translate"),c()(),s(62,"div",26)(63,"p",27),p(64),_(65,"translate"),c()()()),e&2&&(a(5),v(b(6,18,"providerInfo.orderSuccess.order_placed")),a(3),v(b(9,20,"providerInfo.orderSuccess.thank_you")),a(3),v(b(12,22,"providerInfo.orderSuccess.order_success")),a(5),v(b(17,24,"providerInfo.orderSuccess.order_details")),a(5),v(b(22,26,"providerInfo.orderSuccess.order_no")),a(3),v(n.orderDetails.orderNumber),a(3),v(b(28,28,"providerInfo.orderSuccess.total_amount")),a(3),S("\u20B9",n.orderDetails.totalAmount,""),a(3),v(b(34,30,"providerInfo.orderSuccess.payment_method")),a(3),v(n.orderDetails.paymentMethod),a(3),v(b(40,32,"providerInfo.orderSuccess.delivery_address")),a(3),v(n.orderDetails.deliveryAddress),a(3),v(b(46,34,"providerInfo.orderSuccess.estimated_delivery")),a(3),v(n.orderDetails.estimatedDelivery),a(4),S(" ",b(53,36,"providerInfo.orderSuccess.continue_shopping")," "),a(4),S(" ",b(57,38,"providerInfo.orderSuccess.track_order")," "),a(4),S(" ",b(61,40,"providerInfo.orderSuccess.view_order_history")," "),a(4),S(" ",b(65,42,"providerInfo.orderSuccess.email_confirmation")," "))},dependencies:[q],styles:[".order-success-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#f8fafc,#e2e8f0);padding:1rem;display:flex;flex-direction:column;align-items:center;font-family:roboto;overscroll-behavior-x:none;overscroll-behavior-y:auto;touch-action:pan-y pinch-zoom;-webkit-overflow-scrolling:touch;position:relative;width:100%;overflow-x:hidden}.success-section[_ngcontent-%COMP%]{width:100%;max-width:400px}.success-section[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%]{margin-bottom:1.5rem}.success-section[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%]   i.pi-check-circle[_ngcontent-%COMP%]{filter:drop-shadow(0 4px 6px #5D157C)}.success-section[_ngcontent-%COMP%]   .success-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#5d157c;margin-bottom:.5rem;text-shadow:0 2px 4px rgba(93,21,124,.1)}.success-section[_ngcontent-%COMP%]   .success-subtitle[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#1f2937;margin-bottom:.5rem;letter-spacing:.05em}.success-section[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{font-size:1rem;color:#6b7280;line-height:1.5}.order-details-card[_ngcontent-%COMP%]{width:100%;max-width:400px;background:#fff;border-radius:16px;box-shadow:0 10px 25px #0000001a;margin:2rem 0;overflow:hidden}.order-details-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#5d157c,#3c0e50);padding:1.5rem;text-align:center}.order-details-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{color:#fff;font-size:1.25rem;font-weight:600;margin:0}.order-details-card[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]{padding:1.5rem}.order-details-card[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem 0;border-bottom:1px solid #f3f4f6}.order-details-card[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.order-details-card[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#6b7280;flex-shrink:0}.order-details-card[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#1f2937;text-align:right;max-width:60%;word-wrap:break-word}.order-details-card[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-value.amount[_ngcontent-%COMP%]{color:#5d157c;font-size:1rem;font-weight:700}.order-details-card[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-value.payment-method[_ngcontent-%COMP%]{color:#5d157c;font-weight:600}.order-details-card[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-value.address[_ngcontent-%COMP%]{color:#374151;font-size:.8rem;line-height:1.4}.order-details-card[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-value.delivery[_ngcontent-%COMP%]{color:#7c3aed;font-weight:600}.action-buttons[_ngcontent-%COMP%]{width:100%;max-width:400px;margin:1.5rem 0}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:.875rem 1.5rem;border-radius:12px;font-size:1rem;font-weight:600;transition:all .2s ease-in-out;border:none;cursor:pointer}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i.pi[_ngcontent-%COMP%]{flex-shrink:0}.action-buttons[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#5d157c,#3c0e50);color:#fff;box-shadow:0 4px 12px #5d157c4d}.action-buttons[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #5d157c66}.action-buttons[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.action-buttons[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;box-shadow:0 4px 12px #10b9814d}.action-buttons[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #10b98166}.action-buttons[_ngcontent-%COMP%]   .btn.btn-outline[_ngcontent-%COMP%]{background:transparent;color:#5d157c;border:2px solid #5D157C}.action-buttons[_ngcontent-%COMP%]   .btn.btn-outline[_ngcontent-%COMP%]:hover:not(:disabled){background:#5d157c;color:#fff;transform:translateY(-2px)}.additional-info[_ngcontent-%COMP%]{width:100%;max-width:400px;margin-top:1rem;padding:1rem}.additional-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:1.6;margin:0}@media (max-width: 480px){.order-success-container[_ngcontent-%COMP%]{padding:.75rem}.success-section[_ngcontent-%COMP%]   .success-title[_ngcontent-%COMP%]{font-size:1.75rem}.success-section[_ngcontent-%COMP%]   .success-subtitle[_ngcontent-%COMP%]{font-size:1rem}.order-details-card[_ngcontent-%COMP%]{margin:1.5rem 0}.order-details-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%], .order-details-card[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]{padding:1.25rem}.order-details-card[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{padding:.5rem 0}.order-details-card[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%], .order-details-card[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{font-size:.8rem}.action-buttons[_ngcontent-%COMP%]{margin:1rem 0}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.75rem 1.25rem;font-size:.9rem}}.success-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounceIn .8s ease-out}@keyframes _ngcontent-%COMP%_bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}to{opacity:1;transform:scale(1)}}.order-details-card[_ngcontent-%COMP%]{transition:transform .2s ease-in-out}.order-details-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.hidden-btn[_ngcontent-%COMP%]{visibility:hidden}"]})};function __(i,t){if(i&1){let e=w();s(0,"div",19)(1,"img",20),C("error",function(o){P(e);let r=u(2);return x(r.onImageError(o))}),c()()}if(i&2){let e=u(2);a(),d("src",e.product.product_image_url[0],le)("alt",e.product.product_name)}}function f_(i,t){if(i&1&&(s(0,"p",21),p(1),c()),i&2){let e=u(2);a(),S("\u20B9",e.product.selling_price,"")}}function h_(i,t){if(i&1&&(s(0,"div",22)(1,"h4",23),p(2,"Product Description"),c(),h(3,"div",24),c()),i&2){let e=u(2);a(3),d("innerHTML",e.formattedDescription,it)}}function b_(i,t){if(i&1){let e=w();s(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9),f(4,__,2,2,"div",10),c(),s(5,"div",11)(6,"h3",12),p(7),c(),f(8,f_,2,1,"p",13),c()(),f(9,h_,4,1,"div",14),c(),s(10,"div",15)(11,"button",16),C("click",function(){P(e);let o=u();return x(o.registerNow())}),s(12,"span",17),p(13,"Register Now"),c(),h(14,"i",18),c()()()}if(i&2){let e=u();a(4),d("ngIf",e.product.product_image_url&&e.product.product_image_url.length>0),a(3),v(e.product.product_name),a(),d("ngIf",e.product.selling_price),a(),d("ngIf",e.formattedDescription)}}function C_(i,t){if(i&1){let e=w();s(0,"div",25)(1,"p"),p(2,"No subscription data available"),c(),s(3,"button",26),C("click",function(){P(e);let o=u();return x(o.goBack())}),p(4," Go Back "),c()()}}var Fn=class i{constructor(t,e,n){this.route=t;this.router=e;this.location=n;L.setOptions({breaks:!0,gfm:!0})}product;formattedDescription="";ngOnInit(){let t=this.router.getCurrentNavigation();if(t?.extras?.state?.product)this.product=t.extras.state.product;else{let e=history.state;e?.product&&(this.product=e.product)}this.product?.description&&(this.formattedDescription=this.convertMarkdownToHtml(this.product.description))}convertMarkdownToHtml(t){return t?L.parse(t):""}goBack(){this.location.back()}onImageError(t){let e=t.target;e&&(e.src="assets/images/products/product.jpg")}registerNow(){let e=this.router.url.replace("/subscription-details",""),n=this.product.provider_id||this.route.snapshot.queryParams.providerId;this.router.navigateByUrl(e,{state:{registerProduct:this.product,triggerRegistration:!0,providerId:n}})}static \u0275fac=function(e){return new(e||i)(y(ot),y(ae),y(Fe))};static \u0275cmp=F({type:i,selectors:[["app-subscription-details"]],decls:8,vars:2,consts:[[1,"subscription-details-container"],[1,"header"],[1,"back-btn",3,"click"],[1,"pi","pi-arrow-left"],["class","content",4,"ngIf"],["class","no-data",4,"ngIf"],[1,"content"],[1,"product-card"],[1,"product-header"],[1,"product-image-wrapper"],["class","product-image-container",4,"ngIf"],[1,"product-info"],[1,"product-name"],["class","product-price",4,"ngIf"],["class","description-section",4,"ngIf"],[1,"actions"],[1,"register-now-btn",3,"click"],[1,"btn-text"],[1,"pi","pi-arrow-right"],[1,"product-image-container"],[1,"product-image",3,"error","src","alt"],[1,"product-price"],[1,"description-section"],[1,"section-title"],[1,"description-content",3,"innerHTML"],[1,"no-data"],[1,"back-btn-alt",3,"click"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"button",2),C("click",function(){return n.goBack()}),h(3,"i",3),c(),s(4,"h2"),p(5,"Subscription Details"),c()(),f(6,b_,15,4,"div",4)(7,C_,5,0,"div",5),c()),e&2&&(a(6),d("ngIf",n.product),a(),d("ngIf",!n.product))},dependencies:[R],styles:['.subscription-details-container[_ngcontent-%COMP%]{padding:0;min-height:100vh;background:linear-gradient(135deg,#f5f7fa,#e8edf2);display:flex;flex-direction:column}.subscription-details-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:20px 30px;background:#fff;box-shadow:0 2px 10px #0000000d;position:sticky;top:0;z-index:100}.subscription-details-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:8px;border-radius:8px;transition:all .3s ease;color:#5d157c;font-size:20px}.subscription-details-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:#5d157c1a;transform:translate(-2px)}.subscription-details-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#2c3e50;font-size:26px;font-weight:700;background:linear-gradient(135deg,#5d157c,#8b2fb8);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;padding:30px;max-width:900px;margin:0 auto;width:100%;gap:25px}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:30px;box-shadow:0 8px 30px #00000014;transition:all .3s ease}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]:hover{box-shadow:0 12px 40px #0000001f}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-header[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center;padding-bottom:20px;border-bottom:1px solid #f0f0f0;margin-bottom:20px}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-header[_ngcontent-%COMP%]   .product-image-wrapper[_ngcontent-%COMP%]{flex-shrink:0}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-header[_ngcontent-%COMP%]   .product-image-wrapper[_ngcontent-%COMP%]   .product-image-container[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:12px;overflow:hidden;box-shadow:0 4px 15px #0000001a;background:linear-gradient(135deg,#f5f7fa,#e8edf2)}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-header[_ngcontent-%COMP%]   .product-image-wrapper[_ngcontent-%COMP%]   .product-image-container[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block;transition:transform .3s ease}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-header[_ngcontent-%COMP%]   .product-image-wrapper[_ngcontent-%COMP%]   .product-image-container[_ngcontent-%COMP%]:hover   .product-image[_ngcontent-%COMP%]{transform:scale(1.05)}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-header[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:8px;justify-content:center}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-header[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{color:#2c3e50;font-size:20px;margin:0;font-weight:700;line-height:1.3}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-header[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-price[_ngcontent-%COMP%]{color:#5d157c;font-size:22px;font-weight:700;margin:0}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{color:#5d157c;font-size:18px;font-weight:700;margin:0 0 15px}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content{color:#5a6c7d;line-height:1.8;font-size:15px}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content h1, .subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content h2, .subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content h3, .subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content h4, .subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content h5, .subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content h6{color:#2c3e50;margin-top:20px;margin-bottom:10px;font-weight:700}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content h1:first-child, .subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content h2:first-child, .subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content h3:first-child, .subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content h4:first-child, .subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content h5:first-child, .subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content h6:first-child{margin-top:0}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content h2{font-size:20px}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content h3{font-size:18px}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content p{margin:10px 0;color:#5a6c7d;line-height:1.8}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content b, .subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content strong{color:#2c3e50;font-weight:700}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content i, .subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content em{font-style:italic}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content ul, .subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content ol{margin:12px 0;padding-left:25px}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content ul li, .subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content ol li{margin:6px 0;color:#5a6c7d;line-height:1.7}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content ul li::marker, .subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content ol li::marker{color:#5d157c}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content a{color:#5d157c;text-decoration:none;font-weight:600;transition:all .2s ease}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content a:hover{color:#8b2fb8;text-decoration:underline}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content code{background:#f5f7fa;padding:2px 8px;border-radius:4px;font-family:Courier New,monospace;font-size:14px;color:#e74c3c;border:1px solid #e8edf2}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content pre{background:#f5f7fa;padding:15px;border-radius:8px;overflow-x:auto;border:1px solid #e8edf2;margin:15px 0}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content pre code{background:transparent;padding:0;border:none;color:#2c3e50}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content blockquote{border-left:4px solid #5d157c;padding-left:15px;margin:15px 0;color:#7f8c8d;font-style:italic}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content hr{border:none;border-top:2px solid #e8edf2;margin:20px 0}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content br{line-height:1.8}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{position:sticky;bottom:0;display:flex;justify-content:center;padding:20px 0;background:linear-gradient(to top,#f5f7fa 0%,rgba(245,247,250,.95) 80%,transparent 100%);margin-top:auto}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .register-now-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffa41c,#ff8c00);color:#000;border:none;padding:18px 60px;border-radius:50px;font-size:18px;font-weight:700;cursor:pointer;transition:all .3s ease;min-width:250px;box-shadow:0 8px 25px #ffa41c4d;display:flex;align-items:center;justify-content:center;gap:12px;position:relative;overflow:hidden}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .register-now-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(135deg,#ff8c00,#ffa41c);opacity:0;transition:opacity .3s ease}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .register-now-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%], .subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .register-now-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:relative;z-index:1;color:#000}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .register-now-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px;transition:transform .3s ease}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .register-now-btn[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 12px 35px #ffa41c66}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .register-now-btn[_ngcontent-%COMP%]:hover:before{opacity:1}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .register-now-btn[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:translate(4px)}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .register-now-btn[_ngcontent-%COMP%]:active{transform:translateY(-1px)}.subscription-details-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{text-align:center;padding:80px 20px;flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center}.subscription-details-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#95a5a6;font-size:20px;margin-bottom:25px;font-weight:500}.subscription-details-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   .back-btn-alt[_ngcontent-%COMP%]{background:linear-gradient(135deg,#5d157c,#8b2fb8);color:#fff;border:none;padding:14px 35px;border-radius:50px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 6px 20px #5d157c4d}.subscription-details-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   .back-btn-alt[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #5d157c66}@media (max-width: 768px){.subscription-details-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{padding:15px 20px}.subscription-details-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:20px 15px;gap:20px}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]{padding:20px}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-header[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center;gap:15px}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-header[_ngcontent-%COMP%]   .product-image-wrapper[_ngcontent-%COMP%]   .product-image-container[_ngcontent-%COMP%]{width:150px;height:150px}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-header[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]{width:100%}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-header[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-size:20px}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-header[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-price[_ngcontent-%COMP%]{font-size:22px}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:16px}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content{font-size:14px}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content h2{font-size:18px}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .description-section[_ngcontent-%COMP%]     .description-content h3{font-size:16px}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .register-now-btn[_ngcontent-%COMP%]{width:100%;padding:16px 40px;min-width:unset;font-size:16px}}@media (max-width: 480px){.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]{padding:15px}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-header[_ngcontent-%COMP%]   .product-image-wrapper[_ngcontent-%COMP%]   .product-image-container[_ngcontent-%COMP%]{width:120px;height:120px}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-header[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-size:18px}.subscription-details-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-header[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-price[_ngcontent-%COMP%]{font-size:20px}}']})};var v_=[{path:"",component:fn},{path:"view-cart",component:yn},{path:"feedback",component:Sn},{path:"order-success",component:Dn},{path:"catalogue",component:Ke},{path:"buisiness-form",component:wt},{path:"saved-provider-list",component:Ii},{path:"product-detail",component:xt},{path:"bank-detail",component:En},{path:"subscription-details",component:Fn}],Ti=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=Ft({type:i});static \u0275inj=Dt({imports:[Ni.forChild(v_),Ni]})};var Ec=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=Ft({type:i});static \u0275inj=Dt({imports:[jo,Ti,Ur,qr,Ko,Zo,jr,$r,yc,br.pick({Search:fr,X:hr,ChevronRight:pr,Minus:gr,Plus:_r,Clock:ur,Calendar:dr,ListFilter:mr}),Ho]})};export{ki as a,Mc as b,yc as c,jt as d,ni as e,gi as f,ei as g,In as h,Ut as i,qt as j,$t as k,Pe as l,on as m,Ke as n,fi as o,Ec as p};
