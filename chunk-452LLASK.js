import{c as an,d as Vr}from"./chunk-E7ZBKBIV.js";import{$a as Xt,A as Bi,Aa as ir,Ab as Mr,B as Ie,Ba as rr,C as ve,Ca as or,Cb as wr,D as Jt,Da as ar,Db as kr,E as Ri,Eb as Er,F as Ai,Fa as sr,Fb as Tr,G as ee,Ga as cr,Gb as Dr,H as Vi,Ha as lr,Hb as Fr,I as Ui,Ia as dr,Ib as Nr,J as re,Ja as pr,K as Li,Ka as Kt,Kb as Br,L as qi,La as mr,Lb as Rr,M as Gi,Ma as ur,Na as Fe,Oa as gr,P as ji,Pa as fr,Q as te,R as zi,S as $i,Sa as _r,U as Hi,Ua as Ne,V as Ji,Va as hr,W as Yt,Wa as Be,X as Yi,Xb as Ar,Y as Wi,Ya as vr,Z as Ki,_ as D,aa as Xi,ba as Vn,cb as ct,db as br,fb as Qt,ga as Un,gb as Zt,ha as Ln,hb as Cr,i as Di,ia as Qi,ib as en,ja as Ct,jb as tn,k as Se,ka as ra,l as N,lb as xr,m as Fi,ma as Zi,n as Ni,na as oe,o as Ht,oa as er,ob as nn,pa as H,q as X,qb as Pr,s as An,sa as tr,sb as yr,ta as Wt,tb as Sr,ua as nr,v as Q,va as xt,vb as Ir,w as M,wa as at,wb as Or,x as j,xa as De,xb as rn,y as Z,ya as st,yb as on}from"./chunk-2T5CPM73.js";import{Ba as Ee,Bd as Ei,Ca as x,Cb as _,Cd as Ti,Da as P,Ec as u,Fc as g,Gb as d,Gc as bt,Hb as Ci,Ib as _e,Ic as Te,J as hi,Kb as xi,L as tt,Ma as ie,N as nt,P as vi,R as it,Rb as s,S as $t,Sb as o,Tb as h,Ub as L,Vb as q,Wb as Bn,Wc as Mi,Xb as I,_b as C,a as W,aa as fe,ac as m,b as he,d as A,dc as V,e as fi,gb as Ce,gc as Pi,h as Nn,hc as yi,ia as K,ic as Si,ja as rt,kb as a,lb as y,lc as xe,mc as l,n as Le,na as $,nc as v,o as zt,oc as S,od as ye,pc as Y,qd as G,rb as bi,rc as ae,rd as E,sa as w,sc as se,t as et,ta as ot,tc as ce,vd as wi,wc as Rn,wd as ki,xc as Pe,y as _i,yc as Ii,zc as Oi}from"./chunk-P6FHP7DN.js";var Wr=A((um,Yr)=>{"use strict";Yr.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var Re=A(Ye=>{"use strict";var zn,lc=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Ye.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};Ye.getSymbolTotalCodewords=function(t){return lc[t]};Ye.getBCHDigit=function(i){let t=0;for(;i!==0;)t++,i>>>=1;return t};Ye.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');zn=t};Ye.isKanjiModeEnabled=function(){return typeof zn<"u"};Ye.toSJIS=function(t){return zn(t)}});var hn=A(be=>{"use strict";be.L={bit:1};be.M={bit:0};be.Q={bit:3};be.H={bit:2};function dc(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"l":case"low":return be.L;case"m":case"medium":return be.M;case"q":case"quartile":return be.Q;case"h":case"high":return be.H;default:throw new Error("Unknown EC Level: "+i)}}be.isValid=function(t){return t&&typeof t.bit<"u"&&t.bit>=0&&t.bit<4};be.from=function(t,e){if(be.isValid(t))return t;try{return dc(t)}catch{return e}}});var Qr=A((_m,Xr)=>{"use strict";function Kr(){this.buffer=[],this.length=0}Kr.prototype={get:function(i){let t=Math.floor(i/8);return(this.buffer[t]>>>7-i%8&1)===1},put:function(i,t){for(let e=0;e<t;e++)this.putBit((i>>>t-e-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(i){let t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),i&&(this.buffer[t]|=128>>>this.length%8),this.length++}};Xr.exports=Kr});var eo=A((hm,Zr)=>{"use strict";function wt(i){if(!i||i<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=i,this.data=new Uint8Array(i*i),this.reservedBit=new Uint8Array(i*i)}wt.prototype.set=function(i,t,e,n){let r=i*this.size+t;this.data[r]=e,n&&(this.reservedBit[r]=!0)};wt.prototype.get=function(i,t){return this.data[i*this.size+t]};wt.prototype.xor=function(i,t,e){this.data[i*this.size+t]^=e};wt.prototype.isReserved=function(i,t){return this.reservedBit[i*this.size+t]};Zr.exports=wt});var to=A(vn=>{"use strict";var pc=Re().getSymbolSize;vn.getRowColCoords=function(t){if(t===1)return[];let e=Math.floor(t/7)+2,n=pc(t),r=n===145?26:Math.ceil((n-13)/(2*e-2))*2,c=[n-7];for(let p=1;p<e-1;p++)c[p]=c[p-1]-r;return c.push(6),c.reverse()};vn.getPositions=function(t){let e=[],n=vn.getRowColCoords(t),r=n.length;for(let c=0;c<r;c++)for(let p=0;p<r;p++)c===0&&p===0||c===0&&p===r-1||c===r-1&&p===0||e.push([n[c],n[p]]);return e}});var ro=A(io=>{"use strict";var mc=Re().getSymbolSize,no=7;io.getPositions=function(t){let e=mc(t);return[[0,0],[e-no,0],[0,e-no]]}});var oo=A(U=>{"use strict";U.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var We={N1:3,N2:3,N3:40,N4:10};U.isValid=function(t){return t!=null&&t!==""&&!isNaN(t)&&t>=0&&t<=7};U.from=function(t){return U.isValid(t)?parseInt(t,10):void 0};U.getPenaltyN1=function(t){let e=t.size,n=0,r=0,c=0,p=null,f=null;for(let b=0;b<e;b++){r=c=0,p=f=null;for(let O=0;O<e;O++){let k=t.get(b,O);k===p?r++:(r>=5&&(n+=We.N1+(r-5)),p=k,r=1),k=t.get(O,b),k===f?c++:(c>=5&&(n+=We.N1+(c-5)),f=k,c=1)}r>=5&&(n+=We.N1+(r-5)),c>=5&&(n+=We.N1+(c-5))}return n};U.getPenaltyN2=function(t){let e=t.size,n=0;for(let r=0;r<e-1;r++)for(let c=0;c<e-1;c++){let p=t.get(r,c)+t.get(r,c+1)+t.get(r+1,c)+t.get(r+1,c+1);(p===4||p===0)&&n++}return n*We.N2};U.getPenaltyN3=function(t){let e=t.size,n=0,r=0,c=0;for(let p=0;p<e;p++){r=c=0;for(let f=0;f<e;f++)r=r<<1&2047|t.get(p,f),f>=10&&(r===1488||r===93)&&n++,c=c<<1&2047|t.get(f,p),f>=10&&(c===1488||c===93)&&n++}return n*We.N3};U.getPenaltyN4=function(t){let e=0,n=t.data.length;for(let c=0;c<n;c++)e+=t.data[c];return Math.abs(Math.ceil(e*100/n/5)-10)*We.N4};function uc(i,t,e){switch(i){case U.Patterns.PATTERN000:return(t+e)%2===0;case U.Patterns.PATTERN001:return t%2===0;case U.Patterns.PATTERN010:return e%3===0;case U.Patterns.PATTERN011:return(t+e)%3===0;case U.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(e/3))%2===0;case U.Patterns.PATTERN101:return t*e%2+t*e%3===0;case U.Patterns.PATTERN110:return(t*e%2+t*e%3)%2===0;case U.Patterns.PATTERN111:return(t*e%3+(t+e)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}U.applyMask=function(t,e){let n=e.size;for(let r=0;r<n;r++)for(let c=0;c<n;c++)e.isReserved(c,r)||e.xor(c,r,uc(t,c,r))};U.getBestMask=function(t,e){let n=Object.keys(U.Patterns).length,r=0,c=1/0;for(let p=0;p<n;p++){e(p),U.applyMask(p,t);let f=U.getPenaltyN1(t)+U.getPenaltyN2(t)+U.getPenaltyN3(t)+U.getPenaltyN4(t);U.applyMask(p,t),f<c&&(c=f,r=p)}return r}});var Hn=A($n=>{"use strict";var Ae=hn(),bn=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Cn=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];$n.getBlocksCount=function(t,e){switch(e){case Ae.L:return bn[(t-1)*4+0];case Ae.M:return bn[(t-1)*4+1];case Ae.Q:return bn[(t-1)*4+2];case Ae.H:return bn[(t-1)*4+3];default:return}};$n.getTotalCodewordsCount=function(t,e){switch(e){case Ae.L:return Cn[(t-1)*4+0];case Ae.M:return Cn[(t-1)*4+1];case Ae.Q:return Cn[(t-1)*4+2];case Ae.H:return Cn[(t-1)*4+3];default:return}}});var ao=A(Pn=>{"use strict";var kt=new Uint8Array(512),xn=new Uint8Array(256);(function(){let t=1;for(let e=0;e<255;e++)kt[e]=t,xn[t]=e,t<<=1,t&256&&(t^=285);for(let e=255;e<512;e++)kt[e]=kt[e-255]})();Pn.log=function(t){if(t<1)throw new Error("log("+t+")");return xn[t]};Pn.exp=function(t){return kt[t]};Pn.mul=function(t,e){return t===0||e===0?0:kt[xn[t]+xn[e]]}});var so=A(Et=>{"use strict";var Jn=ao();Et.mul=function(t,e){let n=new Uint8Array(t.length+e.length-1);for(let r=0;r<t.length;r++)for(let c=0;c<e.length;c++)n[r+c]^=Jn.mul(t[r],e[c]);return n};Et.mod=function(t,e){let n=new Uint8Array(t);for(;n.length-e.length>=0;){let r=n[0];for(let p=0;p<e.length;p++)n[p]^=Jn.mul(e[p],r);let c=0;for(;c<n.length&&n[c]===0;)c++;n=n.slice(c)}return n};Et.generateECPolynomial=function(t){let e=new Uint8Array([1]);for(let n=0;n<t;n++)e=Et.mul(e,new Uint8Array([1,Jn.exp(n)]));return e}});var po=A((Sm,lo)=>{"use strict";var co=so();function Yn(i){this.genPoly=void 0,this.degree=i,this.degree&&this.initialize(this.degree)}Yn.prototype.initialize=function(t){this.degree=t,this.genPoly=co.generateECPolynomial(this.degree)};Yn.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");let e=new Uint8Array(t.length+this.degree);e.set(t);let n=co.mod(e,this.genPoly),r=this.degree-n.length;if(r>0){let c=new Uint8Array(this.degree);return c.set(n,r),c}return n};lo.exports=Yn});var Wn=A(mo=>{"use strict";mo.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}});var Kn=A(ke=>{"use strict";var uo="[0-9]+",gc="[A-Z $%*+\\-./:]+",Tt="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Tt=Tt.replace(/u/g,"\\u");var fc="(?:(?![A-Z0-9 $%*+\\-./:]|"+Tt+`)(?:.|[\r
]))+`;ke.KANJI=new RegExp(Tt,"g");ke.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");ke.BYTE=new RegExp(fc,"g");ke.NUMERIC=new RegExp(uo,"g");ke.ALPHANUMERIC=new RegExp(gc,"g");var _c=new RegExp("^"+Tt+"$"),hc=new RegExp("^"+uo+"$"),vc=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");ke.testKanji=function(t){return _c.test(t)};ke.testNumeric=function(t){return hc.test(t)};ke.testAlphanumeric=function(t){return vc.test(t)}});var Ve=A(J=>{"use strict";var bc=Wn(),Xn=Kn();J.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};J.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};J.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};J.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};J.MIXED={bit:-1};J.getCharCountIndicator=function(t,e){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!bc.isValid(e))throw new Error("Invalid version: "+e);return e>=1&&e<10?t.ccBits[0]:e<27?t.ccBits[1]:t.ccBits[2]};J.getBestModeForData=function(t){return Xn.testNumeric(t)?J.NUMERIC:Xn.testAlphanumeric(t)?J.ALPHANUMERIC:Xn.testKanji(t)?J.KANJI:J.BYTE};J.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")};J.isValid=function(t){return t&&t.bit&&t.ccBits};function Cc(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return J.NUMERIC;case"alphanumeric":return J.ALPHANUMERIC;case"kanji":return J.KANJI;case"byte":return J.BYTE;default:throw new Error("Unknown mode: "+i)}}J.from=function(t,e){if(J.isValid(t))return t;try{return Cc(t)}catch{return e}}});var vo=A(Ke=>{"use strict";var yn=Re(),xc=Hn(),go=hn(),Ue=Ve(),Qn=Wn(),_o=7973,fo=yn.getBCHDigit(_o);function Pc(i,t,e){for(let n=1;n<=40;n++)if(t<=Ke.getCapacity(n,e,i))return n}function ho(i,t){return Ue.getCharCountIndicator(i,t)+4}function yc(i,t){let e=0;return i.forEach(function(n){let r=ho(n.mode,t);e+=r+n.getBitsLength()}),e}function Sc(i,t){for(let e=1;e<=40;e++)if(yc(i,e)<=Ke.getCapacity(e,t,Ue.MIXED))return e}Ke.from=function(t,e){return Qn.isValid(t)?parseInt(t,10):e};Ke.getCapacity=function(t,e,n){if(!Qn.isValid(t))throw new Error("Invalid QR Code version");typeof n>"u"&&(n=Ue.BYTE);let r=yn.getSymbolTotalCodewords(t),c=xc.getTotalCodewordsCount(t,e),p=(r-c)*8;if(n===Ue.MIXED)return p;let f=p-ho(n,t);switch(n){case Ue.NUMERIC:return Math.floor(f/10*3);case Ue.ALPHANUMERIC:return Math.floor(f/11*2);case Ue.KANJI:return Math.floor(f/13);case Ue.BYTE:default:return Math.floor(f/8)}};Ke.getBestVersionForData=function(t,e){let n,r=go.from(e,go.M);if(Array.isArray(t)){if(t.length>1)return Sc(t,r);if(t.length===0)return 1;n=t[0]}else n=t;return Pc(n.mode,n.getLength(),r)};Ke.getEncodedBits=function(t){if(!Qn.isValid(t)||t<7)throw new Error("Invalid QR Code version");let e=t<<12;for(;yn.getBCHDigit(e)-fo>=0;)e^=_o<<yn.getBCHDigit(e)-fo;return t<<12|e}});var Po=A(xo=>{"use strict";var Zn=Re(),Co=1335,Ic=21522,bo=Zn.getBCHDigit(Co);xo.getEncodedBits=function(t,e){let n=t.bit<<3|e,r=n<<10;for(;Zn.getBCHDigit(r)-bo>=0;)r^=Co<<Zn.getBCHDigit(r)-bo;return(n<<10|r)^Ic}});var So=A((Em,yo)=>{"use strict";var Oc=Ve();function mt(i){this.mode=Oc.NUMERIC,this.data=i.toString()}mt.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};mt.prototype.getLength=function(){return this.data.length};mt.prototype.getBitsLength=function(){return mt.getBitsLength(this.data.length)};mt.prototype.write=function(t){let e,n,r;for(e=0;e+3<=this.data.length;e+=3)n=this.data.substr(e,3),r=parseInt(n,10),t.put(r,10);let c=this.data.length-e;c>0&&(n=this.data.substr(e),r=parseInt(n,10),t.put(r,c*3+1))};yo.exports=mt});var Oo=A((Tm,Io)=>{"use strict";var Mc=Ve(),ei=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function ut(i){this.mode=Mc.ALPHANUMERIC,this.data=i}ut.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};ut.prototype.getLength=function(){return this.data.length};ut.prototype.getBitsLength=function(){return ut.getBitsLength(this.data.length)};ut.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let n=ei.indexOf(this.data[e])*45;n+=ei.indexOf(this.data[e+1]),t.put(n,11)}this.data.length%2&&t.put(ei.indexOf(this.data[e]),6)};Io.exports=ut});var wo=A((Dm,Mo)=>{"use strict";Mo.exports=function(t){for(var e=[],n=t.length,r=0;r<n;r++){var c=t.charCodeAt(r);if(c>=55296&&c<=56319&&n>r+1){var p=t.charCodeAt(r+1);p>=56320&&p<=57343&&(c=(c-55296)*1024+p-56320+65536,r+=1)}if(c<128){e.push(c);continue}if(c<2048){e.push(c>>6|192),e.push(c&63|128);continue}if(c<55296||c>=57344&&c<65536){e.push(c>>12|224),e.push(c>>6&63|128),e.push(c&63|128);continue}if(c>=65536&&c<=1114111){e.push(c>>18|240),e.push(c>>12&63|128),e.push(c>>6&63|128),e.push(c&63|128);continue}e.push(239,191,189)}return new Uint8Array(e).buffer}});var Eo=A((Fm,ko)=>{"use strict";var wc=wo(),kc=Ve();function gt(i){this.mode=kc.BYTE,typeof i=="string"&&(i=wc(i)),this.data=new Uint8Array(i)}gt.getBitsLength=function(t){return t*8};gt.prototype.getLength=function(){return this.data.length};gt.prototype.getBitsLength=function(){return gt.getBitsLength(this.data.length)};gt.prototype.write=function(i){for(let t=0,e=this.data.length;t<e;t++)i.put(this.data[t],8)};ko.exports=gt});var Do=A((Nm,To)=>{"use strict";var Ec=Ve(),Tc=Re();function ft(i){this.mode=Ec.KANJI,this.data=i}ft.getBitsLength=function(t){return t*13};ft.prototype.getLength=function(){return this.data.length};ft.prototype.getBitsLength=function(){return ft.getBitsLength(this.data.length)};ft.prototype.write=function(i){let t;for(t=0;t<this.data.length;t++){let e=Tc.toSJIS(this.data[t]);if(e>=33088&&e<=40956)e-=33088;else if(e>=57408&&e<=60351)e-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);e=(e>>>8&255)*192+(e&255),i.put(e,13)}};To.exports=ft});var Fo=A((Bm,ti)=>{"use strict";var Dt={single_source_shortest_paths:function(i,t,e){var n={},r={};r[t]=0;var c=Dt.PriorityQueue.make();c.push(t,0);for(var p,f,b,O,k,R,T,me,ue;!c.empty();){p=c.pop(),f=p.value,O=p.cost,k=i[f]||{};for(b in k)k.hasOwnProperty(b)&&(R=k[b],T=O+R,me=r[b],ue=typeof r[b]>"u",(ue||me>T)&&(r[b]=T,c.push(b,T),n[b]=f))}if(typeof e<"u"&&typeof r[e]>"u"){var ge=["Could not find a path from ",t," to ",e,"."].join("");throw new Error(ge)}return n},extract_shortest_path_from_predecessor_list:function(i,t){for(var e=[],n=t,r;n;)e.push(n),r=i[n],n=i[n];return e.reverse(),e},find_path:function(i,t,e){var n=Dt.single_source_shortest_paths(i,t,e);return Dt.extract_shortest_path_from_predecessor_list(n,e)},PriorityQueue:{make:function(i){var t=Dt.PriorityQueue,e={},n;i=i||{};for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e.queue=[],e.sorter=i.sorter||t.default_sorter,e},default_sorter:function(i,t){return i.cost-t.cost},push:function(i,t){var e={value:i,cost:t};this.queue.push(e),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof ti<"u"&&(ti.exports=Dt)});var qo=A(_t=>{"use strict";var B=Ve(),Ro=So(),Ao=Oo(),Vo=Eo(),Uo=Do(),Ft=Kn(),Sn=Re(),Dc=Fo();function No(i){return unescape(encodeURIComponent(i)).length}function Nt(i,t,e){let n=[],r;for(;(r=i.exec(e))!==null;)n.push({data:r[0],index:r.index,mode:t,length:r[0].length});return n}function Lo(i){let t=Nt(Ft.NUMERIC,B.NUMERIC,i),e=Nt(Ft.ALPHANUMERIC,B.ALPHANUMERIC,i),n,r;return Sn.isKanjiModeEnabled()?(n=Nt(Ft.BYTE,B.BYTE,i),r=Nt(Ft.KANJI,B.KANJI,i)):(n=Nt(Ft.BYTE_KANJI,B.BYTE,i),r=[]),t.concat(e,n,r).sort(function(p,f){return p.index-f.index}).map(function(p){return{data:p.data,mode:p.mode,length:p.length}})}function ni(i,t){switch(t){case B.NUMERIC:return Ro.getBitsLength(i);case B.ALPHANUMERIC:return Ao.getBitsLength(i);case B.KANJI:return Uo.getBitsLength(i);case B.BYTE:return Vo.getBitsLength(i)}}function Fc(i){return i.reduce(function(t,e){let n=t.length-1>=0?t[t.length-1]:null;return n&&n.mode===e.mode?(t[t.length-1].data+=e.data,t):(t.push(e),t)},[])}function Nc(i){let t=[];for(let e=0;e<i.length;e++){let n=i[e];switch(n.mode){case B.NUMERIC:t.push([n,{data:n.data,mode:B.ALPHANUMERIC,length:n.length},{data:n.data,mode:B.BYTE,length:n.length}]);break;case B.ALPHANUMERIC:t.push([n,{data:n.data,mode:B.BYTE,length:n.length}]);break;case B.KANJI:t.push([n,{data:n.data,mode:B.BYTE,length:No(n.data)}]);break;case B.BYTE:t.push([{data:n.data,mode:B.BYTE,length:No(n.data)}])}}return t}function Bc(i,t){let e={},n={start:{}},r=["start"];for(let c=0;c<i.length;c++){let p=i[c],f=[];for(let b=0;b<p.length;b++){let O=p[b],k=""+c+b;f.push(k),e[k]={node:O,lastCount:0},n[k]={};for(let R=0;R<r.length;R++){let T=r[R];e[T]&&e[T].node.mode===O.mode?(n[T][k]=ni(e[T].lastCount+O.length,O.mode)-ni(e[T].lastCount,O.mode),e[T].lastCount+=O.length):(e[T]&&(e[T].lastCount=O.length),n[T][k]=ni(O.length,O.mode)+4+B.getCharCountIndicator(O.mode,t))}}r=f}for(let c=0;c<r.length;c++)n[r[c]].end=0;return{map:n,table:e}}function Bo(i,t){let e,n=B.getBestModeForData(i);if(e=B.from(t,n),e!==B.BYTE&&e.bit<n.bit)throw new Error('"'+i+'" cannot be encoded with mode '+B.toString(e)+`.
 Suggested mode is: `+B.toString(n));switch(e===B.KANJI&&!Sn.isKanjiModeEnabled()&&(e=B.BYTE),e){case B.NUMERIC:return new Ro(i);case B.ALPHANUMERIC:return new Ao(i);case B.KANJI:return new Uo(i);case B.BYTE:return new Vo(i)}}_t.fromArray=function(t){return t.reduce(function(e,n){return typeof n=="string"?e.push(Bo(n,null)):n.data&&e.push(Bo(n.data,n.mode)),e},[])};_t.fromString=function(t,e){let n=Lo(t,Sn.isKanjiModeEnabled()),r=Nc(n),c=Bc(r,e),p=Dc.find_path(c.map,"start","end"),f=[];for(let b=1;b<p.length-1;b++)f.push(c.table[p[b]].node);return _t.fromArray(Fc(f))};_t.rawSplit=function(t){return _t.fromArray(Lo(t,Sn.isKanjiModeEnabled()))}});var jo=A(Go=>{"use strict";var On=Re(),ii=hn(),Rc=Qr(),Ac=eo(),Vc=to(),Uc=ro(),ai=oo(),si=Hn(),Lc=po(),In=vo(),qc=Po(),Gc=Ve(),ri=qo();function jc(i,t){let e=i.size,n=Uc.getPositions(t);for(let r=0;r<n.length;r++){let c=n[r][0],p=n[r][1];for(let f=-1;f<=7;f++)if(!(c+f<=-1||e<=c+f))for(let b=-1;b<=7;b++)p+b<=-1||e<=p+b||(f>=0&&f<=6&&(b===0||b===6)||b>=0&&b<=6&&(f===0||f===6)||f>=2&&f<=4&&b>=2&&b<=4?i.set(c+f,p+b,!0,!0):i.set(c+f,p+b,!1,!0))}}function zc(i){let t=i.size;for(let e=8;e<t-8;e++){let n=e%2===0;i.set(e,6,n,!0),i.set(6,e,n,!0)}}function $c(i,t){let e=Vc.getPositions(t);for(let n=0;n<e.length;n++){let r=e[n][0],c=e[n][1];for(let p=-2;p<=2;p++)for(let f=-2;f<=2;f++)p===-2||p===2||f===-2||f===2||p===0&&f===0?i.set(r+p,c+f,!0,!0):i.set(r+p,c+f,!1,!0)}}function Hc(i,t){let e=i.size,n=In.getEncodedBits(t),r,c,p;for(let f=0;f<18;f++)r=Math.floor(f/3),c=f%3+e-8-3,p=(n>>f&1)===1,i.set(r,c,p,!0),i.set(c,r,p,!0)}function oi(i,t,e){let n=i.size,r=qc.getEncodedBits(t,e),c,p;for(c=0;c<15;c++)p=(r>>c&1)===1,c<6?i.set(c,8,p,!0):c<8?i.set(c+1,8,p,!0):i.set(n-15+c,8,p,!0),c<8?i.set(8,n-c-1,p,!0):c<9?i.set(8,15-c-1+1,p,!0):i.set(8,15-c-1,p,!0);i.set(n-8,8,1,!0)}function Jc(i,t){let e=i.size,n=-1,r=e-1,c=7,p=0;for(let f=e-1;f>0;f-=2)for(f===6&&f--;;){for(let b=0;b<2;b++)if(!i.isReserved(r,f-b)){let O=!1;p<t.length&&(O=(t[p]>>>c&1)===1),i.set(r,f-b,O),c--,c===-1&&(p++,c=7)}if(r+=n,r<0||e<=r){r-=n,n=-n;break}}}function Yc(i,t,e){let n=new Rc;e.forEach(function(b){n.put(b.mode.bit,4),n.put(b.getLength(),Gc.getCharCountIndicator(b.mode,i)),b.write(n)});let r=On.getSymbolTotalCodewords(i),c=si.getTotalCodewordsCount(i,t),p=(r-c)*8;for(n.getLengthInBits()+4<=p&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);let f=(p-n.getLengthInBits())/8;for(let b=0;b<f;b++)n.put(b%2?17:236,8);return Wc(n,i,t)}function Wc(i,t,e){let n=On.getSymbolTotalCodewords(t),r=si.getTotalCodewordsCount(t,e),c=n-r,p=si.getBlocksCount(t,e),f=n%p,b=p-f,O=Math.floor(n/p),k=Math.floor(c/p),R=k+1,T=O-k,me=new Lc(T),ue=0,ge=new Array(p),ui=new Array(p),Tn=0,ia=new Uint8Array(i.buffer);for(let Ze=0;Ze<p;Ze++){let Fn=Ze<b?k:R;ge[Ze]=ia.slice(ue,ue+Fn),ui[Ze]=me.encode(ge[Ze]),ue+=Fn,Tn=Math.max(Tn,Fn)}let Dn=new Uint8Array(n),gi=0,Oe,Me;for(Oe=0;Oe<Tn;Oe++)for(Me=0;Me<p;Me++)Oe<ge[Me].length&&(Dn[gi++]=ge[Me][Oe]);for(Oe=0;Oe<T;Oe++)for(Me=0;Me<p;Me++)Dn[gi++]=ui[Me][Oe];return Dn}function Kc(i,t,e,n){let r;if(Array.isArray(i))r=ri.fromArray(i);else if(typeof i=="string"){let O=t;if(!O){let k=ri.rawSplit(i);O=In.getBestVersionForData(k,e)}r=ri.fromString(i,O||40)}else throw new Error("Invalid data");let c=In.getBestVersionForData(r,e);if(!c)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=c;else if(t<c)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+c+`.
`);let p=Yc(t,e,r),f=On.getSymbolSize(t),b=new Ac(f);return jc(b,t),zc(b),$c(b,t),oi(b,e,0),t>=7&&Hc(b,t),Jc(b,p),isNaN(n)&&(n=ai.getBestMask(b,oi.bind(null,b,e))),ai.applyMask(n,b),oi(b,e,n),{modules:b,version:t,errorCorrectionLevel:e,maskPattern:n,segments:r}}Go.create=function(t,e){if(typeof t>"u"||t==="")throw new Error("No input text");let n=ii.M,r,c;return typeof e<"u"&&(n=ii.from(e.errorCorrectionLevel,ii.M),r=In.from(e.version),c=ai.from(e.maskPattern),e.toSJISFunc&&On.setToSJISFunction(e.toSJISFunc)),Kc(t,r,n,c)}});var ci=A(Xe=>{"use strict";function zo(i){if(typeof i=="number"&&(i=i.toString()),typeof i!="string")throw new Error("Color should be defined as hex string");let t=i.slice().replace("#","").split("");if(t.length<3||t.length===5||t.length>8)throw new Error("Invalid hex color: "+i);(t.length===3||t.length===4)&&(t=Array.prototype.concat.apply([],t.map(function(n){return[n,n]}))),t.length===6&&t.push("F","F");let e=parseInt(t.join(""),16);return{r:e>>24&255,g:e>>16&255,b:e>>8&255,a:e&255,hex:"#"+t.slice(0,6).join("")}}Xe.getOptions=function(t){t||(t={}),t.color||(t.color={});let e=typeof t.margin>"u"||t.margin===null||t.margin<0?4:t.margin,n=t.width&&t.width>=21?t.width:void 0,r=t.scale||4;return{width:n,scale:n?4:r,margin:e,color:{dark:zo(t.color.dark||"#000000ff"),light:zo(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}};Xe.getScale=function(t,e){return e.width&&e.width>=t+e.margin*2?e.width/(t+e.margin*2):e.scale};Xe.getImageWidth=function(t,e){let n=Xe.getScale(t,e);return Math.floor((t+e.margin*2)*n)};Xe.qrToImageData=function(t,e,n){let r=e.modules.size,c=e.modules.data,p=Xe.getScale(r,n),f=Math.floor((r+n.margin*2)*p),b=n.margin*p,O=[n.color.light,n.color.dark];for(let k=0;k<f;k++)for(let R=0;R<f;R++){let T=(k*f+R)*4,me=n.color.light;if(k>=b&&R>=b&&k<f-b&&R<f-b){let ue=Math.floor((k-b)/p),ge=Math.floor((R-b)/p);me=O[c[ue*r+ge]?1:0]}t[T++]=me.r,t[T++]=me.g,t[T++]=me.b,t[T]=me.a}}});var $o=A(Mn=>{"use strict";var li=ci();function Xc(i,t,e){i.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=e,t.width=e,t.style.height=e+"px",t.style.width=e+"px"}function Qc(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}Mn.render=function(t,e,n){let r=n,c=e;typeof r>"u"&&(!e||!e.getContext)&&(r=e,e=void 0),e||(c=Qc()),r=li.getOptions(r);let p=li.getImageWidth(t.modules.size,r),f=c.getContext("2d"),b=f.createImageData(p,p);return li.qrToImageData(b.data,t,r),Xc(f,c,p),f.putImageData(b,0,0),c};Mn.renderToDataURL=function(t,e,n){let r=n;typeof r>"u"&&(!e||!e.getContext)&&(r=e,e=void 0),r||(r={});let c=Mn.render(t,e,r),p=r.type||"image/png",f=r.rendererOpts||{};return c.toDataURL(p,f.quality)}});var Yo=A(Jo=>{"use strict";var Zc=ci();function Ho(i,t){let e=i.a/255,n=t+'="'+i.hex+'"';return e<1?n+" "+t+'-opacity="'+e.toFixed(2).slice(1)+'"':n}function di(i,t,e){let n=i+t;return typeof e<"u"&&(n+=" "+e),n}function el(i,t,e){let n="",r=0,c=!1,p=0;for(let f=0;f<i.length;f++){let b=Math.floor(f%t),O=Math.floor(f/t);!b&&!c&&(c=!0),i[f]?(p++,f>0&&b>0&&i[f-1]||(n+=c?di("M",b+e,.5+O+e):di("m",r,0),r=0,c=!1),b+1<t&&i[f+1]||(n+=di("h",p),p=0)):r++}return n}Jo.render=function(t,e,n){let r=Zc.getOptions(e),c=t.modules.size,p=t.modules.data,f=c+r.margin*2,b=r.color.light.a?"<path "+Ho(r.color.light,"fill")+' d="M0 0h'+f+"v"+f+'H0z"/>':"",O="<path "+Ho(r.color.dark,"stroke")+' d="'+el(p,c,r.margin)+'"/>',k='viewBox="0 0 '+f+" "+f+'"',T='<svg xmlns="http://www.w3.org/2000/svg" '+(r.width?'width="'+r.width+'" height="'+r.width+'" ':"")+k+' shape-rendering="crispEdges">'+b+O+`</svg>
`;return typeof n=="function"&&n(null,T),T}});var Ko=A(Bt=>{"use strict";var tl=Wr(),pi=jo(),Wo=$o(),nl=Yo();function mi(i,t,e,n,r){let c=[].slice.call(arguments,1),p=c.length,f=typeof c[p-1]=="function";if(!f&&!tl())throw new Error("Callback required as last argument");if(f){if(p<2)throw new Error("Too few arguments provided");p===2?(r=e,e=t,t=n=void 0):p===3&&(t.getContext&&typeof r>"u"?(r=n,n=void 0):(r=n,n=e,e=t,t=void 0))}else{if(p<1)throw new Error("Too few arguments provided");return p===1?(e=t,t=n=void 0):p===2&&!t.getContext&&(n=e,e=t,t=void 0),new Promise(function(b,O){try{let k=pi.create(e,n);b(i(k,t,n))}catch(k){O(k)}})}try{let b=pi.create(e,n);r(null,i(b,t,n))}catch(b){r(b)}}Bt.create=pi.create;Bt.toCanvas=mi.bind(null,Wo.render);Bt.toDataURL=mi.bind(null,Wo.renderToDataURL);Bt.toString=mi.bind(null,function(i,t,e){return nl.render(i,e)})});var qe=(e=>(e.PROVIDER="PROVIDER",e.CUSTOMER="CUSTOMER",e))(qe||{});var le=class i{constructor(t,e){this._http=t;this.authService=e}viewType$=new zt("PROVIDER_VIEW");cachedProduct=[];selectedProductForView;submitRegister(t){this._http.post("",t)}getCategories(t){return this._http.get(D.PROVIDER_INFO.GET_CATEGORIES+`/${t}`)}getProductByCategory(t,e){let n=Sr({provider_id:t,category_id:e});return this._http.get(D.PROVIDER_INFO.GET_PRODUCTS+`?${n}`)}getProviderDetails(t){return this._http.get(D.PROVIDER_INFO.PROVIDER_URL+`/${t}`)}getProviderSettings(t){return this._http.get(`${D.PROVIDER_INFO.PROVIDER_SETTINGS}/${t}`)}updateProviderSettings(t){return this._http.post("provider-settings/",t)}getSlots(t,e,n,r=0,c=10){let p=`${t}/slots?provider_id=${e}&offset=${r}&limit=${c}`;return n!=null&&(p+=`&product_id=${n}`),this._http.get(p)}getServiceSlotAvailability(t,e,n){let r=`serviceSlots/availability/${t}?product_id=${e}&date=${n}`;return this._http.get(r)}registerProvider(t){return this._http.post(D.PROVIDER_INFO.PROVIDER_REGISTER,t)}getProductDetails(t){return this._http.get(D.PROVIDER_INFO.GET_PRODUCTS+`/${t}`)}getSubscriptionListForProvider(t){return this._http.get(D.PROVIDER_INFO.GET_SUBSCRIPTION_LIST+`?provider_id=${t}`)}createSubscription(t){return this._http.post(D.PROVIDER_INFO.CREATE_SUBSCRIPTION,t)}updateSubscription(t,e){return this._http.put(`${D.PROVIDER_INFO.GET_SUBSCRIPTION_LIST}${e}`,t)}static \u0275fac=function(e){return new(e||i)($(oe),$(H))};static \u0275prov=K({token:i,factory:i.\u0275fac,providedIn:"root"})};var dt=class i{dataSource=new zt(null);data$=this.dataSource.asObservable();setData(t){this.dataSource.next(t)}getData(){return this.dataSource.getValue()}static \u0275fac=function(e){return new(e||i)};static \u0275prov=K({token:i,factory:i.\u0275fac,providedIn:"root"})};var sn=class i extends at{constructor(e,n){let r=n.getSelectedProviderId(),c=D.PRODUCT.LIST.replace("_PROVIDER_ID_",r.toString()),p={create:D.PRODUCT.URL,update:D.PRODUCT.URL,list:c,delete:D.PRODUCT.URL};super(e,"product_id",p,"products");this.authServ=n}static \u0275fac=function(n){return new(n||i)($(oe),$(H))};static \u0275prov=K({token:i,factory:i.\u0275fac,providedIn:"root"})};var cn=class i extends at{constructor(e,n){let r=n.getSelectedProviderId(),c=i.getUrlObj(r);super(e,"card_id",c,"membership");this.authServ=n}list(){return this.setUrl(i.getUrlObj(this.authServ.getSelectedProviderId())),super.list()}listByProviderId(e){return this.setUrl(i.getUrlObj(e)),super.list()}static getUrlObj(e){let n=D.CARD.LIST.replace("_PROVIDER_ID_",e.toString());return{create:D.CARD.URL,update:D.CARD.URL,list:n,delete:D.CARD.URL}}static \u0275fac=function(n){return new(n||i)($(oe),$(H))};static \u0275prov=K({token:i,factory:i.\u0275fac,providedIn:"root"})};var ln=class i{constructor(t){this.http=t}getSubscriptionProducts(t,e,n=0,r=10,c="subscription",p="service_subscription"){let f=`provider/${t}/products?`,b=[];return e&&b.push(`search=${encodeURIComponent(e)}`),b.push("visibility=true"),b.push(`skip=${n}`),b.push(`limit=${r}`),b.push(`product_type=${c}`),b.push(`product_subtype=${p}`),f+=b.join("&"),this.http.get(f).pipe(_i(O=>({status:!0,data:O})))}getSubscriptionProduct(t){return this.http.get(`provider/products/${t}`)}static \u0275fac=function(e){return new(e||i)($(oe))};static \u0275prov=K({token:i,factory:i.\u0275fac,providedIn:"root"})};function ca(i,t){i&1&&(s(0,"h2",10),l(1),u(2,"translate"),o()),i&2&&(a(),v(g(2,1,"providerInfo.subscription.registration_form")))}function la(i,t){i&1&&(s(0,"small"),l(1),u(2,"translate"),o()),i&2&&(a(),v(g(2,1,"providerInfo.subscription.name_required")))}function da(i,t){i&1&&(s(0,"small"),l(1),u(2,"translate"),o()),i&2&&(a(),v(g(2,1,"providerInfo.subscription.name_min")))}function pa(i,t){if(i&1&&(s(0,"div"),_(1,la,3,3,"small",5)(2,da,3,3,"small",5),o()),i&2){let e,n,r=m();a(),d("ngIf",(e=r.registerForm.get("member_name"))==null||e.errors==null?null:e.errors.required),a(),d("ngIf",(n=r.registerForm.get("member_name"))==null||n.errors==null?null:n.errors.minlength)}}function ma(i,t){i&1&&(s(0,"small"),l(1),u(2,"translate"),o()),i&2&&(a(),v(g(2,1,"providerInfo.subscription.mobile_required")))}function ua(i,t){if(i&1&&(s(0,"div"),_(1,ma,3,3,"small",5),o()),i&2){let e,n=m();a(),d("ngIf",(e=n.registerForm.get("mobile_number"))==null||e.errors==null?null:e.errors.required)}}function ga(i,t){if(i&1&&(s(0,"small"),l(1),o()),i&2){let e=m(2).$implicit;a(),S("",e.name," is required.")}}function fa(i,t){if(i&1&&(s(0,"div"),_(1,ga,2,1,"small",5),o()),i&2){let e,n=m().$implicit,r=m();a(),d("ngIf",(e=r.registerForm.get(n.name))==null||e.errors==null?null:e.errors.required)}}function _a(i,t){if(i&1&&(s(0,"div")(1,"label",11),l(2),o(),h(3,"input",12),_(4,fa,2,1,"div",5),o()),i&2){let e,n=t.$implicit,r=m();a(),V("for",n.name),a(),v(n.name),a(),V("id",n.name),V("placeholder",n.name),V("formControlName",n.name),a(),d("ngIf",((e=r.registerForm.get(n.name))==null?null:e.invalid)&&((e=r.registerForm.get(n.name))==null?null:e.touched))}}var je=class i{constructor(t,e,n){this.fb=t;this._setupRegistrationService=e;this.translate=n;this.registerForm=this.fb.group({member_name:["",[M.required,M.minLength(2)]],mobile_number:["",[M.required]]})}ngOnInit(){this.getResgisterFormFields()}registerForm;providerId;isProvider=!1;extrafields=[];registerBtn=new ie;onSubmit(){this.registerForm.valid?this.registerBtn.emit(this.registerForm.value):this.registerForm.markAllAsTouched()}getResgisterFormFields(){this.providerId&&this._setupRegistrationService.getRegisteredForm("user",this.providerId).subscribe(t=>{t.forEach(e=>{e.form_data.forEach(n=>{n.elements.forEach(r=>{r.display_for_user&&(this.registerForm.addControl(r.label_name,this.fb.control("",[M.required])),this.extrafields.push({name:r.label_name}))})})})})}static \u0275fac=function(e){return new(e||i)(y(te),y(st),y(Se))};static \u0275cmp=w({type:i,selectors:[["app-register-subscription"]],inputs:{providerId:"providerId",isProvider:"isProvider"},outputs:{registerBtn:"registerBtn"},decls:21,vars:21,consts:[[1,"container"],["class","title",4,"ngIf"],[1,"form",3,"ngSubmit","formGroup"],["for","name"],["pInputText","","id","name","formControlName","member_name",3,"placeholder"],[4,"ngIf"],["for","mobile_number"],["pInputText","","type","tel","id","mobile_number","formControlName","mobile_number",3,"placeholder"],[4,"ngFor","ngForOf"],["pButton","","pRipple","","type","submit",1,"p-button-success","submit-btn",3,"disabled"],[1,"title"],[3,"for"],["pInputText","",3,"id","placeholder","formControlName"]],template:function(e,n){if(e&1&&(s(0,"div",0),_(1,ca,3,3,"h2",1),s(2,"form",2),C("ngSubmit",function(){return n.onSubmit()}),s(3,"div")(4,"label",3),l(5),u(6,"translate"),o(),h(7,"input",4),u(8,"translate"),_(9,pa,3,2,"div",5),o(),s(10,"div")(11,"label",6),l(12),u(13,"translate"),o(),h(14,"input",7),u(15,"translate"),_(16,ua,2,1,"div",5),o(),_(17,_a,5,6,"div",8),s(18,"button",9),l(19),u(20,"translate"),o()()()),e&2){let r,c;a(),d("ngIf",!n.isProvider),a(),d("formGroup",n.registerForm),a(3),v(g(6,11,"providerInfo.subscription.name")),a(2),V("placeholder",g(8,13,"providerInfo.subscription.name")),a(2),d("ngIf",((r=n.registerForm.get("member_name"))==null?null:r.invalid)&&((r=n.registerForm.get("member_name"))==null?null:r.touched)),a(3),v(g(13,15,"providerInfo.subscription.mobile_number")),a(2),V("placeholder",g(15,17,"providerInfo.subscription.mobile_placeholder")),a(2),d("ngIf",((c=n.registerForm.get("mobile_number"))==null?null:c.invalid)&&((c=n.registerForm.get("mobile_number"))==null?null:c.touched)),a(),d("ngForOf",n.extrafields),a(),d("disabled",n.registerForm.invalid),a(),S(" ",g(20,19,"providerInfo.subscription.submit")," ")}},dependencies:[G,E,Ne,ct,ve,Q,j,Z,Fe,ee,re,N],styles:['.container[_ngcontent-%COMP%]{max-width:400px;margin:20px auto;padding:0 1.25rem}.container[_ngcontent-%COMP%]   h2.title[_ngcontent-%COMP%]{position:relative;font-size:1.5rem;color:#5d157c;font-weight:700;width:fit-content;margin:auto}.container[_ngcontent-%COMP%]   h2.title[_ngcontent-%COMP%]:before{content:" ";border-bottom:.313rem solid #5d157c;position:absolute;height:100%;width:55%;left:-.5rem;padding:1.375rem}.container[_ngcontent-%COMP%]   h2.title[_ngcontent-%COMP%]:after{content:" ";border-bottom:.313rem solid #f9f2fd;position:absolute;height:100%;width:55%;right:-.5rem;padding:1.375rem}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-top:2rem}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1rem;color:#5d157c;font-weight:700}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#f9f2fd}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   p-dropdown[_ngcontent-%COMP%]    >div{background-color:#f9f2fd;width:100%}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button.submit-btn[_ngcontent-%COMP%]{background-color:#5d157c;width:100%;color:#fff;justify-content:center}label[_ngcontent-%COMP%]{display:block;margin:10px 0 5px}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{width:100%;padding:8px;margin-bottom:10px}small[_ngcontent-%COMP%]{color:red;font-size:12px}']})};var pt=class i{constructor(t){this.http=t}createOrUpdate(t,e){return e?(t.group_id=e,this.updateGroup(t)):this.createGroup(t)}createGroup(t){return this.http.post(D.GROUP.URL,t)}updateGroup(t){return this.http.put(D.GROUP.URL,t)}listGroup(t,e){let n=D.GROUP.LIST.replace("_PROVIDER_ID_",t.toString());if(e){let r=Object.entries(e).map(([c,p])=>`${encodeURIComponent(c)}=${encodeURIComponent(p)}`).join("&");n=n.endsWith("/")?n.slice(0,-1):n,n+="?"+r}return this.http.get(n)}listGroupOnProduct(t,e){let n=D.GROUP.GROUP_LIST.replace("_PROVIDER_ID_",t.toString()).replace("_PRODUCT_ID_",e.toString());return this.http.get(n)}delete(t){return this.http.delete(`${D.GROUP.URL}/${t}`)}static \u0275fac=function(e){return new(e||i)($(oe))};static \u0275prov=K({token:i,factory:i.\u0275fac,providedIn:"root"})};function va(i,t){i&1&&(s(0,"h2",12),l(1),u(2,"translate"),o()),i&2&&(a(),v(g(2,1,"providerInfo.subscription.select_plan")))}function ba(i,t){if(i&1&&(s(0,"div",13)(1,"small",14),l(2),o()()),i&2){let e=m();a(2),v(e.errorMessage)}}function Ca(i,t){if(i&1&&(s(0,"div",15)(1,"small",16),l(2),o()()),i&2){let e=m();a(2),v(e.successMessage)}}function xa(i,t){i&1&&(s(0,"div")(1,"small"),l(2),u(3,"translate"),o()()),i&2&&(a(2),v(g(3,1,"providerInfo.subscription.group_required")))}function Pa(i,t){if(i&1&&(L(0),s(1,"mat-radio-button",17)(2,"div",18)(3,"div",19),l(4),o(),s(5,"div"),l(6),o(),s(7,"div"),l(8),o()()(),q()),i&2){let e=t.$implicit;a(),d("value",e.id),a(3),Y("",e.price," / ",e.billing_type,""),a(2),v(e.name),a(2),v(e.description)}}function ya(i,t){i&1&&(s(0,"span"),l(1),u(2,"translate"),o()),i&2&&(a(),v(g(2,1,"providerInfo.subscription.submit")))}function Sa(i,t){i&1&&(s(0,"span"),l(1),u(2,"translate"),o()),i&2&&(a(),v(g(2,1,"providerInfo.subscription.creating_order")))}var ze=class i{constructor(t,e,n,r,c){this._route=t;this.fb=e;this._groupService=n;this._setupRegistrationService=r;this.translate=c;this.registerForm=this.fb.group({group:["",M.required],plan:["",M.required]})}providerId;isProvider=!1;selectedProduct;selectedGroupId;isCreatingOrder=!1;errorMessage="";successMessage="";ngOnInit(){}ngOnChanges(t){t.selectedProduct&&t.selectedProduct.currentValue&&this.handleSelectedProduct()}registerForm;plans=[];filteredPlans=[];groups=[];registerBtn=new ie;onSubmit(){if(console.log("Select Plan: onSubmit called"),!this.registerForm.valid){console.error("Form is not valid");return}let t=this.filteredPlans.find(r=>r.id===this.registerForm.get("plan")?.value),e=this.registerForm.get("group")?.value;if(!t||!e){console.error("Plan or group not selected");return}let n={plan:t,group:e,selectedProduct:this.selectedProduct};if(this._route.url.includes("customers")){console.log("Navigating to customers checkout");let r={isProvider:!1,data:n};sessionStorage.setItem("checkout_navigation_state",JSON.stringify(r)),this._route.navigate(["customers/info/view-cart"],{state:r})}else{console.log("Navigating to providers checkout");let r={isProvider:!0,data:n};sessionStorage.setItem("checkout_navigation_state",JSON.stringify(r)),this._route.navigate(["providers/info/view-cart"],{state:r})}}onProviderSubmit(){if(console.log("Select Plan: onProviderSubmit called"),!this.registerForm.valid){console.error("Form is not valid in onProviderSubmit");return}let t=this.filteredPlans.find(c=>c.id===this.registerForm.get("plan")?.value),e=this.registerForm.get("group")?.value;if(!t||!e){console.error("Plan or group not selected in onProviderSubmit");return}let n={plan:t,group:e,selectedProduct:this.selectedProduct};console.log("Provider Submit: Payload-->",n);let r={isProvider:this.isProvider,data:n};sessionStorage.setItem("checkout_navigation_state",JSON.stringify(r)),console.log("Select Plan: Stored navigation state in sessionStorage:",r),this._route.navigate(["providers/info/view-cart"],{state:r})}getGroups(){this.selectedProduct&&this.providerId!==void 0?this._groupService.listGroupOnProduct(this.providerId,this.selectedProduct.product_id).subscribe({next:t=>{this.groups=t||[],console.log("Groups fetched:",this.groups),this.groups.length===1&&(this.registerForm.get("group")?.setValue(this.groups[0].group_id),this.groupChanged())},error:t=>{console.error("Error fetching groups",t),this.groups=[]}}):this.groups=[]}getPlans(){this.providerId&&this.selectedGroupId?this._setupRegistrationService.getSubscriptionPlan(this.providerId,this.selectedGroupId).subscribe(t=>{this.plans=t,this.filteredPlans=t,console.log(t)}):(this.plans=[],this.filteredPlans=[])}groupChanged(){let t=this.registerForm.get("group")?.value;this.selectedGroupId=t,this.getPlans()}handleSelectedProduct(){this.selectedProduct&&(console.log("Selected Product in Select Plan:",this.selectedProduct),this.registerForm.reset(),this.selectedGroupId=null,this.plans=[],this.filteredPlans=[],this.getGroups())}static \u0275fac=function(e){return new(e||i)(y(X),y(te),y(pt),y(st),y(Se))};static \u0275cmp=w({type:i,selectors:[["app-select-plan"]],inputs:{providerId:"providerId",isProvider:"isProvider",selectedProduct:"selectedProduct"},outputs:{registerBtn:"registerBtn"},features:[Ee],decls:18,vars:16,consts:[[1,"container"],["class","title",4,"ngIf"],["class","error-message",4,"ngIf"],["class","success-message",4,"ngIf"],[3,"ngSubmit","formGroup"],["for","group"],["formControlName","group","optionValue","group_id","optionLabel","group_name",3,"onChange","options","placeholder"],[4,"ngIf"],[1,"plan-list-container"],["aria-label","Book date","formControlName","plan"],[4,"ngFor","ngForOf"],["pButton","","pRipple","","type","submit",1,"p-button-success","submit-btn",3,"disabled"],[1,"title"],[1,"error-message"],[1,"text-error"],[1,"success-message"],[1,"text-success"],["color","primary",3,"value"],[1,"ml-3"],[1,"font-bold"]],template:function(e,n){if(e&1&&(s(0,"div",0),_(1,va,3,3,"h2",1)(2,ba,3,1,"div",2)(3,Ca,3,1,"div",3),s(4,"form",4),C("ngSubmit",function(){return n.isProvider?n.onProviderSubmit():n.onSubmit()}),s(5,"div")(6,"label",5),l(7),u(8,"translate"),o(),s(9,"p-dropdown",6),u(10,"translate"),C("onChange",function(){return n.groupChanged()}),o(),_(11,xa,4,3,"div",7),o(),s(12,"div",8)(13,"mat-radio-group",9),_(14,Pa,9,5,"ng-container",10),o()(),s(15,"button",11),_(16,ya,3,3,"span",7)(17,Sa,3,3,"span",7),o()()()),e&2){let r;a(),d("ngIf",!n.isProvider),a(),d("ngIf",n.errorMessage),a(),d("ngIf",n.successMessage),a(),d("formGroup",n.registerForm),a(3),v(g(8,12,"providerInfo.subscription.group")),a(2),V("placeholder",g(10,14,"providerInfo.subscription.select_group")),d("options",n.groups),a(2),d("ngIf",((r=n.registerForm.get("group"))==null?null:r.invalid)&&((r=n.registerForm.get("group"))==null?null:r.touched)),a(3),d("ngForOf",n.filteredPlans),a(),d("disabled",n.registerForm.invalid||n.isCreatingOrder),a(),d("ngIf",!n.isCreatingOrder),a(),d("ngIf",n.isCreatingOrder)}},dependencies:[G,E,rn,on,Ne,Be,ve,j,Z,Fe,ee,re,N],styles:['.container[_ngcontent-%COMP%]{max-width:400px;margin:20px auto;padding:0 1.25rem;display:flex;flex-direction:column;min-height:20rem}.container[_ngcontent-%COMP%]   h2.title[_ngcontent-%COMP%]{position:relative;font-size:1.5rem;color:#5d157c;font-weight:700;width:fit-content;margin:auto}.container[_ngcontent-%COMP%]   h2.title[_ngcontent-%COMP%]:before{content:" ";border-bottom:.313rem solid #f9f2fd;position:absolute;height:100%;width:55%;left:-.5rem;padding:1.375rem}.container[_ngcontent-%COMP%]   h2.title[_ngcontent-%COMP%]:after{content:" ";border-bottom:.313rem solid #5d157c;position:absolute;height:100%;width:55%;right:-.5rem;padding:1.375rem}.container[_ngcontent-%COMP%]   .selected-product-info[_ngcontent-%COMP%]{background-color:#f9f2fd;border:1px solid #dee1e6;border-radius:.5rem;padding:1rem;margin:1rem 0}.container[_ngcontent-%COMP%]   .selected-product-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#5d157c;font-size:1.1rem;font-weight:600;margin:0 0 .5rem}.container[_ngcontent-%COMP%]   .selected-product-info[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-weight:600;font-size:1rem;color:#333;margin-bottom:.25rem}.container[_ngcontent-%COMP%]   .selected-product-info[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .product-price[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;color:#5d157c;margin-bottom:.25rem}.container[_ngcontent-%COMP%]   .selected-product-info[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .product-description[_ngcontent-%COMP%]{font-size:.9rem;color:#666;line-height:1.4}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-top:2rem;display:flex;flex-direction:column;justify-content:space-between;flex:1}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1rem;color:#5d157c;font-weight:700}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#f9f2fd}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   p-dropdown[_ngcontent-%COMP%]    >div{background-color:#f9f2fd;width:100%}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]    >div{border:1px solid #dee1e6;width:100%;margin:.5rem;padding:.5rem;border-radius:.5rem}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-radio-button.mat-mdc-radio-checked[_ngcontent-%COMP%]    >div{background-color:#f9f2fd}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button.submit-btn[_ngcontent-%COMP%]{background-color:#5d157c;width:100%;color:#fff;justify-content:center}label[_ngcontent-%COMP%]{display:block;margin:10px 0 5px}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{width:100%;padding:8px;margin-bottom:10px}small[_ngcontent-%COMP%]{color:red;font-size:12px}']})};var Pt=class i{constructor(t){this.translate=t}registerBtn=new ie;paymentMode="";paymentModes=Un;onSubmit(){this.registerBtn.emit(this.paymentMode)}static \u0275fac=function(e){return new(e||i)(y(Se))};static \u0275cmp=w({type:i,selectors:[["app-subscription-payment"]],outputs:{registerBtn:"registerBtn"},decls:15,vars:16,consts:[[1,"subscription-payment-container"],[1,"title"],[1,"payment-mode-container"],["aria-label","payment mode",3,"ngModelChange","ngModel"],["color","primary",3,"value"],["pButton","","pRipple","","type","submit",1,"p-button-success","submit-btn",3,"click","disabled"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"h2",1),l(2),u(3,"translate"),o(),s(4,"div",2)(5,"mat-radio-group",3),ce("ngModelChange",function(c){return se(n.paymentMode,c)||(n.paymentMode=c),c}),s(6,"mat-radio-button",4),l(7),u(8,"translate"),o(),s(9,"mat-radio-button",4),l(10),u(11,"translate"),o()()(),s(12,"button",5),C("click",function(){return n.onSubmit()}),l(13),u(14,"translate"),o()()),e&2&&(a(2),v(g(3,8,"providerInfo.subscription.payment_mode")),a(3),ae("ngModel",n.paymentMode),a(),d("value",n.paymentModes.cash_on_hand),a(),v(g(8,10,"providerInfo.subscription.cash_on_hand")),a(2),d("value",n.paymentModes.online),a(),v(g(11,12,"providerInfo.subscription.online")),a(2),d("disabled",!n.paymentMode),a(),S(" ",g(14,14,"providerInfo.subscription.submit")," "))},dependencies:[rn,on,Ne,j,Ie,Fe,N],styles:[".subscription-payment-container[_ngcontent-%COMP%]{padding:1rem;display:flex;flex-direction:column;min-height:20rem}.subscription-payment-container[_ngcontent-%COMP%]   h2.title[_ngcontent-%COMP%]{font-weight:600;font-size:1rem;color:#323743;margin-left:.625rem}.subscription-payment-container[_ngcontent-%COMP%]   .payment-mode-container[_ngcontent-%COMP%]{flex:1}.subscription-payment-container[_ngcontent-%COMP%]   button.submit-btn[_ngcontent-%COMP%]{background-color:#5d157c;width:100%;color:#fff;justify-content:center;height:2rem}"]})};function Oa(i,t){if(i&1){let e=I();s(0,"button",14),C("click",function(){x(e);let r=m();return P(r.emitAction(r.status))}),l(1),u(2,"translate"),o()}i&2&&(a(),S(" ",g(2,1,"providerInfo.subscription.get_new_card")," "))}function Ma(i,t){if(i&1){let e=I();s(0,"button",14),C("click",function(){x(e);let r=m();return P(r.emitAction(r.status))}),l(1),o()}if(i&2){let e=m();a(),S(" ",e.getDisplayStatus(e.status)," ")}}var pn=class i{constructor(t){this.translate=t}business_name="";set member_name(t){this._member_name=t??"Sample Name"}get member_name(){return this._member_name}_member_name="Sample Name";set card_number(t){this._card_number=t??"XXXX XXXXX XXXXX"}get card_number(){return this._card_number}_card_number="XXXX XXXXX XXXXX";set status(t){this._status=t??"Get New Card"}get status(){return this._status}_status="Get New Card";set card_name(t){this._card_name=t??"Member card"}get card_name(){return this._card_name}_card_name="Member card";action=new ie;statusList=Ct;emitAction(t){this.action.emit(t)}getDisplayStatus(t){return this.statusList[t]||t}static \u0275fac=function(e){return new(e||i)(y(Se))};static \u0275cmp=w({type:i,selectors:[["membership-card-template"]],inputs:{business_name:"business_name",member_name:"member_name",card_number:"card_number",status:"status",card_name:"card_name"},outputs:{action:"action"},decls:22,vars:11,consts:[[1,"subscription-card"],[1,"card-info"],[1,"card-name"],[1,"card-desc"],[1,"card-owner-text"],[1,"card-owner-name"],[1,"card-owner-number"],[1,"card-owner-section"],[1,"owner-info"],[1,"card-owner-avatar"],[1,"avatar-placeholder"],[1,"plus-icon"],[1,"add-btn-container"],["class","add-btn",3,"click",4,"ngIf"],[1,"add-btn",3,"click"]],template:function(e,n){if(e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2),l(3),o(),s(4,"div",3),l(5),o()(),s(6,"div",4)(7,"div",5),l(8),u(9,"translate"),o(),s(10,"div",6),l(11),u(12,"translate"),o()(),s(13,"div",7)(14,"div",8)(15,"div",9)(16,"div",10)(17,"span",11),l(18,"+"),o()()()(),s(19,"div",12),_(20,Oa,3,3,"button",13)(21,Ma,2,1,"button",13),o()()()),e&2){let r;a(3),v(n.business_name),a(2),v(n.card_name),a(3),v((r=n.member_name)!==null&&r!==void 0?r:g(9,7,"providerInfo.subscription.sample_name")),a(3),Y("",g(12,9,"providerInfo.subscription.sub_id"),"",n.card_number,""),a(9),d("ngIf",n.status==="Get New Card"),a(),d("ngIf",n.status&&n.status!=="Get New Card")}},dependencies:[E,N],styles:[".subscription-card[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(135deg,#1e73be,#8e2de2);box-shadow:0 8px 16px #00000026;padding:16px;color:#fff;font-family:Segoe UI,sans-serif;position:relative}.card-info[_ngcontent-%COMP%]{margin-bottom:10px}.card-info[_ngcontent-%COMP%]   .card-name[_ngcontent-%COMP%]{font-weight:600;font-size:14px}.card-info[_ngcontent-%COMP%]   .card-desc[_ngcontent-%COMP%]{font-size:12px;opacity:.85}.card-owner-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.card-owner-text[_ngcontent-%COMP%]   .card-owner-name[_ngcontent-%COMP%]{font-weight:700;font-size:14px;margin-bottom:4px}.card-owner-text[_ngcontent-%COMP%]   .card-owner-number[_ngcontent-%COMP%]{font-size:12px;opacity:.85}.card-owner-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:16px}.card-owner-section[_ngcontent-%COMP%]   .owner-info[_ngcontent-%COMP%]{display:flex;align-items:center}.card-owner-section[_ngcontent-%COMP%]   .owner-info[_ngcontent-%COMP%]   .card-owner-avatar[_ngcontent-%COMP%]{margin-right:12px}.card-owner-section[_ngcontent-%COMP%]   .owner-info[_ngcontent-%COMP%]   .card-owner-avatar[_ngcontent-%COMP%]   .avatar-placeholder[_ngcontent-%COMP%]{width:48px;height:48px;background-color:#fff3;border-radius:50%;display:flex;align-items:center;justify-content:center}.card-owner-section[_ngcontent-%COMP%]   .owner-info[_ngcontent-%COMP%]   .card-owner-avatar[_ngcontent-%COMP%]   .avatar-placeholder[_ngcontent-%COMP%]   .plus-icon[_ngcontent-%COMP%]{font-size:20px;color:#fff}.card-owner-section[_ngcontent-%COMP%]   .add-btn-container[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]{padding:6px 16px;font-size:12px;font-weight:700;border-radius:6px;border:none;background:#fff;color:#8e2de2;cursor:pointer;transition:all .3s ease}.card-owner-section[_ngcontent-%COMP%]   .add-btn-container[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]:hover{background:#f1f1f1}.card-info-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.card-info-footer[_ngcontent-%COMP%]   .add-btn-container[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]{padding:6px 16px;font-size:12px;font-weight:700;border-radius:6px;border:none;background:#fff;color:#8e2de2;cursor:pointer;transition:all .3s ease}.card-info-footer[_ngcontent-%COMP%]   .add-btn-container[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]:hover{background:#f1f1f1}"]})};function ka(i,t){if(i&1){let e=I();s(0,"button",7),C("click",function(){x(e);let r=m();return P(r.prevCard())}),h(1,"i",8),o()}if(i&2){let e=m();d("disabled",e.cards.length<=1)}}function Ea(i,t){if(i&1){let e=I();s(0,"div",9)(1,"membership-card-template",10),C("action",function(r){let c=x(e).$implicit,p=m();return P(p.onCardAction(r,c))}),o()()}if(i&2){let e=t.$implicit,n=t.index,r=m();_e("active",n===r.currentIndex),a(),d("business_name",e.business_name)("card_name",e.card_name)("member_name",e.member_name)("card_number",e.card_number)("status",e.status)}}function Ta(i,t){if(i&1){let e=I();s(0,"button",11),C("click",function(){x(e);let r=m();return P(r.nextCard())}),h(1,"i",12),o()}if(i&2){let e=m();d("disabled",e.cards.length<=1)}}function Da(i,t){if(i&1&&(s(0,"div",13)(1,"span"),l(2),o()()),i&2){let e=m();a(2),Y("",e.currentIndex+1," of ",e.cards.length,"")}}var mn=class i{cards=[];cardAction=new ie;currentIndex=0;touchStartX=0;touchStartY=0;touchEndX=0;touchEndY=0;swipeThreshold=50;ngOnInit(){console.log("Cards-->",this.cards)}onCardAction(t,e){this.cardAction.emit({card:e,action:t})}prevCard(){this.currentIndex>0?this.currentIndex--:this.currentIndex=this.cards.length-1}nextCard(){this.currentIndex<this.cards.length-1?this.currentIndex++:this.currentIndex=0}goToCard(t){this.currentIndex=t}onTouchStart(t){this.touchStartX=t.changedTouches[0].screenX,this.touchStartY=t.changedTouches[0].screenY}onTouchEnd(t){this.touchEndX=t.changedTouches[0].screenX,this.touchEndY=t.changedTouches[0].screenY,this.handleSwipe()}handleSwipe(){let t=this.touchEndX-this.touchStartX,e=this.touchEndY-this.touchStartY;Math.abs(t)>this.swipeThreshold&&Math.abs(t)>Math.abs(e)&&(t>0?this.prevCard():this.nextCard())}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=w({type:i,selectors:[["membership-card-carousel"]],inputs:{cards:"cards"},outputs:{cardAction:"cardAction"},decls:7,vars:6,consts:[[1,"membership-carousel-container"],["class","nav-btn prev-btn",3,"disabled","click",4,"ngIf"],[1,"carousel-viewport"],[1,"carousel-track",3,"touchstart","touchend"],["class","carousel-item",3,"active",4,"ngFor","ngForOf"],["class","nav-btn next-btn",3,"disabled","click",4,"ngIf"],["class","card-counter",4,"ngIf"],[1,"nav-btn","prev-btn",3,"click","disabled"],[1,"pi","pi-chevron-left"],[1,"carousel-item"],[3,"action","business_name","card_name","member_name","card_number","status"],[1,"nav-btn","next-btn",3,"click","disabled"],[1,"pi","pi-chevron-right"],[1,"card-counter"]],template:function(e,n){e&1&&(s(0,"div",0),_(1,ka,2,1,"button",1),s(2,"div",2)(3,"div",3),C("touchstart",function(c){return n.onTouchStart(c)})("touchend",function(c){return n.onTouchEnd(c)}),_(4,Ea,2,7,"div",4),o()(),_(5,Ta,2,1,"button",5),o(),_(6,Da,3,2,"div",6)),e&2&&(a(),d("ngIf",n.cards.length>1),a(2),Ci("transform","translateX(-"+n.currentIndex*100+"%)"),a(),d("ngForOf",n.cards),a(),d("ngIf",n.cards.length>1),a(),d("ngIf",n.cards.length>1))},dependencies:[G,E,pn],styles:[".membership-carousel-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:400px;margin:0 auto;display:flex;align-items:center;justify-content:center;gap:1rem;padding:1rem 0}.membership-carousel-container[_ngcontent-%COMP%]   .nav-btn[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;background:#ffffffe6;border:2px solid #e0e0e0;font-size:1.2rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;z-index:10;box-shadow:0 2px 8px #0000001a}.membership-carousel-container[_ngcontent-%COMP%]   .nav-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#fff;border-color:#5d157c;transform:scale(1.05);box-shadow:0 4px 12px #00000026}.membership-carousel-container[_ngcontent-%COMP%]   .nav-btn[_ngcontent-%COMP%]:hover:not(:disabled)   i[_ngcontent-%COMP%]{color:#5d157c}.membership-carousel-container[_ngcontent-%COMP%]   .nav-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.membership-carousel-container[_ngcontent-%COMP%]   .nav-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#666;transition:color .3s ease}.membership-carousel-container[_ngcontent-%COMP%]   .carousel-viewport[_ngcontent-%COMP%]{overflow:hidden;width:100%;max-width:350px;border-radius:12px;box-shadow:0 4px 20px #0000001a}.membership-carousel-container[_ngcontent-%COMP%]   .carousel-track[_ngcontent-%COMP%]{display:flex;transition:transform .4s cubic-bezier(.25,.46,.45,.94);width:100%}.membership-carousel-container[_ngcontent-%COMP%]   .carousel-item[_ngcontent-%COMP%]{flex:0 0 100%;width:100%;opacity:.7;transform:scale(.95);transition:all .4s ease}.membership-carousel-container[_ngcontent-%COMP%]   .carousel-item.active[_ngcontent-%COMP%]{opacity:1;transform:scale(1)}.membership-carousel-container[_ngcontent-%COMP%]   .carousel-item[_ngcontent-%COMP%]   membership-card-template[_ngcontent-%COMP%]{display:block;width:100%;height:100%}.dots-indicator[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:.5rem;margin-top:1rem}.dots-indicator[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%;border:none;background:#e0e0e0;cursor:pointer;transition:all .3s ease}.dots-indicator[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:hover{background:#5d157c;transform:scale(1.2)}.dots-indicator[_ngcontent-%COMP%]   .dot.active[_ngcontent-%COMP%]{background:#5d157c;transform:scale(1.3)}.card-counter[_ngcontent-%COMP%]{text-align:center;margin-top:.5rem;font-size:.9rem;color:#666;font-weight:500}@media (max-width: 768px){.membership-carousel-container[_ngcontent-%COMP%]{max-width:100%;padding:.5rem}.membership-carousel-container[_ngcontent-%COMP%]   .carousel-viewport[_ngcontent-%COMP%]{max-width:100%}.membership-carousel-container[_ngcontent-%COMP%]   .nav-btn[_ngcontent-%COMP%]{width:40px;height:40px;font-size:1rem}}@media (max-width: 480px){.membership-carousel-container[_ngcontent-%COMP%]   .nav-btn[_ngcontent-%COMP%]{width:35px;height:35px;font-size:.9rem}.dots-indicator[_ngcontent-%COMP%]{gap:.3rem}.dots-indicator[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:10px;height:10px}}.carousel-track.swiping[_ngcontent-%COMP%]{transition:none}.carousel-item[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .5s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translate(50px) scale(.9)}to{opacity:1;transform:translate(0) scale(1)}}.membership-carousel-container[_ngcontent-%COMP%]:hover   .nav-btn[_ngcontent-%COMP%]{opacity:1}.nav-btn[_ngcontent-%COMP%]:focus, .dot[_ngcontent-%COMP%]:focus{outline:2px solid #5D157C;outline-offset:2px}"]})};function Na(i,t){if(i&1){let e=I();s(0,"div",4)(1,"div",5)(2,"div",6)(3,"img",7),C("error",function(r){x(e);let c=m();return P(c.onImageError(r))}),o()()(),s(4,"div",8)(5,"div",9)(6,"h3",10),l(7),o(),s(8,"p",11),l(9),o()(),s(10,"div",12)(11,"button",13),C("click",function(){let r=x(e).$implicit,c=m();return P(c.onRegister(r))}),l(12," Register "),o()()()()}if(i&2){let e=t.$implicit,n=m();a(3),d("src",n.getProductImage(e),Ce)("alt",e.product_name),a(4),v(e.product_name),a(2),v(e.title1)}}function Ba(i,t){i&1&&(s(0,"div",14)(1,"div",15),h(2,"i",16),o(),s(3,"h3"),l(4,"No Subscription Products"),o(),s(5,"p"),l(6,"No subscription products are currently available."),o()())}var un=class i{products=[];providerName="";cardAction=new ie;registerProduct=new ie;constructor(){}ngOnInit(){console.log(this.products)}onRegister(t){console.log("Register for product:",t),this.registerProduct.emit(t)}getProductImage(t){return t.product_image_url&&t.product_image_url.length>0?t.product_image_url[0]:"assets/images/products/default-product.png"}getProductDescription(t){let e=[];return t.is_service&&e.push("Include hall"),t.available_stock>0?e.push(`${t.available_stock} Bathroom`):e.push("2 Bathroom"),e.length===0&&e.push("Include hall, 2 Bathroom"),e.join(", ")}onCardAction(t,e){this.cardAction.emit({card:e,action:t})}onImageError(t){let e=t.target;e&&(e.src="assets/images/products/default-product.png")}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=w({type:i,selectors:[["subscription-products"]],inputs:{products:"products",providerName:"providerName"},outputs:{cardAction:"cardAction",registerProduct:"registerProduct"},decls:4,vars:2,consts:[[1,"subscription-products-container"],[1,"products-grid"],["class","product-card",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"product-card"],[1,"product-image-section"],[1,"image-container"],[1,"product-image",3,"error","src","alt"],[1,"product-content-section"],[1,"product-info"],[1,"product-title"],[1,"product-description"],[1,"action-section"],[1,"register-btn",3,"click"],[1,"empty-state"],[1,"empty-icon"],[1,"pi","pi-box"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1),_(2,Na,13,4,"div",2),o(),_(3,Ba,7,0,"div",3),o()),e&2&&(a(2),d("ngForOf",n.products),a(),d("ngIf",n.products.length===0))},dependencies:[G,E],styles:[".products-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;justify-content:flex-start}.product-card[_ngcontent-%COMP%]{display:flex;align-items:center;background:#f9f0ff;border-radius:12px;padding:12px 16px;box-shadow:0 2px 8px #0000000d;width:400px;height:100px;transition:box-shadow .2s ease}.product-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #0000001a}.product-image-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:70px;margin-right:16px}.product-image-section[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:10px;overflow:hidden;background:#fff;display:flex;justify-content:center;align-items:center}.product-image-section[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.product-image-section[_ngcontent-%COMP%]   .brand-info[_ngcontent-%COMP%]{font-size:10px;text-align:center;margin-top:4px}.product-image-section[_ngcontent-%COMP%]   .brand-info[_ngcontent-%COMP%]   .brand-name[_ngcontent-%COMP%]{font-weight:700;color:#7b1fa2}.product-image-section[_ngcontent-%COMP%]   .brand-info[_ngcontent-%COMP%]   .brand-tagline[_ngcontent-%COMP%]{font-style:italic;color:#aaa}.product-content-section[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:space-between;align-items:center}.product-content-section[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-title[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600;color:#4a148c}.product-content-section[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-description[_ngcontent-%COMP%]{margin:2px 0 0;font-size:13px;color:#666}.product-content-section[_ngcontent-%COMP%]   .action-section[_ngcontent-%COMP%]   .register-btn[_ngcontent-%COMP%]{background:#7b1fa2;color:#fff;border:none;padding:6px 16px;border-radius:20px;font-size:14px;font-weight:500;cursor:pointer;transition:background .2s ease}.product-content-section[_ngcontent-%COMP%]   .action-section[_ngcontent-%COMP%]   .register-btn[_ngcontent-%COMP%]:hover{background:#6a1b9a}"]})};function Aa(i,t){if(i&1){let e=I();s(0,"div",7)(1,"subscription-products",8),u(2,"translate"),C("registerProduct",function(r){x(e);let c=m(2);return P(c.onRegisterProduct(r))}),o()()}if(i&2){let e=m(2);a(),d("products",e.subscriptionProducts)("providerName",(e.provider==null?null:e.provider.business_name)||g(2,2,"providerInfo.subscription.provider_fallback"))}}function Va(i,t){if(i&1){let e=I();s(0,"div",4)(1,"membership-card-carousel",5),C("cardAction",function(r){x(e);let c=m();return P(c.onCarouselCardAction(r))}),o(),_(2,Aa,3,4,"div",6),o()}if(i&2){let e=m();a(),d("cards",e.carouselCards),a(),d("ngIf",e.subscriptionProducts.length>0)}}function Ua(i,t){if(i&1){let e=I();s(0,"app-register-subscription",9),C("registerBtn",function(r){x(e);let c=m();return P(c.nextPage(r))}),o()}if(i&2){let e=m();d("providerId",e.providerId)}}function La(i,t){if(i&1){let e=I();s(0,"app-select-plan",10),C("registerBtn",function(r){x(e);let c=m();return P(c.nextPage(r))}),o()}if(i&2){let e=m();d("providerId",e.providerId)("selectedProduct",e.selectedProduct)}}function qa(i,t){if(i&1){let e=I();s(0,"app-subscription-payment",11),C("registerBtn",function(r){x(e);let c=m();return P(c.nextPage(r))}),o()}}var yt=class i{constructor(t,e,n,r,c){this.router=t;this.auth=e;this.providerInfoService=n;this.memberShipCardService=r;this.subscriptionProductsService=c}provider;ngOnInit(){}ngOnChanges(t){t.provider&&(this.getMembershipCards(),this.getSubscriptionProducts())}get userInfo(){return this.auth.getUserInfo()}registrationFormData;stepsForSubscription=Qi;getMembershipCards(){this.provider?.provider_id&&(this.memberShipCardService.listByProviderId(this.provider.provider_id).subscribe(t=>{this.cards=t,this.updateCarouselCards()}),this.providerInfoService.getSubscriptionListForProvider(this.provider?.provider_id).subscribe(t=>{this.subscriptions=t,this.updateCarouselCards()}))}getSubscriptionProducts(){this.provider?.provider_id&&this.subscriptionProductsService.getSubscriptionProducts(this.provider.provider_id,void 0,0,10,"subscription","service_subscription").subscribe({next:t=>{console.log("Subscription Products:",t),t&&t.data?this.subscriptionProducts=t.data.products||[]:t&&t.products?this.subscriptionProducts=t.products||[]:this.subscriptionProducts=[],console.log("PRO-->",this.subscriptionProducts)},error:t=>{console.error("Error fetching subscription products:",t),this.subscriptionProducts=[]}})}pages=["list","register","select-plan","payment-mode"];activePageIndex=0;actionOnCard="Get New Card";subscriptions=[];editSubscription;cards=[];carouselCards=[];subscriptionProducts=[];selectedProduct;get providerId(){return this.provider?.provider_id}updateCarouselCards(){this.carouselCards=[],this.subscriptions.forEach(t=>{this.carouselCards.push({business_name:this.provider?.business_name||"Shree Enterprise",card_name:this.cards.length?this.cards[0].card_name:"Member Card",member_name:t.member_name||"Unknown Member",card_number:t.id?.toString()||"N/A",status:t.status||"Active",subscription:t})}),this.subscriptionProducts.forEach(t=>{this.carouselCards.push({business_name:this.provider?.business_name||"Shree Enterprise",card_name:t.product_name,member_name:`\u20B9${t.selling_price}`,card_number:`Product ID: ${t.product_id}`,status:"Available",subscription:void 0})}),this.carouselCards.push({business_name:this.provider?.business_name||"Shree Enterprise",card_name:this.cards.length?this.cards[0].card_name:"Member Card",member_name:this.userInfo?.name||"New Member11",card_number:"Get New Card",status:"Get New Card"})}onCarouselCardAction(t){t.action==="Get New Card"?this.addSubscription():t.card.subscription?this.actionForExistingCard(t.action,t.card.subscription):console.log("Product card action:",t)}onRegisterProduct(t){this.selectedProduct=t,this.addSubscription()}addSubscription(){this.activePageIndex=1,this.actionOnCard="Get New Card"}actionForExistingCard(t,e){t===this.getEnumKey("Payment Pending")&&(this.activePageIndex=3,this.actionOnCard="Payment Pending",this.editSubscription=e)}getEnumKey(t){return Object.keys(Ct).find(e=>Ct[e]===t)}nextPage(t){if(this.registrationFormData||(this.registrationFormData={}),this.activePageIndex===1)this.activePageIndex=2,this.registrationFormData.custom_registration_data=t;else if(this.activePageIndex===2){if(this.activePageIndex=3,this.userInfo&&this.providerId&&this.registrationFormData.custom_registration_data){t=t;let e={user_id:this.userInfo.user_id,member_name:this.registrationFormData.custom_registration_data.member_name,mobile_number:this.registrationFormData.custom_registration_data.mobile_number,provider_id:this.providerId,plan_id:t.plan.id,amount_paid:t.plan.price};this.registrationFormData.subscription=e,t.selectedProduct&&(this.selectedProduct=t.selectedProduct)}}else if(this.activePageIndex===3){if(this.registrationFormData.subscription)this.registrationFormData.subscription.payment_method=t,this.registrationFormData.subscription.payment_status=Ln[t],this.providerInfoService.createSubscription(this.registrationFormData).subscribe(e=>{this.activePageIndex=0,this.getMembershipCards()});else if(this.actionOnCard==="Payment Pending"&&this.userInfo&&this.providerId&&this.editSubscription?.id){let e={user_id:this.userInfo.user_id,status:t==="online"?"active":void 0,payment_method:t,payment_status:Ln[t],provider_id:this.providerId};this.providerInfoService.updateSubscription(e,this.editSubscription.id).subscribe(n=>{this.activePageIndex=0,this.getMembershipCards()})}}}static \u0275fac=function(e){return new(e||i)(y(X),y(H),y(le),y(cn),y(ln))};static \u0275cmp=w({type:i,selectors:[["app-provider-subscription"]],inputs:{provider:"provider"},features:[Ee],decls:4,vars:4,consts:[["class","subscription-card-container",4,"ngIf"],[3,"providerId","registerBtn",4,"ngIf"],[3,"providerId","selectedProduct","registerBtn",4,"ngIf"],[3,"registerBtn",4,"ngIf"],[1,"subscription-card-container"],[3,"cardAction","cards"],["class","subscription-products-section",4,"ngIf"],[1,"subscription-products-section"],[3,"registerProduct","products","providerName"],[3,"registerBtn","providerId"],[3,"registerBtn","providerId","selectedProduct"],[3,"registerBtn"]],template:function(e,n){e&1&&_(0,Va,3,2,"div",0)(1,Ua,1,1,"app-register-subscription",1)(2,La,1,2,"app-select-plan",2)(3,qa,1,0,"app-subscription-payment",3),e&2&&(d("ngIf",n.activePageIndex===n.stepsForSubscription.list),a(),d("ngIf",n.activePageIndex===n.stepsForSubscription.registration),a(),d("ngIf",n.activePageIndex===n.stepsForSubscription.selectPlan),a(),d("ngIf",n.activePageIndex===n.stepsForSubscription.payment))},dependencies:[E,je,ze,Pt,mn,un,N],styles:[".subscription-card-container[_ngcontent-%COMP%]{padding:1rem;background:#f8f9fa;min-height:100vh}.subscription-card-container[_ngcontent-%COMP%]   .subscription-products-section[_ngcontent-%COMP%]{margin-top:2rem;padding-top:2rem;border-top:1px solid #e5e7eb}.subscription-card-container[_ngcontent-%COMP%]   .subscription-products-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#1f2937;margin:0 0 1.5rem;text-align:center}@media (max-width: 768px){.subscription-card-container[_ngcontent-%COMP%]{padding:.5rem}.subscription-card-container[_ngcontent-%COMP%]   .subscription-products-section[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1.5rem}.subscription-card-container[_ngcontent-%COMP%]   .subscription-products-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:1rem}}"]})};var gn=class i{constructor(t,e,n){this.router=t;this.auth=e;this.providerInfoService=n}provider;selectedProduct;registrationData=null;get providerId(){return this.provider?.provider_id}onRegistrationSubmit(t){this.registrationData=t}static \u0275fac=function(e){return new(e||i)(y(X),y(H),y(le))};static \u0275cmp=w({type:i,selectors:[["provider-subscription"]],inputs:{provider:"provider",selectedProduct:"selectedProduct"},decls:3,vars:7,consts:[[1,"m-2",3,"title","defaultExpandedStatus"],[3,"registerBtn","providerId","isProvider"],[3,"providerId","isProvider","selectedProduct"]],template:function(e,n){e&1&&(s(0,"expander-template",0)(1,"app-register-subscription",1),C("registerBtn",function(c){return n.onRegistrationSubmit(c)}),o()(),h(2,"app-select-plan",2)),e&2&&(d("title","Advance Registration")("defaultExpandedStatus",!1),a(),d("providerId",n.providerId)("isProvider",!0),a(),d("providerId",n.providerId)("isProvider",!0)("selectedProduct",n.selectedProduct))},dependencies:[tn,je,ze],styles:[".template-container{margin:1rem}"]})};var Ja=(i,t)=>({"top-44-cat-fil":i,"top-3rem":t}),Ya=i=>({"selected-item shadow-lg bg-white":i});function Wa(i,t){i&1&&(s(0,"div",21)(1,"ul")(2,"li"),h(3,"i",22),s(4,"div"),l(5,"Repeat your orders"),o(),h(6,"i",23),o(),s(7,"li"),h(8,"i",24),s(9,"div"),l(10,"Repeat your orders"),o(),h(11,"i",23),o()()())}function Ka(i,t){if(i&1){let e=I();s(0,"div",25),C("click",function(){let r=x(e).$implicit,c=m(2);return P(c.switchCategory(r))}),h(1,"img",26),s(2,"span",27),l(3),o()()}if(i&2){let e=t.$implicit,n=m(2);d("ngClass",Pe(4,Ya,(n.selectedCategory==null?null:n.selectedCategory.name)===e.name)),a(),V("alt",e.name),d("src",e.img?e.img:"assets/images/products/prod-category.webp",Ce),a(2),v(e.name)}}function Xa(i,t){if(i&1&&(s(0,"span",28),l(1),o()),i&2){let e=m(2);a(),S(" ",e.getSelectedFilterLabel()," ")}}function Qa(i,t){if(i&1){let e=I();s(0,"p-tag",29),C("click",function(){let r=x(e).$implicit,c=m(2);return P(c.setSelectedSubcategory(r))}),o()}if(i&2){let e=t.$implicit;d("value",e.name)}}function Za(i,t){if(i&1){let e=I();s(0,"div",42),C("click",function(r){x(e);let c=m(2).$implicit;return m(4).openDialog(c),P(r.stopPropagation())}),h(1,"img",43),o()}}function es(i,t){if(i&1){let e=I();L(0),s(1,"div",14)(2,"button",44),C("click",function(r){x(e);let c=m(2).$implicit;return m(4).removeFromCart(c.id),P(r.stopPropagation())}),h(3,"i",45),o(),s(4,"span",46),l(5),o(),s(6,"button",44),C("click",function(r){x(e);let c=m(2).$implicit;return m(4).addToCart(c),P(r.stopPropagation())}),h(7,"i",47),o()(),q()}if(i&2){let e=m(2).$implicit,n=m(4);a(5),S(" ",n.getItemQuantity(e.id)," ")}}function ts(i,t){if(i&1){let e=I();s(0,"button",48),C("click",function(r){x(e);let c=m(2).$implicit,p=m(4);return P(p.handleProductAction(c,r))}),l(1),o()}if(i&2){let e=m(2).$implicit,n=m(4);a(),S(" ",n.getActionLabel(e)," ")}}function ns(i,t){if(i&1){let e=I();L(0),s(1,"div",32),C("click",function(){x(e);let r=m().$implicit,c=m(4);return P(c.addToCart(r))}),s(2,"div",33)(3,"img",34),C("click",function(r){x(e);let c=m().$implicit,p=m(4);return P(p.handleProductClick(c,r))}),o(),_(4,Za,2,0,"div",35),o(),s(5,"h3",36),l(6),o(),s(7,"p-dropdown",37),u(8,"translate"),ce("ngModelChange",function(r){x(e);let c=m().$implicit,p=m(4);return se(p.selectedVariant[c.id],r)||(p.selectedVariant[c.id]=r),P(r)}),C("ngModelChange",function(r){x(e);let c=m().$implicit,p=m(4);return P(p.selectVariant(r,c))})("click",function(r){return x(e),P(r.stopPropagation())}),o(),s(9,"div",38)(10,"div",39),l(11),o(),s(12,"div",40),_(13,es,8,1,"ng-container",41)(14,ts,2,1,"ng-template",null,2,Te),o()()(),q()}if(i&2){let e=xe(15),n=m().$implicit,r=m(4);a(3),d("src",!(n==null||n.img==null)&&n.img[0]?n.img==null?null:n.img[0]:"assets/images/products/product-placeholder.png",Ce),a(),d("ngIf",n.productSubType==="subscribe"),a(2),S(" ",n.name," "),a(),V("placeholder",g(8,10,"providerInfo.catalogue.subscribe_placeholder")),d("scrollHeight","4rem")("options",n.variantsJson),ae("ngModel",r.selectedVariant[n.id]),a(4),S(" \u20B9",r.selectedVariant[n.id]==null?null:r.selectedVariant[n.id].price," "),a(2),d("ngIf",r.getItemQuantity(n.id)>0)("ngIfElse",e)}}function is(i,t){if(i&1&&(L(0),_(1,ns,16,12,"ng-container",3),q()),i&2){let e=t.$implicit,n=m(4);a(),d("ngIf",!n.isService&&!e.isService)}}function rs(i,t){if(i&1&&(L(0),s(1,"div",30),_(2,is,2,1,"ng-container",31),o(),q()),i&2){let e=m(3);a(2),d("ngForOf",e.nonServiceProducts)}}function os(i,t){if(i&1&&(L(0),_(1,rs,3,1,"ng-container",3),q()),i&2){let e=m(2);a(),d("ngIf",e.nonServiceProducts.length>0)}}function as(i,t){if(i&1&&(s(0,"div",59),l(1),o()),i&2){let e=m(2).$implicit;a(),S(" Rs ",e.variantsJson[0].price,`
`)}}function ss(i,t){if(i&1){let e=I();L(0),s(1,"div",50)(2,"div",51),h(3,"img",52),o(),s(4,"div",53)(5,"div",54)(6,"h3",55),l(7),o(),h(8,"i",56),o(),_(9,as,2,1,"div",57),s(10,"button",58),C("click",function(){x(e);let r=m().$implicit,c=m(3);return P(c.book(r))}),l(11," Book "),o()()(),q()}if(i&2){let e=m().$implicit;a(3),d("src",(e==null||e.img==null?null:e.img[0])||"assets/images/products/product-placeholder.png",Ce),a(4),S(" ",e.name," "),a(2),d("ngIf",(e==null?null:e.variantsJson)&&e.variantsJson.length>0)}}function cs(i,t){if(i&1&&(L(0),_(1,ss,12,3,"ng-container",3),q()),i&2){let e=t.$implicit;a(),d("ngIf",e.isService)}}function ls(i,t){if(i&1&&(L(0),s(1,"div",49),_(2,cs,2,1,"ng-container",31),o(),q()),i&2){let e=m(2);a(2),d("ngForOf",e.serviceProducts)}}function ds(i,t){if(i&1){let e=I();s(0,"div",60),C("click",function(){x(e);let r=m(2);return P(r.setShowCartSummary(!0))}),s(1,"div",61),h(2,"i",22),o(),s(3,"div",62)(4,"span",63),l(5),u(6,"translate"),o(),s(7,"span",63),l(8),u(9,"translate"),o()(),h(10,"span",64),o()}if(i&2){let e=m(2);a(5),v(g(6,3,"providerInfo.catalogue.view_cart")),a(3),Y("",e.cart.length," ",g(9,5,"providerInfo.catalogue.items"),"")}}function ps(i,t){if(i&1){let e=I();L(0),_(1,Wa,12,0,"div",6),s(2,"div",7)(3,"div",8),_(4,Ka,4,6,"div",9),o(),s(5,"div",10)(6,"div")(7,"input",11),u(8,"translate"),ce("ngModelChange",function(r){x(e);let c=m();return se(c.filterInput,r)||(c.filterInput=r),P(r)}),C("input",function(r){x(e);let c=m();return P(c.onInputChange(r))}),o()(),s(9,"div",12)(10,"div",13)(11,"div",14)(12,"lucide-icon",15),C("click",function(r){x(e);let c=xe(15);return P(c.toggle(r))}),o()(),_(13,Xa,2,1,"span",16),s(14,"p-overlayPanel",17,1)(16,"p-dropdown",18),u(17,"translate"),ce("ngModelChange",function(r){x(e);let c=m();return se(c.isService,r)||(c.isService=r),P(r)}),C("onChange",function(){x(e);let r=xe(15),c=m();return P(c.onFilterSelect(r))}),o()()(),_(18,Qa,1,1,"p-tag",19),o(),_(19,os,2,1,"ng-container",3)(20,ls,3,1,"ng-container",3),o()(),_(21,ds,11,7,"div",20),q()}if(i&2){let e=m();a(),d("ngIf",!e.isProviderView&&!1),a(2),d("ngClass",Ii(19,Ja,!e.isProviderView,e.isProviderView)),a(),d("ngForOf",e.categories),a(3),V("placeholder",g(8,15,"providerInfo.catalogue.search")),ae("ngModel",e.filterInput),a(6),d("ngIf",e.getSelectedFilterLabel()),a(),d("dismissable",!0),a(2),V("placeholder",g(17,17,"providerInfo.catalogue.filter_by")),d("options",e.filterOptions),ae("ngModel",e.isService),d("showClear",!1),a(2),d("ngForOf",e.selectedCategory==null?null:e.selectedCategory.children),a(),d("ngIf",!e.isService),a(),d("ngIf",e.serviceProducts.length>0),a(),d("ngIf",e.cart.length>0)}}function ms(i,t){i&1&&(s(0,"div",65),l(1),u(2,"translate"),o()),i&2&&(a(),S(" ",g(2,1,"providerInfo.catalogue.no_products")," "))}function us(i,t){if(i&1&&h(0,"app-provider-subscription",66),i&2){let e=m();d("provider",e.provider)}}function gs(i,t){if(i&1&&h(0,"provider-subscription",66),i&2){let e=m();d("provider",e.provider)}}function fs(i,t){if(i&1){let e=I();s(0,"p-tabView",69),ce("activeIndexChange",function(r){x(e);let c=m(2);return se(c.activeBottomTabIndex,r)||(c.activeBottomTabIndex=r),P(r)}),h(1,"p-tabPanel",70),u(2,"translate"),h(3,"p-tabPanel",70),u(4,"translate"),o()}if(i&2){let e=m(2);ae("activeIndex",e.activeBottomTabIndex),a(),d("header",g(2,3,"providerInfo.catalogue.tab_catalogue")),a(2),d("header",g(4,5,"providerInfo.catalogue.tab_subscription"))}}function _s(i,t){if(i&1&&(s(0,"div",67),_(1,fs,5,7,"p-tabView",68),o()),i&2){let e=m();a(),d("ngIf",e.provider.business_type.length>1)}}var He=class i{constructor(t,e,n,r,c,p){this._route=t;this._providerInfo=e;this._cartService=n;this.productService=r;this.router=c;this.dialog=p}selectedTab="on_demand";filterInput="";previewImages=[];queryParams={};searchSubject=new Le;isService;selectedProduct;activeIndex=0;filterOptions=[{label:"Product",value:!1},{label:"Service",value:!0}];ngOnInit(){this.products=this._providerInfo.cachedProduct,this.provider?.provider_id&&(this.activeBottomTabIndex=this.activeIndex,this._providerInfo.getCategories(this.provider.provider_id).subscribe(t=>{this.categories=t.categories.filter(e=>e.parent_id===null),this.categories.length>0&&(this.selectedCategory=this.categories[0],this.fetchProducts(this.selectedCategory))})),this.searchSubject.pipe(nt(300),it()).subscribe(t=>{this.queryParams.search=t.trim(),this.queryParams.search===""?this.selectedCategory&&this.fetchProducts(this.selectedCategory):this.productService.listWithTotal(this.queryParams).subscribe(e=>{this.products=this.mapProductsToCategory(e.data)})})}ngOnChanges(t){t.activeIndex&&(this.activeBottomTabIndex=this.activeIndex),t.provider&&this.provider.business_type.length>0&&this.provider.business_type.length===1&&this.provider.business_type[0]==="subscription"&&(this.activeBottomTabIndex=1)}selectedCategory=null;selectedSubcategory=null;selectedCategorySubcategories=[];products=[];productDefaultImg="assets/images/products/product-placeholder.png";activeBottomTabIndex=0;isProviderView=!1;provider;hidden=!1;variants=[];selectedVariant={};selectVariant(t,e){let n=e.variantsJson.find(r=>r.variant_id===t.variant_id);this.selectedVariant[e.id]=n}get cart(){return this._cartService.getCart()}categories=[];enquirableProduct=[];get enqurableProductList(){return this.products?.filter(t=>t.isService===!0)||[]}switchCategory(t){this.selectedCategory=t,this.setSelectedSubcategory(null),this.fetchProducts(t)}fetchProducts(t){this.provider?.provider_id&&t?.product_category_id&&this._providerInfo.getProductByCategory(this.provider?.provider_id,t.product_category_id).pipe(tt(e=>(console.error(e),et([{products:[]}])))).subscribe(e=>{let n=[];this.extractProductFromTree(e,n),this.products=this._providerInfo.cachedProduct=n,this.setVariantForAll()})}setVariantForAll(){this.products.forEach(t=>{this.selectVariant(t.variantsJson[0],t)})}setSelectedSubcategory(t){this.selectedSubcategory=t}addToCart(t){let e=this._cartService.getCart(),n=e.find(r=>r.id===t.id);if(n)n.quantity+=1,this._cartService.setCart(e);else{let r=[...e,he(W({},t),{quantity:1})];this._cartService.setCart(r)}}removeFromCart(t){let n=this._cartService.getCart().reduce((r,c)=>(c.id===t&&c.quantity>1?r.push(he(W({},c),{quantity:c.quantity-1})):c.id!==t&&r.push(c),r),[]);this._cartService.setCart(n)}getItemQuantity(t){return this._cartService.getCart().find(e=>e.id===t)?.quantity||0}getTotalItems(){return this._cartService.getCart().reduce((t,e)=>t+e.quantity,0)}getTotalPrice(){return this._cartService.getCart().reduce((t,e)=>t+e.price*e.quantity,0)}setShowCartSummary(t){console.log("SHOW CART");let e=this._cartService.getCart();this.isProviderView?this._route.navigate(["providers/info/view-cart"],{state:{isProvider:this.isProviderView,data:e}}):this._route.navigate(["customers/info/view-cart"],{state:{data:e}})}productView(t){this._providerInfo.selectedProductForView=t,this._providerInfo.viewType$.next("PRODUCT_VIEW")}extractProductFromTree(t,e=[],n=new Set){return t?.forEach(r=>{let c=r?.products?.map(p=>{let f=[];try{f=JSON.parse(p.variants)}catch{console.warn("Invalid variants JSON for product",p.product_id)}return{id:p.product_id,name:p.product_name,img:p.product_image_url||"",variants:p.variants,variantsJson:f,isService:p.is_service,productSubType:p.product_subtype,formRegistrationId:p.form_registration_id}});c?.length&&c.forEach(p=>{n.has(p.id)||(n.add(p.id),e.push(p))}),r?.children?.length&&this.extractProductFromTree(r.children,e,n)}),e}selectTab(t){this.selectedTab=t,this.selectedTab==="on_demand"?this.activeBottomTabIndex=0:this.activeBottomTabIndex=2}onInputChange(t){let e=t.target.value;this.searchSubject.next(e)}showProductDetails(t){this.router.navigate(["customers/info/product-detail"],{state:{product:t}})}redirectToCart(t){this.router.url.includes("customers")?this.router.navigate(["customers/info/view-cart"],{state:{isProvider:!1,data:t}}):this.router.navigate(["providers/info/view-cart"],{state:{isProvider:!0,data:t}})}mapProductsToCategory(t){return t.map(e=>{let n=[],r="";if(typeof e.variants=="string"){r=e.variants;try{n=JSON.parse(e.variants)}catch{n=[]}}else n=e.variants,r=JSON.stringify(e.variants);return{id:e.product_id,name:e.product_name,img:e.product_image_url,images:e.product_image_url?.[0]||"",variants:r,variantsJson:n,isService:e.is_service,productSubType:e.product_subtype,formRegistrationId:e.form_registration_id??null}})}selectService(t){this.isService=t}onFilterSelect(t){t.hide()}getSelectedFilterLabel(){this.isService=this.isService;let t=this.filterOptions.find(e=>e.value===this.isService);return t?t.label:null}get nonServiceProducts(){return this.products.filter(t=>!t.isService)}get serviceProducts(){return this.products.filter(t=>t.isService)}book(t){t.productSubType!="standard"?this.openDialog(t):(this._cartService.setCart([t]),this.redirectToCart(t))}openDialog(t){let e=(t.productSubType||"").toUpperCase();if(e in Vn){let n=e;this.dialog.open(ir,{width:"350px",data:{dialogType:Vn[n],providerId:this.provider?.provider_id,data:t}}).afterClosed().subscribe(c=>{c&&console.log("Dialog Result:",c)})}else console.warn("Unknown product subtype:",e)}getActionLabel(t){return this.selectedProduct=t,t.productSubType==="subscribe"?"SUBSCRIBE":"ADD"}handleProductClick(t,e){e.stopPropagation(),t.productSubType==="subscribe"?this.openDialog(t):this.isProviderView?this.addToCart(t):this.showProductDetails(t)}handleProductAction(t,e){e.stopPropagation(),this.selectedProduct=t,t.productSubType==="subscribe"?this.openDialog(t):this.addToCart(t)}static \u0275fac=function(e){return new(e||i)(y(X),y(le),y(De),y(sn),y(X),y(Yt))};static \u0275cmp=w({type:i,selectors:[["provider-catalogue"]],inputs:{activeIndex:"activeIndex",isProviderView:"isProviderView",provider:"provider",hidden:"hidden"},features:[Ee],decls:7,vars:4,consts:[["noProducts",""],["filterOverlay",""],["addProductBtn",""],[4,"ngIf"],[3,"provider",4,"ngIf"],["class","bottom-tab flex justify-between items-center fixed bottom-0 left-0 right-0",4,"ngIf"],["class","app-features-list",4,"ngIf"],[1,"flex","bg-white","content-container","gap-1"],[1,"w-1/4","sticky","self-start","bg-white","rounded-xl","p-2","overflow-y-auto","h-[calc(100vh-1rem)]","shadow-[0_0_15px_rgba(0,0,0,0.15)]",3,"ngClass"],["class","flex flex-col items-center p-2 border-b cursor-pointer categories-item hover:shadow-md",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"w-3/4","h-[calc(100vh-7rem)]","overflow-y-auto","pr-2","scroll-smooth","product-section-container"],["pInputText","","type","search",1,"search-input",3,"ngModelChange","input","placeholder","ngModel"],[1,"flex","filter-row"],[1,"flex","flex-col","items-start","gap-1","filter-dropdown-wrap","relative"],[1,"flex","items-center","gap-2"],["name","ListFilter",1,"w-4","h-4","text-purple-600","cursor-pointer",3,"click"],["class","text-[10px] text-gray-600",4,"ngIf"],[3,"dismissable"],["optionLabel","label","optionValue","value",1,"w-[140px]","text-sm","custom-dropdown",3,"ngModelChange","onChange","options","ngModel","placeholder","showClear"],["severity","secondary",3,"value","click",4,"ngFor","ngForOf"],["class","view-cart-wrap animate-bounce-in",3,"click",4,"ngIf"],[1,"app-features-list"],[1,"pi","pi-shopping-cart"],[1,"pi","pi-angle-right"],[1,"pi","pi-ticket"],[1,"flex","flex-col","items-center","p-2","border-b","cursor-pointer","categories-item","hover:shadow-md",3,"click","ngClass"],[1,"w-12","h-12","object-cover","rounded-full","mb-2",3,"src","alt"],[1,"text-xs","text-center","text-gray-700"],[1,"text-[10px]","text-gray-600"],["severity","secondary",3,"click","value"],[1,"grid","grid-cols-2","gap-1","product-list-container"],[4,"ngFor","ngForOf"],[1,"bg-white","rounded-2xl","shadow-xl","p-3","w-[150px]","flex","flex-col","items-center","text-center","relative",3,"click"],[1,"mb-2","h-[112px]","flex","items-center","justify-center"],[1,"h-full","w-auto","object-contain","cursor-pointer",3,"click","src"],["class","absolute top-1 right-1 bg-white rounded-full p-1 shadow",3,"click",4,"ngIf"],[1,"text-xs","font-medium","text-gray-800","mb-1","leading-tight","line-clamp-2"],["optionLabel","size","styleClass","custom-dropdown w-full text-xs",3,"ngModelChange","click","scrollHeight","options","ngModel","placeholder"],[1,"flex","justify-between","items-center","w-full","mt-auto"],[1,"font-bold","text-sm","text-gray-800"],[1,"mt-1","product-price-wrap"],[4,"ngIf","ngIfElse"],[1,"absolute","top-1","right-1","bg-white","rounded-full","p-1","shadow",3,"click"],["src","assets/images/pngs/subscribe.png","alt","Subscribe Icon",1,"w-4","h-4","object-contain"],[1,"w-6","h-6","flex","items-center","justify-center","bg-purple-800","hover:bg-purple-900","text-white","rounded-full",3,"click"],[1,"pi","pi-minus","text-xs"],[1,"text-sm","font-medium","text-gray-800"],[1,"pi","pi-plus","text-xs"],[1,"bg-purple-800","hover:bg-purple-900","text-white","text-[8px]","px-4","py-1","rounded-full",3,"click"],[1,"enq-product-list-container","flex","flex-col","gap-3"],[1,"flex","items-start","gap-3","bg-purple-100","rounded-2xl","shadow-md","border","border-gray-200","p-3","m-2"],[1,"w-14","h-14","shrink-0","rounded-md","overflow-hidden","border","border-gray-200"],["alt","Product Image",1,"w-full","h-full","object-contain",3,"src"],[1,"flex","flex-col","justify-between","flex-1","min-w-0","bg-purle-300"],[1,"flex","justify-between","items-start"],[1,"text-sm","font-semibold","text-gray-900","leading-tight","truncate"],[1,"pi","pi-phone","text-purple-800","text-base"],["class","mt-1 text-sm font-semibold text-gray-800",4,"ngIf"],[1,"mt-2","py-1.5","px-4","text-xs","font-medium","rounded-full","bg-purple-900","text-white","hover:bg-purple-800","transition","w-fit","self-end",3,"click"],[1,"mt-1","text-sm","font-semibold","text-gray-800"],[1,"view-cart-wrap","animate-bounce-in",3,"click"],[1,"cart-icon"],[1,"flex","flex-col"],[1,"text-sm"],[1,"arrow-icon","pi","pi-chevron-right"],[1,"p-4","text-center","text-gray-500","font-semibold"],[3,"provider"],[1,"bottom-tab","flex","justify-between","items-center","fixed","bottom-0","left-0","right-0"],[3,"activeIndex","activeIndexChange",4,"ngIf"],[3,"activeIndexChange","activeIndex"],[3,"header"]],template:function(e,n){e&1&&(L(0),_(1,ps,22,22,"ng-container",3)(2,ms,3,3,"ng-template",null,0,Te),q(),_(4,us,1,1,"app-provider-subscription",4)(5,gs,1,1,"provider-subscription",4)(6,_s,2,1,"div",5)),e&2&&(a(),d("ngIf",n.activeBottomTabIndex===0),a(3),d("ngIf",n.activeBottomTabIndex===1),a(),d("ngIf",n.activeBottomTabIndex===2),a(),d("ngIf",!n.isProviderView))},dependencies:[ye,G,E,ct,Be,Q,j,Ie,Ir,fr,gr,Or,Kt,yt,gn,N],styles:[".app-features-list[_ngcontent-%COMP%]{background-color:#fff}.app-features-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;justify-content:space-between;border-bottom:1px solid grey;padding:.2rem;align-items:center}.top-3rem[_ngcontent-%COMP%]{top:3rem}.content-container[_ngcontent-%COMP%]{margin-top:.5rem;margin-bottom:3rem}.content-container[_ngcontent-%COMP%]   .top-44-cat-fil[_ngcontent-%COMP%]{top:3rem}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]{display:flex}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-icon-wrap[_ngcontent-%COMP%]{width:1.5rem}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   p-tag[_ngcontent-%COMP%]{margin-left:.25rem}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   p-tag[_ngcontent-%COMP%]     .p-tag.p-tag-secondary{background-color:#f5e5ff;color:#323743;font-weight:400}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .product-list-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]     p-dropdown .p-dropdown.p-component.p-inputwrapper .p-element.p-dropdown-label.p-inputtext{padding:0;padding-left:.5rem}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .product-list-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]     p-dropdown p-overlay .p-overlay.p-component ul.p-dropdown-items p-dropdownitem.p-element li.p-element.p-dropdown-item{padding-left:.5rem}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .product-list-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-price-wrap[_ngcontent-%COMP%]{display:flex;justify-content:center}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .product-list-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-price-wrap[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{background-color:#5d157c}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .product-list-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-price-wrap[_ngcontent-%COMP%]   .incremental-btn-wrap[_ngcontent-%COMP%]{display:flex;justify-content:center}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .product-list-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-price-wrap[_ngcontent-%COMP%]   .incremental-btn-wrap[_ngcontent-%COMP%]   .minus-button[_ngcontent-%COMP%], .content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .product-list-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-price-wrap[_ngcontent-%COMP%]   .incremental-btn-wrap[_ngcontent-%COMP%]   .plus-button[_ngcontent-%COMP%]{background-color:#5d157c}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .product-list-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-price-wrap[_ngcontent-%COMP%]   .incremental-btn-wrap[_ngcontent-%COMP%]   .minus-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .product-list-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-price-wrap[_ngcontent-%COMP%]   .incremental-btn-wrap[_ngcontent-%COMP%]   .plus-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.6rem}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .enq-product-list-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]{display:flex}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .enq-product-list-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   div.image-wrapper[_ngcontent-%COMP%]{width:30%}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .enq-product-list-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   div.product-detail[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .enq-product-list-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   div.product-detail[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#5d157c;font-size:.875rem;font-weight:700}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .enq-product-list-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   div.product-detail[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:.688rem;color:#9421c5}.content-container[_ngcontent-%COMP%]   .product-section-container[_ngcontent-%COMP%]   .enq-product-list-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   div.product-detail[_ngcontent-%COMP%]   .btn-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#5d157c;color:#fff;font-size:.875rem;font-weight:400;margin-right:.5rem;padding:.25rem .75rem;border-radius:1rem}.categories-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#430f59;font-weight:700}.categories-item.selected-item[_ngcontent-%COMP%]{background-color:#f5e5ff}.view-card-wrap[_ngcontent-%COMP%]{position:sticky;border-radius:.75rem;bottom:5rem;right:0;width:8rem;left:8rem;border:1px solid #5d157c;color:#5d157c;display:flex;justify-content:space-around;height:2.5rem;align-items:center;background-color:#fff}.bottom-tab[_ngcontent-%COMP%]   p-tabView[_ngcontent-%COMP%]{width:100%}.bottom-tab[_ngcontent-%COMP%]   p-tabView[_ngcontent-%COMP%]     .p-tabview.p-component .p-tabview-nav-container .p-tabview-nav-content ul.p-tabview-nav li{flex:1}.bottom-tab[_ngcontent-%COMP%]   p-tabView[_ngcontent-%COMP%]     .p-tabview.p-component .p-tabview-nav-container .p-tabview-nav-content ul.p-tabview-nav li a{color:#9095a1;font-size:1rem;justify-content:center}.bottom-tab[_ngcontent-%COMP%]   p-tabView[_ngcontent-%COMP%]     .p-tabview.p-component .p-tabview-nav-container .p-tabview-nav-content ul.p-tabview-nav li.p-highlight{border-top:.15rem solid #243156;border-bottom:none}.bottom-tab[_ngcontent-%COMP%]   p-tabView[_ngcontent-%COMP%]     .p-tabview.p-component .p-tabview-nav-container .p-tabview-nav-content ul.p-tabview-nav li.p-highlight a span.p-tabview-title{color:#243156}.bottom-tab[_ngcontent-%COMP%]   p-tabView[_ngcontent-%COMP%]     .p-tabview.p-component .p-tabview-panels{display:none}.tab-switcher[_ngcontent-%COMP%]{display:flex;width:97%;max-width:400px;border:2px solid #7b1fa2;border-radius:12px;overflow:hidden;margin:5px;background-color:#7b1fa2}.tab[_ngcontent-%COMP%]{flex:1;padding:5px 0;text-align:center;border:none;outline:none;font-size:14px;font-weight:500;background-color:transparent;color:#fff;cursor:pointer;transition:all .3s ease}.tab.active[_ngcontent-%COMP%]{background-color:#fff;color:#7b1fa2}.search-input[_ngcontent-%COMP%]{margin:5px;border:1px solid black;border-radius:14px;padding:2px 10px;width:97%}.view-cart-wrap[_ngcontent-%COMP%]{position:fixed;bottom:15px;left:50%;transform:translate(-50%);background:linear-gradient(135deg,#5d157c,#8e20bd,#3c0e50);color:#fff;padding:12px 20px;border-radius:30px;display:flex;box-shadow:0 4px 12px #0003;font-weight:700;cursor:pointer;transition:transform .3s ease;z-index:1000;width:50%;align-items:center;justify-content:space-between}.view-cart-wrap[_ngcontent-%COMP%]:hover{transform:translate(-50%) scale(1.05)}.cart-icon[_ngcontent-%COMP%]{position:relative;margin-right:10px}.cart-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px}.cart-count[_ngcontent-%COMP%]{position:absolute;top:-6px;right:-6px;background:#f5e8ff;color:#5d157c;border-radius:50%;padding:2px 6px;font-size:12px;font-weight:700}.text[_ngcontent-%COMP%]{margin-right:8px}.arrow[_ngcontent-%COMP%]{font-size:18px}@keyframes _ngcontent-%COMP%_bounceIn{0%{transform:translateY(100px);opacity:0}60%{transform:translateY(-10px);opacity:1}80%{transform:translateY(5px)}to{transform:translateY(0)}}.animate-bounce-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounceIn .6s ease-out}.arrow-icon[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:24px;height:24px;border-radius:50%;background:linear-gradient(135deg,#6a1b9a,#ab47bc);color:#fff;font-weight:700;font-size:14px;cursor:pointer;transition:background .3s ease}.arrow-icon[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5e158b,#9b3fb2)}"]})};function bs(i,t){if(i&1){let e=I();s(0,"div",4)(1,"div")(2,"textarea",5),ce("ngModelChange",function(r){x(e);let c=m();return se(c.description,r)||(c.description=r),P(r)}),l(3,"            "),o()(),s(4,"div",6)(5,"button"),l(6),u(7,"translate"),o()()()}if(i&2){let e=m();a(2),ae("ngModel",e.description),a(4),S(" ",g(7,2,"providerInfo.save"),"")}}function Cs(i,t){if(i&1&&(s(0,"div",7),l(1),o()),i&2){let e=m();a(),S(" ",e.provider==null?null:e.provider.about_us," ")}}var St=class i{userType="CUSTOMER";enumUserTypes=qe;provider=void 0;description="";static \u0275fac=function(e){return new(e||i)};static \u0275cmp=w({type:i,selectors:[["about-us"]],inputs:{userType:"userType",provider:"provider"},decls:6,vars:5,consts:[[1,"about-us-container"],[1,"title"],["class","desc desc-input",4,"ngIf"],["class","desc ",4,"ngIf"],[1,"desc","desc-input"],["rows","10","cols","43","pInputTextarea","",3,"ngModelChange","ngModel"],[1,"btn-wrap"],[1,"desc"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1),l(2),u(3,"translate"),o(),_(4,bs,8,4,"div",2)(5,Cs,2,1,"div",3),o()),e&2&&(a(2),v(g(3,3,"providerInfo.about_us")),a(2),d("ngIf",n.userType===n.enumUserTypes.PROVIDER),a(),d("ngIf",n.userType===n.enumUserTypes.CUSTOMER))},dependencies:[E,nn,Q,j,Ie,N],styles:[".about-us-container[_ngcontent-%COMP%]{padding:1rem}.about-us-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#4f126a;font-size:14px;font-weight:700}.about-us-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background:#f9f2fd;border-radius:5px;height:auto;padding:.4rem;border:1px solid rgba(0,0,0,.2)}.about-us-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus-visible{border:1px solid;outline:0}.about-us-container[_ngcontent-%COMP%]   .btn-wrap[_ngcontent-%COMP%]{margin-top:2rem;text-align:center}.about-us-container[_ngcontent-%COMP%]   .btn-wrap[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#5d157c;color:#fff;padding:.2rem 1rem;border-radius:4px}"]})};function Ps(i,t){i&1&&(s(0,"div",15),l(1),u(2,"translate"),o()),i&2&&(a(),S(" ",g(2,1,"providerInfo.contact.required_callus")," "))}function ys(i,t){i&1&&(s(0,"div",15),l(1),u(2,"translate"),o()),i&2&&(a(),S(" ",g(2,1,"providerInfo.contact.required_contactus")," "))}function Ss(i,t){i&1&&(s(0,"div",15),l(1),u(2,"translate"),o()),i&2&&(a(),S(" ",g(2,1,"providerInfo.contact.required_location")," "))}function Is(i,t){i&1&&(s(0,"div",15),l(1),u(2,"translate"),o()),i&2&&(a(),S(" ",g(2,1,"providerInfo.contact.required_facebook")," "))}function Os(i,t){i&1&&(s(0,"div",15),l(1),u(2,"translate"),o()),i&2&&(a(),S(" ",g(2,1,"providerInfo.contact.required_instagram")," "))}function Ms(i,t){i&1&&(s(0,"div",15),l(1),u(2,"translate"),o()),i&2&&(a(),S(" ",g(2,1,"providerInfo.contact.required_linkedin")," "))}var It=class i{contactUsForm;onSubmit(){}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=w({type:i,selectors:[["contact-setup-form"]],inputs:{contactUsForm:"contactUsForm"},decls:43,vars:40,consts:[[3,"ngSubmit","formGroup"],[1,"form-group"],["for","callUs"],["id","callUs","type","number","formControlName","callUs",3,"placeholder"],["class","error-message",4,"ngIf"],["for","contactUs"],["rows","10","cols","43","pInputTextarea","","formControlName","contactUs"],["for","location"],["id","location","type","text","formControlName","location",3,"placeholder"],["for","facebook"],["id","facebook","type","text","formControlName","facebook",3,"placeholder"],["for","instagram"],["id","instagram","type","text","formControlName","instagram",3,"placeholder"],["for","linkedin"],["id","linkedin","type","text","formControlName","linkedin",3,"placeholder"],[1,"error-message"]],template:function(e,n){if(e&1&&(s(0,"form",0),C("ngSubmit",function(){return n.onSubmit()}),s(1,"div",1)(2,"label",2),l(3),u(4,"translate"),o(),h(5,"input",3),u(6,"translate"),_(7,Ps,3,3,"div",4),o(),s(8,"div",1)(9,"label",5),l(10),u(11,"translate"),o(),s(12,"textarea",6),l(13,"      "),o(),_(14,ys,3,3,"div",4),o(),s(15,"div",1)(16,"label",7),l(17),u(18,"translate"),o(),h(19,"input",8),u(20,"translate"),_(21,Ss,3,3,"div",4),o(),s(22,"div",1)(23,"label",9),l(24),u(25,"translate"),o(),h(26,"input",10),u(27,"translate"),_(28,Is,3,3,"div",4),o(),s(29,"div",1)(30,"label",11),l(31),u(32,"translate"),o(),h(33,"input",12),u(34,"translate"),_(35,Os,3,3,"div",4),o(),s(36,"div",1)(37,"label",13),l(38),u(39,"translate"),o(),h(40,"input",14),u(41,"translate"),_(42,Ms,3,3,"div",4),o()()),e&2){let r,c,p,f,b,O;d("formGroup",n.contactUsForm),a(3),v(g(4,18,"providerInfo.contact.call_us")),a(2),V("placeholder",g(6,20,"providerInfo.contact.name_ph")),a(2),d("ngIf",((r=n.contactUsForm.get("callUs"))==null?null:r.invalid)&&((r=n.contactUsForm.get("callUs"))==null?null:r.touched)),a(3),S(" ",g(11,22,"providerInfo.contact.contact_us")," "),a(4),d("ngIf",((c=n.contactUsForm.get("contactUs"))==null?null:c.invalid)&&((c=n.contactUsForm.get("contactUs"))==null?null:c.touched)),a(3),S(" ",g(18,24,"providerInfo.contact.location"),""),a(2),V("placeholder",g(20,26,"providerInfo.contact.location_ph")),a(2),d("ngIf",((p=n.contactUsForm.get("location"))==null?null:p.invalid)&&((p=n.contactUsForm.get("location"))==null?null:p.touched)),a(3),S(" ",g(25,28,"providerInfo.contact.facebook"),""),a(2),V("placeholder",g(27,30,"providerInfo.contact.facebook_ph")),a(2),d("ngIf",((f=n.contactUsForm.get("facebook"))==null?null:f.invalid)&&((f=n.contactUsForm.get("facebook"))==null?null:f.touched)),a(3),S(" ",g(32,32,"providerInfo.contact.instagram"),""),a(2),V("placeholder",g(34,34,"providerInfo.contact.instagram_ph")),a(2),d("ngIf",((b=n.contactUsForm.get("instagram"))==null?null:b.invalid)&&((b=n.contactUsForm.get("instagram"))==null?null:b.touched)),a(3),S(" ",g(39,36,"providerInfo.contact.linkedin"),""),a(2),V("placeholder",g(41,38,"providerInfo.contact.linkedin_ph")),a(2),d("ngIf",((O=n.contactUsForm.get("linkedin"))==null?null:O.invalid)&&((O=n.contactUsForm.get("linkedin"))==null?null:O.touched))}},dependencies:[E,nn,ve,Q,Jt,j,Z,ee,re,N],styles:[".form-group[_ngcontent-%COMP%]{font-size:.875rem;color:#4f126a;display:flex;flex-direction:column;margin-top:.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:#f9f2fd;height:2.25rem;border-radius:5px;padding-left:1rem;border:1px solid rgba(0,0,0,.2)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{border:1px solid;outline:0}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background:#f9f2fd;border-radius:5px;height:auto;padding:.4rem;border:1px solid rgba(0,0,0,.2)}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus-visible{border:1px solid;outline:0}.form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;font-size:12px}"]})};function ks(i,t){if(i&1&&(s(0,"div",3),h(1,"contact-setup-form",4),s(2,"div",5)(3,"button"),l(4),u(5,"translate"),o()()()),i&2){let e=m();a(),d("contactUsForm",e.contactUsForm),a(3),v(g(5,2,"providerInfo.contact.save"))}}function Es(i,t){if(i&1&&(s(0,"div",8)(1,"div",9),l(2),u(3,"camelToWords"),o(),s(4,"div",6),l(5),o()()),i&2){let e=t.$implicit,n=m(2);d("ngClass",e),a(2),v(g(3,3,e)),a(3),v(n.dataInfo[e])}}function Ts(i,t){if(i&1&&(s(0,"div",6),_(1,Es,6,5,"div",7),o()),i&2){let e=m();a(),d("ngForOf",e.dataObjectKeys)}}var Ot=class i{constructor(t,e){this.fb=t;this.translate=e;this.contactUsForm=this.fb.group({callUs:["",M.required],contactUs:["",[M.required]],location:["",[M.required]],facebook:["",[M.required]],instagram:["",[M.required]],linkedin:["",[M.required]]}),this.dataObjectKeys=Object.keys(this.dataInfo)}userType="CUSTOMER";provider=void 0;enumUserTypes=qe;dataInfo={callUs:"",contactUs:"",facebook:"",location:"",linkedIn:"",instagram:""};dataObjectKeys=[];contactUsForm;ngOnInit(){this.loadTranslations()}loadTranslations(){this.translate.get(["contactUs.sample_phone","contactUs.sample_description","contactUs.sample_facebook","contactUs.sample_location","contactUs.sample_linkedin","contactUs.sample_instagram"]).subscribe(t=>{this.dataInfo={callUs:t["contactUs.sample_phone"],contactUs:t["contactUs.sample_description"],facebook:t["contactUs.sample_facebook"],location:t["contactUs.sample_location"],linkedIn:t["contactUs.sample_linkedin"],instagram:t["contactUs.sample_instagram"]}})}onSubmit(){this.contactUsForm.valid&&console.log("Form Data:",this.contactUsForm.value)}buttonClicked(t){t.buttonType===1?this.onSubmit():t.buttonType===2&&this.onCancel()}onCancel(){}static \u0275fac=function(e){return new(e||i)(y(te),y(Se))};static \u0275cmp=w({type:i,selectors:[["contact-us"]],inputs:{userType:"userType",provider:"provider"},decls:3,vars:2,consts:[[1,"contact-us-container"],["class","desc desc-input",4,"ngIf"],["class","desc ",4,"ngIf"],[1,"desc","desc-input"],[3,"contactUsForm"],[1,"btn-wrap"],[1,"desc"],["class","wrap",3,"ngClass",4,"ngFor","ngForOf"],[1,"wrap",3,"ngClass"],[1,"label"]],template:function(e,n){e&1&&(s(0,"div",0),_(1,ks,6,4,"div",1)(2,Ts,2,1,"div",2),o()),e&2&&(a(),d("ngIf",n.userType===n.enumUserTypes.PROVIDER),a(),d("ngIf",n.userType===n.enumUserTypes.CUSTOMER))},dependencies:[ye,G,E,It,kr,N],styles:[".contact-us-container[_ngcontent-%COMP%]{padding:1rem}.contact-us-container[_ngcontent-%COMP%]   .desc.desc-input[_ngcontent-%COMP%]   .btn-wrap[_ngcontent-%COMP%]{text-align:center;margin-top:2rem}.contact-us-container[_ngcontent-%COMP%]   .desc.desc-input[_ngcontent-%COMP%]   .btn-wrap[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:4px;background-color:#5d157c;padding:.4rem 1rem;color:#fff}.contact-us-container[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:14px;color:#4f126a;font-weight:700}.contact-us-container[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{font-size:14px;color:#4f126a;font-weight:400;min-height:1rem}"]})};var Jr=i=>({"ring-2 ring-blue-400":i}),Fs=(i,t,e)=>({"background-color":i,color:t,"border-color":e});function Ns(i,t){if(i&1){let e=I();s(0,"img",21),C("click",function(){let r=x(e).index,c=m();return P(c.selectImage(r))}),o()}if(i&2){let e=t.$implicit,n=t.index,r=m();_e("selected",r.selectedImage===n),d("src",e,Ce)("alt","Thumbnail "+n)}}function Bs(i,t){if(i&1){let e=I();L(0),s(1,"button",22),C("click",function(){let r=x(e).$implicit,c=m(2);return P(c.selectSize(r))}),l(2),u(3,"translate"),o(),q()}if(i&2){let e=t.$implicit,n=m(2);a(),d("ngClass",Pe(5,Jr,n.selectedSize===e)),a(),Y(" ",g(3,3,"providerInfo.product.size"),": ",e," ")}}function Rs(i,t){if(i&1&&(L(0),_(1,Bs,4,7,"ng-container",11),q()),i&2){let e=m();a(),d("ngForOf",e.uniqueSizes)}}function As(i,t){if(i&1){let e=I();L(0),s(1,"button",23),C("click",function(){x(e);let r=m().$implicit,c=m();return P(c.selectColor(r))}),l(2),u(3,"translate"),o(),q()}if(i&2){let e=m().$implicit,n=m();a(),d("ngStyle",Oi(6,Fs,n.getColorBg(e),n.getColorText(e),n.getColorBorder(e)))("ngClass",Pe(10,Jr,n.selectedColor===e)),a(),Y(" ",g(3,4,"providerInfo.product.color"),": ",e," ")}}function Vs(i,t){if(i&1&&(L(0),_(1,As,4,12,"ng-container",10),q()),i&2){let e=t.$implicit;a(),d("ngIf",e)}}function Us(i,t){i&1&&(s(0,"div",24),l(1),u(2,"translate"),o()),i&2&&(a(),S(" ",g(2,1,"providerInfo.product.no_variants")," "))}var Je=class i{constructor(t,e,n){this._providerInfoSer=t;this.router=e;this.cartService=n;let r=this.router.getCurrentNavigation();this.productDetail=r?.extras.state?.product}selectedImage=0;provider;selectedProduct;product;variants=[];productDetail;images=[];originalPrice=99.99;currentPrice=79.99;selectedVariant=void 0;parsedVariants=[];uniqueSizes=[];uniqueColors=[];selectedSize=null;selectedColor=null;specialOffers=[{title:"Special Offer",description:"Buy 1 Get 1 Free",expiry:"Ends in 5 days"},{title:"Limited Deal",description:"20% Off Over $100",expiry:"Expires soon"}];ngOnInit(){this.selectedProduct=this.productDetail,this.selectedProduct.id&&this._providerInfoSer.getProductDetails(this.selectedProduct.id).subscribe(t=>{this.product=t,this.variants=JSON.parse(t.variants),this.selectedVariant=this.variants[0],this.images=this.product?.product_image_url,this.parsedVariants=JSON.parse(this.product.variants),this.uniqueSizes=[...new Set(this.parsedVariants.map(e=>e.size))],this.uniqueColors=[...new Set(this.parsedVariants.map(e=>e.color))]})}selectSize(t){this.selectedSize=t}selectColor(t){this.selectedColor=t}selectImage(t){this.selectedImage=t}selectVariant(t){this.selectedVariant=t}addToCart(){let e=[...this.cartService.getCart(),he(W({},this.productDetail),{quantity:1})];this.cartService.setCart(e),this.router.navigate(["customers/info/view-cart"])}getColorBg(t){return{Red:"#fee2e2",Blue:"#dbeafe",Green:"#fef9c3"}[t]||"#f3f4f6"}getColorText(t){return{Red:"#b91c1c",Blue:"#1d4ed8",Green:"#15803d"}[t]||"#374151"}getColorBorder(t){return{Red:"#fca5a5",Blue:"#93c5fd",Green:"#fde68a"}[t]||"#d1d5db"}static \u0275fac=function(e){return new(e||i)(y(le),y(X),y(De))};static \u0275cmp=w({type:i,selectors:[["product-details"]],inputs:{provider:"provider",selectedProduct:"selectedProduct"},decls:40,vars:33,consts:[[1,"product-detail"],[1,"main-content"],[1,"content-wrapper"],[1,"main-image"],[3,"src","alt"],[1,"thumbnail-grid"],[3,"src","alt","selected","click",4,"ngFor","ngForOf"],[1,"variants","bg-white","p-6","rounded-lg","shadow-md","w-full"],[1,"text-xl","font-bold","mb-4"],[1,"variant-options","flex","overflow-x-auto","gap-2","items-center","pb-2"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","text-gray-500 text-sm",4,"ngIf"],[1,"price"],[1,"price-content"],[1,"original-price"],[1,"current-price"],[1,"description"],[1,"footer"],[1,"add-to-cart",3,"click"],[1,"terms"],[3,"click","src","alt"],[1,"px-3","py-1","rounded-full","text-sm","font-medium","border","transition","hover:shadow-md","bg-gray-100","text-gray-700","border-gray-300","shrink-0",3,"click","ngClass"],[1,"px-3","py-1","rounded-full","text-sm","font-medium","border","transition","shrink-0",3,"click","ngStyle","ngClass"],[1,"text-gray-500","text-sm"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"main",1)(2,"div",2)(3,"div",3),h(4,"img",4),u(5,"translate"),o(),s(6,"div",5),_(7,Ns,1,4,"img",6),o(),s(8,"section",7)(9,"h2",8),l(10),u(11,"translate"),o(),s(12,"div",9),_(13,Rs,2,1,"ng-container",10)(14,Vs,2,1,"ng-container",11)(15,Us,3,3,"div",12),o()(),s(16,"section",13)(17,"h2"),l(18),u(19,"translate"),o(),s(20,"div",14)(21,"span",15),l(22),u(23,"currency"),o(),s(24,"span",16),l(25),u(26,"currency"),o()()(),s(27,"section",17)(28,"h2"),l(29),u(30,"translate"),o(),s(31,"p"),l(32),o()()()(),s(33,"footer",18)(34,"button",19),C("click",function(){return n.addToCart()}),l(35),u(36,"translate"),o(),s(37,"p",20),l(38),u(39,"translate"),o()()()),e&2&&(a(4),V("alt",g(5,15,"providerInfo.product.product_image_alt")),d("src",n.images[n.selectedImage],Ce),a(3),d("ngForOf",n.images),a(3),v(g(11,17,"providerInfo.product.variant_selection")),a(3),d("ngIf",((n.uniqueSizes==null?null:n.uniqueSizes.length)||0)>0),a(),d("ngForOf",n.uniqueColors),a(),d("ngIf",((n.uniqueSizes==null?null:n.uniqueSizes.length)||0)===0&&((n.uniqueColors==null?null:n.uniqueColors.length)||0)===0),a(3),v(g(19,19,"providerInfo.product.price_details")),a(4),v(bt(23,21,n.originalPrice,"INR")),a(3),v(bt(26,24,n.selectedVariant==null?null:n.selectedVariant.price,"INR")),a(4),v(g(30,27,"providerInfo.product.product_description")),a(3),Y("",n.product==null?null:n.product.title1,"",n.product==null?null:n.product.title2,""),a(3),v(g(36,29,"providerInfo.product.add_to_cart")),a(3),v(g(39,31,"providerInfo.product.terms")))},dependencies:[ye,G,E,wi,Ei,N],styles:["[_nghost-%COMP%]{display:block;height:100vh}.product-detail[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;position:fixed;inset:0}.header[_ngcontent-%COMP%]{background-color:#fff;padding:1rem;box-shadow:0 1px 3px #0000001a;position:sticky;top:0;z-index:10}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.main-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;-webkit-overflow-scrolling:touch;background-color:#f9fafb}.content-wrapper[_ngcontent-%COMP%]{padding:1rem 1rem 2rem}.main-image[_ngcontent-%COMP%]{margin-bottom:1rem;border-radius:.5rem;overflow:hidden;box-shadow:0 1px 3px #0000001a;background-color:#fff}.main-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:16rem;object-fit:cover}.thumbnail-grid[_ngcontent-%COMP%]{display:flex;gap:.5rem;overflow-x:auto;padding-bottom:1rem;-webkit-overflow-scrolling:touch}.thumbnail-grid[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:4rem;height:4rem;border-radius:.5rem;cursor:pointer;border:2px solid transparent;transition:border-color .2s;object-fit:cover}.thumbnail-grid[_ngcontent-%COMP%]   img.selected[_ngcontent-%COMP%]{border-color:#5d157c}.variants[_ngcontent-%COMP%]{margin-bottom:1.5rem;background-color:#fff;padding:1rem;border-radius:.5rem;box-shadow:0 1px 2px #0000000d}.variants[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin-bottom:1rem}.variants[_ngcontent-%COMP%]   .variant-options[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:.5rem}.variants[_ngcontent-%COMP%]   .size-selection[_ngcontent-%COMP%], .variants[_ngcontent-%COMP%]   .color-selection[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex-wrap:wrap}.variants[_ngcontent-%COMP%]   .size-selection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .variants[_ngcontent-%COMP%]   .color-selection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.25rem .75rem;border:1px solid #e5e7eb;border-radius:.25rem;font-size:.875rem;transition:all .2s}.variants[_ngcontent-%COMP%]   .size-selection[_ngcontent-%COMP%]   button.selected[_ngcontent-%COMP%], .variants[_ngcontent-%COMP%]   .color-selection[_ngcontent-%COMP%]   button.selected[_ngcontent-%COMP%]{background-color:#ede9fe;color:#5d157c;border-color:#5d157c}.price[_ngcontent-%COMP%]{margin-bottom:1.5rem;background-color:#fff;padding:1rem;border-radius:.5rem;box-shadow:0 1px 2px #0000000d}.price[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin-bottom:.5rem}.price-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.price-content[_ngcontent-%COMP%]   .original-price[_ngcontent-%COMP%]{color:#6b7280;text-decoration:line-through}.price-content[_ngcontent-%COMP%]   .current-price[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.description[_ngcontent-%COMP%]{margin-bottom:1.5rem;background-color:#fff;padding:1rem;border-radius:.5rem;box-shadow:0 1px 2px #0000000d}.description[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin-bottom:.5rem}.description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#4b5563;line-height:1.5}.special-offers[_ngcontent-%COMP%]{margin-bottom:1.5rem}.special-offers[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin-bottom:1rem}.special-offers[_ngcontent-%COMP%]   .offers-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.special-offers[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]{background-color:#fff;padding:1rem;border-radius:.5rem;box-shadow:0 1px 2px #0000000d}.special-offers[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:500;margin-bottom:.25rem}.special-offers[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem;color:#4b5563}.special-offers[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:#6b7280;margin-top:.25rem}.footer[_ngcontent-%COMP%]{background-color:#fff;padding:1rem;border-top:1px solid #e5e7eb;position:sticky;bottom:0;z-index:10}.footer[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]{width:100%;background-color:#5d157c;color:#fff;padding:.75rem;border-radius:.5rem;font-weight:500;transition:background-color .2s}.footer[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]:hover{background-color:#6d28d9}.footer[_ngcontent-%COMP%]   .terms[_ngcontent-%COMP%]{text-align:center;font-size:.75rem;color:#6b7280;margin-top:.5rem}"]})};function qs(i,t){i&1&&(s(0,"div",7)(1,"div",8),h(2,"div",9),s(3,"div",10),h(4,"div",11)(5,"div",12),o()(),s(6,"div",13)(7,"div",14),h(8,"div",15)(9,"div",16),o(),s(10,"div",14),h(11,"div",15)(12,"div",16),o(),s(13,"div",14),h(14,"div",15)(15,"div",16),o()(),s(16,"div",17),h(17,"div",18)(18,"div",18)(19,"div",18),o()())}function Gs(i,t){if(i&1){let e=I();s(0,"div",27),C("click",function(){x(e);let r=m(3);return P(r.setActiveTab(0))}),l(1),u(2,"translate"),o()}if(i&2){let e=m(3);_e("active",e.activeTabIndex===0),a(),S(" ",g(2,3,"providerInfo.explore")," ")}}function js(i,t){if(i&1){let e=I();s(0,"div")(1,"div",8)(2,"div",19),l(3),o(),s(4,"div",20),C("click",function(){x(e);let r=m(2);return P(r.addFavourite())}),h(5,"i",21),o()(),s(6,"div",22)(7,"div",14),h(8,"i",23),s(9,"span"),l(10),u(11,"translate"),o()(),s(12,"div",14),h(13,"i",24),s(14,"span"),l(15),u(16,"translate"),o()(),s(17,"div",14),h(18,"i",25),s(19,"span"),l(20),u(21,"translate"),o()()(),s(22,"div",17),_(23,Gs,3,5,"div",26),s(24,"div",27),C("click",function(){x(e);let r=m(2);return P(r.setActiveTab(1))}),l(25),u(26,"translate"),o(),s(27,"div",27),C("click",function(){x(e);let r=m(2);return P(r.setActiveTab(2))}),l(28),u(29,"translate"),o()()()}if(i&2){let e=m(2);a(3),v(e.provider.display_name||"Maruthi Agency Water Service"),a(2),d("ngClass",e.isFavorite?"pi-thumbs-up-fill":"pi-thumbs-up"),a(5),S("231 ",g(11,12,"providerInfo.like"),""),a(5),v(g(16,14,"providerInfo.share")),a(5),S("4.5 ",g(21,16,"providerInfo.rated"),""),a(3),d("ngIf",!(e.providerSettings!=null&&e.providerSettings.member_only)),a(),_e("active",e.activeTabIndex===1),a(),S(" ",g(26,18,"providerInfo.about_us")," "),a(2),_e("active",e.activeTabIndex===2),a(),S(" ",g(29,20,"providerInfo.contact_us")," ")}}function zs(i,t){if(i&1&&h(0,"provider-catalogue",30),i&2){let e=m(3);d("provider",e.provider)}}function $s(i,t){if(i&1&&h(0,"about-us",31),i&2){let e=m(3);d("userType",e.userType)("provider",e.provider)}}function Hs(i,t){if(i&1&&h(0,"contact-us",31),i&2){let e=m(3);d("userType",e.userType)("provider",e.provider)}}function Js(i,t){if(i&1&&(L(0),_(1,zs,1,1,"provider-catalogue",28)(2,$s,1,2,"about-us",29)(3,Hs,1,2,"contact-us",29),q()),i&2){let e=m(2);a(),d("ngIf",e.activeTabIndex===0&&e.userType===e.userTypeEnums.CUSTOMER&&!(e.providerSettings!=null&&e.providerSettings.member_only)),a(),d("ngIf",e.activeTabIndex===1),a(),d("ngIf",e.activeTabIndex===2)}}function Ys(i,t){if(i&1&&(s(0,"div",2)(1,"div",3),l(2),u(3,"translate"),o(),s(4,"div",4),_(5,qs,20,0,"div",5)(6,js,30,22,"div",6),o(),_(7,Js,4,3,"ng-container",6),o()),i&2){let e=m();a(2),S(" ",g(3,4,"providerInfo.banner_ad")," "),a(3),d("ngIf",!e.provider),a(),d("ngIf",e.provider),a(),d("ngIf",e.provider)}}function Ws(i,t){if(i&1&&h(0,"product-details",36),i&2){let e=m(2);d("selectedProduct",e._providerInfoService.selectedProductForView)("provider",e.provider)}}function Ks(i,t){if(i&1){let e=I();s(0,"div",32),_(1,Ws,1,2,"product-details",33),s(2,"div",34),C("click",function(){x(e);let r=m();return P(r.closeProductView())}),h(3,"i",35),o()()}if(i&2){let e=m();a(),d("ngIf",e.provider)}}var Mt=class i{constructor(t,e,n,r,c,p,f){this._route=t;this.router=e;this.activatedRoute=n;this._providerInfoService=r;this.authService=c;this.providerDetail=p;this.customerService=f;let b=this.router.getCurrentNavigation();this.stateInfo=b?.extras.state}showCartSummary=!1;relativeUrl="";userType="CUSTOMER";activeTabIndex=0;userTypeEnums=qe;stateInfo;providerId=0;provider=void 0;isViewProduct=!1;providerSettings;likeCount=0;isFavorite=!1;favorites=[];tabs=[{title:"Explora",content:"Tab 1 Content"},{title:"About us",content:"Tab 2 Content"},{title:"Contact us",content:"Tab 3 Content"}];ngOnInit(){this.relativeUrl=this.router.url,this.stateInfo?.providerId&&(this.providerId=this.stateInfo.providerId,this._providerInfoService.getProviderDetails(this.providerId).subscribe(t=>{this.provider=t.data,this.providerDetail.setData(this.provider)})),this.relativeUrl.includes("provider")&&(this.userType="PROVIDER",this.setProviderTabIndex()),this.relativeUrl.includes("customer")&&(this.userType="CUSTOMER",this.activeTabIndex=0,this._providerInfoService.getProviderSettings(this.providerId).subscribe(t=>{this.providerSettings=t,this.userType==="CUSTOMER"&&(this.providerSettings?.member_only?this.activeTabIndex=1:this.activeTabIndex=0)})),this._providerInfoService.viewType$.subscribe(t=>{t==="PRODUCT_VIEW"?this.isViewProduct=!0:t==="PROVIDER_VIEW"&&(this.isViewProduct=!1)}),this.loadFavorites()}addFavourite(){console.log("ID-->",this.providerId),this.isFavorite?this.customerService.removeFavorite(this.providerId.toString()).subscribe({next:t=>{console.log("Removed from favorites:",t),this.isFavorite=!1,this.loadFavorites()},error:t=>{console.error("Error removing from favorites:",t)}}):this.customerService.addFavorites(this.providerId).subscribe({next:t=>{console.log("Added to favorites:",t),this.isFavorite=!0,this.loadFavorites()},error:t=>{console.error("Error adding to favorites:",t)}})}loadFavorites(){this.customerService.loadFavorites(),console.log("PID-->",this.providerId),this.customerService._favorites$.subscribe(t=>{t&&(this.favorites=t,console.log("FAV->",this.favorites),this.isFavorite=this.favorites.some(e=>e.provider_id==this.providerId.toString()),console.log("Current provider favorite status:",this.isFavorite))})}setActiveTab(t){this.activeTabIndex=t,t===0&&this.userType==="PROVIDER"&&this.router.navigate(["providers","dashboard"])}indexChanged(t){t===0&&this.userType==="PROVIDER"&&this.router.navigate(["providers","dashboard"])}setProviderTabIndex(){this.stateInfo.link==="about-us"&&(this.activeTabIndex=1),this.stateInfo.link==="contact-us"&&(this.activeTabIndex=2)}closeProductView(){this._providerInfoService.viewType$.next("PROVIDER_VIEW")}static \u0275fac=function(e){return new(e||i)(y(X),y(X),y(Ht),y(le),y(H),y(dt),y(wr))};static \u0275cmp=w({type:i,selectors:[["app-provider-info"]],decls:2,vars:2,consts:[["class","text-gray-800 font-sans min-h-screen provider-screen",4,"ngIf"],["class","product-view-container",4,"ngIf"],[1,"text-gray-800","font-sans","min-h-screen","provider-screen"],[1,"banner-ad","flex","items-center","justify-center"],[1,"title-card"],["class","skeleton-loader",4,"ngIf"],[4,"ngIf"],[1,"skeleton-loader"],[1,"business-header"],[1,"skeleton-business-name"],[1,"skeleton-heart-section","hidden"],[1,"skeleton-heart-icon"],[1,"skeleton-like-text"],[1,"engagement-metrics","hidden"],[1,"metric-item"],[1,"skeleton-icon"],[1,"skeleton-text"],[1,"nav-tabs"],[1,"skeleton-tab"],[1,"business-name"],[1,"heart-section",3,"click"],[1,"pi","heart-icon",3,"ngClass"],[1,"engagement-metrics"],[1,"pi","pi-heart"],[1,"pi","pi-share-alt"],[1,"pi","pi-star"],["class","nav-tab",3,"active","click",4,"ngIf"],[1,"nav-tab",3,"click"],["style",`position: relative;
    top: -35px;`,3,"provider",4,"ngIf"],[3,"userType","provider",4,"ngIf"],[2,"position","relative","top","-35px",3,"provider"],[3,"userType","provider"],[1,"product-view-container"],[3,"selectedProduct","provider",4,"ngIf"],[1,"close-product-view-wrap",3,"click"],[1,"pi","pi-times-circle"],[3,"selectedProduct","provider"]],template:function(e,n){e&1&&_(0,Ys,8,6,"div",0)(1,Ks,4,1,"div",1),e&2&&(d("ngIf",!n.isViewProduct),a(),d("ngIf",n.isViewProduct))},dependencies:[ye,E,He,St,Ot,Je,N],styles:['.provider-screen[_ngcontent-%COMP%]{background-color:#fff}.provider-screen[_ngcontent-%COMP%]   .banner-ad[_ngcontent-%COMP%]{height:15rem;background:linear-gradient(135deg,#1e293b,#334155);position:absolute;width:100%;top:0;left:0;z-index:-1}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]{margin:auto;margin-top:10rem;background:#fff;border-radius:16px;padding:24px;position:relative;top:-50px;z-index:1;width:95%;box-shadow:0 4px 20px #00000014;border:1px solid #f3f4f6}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]   .skeleton-business-name[_ngcontent-%COMP%]{width:200px;height:28px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite;border-radius:4px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]   .skeleton-heart-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]   .skeleton-heart-section[_ngcontent-%COMP%]   .skeleton-heart-icon[_ngcontent-%COMP%]{width:20px;height:20px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite;border-radius:50%}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]   .skeleton-heart-section[_ngcontent-%COMP%]   .skeleton-like-text[_ngcontent-%COMP%]{width:60px;height:12px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite;border-radius:2px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .engagement-metrics[_ngcontent-%COMP%]{display:flex;justify-content:space-around;padding:5px 0}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .engagement-metrics[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .engagement-metrics[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]   .skeleton-icon[_ngcontent-%COMP%]{width:16px;height:16px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite;border-radius:50%}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .engagement-metrics[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]   .skeleton-text[_ngcontent-%COMP%]{width:60px;height:14px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite;border-radius:2px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]{display:flex;width:100%;position:relative;margin:0 -20px;padding:0 20px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .skeleton-tab[_ngcontent-%COMP%]{flex:1;height:14px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite;border-radius:2px;margin:0 8px}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]   .business-name[_ngcontent-%COMP%]{font-size:26px;font-weight:700;color:#1f2937;line-height:1.3;flex:1;margin-right:16px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]   .heart-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:2px;min-width:60px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]   .heart-section[_ngcontent-%COMP%]   .heart-icon[_ngcontent-%COMP%]{color:#7c3aed;font-size:18px;cursor:pointer;transition:all .2s ease}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]   .heart-section[_ngcontent-%COMP%]   .heart-icon[_ngcontent-%COMP%]:hover{transform:scale(1.1);color:#5b21b6}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]   .heart-section[_ngcontent-%COMP%]   .like-count[_ngcontent-%COMP%]{font-size:14px;color:#7c3aed;font-weight:600;line-height:1}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .business-header[_ngcontent-%COMP%]   .heart-section[_ngcontent-%COMP%]   .like-text[_ngcontent-%COMP%]{font-size:10px;color:#7c3aed;font-weight:500;line-height:1;text-transform:uppercase;letter-spacing:.5px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .engagement-metrics[_ngcontent-%COMP%]{display:flex;justify-content:space-around;padding:5px 0}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .engagement-metrics[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:14px;color:#111827}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .engagement-metrics[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .engagement-metrics[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]   i.pi-heart[_ngcontent-%COMP%]{color:#5d157c}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .engagement-metrics[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]   i.pi-star[_ngcontent-%COMP%]{color:#f59e0b}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .engagement-metrics[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]   i.pi-share-alt[_ngcontent-%COMP%]{color:#5d157c}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .engagement-metrics[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]{display:flex;width:100%;position:relative;margin:0 -20px;padding:0 20px;border-bottom:1px solid #e5e7eb}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-tab[_ngcontent-%COMP%]{flex:1;padding:12px 0;cursor:pointer;position:relative;font-weight:500;color:#6b7280;font-size:15px;transition:all .2s ease;text-align:center}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-tab.active[_ngcontent-%COMP%]{color:#7c3aed;font-weight:600}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-tab.active[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-1px;left:50%;transform:translate(-50%);width:80%;height:3px;background-color:#7c3aed;border-radius:2px}.provider-screen[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-tab[_ngcontent-%COMP%]:hover:not(.active){color:#374151;background-color:#f9fafb;border-radius:4px}.product-view-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}.product-view-container[_ngcontent-%COMP%]   .close-product-view-wrap[_ngcontent-%COMP%]{position:absolute;top:0;right:0}.product-view-container[_ngcontent-%COMP%]   .close-product-view-wrap[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.hidden[_ngcontent-%COMP%]{display:none!important}']})};function Xs(i,t){if(i&1&&(s(0,"div",23),h(1,"i",24),l(2),o()),i&2){let e=m();a(2),S(" ",e.errorMessage," ")}}function Qs(i,t){if(i&1&&(s(0,"option",25),l(1),o()),i&2){let e=t.$implicit,n=m();d("value",e.group_id),a(),Y(" ",e.group_name," ",e.group_id===n.data.subscription.group_id?"(Current)":""," ")}}function Zs(i,t){i&1&&(s(0,"div",26),l(1," Group is required "),o())}function ec(i,t){i&1&&(s(0,"div",27),h(1,"i",28),l(2," Loading plans... "),o())}function tc(i,t){if(i&1&&(s(0,"option",25),l(1),o()),i&2){let e=t.$implicit,n=m(2);d("value",e.id),a(),Y(" ",n.getPlanLabel(e)," - \u20B9",e.price," ")}}function nc(i,t){if(i&1){let e=I();s(0,"select",29),C("change",function(){x(e);let r=m();return P(r.onPlanChange())}),s(1,"option",13),l(2),o(),_(3,tc,2,3,"option",14),o()}if(i&2){let e=m();d("disabled",e.loadingPlans||e.filteredPlans.length===0),a(2),S(" ",e.filteredPlans.length===0?"No plans available":"Choose a plan"," "),a(),d("ngForOf",e.filteredPlans)}}function ic(i,t){i&1&&(s(0,"div",26),l(1," Plan is required "),o())}function rc(i,t){if(i&1&&(s(0,"div",35)(1,"span",36),l(2,"Description:"),o(),s(3,"span",37),l(4),o()()),i&2){let e=m(2).$implicit;a(4),v(e.description)}}function oc(i,t){if(i&1&&(s(0,"div",34)(1,"div",35)(2,"span",36),l(3,"Plan Name:"),o(),s(4,"span",37),l(5),o()(),s(6,"div",35)(7,"span",36),l(8,"Price:"),o(),s(9,"span",38),l(10),o()(),_(11,rc,5,1,"div",39),o()),i&2){let e=m().$implicit;a(5),v(e.name),a(5),S("\u20B9",e.price,""),a(),d("ngIf",e.description)}}function ac(i,t){if(i&1&&(L(0),_(1,oc,12,3,"div",33),q()),i&2){let e,n=t.$implicit,r=m(2);a(),d("ngIf",n.id===((e=r.changePlanForm.get("plan"))==null?null:e.value))}}function sc(i,t){if(i&1&&(s(0,"div",30)(1,"div",31)(2,"h4"),l(3,"Selected Plan Details"),o(),_(4,ac,2,1,"ng-container",32),o()()),i&2){let e=m();a(4),d("ngForOf",e.filteredPlans)}}var fn=class i{constructor(t,e,n,r,c){this.dialogRef=t;this.data=e;this.fb=n;this.groupService=r;this.setupRegistrationService=c;this.changePlanForm=this.fb.group({group:["",M.required],plan:["",M.required]})}changePlanForm;groups=[];plans=[];filteredPlans=[];loading=!1;loadingGroups=!1;loadingPlans=!1;errorMessage="";ngOnInit(){console.log("ChangePlanDialog: Subscription data:",this.data.subscription),this.loadGroups()}loadGroups(){if(!this.data.subscription.provider_id||!this.data.subscription.product_id){this.errorMessage="Invalid subscription data";return}this.loadingGroups=!0,this.errorMessage="",this.groupService.listGroupOnProduct(this.data.subscription.provider_id,this.data.subscription.product_id).subscribe({next:t=>{this.groups=t||[],console.log("Groups loaded:",this.groups),this.loadingGroups=!1,this.data.subscription.group_id?(this.changePlanForm.get("group")?.setValue(this.data.subscription.group_id),this.onGroupChange()):this.groups.length===1&&(this.changePlanForm.get("group")?.setValue(this.groups[0].group_id),this.onGroupChange())},error:t=>{console.error("Error loading groups:",t),this.errorMessage="Failed to load groups. Please try again.",this.loadingGroups=!1,this.groups=[]}})}onGroupChange(){let t=this.changePlanForm.get("group")?.value;if(this.errorMessage="",!t){this.plans=[],this.filteredPlans=[];return}console.log("Group changed to:",t),this.loadPlans(t)}onPlanChange(){this.errorMessage="",console.log("Plan changed to:",this.changePlanForm.get("plan")?.value)}loadPlans(t){this.data.subscription.provider_id&&(this.loadingPlans=!0,this.errorMessage="",this.setupRegistrationService.getSubscriptionPlan(this.data.subscription.provider_id,t).subscribe({next:e=>{if(this.plans=e||[],this.filteredPlans=e||[],console.log("Plans loaded:",this.plans),this.loadingPlans=!1,this.data.subscription.group_id===t&&this.data.subscription.plan_id){let n=this.plans.find(r=>r.id===this.data.subscription.plan_id);n&&this.changePlanForm.get("plan")?.setValue(n.id)}},error:e=>{console.error("Error loading plans:",e),this.errorMessage="Failed to load plans. Please try again.",this.loadingPlans=!1,this.plans=[],this.filteredPlans=[]}}))}onCancel(){this.dialogRef.close()}onSubmit(){console.log("ChangePlanDialog: onSubmit called"),console.log("Form valid:",this.changePlanForm.valid),console.log("Form value:",this.changePlanForm.value),console.log("Form errors:",this.getFormErrors()),this.errorMessage="";let t=this.changePlanForm.get("plan")?.value,e=this.changePlanForm.get("group")?.value;if(console.log("Selected values:",{selectedPlanId:t,selectedGroupId:e}),console.log("Available plans:",this.filteredPlans),console.log("Available groups:",this.groups),!t||t===""||!e||e===""){this.errorMessage="Please select both group and plan";return}let n=this.filteredPlans.find(p=>p.id==t),r=this.groups.find(p=>p.group_id==e);if(console.log("Found plan:",n),console.log("Found group:",r),!n||!r){console.error("Selected plan or group not found"),this.errorMessage="Please select both group and plan";return}let c={plan:n,group:r};console.log("ChangePlanDialog: Submitting result:",c),this.dialogRef.close(c)}getFormErrors(){let t={};return Object.keys(this.changePlanForm.controls).forEach(e=>{let n=this.changePlanForm.get(e);n&&n.errors&&(t[e]=n.errors)}),t}isCurrentPlan(t){return t===this.data.subscription.plan_id}getPlanLabel(t){let e=t.name||`Plan ${t.id}`;return t.id&&this.isCurrentPlan(t.id)?`${e} (Current)`:e}static \u0275fac=function(e){return new(e||i)(y(Hi),y(Ji),y(te),y(pt),y(st))};static \u0275cmp=w({type:i,selectors:[["app-change-plan-dialog"]],decls:46,vars:14,consts:[[1,"change-plan-dialog"],["mat-dialog-title","",1,"dialog-title"],[1,"dialog-content"],[1,"current-info"],[1,"info-row"],[1,"label"],[1,"value"],["class","error-message",4,"ngIf"],[1,"change-plan-form",3,"formGroup"],[1,"form-field"],["for","group"],[1,"required"],["id","group","formControlName","group",1,"form-select",3,"change","disabled"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","field-error",4,"ngIf"],["for","plan"],["class","loading-spinner",4,"ngIf"],["id","plan","formControlName","plan","class","form-select",3,"disabled","change",4,"ngIf"],["class","plan-details",4,"ngIf"],[1,"dialog-actions"],["type","button",1,"btn-cancel",3,"click"],["type","button",1,"btn-submit",3,"click","disabled"],[1,"error-message"],[1,"pi","pi-exclamation-triangle"],[3,"value"],[1,"field-error"],[1,"loading-spinner"],[1,"pi","pi-spin","pi-spinner"],["id","plan","formControlName","plan",1,"form-select",3,"change","disabled"],[1,"plan-details"],[1,"detail-card"],[4,"ngFor","ngForOf"],["class","plan-info",4,"ngIf"],[1,"plan-info"],[1,"detail-row"],[1,"detail-label"],[1,"detail-value"],[1,"detail-value","price"],["class","detail-row",4,"ngIf"]],template:function(e,n){if(e&1&&(s(0,"div",0)(1,"h2",1),l(2,"Change Plan"),o(),s(3,"mat-dialog-content",2)(4,"div",3)(5,"div",4)(6,"span",5),l(7,"Current Plan:"),o(),s(8,"span",6),l(9),o()(),s(10,"div",4)(11,"span",5),l(12,"Current Group:"),o(),s(13,"span",6),l(14),o()(),s(15,"div",4)(16,"span",5),l(17,"Product:"),o(),s(18,"span",6),l(19),o()()(),_(20,Xs,3,1,"div",7),s(21,"form",8)(22,"div",9)(23,"label",10),l(24,"Select Group "),s(25,"span",11),l(26,"*"),o()(),s(27,"select",12),C("change",function(){return n.onGroupChange()}),s(28,"option",13),l(29),o(),_(30,Qs,2,3,"option",14),o(),_(31,Zs,2,0,"div",15),o(),s(32,"div",9)(33,"label",16),l(34,"Select Plan "),s(35,"span",11),l(36,"*"),o()(),_(37,ec,3,0,"div",17)(38,nc,4,3,"select",18)(39,ic,2,0,"div",15),o(),_(40,sc,5,1,"div",19),o()(),s(41,"mat-dialog-actions",20)(42,"button",21),C("click",function(){return n.onCancel()}),l(43," Cancel "),o(),s(44,"button",22),C("click",function(){return n.onSubmit()}),l(45," Continue to Checkout "),o()()()),e&2){let r,c,p;a(9),v(n.data.subscription.plan.name),a(5),v(n.data.subscription.group.group_name),a(5),v(n.data.subscription.product.name),a(),d("ngIf",n.errorMessage),a(),d("formGroup",n.changePlanForm),a(6),d("disabled",n.loadingGroups),a(2),S(" ",n.loadingGroups?"Loading groups...":"Choose a group"," "),a(),d("ngForOf",n.groups),a(),d("ngIf",((r=n.changePlanForm.get("group"))==null?null:r.invalid)&&((r=n.changePlanForm.get("group"))==null?null:r.touched)),a(6),d("ngIf",n.loadingPlans),a(),d("ngIf",!n.loadingPlans),a(),d("ngIf",((c=n.changePlanForm.get("plan"))==null?null:c.invalid)&&((c=n.changePlanForm.get("plan"))==null?null:c.touched)),a(),d("ngIf",(p=n.changePlanForm.get("plan"))==null?null:p.value),a(4),d("disabled",!n.changePlanForm.valid||n.loadingGroups||n.loadingPlans)}},dependencies:[G,E,Yi,Ki,Wi,ve,qi,Gi,Li,j,Z,ee,re],styles:[".change-plan-dialog[_ngcontent-%COMP%]{min-width:90vw;max-width:500px}@media (min-width: 768px){.change-plan-dialog[_ngcontent-%COMP%]{min-width:500px}}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-title[_ngcontent-%COMP%]{color:#310b41;font-size:1.5rem;font-weight:700;margin:0;padding:1rem 1.5rem;border-bottom:2px solid #f0f0f0}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{padding:1.5rem;max-height:70vh;overflow-y:auto}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .current-info[_ngcontent-%COMP%]{background:linear-gradient(62.66deg,#3498db1a 1%,#4b00821a 82%);border-radius:.5rem;padding:1rem;margin-bottom:1.5rem;border:1px solid rgba(52,152,219,.2)}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .current-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.5rem 0}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .current-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid rgba(52,152,219,.15)}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .current-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.875rem;color:indigo;font-weight:600}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .current-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:.875rem;color:#333;font-weight:500;text-align:right}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828;padding:.75rem 1rem;border-radius:.5rem;margin-bottom:1rem;display:flex;align-items:center;gap:.5rem;font-size:.875rem;border:1px solid #ef9a9a}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.125rem}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{margin-bottom:1.5rem}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:600;color:#333;margin-bottom:.5rem}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#dc3545}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:2px solid #e0e0e0;border-radius:.5rem;font-size:.938rem;color:#333;background-color:#fff;transition:all .3s ease;cursor:pointer}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 3px #3498db1a}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;cursor:not-allowed;opacity:.6}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{padding:.5rem}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#3498db;font-size:.875rem;padding:.75rem;background-color:#f8f9fa;border-radius:.5rem}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .field-error[_ngcontent-%COMP%]{color:#dc3545;font-size:.75rem;margin-top:.25rem;font-weight:500}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .plan-details[_ngcontent-%COMP%]{margin-top:1rem}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .plan-details[_ngcontent-%COMP%]   .detail-card[_ngcontent-%COMP%]{background:linear-gradient(62.66deg,#3498db0d 1%,#4b00820d 82%);border-radius:.5rem;padding:1rem;border:1px solid rgba(52,152,219,.2)}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .plan-details[_ngcontent-%COMP%]   .detail-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:#310b41;margin:0 0 1rem}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .plan-details[_ngcontent-%COMP%]   .detail-card[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.5rem 0}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .plan-details[_ngcontent-%COMP%]   .detail-card[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid rgba(52,152,219,.1)}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .plan-details[_ngcontent-%COMP%]   .detail-card[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{font-size:.875rem;color:#666;font-weight:500}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .plan-details[_ngcontent-%COMP%]   .detail-card[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{font-size:.875rem;color:#333;font-weight:600;text-align:right}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .change-plan-form[_ngcontent-%COMP%]   .plan-details[_ngcontent-%COMP%]   .detail-card[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-value.price[_ngcontent-%COMP%]{font-size:1.25rem;color:#28a745;font-weight:700}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-top:2px solid #f0f0f0;display:flex;justify-content:flex-end;gap:.75rem}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:.5rem;font-size:.938rem;font-weight:700;cursor:pointer;transition:all .3s ease;border:none;min-width:100px}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   button.btn-cancel[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#333}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   button.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   button.btn-submit[_ngcontent-%COMP%]{background:linear-gradient(62.66deg,#3498db 1%,indigo 82%);color:#fff;box-shadow:0 4px 15px #3498db4d}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   button.btn-submit[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #3498db66}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   button.btn-submit[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none;box-shadow:none}@media (max-width: 768px){.change-plan-dialog[_ngcontent-%COMP%]   .dialog-title[_ngcontent-%COMP%]{font-size:1.25rem;padding:.875rem 1rem}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{padding:1rem}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .current-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.25rem}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .current-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{text-align:left}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]{padding:.875rem 1rem;flex-wrap:wrap}.change-plan-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;min-width:120px}}"]})};var _n=class i{constructor(t){this.http=t}createOrder(t){return this.http.post(`${D.SALES.CREATE}`,t)}createSubscriptionOrder(t){return this.http.post(`${D.SALES.CREATE}`,t)}createServiceSubscriptionOrder(t){return this.http.post(`${D.SALES.CREATE}`,t)}createFormsOrder(t){return this.http.post(`${D.SALES.CREATE}`,t)}static \u0275fac=function(e){return new(e||i)($(oe))};static \u0275prov=K({token:i,factory:i.\u0275fac,providedIn:"root"})};var ht=fi(Ko(),1);var il=["qrcElement"],Xo=(()=>{class i{constructor(e,n){this.renderer=e,this.sanitizer=n,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new ie,this.context=null}ngOnChanges(){return Nn(this,null,function*(){yield this.createQRCode()})}isValidQrCodeText(e){return this.allowEmptyString===!1?!(typeof e>"u"||e===""||e==="null"||e===null):!(typeof e>"u")}toDataURL(e){return new Promise((n,r)=>{(0,ht.toDataURL)(this.qrdata,e,(c,p)=>{c?r(c):n(p)})})}toCanvas(e,n){return new Promise((r,c)=>{(0,ht.toCanvas)(e,this.qrdata,n,p=>{p?c(p):r("success")})})}toSVG(e){return new Promise((n,r)=>{(0,ht.toString)(this.qrdata,e,(c,p)=>{c?r(c):n(p)})})}renderElement(e){for(let n of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,n);this.renderer.appendChild(this.qrcElement.nativeElement,e)}createQRCode(){return Nn(this,null,function*(){this.version&&this.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),this.version=40):this.version&&this.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),this.version=1):this.version!==void 0&&isNaN(this.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),this.version=void 0);try{if(!this.isValidQrCodeText(this.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");this.isValidQrCodeText(this.qrdata)&&this.qrdata===""&&(this.qrdata=" ");let e={color:{dark:this.colorDark,light:this.colorLight},errorCorrectionLevel:this.errorCorrectionLevel,margin:this.margin,scale:this.scale,version:this.version,width:this.width},n=this.imageSrc,r=this.imageHeight||40,c=this.imageWidth||40;switch(this.elementType){case"canvas":{let p=this.renderer.createElement("canvas");this.context=p.getContext("2d"),this.toCanvas(p,e).then(()=>{if(this.ariaLabel&&this.renderer.setAttribute(p,"aria-label",`${this.ariaLabel}`),this.title&&this.renderer.setAttribute(p,"title",`${this.title}`),n&&this.context){this.centerImage=new Image(c,r),n!==this.centerImage.src&&(this.centerImage.crossOrigin="anonymous",this.centerImage.src=n),r!==this.centerImage.height&&(this.centerImage.height=r),c!==this.centerImage.width&&(this.centerImage.width=c);let f=this.centerImage;f&&(f.onload=()=>{this.context?.drawImage(f,p.width/2-c/2,p.height/2-r/2,c,r)})}this.renderElement(p),this.emitQRCodeURL(p)}).catch(f=>{console.error("[angularx-qrcode] canvas error:",f)});break}case"svg":{let p=this.renderer.createElement("div");this.toSVG(e).then(f=>{this.renderer.setProperty(p,"innerHTML",f);let b=p.firstChild;this.renderer.setAttribute(b,"height",`${this.width}`),this.renderer.setAttribute(b,"width",`${this.width}`),this.renderElement(b),this.emitQRCodeURL(b)}).catch(f=>{console.error("[angularx-qrcode] svg error:",f)});break}case"url":case"img":default:{let p=this.renderer.createElement("img");this.toDataURL(e).then(f=>{this.alt&&p.setAttribute("alt",this.alt),this.ariaLabel&&p.setAttribute("aria-label",this.ariaLabel),p.setAttribute("src",f),this.title&&p.setAttribute("title",this.title),this.renderElement(p),this.emitQRCodeURL(p)}).catch(f=>{console.error("[angularx-qrcode] img/url error:",f)})}}}catch(e){console.error("[angularx-qrcode] Error generating QR Code:",e.message)}})}convertBase64ImageUrlToBlob(e){let n=e.split(";base64,"),r=n[0].split(":")[1],c=atob(n[1]),p=new Uint8Array(c.length);for(let f=0;f<c.length;++f)p[f]=c.charCodeAt(f);return new Blob([p],{type:r})}emitQRCodeURL(e){let n=e.constructor.name;if(n===SVGSVGElement.name){let b=e.outerHTML,O=new Blob([b],{type:"image/svg+xml"}),k=URL.createObjectURL(O),R=this.sanitizer.bypassSecurityTrustUrl(k);this.qrCodeURL.emit(R);return}let r="";n===HTMLCanvasElement.name&&(r=e.toDataURL("image/png")),n===HTMLImageElement.name&&(r=e.src);let c=this.convertBase64ImageUrlToBlob(r),p=URL.createObjectURL(c),f=this.sanitizer.bypassSecurityTrustUrl(p);this.qrCodeURL.emit(f)}static{this.\u0275fac=function(n){return new(n||i)(y(bi),y(Di))}}static{this.\u0275cmp=w({type:i,selectors:[["qrcode"]],viewQuery:function(n,r){if(n&1&&Pi(il,7),n&2){let c;yi(c=Si())&&(r.qrcElement=c.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[Ee],decls:2,vars:2,consts:[["qrcElement",""]],template:function(n,r){n&1&&h(0,"div",null,0),n&2&&xi(r.cssClass)},encapsulation:2,changeDetection:0})}}return i})(),Qo=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ot({type:i})}static{this.\u0275inj=rt({})}}return i})();var Zo=i=>({selected:i}),al=i=>({"chip-date--selected":i}),sl=i=>({"time-chip--selected":i});function cl(i,t){if(i&1){let e=I();s(0,"div",28),C("click",function(){x(e);let r=m();return P(r.selectOption("door_delivery"))}),h(1,"img",29),u(2,"translate"),s(3,"div")(4,"div",30),l(5),u(6,"translate"),o(),s(7,"div",31),l(8),u(9,"addressFormatter"),o()(),s(10,"div",32)(11,"button",33),C("click",function(){x(e);let r=m();return P(r.changeAddress("select"))}),l(12),u(13,"translate"),o()()()}if(i&2){let e=m();d("ngClass",Pe(13,Zo,e.selectedOption==="door_delivery")),a(),V("alt",g(2,5,"providerInfo.checkout.deliver_to")),a(4),v(g(6,7,"providerInfo.checkout.deliver_to")),a(3),v(g(9,9,e.productData==null?null:e.productData.delivery_address)),a(4),v(g(13,11,"providerInfo.checkout.change_address"))}}function ll(i,t){if(i&1){let e=I();s(0,"div",28),C("click",function(){x(e);let r=m();return P(r.selectOption("pickup"))}),h(1,"img",34),u(2,"translate"),s(3,"div")(4,"div",30),l(5),u(6,"translate"),o()()()}if(i&2){let e=m();d("ngClass",Pe(7,Zo,e.selectedOption==="pickup")),a(),V("alt",g(2,3,"providerInfo.checkout.order_pickup")),a(4),v(g(6,5,"providerInfo.checkout.order_pickup"))}}function dl(i,t){if(i&1){let e=I();s(0,"div",35)(1,"div",36)(2,"p-dropdown",37),u(3,"translate"),ce("ngModelChange",function(r){x(e);let c=m();return se(c.selectedCustomer,r)||(c.selectedCustomer=r),P(r)}),o(),s(4,"button",38),C("click",function(){x(e);let r=m();return P(r.addNewCustomer())}),h(5,"i",39),l(6),u(7,"translate"),o()()()}if(i&2){let e=m();a(2),V("placeholder",g(3,5,"providerInfo.checkout.select_customer")),d("options",e.customers),ae("ngModel",e.selectedCustomer),d("filter",!0),a(4),S(" ",g(7,7,"providerInfo.checkout.new_customer")," ")}}function pl(i,t){if(i&1&&(s(0,"div",14)(1,"span",31),l(2,"Member:"),o(),s(3,"span",47),l(4),o()()),i&2){let e=m(2);a(4),v(e.productData==null?null:e.productData.memberName)}}function ml(i,t){if(i&1&&(s(0,"div",52)(1,"div",53),h(2,"i",54),s(3,"span",55),l(4),o()()()),i&2){let e=m(2);a(4),Y("Plan changed from: ",e.productData==null||e.productData.previousPlan==null?null:e.productData.previousPlan.name," (\u20B9",e.productData==null||e.productData.previousPlan==null?null:e.productData.previousPlan.price,")")}}function ul(i,t){if(i&1){let e=I();s(0,"div",40)(1,"div",41)(2,"div",42)(3,"div",3)(4,"div",21),h(5,"i",43),s(6,"span",30),l(7),o()(),s(8,"button",44),C("click",function(){x(e);let r=m();return P(r.changePlan())}),h(9,"i",45),l(10," Change Plan "),o()(),s(11,"div",46)(12,"div",14)(13,"span",31),l(14,"Product:"),o(),s(15,"span",47),l(16),o()(),s(17,"div",14)(18,"span",31),l(19,"Plan:"),o(),s(20,"span",47),l(21),o()(),s(22,"div",14)(23,"span",31),l(24,"Group:"),o(),s(25,"span",47),l(26),o()(),_(27,pl,5,1,"div",48),s(28,"div",49)(29,"span",31),l(30,"Amount:"),o(),s(31,"span",50),l(32),o()(),_(33,ml,5,2,"div",51),o()()()()}if(i&2){let e=m();a(7),S(" ",e.isRenewalMode?"\u{1F504} Subscription Renewal":"\u{1F4CB} Subscription Plan"," "),a(9),v(e.productData==null||e.productData.selectedProduct==null?null:e.productData.selectedProduct.name),a(5),v(e.productData==null||e.productData.plan==null?null:e.productData.plan.name),a(5),v(e.productData==null||e.productData.group==null?null:e.productData.group.group_name),a(),d("ngIf",e.productData==null?null:e.productData.memberName),a(5),S("\u20B9",(e.productData==null||e.productData.plan==null?null:e.productData.plan.price)||e.totalAmount,""),a(),d("ngIf",e.productData==null?null:e.productData.isPlanChange)}}function gl(i,t){i&1&&Bn(0)}function fl(i,t){if(i&1&&(s(0,"expander-template",56),u(1,"translate"),_(2,gl,1,0,"ng-container",57),o()),i&2){m();let e=xe(15);d("title",g(1,3,"providerInfo.checkout.other_setup"))("defaultExpandedStatus",!0),a(2),d("ngTemplateOutlet",e)}}function _l(i,t){i&1&&Bn(0)}function hl(i,t){if(i&1&&(s(0,"div",58),_(1,_l,1,0,"ng-container",57),o()),i&2){m();let e=xe(15);a(),d("ngTemplateOutlet",e)}}function vl(i,t){i&1&&(s(0,"label",68),h(1,"input",69),l(2),u(3,"translate"),o()),i&2&&(a(2),S(" ",g(3,1,"providerInfo.checkout.today")," "))}function bl(i,t){i&1&&(s(0,"label",68),h(1,"input",70),l(2),u(3,"translate"),o()),i&2&&(a(2),S(" ",g(3,1,"providerInfo.checkout.schedule")," "))}function Cl(i,t){i&1&&(s(0,"label",68),h(1,"input",71),l(2),u(3,"translate"),o()),i&2&&(a(2),S(" ",g(3,1,"providerInfo.checkout.subscribe")," "))}function xl(i,t){if(i&1){let e=I();s(0,"button",72),C("click",function(){let r=x(e).index,c=m(3);return P(c.selectDate(r))}),s(1,"div",73),l(2),o(),s(3,"div",74),l(4),o()()}if(i&2){let e=t.$implicit,n=t.index,r=m(3);d("ngClass",Pe(3,al,r.selectedDateIndex===n)),a(2),v(e.day),a(2),v(e.label)}}function Pl(i,t){if(i&1){let e=I();L(0),s(1,"button",79),C("click",function(){let r=x(e).$implicit,c=m(4);return P(c.onSlotSelect(r))}),l(2),o(),q()}if(i&2){let e,n=t.$implicit,r=m(4);a(),d("ngClass",Pe(2,sl,((e=r.checkoutForm.get("bookSlot"))==null||e.value==null?null:e.value.slot_id)===n.slot_id)),a(),S(" ",r.formatSlotLabel(n.start_time,n.end_time)," ")}}function yl(i,t){if(i&1&&(s(0,"div",75)(1,"div",21),h(2,"lucide-icon",76),s(3,"span",62),l(4),u(5,"translate"),o()(),s(6,"div",77),_(7,Pl,3,4,"ng-container",78),o()()),i&2){let e=m(3);a(4),v(g(5,2,"providerInfo.checkout.book_slot")),a(3),d("ngForOf",e.availableSlots)}}function Sl(i,t){if(i&1){let e=I();s(0,"div",75)(1,"label",81),l(2),u(3,"translate"),o(),s(4,"div",85)(5,"label",68)(6,"input",86),C("change",function(){x(e);let r=m(4);return P(r.toggleDay("monday"))}),o(),s(7,"span",73),l(8),u(9,"translate"),o()(),s(10,"label",68)(11,"input",86),C("change",function(){x(e);let r=m(4);return P(r.toggleDay("tuesday"))}),o(),s(12,"span",73),l(13),u(14,"translate"),o()(),s(15,"label",68)(16,"input",86),C("change",function(){x(e);let r=m(4);return P(r.toggleDay("wednesday"))}),o(),s(17,"span",73),l(18),u(19,"translate"),o()(),s(20,"label",68)(21,"input",86),C("change",function(){x(e);let r=m(4);return P(r.toggleDay("thursday"))}),o(),s(22,"span",73),l(23),u(24,"translate"),o()(),s(25,"label",68)(26,"input",86),C("change",function(){x(e);let r=m(4);return P(r.toggleDay("friday"))}),o(),s(27,"span",73),l(28),u(29,"translate"),o()(),s(30,"label",68)(31,"input",86),C("change",function(){x(e);let r=m(4);return P(r.toggleDay("saturday"))}),o(),s(32,"span",73),l(33),u(34,"translate"),o()(),s(35,"label",68)(36,"input",86),C("change",function(){x(e);let r=m(4);return P(r.toggleDay("sunday"))}),o(),s(37,"span",73),l(38),u(39,"translate"),o()()()()}if(i&2){let e=m(4);a(2),v(g(3,15,"providerInfo.checkout.delivery_days")),a(4),d("checked",e.selectedCustomDays.includes("monday")),a(2),v(g(9,17,"providerInfo.checkout.weekdays.monday")),a(3),d("checked",e.selectedCustomDays.includes("tuesday")),a(2),v(g(14,19,"providerInfo.checkout.weekdays.tuesday")),a(3),d("checked",e.selectedCustomDays.includes("wednesday")),a(2),v(g(19,21,"providerInfo.checkout.weekdays.wednesday")),a(3),d("checked",e.selectedCustomDays.includes("thursday")),a(2),v(g(24,23,"providerInfo.checkout.weekdays.thursday")),a(3),d("checked",e.selectedCustomDays.includes("friday")),a(2),v(g(29,25,"providerInfo.checkout.weekdays.friday")),a(3),d("checked",e.selectedCustomDays.includes("saturday")),a(2),v(g(34,27,"providerInfo.checkout.weekdays.saturday")),a(3),d("checked",e.selectedCustomDays.includes("sunday")),a(2),v(g(39,29,"providerInfo.checkout.weekdays.sunday"))}}function Il(i,t){if(i&1&&(s(0,"div",60)(1,"div",21),h(2,"lucide-icon",80),s(3,"span",62),l(4),u(5,"translate"),o()(),s(6,"div",75)(7,"label",81),l(8),u(9,"translate"),o(),s(10,"div",65)(11,"label",68),h(12,"input",82),s(13,"span",73),l(14),u(15,"translate"),o()(),s(16,"label",68),h(17,"input",83),s(18,"span",73),l(19),u(20,"translate"),o()(),s(21,"label",68),h(22,"input",84),s(23,"span",73),l(24),u(25,"translate"),o()()()(),_(26,Sl,40,31,"div",67),o()),i&2){let e=m(3);a(4),v(g(5,6,"providerInfo.checkout.subscription_options")),a(4),v(g(9,8,"providerInfo.checkout.frequency")),a(6),v(g(15,10,"providerInfo.checkout.daily")),a(5),v(g(20,12,"providerInfo.checkout.weekly")),a(5),v(g(25,14,"providerInfo.checkout.monthly")),a(2),d("ngIf",e.selectedFrequency==="weekly")}}function Ol(i,t){if(i&1&&(s(0,"div",60)(1,"div",21),h(2,"lucide-icon",61),s(3,"span",62),l(4),u(5,"translate"),o()(),s(6,"div",63),_(7,vl,4,3,"label",64)(8,bl,4,3,"label",64)(9,Cl,4,3,"label",64),o(),s(10,"div",65),_(11,xl,5,5,"button",66),o(),_(12,yl,8,4,"div",67)(13,Il,27,16,"div",59),o()),i&2){let e,n=m(2);a(4),v(g(5,7,"providerInfo.checkout.book_date")),a(3),d("ngIf",n.allowedBookTypes.includes("default")||n.allowedBookTypes.includes("today")),a(),d("ngIf",n.allowedBookTypes.includes("schedule")),a(),d("ngIf",n.allowedBookTypes.includes("subscribe")),a(2),d("ngForOf",n.dates),a(),d("ngIf",n.slotsEnabled&&n.availableSlots.length>0),a(),d("ngIf",((e=n.checkoutForm.get("bookDateType"))==null?null:e.value)==="subscribe")}}function Ml(i,t){if(i&1&&_(0,Ol,14,9,"div",59),i&2){let e=m();d("ngIf",(e.productData==null?null:e.productData.productSubType)!=="subscribe")}}function wl(i,t){i&1&&(s(0,"label",89),h(1,"input",90),s(2,"span",73),l(3),u(4,"translate"),o()()),i&2&&(a(),d("value","cash"),a(2),v(g(4,2,"providerInfo.checkout.cash_on_hand")))}function kl(i,t){i&1&&(s(0,"label",89),h(1,"input",90),s(2,"span",73),l(3),u(4,"translate"),o()()),i&2&&(a(),d("value","online"),a(2),v(g(4,2,"providerInfo.checkout.online")))}function El(i,t){if(i&1&&(s(0,"div")(1,"p",62),l(2),u(3,"translate"),o(),s(4,"div",87),_(5,wl,5,4,"label",88)(6,kl,5,4,"label",88),o()()),i&2){let e=m();a(2),v(g(3,3,"providerInfo.checkout.payment_mode")),a(3),d("ngIf",e.paymentTypes.includes("cash")),a(),d("ngIf",e.paymentTypes.includes("online"))}}function Tl(i,t){if(i&1&&(s(0,"div",99)(1,"h2"),l(2),u(3,"translate"),o(),h(4,"qrcode",100),s(5,"p"),l(6),u(7,"translate"),o(),s(8,"p"),l(9),u(10,"translate"),o()()),i&2){let e=m(2);a(2),v(g(3,8,"providerInfo.checkout.scan_to_pay")),a(2),d("qrdata",e.upiUri)("width",200)("errorCorrectionLevel","M"),a(2),Y("",g(7,10,"providerInfo.checkout.pay_to")," ",e.name,""),a(3),Y("",g(10,12,"providerInfo.checkout.amount")," \u20B9",e.amount,"")}}function Dl(i,t){if(i&1){let e=I();s(0,"div",101)(1,"button",102),C("click",function(){x(e);let r=m(2);return P(r.markPaymentAsReceived())}),l(2),u(3,"translate"),o()()}i&2&&(a(2),S(" ",g(3,1,"providerInfo.checkout.mark_payment_received")," "))}function Fl(i,t){if(i&1){let e=I();s(0,"div",91)(1,"div")(2,"p",62),l(3),u(4,"translate"),o(),s(5,"div",87)(6,"label",89),h(7,"input",92),s(8,"span",73),l(9),u(10,"translate"),o()(),s(11,"label",89),h(12,"input",93),s(13,"span",73),l(14),u(15,"translate"),o()()()(),_(16,Tl,11,14,"div",94),s(17,"div",95)(18,"label",89)(19,"input",96),C("change",function(){x(e);let r=m();return P(r.onPaymentStatusChange("paid"))}),o(),s(20,"span",73),l(21),u(22,"translate"),o()(),s(23,"label",89)(24,"input",97),C("change",function(){x(e);let r=m();return P(r.onPaymentStatusChange("pending"))}),o(),s(25,"span",73),l(26),u(27,"translate"),o()()(),_(28,Dl,4,3,"div",98),o()}if(i&2){let e,n,r=m();a(3),v(g(4,7,"providerInfo.checkout.payment_mode")),a(6),v(g(10,9,"providerInfo.checkout.cash")),a(5),v(g(15,11,"providerInfo.checkout.collect")),a(2),d("ngIf",((e=r.checkoutForm.get("paymentMode"))==null?null:e.value)==="collect"),a(5),v(g(22,13,"providerInfo.checkout.paid")),a(5),v(g(27,15,"providerInfo.checkout.pending")),a(2),d("ngIf",((n=r.checkoutForm.get("paymentMode"))==null?null:n.value)==="collect")}}function Nl(i,t){if(i&1){let e=I();s(0,"div",103)(1,"div",36),h(2,"img",104),s(3,"div")(4,"div",105),l(5),o(),s(6,"div",106),l(7),o()()(),s(8,"div",21)(9,"button",107),C("click",function(){let r=x(e).$implicit,c=m();return P(c.updateQuantity(r,!1))}),h(10,"i",108),o(),s(11,"span",109),l(12),o(),s(13,"button",110),C("click",function(){let r=x(e).$implicit,c=m();return P(c.updateQuantity(r,!0))}),h(14,"i",111),o()()()}if(i&2){let e=t.$implicit;a(2),V("alt",e.name),d("src",(e.img==null?null:e.img[0])||"assets/images/products/product-placeholder.png",Ce),a(3),v(e.name),a(2),S(" \u20B9",(e.quantity||1)*(e.price||0)," "),a(5),v(e.quantity)}}function Bl(i,t){if(i&1&&(s(0,"div",112)(1,"div",113)(2,"span",114),l(3),u(4,"translate"),o(),s(5,"span",115),l(6),o()()()),i&2){let e=m();a(3),v(g(4,2,"providerInfo.checkout.subtotal")),a(3),S("\u20B9",e.totalAmount,"")}}function Rl(i,t){if(i&1&&(s(0,"div",116),l(1),o()),i&2){let e=m();a(),S(" ",e.errorMessage," ")}}function Al(i,t){i&1&&(s(0,"div",117),h(1,"div",118),s(2,"p",119),l(3),u(4,"translate"),o()()),i&2&&(a(3),v(g(4,1,"providerInfo.checkout.loading")))}function Vl(i,t){i&1&&(s(0,"span"),l(1),u(2,"translate"),o()),i&2&&(a(),v(g(2,1,"providerInfo.checkout.order_now")))}function Ul(i,t){i&1&&(s(0,"span"),l(1),u(2,"translate"),o()),i&2&&(a(),v(g(2,1,"providerInfo.checkout.creating_order")))}var Rt=class i{constructor(t,e,n,r,c,p,f,b,O,k,R,T){this.fb=t;this.router=e;this.activatedRoute=n;this.memberService=r;this.cartService=c;this.providerInfoService=p;this.providerDetail=f;this.orderService=b;this.cdr=O;this.authService=k;this.dialog=R;this.pushNotificationService=T;this.initializeForm(),this.initializeProviderInfo()}checkoutForm;isCreatingOrder=!1;isLoading=!1;errorMessage="";note="";paymentMode="cash";name="";amount=0;expanded=!1;orderCreationStartTime;subtotal=100;deliveryFee=2;promotion=3.2;gst=2;selectedDate=null;selectedDateIndex=0;selectedTime="";selectedCustomer;isRenewalMode=!1;renewalContext=null;customers=[];cartItems=[];isProvider=!1;slots=[];cartItemsList=[];timeSlots=["Default","7 AM","10 AM","12 PM","2 PM","4 PM","6 PM","8 PM","10 PM"];dates=[];providerSettings;allowedBookTypes=[];allowedDeliver=[];showPickup=!1;showDeliverTo=!1;slotsEnabled=!1;paymentTypes=[];productType="standard";providerIdForSlots=0;productIdForServiceSlot;availableSlots=[];isService=!0;productData;selectedSlot;selectedOption="door_delivery";savedAddresses=[];get totalAmount(){console.log("CARTITES-->",this.cartItemsList);let t=this.cartItemsList.reduce((e,n)=>{let r=Number(n.quantity??1)||1,c=0;return console.log("SUM-->",e,r),n.productSubType==="standard"?c=Number(n.variantsJson?.[0]?.price??n.price??0)||0:(n.productSubType==="subscribe"||n.productSubType,c=Number(n.price??n.price_per_quantity??0)||0),e+r*c},0);return(!t||t===0)&&this.productData?.plan?.price?Number(this.productData.plan.price)||0:(console.log("TOTAL_-->",t),t)}get canCreateOrder(){let t=!this.isProvider||!!this.selectedCustomer,e=!this.isCreatingOrder,n=this.checkoutForm.valid,r=this.checkoutForm.get("paymentMode")?.value,c=this.checkoutForm.get("bookDateType")?.value,p=!(this.isProvider&&!this.selectedCustomer)&&!this.isCreatingOrder&&this.checkoutForm.valid&&!!r;return console.log("Can create order check:",{canCreate:t,notCreating:e,formValid:n,paymentMode:r,bookDateType:c,isProvider:this.isProvider,selectedCustomer:this.selectedCustomer,formErrors:this.getFormErrors(),finalResult:p,individualChecks:{providerCheck:!(this.isProvider&&!this.selectedCustomer),notCreatingCheck:!this.isCreatingOrder,formValidCheck:this.checkoutForm.valid,paymentModeCheck:!!r}}),p}getFormErrors(){let t={};return Object.keys(this.checkoutForm.controls).forEach(e=>{let n=this.checkoutForm.get(e);n&&n.errors&&(t[e]=n.errors)}),t}resetOrderCreationState(){console.log("Resetting order creation state"),this.isCreatingOrder=!1,this.orderCreationStartTime=void 0,this.errorMessage="",this.cdr.markForCheck()}resetOrderState(){this.resetOrderCreationState()}get selectedFrequency(){return this.checkoutForm.get("frequency")?.value||"weekly"}get selectedCustomDays(){return this.checkoutForm.get("customDays")?.value||[]}destroy$=new Le;DEBOUNCE_TIME=300;MAX_DATES=7;successMessage="";ngOnInit(){this.initializeNavigationState(),this.initializeComponent(),this.setupSubscriptions(),this.loadInitialData(),this.checkRenewalContext(),window.addEventListener("message",this.messageHandler)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),window.removeEventListener("message",this.messageHandler)}selectOption(t){this.selectedOption=t}setCartItems(t){console.log("RAWITEMS-->",t),this.cartItemsList=t.map(e=>e.productSubType==="subscribe"?{id:e.product_id,name:e.product_name,img:[],price:e.price_per_quantity,quantity:e.base_quantity,productSubType:"subscribe",frequency:e.frequency,custom_days:e.custom_days}:{id:e.id,name:e.name,img:e.img||[],price:e.variantsJson&&e.variantsJson[0]?.price||e.price,quantity:e.quantity||1,productSubType:e.productSubType||"standard",variants:JSON.stringify(e.variantsJson||[]),formId:e.formRegistrationId||null,formData:e.form_data})}orderNow(){if(this.isCreatingOrder&&this.orderCreationStartTime){let n=Date.now()-this.orderCreationStartTime;n>6e4&&(console.warn(`Order creation has been stuck for ${n}ms, resetting state`),this.resetOrderCreationState())}if(!this.canCreateOrder||this.isCreatingOrder){console.log("\u274C Cannot create order - validation failed:",{canCreateOrder:this.canCreateOrder,isCreatingOrder:this.isCreatingOrder,isProvider:this.isProvider,selectedCustomer:this.selectedCustomer,formValid:this.checkoutForm.valid,paymentMode:this.checkoutForm.get("paymentMode")?.value,formErrors:this.getFormErrors()});return}this.isCreatingOrder=!0,this.orderCreationStartTime=Date.now(),this.errorMessage="",this.cdr.markForCheck();let t=setTimeout(()=>{this.isCreatingOrder&&(console.error("Order creation timed out"),this.isCreatingOrder=!1,this.errorMessage="Order creation timed out. Please try again.",this.cdr.markForCheck())},3e4),e=this.getOrderType();e==="subscription"?(console.log("\u{1F504} Processing subscription order..."),this.createSubscriptionOrder(t)):e==="ondemand"?(console.log("\u{1F504} Processing ondemand order..."),this.createRegularOrder()):e==="forms"?(console.log("\u{1F504} Processing forms order..."),this.createFormsOrder()):(console.log("\u{1F504} Processing service subscription order..."),this.createServiceSubscriptionOrder())}updateQuantity(t,e){e?(console.log("IF"),t.quantity=t.quantity+1,this.cartService.setCart(this.cartItems)):(t.quantity=Math.max(0,t.quantity-1),t.quantity===0&&(this.cartItemsList=this.cartItemsList.filter(n=>n.id!==t.id),this.cartItems=this.cartItems.filter(n=>n.id!==t.id)),this.cartService.setCart(this.cartItems))}updateAmount(){this.amount=this.totalAmount,this.cdr.markForCheck()}selectDate(t){this.selectedDateIndex=t,this.selectedDate=this.dates[t]?.date??null,t!==0&&this.checkoutForm.get("bookDateType")?.value!=="schedule"&&this.checkoutForm.get("bookDateType")?.setValue("schedule"),this.slotsEnabled&&this.selectedDate&&this.loadSlots()}toggleDay(t){let e=this.selectedCustomDays,n=e.includes(t)?e.filter(r=>r!==t):[...e,t];this.checkoutForm.get("customDays")?.setValue(n)}toggleExpand(){this.expanded=!this.expanded}initializeForm(){this.checkoutForm=this.fb.group({bookDateType:["today",M.required],bookDate:["today"],bookSlot:[null],paymentMode:["cash",M.required],frequency:["weekly"],customDays:[[]],note:[""]}),this.slotsEnabled&&(this.checkoutForm.get("bookSlot")?.setValidators(M.required),this.checkoutForm.get("bookSlot")?.updateValueAndValidity())}initializeNavigationState(){let t=null,e=this.router.getCurrentNavigation();if(console.log("Checkout: Navigation object:",e),e?.extras?.state&&(t=e.extras.state,console.log("Checkout: Got state from getCurrentNavigation")),t||(console.log("Checkout: getCurrentNavigation returned null, trying router events"),this.router.events.pipe(hi(n=>n instanceof Ni),vi(1)).subscribe(()=>{this.tryGetStateFromHistory()})),!t){console.log("Checkout: Trying sessionStorage fallback");let n=sessionStorage.getItem("checkout_navigation_state");if(n)try{t=JSON.parse(n),console.log("Checkout: Got state from sessionStorage:",t),sessionStorage.removeItem("checkout_navigation_state")}catch(r){console.error("Checkout: Error parsing stored state:",r)}}t?(this.isProvider=t.isProvider??!1,this.productData=t.data,this.isRenewalMode=t.data.isRenewal,console.log("Checkout: DATA-->",this.productData),console.log("Checkout: Is Provider-->",this.isProvider),this.productData&&this.productData.plan&&this.productData.group?(console.log("Checkout: Handling subscription data"),this.handleSubscriptionData()):console.log("Checkout: No subscription data found or incomplete")):(console.log("Checkout: No navigation state found, using defaults"),this.determineContext())}tryGetStateFromHistory(){console.log("Checkout: Trying to get state from history"),this.determineContext()}handleSubscriptionData(){console.log("Handling subscription data:",this.productData),console.log("Productn data:",this.productData.selectedProduct.name);let t={id:this.productData.plan.id,name:this.productData.selectedProduct.name||"Subscription Plan",img:[],price:this.productData.plan.price||0,quantity:1,productSubType:this.productData.isRenewal?"service_subscribe":"subscribe",variants:"[]",variantsJson:[],isService:!0,formRegistrationId:0,base_quantity:1,price_per_quantity:this.productData.plan.price||0};this.cartItemsList=[t],this.cartItems=[t],this.productType="subscribe",this.paymentTypes=["cash","online"],this.checkoutForm&&this.checkoutForm.patchValue({paymentMode:"cash"}),console.log("Created subscription cart item:",t),console.log("Cart items list:",this.cartItemsList),console.log("Payment types set for subscription:",this.paymentTypes),console.log("Is provider for subscription renewal:",this.isProvider),console.log("Form initialized:",!!this.checkoutForm),console.log("Payment mode form control:",this.checkoutForm?.get("paymentMode")?.value),this.updateAmount()}initializeProviderInfo(){let t=JSON.parse(sessionStorage.getItem("provider")||"{}");this.name=t.name||"",this.amount=0}initializeComponent(){this.determineContext(),this.dates=this.buildDatesList(this.MAX_DATES),this.selectedDate=this.dates[0]?.date??null,!this.productData||!this.productData.plan||!this.productData.group?(this.cartItems=this.cartService.getCart(),this.productType=this.cartItems[0]?.productSubType||"standard",this.productIdForServiceSlot=this.cartItems[0]?.id,this.isService=this.cartItems[0]?.isService??!0,this.setCartItems(this.cartItems)):(this.productIdForServiceSlot=this.cartItems[0]?.id,this.isService=this.cartItems[0]?.isService??!0),this.updateAmount(),this.setDeliveryOptions()}setDeliveryOptions(){if(console.log("Setting delivery options for productType:",this.productType),this.productType==="subscribe"){this.showPickup=!0,this.showDeliverTo=!0,console.log("Subscription product: showPickup =",this.showPickup,"showDeliverTo =",this.showDeliverTo);let t=this.cartItems[0]?.delivery_option;t&&(t==="door_delivery"||t==="pickup")&&(this.selectedOption=t)}else this.allowedDeliver.length>0?(this.showPickup=this.allowedDeliver.includes("pickup"),this.showDeliverTo=this.allowedDeliver.includes("Door_step"),console.log("Non-subscription with settings: showPickup =",this.showPickup,"showDeliverTo =",this.showDeliverTo)):(this.showPickup=!0,this.showDeliverTo=!0,console.log("Non-subscription fallback: showPickup =",this.showPickup,"showDeliverTo =",this.showDeliverTo));console.log("Final delivery options - showPickup:",this.showPickup,"showDeliverTo:",this.showDeliverTo)}determineContext(){let t=this.router.url||"";t.includes("providers")?this.isProvider=!0:t.includes("customers")&&(this.isProvider=!1)}setupSubscriptions(){this.checkoutForm.get("bookSlot")?.valueChanges.pipe(fe(this.destroy$)).subscribe(t=>{this.selectedTime=t,this.cdr.markForCheck()}),this.checkoutForm.get("bookDateType")?.valueChanges.pipe(fe(this.destroy$),nt(this.DEBOUNCE_TIME),it()).subscribe(t=>{t==="today"&&(this.selectedDateIndex=0,this.selectedDate=this.dates[0]?.date??null,this.slotsEnabled&&this.selectedDate&&this.loadSlots()),this.cdr.markForCheck()}),this.checkoutForm.get("frequency")?.valueChanges.pipe(fe(this.destroy$)).subscribe(()=>this.cdr.markForCheck())}loadInitialData(){this.isLoading=!0,this.cdr.markForCheck(),this.memberService.list().pipe(fe(this.destroy$),tt(t=>(console.error("Error loading members:",t),et([])))).subscribe(t=>{this.customers=t,this.isLoading=!1,this.cdr.markForCheck()}),this.loadProviderSettings()}loadProviderSettings(){let t=JSON.parse(sessionStorage.getItem("selectedProvider")||"null"),n=this.providerDetail.getData()?.provider_id||t?.provider_id;n?(this.providerIdForSlots=n,this.providerInfoService.getProviderSettings(n).pipe(fe(this.destroy$),tt(r=>(console.error("Error loading provider settings:",r),et(null)))).subscribe(r=>{r?(this.providerSettings=r,this.slotsEnabled=!!r.slots_enabled,this.applySettings()):this.handleFallbackSettings(),this.isLoading=!1,this.cdr.markForCheck()})):(this.handleFallbackSettings(),this.isLoading=!1,this.cdr.markForCheck()),this.setDeliveryOptions()}handleFallbackSettings(){console.log("Using fallback settings for productType:",this.productType),this.setDeliveryOptions()}applySettings(){if(!this.providerSettings)return;this.paymentTypes=this.providerSettings.payment_type||[];let e=(this.providerSettings.metadata||[]).find(r=>r[this.productType]),n=e?e[this.productType]:null;this.allowedDeliver=n?.deliver||[],this.allowedBookTypes=n?.book_type||[],console.log("Applied settings - allowedDeliver:",this.allowedDeliver,"productType:",this.productType),this.setDeliveryOptions(),this.slotsEnabled||this.checkoutForm.get("bookSlot")?.setValue("Default"),this.slotsEnabled&&this.loadSlots()}loadSlots(){if(!(!this.providerIdForSlots||!this.selectedDate)){if(!this.isService)this.providerInfoService.getSlots("provider",this.providerIdForSlots).pipe(fe(this.destroy$)).subscribe(t=>{this.availableSlots=(t.slots||[]).map(e=>({slot_name:e.slot_name,start_time:e.start_time,end_time:e.end_time,slot_id:e.provider_slot_id})),this.availableSlots.length&&(this.timeSlots=this.availableSlots.map(e=>this.formatSlotLabel(e.start_time,e.end_time))),this.cdr.markForCheck()});else if(this.isService&&this.productIdForServiceSlot){let t=this.selectedDate.toISOString().slice(0,10);this.providerInfoService.getSlots("service",this.providerIdForSlots,this.productIdForServiceSlot).pipe(fe(this.destroy$)).subscribe(e=>{this.availableSlots=(e.slots||[]).map(n=>({slot_name:n.slot_name,start_time:n.start_time,end_time:n.end_time,slot_id:n.service_slot_id})),this.availableSlots.length&&(this.timeSlots=this.availableSlots.map(n=>this.formatSlotLabel(n.start_time,n.end_time))),this.cdr.markForCheck()})}}}createRegularOrder(){let e={order_type:this.getOrderType(),order_subtype:this.productType,user_id:this.isProvider&&Number(this.selectedCustomer?.user_id)||null,member_id:this.isProvider&&this.selectedCustomer?.member_id||0,provider_id:this.getProviderId(),slot_id:this.getSlotId()||null,delivery_date:this.getDeliveryDate(),assigned_to:this.getAssignedTo(),fullfillment_type:this.selectedOption,product_type:this.isService?"service":"product",payment:{method:this.checkoutForm.get("paymentMode")?.value||"cash",status:"pending",transaction_id:this.generateTransactionId(),amount:this.totalAmount,payment_details:{}},delivery_address:{line1:"Default Address",city:"Default City",state:"Default State",pincode:"000000",latlong:"0,0"},metadata:{products:this.cartItemsList.map(n=>({product_id:n.id,product_name:n.name,variants:n.variants||[],quantity:n.quantity||1,price_per_unit:n.price||0,gst_amount:0,total_price:(n.quantity||1)*(n.price||0)})),order_notes:this.checkoutForm.get("note")?.value||this.note},total_amount:this.totalAmount,updated_by:this.getUserId()};this.orderService.createOrder(e).pipe(fe(this.destroy$),$t(()=>{this.isCreatingOrder=!1,this.cdr.markForCheck()})).subscribe({next:n=>{console.log("Regular order created successfully:",n);let r=n.display_order_id||"ON"+Date.now(),c=n.amount||this.totalAmount;this.isProvider||this.pushNotificationService.sendOrderCreatedNotification({orderId:n.order_id?.toString()||Date.now().toString(),orderNumber:r,amount:c,customerName:this.authService.getUserInfo()?.name||"Customer",providerName:JSON.parse(sessionStorage.getItem("selectedProvider")||"{}").name||"Provider",providerId:this.getProviderId(),userId:this.getUserId(),orderType:"Regular Order"}),this.pushNotificationService.sendOrderSuccessNotification({orderNumber:r,amount:c,estimatedDelivery:this.selectedOption==="door_delivery"?"2-3 business days":"Ready for pickup",deliveryAddress:this.selectedOption==="door_delivery"?"201 Katlian No.21 Street, Sitka, Alaska 99835":"Pickup"}),this.cartService.clearCart();let p={orderNumber:r,totalAmount:c,paymentMethod:this.checkoutForm.get("paymentMode")?.value||"Cash",deliveryAddress:this.selectedOption==="door_delivery"?"201 Katlian No.21 Street, Sitka, Alaska 99835":"Pickup",estimatedDelivery:this.selectedOption==="door_delivery"?"2-3 business days":"Ready for pickup"};this.router.navigate(["/customers/info/order-success"],{state:{orderDetails:p,providerId:this.getProviderId()}})},error:n=>{console.error("Error creating regular order:",n),this.errorMessage="Failed to create order. Please try again.",this.cdr.markForCheck()}})}createSubscriptionOrder(t){console.log("Creating subscription order with data:",{productType:this.productType,isProvider:this.isProvider,selectedCustomer:this.selectedCustomer,providerId:this.getProviderId(),totalAmount:this.totalAmount,productData:this.productData});let e=this.cartItemsList[0];if(console.log("CART ITEM-->",e),!e){console.error("No cart items found for subscription order"),this.isCreatingOrder=!1,this.errorMessage="No items in cart",this.cdr.markForCheck();return}let n={order_type:"product_subscription",order_subtype:this.productType,user_id:this.isProvider?Number(this.selectedCustomer?.user_id):this.getUserId(),member_id:this.isProvider&&this.selectedCustomer?.member_id||null,provider_id:this.getProviderId(),fullfillment_type:this.selectedOption,product_type:this.isService?"service":"product",payment:{method:this.checkoutForm.get("paymentMode")?.value||"cash",status:"pending",transaction_id:this.generateTransactionId()},delivery_address:{line1:"Default Address",line2:"",city:"Default City",latlong:"0,0"},metadata:{product_id:e.id,product_name:e.name,status:"active",frequency:this.selectedFrequency,custom_days:this.selectedCustomDays,start_date:new Date().toISOString().slice(0,10),end_date:null,paused_until:null,base_quantity:e.quantity||1,price_per_quantity:e.price||0},form_data:{},total_amount:this.totalAmount,updated_by:this.getUserId()};console.log("\u{1F680} Calling createSubscriptionOrder API with data:",n),console.log("API endpoint:","orders"),console.log("\u23F0 Starting API call at:",new Date().toISOString()),this.orderService.createSubscriptionOrder(n).pipe(fe(this.destroy$),tt(r=>(console.error("\u274C Error in subscription order creation:",r),console.error("Error details:",{message:r.message,status:r.status,error:r.error,url:r.url}),this.errorMessage="Failed to create subscription order. Please try again.",et(null))),$t(()=>{console.log("\u{1F3C1} Order creation process finished (success or error)"),t&&clearTimeout(t),this.isCreatingOrder=!1,this.orderCreationStartTime=void 0,this.cdr.markForCheck()})).subscribe({next:r=>{if(console.log("\u{1F4E8} Received response from API:",r),!r){console.log("\u26A0\uFE0F No response received from subscription order creation");return}console.log("\u2705 Subscription order created successfully:",r);let c=r.display_order_id||"ON"+Date.now(),p=r.amount||this.totalAmount;this.isProvider||this.pushNotificationService.sendOrderCreatedNotification({orderId:r.order_id?.toString()||Date.now().toString(),orderNumber:c,amount:p,customerName:this.authService.getUserInfo()?.name||"Customer",providerName:JSON.parse(sessionStorage.getItem("selectedProvider")||"{}").name||"Provider",providerId:this.getProviderId(),userId:this.getUserId(),orderType:"Subscription Order"}),this.pushNotificationService.sendOrderSuccessNotification({orderNumber:c,amount:p,estimatedDelivery:this.selectedOption==="door_delivery"?"2-3 business days":"Ready for pickup",deliveryAddress:this.selectedOption==="door_delivery"?"201 Katlian No.21 Street, Sitka, Alaska 99835":"Pickup"}),this.cartService.clearCart();let f={orderNumber:c,totalAmount:p,paymentMethod:this.checkoutForm.get("paymentMode")?.value||"Cash",deliveryAddress:this.selectedOption==="door_delivery"?"201 Katlian No.21 Street, Sitka, Alaska 99835":"Pickup",estimatedDelivery:this.selectedOption==="door_delivery"?"2-3 business days":"Ready for pickup"};this.router.navigate(["/customers/info/order-success"],{state:{orderDetails:f,providerId:this.getProviderId()}})},error:r=>{console.error("Error creating subscription order:",r),this.errorMessage="Failed to create subscription. Please try again.",this.cdr.markForCheck()}})}onSlotSelect(t){this.selectedSlot=t,this.checkoutForm.get("bookSlot")?.setValue(t),this.checkoutForm.get("bookSlot")?.markAsTouched(),this.checkoutForm.get("bookSlot")?.updateValueAndValidity(),console.log("Selected slot:",t),console.log("USER-->",this.authService.getUserInfo())}createServiceSubscriptionOrder(){this.isCreatingOrder=!0;let t=new Date,e=new Date;switch(this.productData?.plan.billing_type){case"monthly":e.setMonth(e.getMonth()+1);break;case"yearly":e.setFullYear(e.getFullYear()+1);break;default:e.setMonth(e.getMonth()+1)}let n={order_type:"service_subscription",order_subtype:this.productData?.selectedProduct.product_subtype||"service_subscription",user_id:this.getUserId(),member_id:null,provider_id:this.productData?.plan?.provider_id,fullfillment_type:this.selectedOption,product_type:this.isService?"service":"product",payment:{method:"online",status:"pending",transaction_id:this.generateTransactionId(),amount:this.productData?.plan?.price,payment_details:{}},delivery_address:{line1:"Default Address",city:"Default City",state:"Default State",pincode:"000000",latlong:"0,0"},metadata:{provider_id:this.productData?.plan?.provider_id,subscription_id:this.productData?.subscriptionId||null,plan_id:this.productData?.plan.id,product_id:this.productData?.selectedProduct.product_id,group_id:this.productData?.group?.group_id||this.productData?.group,status:"active",billing_type:this.productData?.plan.billing_type,billing_cycle:this.productData?.plan.billing_cycle,start_date:t.toISOString().slice(0,10),end_date:e.toISOString().slice(0,10),amount_paid:this.productData?.plan.price,form_data:{fields:{product_name:this.productData?.selectedProduct.product_name}},member_id:this.productData?.memberId||null,user_id:this.getUserId(),mobile_number:Number(this.authService.getUserInfo()?.mobile_number)||void 0,auto_renewal:"FALSE"},total_amount:this.productData?.plan.price,updated_by:2};this.orderService.createServiceSubscriptionOrder(n).subscribe({next:r=>{let c=r.display_order_id||"ON"+Date.now(),p=r.amount||0;this.pushNotificationService.sendOrderCreatedNotification({orderId:r.order_id?.toString()||Date.now().toString(),orderNumber:c,amount:p,customerName:this.authService.getUserInfo()?.name||"Customer",providerName:JSON.parse(sessionStorage.getItem("selectedProvider")||"{}").name||"Provider",providerId:this.getProviderId(),userId:this.getUserId(),orderType:"Service Subscription"}),this.pushNotificationService.sendOrderSuccessNotification({orderNumber:c,amount:p,estimatedDelivery:this.selectedOption==="door_delivery"?"2-3 business days":"Ready for pickup",deliveryAddress:this.selectedOption==="door_delivery"?"201 Katlian No.21 Street, Sitka, Alaska 99835":"Pickup"}),this.cartService.clearCart();let f={orderNumber:c,totalAmount:p,paymentMethod:"Online",deliveryAddress:this.selectedOption==="door_delivery"?"201 Katlian No.21 Street, Sitka, Alaska 99835":"Pickup",estimatedDelivery:this.selectedOption==="door_delivery"?"2-3 business days":"Ready for pickup"};this.router.navigate(["/customers/info/order-success"],{state:{orderDetails:f}})},error:r=>{console.error("Error creating subscription order:",r),this.errorMessage="Failed to create order. Please try again.",this.cdr.markForCheck()},complete:()=>{this.isCreatingOrder=!1}})}getOrderType(){console.log("\u{1F50D} Determining order type..."),console.log("productData:",this.productData),console.log("cartItemsList:",this.cartItemsList);let t=this.cartItemsList[0];if(t){let r=t.productSubType;switch(console.log("Order type from cart item:",r),r){case"subscribe":return console.log("\u2705 Detected subscription order"),"subscription";case"standard":case"flexible":case"hybrid":return console.log("\u2705 Detected ondemand order"),"ondemand";case"forms":return console.log("\u2705 Detected forms order"),"forms";default:return console.log("\u2705 Detected service subscription order (default)"),"service_subscription"}}let e=Array.isArray(this.productData)?this.productData:[this.productData],n=this.productData?.[0]?.productSubType||e[0]?.productSubType||e[0]?.selectedProduct?.product_subtype;switch(console.log("Order type from productData (fallback):",n),n){case"subscribe":return"subscription";case"standard":case"flexible":case"hybrid":return"ondemand";case"forms":return"forms";default:return"service_subscription"}}getProviderId(){let t=JSON.parse(sessionStorage.getItem("selectedProvider")||"null");return this.providerDetail.getData()?.provider_id||t?.provider_id||this.authService.getSelectedProviderId()||0}getSlotId(){return this.selectedSlot?.slot_id}getDeliveryDate(){return this.selectedDate?.toISOString().slice(0,10)||new Date().toISOString().slice(0,10)}getAssignedTo(){return 0}generateTransactionId(){return`TXN_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}getUserId(){return this.authService.getUserId()}createFormsOrder(){let t=this.cartItemsList[0],e={order_type:"forms",order_subtype:this.productType||"string",user_id:this.isProvider?Number(this.selectedCustomer?.user_id)||0:this.getUserId()||0,member_id:null,provider_id:this.getProviderId()||0,payment:{method:this.checkoutForm.get("paymentMode")?.value||"string",status:"pending",transaction_id:this.generateTransactionId(),amount:this.totalAmount||0,payment_details:{}},delivery_address:{line1:"Default Address",city:"Default City",state:"Default State",pincode:"000000",latlong:"0,0"},metadata:{form_id:t?.formId,form_data:t?.formId?t?.formData:{}},total_amount:this.totalAmount||0,updated_by:this.getUserId()||0};this.orderService.createFormsOrder(e).pipe(fe(this.destroy$),$t(()=>{this.isCreatingOrder=!1,this.cdr.markForCheck()})).subscribe({next:n=>{let r=n.display_order_id||"ON"+Date.now(),c=n.amount||this.totalAmount;this.isProvider||this.pushNotificationService.sendOrderCreatedNotification({orderId:n.order_id?.toString()||Date.now().toString(),orderNumber:r,amount:c,customerName:this.authService.getUserInfo()?.name||"Customer",providerName:JSON.parse(sessionStorage.getItem("selectedProvider")||"{}").name||"Provider",providerId:this.getProviderId(),userId:this.getUserId(),orderType:"Forms Order"}),this.pushNotificationService.sendOrderSuccessNotification({orderNumber:r,amount:c,estimatedDelivery:this.selectedOption==="door_delivery"?"2-3 business days":"Ready for pickup",deliveryAddress:this.selectedOption==="door_delivery"?"201 Katlian No.21 Street, Sitka, Alaska 99835":"Pickup"}),this.cartService.clearCart();let p={orderNumber:r,totalAmount:c,paymentMethod:this.checkoutForm.get("paymentMode")?.value||"Cash",deliveryAddress:this.selectedOption==="door_delivery"?"201 Katlian No.21 Street, Sitka, Alaska 99835":"Pickup",estimatedDelivery:this.selectedOption==="door_delivery"?"2-3 business days":"Ready for pickup"};this.router.navigate(["/customers/info/order-success"],{state:{orderDetails:p,providerId:this.getProviderId()}})},error:n=>{console.error("Error creating forms order:",n),this.errorMessage="Failed to create forms order. Please try again.",this.cdr.markForCheck()}})}buildDatesList(t){let e=[],n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r=new Date;for(let c=0;c<t;c++){let p=new Date(r);p.setDate(r.getDate()+c);let f=String(p.getDate()).padStart(2,"0"),b=n[p.getDay()];e.push({date:p,label:b,day:f})}return e}formatSlotLabel(t,e){return`${t.substring(0,5)} - ${e.substring(0,5)}`}get upiUri(){let t="merchant@upi",e=JSON.parse(sessionStorage.getItem("provider")||"{}").name||"",n=this.totalAmount;return`upi://pay?pa=${t}&pn=${encodeURIComponent(e)}&am=${n}&cu=INR&tn=${encodeURIComponent("test")}`}changeAddress(t="select"){let e={type:"ACTION",data:{action:"mapView",value:"open",mapPage:t==="add"?"ADD_ADDRESS":"ADDRESS_SELECTION"}};window.ReactNativeWebView?.postMessage(JSON.stringify(e))}addNewCustomer(){this.dialog.open(Er,{width:"500px",disableClose:!0,data:{}}).afterClosed().subscribe(e=>{if(e){console.log("New customer data:",e);let n=e;this.customers.find(c=>c.member_mobile_number===n.member_mobile_number)||this.customers.push(n),this.selectedCustomer=n,this.cdr.markForCheck()}})}onPaymentStatusChange(t){console.log("Payment status changed to:",t),t==="paid"&&this.pushNotificationService.sendPaymentReceivedNotification({orderNumber:"TEMP_"+Date.now(),amount:this.totalAmount,paymentMethod:this.checkoutForm.get("paymentMode")?.value||"Cash",customerName:this.isProvider?this.selectedCustomer?.member_name:this.authService.getUserInfo()?.name})}markPaymentAsReceived(){console.log("Payment marked as received"),this.pushNotificationService.sendPaymentReceivedNotification({orderNumber:"TEMP_"+Date.now(),amount:this.totalAmount,paymentMethod:"Collect",customerName:this.isProvider?this.selectedCustomer?.member_name:this.authService.getUserInfo()?.name})}messageHandler=t=>{try{let e=JSON.parse(t.data);if(e.type==="ACTION"&&e.data.action==="ADDRESS_SELECTED"){let n=e.data.value;console.log("Address selected:",n),this.productData=he(W({},this.productData),{delivery_address:{line1:n.street||"",city:n.city||"",state:n.region||"",pincode:n.postal_code||"",latlong:`${n.latitude},${n.longitude}`,formattedAddress:n.formatted_address}}),this.cdr.markForCheck()}}catch(e){console.warn("Invalid message:",e)}};checkRenewalContext(){this.activatedRoute.queryParams.subscribe(t=>{t.renew==="true"&&(this.isRenewalMode=!0,this.loadRenewalContext())})}loadRenewalContext(){let t=sessionStorage.getItem("subscription_renewal_context");t&&(this.renewalContext=JSON.parse(t),console.log("Renewal context loaded:",this.renewalContext),this.populateRenewalData())}populateRenewalData(){this.renewalContext&&(this.renewalContext.memberName&&this.checkoutForm.patchValue({customerName:this.renewalContext.memberName}),this.renewalContext.amountPaid&&(this.amount=this.renewalContext.amountPaid),this.cdr.markForCheck())}changePlan(){if(console.log("Checkout: changePlan called",this.productData),!this.productData||!this.productData.originalSubscription){console.error("No subscription data available for plan change");return}let t=this.productData.originalSubscription||{subscription_id:this.productData.subscriptionId,order_id:this.productData.orderId,provider_id:this.productData.plan?.provider_id||this.renewalContext?.providerId,product_id:this.productData.selectedProduct?.product_id,plan_id:this.productData.plan?.id,start_date:"",end_date:"",group_id:this.productData.group?.group_id,status:"active",billing_type:"",amount_paid:this.productData.plan?.price||0,billing_cycle:"",form_data:null,member_id:this.productData.memberId,user_id:0,mobile_number:0,auto_renewal:!1,plan:{plan:this.productData.plan?.id,name:this.productData.plan?.name,price:this.productData.plan?.price,group_id:this.productData.group?.group_id,Subscription_cycle_start_Date:this.productData.plan?.subscription_cycle_start||""},product:{product_id:this.productData.selectedProduct?.product_id,name:this.productData.selectedProduct?.name},group:{group_id:this.productData.group?.group_id,group_name:this.productData.group?.group_name},member:this.productData.memberName?{member_id:this.productData.memberId,member_name:this.productData.memberName,mobile_number:"",email:null,status:null}:null},e={subscription:t};this.dialog.open(fn,{width:"90vw",maxWidth:"500px",data:e,disableClose:!1,panelClass:"change-plan-dialog-container"}).afterClosed().subscribe(r=>{r?(console.log("Checkout: ChangePlan dialog result:",r),this.productData=he(W({},this.productData),{plan:r.plan,group:r.group,isPlanChange:!0,previousPlan:{id:t.plan_id,name:t.plan.name,price:t.plan.price}}),this.cartItemsList.length>0&&(this.cartItemsList[0]=he(W({},this.cartItemsList[0]),{name:r.plan.name,price:r.plan.price,price_per_quantity:r.plan.price}),this.cartItems[0]=he(W({},this.cartItems[0]),{name:r.plan.name,price:r.plan.price,price_per_quantity:r.plan.price})),this.cartService.setCart(this.cartItems),this.cdr.detectChanges(),console.log("Checkout: Updated productData with new plan:",this.productData),console.log("Checkout: Updated cartItemsList:",this.cartItemsList),console.log("Checkout: New total amount:",this.totalAmount)):console.log("Checkout: ChangePlan dialog cancelled")})}static \u0275fac=function(e){return new(e||i)(y(te),y(X),y(Ht),y(en),y(De),y(le),y(dt),y(_n),y(Mi),y(H),y(Yt),y(Tr))};static \u0275cmp=w({type:i,selectors:[["app-checkout"]],decls:42,vars:32,consts:[["plainForm",""],["formContent",""],[1,"max-w-md","mx-auto","p-4","space-y-4","bg-white","checkout-container","max-h-[90vh]","overflow-y-auto"],[1,"flex","items-center","justify-between"],[1,"text-base","font-semibold"],[1,"grid","grid-cols-2","gap-3"],["class","info-card cursor-pointer",3,"ngClass","click",4,"ngIf"],["class","selected-customer",4,"ngIf"],["class","subscription-details",4,"ngIf"],[3,"formGroup"],["class","advance-input",3,"title","defaultExpandedStatus",4,"ngIf","ngIfElse"],[4,"ngIf"],["class","p-2 border rounded shadow space-y-4",4,"ngIf"],[1,"space-y-3","text-sm","mt-4"],[1,"flex","justify-between","items-center"],[1,"font-semibold"],[1,"text-primary","font-medium","text-sm"],["class","flex items-center justify-between border-b pb-2",4,"ngFor","ngForOf"],[1,"summary-card","bg-white","px-4","py-3"],[1,"flex","justify-between","items-center","cursor-pointer","border-b","pb-2",3,"click"],[1,"text-gray-600","text-sm","font-semibold"],[1,"flex","items-center","gap-2"],[1,"text-gray-900","font-semibold"],[1,"pi","text-xs","transition-transform","duration-200",3,"ngClass"],["class","mt-2 space-y-1 text-sm",4,"ngIf"],["class","bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",4,"ngIf"],["class","text-center py-4",4,"ngIf"],[1,"w-full","text-white","py-2","px-4","rounded-md","text-lg","order-btn",3,"click","disabled"],[1,"info-card","cursor-pointer",3,"click","ngClass"],["src","assets/images/pngs/order-deliver.png","width","32","height","32",3,"alt"],[1,"info-title"],[1,"info-subtitle"],[1,"ml-auto","flex","items-center","gap-2"],[1,"text-primary","text-xs",3,"click"],["src","assets/images/pngs/order-pickup.png","width","32","height","32",3,"alt"],[1,"selected-customer"],[1,"flex","items-center","gap-3"],["optionLabel","member_name","filterBy","member_name",1,"flex-1",3,"ngModelChange","options","ngModel","filter","placeholder"],["type","button",1,"px-4","py-2","bg-primary","text-white","text-sm","font-medium","rounded-md","hover:bg-primary-dark","transition-colors","duration-200","flex","items-center","gap-2",3,"click"],[1,"pi","pi-plus","text-xs"],[1,"subscription-details"],[1,"info-card"],[1,"flex","flex-col","gap-3"],[1,"pi","pi-credit-card","text-primary"],["type","button",1,"px-3","py-1.5","bg-blue-500","text-white","text-xs","font-medium","rounded-md","hover:bg-blue-600","transition-colors","duration-200","flex","items-center","gap-2",3,"click"],[1,"pi","pi-refresh","text-xs"],[1,"flex","flex-col","gap-2"],[1,"font-semibold","text-sm"],["class","flex justify-between items-center",4,"ngIf"],[1,"flex","justify-between","items-center","border-t","pt-2","mt-1"],[1,"font-bold","text-base","text-primary"],["class","bg-blue-50 border border-blue-200 rounded p-2 text-xs",4,"ngIf"],[1,"bg-blue-50","border","border-blue-200","rounded","p-2","text-xs"],[1,"flex","items-center","gap-1","text-blue-700"],[1,"pi","pi-info-circle"],[1,"font-medium"],[1,"advance-input",3,"title","defaultExpandedStatus"],[4,"ngTemplateOutlet"],[1,"advance-input"],["class","space-y-3",4,"ngIf"],[1,"space-y-3"],["name","Calendar",1,"w-4","h-4","text-primary"],[1,"text-sm","font-semibold"],[1,"flex","items-center","gap-6","text-sm","text-gray-800"],["class","inline-flex items-center gap-2 cursor-pointer",4,"ngIf"],[1,"flex","gap-3"],["type","button","class","chip-date",3,"ngClass","click",4,"ngFor","ngForOf"],["class","space-y-2",4,"ngIf"],[1,"inline-flex","items-center","gap-2","cursor-pointer"],["type","radio","formControlName","bookDateType","value","today",1,"accent-primary"],["type","radio","formControlName","bookDateType","value","schedule",1,"accent-primary"],["type","radio","formControlName","bookDateType","value","subscribe",1,"accent-primary"],["type","button",1,"chip-date",3,"click","ngClass"],[1,"text-sm"],[1,"text-xs"],[1,"space-y-2"],["name","Clock",1,"w-4","h-4","text-primary"],[1,"time-grid"],[4,"ngFor","ngForOf"],["type","button",1,"time-chip",3,"click","ngClass"],["name","Repeat",1,"w-4","h-4","text-primary"],[1,"text-sm","font-medium"],["type","radio","formControlName","frequency","value","daily",1,"accent-primary"],["type","radio","formControlName","frequency","value","weekly",1,"accent-primary"],["type","radio","formControlName","frequency","value","monthly",1,"accent-primary"],[1,"grid","grid-cols-2","gap-2"],["type","checkbox",1,"accent-primary",3,"change","checked"],[1,"flex","items-center","space-x-6","mt-2"],["class","flex items-center space-x-1",4,"ngIf"],[1,"flex","items-center","space-x-1"],["type","radio","formControlName","paymentMode",1,"accent-primary",3,"value"],[1,"p-2","border","rounded","shadow","space-y-4"],["type","radio","formControlName","paymentMode","value","cash",1,"accent-primary"],["type","radio","formControlName","paymentMode","value","collect",1,"accent-primary"],["class","qr-container",4,"ngIf"],[1,"flex","items-center","space-x-6"],["type","radio","name","paymentStatus","checked","",1,"accent-primary",3,"change"],["type","radio","name","paymentStatus",1,"accent-primary",3,"change"],["class","mt-4",4,"ngIf"],[1,"qr-container"],[1,"qr-scan",3,"qrdata","width","errorCorrectionLevel"],[1,"mt-4"],["type","button",1,"px-4","py-2","bg-green-600","text-white","rounded-md","hover:bg-green-700","transition-colors",3,"click"],[1,"flex","items-center","justify-between","border-b","pb-2"],[1,"w-10","h-10","object-contain","rounded",3,"src","alt"],[1,"font-semibold","text-sm","text-gray-900"],[1,"text-sm","font-semibold","text-gray-900"],[1,"qty-btn","qty-btn--minus",3,"click"],[1,"pi","pi-minus","text-sm"],[1,"w-6","text-center","text-black"],[1,"qty-btn","qty-btn--plus",3,"click"],[1,"pi","pi-plus","text-sm"],[1,"mt-2","space-y-1","text-sm"],[1,"flex","justify-between","py-1"],[1,"text-gray-500"],[1,"text-gray-900"],[1,"bg-red-100","border","border-red-400","text-red-700","px-4","py-3","rounded","mb-4"],[1,"text-center","py-4"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-primary","mx-auto"],[1,"text-sm","text-gray-600","mt-2"]],template:function(e,n){if(e&1){let r=I();s(0,"div",2)(1,"div",3)(2,"div",4),l(3),u(4,"translate"),o()(),s(5,"div",5),_(6,cl,14,15,"div",6)(7,ll,7,9,"div",6),o(),_(8,dl,8,9,"div",7)(9,ul,34,7,"div",8),s(10,"form",9),_(11,fl,3,5,"expander-template",10)(12,hl,2,1,"ng-template",null,0,Te)(14,Ml,1,1,"ng-template",null,1,Te)(16,El,7,5,"div",11)(17,Fl,29,17,"div",12),o(),s(18,"div",13)(19,"div",14)(20,"span",15),l(21),u(22,"translate"),o(),s(23,"button",16),l(24),u(25,"translate"),o()(),_(26,Nl,15,5,"div",17),o(),s(27,"div",18)(28,"div",19),C("click",function(){return x(r),P(n.toggleExpand())}),s(29,"span",20),l(30),u(31,"translate"),o(),s(32,"div",21)(33,"span",22),l(34),o(),h(35,"i",23),o()(),_(36,Bl,7,4,"div",24),o(),_(37,Rl,2,1,"div",25)(38,Al,5,3,"div",26),s(39,"button",27),C("click",function(){return x(r),P(n.orderNow())}),_(40,Vl,3,3,"span",11)(41,Ul,3,3,"span",11),o()()}if(e&2){let r=xe(13);a(3),v(g(4,24,"providerInfo.checkout.order_review")),a(3),d("ngIf",n.showDeliverTo),a(),d("ngIf",n.showPickup),a(),d("ngIf",n.isProvider),a(),d("ngIf",(n.productData==null?null:n.productData.productSubType)==="subscribe"||(n.productData==null?null:n.productData.selectedProduct)),a(),d("formGroup",n.checkoutForm),a(),d("ngIf",n.isProvider)("ngIfElse",r),a(5),d("ngIf",!n.isProvider),a(),d("ngIf",n.isProvider),a(4),v(g(22,26,"providerInfo.checkout.order_details")),a(3),v(g(25,28,"providerInfo.checkout.add_more")),a(2),d("ngForOf",n.cartItemsList),a(4),v(g(31,30,"providerInfo.checkout.total")),a(4),S("\u20B9",n.totalAmount,""),a(),d("ngClass",n.expanded?"pi-chevron-up":"pi-chevron-down"),a(),d("ngIf",n.expanded),a(),d("ngIf",n.errorMessage),a(),d("ngIf",n.isLoading),a(),_e("opacity-50",n.isCreatingOrder),d("disabled",!n.canCreateOrder),a(),d("ngIf",!n.isCreatingOrder),a(),d("ngIf",n.isCreatingOrder)}},dependencies:[ye,G,E,ki,Be,ve,Q,Ri,j,Z,Ie,ee,re,tn,Xo,Kt,Dr,N],styles:[".checkout-container[_ngcontent-%COMP%]{border-radius:16px}.header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.chip-date[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:56px;height:64px;border:1px solid #e5e7eb;border-radius:10px;color:#6b7280;background-color:#fff}.chip-date--selected[_ngcontent-%COMP%]{border-color:#5d157c;color:#111827;box-shadow:0 0 0 2px #5d157c26}.time-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:1rem}.time-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;height:36px;border-radius:9999px;padding:0 12px;border:1px solid #e5e7eb;color:#111827;font-size:.8rem}.time-chip--selected[_ngcontent-%COMP%]{background-color:#5d157c;color:#fff;border-color:#5d157c}.summary-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:10px}.order-btn[_ngcontent-%COMP%]{height:44px;border-radius:10px;background-color:#5d157c!important}.info-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;border:1px solid #e5e7eb;border-radius:12px;padding:12px}.info-title[_ngcontent-%COMP%]{font-weight:600;font-size:14px}.info-subtitle[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;line-height:1.2}.text-primary[_ngcontent-%COMP%]{color:#5d157c!important}.bg-primary[_ngcontent-%COMP%]{background-color:#5d157c!important}.accent-primary[_ngcontent-%COMP%]{accent-color:#5D157C}.qty-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;border-radius:8px;border:1px solid #e5e7eb;background-color:#fff;color:#111827}.qty-btn--plus[_ngcontent-%COMP%]{background-color:#5d157c;color:#fff;border-color:#5d157c}.checkout-container[_ngcontent-%COMP%]{height:100%}.checkout-container[_ngcontent-%COMP%]   .order-btn[_ngcontent-%COMP%]{position:fixed;left:.2rem;right:0;width:98%;bottom:.2rem}.checkout-container[_ngcontent-%COMP%]   .order-btn[_ngcontent-%COMP%]:disabled{opacity:.5}.qr-container[_ngcontent-%COMP%]{text-align:center;background-color:#fff;border-radius:12px;padding:16px;box-shadow:0 0 8px #0000001a}.qr-container[_ngcontent-%COMP%]   .qr-scan[_ngcontent-%COMP%]   .qrcode[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{width:-webkit-fill-available}h2[_ngcontent-%COMP%]{margin-bottom:12px}.info-card[_ngcontent-%COMP%]{display:flex;cursor:pointer;align-items:center;border-radius:.5rem;border-width:1px;padding:.75rem;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.info-card.selected[_ngcontent-%COMP%]{border-color:#5d157c;background-color:#f5e8ff}"],changeDetection:0})};var ql=()=>({name:"John Cooper"}),Gl=()=>[1,2,3,4,5];function jl(i,t){if(i&1){let e=I();s(0,"button",18),C("click",function(){let r=x(e).$implicit,c=m();return P(c.setRating(r))}),s(1,"mat-icon"),l(2,"star"),o()()}if(i&2){let e=t.$implicit,n=m();a(),_e("text-yellow-400",n.rating>=e)("text-gray-300",n.rating<e)}}function zl(i,t){i&1&&(s(0,"mat-icon"),l(1,"check"),o())}function $l(i,t){if(i&1){let e=I();s(0,"button",19),C("click",function(){let r=x(e).$implicit,c=m();return P(c.toggleTag(r))}),_(1,zl,2,0,"mat-icon",20),l(2),o()}if(i&2){let e=t.$implicit,n=m();_e("selected-tag",n.isTagSelected(e)),a(),d("ngIf",n.isTagSelected(e)),a(),S(" ",e," ")}}var At=class i{rating=0;selectedTags=[];tags=["Service","Supportive","Friendly","Delivery","Contactless"];feedback="";setRating(t){this.rating=t}toggleTag(t){let e=this.selectedTags.indexOf(t);e>-1?this.selectedTags.splice(e,1):this.selectedTags.push(t)}isTagSelected(t){return this.selectedTags.includes(t)}onSubmit(){}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=w({type:i,selectors:[["app-rating-form"]],decls:31,vars:24,consts:[[1,"max-w-md","mx-auto"],[1,"pt-6"],[1,"flex","justify-end"],["mat-button","","color","primary",1,"text-sm"],[1,"flex","flex-col","items-center","space-y-4","mb-6"],[1,"avatar"],[1,"avatar-icon"],[1,"text-xl","font-semibold"],[1,"flex","space-x-1"],["class","focus:outline-none",3,"click",4,"ngFor","ngForOf"],[1,"text-sm","text-muted-foreground"],[1,"flex","flex-wrap","gap-2","mb-6"],["mat-stroked-button","",3,"selected-tag","click",4,"ngFor","ngForOf"],[1,"space-y-4"],[1,"text-sm","font-medium","mb-2"],["appearance","outline",1,"w-full"],["matInput","","rows","4",3,"ngModelChange","placeholder","ngModel"],["mat-raised-button","","color","primary",1,"w-full",3,"click"],[1,"focus:outline-none",3,"click"],["mat-stroked-button","",3,"click"],[4,"ngIf"]],template:function(e,n){e&1&&(s(0,"mat-card",0)(1,"mat-card-content",1)(2,"div",2)(3,"button",3),l(4),u(5,"translate"),o()(),s(6,"div",4)(7,"div",5)(8,"mat-icon",6),l(9,"person"),o()(),s(10,"h2",7),l(11),u(12,"translate"),o(),s(13,"div",8),_(14,jl,3,4,"button",9),o(),s(15,"p",10),l(16),u(17,"translate"),o()(),s(18,"div",11),_(19,$l,3,4,"button",12),o(),s(20,"div",13)(21,"div")(22,"p",14),l(23),u(24,"translate"),o(),s(25,"mat-form-field",15)(26,"textarea",16),u(27,"translate"),ce("ngModelChange",function(c){return se(n.feedback,c)||(n.feedback=c),c}),o()()(),s(28,"button",17),C("click",function(){return n.onSubmit()}),l(29),u(30,"translate"),o()()()()),e&2&&(a(4),v(g(5,9,"providerInfo.feedback.skip")),a(7),v(bt(12,11,"providerInfo.feedback.rate_user",Rn(22,ql))),a(3),d("ngForOf",Rn(23,Gl)),a(2),v(g(17,14,"providerInfo.feedback.leave_feedback")),a(3),d("ngForOf",n.tags),a(4),v(g(24,16,"providerInfo.feedback.share_more")),a(3),V("placeholder",g(27,18,"providerInfo.feedback.placeholder")),ae("ngModel",n.feedback),a(3),S(" ",g(30,20,"providerInfo.feedback.submit")," "))},dependencies:[G,E,_r,xr,Zt,Cr,Pr,ur,Q,j,Ie,N],styles:[".max-w-md[_ngcontent-%COMP%]{max-width:28rem}.mx-auto[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}.pt-6[_ngcontent-%COMP%]{padding-top:1.5rem}.flex[_ngcontent-%COMP%]{display:flex}.flex-col[_ngcontent-%COMP%]{flex-direction:column}.items-center[_ngcontent-%COMP%]{align-items:center}.justify-end[_ngcontent-%COMP%]{justify-content:flex-end}.space-y-4[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:1rem}.mb-6[_ngcontent-%COMP%]{margin-bottom:1.5rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.font-semibold[_ngcontent-%COMP%]{font-weight:600}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-muted-foreground[_ngcontent-%COMP%]{color:#6b7280}.space-x-1[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:.25rem}.focus\\:outline-none[_ngcontent-%COMP%]:focus{outline:none}.text-yellow-400[_ngcontent-%COMP%]{color:#fbbf24}.text-gray-300[_ngcontent-%COMP%]{color:#d1d5db}.flex-wrap[_ngcontent-%COMP%]{flex-wrap:wrap}.gap-2[_ngcontent-%COMP%]{gap:.5rem}.w-full[_ngcontent-%COMP%]{width:100%}.selected-tag[_ngcontent-%COMP%]{background-color:#f3e8ff;color:#9333ea;border-color:#9333ea}.avatar[_ngcontent-%COMP%]{width:4rem;height:4rem;background-color:#9333ea;border-radius:50%;display:flex;justify-content:center;align-items:center}.avatar-icon[_ngcontent-%COMP%]{font-size:2rem;color:#fff}"]})};var vt=fi(ra());function Yl(i,t){if(i&1){let e=I();s(0,"input",38),C("input",function(){x(e);let r=m();return P(r.filterMembers())})("keydown",function(r){x(e);let c=m();return P(c.preventInvalidInput(r))}),o()}if(i&2){let e=m();d("formControl",e.filterControl)}}function Wl(i,t){i&1&&(s(0,"div",39),l(1," Valid User Mobile is required. "),o())}function Kl(i,t){i&1&&(s(0,"div",39),l(1," Business Name is required. "),o())}function Xl(i,t){i&1&&(s(0,"div",39),l(1," Display Name is required. "),o())}function Ql(i,t){i&1&&(s(0,"div",39),l(1," Short Description is required. "),o())}function Zl(i,t){i&1&&(s(0,"div",39),l(1," Business Type is required. "),o())}function ed(i,t){i&1&&(s(0,"div",39),l(1," Valid Primary Number is required. "),o())}function td(i,t){i&1&&(s(0,"div",39),l(1," Valid Alternate Number is required. "),o())}function nd(i,t){i&1&&(s(0,"div"),l(1," Label is required. "),o())}function id(i,t){if(i&1){let e=I();s(0,"div",48),C("click",function(){x(e);let r=m().index,c=m();return P(c.getLocation(r))}),h(1,"i",49),s(2,"span"),l(3," Location Detected"),o()()}}function rd(i,t){if(i&1){let e=I();s(0,"div",50),C("click",function(){x(e);let r=m().index,c=m();return P(c.getLocation(r))}),h(1,"i",49),s(2,"span"),l(3," Click to detect location * "),o()()}}function od(i,t){if(i&1){let e=I();s(0,"div",40)(1,"div",41),C("click",function(){let r=x(e).index,c=m();return P(c.removeLocation(r))}),h(2,"i",42),o(),s(3,"div",1)(4,"label",43),l(5,"Label:"),o(),h(6,"input",44),_(7,nd,2,0,"div",45),o(),_(8,id,4,0,"div",46)(9,rd,4,0,"div",47),o()}if(i&2){let e,n,r,c=t.$implicit,p=t.index;d("formGroupName",p),a(7),d("ngIf",((e=c.get("label"))==null?null:e.invalid)&&((e=c.get("label"))==null?null:e.touched)),a(),d("ngIf",(n=c.get("latitude"))==null?null:n.value),a(),d("ngIf",!((r=c.get("latitude"))!=null&&r.value))}}function ad(i,t){i&1&&(s(0,"div",39),l(1," Valid Email is required. "),o())}function sd(i,t){i&1&&(s(0,"div",39),l(1," Address is required. "),o())}function cd(i,t){i&1&&(s(0,"div",39),l(1," Logo is required. "),o())}function ld(i,t){i&1&&(s(0,"div",39),l(1," Member Only Display is required. "),o())}var Vt=class i{constructor(t,e,n,r,c){this._commonService=t;this._webviewService=e;this._memberService=n;this._auth=r;this.fb=c}editData;businessInfoForm;filterControl=new Bi("");businessTypeOptions=[{name:"On Demand",code:"on_demand"},{name:"Subscription",code:"subscription"}];members=[];filteredMembers=[];locationsForFormIndex=0;searchDebouncer=new Le;destroy$=new Le;visibilityOptions=[{name:"Public",value:"Public"},{name:"Private",value:"Private"},{name:"True",value:"true"}];ngOnInit(){this._commonService.providerOnboardLocation.subscribe(t=>{this.locations?.at(this.locationsForFormIndex)?.get("latitude")?.setValue(t.lat_lon.latitude),this.locations?.at(this.locationsForFormIndex)?.get("longitude")?.setValue(t.lat_lon.longitude)}),this._memberService.listByProviderId(this._auth.oneTownProviderId).subscribe({next:t=>{this.members=t.filter(e=>!!e.user_id),this.filteredMembers=[...this.members]},complete:()=>{this.setFormDataFromEditData()}}),this.addLocation(),this.searchDebouncer.pipe(nt(500),it(),fe(this.destroy$)).subscribe(t=>{this.performSearch(t)})}setFormDataFromEditData(){this.editData&&Object.keys(this.editData).forEach(t=>{let e=t,n=this.editData?.[e];if(n!=null)if(e==="location"&&Array.isArray(n))this.setLocationArray(n);else if(e==="logo_url")this.step1Form.get("logo_url")?.setValue(n);else if(e==="user_id"){let r=this.members.find(c=>c.user_id===n);this.step1Form.get("user_mobile")?.setValue(r?.member_mobile_number),this.step1Form.get("user_id")?.setValue(n)}else this.step1Form.controls.hasOwnProperty(e)&&this.step1Form.get(e)?.setValue(n)})}setLocationArray(t){this.locations.clear(),t.forEach(e=>{this.locations.push(this.fb.group({label:e.label,latitude:e.latitude,longitude:e.longitude}))})}get step1Form(){return this.businessInfoForm?.get("step1")}getLocation(t){this.locationsForFormIndex=t,this._webviewService.passActionToRN({action:vt.ACTIONS.mapView,value:vt.MapViewAction.AddressMap,mapPage:vt.MapPage.PROVIDER_ONBOARD})}afterUpload(t){this.step1Form?.get("logo_url")?.setValue(t[0])}get locations(){return this.step1Form.get("location")}addLocation(){let t=this.fb.group({label:[""],latitude:[0],longitude:[0]});this.locations.push(t)}removeLocation(t){this.locations.removeAt(t)}filterMembers(){let t=this.filterControl.value?.toString()||"";this.searchDebouncer.next(t)}performSearch(t){t.trim()?this._memberService.listByProviderId(this._auth.oneTownProviderId,t).subscribe({next:e=>{this.filteredMembers=e.filter(n=>!!n.user_id)},error:e=>{console.error("Error filtering members:",e),this.filteredMembers=[]}}):this.filteredMembers=[...this.members]}preventInvalidInput(t){}onMobileNoChange(t){let e=this.step1Form.get("user_mobile")?.value;if(this.step1Form.get("user_id")?.setValue(null),e){let n=this.members.find(r=>r.member_mobile_number===e);console.log("member"),console.log(JSON.stringify(n)),n?.user_id&&this.step1Form.get("user_id")?.setValue(Number(n.user_id))}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(e){return new(e||i)(y(er),y(Zi),y(en),y(H),y(te))};static \u0275cmp=w({type:i,selectors:[["step1"]],inputs:{editData:"editData",businessInfoForm:[0,"form","businessInfoForm"]},decls:73,vars:21,consts:[[3,"formGroup"],[1,"form-group"],["for","userMobile"],["placeholder","User Mobile","formControlName","user_mobile","optionValue","member_mobile_number","optionLabel","member_mobile_number",1,"custom-dropdown",3,"onChange","options","filter"],["pTemplate","filter"],["class","error-message",4,"ngIf"],["for","businessName"],["id","businessName","type","text","placeholder","Business Name","formControlName","business_name"],["for","display_name"],["id","display_name","type","text","placeholder","Display Name","formControlName","display_name"],["for","shortDesc"],["id","shortDesc","type","text","placeholder","Short Description","formControlName","short_description"],["for","businessType"],["formControlName","business_type","optionLabel","name","optionValue","code","id","businessType","placeholder","Select business_type ",1,"custom-dropdown",3,"options","showToggleAll","resetFilterOnHide","showClear","filter"],["for","primaryNumber"],["id","primaryNumber","type","tel","pattern","[0-9]*","placeholder","Primary Number","formControlName","primary_call_number"],["for","alternateNumber"],["id","alternateNumber","type","tel","pattern","[0-9]*","placeholder","Alternate Number","formControlName","alternate_call_number"],["formArrayName","location",1,"location-section"],[1,"location-title"],[1,"location-note-wrap"],[1,"location-note"],[1,"note-text"],[1,"pi","pi-map-marker","location-icon",3,"click"],["formArrayName","location",1,"locations-wrap"],["class","location-row",3,"formGroupName",4,"ngFor","ngForOf"],[1,"location-btn-wrap"],["type","button",1,"primary",3,"click"],[1,"pi","pi-plus"],["for","email"],["id","email","type","email","placeholder","Email","formControlName","email"],["for","address"],["id","address","type","text","placeholder","Address","formControlName","address_to_display"],["for","logo"],[3,"uploadedUrls","uploadedFileName"],[1,"switch-btn-group"],["for","memberOnlyDisplay"],["formControlName","member_only_display"],["type","text","pInputText","","placeholder","Search by name or mobile...",3,"input","keydown","formControl"],[1,"error-message"],[1,"location-row",3,"formGroupName"],[1,"close-icon",3,"click"],[1,"pi","pi-times-circle"],["for","locaion_label"],["id","locaion_label","type","text","placeholder","label","formControlName","label"],[4,"ngIf"],["class","location-detected",3,"click",4,"ngIf"],["class","location-detected no-location",3,"click",4,"ngIf"],[1,"location-detected",3,"click"],[1,"pi","pi-map-marker"],[1,"location-detected","no-location",3,"click"]],template:function(e,n){if(e&1&&(s(0,"div",0)(1,"div",1)(2,"label",2),l(3,"User Mobile"),o(),s(4,"p-dropdown",3),C("onChange",function(c){return n.onMobileNoChange(c)}),_(5,Yl,1,1,"ng-template",4),o(),_(6,Wl,2,0,"div",5),o(),s(7,"div",1)(8,"label",6),l(9,"Business Name"),o(),h(10,"input",7),_(11,Kl,2,0,"div",5),o(),s(12,"div",1)(13,"label",8),l(14,"Display Name"),o(),h(15,"input",9),_(16,Xl,2,0,"div",5),o(),s(17,"div",1)(18,"label",10),l(19,"Short Description"),o(),h(20,"input",11),_(21,Ql,2,0,"div",5),o(),s(22,"div",1)(23,"label",12),l(24,"Business Type"),o(),h(25,"p-multiSelect",13),_(26,Zl,2,0,"div",5),o(),s(27,"div",1)(28,"label",14),l(29,"Primary Number"),o(),h(30,"input",15),_(31,ed,2,0,"div",5),o(),s(32,"div",1)(33,"label",16),l(34,"Alternate Number:"),o(),h(35,"input",17),_(36,td,2,0,"div",5),o(),s(37,"div",18)(38,"label",19),l(39,"Location"),o(),s(40,"div",20)(41,"div",21)(42,"span",22),l(43,"location"),o(),s(44,"i",23),C("click",function(){return n.getLocation(0)}),o()()()(),s(45,"div",24)(46,"span"),l(47,"Location :"),o(),_(48,od,10,4,"div",25),s(49,"div",26)(50,"button",27),C("click",function(){return n.addLocation()}),h(51,"i",28),l(52," Location "),o()()(),s(53,"div",1)(54,"label",29),l(55,"Email:"),o(),h(56,"input",30),_(57,ad,2,0,"div",5),o(),s(58,"div",1)(59,"label",31),l(60,"Address:"),o(),h(61,"input",32),_(62,sd,2,0,"div",5),o(),s(63,"div",1)(64,"label",33),l(65,"Logo:"),o(),s(66,"file-upload",34),C("uploadedUrls",function(c){return n.afterUpload(c)}),o(),_(67,cd,2,0,"div",5),o(),s(68,"div",35)(69,"label",36),l(70,"Member Only Display:"),o(),h(71,"p-inputSwitch",37),_(72,ld,2,0,"div",5),o()()),e&2){let r,c,p,f,b,O,k,R,T,me,ue,ge;d("formGroup",n.step1Form),a(4),d("options",n.filteredMembers)("filter",!0),a(2),d("ngIf",(n.step1Form==null||(r=n.step1Form.get("user_mobile"))==null?null:r.invalid)&&(n.step1Form==null||(r=n.step1Form.get("user_mobile"))==null?null:r.touched)),a(5),d("ngIf",(n.step1Form==null||(c=n.step1Form.get("business_name"))==null?null:c.invalid)&&(n.step1Form==null||(c=n.step1Form.get("business_name"))==null?null:c.touched)),a(5),d("ngIf",(n.step1Form==null||(p=n.step1Form.get("display_name"))==null?null:p.invalid)&&(n.step1Form==null||(p=n.step1Form.get("display_name"))==null?null:p.touched)),a(5),d("ngIf",(n.step1Form==null||(f=n.step1Form.get("short_description"))==null?null:f.invalid)&&(n.step1Form==null||(f=n.step1Form.get("short_description"))==null?null:f.touched)),a(4),d("options",n.businessTypeOptions)("showToggleAll",!1)("resetFilterOnHide",!0)("showClear",!1)("filter",!1),a(),d("ngIf",(n.step1Form==null||(b=n.step1Form.get("business_type"))==null?null:b.invalid)&&(n.step1Form==null||(b=n.step1Form.get("business_type"))==null?null:b.touched)),a(5),d("ngIf",(n.step1Form==null||(O=n.step1Form.get("primary_call_number"))==null?null:O.invalid)&&(n.step1Form==null||(O=n.step1Form.get("primary_call_number"))==null?null:O.touched)),a(5),d("ngIf",(n.step1Form==null||(k=n.step1Form.get("alternate_call_number"))==null?null:k.invalid)&&(n.step1Form==null||(k=n.step1Form.get("alternate_call_number"))==null?null:k.touched)),a(12),d("ngForOf",n.locations==null?null:n.locations.controls),a(9),d("ngIf",(n.step1Form==null||(R=n.step1Form.get("email"))==null?null:R.invalid)&&(n.step1Form==null||(R=n.step1Form.get("email"))==null?null:R.touched)),a(5),d("ngIf",(n.step1Form==null||(T=n.step1Form.get("address_to_display"))==null?null:T.invalid)&&(n.step1Form==null||(T=n.step1Form.get("address_to_display"))==null?null:T.touched)),a(4),d("uploadedFileName",(me=n.step1Form.get("logo_url"))==null?null:me.value),a(),d("ngIf",(n.step1Form==null||(ue=n.step1Form.get("logo_url"))==null?null:ue.invalid)&&(n.step1Form==null||(ue=n.step1Form.get("logo_url"))==null?null:ue.touched)),a(5),d("ngIf",(n.step1Form==null||(ge=n.step1Form.get("member_only_display"))==null?null:ge.invalid)&&(n.step1Form==null||(ge=n.step1Form.get("member_only_display"))==null?null:ge.touched))}},dependencies:[G,E,Wt,ct,Be,Xt,Mr,Q,j,Z,ji,Ai,ee,re,Vi,Ui,xt],styles:[".form-array[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:flex;margin-top:.5rem}.form-array[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .form-group.radius[_ngcontent-%COMP%]{width:5rem;margin-left:.5rem}.form-array[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.3rem}.add-service-btn-wrap[_ngcontent-%COMP%]   button.btn[_ngcontent-%COMP%]{margin-top:.5rem;background-color:#5d157c;color:#fff;padding:0 .7rem;border-radius:.25rem}.switch-btn-group[_ngcontent-%COMP%]{margin-top:1rem;display:flex;justify-content:space-between;margin-bottom:1rem}.switch-btn-group.bolder[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;font-size:14px;color:#5d157c}.switch-btn-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#5d157c;font-weight:400;font-size:14px}.switch-btn-group[_ngcontent-%COMP%]     p-inputswitch>div{height:1.5rem}.switch-btn-group[_ngcontent-%COMP%]     .p-inputswitch.p-inputswitch-checked .p-inputswitch-slider{background-color:#5d157c!important}.locations-wrap[_ngcontent-%COMP%]   .location-row[_ngcontent-%COMP%]{position:relative;border:1px solid grey;padding:1rem;margin-bottom:1rem}.locations-wrap[_ngcontent-%COMP%]   .location-row[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{position:absolute;top:0;right:0;cursor:pointer}.locations-wrap[_ngcontent-%COMP%]   .location-row[_ngcontent-%COMP%]   .location-detected[_ngcontent-%COMP%]{margin-top:.5rem;border:1px solid #f1f1f1;padding:.3rem}.locations-wrap[_ngcontent-%COMP%]   .location-row[_ngcontent-%COMP%]   .location-detected.no-location[_ngcontent-%COMP%]{border-color:red;color:red}.locations-wrap[_ngcontent-%COMP%]   .location-row[_ngcontent-%COMP%]   .location-detected.no-location[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:red}.locations-wrap[_ngcontent-%COMP%]   .location-btn-wrap[_ngcontent-%COMP%]{text-align:right}.locations-wrap[_ngcontent-%COMP%]   .location-btn-wrap[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:1px solid #9d9d9d;padding:5px;border-radius:5px;color:#9d9d9d;background:#f3f3f3}.location-section[_ngcontent-%COMP%]{margin:1rem 0}.location-title[_ngcontent-%COMP%]{font-weight:700;color:#6a1b9a;display:block;margin-bottom:.5rem}.location-note-wrap[_ngcontent-%COMP%]{background:#f8f1fc;border-radius:8px;padding:1rem;display:flex;justify-content:space-between;align-items:center}.note-text[_ngcontent-%COMP%]{color:#b0a7b8;font-size:.95rem}.location-icon[_ngcontent-%COMP%]{color:#6a1b9a;font-size:1.5rem;cursor:pointer}  .custom-dropdown .p-multiselect{width:100%;border:1px solid #5D157C;border-radius:10px;padding:4px 12px;font-size:14px;font-weight:500;color:#333;background:#fff}  .custom-dropdown .p-multiselect-label{padding:6px 0;font-size:14px;color:#333}  .custom-dropdown .p-multiselect-trigger{color:#5d157c}  .custom-dropdown .p-multiselect-panel{border-radius:10px;box-shadow:0 4px 20px #0000000d;border:1px solid #eee;padding:.5rem 0}  .custom-dropdown .p-multiselect-header{padding:.5rem 1rem;border-bottom:1px solid #eee;font-weight:700;color:#555}  .custom-dropdown .p-multiselect-item{padding:.6rem 1rem;font-size:14px;border-radius:6px;margin:2px 8px;transition:background .2s}  .custom-dropdown .p-multiselect-item:hover{background-color:#f3e8fa}  .custom-dropdown .p-checkbox-box{border-radius:6px;border-color:#5d157c}  .custom-dropdown .p-checkbox-box.p-highlight{background-color:#5d157c;border-color:#5d157c}  .custom-dropdown .p-checkbox-icon{font-size:.8rem;color:#fff}"]})};var Ut=class i extends at{constructor(e,n){let r=n.getSelectedProviderId(),c=D.CATEGORY.LIST.replace("_PROVIDER_ID_",r.toString()),p={create:D.CATEGORY.URL,update:D.CATEGORY.URL,list:c,delete:D.CATEGORY.URL};super(e,"product_category_id",p,"product_categories");this.authServ=n}deleteCategory(e){super.delete(e)}static \u0275fac=function(n){return new(n||i)($(oe),$(H))};static \u0275prov=K({token:i,factory:i.\u0275fac,providedIn:"root"})};function pd(i,t){i&1&&(s(0,"div",20),l(1),u(2,"translate"),o()),i&2&&(a(),S(" ",g(2,1,"businessInfo.step3.banner_required")," "))}function md(i,t){if(i&1){let e=I();s(0,"div",21)(1,"div",22),h(2,"input",23),u(3,"translate"),s(4,"button",24),h(5,"i",25),o()(),s(6,"div",26),h(7,"input",27),u(8,"translate"),s(9,"button",28),C("click",function(){x(e);let r=m();return P(r.addServiceLocation())}),l(10,"+"),o()()()}if(i&2){let e=t.$implicit;d("formGroup",e),a(2),d("placeholder",g(3,3,"businessInfo.step3.service_location")),a(5),d("placeholder",g(8,5,"businessInfo.step3.radius"))}}function ud(i,t){i&1&&(s(0,"div",20),l(1),u(2,"translate"),o()),i&2&&(a(),S(" ",g(2,1,"businessInfo.step3.work_days_required")," "))}var Lt=class i{constructor(t,e){this.categoryService=t;this.fb=e}ngOnInit(){this.initializeTreeData(),this.setFormDataFromEditData()}businessInfoForm;editData;setFormDataFromEditData(){if(this.editData){Object.keys(this.editData).forEach(e=>{let n=e,r=this.editData?.[n];r!=null&&n!=="location"&&Array.isArray(r)&&(n==="provider_category_id"&&Array.isArray(r)?this.setTreeSelectValue(r):this.step3Form.controls.hasOwnProperty(n)&&this.step3Form.get(n)?.setValue(r))}),this.editData.payment_mode&&this.step3Form.get("payment_mode")?.patchValue({cash_on_hand:this.editData.payment_mode.cash_on_hand??!1,online:this.editData.payment_mode.online??!1});let t=this.editData.location||[];this.serviceLocations.clear(),t.slice(1).forEach(e=>{this.addServiceLocation({label:e.label,latitude:e.latitude,longitude:e.longitude,radius:"5"})})}}treeData=[];selectedCategories=[];noteMsgEnabled=!1;get step3Form(){return this.businessInfoForm?.get("step3")}get paymentMode(){return this.businessInfoForm?.get("step3")?.get("payment_mode")}orderTypesOptions=[{name:"new",code:"new"},{name:"inprogress",code:"inprogress"},{name:"close",code:"close"},{name:"appointment",code:"appointment"},{name:"token",code:"token"},{name:"wait",code:"wait"}];orderStatusOptions=[{name:"On Demand",code:"ondemand"},{name:"Schedule",code:"schedule"},{name:"Subscription",code:"subscription"}];setOrderType(t){let e=this.step3Form.get("orderType");console.log(e)}initializeTreeData(){this.categoryService.list().subscribe(t=>{let e=t.filter(n=>n.parent_id===null);this.treeData=this.convertToTreeNode(e)})}convertToTreeNode(t){return t.map(e=>({label:e.name,data:{provider_id:e.provider_id,product_category_id:e.product_category_id},key:String(e.product_category_id),selectable:!0,children:e.children?this.convertToTreeNode(e.children):[]}))}onchange(t){console.log(t);let e=this.selectedCategories.map(n=>n?.data?.product_category_id);this.step3Form?.controls.provider_category_id.setValue(e)}setTreeSelectValue(t){this.selectedCategories=this.getTreeNodesFromIds(t),this.step3Form.get("provider_category_id_temp")?.setValue(this.selectedCategories)}getTreeNodesFromIds(t){let e=[],n=r=>{r.forEach(c=>{t.includes(c.data.product_category_id)&&e.push(c),c.children&&c.children.length>0&&n(c.children)})};return n(this.treeData),e}initDefaultForm(){this.serviceLocations.length||this.addServiceLocation()}afterUploadBanner(t){this.step3Form?.get("banner_images")?.setValue(t)}addServiceLocation(t){this.serviceLocations.push(this.fb.group({label:[t?.label||""],latitude:[t?.latitude||null],longitude:[t?.longitude||null],radius:[t?.radius||""]}))}get serviceLocationGroups(){return this.serviceLocations.controls}get serviceLocations(){return this.step3Form.get("service_location")}static \u0275fac=function(e){return new(e||i)(y(Ut),y(te))};static \u0275cmp=w({type:i,selectors:[["step3"]],inputs:{businessInfoForm:[0,"form","businessInfoForm"],editData:"editData"},decls:61,vars:60,consts:[[1,"step3-container",3,"formGroup"],[1,"upload-banner"],[3,"uploadedUrls"],["class","error-message",4,"ngIf"],[1,"form-section"],[1,"form-label"],["formControlName","about_us",1,"textarea-style",3,"placeholder"],["formControlName","contact_us",1,"textarea-style",3,"placeholder"],["type","text","formControlName","website",1,"input-style",3,"placeholder"],["type","text","formControlName","location_text",1,"input-style",3,"placeholder"],["type","text","formControlName","facebook_url",1,"input-style",3,"placeholder"],["type","text","formControlName","instagram_url",1,"input-style",3,"placeholder"],["type","text","formControlName","linked_url",1,"input-style",3,"placeholder"],["class","service-row",3,"formGroup",4,"ngFor","ngForOf"],[1,"form-group"],["for","category"],[1,"dropdown-tree"],["formControlName","provider_category_id_temp","selectionMode","checkbox",1,"custom-tree-select",3,"ngModelChange","options","ngModel","placeholder"],["for","working_days_time"],["id","working_days_time","type","text","formControlName","working_days_time",3,"placeholder"],[1,"error-message"],[1,"service-row",3,"formGroup"],[1,"input-group","location-input"],["type","text","formControlName","label",3,"placeholder"],["type","button",1,"icon-btn"],[1,"pi","pi-map-marker",2,"color","#5D157C"],[1,"input-group","radius-input"],["type","text","formControlName","radius",3,"placeholder"],["type","button",1,"add-btn",3,"click"]],template:function(e,n){if(e&1&&(s(0,"div",0)(1,"div",1)(2,"file-upload",2),C("uploadedUrls",function(c){return n.afterUploadBanner(c)}),o(),_(3,pd,3,3,"div",3),o(),s(4,"div",4)(5,"label",5),l(6),u(7,"translate"),o(),h(8,"textarea",6),u(9,"translate"),o(),s(10,"div",4)(11,"label",5),l(12),u(13,"translate"),o(),h(14,"textarea",7),u(15,"translate"),o(),s(16,"div",4)(17,"label",5),l(18),u(19,"translate"),o(),h(20,"input",8),u(21,"translate"),o(),s(22,"div",4)(23,"label",5),l(24),u(25,"translate"),o(),h(26,"input",9),u(27,"translate"),o(),s(28,"div",4)(29,"label",5),l(30),u(31,"translate"),o(),h(32,"input",10),u(33,"translate"),o(),s(34,"div",4)(35,"label",5),l(36),u(37,"translate"),o(),h(38,"input",11),u(39,"translate"),o(),s(40,"div",4)(41,"label",5),l(42),u(43,"translate"),o(),h(44,"input",12),u(45,"translate"),o(),_(46,md,11,7,"div",13),s(47,"div",14)(48,"label",15),l(49),u(50,"translate"),o(),s(51,"div",16)(52,"p-treeSelect",17),u(53,"translate"),ce("ngModelChange",function(c){return se(n.selectedCategories,c)||(n.selectedCategories=c),c}),C("ngModelChange",function(c){return n.onchange(c)}),o()()(),s(54,"div",14)(55,"label",18),l(56),u(57,"translate"),o(),h(58,"input",19),u(59,"translate"),_(60,ud,3,3,"div",3),o()()),e&2){let r,c;d("formGroup",n.step3Form),a(3),d("ngIf",(n.step3Form==null||(r=n.step3Form.get("banner_images"))==null?null:r.invalid)&&(n.step3Form==null||(r=n.step3Form.get("banner_images"))==null?null:r.touched)),a(3),v(g(7,24,"businessInfo.step3.about_us")),a(2),d("placeholder",g(9,26,"businessInfo.step3.about_us_placeholder")),a(4),v(g(13,28,"businessInfo.step3.contact_us")),a(2),d("placeholder",g(15,30,"businessInfo.step3.contact_us_placeholder")),a(4),v(g(19,32,"businessInfo.step3.call_us")),a(2),d("placeholder",g(21,34,"businessInfo.step3.call_us_placeholder")),a(4),v(g(25,36,"businessInfo.step3.location")),a(2),d("placeholder",g(27,38,"businessInfo.step3.location_placeholder")),a(4),v(g(31,40,"businessInfo.step3.facebook")),a(2),d("placeholder",g(33,42,"businessInfo.step3.facebook_placeholder")),a(4),v(g(37,44,"businessInfo.step3.instagram")),a(2),d("placeholder",g(39,46,"businessInfo.step3.instagram_placeholder")),a(4),v(g(43,48,"businessInfo.step3.linkedin")),a(2),d("placeholder",g(45,50,"businessInfo.step3.linkedin_placeholder")),a(2),d("ngForOf",n.serviceLocationGroups),a(3),S(" ",g(50,52,"businessInfo.step3.category"),""),a(3),d("options",n.treeData),ae("ngModel",n.selectedCategories),d("placeholder",g(53,54,"businessInfo.step3.select_categories")),a(4),v(g(57,56,"businessInfo.step3.work_days_time")),a(2),d("placeholder",g(59,58,"businessInfo.step3.work_days_placeholder")),a(2),d("ngIf",(n.step3Form==null||(c=n.step3Form.get("working_days_time"))==null?null:c.invalid)&&(n.step3Form==null||(c=n.step3Form.get("working_days_time"))==null?null:c.touched))}},dependencies:[G,E,Q,j,Z,yr,ee,re,xt,N],styles:[".step3-container[_ngcontent-%COMP%]{padding:16px;display:flex;flex-direction:column;gap:20px}.form-section[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-label[_ngcontent-%COMP%]{font-weight:600;font-size:14px;color:#5d157c;margin-bottom:6px}.input-style[_ngcontent-%COMP%], .textarea-style[_ngcontent-%COMP%]{background-color:#f5e8ff;border:none;border-radius:12px;padding:12px;font-size:14px;color:#333;outline:none;resize:none;width:100%}.input-style[_ngcontent-%COMP%]{height:42px}.textarea-style[_ngcontent-%COMP%]{min-height:130px;line-height:1.6}.button-container[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.save-btn[_ngcontent-%COMP%]{background-color:#5d157c;color:#fff;font-weight:600;padding:12px 40px;border-radius:8px;font-size:16px;border:none;cursor:pointer;width:100%}  .custom-tree-select .p-treeselect{border-radius:12px;border:2px solid #5D157C;padding:.4rem .75rem;font-size:14px;font-weight:500;color:#5d157c;box-shadow:0 0 0 2px #f3e8ff;transition:all .3s ease;background-color:#fff;width:100%}  .custom-tree-select .p-treeselect-label{padding:4px 0}  .custom-tree-select .p-treeselect-trigger{color:#5d157c;font-size:12px}  .custom-tree-select .p-treeselect-panel{border-radius:12px;border:1px solid #ddd6fe;padding:.5rem;box-shadow:0 4px 14px #6c00a41f}  .custom-tree-select .p-chips-token{background-color:#ede9fe;color:#5d157c;font-size:12px;font-weight:600;padding:4px 12px;border-radius:9999px;margin-right:6px;margin-top:6px;border:1px solid #5D157C;display:flex;align-items:center}  .custom-tree-select .p-chips-token .p-chips-token-icon{margin-left:6px;font-size:12px;color:#5d157c}  .custom-tree-select .p-treenode-content{padding:4px 0;display:flex;align-items:center}  .custom-tree-select .p-treenode-label{font-size:13px;color:#5d157c;font-weight:500;padding-left:.4rem}  .custom-tree-select .p-checkbox{margin-right:.25rem}  .custom-tree-select .p-checkbox-box{border:1px solid #5D157C;border-radius:4px;background-color:#fff;width:18px;height:18px}  .custom-tree-select .p-checkbox-box.p-highlight{background-color:#5d157c;border-color:#5d157c}  .custom-tree-select .p-checkbox-box.p-highlight .p-checkbox-icon{color:#fff;font-size:12px}"]})};function _d(i,t){if(i&1){let e=I();h(0,"step1",2),s(1,"div",3)(2,"p-button",4),C("onClick",function(){let r=x(e).nextCallback,c=m();return P(c.validateAndProceed(c.step1Form,r))}),o()()}if(i&2){let e=m();d("form",e.businessInfoForm)("editData",e.editData)}}function hd(i,t){if(i&1){let e=I();s(0,"div",5),h(1,"step3",2),o(),s(2,"div",6)(3,"p-button",7),C("onClick",function(){let r=x(e).prevCallback;return P(r.emit())}),o(),s(4,"p-button",8),C("onClick",function(){x(e);let r=m();return P(r.onSubmit())}),o()()}if(i&2){let e=m();a(),d("form",e.businessInfoForm)("editData",e.editData)}}var Qe=class i{constructor(t,e,n){this.fb=t;this.providerInfoService=e;this.primeNGMessageSrv=n;this.businessInfoForm=this.fb.group({step1:this.fb.group({primary_call_number:["",[M.required]],user_mobile:["",[M.required]],user_id:[""],name:[""],role:[""],display_name:["",[M.required]],business_name:["",[M.required]],short_description:["",[M.required]],business_type:["",[M.required]],alternate_call_number:["",[M.required,M.pattern(/^\d{10}$/)]],email:["",[M.required,M.email]],address_to_display:["",[M.required]],logo_url:[""],member_only_display:[""],location:this.fb.array([]),year_of_establishment:[2e3],visibility:[""]}),step3:this.fb.group({banner_images:[[]],about_us:[""],contact_us:[""],working_days_time:[""],call_us:[""],website:[""],facebook_url:[""],instagram_url:[""],linked_url:[""],location_text:[""],service_location:this.fb.array([]),provider_category_id:["",[M.required]],provider_category_id_temp:[""]})})}businessInfoForm;editData;formSubmitted=new ie;onSubmit(){let t=this.businessInfoForm.value,e=W(W({},t.step1),t.step3);e.alternate_call_number=e.alternate_call_number.toString();let n=this.editData?.provider_id;this.providerInfoService.createOrUpdate(e,n).subscribe({next:()=>{this.primeNGMessageSrv.add({severity:"success",summary:"Success",detail:"Saved successfully"}),this.formSubmitted.emit()},error:r=>{this.primeNGMessageSrv.add({severity:"error",summary:"Error",detail:"Failed to save"})}})}get step1Form(){return this.businessInfoForm.get("step1")}get step2Form(){return this.businessInfoForm.get("step2")}get step3Form(){return this.businessInfoForm.get("step3")}get step4Form(){return this.businessInfoForm.get("step4")}validateAndProceed(t,e){t?.invalid?(t.markAllAsTouched(),Object.keys(t.controls).forEach(n=>{let r=t.get(n);r&&r.invalid&&console.warn(`Field '${n}' is invalid:`,r.errors)})):e.emit()}static \u0275fac=function(e){return new(e||i)(y(te),y(an),y(tr))};static \u0275cmp=w({type:i,selectors:[["business-info-form"]],inputs:{editData:"editData"},outputs:{formSubmitted:"formSubmitted"},decls:7,vars:1,consts:[[3,"ngSubmit","formGroup"],["pTemplate","content"],[3,"form","editData"],[1,"flex","py-4"],["label","Next",3,"onClick"],[1,"flex","flex-column","h-12rem"],[1,"flex","py-4","gap-2","justify-between","mt-3"],["label","Back","severity","secondary",3,"onClick"],["label","Submit",1,"submit-btn",3,"onClick"]],template:function(e,n){e&1&&(h(0,"p-toast"),s(1,"form",0),C("ngSubmit",function(){return n.onSubmit()}),s(2,"p-stepper")(3,"p-stepperPanel"),_(4,_d,3,2,"ng-template",1),o(),s(5,"p-stepperPanel"),_(6,hd,5,2,"ng-template",1),o()()()),e&2&&(a(),d("formGroup",n.businessInfoForm))},dependencies:[hr,Wt,ve,Z,vr,Nr,Fr,ee,Vt,Lt],styles:["p-stepper p-stepperseparator{margin:.5rem}  p-stepper p-steppercontent{padding-left:.5rem}  p-stepper p-stepper-nav{margin-top:2rem}  form{margin:1rem}  step1,   step2,   step3,   bank-details{width:100%}  step1 .form-group,   step2 .form-group,   step3 .form-group,   bank-details .form-group{margin-bottom:.5rem;font-size:.875rem;color:#4f126a;display:flex;flex-direction:column}  step1 .form-group label,   step2 .form-group label,   step3 .form-group label,   bank-details .form-group label{margin-bottom:.25rem;font-weight:700;font-size:14px;color:#5d157c}  step1 .form-group input,   step2 .form-group input,   step3 .form-group input,   bank-details .form-group input{background:#f9f2fd;height:2.25rem;border-radius:5px;padding-left:1rem}  step1 .form-group input:focus-visible,   step2 .form-group input:focus-visible,   step3 .form-group input:focus-visible,   bank-details .form-group input:focus-visible{border:1px solid;outline:0}  step1 .form-group textarea,   step2 .form-group textarea,   step3 .form-group textarea,   bank-details .form-group textarea{background:#f9f2fd;border-radius:5px;height:auto;padding:.4rem}  step1 .form-group textarea:focus-visible,   step2 .form-group textarea:focus-visible,   step3 .form-group textarea:focus-visible,   bank-details .form-group textarea:focus-visible{border:1px solid;outline:0}  step1 .form-group .error-message,   step2 .form-group .error-message,   step3 .form-group .error-message,   bank-details .form-group .error-message{color:red;font-size:12px}  p-button button.p-button.p-button-secondary{border:1px solid #5d157c;color:#5d157c;padding:.25rem 1.25rem}  p-button button:not(.p-button-secondary){background-color:#5d157c;color:#fff;padding:.25rem 1.25rem;margin-left:1rem;margin-right:1rem}"]})};function Cd(i,t){if(i&1){let e=I();s(0,"div",10),C("click",function(r){let c=x(e).$implicit,p=m(2);return P(p.handleActionClick(c,r))}),o()}}function xd(i,t){if(i&1){let e=I();s(0,"div",4)(1,"div",5)(2,"h3"),l(3,"Provider List"),o(),s(4,"button",6),C("click",function(){x(e);let r=m();return P(r.addNewProvider=!0)}),h(5,"i",7),s(6,"span",8),l(7," Add New"),o()()(),s(8,"simple-grid",9),C("onEditTrigger",function(r){x(e);let c=m();return P(c.edit(r))})("onDeleteTrigger",function(r){x(e);let c=m();return P(c.remove(r))})("contentPerPageChange",function(r){x(e);let c=m();return P(c.onContentPerPageChange(r))})("searchDataChange",function(r){x(e);let c=m();return P(c.onSearchChange(r))})("pageChange",function(r){x(e);let c=m();return P(c.onPageChange(r))}),o(),_(9,Cd,1,0,"ng-template",null,0,Te),o()}if(i&2){let e=xe(10),n=m();a(8),d("dataSet",n.providerData)("columns",n.columns)("actionTemplate",e)("totalRecords",n.total)("pageIndex",n.pageIndex)("contentPerPage",n.contentPerPage)}}function Pd(i,t){if(i&1){let e=I();s(0,"business-info-form",11),C("formSubmitted",function(){x(e);let r=m();return P(r.handleProviderSaved())}),o()}if(i&2){let e=m();d("editData",e.editProvider)}}var wn=class i{constructor(t){this.providerListService=t}total=0;contentPerPage=Xi;pageIndex=0;searchTerm="";ngOnInit(){this.triggerGetProvider(void 0)}columns=[{displayName:"User Id",displayValue:"user_id"},{displayName:"Display Name",displayValue:"display_name"},{displayName:"Business Name",displayValue:"business_name"},{displayName:"Status",displayValue:"status"}];providerData=[];editProvider=void 0;addNewProvider=!1;edit(t){t.provider_id&&this.providerListService.getProvider(t.provider_id).subscribe({next:e=>{this.editProvider=e.data},error:e=>{console.log("Error in getprovider"),console.log(e.message)}})}remove(t){this.providerListService.delete(t.provider_id).subscribe(e=>{console.log(e),this.triggerGetProvider(void 0)})}handleActionClick(t,e){e.stopPropagation(),console.log(t)}triggerGetProvider(t){let e={skip:this.pageIndex*this.contentPerPage,limit:this.contentPerPage};this.searchTerm&&this.searchTerm.trim()!==""&&(e.search=this.searchTerm.trim()),this.providerListService.listWithTotal(e).subscribe(n=>{this.total=n.total,this.convertProviderSet(n.data)})}getList(t){this.convertProviderSet(t)}convertProviderSet(t){let e=t.map(n=>he(W({},n),{id:n.provider_id??0}));setTimeout(()=>{this.providerData=e},200)}cancelEdit(){this.editProvider=void 0}handlePageChange(t){this.providerListService.listWithTotal({skip:t.skip,limit:t.limit}).subscribe(e=>{this.convertProviderSet(e.data)})}onContentPerPageChange(t){this.contentPerPage=t,this.pageIndex=0,this.triggerGetProvider(void 0)}onSearchChange(t){this.searchTerm=t,this.pageIndex=0,this.triggerGetProvider(void 0)}onPageChange(t){this.pageIndex=t,this.triggerGetProvider(void 0)}handleProviderSaved(){this.addNewProvider=!1,this.triggerGetProvider(void 0)}static \u0275fac=function(e){return new(e||i)(y(an))};static \u0275cmp=w({type:i,selectors:[["saved-provider-list"]],decls:3,vars:5,consts:[["viewTemplate",""],[3,"title","icon","showBack"],["class","grid-wrap",4,"ngIf"],[3,"editData","formSubmitted",4,"ngIf"],[1,"grid-wrap"],[1,"add-button-wrap"],["pButton","","pRipple","","severity","success",1,"peer",3,"click"],[1,"pi","pi-plus"],["pButtonLabel",""],[3,"onEditTrigger","onDeleteTrigger","contentPerPageChange","searchDataChange","pageChange","dataSet","columns","actionTemplate","totalRecords","pageIndex","contentPerPage"],[1,"view",3,"click"],[3,"formSubmitted","editData"]],template:function(e,n){e&1&&(h(0,"app-title-card",1),_(1,xd,11,6,"div",2)(2,Pd,1,1,"business-info-form",3)),e&2&&(d("title","Admin")("icon","receipt_long")("showBack",!0),a(),d("ngIf",!n.editProvider&&!n.addNewProvider),a(),d("ngIf",n.editProvider||n.addNewProvider))},dependencies:[E,Ne,Fe,br,Qt,Qe],styles:[".grid-wrap[_ngcontent-%COMP%]{padding-left:.5rem;padding-right:.5rem;margin-top:1rem}.grid-wrap[_ngcontent-%COMP%]   .add-button-wrap[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:.5rem}.grid-wrap[_ngcontent-%COMP%]   .add-button-wrap[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#5d157c}.grid-wrap[_ngcontent-%COMP%]   .add-button-wrap[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem}.grid-wrap[_ngcontent-%COMP%]   .add-button-wrap[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:.125rem}  .grid-wrap .add-button-wrap button.p-button{background-color:#5d157c!important;color:#fff!important;border-radius:5px!important}"]})};var kn=class i{constructor(t){this._http=t}submitBankDetails(t){return this._http.post("provider/bank/",t)}getBankDetails(t){return this._http.get(`provider/bank/?provider_id=${t}`)}updateBankDetails(t){return this._http.put("provider/bank/",t)}static \u0275fac=function(e){return new(e||i)($(oe))};static \u0275prov=K({token:i,factory:i.\u0275fac,providedIn:"root"})};function Sd(i,t){i&1&&(s(0,"div",21),l(1," Required "),o())}function Id(i,t){i&1&&(s(0,"div",21),l(1," Must be 9\u201318 digits "),o())}function Od(i,t){i&1&&(s(0,"div",21),l(1," Invalid IFSC "),o())}function Md(i,t){i&1&&(s(0,"div",21),l(1," Invalid UPI Detail "),o())}function wd(i,t){i&1&&(s(0,"div",21),l(1," Invalid UPI Detail "),o())}function kd(i,t){i&1&&(s(0,"div",21),l(1," Invalid Phone Number "),o())}function Ed(i,t){i&1&&(s(0,"div",21),l(1," GST is required. "),o())}function Td(i,t){i&1&&(s(0,"div",21),l(1," GSTIN is required. "),o())}function Dd(i,t){i&1&&(s(0,"div",21),l(1," Enter a valid GST % between 0-100 "),o())}function Fd(i,t){i&1&&(s(0,"span"),l(1,"Submit"),o())}function Nd(i,t){i&1&&(s(0,"span"),l(1,"Submitting..."),o())}var qt=class i{constructor(t,e,n){this.bankDetailsService=t;this.authService=e;this.toast=n}form;editData;loading=!1;ngOnInit(){this.setFormDataFromEditData(),this.toggleGstField()}get bankDetailForm(){return this.form}setFormDataFromEditData(){this.editData&&this.form&&Object.keys(this.form.controls).forEach(t=>{let e=t,n=this.editData?.[e];n!=null&&this.form.get(t)?.setValue(n)})}toggleGstField(){this.form.get("gstOpted")?.valueChanges.subscribe(t=>{let e=this.form.get("gstPercentage");e&&(t?(e.enable(),e.setValidators([M.required,M.min(0),M.max(100)])):(e.disable(),e.clearValidators()),e.updateValueAndValidity())})}onSubmit(){if(this.bankDetailForm.valid){this.loading=!0;let t={provider_id:this.authService.getSelectedProviderId(),bank_name:this.bankDetailForm.get("bankName")?.value,account_no:this.bankDetailForm.get("accountNo")?.value,ifsc:this.bankDetailForm.get("ifscCode")?.value,primary_upi:this.bankDetailForm.get("primaryUpi")?.value,secondary_upi:this.bankDetailForm.get("secondaryUpi")?.value||void 0,upi_number:this.bankDetailForm.get("upiPhoneNo")?.value,gst_opted:this.bankDetailForm.get("gstOpted")?.value,gst_no:this.bankDetailForm.get("gstinNo")?.value||void 0};this.bankDetailsService.submitBankDetails(t).subscribe({next:e=>{console.log("Bank details submitted successfully:",e),this.toast.success("Success","Bank Detail saved successfully"),this.loading=!1},error:e=>{console.error("Error submitting bank details:",e),this.toast.error("Error","Error submitting bank details"),this.loading=!1}})}else Object.keys(this.bankDetailForm.controls).forEach(t=>{this.bankDetailForm.get(t)?.markAsTouched()})}static \u0275fac=function(e){return new(e||i)(y(kn),y(H),y(nr))};static \u0275cmp=w({type:i,selectors:[["add-bank-detail"]],inputs:{form:"form",editData:"editData"},decls:60,vars:13,consts:[[1,"bank-details-form",3,"formGroup"],[1,"form-title"],[1,"form-fields"],[1,"form-group"],[1,"form-label"],["type","text","formControlName","bankName","placeholder","Enter bank name",1,"form-input"],["class","error-message",4,"ngIf"],["type","text","formControlName","accountNo","placeholder","Enter account number",1,"form-input"],["type","text","formControlName","ifscCode","placeholder","Enter IFSC code",1,"form-input"],["type","text","formControlName","primaryUpi","placeholder","Enter primary UPI ID",1,"form-input"],["type","text","formControlName","secondaryUpi","placeholder","Enter secondary UPI ID (optional)",1,"form-input"],["type","text","formControlName","upiPhoneNo","placeholder","Enter UPI linked phone number",1,"form-input"],[1,"form-group","toggle-group"],[1,"toggle-container"],["formControlName","gstOpted"],["type","text","formControlName","gstinNo","placeholder","Enter GSTIN number",1,"form-input"],["type","number","formControlName","gstPercentage","placeholder","Enter GST percentage (0-100)",1,"form-input"],["formControlName","includeGst"],[1,"submit-section"],["type","button",1,"submit-btn",3,"click","disabled"],[4,"ngIf"],[1,"error-message"]],template:function(e,n){if(e&1&&(s(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Bank Details"),o()(),s(4,"div",2)(5,"div",3)(6,"label",4),l(7,"Bank"),o(),h(8,"input",5),_(9,Sd,2,0,"div",6),o(),s(10,"div",3)(11,"label",4),l(12,"Account No"),o(),h(13,"input",7),_(14,Id,2,0,"div",6),o(),s(15,"div",3)(16,"label",4),l(17,"IFSC Code"),o(),h(18,"input",8),_(19,Od,2,0,"div",6),o(),s(20,"div",3)(21,"label",4),l(22,"Primary UPI Account"),o(),h(23,"input",9),_(24,Md,2,0,"div",6),o(),s(25,"div",3)(26,"label",4),l(27,"Secondary UPI Account"),o(),h(28,"input",10),_(29,wd,2,0,"div",6),o(),s(30,"div",3)(31,"label",4),l(32,"UPI Linked Ph no"),o(),h(33,"input",11),_(34,kd,2,0,"div",6),o(),s(35,"div",12)(36,"label",4),l(37,"GST Opted?"),o(),s(38,"div",13),h(39,"p-inputSwitch",14),o(),_(40,Ed,2,0,"div",6),o(),s(41,"div",3)(42,"label",4),l(43,"GSTIN No"),o(),h(44,"input",15),_(45,Td,2,0,"div",6),o(),s(46,"div",3)(47,"label",4),l(48,"GST %"),o(),h(49,"input",16),_(50,Dd,2,0,"div",6),o(),s(51,"div",12)(52,"label",4),l(53,"Include GST in Product Price?"),o(),s(54,"div",13),h(55,"p-inputSwitch",17),o()()(),s(56,"div",18)(57,"button",19),C("click",function(){return n.onSubmit()}),_(58,Fd,2,0,"span",20)(59,Nd,2,0,"span",20),o()()()),e&2){let r,c,p,f,b,O,k,R,T;d("formGroup",n.bankDetailForm),a(9),d("ngIf",((r=n.bankDetailForm.get("bankName"))==null?null:r.touched)&&((r=n.bankDetailForm.get("bankName"))==null?null:r.invalid)),a(5),d("ngIf",((c=n.bankDetailForm.get("accountNo"))==null?null:c.touched)&&((c=n.bankDetailForm.get("accountNo"))==null?null:c.invalid)),a(5),d("ngIf",((p=n.bankDetailForm.get("ifscCode"))==null?null:p.touched)&&((p=n.bankDetailForm.get("ifscCode"))==null?null:p.invalid)),a(5),d("ngIf",((f=n.bankDetailForm.get("primaryUpi"))==null?null:f.touched)&&((f=n.bankDetailForm.get("primaryUpi"))==null?null:f.invalid)),a(5),d("ngIf",((b=n.bankDetailForm.get("secondaryUpi"))==null?null:b.touched)&&((b=n.bankDetailForm.get("secondaryUpi"))==null?null:b.invalid)),a(5),d("ngIf",((O=n.bankDetailForm.get("upiPhoneNo"))==null?null:O.touched)&&((O=n.bankDetailForm.get("upiPhoneNo"))==null?null:O.invalid)),a(6),d("ngIf",(n.bankDetailForm==null||(k=n.bankDetailForm.get("gstOpted"))==null?null:k.invalid)&&(n.bankDetailForm==null||(k=n.bankDetailForm.get("gstOpted"))==null?null:k.touched)),a(5),d("ngIf",((R=n.bankDetailForm.get("gstinNo"))==null?null:R.touched)&&((R=n.bankDetailForm.get("gstinNo"))==null?null:R.invalid)),a(5),d("ngIf",((T=n.bankDetailForm.get("gstPercentage"))==null?null:T.touched)&&((T=n.bankDetailForm.get("gstPercentage"))==null?null:T.invalid)),a(7),d("disabled",!n.bankDetailForm.valid||n.loading),a(),d("ngIf",!n.loading),a(),d("ngIf",n.loading)}},dependencies:[E,Xt,Q,Jt,j,Z,ee,re],styles:[".bank-details-form[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:1rem;max-width:600px;margin:0 auto;font-family:Inter,-apple-system,BlinkMacSystemFont,sans-serif}.bank-details-form[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]{margin-bottom:32px;text-align:center}.bank-details-form[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#5d157c;margin:0;letter-spacing:-.5px}.bank-details-form[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.bank-details-form[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{font-size:.875rem;color:#5d157c;display:flex;flex-direction:column;margin-top:.5rem}.bank-details-form[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.bank-details-form[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:#f9f2fd;height:2.25rem;border-radius:10px;padding-left:1rem;width:100%}.bank-details-form[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{border:1px solid;outline:0}.bank-details-form[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background:#f9f2fd;border-radius:5px;height:auto;padding:.4rem;border:1px solid rgba(0,0,0,.2)}.bank-details-form[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus-visible{border:1px solid;outline:0}.bank-details-form[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;font-size:12px}@media (max-width: 768px){.bank-details-form[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}.bank-details-form[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%]{gap:20px}.bank-details-form[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%]   .form-group.toggle-group[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;align-items:flex-start;gap:12px}.bank-details-form[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%]   .form-group.toggle-group[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]{align-self:flex-end}}@media (max-width: 480px){.bank-details-form[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%]{gap:16px}.bank-details-form[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{padding:14px 16px;font-size:13px}.bank-details-form[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-size:13px}}.switch-btn-group[_ngcontent-%COMP%]{margin-top:1rem;display:flex;justify-content:space-between;width:100%;margin-bottom:1rem}.switch-btn-group.bolder[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:900;font-size:14px;color:#5d157c}.switch-btn-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#5d157c;font-weight:700;font-size:14px}.switch-btn-group[_ngcontent-%COMP%]     p-inputswitch>div{height:1.5rem}.switch-btn-group[_ngcontent-%COMP%]     .p-inputswitch.p-inputswitch-checked .p-inputswitch-slider{background-color:#5d157c!important}  .toggle-group{display:flex;justify-content:space-between;align-items:center;padding:.5rem 1rem;background:#f9f2fd;border-radius:50px;margin-bottom:.5rem}  .toggle-group label{font-weight:700;margin-bottom:0;flex:1}  .add-bank-detail-form-container .form-container   .form-group input{background:#f9f2fd;height:2.25rem;border-radius:50px;padding-left:1rem;width:100%;border:none;font-size:.875rem;color:#4f126a}  .add-bank-detail-form-container .form-container   .form-group label{font-weight:700;margin-bottom:.25rem;color:#4f126a;font-size:.875rem}.submit-section[_ngcontent-%COMP%]{padding:1.5rem;display:flex;justify-content:center;border-top:1px solid #e5e7eb;margin-top:1rem}.submit-section[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]{background:#5d157c;color:#fff;border:none;border-radius:8px;padding:12px 32px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;min-width:200px}.submit-section[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 16px #5d157c4d}.submit-section[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.submit-section[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block}"]})};var Gt=class i{constructor(t){this.fb=t}bankDetailForm;ngOnInit(){this.initForm()}initForm(){this.bankDetailForm=this.fb.group({bankName:["",M.required],accountNo:["",[M.required,M.pattern(/^\d{9,18}$/)]],ifscCode:["",[M.required,M.pattern(/^[A-Z]{4}0[A-Z0-9]{6}$/)]],primaryUpi:["",[M.required,M.pattern(/^[a-zA-Z0-9._-]+@[a-zA-Z]{2,}$/)]],secondaryUpi:["",[M.pattern(/^[a-zA-Z0-9._-]+@[a-zA-Z]{2,}$/)]],upiPhoneNo:["",[M.required,M.pattern(/^[6-9]\d{9}$/)]],gstOpted:[!1,M.required],gstinNo:["",[M.required,M.pattern(/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/)]],gstPercentage:[{value:"",disabled:!0},[M.required,M.min(0),M.max(100)]],includeGst:[!1]})}static \u0275fac=function(e){return new(e||i)(y(te))};static \u0275cmp=w({type:i,selectors:[["bank-details"]],decls:4,vars:4,consts:[[3,"title","icon","showBack"],[1,"card-wrapper"],[1,"card"],[3,"form"]],template:function(e,n){e&1&&(h(0,"app-title-card",0),s(1,"div",1)(2,"mat-card",2),h(3,"add-bank-detail",3),o()()),e&2&&(d("title","Bank Detail")("icon","credit_card")("showBack",!0),a(3),d("form",n.bankDetailForm))},dependencies:[Zt,Qt,qt],styles:[".card-wrapper[_ngcontent-%COMP%]{padding:1rem}.card-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 4px 6px #0000001a}.card-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .submit-section[_ngcontent-%COMP%]{padding:1.5rem;display:flex;justify-content:center;border-top:1px solid #e5e7eb}.card-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .submit-section[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#5d157c,#7c3aed);color:#fff;border:none;border-radius:8px;padding:12px 32px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;min-width:200px}.card-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .submit-section[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 16px #5d157c4d}.card-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .submit-section[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.card-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .submit-section[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block}"]})};var jt=class i{constructor(t,e){this.router=t;this.cartService=e}orderDetails={orderNumber:"",totalAmount:0,paymentMethod:"",deliveryAddress:"",estimatedDelivery:""};providerId=0;ngOnInit(){this.loadOrderDetails(),this.clearCart()}loadOrderDetails(){let t=history.state;console.log("STATE-->",t),t?.orderDetails?this.orderDetails=W(W({},this.orderDetails),t.orderDetails):this.orderDetails={orderNumber:"ON00000035",totalAmount:19.5,paymentMethod:"Cash",deliveryAddress:"201 Katlian No.21 Street, Sitka, Alaska 99835",estimatedDelivery:"2-3 business days"},t?.providerId&&(this.providerId=t.providerId)}goToHome(){this.router.navigate(["/customers/info"],{state:{providerId:this.providerId}})}viewOrderHistory(){this.router.navigate(["/orders"])}trackOrder(){this.router.navigate(["/track-order",this.orderDetails.orderNumber])}clearCart(){this.cartService.clearCart()}static \u0275fac=function(e){return new(e||i)(y(X),y(De))};static \u0275cmp=w({type:i,selectors:[["app-order-success"]],decls:66,vars:44,consts:[[1,"order-success-container"],[1,"success-section","text-center","py-8"],[1,"success-icon"],[1,"pi","pi-check-circle","text-purple-800",2,"font-size","4rem"],[1,"success-title"],[1,"success-subtitle"],[1,"success-message"],[1,"order-details-card"],[1,"card-header"],[1,"card-title"],[1,"order-info"],[1,"info-row"],[1,"info-label"],[1,"info-value"],[1,"info-value","amount"],[1,"info-value","payment-method"],[1,"info-value","address"],[1,"info-row","hidden-btn"],[1,"info-value","delivery"],[1,"action-buttons"],[1,"btn","btn-secondary","w-full","mb-3","hidden-btn",3,"click"],[1,"pi","pi-map-marker","mr-2"],[1,"btn","btn-outline","w-full","mb-3","hidden-btn",3,"click"],[1,"pi","pi-list","mr-2"],[1,"btn","btn-primary","w-full",3,"click"],[1,"pi","pi-shopping-cart","mr-2"],[1,"additional-info","hidden-btn"],[1,"text-sm","text-gray-600","text-center"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2),h(3,"i",3),o(),s(4,"h1",4),l(5),u(6,"translate"),o(),s(7,"p",5),l(8),u(9,"translate"),o(),s(10,"p",6),l(11),u(12,"translate"),o()(),s(13,"div",7)(14,"div",8)(15,"h2",9),l(16),u(17,"translate"),o()(),s(18,"div",10)(19,"div",11)(20,"span",12),l(21),u(22,"translate"),o(),s(23,"span",13),l(24),o()(),s(25,"div",11)(26,"span",12),l(27),u(28,"translate"),o(),s(29,"span",14),l(30),o()(),s(31,"div",11)(32,"span",12),l(33),u(34,"translate"),o(),s(35,"span",15),l(36),o()(),s(37,"div",11)(38,"span",12),l(39),u(40,"translate"),o(),s(41,"span",16),l(42),o()(),s(43,"div",17)(44,"span",12),l(45),u(46,"translate"),o(),s(47,"span",18),l(48),o()()()(),s(49,"div",19)(50,"button",20),C("click",function(){return n.trackOrder()}),h(51,"i",21),l(52),u(53,"translate"),o(),s(54,"button",22),C("click",function(){return n.viewOrderHistory()}),h(55,"i",23),l(56),u(57,"translate"),o(),s(58,"button",24),C("click",function(){return n.goToHome()}),h(59,"i",25),l(60),u(61,"translate"),o()(),s(62,"div",26)(63,"p",27),l(64),u(65,"translate"),o()()()),e&2&&(a(5),v(g(6,18,"providerInfo.orderSuccess.order_placed")),a(3),v(g(9,20,"providerInfo.orderSuccess.thank_you")),a(3),v(g(12,22,"providerInfo.orderSuccess.order_success")),a(5),v(g(17,24,"providerInfo.orderSuccess.order_details")),a(5),v(g(22,26,"providerInfo.orderSuccess.order_no")),a(3),v(n.orderDetails.orderNumber),a(3),v(g(28,28,"providerInfo.orderSuccess.total_amount")),a(3),S("\u20B9",n.orderDetails.totalAmount,""),a(3),v(g(34,30,"providerInfo.orderSuccess.payment_method")),a(3),v(n.orderDetails.paymentMethod),a(3),v(g(40,32,"providerInfo.orderSuccess.delivery_address")),a(3),v(n.orderDetails.deliveryAddress),a(3),v(g(46,34,"providerInfo.orderSuccess.estimated_delivery")),a(3),v(n.orderDetails.estimatedDelivery),a(4),S(" ",g(53,36,"providerInfo.orderSuccess.track_order")," "),a(4),S(" ",g(57,38,"providerInfo.orderSuccess.view_order_history")," "),a(4),S(" ",g(61,40,"providerInfo.orderSuccess.continue_shopping")," "),a(4),S(" ",g(65,42,"providerInfo.orderSuccess.email_confirmation")," "))},dependencies:[N],styles:[".order-success-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#f8fafc,#e2e8f0);padding:1rem;display:flex;flex-direction:column;align-items:center;font-family:roboto}.success-section[_ngcontent-%COMP%]{width:100%;max-width:400px}.success-section[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%]{margin-bottom:1.5rem}.success-section[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%]   i.pi-check-circle[_ngcontent-%COMP%]{filter:drop-shadow(0 4px 6px #5D157C)}.success-section[_ngcontent-%COMP%]   .success-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#5d157c;margin-bottom:.5rem;text-shadow:0 2px 4px rgba(93,21,124,.1)}.success-section[_ngcontent-%COMP%]   .success-subtitle[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#1f2937;margin-bottom:.5rem;letter-spacing:.05em}.success-section[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{font-size:1rem;color:#6b7280;line-height:1.5}.order-details-card[_ngcontent-%COMP%]{width:100%;max-width:400px;background:#fff;border-radius:16px;box-shadow:0 10px 25px #0000001a;margin:2rem 0;overflow:hidden}.order-details-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#5d157c,#3c0e50);padding:1.5rem;text-align:center}.order-details-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{color:#fff;font-size:1.25rem;font-weight:600;margin:0}.order-details-card[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]{padding:1.5rem}.order-details-card[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem 0;border-bottom:1px solid #f3f4f6}.order-details-card[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.order-details-card[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#6b7280;flex-shrink:0}.order-details-card[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#1f2937;text-align:right;max-width:60%;word-wrap:break-word}.order-details-card[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-value.amount[_ngcontent-%COMP%]{color:#5d157c;font-size:1rem;font-weight:700}.order-details-card[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-value.payment-method[_ngcontent-%COMP%]{color:#5d157c;font-weight:600}.order-details-card[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-value.address[_ngcontent-%COMP%]{color:#374151;font-size:.8rem;line-height:1.4}.order-details-card[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-value.delivery[_ngcontent-%COMP%]{color:#7c3aed;font-weight:600}.action-buttons[_ngcontent-%COMP%]{width:100%;max-width:400px;margin:1.5rem 0}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:.875rem 1.5rem;border-radius:12px;font-size:1rem;font-weight:600;transition:all .2s ease-in-out;border:none;cursor:pointer}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i.pi[_ngcontent-%COMP%]{flex-shrink:0}.action-buttons[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#5d157c,#3c0e50);color:#fff;box-shadow:0 4px 12px #5d157c4d}.action-buttons[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #5d157c66}.action-buttons[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.action-buttons[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;box-shadow:0 4px 12px #10b9814d}.action-buttons[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #10b98166}.action-buttons[_ngcontent-%COMP%]   .btn.btn-outline[_ngcontent-%COMP%]{background:transparent;color:#5d157c;border:2px solid #5D157C}.action-buttons[_ngcontent-%COMP%]   .btn.btn-outline[_ngcontent-%COMP%]:hover:not(:disabled){background:#5d157c;color:#fff;transform:translateY(-2px)}.additional-info[_ngcontent-%COMP%]{width:100%;max-width:400px;margin-top:1rem;padding:1rem}.additional-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:1.6;margin:0}@media (max-width: 480px){.order-success-container[_ngcontent-%COMP%]{padding:.75rem}.success-section[_ngcontent-%COMP%]   .success-title[_ngcontent-%COMP%]{font-size:1.75rem}.success-section[_ngcontent-%COMP%]   .success-subtitle[_ngcontent-%COMP%]{font-size:1rem}.order-details-card[_ngcontent-%COMP%]{margin:1.5rem 0}.order-details-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%], .order-details-card[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]{padding:1.25rem}.order-details-card[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{padding:.5rem 0}.order-details-card[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%], .order-details-card[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{font-size:.8rem}.action-buttons[_ngcontent-%COMP%]{margin:1rem 0}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.75rem 1.25rem;font-size:.9rem}}.success-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounceIn .8s ease-out}@keyframes _ngcontent-%COMP%_bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}to{opacity:1;transform:scale(1)}}.order-details-card[_ngcontent-%COMP%]{transition:transform .2s ease-in-out}.order-details-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.hidden-btn[_ngcontent-%COMP%]{visibility:hidden}"]})};var Rd=[{path:"",component:Mt},{path:"view-cart",component:Rt},{path:"feedback",component:At},{path:"order-success",component:jt},{path:"catalogue",component:He},{path:"buisiness-form",component:Qe},{path:"saved-provider-list",component:wn},{path:"product-detail",component:Je},{path:"bank-detail",component:Gt}],En=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=ot({type:i});static \u0275inj=rt({imports:[An.forChild(Rd),An]})};var na=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=ot({type:i});static \u0275inj=rt({imports:[Ti,En,Br,Rr,$i,zi,Ar,Vr,Qo,mr.pick({Search:dr,X:pr,ChevronRight:or,Minus:cr,Plus:lr,Clock:ar,Calendar:rr,ListFilter:sr}),Fi]})};export{sn as a,ln as b,Ut as c,pt as d,cn as e,le as f,gn as g,He as h,na as i};
