import{a as fc,b as _c,c as hc,d as It,e as Po,f as Sn,g as Le,h as kn,i as yo,j as kc,k as Tc,l as In,m as Rc,n as Lc,o as zc,p as $c}from"./chunk-JFNH23HK.js";import"./chunk-CVC7PA2O.js";import{a as wo,c as Bc,d as Uc,e as Gc}from"./chunk-FBKWWOXA.js";import{$a as lc,A as vn,Ab as Mo,B as qs,Ba as on,Bb as fi,C as Me,Cb as Mc,D as pi,Da as yn,Db as Oc,E as Ws,Ea as vo,Eb as wc,F as Oe,Fb as Sc,G as en,Gb as Oo,H as tn,Ha as Js,Hb as Ic,I as nn,Ib as So,J as xn,Ja as Zs,Jb as Ec,Kb as Fc,L as bo,La as ec,M as Hs,Mb as Dc,N as ue,Na as tc,Nb as Ac,O as $s,Oa as nc,Ob as Vc,P as Ys,Pa as ic,Qa as oc,S as Co,Sa as rc,Ta as Li,Tb as Nc,U as le,Ua as ac,Ub as jc,V as Ks,Va as sc,W as da,Wa as xo,X as Xs,Xa as ui,Y as mi,Z as gi,Za as cc,_ as At,_a as dc,a as Dt,ab as pc,bb as Vt,bc as qc,c as di,ca as Qs,cb as mc,cc as Wc,da as Q,eb as gc,fa as dt,fb as Mn,ga as lt,ha as Yn,hb as Ve,ia as St,j as Bs,jb as uc,ka as la,kb as bc,l as li,lb as Cc,m as ce,mb as On,nb as he,o as js,ob as wn,p as ho,pb as vc,q as Z,qa as $e,qb as bt,qc as Hc,r as A,rb as Re,s as Y,sb as Ct,t as fe,ta as G,tb as be,u as Us,ua as Fe,ub as ze,v as Gs,va as pe,w as Cn,wa as kt,wb as rn,x as _e,xa as Pn,xb as xc,y as ye,ya as te,yb as Pc,z as ct,za as ht,zb as yc}from"./chunk-MBWBBTNW.js";import{A as Kt,Ac as ln,Bc as Gt,Cd as bn,Da as Ze,Dc as ca,Ea as b,Ed as Zt,Fa as C,Fb as y,Fd as Ls,G as ao,Ga as si,Gd as _o,Ha as ci,Hc as M,Hd as zs,Ib as po,Ic as O,Jb as g,Jc as gt,Jd as Ns,Ka as Ss,Kb as yt,Lb as j,M as qe,Mb as st,Mc as Pe,Nb as Mt,O as Xt,Oa as Ee,Pb as mo,Ra as ks,Sb as Fs,T as Qt,Tb as Ds,Ub as s,Vb as c,Wb as h,Xb as et,Yb as tt,_b as E,_c as hn,a as U,b as H,ba as so,bc as v,c as ys,ca as Pt,dc as _,f as Ms,g as sa,gc as ne,hc as fn,i as Os,ib as Jt,ja as ws,jc as nt,ka as Je,kb as Is,kc as it,la as co,lb as Ts,lc as ot,n as Yt,nb as d,ob as w,oc as ge,pa as Ae,pc as p,qc as S,qd as go,rc as T,sc as Qe,sd as Se,tc as As,u as De,ua as R,ub as Es,uc as L,ud as ee,va as lo,vc as z,vd as W,wc as N,wd as uo,xc as _n,xd as fo,yd as Vs,zc as se,zd as Rs}from"./chunk-7JLUKY3W.js";var zi=[{name:"red",value:"#FF0000",id:1,selected:!0},{name:"blue",value:"#0000FF",id:2,selected:!1},{name:"green",value:"#008000",id:3,selected:!1},{name:"yellow",value:"#FFFF00",id:4,selected:!1},{name:"orange",value:"#FFA500",id:5,selected:!1},{name:"purple",value:"#800080",id:6,selected:!1},{name:"pink",value:"#FFC0CB",id:7,selected:!1},{name:"cyan",value:"#00FFFF",id:8,selected:!1},{name:"gray",value:"#808080",id:9,selected:!1},{name:"brown",value:"#A52A2A",id:10,selected:!1},{name:"lime",value:"#00FF00",id:11,selected:!1},{name:"teal",value:"#008080",id:12,selected:!1},{name:"maroon",value:"#800000",id:13,selected:!1},{name:"navy",value:"#000080",id:14,selected:!1},{name:"gold",value:"#FFD700",id:15,selected:!1}],Yc=[{name:"Rent",value:"Rent"},{name:"Maintenace",value:"Maintenace"},{name:"Salary",value:"Salary"},{name:"Supplier",value:"Supplier"},{name:"Distributer",value:"Distributer"},{name:"Marketing",value:"Marketing"},{name:"Finance",value:"Finance"},{name:"Food",value:"Food"},{name:"Entertainment",value:"Entertainment"},{name:"Others",value:"Others"}],Kc=[{name:"Monthly",value:"monthly"},{name:"Quarterly",value:"quarterly"},{name:"Yearly",value:"yearly"},{name:"Custom",value:"custom"}],Xc=[{label:"User",value:"user"},{label:"Manager",value:"manager"},{label:"Admin",value:"admin"},{label:"Employee",value:"employee"}],Qc=[{label:"Available",value:"Available"},{label:"Unavailable",value:"Unavailable"}],pa="Add",Jc="Update",Tn=["order-summary","sales-overview","sales-summary","customer-summary"];var pt=class{constructor(t,e){this.http=t;this.authServ=e}getProviderDashboardData(t,e,n){let o=Q.DASHBOARD.LIST.replace("_DASHBOARD_DATA_TYPE_",t).replace("_PROVIDER_ID_",e.toString());if(n){let r=Object.entries(n).map(([a,l])=>`${encodeURIComponent(a)}=${encodeURIComponent(l)}`).join("&");o=o.endsWith("/")?o.slice(0,-1):o,o+=`?${r}`}return this.http.get(o)}getProviderDashboardDetail(t,e){let n=Q.DASHBOARD.LIST.replace("_DASHBOARD_DATA_TYPE_",t).replace("_PROVIDER_ID_",e.toString());return this.http.get(n)}getProviderInfo(t){let e=`${Q.PROVIDER_INFO.GET_PROVIDER}/${t}`;return this.http.get(e)}};sa(pt,"\u0275fac",function(e){return new(e||pt)(Ae($e),Ae(G))}),sa(pt,"\u0275prov",Je({token:pt,factory:pt.\u0275fac,providedIn:"root"})),pt=Ms([Ss({providedIn:"root"})],pt);function ji(i){return i+.5|0}var En=(i,t,e)=>Math.max(Math.min(i,e),t);function Ni(i){return En(ji(i*2.55),0,255)}function Fn(i){return En(ji(i*255),0,255)}function pn(i){return En(ji(i/2.55)/100,0,1)}function Zc(i){return En(ji(i*100),0,100)}var Rt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ga=[..."0123456789ABCDEF"],xp=i=>ga[i&15],Pp=i=>ga[(i&240)>>4]+ga[i&15],Io=i=>(i&240)>>4===(i&15),yp=i=>Io(i.r)&&Io(i.g)&&Io(i.b)&&Io(i.a);function Mp(i){var t=i.length,e;return i[0]==="#"&&(t===4||t===5?e={r:255&Rt[i[1]]*17,g:255&Rt[i[2]]*17,b:255&Rt[i[3]]*17,a:t===5?Rt[i[4]]*17:255}:(t===7||t===9)&&(e={r:Rt[i[1]]<<4|Rt[i[2]],g:Rt[i[3]]<<4|Rt[i[4]],b:Rt[i[5]]<<4|Rt[i[6]],a:t===9?Rt[i[7]]<<4|Rt[i[8]]:255})),e}var Op=(i,t)=>i<255?t(i):"";function wp(i){var t=yp(i)?xp:Pp;return i?"#"+t(i.r)+t(i.g)+t(i.b)+Op(i.a,t):void 0}var Sp=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function id(i,t,e){let n=t*Math.min(e,1-e),o=(r,a=(r+i/30)%12)=>e-n*Math.max(Math.min(a-3,9-a,1),-1);return[o(0),o(8),o(4)]}function kp(i,t,e){let n=(o,r=(o+i/60)%6)=>e-e*t*Math.max(Math.min(r,4-r,1),0);return[n(5),n(3),n(1)]}function Ip(i,t,e){let n=id(i,1,.5),o;for(t+e>1&&(o=1/(t+e),t*=o,e*=o),o=0;o<3;o++)n[o]*=1-t-e,n[o]+=t;return n}function Tp(i,t,e,n,o){return i===o?(t-e)/n+(t<e?6:0):t===o?(e-i)/n+2:(i-t)/n+4}function ua(i){let e=i.r/255,n=i.g/255,o=i.b/255,r=Math.max(e,n,o),a=Math.min(e,n,o),l=(r+a)/2,m,u,f;return r!==a&&(f=r-a,u=l>.5?f/(2-r-a):f/(r+a),m=Tp(e,n,o,f,r),m=m*60+.5),[m|0,u||0,l]}function fa(i,t,e,n){return(Array.isArray(t)?i(t[0],t[1],t[2]):i(t,e,n)).map(Fn)}function _a(i,t,e){return fa(id,i,t,e)}function Ep(i,t,e){return fa(Ip,i,t,e)}function Fp(i,t,e){return fa(kp,i,t,e)}function od(i){return(i%360+360)%360}function Dp(i){let t=Sp.exec(i),e=255,n;if(!t)return;t[5]!==n&&(e=t[6]?Ni(+t[5]):Fn(+t[5]));let o=od(+t[2]),r=+t[3]/100,a=+t[4]/100;return t[1]==="hwb"?n=Ep(o,r,a):t[1]==="hsv"?n=Fp(o,r,a):n=_a(o,r,a),{r:n[0],g:n[1],b:n[2],a:e}}function Ap(i,t){var e=ua(i);e[0]=od(e[0]+t),e=_a(e),i.r=e[0],i.g=e[1],i.b=e[2]}function Vp(i){if(!i)return;let t=ua(i),e=t[0],n=Zc(t[1]),o=Zc(t[2]);return i.a<255?`hsla(${e}, ${n}%, ${o}%, ${pn(i.a)})`:`hsl(${e}, ${n}%, ${o}%)`}var ed={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},td={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Rp(){let i={},t=Object.keys(td),e=Object.keys(ed),n,o,r,a,l;for(n=0;n<t.length;n++){for(a=l=t[n],o=0;o<e.length;o++)r=e[o],l=l.replace(r,ed[r]);r=parseInt(td[a],16),i[l]=[r>>16&255,r>>8&255,r&255]}return i}var To;function Lp(i){To||(To=Rp(),To.transparent=[0,0,0,0]);let t=To[i.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}var zp=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Np(i){let t=zp.exec(i),e=255,n,o,r;if(t){if(t[7]!==n){let a=+t[7];e=t[8]?Ni(a):En(a*255,0,255)}return n=+t[1],o=+t[3],r=+t[5],n=255&(t[2]?Ni(n):En(n,0,255)),o=255&(t[4]?Ni(o):En(o,0,255)),r=255&(t[6]?Ni(r):En(r,0,255)),{r:n,g:o,b:r,a:e}}}function Bp(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${pn(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}var ma=i=>i<=.0031308?i*12.92:Math.pow(i,1/2.4)*1.055-.055,_i=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function jp(i,t,e){let n=_i(pn(i.r)),o=_i(pn(i.g)),r=_i(pn(i.b));return{r:Fn(ma(n+e*(_i(pn(t.r))-n))),g:Fn(ma(o+e*(_i(pn(t.g))-o))),b:Fn(ma(r+e*(_i(pn(t.b))-r))),a:i.a+e*(t.a-i.a)}}function Eo(i,t,e){if(i){let n=ua(i);n[t]=Math.max(0,Math.min(n[t]+n[t]*e,t===0?360:1)),n=_a(n),i.r=n[0],i.g=n[1],i.b=n[2]}}function rd(i,t){return i&&Object.assign(t||{},i)}function nd(i){var t={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(t={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(t.a=Fn(i[3]))):(t=rd(i,{r:0,g:0,b:0,a:1}),t.a=Fn(t.a)),t}function Up(i){return i.charAt(0)==="r"?Np(i):Dp(i)}var Bi=class i{constructor(t){if(t instanceof i)return t;let e=typeof t,n;e==="object"?n=nd(t):e==="string"&&(n=Mp(t)||Lp(t)||Up(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=rd(this._rgb);return t&&(t.a=pn(t.a)),t}set rgb(t){this._rgb=nd(t)}rgbString(){return this._valid?Bp(this._rgb):void 0}hexString(){return this._valid?wp(this._rgb):void 0}hslString(){return this._valid?Vp(this._rgb):void 0}mix(t,e){if(t){let n=this.rgb,o=t.rgb,r,a=e===r?.5:e,l=2*a-1,m=n.a-o.a,u=((l*m===-1?l:(l+m)/(1+l*m))+1)/2;r=1-u,n.r=255&u*n.r+r*o.r+.5,n.g=255&u*n.g+r*o.g+.5,n.b=255&u*n.b+r*o.b+.5,n.a=a*n.a+(1-a)*o.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=jp(this._rgb,t._rgb,e)),this}clone(){return new i(this.rgb)}alpha(t){return this._rgb.a=Fn(t),this}clearer(t){let e=this._rgb;return e.a*=1-t,this}greyscale(){let t=this._rgb,e=ji(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){let e=this._rgb;return e.a*=1+t,this}negate(){let t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Eo(this._rgb,2,t),this}darken(t){return Eo(this._rgb,2,-t),this}saturate(t){return Eo(this._rgb,1,t),this}desaturate(t){return Eo(this._rgb,1,-t),this}rotate(t){return Ap(this._rgb,t),this}};var _d=(()=>{let i=0;return()=>i++})();function ve(i){return i==null}function We(i){if(Array.isArray&&Array.isArray(i))return!0;let t=Object.prototype.toString.call(i);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function xe(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function rt(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function Tt(i,t){return rt(i)?i:t}function Ce(i,t){return typeof i>"u"?t:i}var hd=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:+i/t,xa=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*t:+i;function He(i,t,e){if(i&&typeof i.call=="function")return i.apply(e,t)}function ut(i,t,e,n){let o,r,a;if(We(i))if(r=i.length,n)for(o=r-1;o>=0;o--)t.call(e,i[o],o);else for(o=0;o<r;o++)t.call(e,i[o],o);else if(xe(i))for(a=Object.keys(i),r=a.length,o=0;o<r;o++)t.call(e,i[a[o]],a[o])}function Pa(i,t){let e,n,o,r;if(!i||!t||i.length!==t.length)return!1;for(e=0,n=i.length;e<n;++e)if(o=i[e],r=t[e],o.datasetIndex!==r.datasetIndex||o.index!==r.index)return!1;return!0}function Vo(i){if(We(i))return i.map(Vo);if(xe(i)){let t=Object.create(null),e=Object.keys(i),n=e.length,o=0;for(;o<n;++o)t[e[o]]=Vo(i[e[o]]);return t}return i}function bd(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function Gp(i,t,e,n){if(!bd(i))return;let o=t[i],r=e[i];xe(o)&&xe(r)?bi(o,r,n):t[i]=Vo(r)}function bi(i,t,e){let n=We(t)?t:[t],o=n.length;if(!xe(i))return i;e=e||{};let r=e.merger||Gp,a;for(let l=0;l<o;++l){if(a=n[l],!xe(a))continue;let m=Object.keys(a);for(let u=0,f=m.length;u<f;++u)r(m[u],i,a,e)}return i}function vi(i,t){return bi(i,t,{merger:qp})}function qp(i,t,e){if(!bd(i))return;let n=t[i],o=e[i];xe(n)&&xe(o)?vi(n,o):Object.prototype.hasOwnProperty.call(t,i)||(t[i]=Vo(o))}var ad={"":i=>i,x:i=>i.x,y:i=>i.y};function Wp(i){let t=i.split("."),e=[],n="";for(let o of t)n+=o,n.endsWith("\\")?n=n.slice(0,-1)+".":(e.push(n),n="");return e}function Hp(i){let t=Wp(i);return e=>{for(let n of t){if(n==="")break;e=e&&e[n]}return e}}function Rn(i,t){return(ad[t]||(ad[t]=Hp(t)))(i)}function zo(i){return i.charAt(0).toUpperCase()+i.slice(1)}var xi=i=>typeof i<"u",mn=i=>typeof i=="function",ya=(i,t)=>{if(i.size!==t.size)return!1;for(let e of i)if(!t.has(e))return!1;return!0};function Cd(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}var ke=Math.PI,Be=2*ke,$p=Be+ke,Ro=Number.POSITIVE_INFINITY,Yp=ke/180,Ye=ke/2,Kn=ke/4,sd=ke*2/3,gn=Math.log10,qt=Math.sign;function Pi(i,t,e){return Math.abs(i-t)<e}function Ma(i){let t=Math.round(i);i=Pi(i,t,i/1e3)?t:i;let e=Math.pow(10,Math.floor(gn(i))),n=i/e;return(n<=1?1:n<=2?2:n<=5?5:10)*e}function vd(i){let t=[],e=Math.sqrt(i),n;for(n=1;n<e;n++)i%n===0&&(t.push(n),t.push(i/n));return e===(e|0)&&t.push(e),t.sort((o,r)=>o-r).pop(),t}function Kp(i){return typeof i=="symbol"||typeof i=="object"&&i!==null&&!(Symbol.toPrimitive in i||"toString"in i||"valueOf"in i)}function yi(i){return!Kp(i)&&!isNaN(parseFloat(i))&&isFinite(i)}function xd(i,t){let e=Math.round(i);return e-t<=i&&e+t>=i}function Oa(i,t,e){let n,o,r;for(n=0,o=i.length;n<o;n++)r=i[n][e],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function Wt(i){return i*(ke/180)}function No(i){return i*(180/ke)}function wa(i){if(!rt(i))return;let t=1,e=0;for(;Math.round(i*t)/t!==i;)t*=10,e++;return e}function Sa(i,t){let e=t.x-i.x,n=t.y-i.y,o=Math.sqrt(e*e+n*n),r=Math.atan2(n,e);return r<-.5*ke&&(r+=Be),{angle:r,distance:o}}function Ca(i,t){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}function Xp(i,t){return(i-t+$p)%Be-ke}function Ot(i){return(i%Be+Be)%Be}function Mi(i,t,e,n){let o=Ot(i),r=Ot(t),a=Ot(e),l=Ot(r-o),m=Ot(a-o),u=Ot(o-r),f=Ot(o-a);return o===r||o===a||n&&r===a||l>m&&u<f}function wt(i,t,e){return Math.max(t,Math.min(e,i))}function Pd(i){return wt(i,-32768,32767)}function qi(i,t,e,n=1e-6){return i>=Math.min(t,e)-n&&i<=Math.max(t,e)+n}function Bo(i,t,e){e=e||(a=>i[a]<t);let n=i.length-1,o=0,r;for(;n-o>1;)r=o+n>>1,e(r)?o=r:n=r;return{lo:o,hi:n}}var An=(i,t,e,n)=>Bo(i,e,n?o=>{let r=i[o][t];return r<e||r===e&&i[o+1][t]===e}:o=>i[o][t]<e),yd=(i,t,e)=>Bo(i,e,n=>i[n][t]>=e);function Md(i,t,e){let n=0,o=i.length;for(;n<o&&i[n]<t;)n++;for(;o>n&&i[o-1]>e;)o--;return n>0||o<i.length?i.slice(n,o):i}var Od=["push","pop","shift","splice","unshift"];function wd(i,t){if(i._chartjs){i._chartjs.listeners.push(t);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Od.forEach(e=>{let n="_onData"+zo(e),o=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(...r){let a=o.apply(this,r);return i._chartjs.listeners.forEach(l=>{typeof l[n]=="function"&&l[n](...r)}),a}})})}function ka(i,t){let e=i._chartjs;if(!e)return;let n=e.listeners,o=n.indexOf(t);o!==-1&&n.splice(o,1),!(n.length>0)&&(Od.forEach(r=>{delete i[r]}),delete i._chartjs)}function Ia(i){let t=new Set(i);return t.size===i.length?i:Array.from(t)}var Ta=function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame}();function Ea(i,t){let e=[],n=!1;return function(...o){e=o,n||(n=!0,Ta.call(window,()=>{n=!1,i.apply(t,e)}))}}function Sd(i,t){let e;return function(...n){return t?(clearTimeout(e),e=setTimeout(i,t,n)):i.apply(this,n),t}}var kd=i=>i==="start"?"left":i==="end"?"right":"center",Fa=(i,t,e)=>i==="start"?t:i==="end"?e:(t+e)/2;function Id(i,t,e){let n=t.length,o=0,r=n;if(i._sorted){let{iScale:a,vScale:l,_parsed:m}=i,u=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null,f=a.axis,{min:x,max:P,minDefined:k,maxDefined:I}=a.getUserBounds();if(k){if(o=Math.min(An(m,f,x).lo,e?n:An(t,f,a.getPixelForValue(x)).lo),u){let F=m.slice(0,o+1).reverse().findIndex(D=>!ve(D[l.axis]));o-=Math.max(0,F)}o=wt(o,0,n-1)}if(I){let F=Math.max(An(m,a.axis,P,!0).hi+1,e?0:An(t,f,a.getPixelForValue(P),!0).hi+1);if(u){let D=m.slice(F-1).findIndex(V=>!ve(V[l.axis]));F+=Math.max(0,D)}r=wt(F,o,n)-o}else r=n-o}return{start:o,count:r}}function Td(i){let{xScale:t,yScale:e,_scaleRanges:n}=i,o={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!n)return i._scaleRanges=o,!0;let r=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==e.min||n.ymax!==e.max;return Object.assign(n,o),r}var Fo=i=>i===0||i===1,cd=(i,t,e)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-t)*Be/e)),dd=(i,t,e)=>Math.pow(2,-10*i)*Math.sin((i-t)*Be/e)+1,hi={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*Ye)+1,easeOutSine:i=>Math.sin(i*Ye),easeInOutSine:i=>-.5*(Math.cos(ke*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>Fo(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>Fo(i)?i:cd(i,.075,.3),easeOutElastic:i=>Fo(i)?i:dd(i,.075,.3),easeInOutElastic(i){return Fo(i)?i:i<.5?.5*cd(i*2,.1125,.45):.5+.5*dd(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let t=1.70158;return(i/=.5)<1?.5*(i*i*(((t*=1.525)+1)*i-t)):.5*((i-=2)*i*(((t*=1.525)+1)*i+t)+2)},easeInBounce:i=>1-hi.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?hi.easeInBounce(i*2)*.5:hi.easeOutBounce(i*2-1)*.5+.5};function Da(i){if(i&&typeof i=="object"){let t=i.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Aa(i){return Da(i)?i:new Bi(i)}function ha(i){return Da(i)?i:new Bi(i).saturate(.5).darken(.1).hexString()}var Qp=["x","y","borderWidth","radius","tension"],Jp=["color","borderColor","backgroundColor"];function Zp(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),i.set("animations",{colors:{type:"color",properties:Jp},numbers:{type:"number",properties:Qp}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function em(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var ld=new Map;function tm(i,t){t=t||{};let e=i+JSON.stringify(t),n=ld.get(e);return n||(n=new Intl.NumberFormat(i,t),ld.set(e,n)),n}function Wi(i,t,e){return tm(t,e).format(i)}var Ed={values(i){return We(i)?i:""+i},numeric(i,t,e){if(i===0)return"0";let n=this.chart.options.locale,o,r=i;if(e.length>1){let u=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(u<1e-4||u>1e15)&&(o="scientific"),r=nm(i,e)}let a=gn(Math.abs(r)),l=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),m={notation:o,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(m,this.options.ticks.format),Wi(i,n,m)},logarithmic(i,t,e){if(i===0)return"0";let n=e[t].significand||i/Math.pow(10,Math.floor(gn(i)));return[1,2,3,5,10,15].includes(n)||t>.8*e.length?Ed.numeric.call(this,i,t,e):""}};function nm(i,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&i!==Math.floor(i)&&(e=i-Math.floor(i)),e}var Hi={formatters:Ed};function im(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Hi.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}var Ln=Object.create(null),jo=Object.create(null);function Ui(i,t){if(!t)return i;let e=t.split(".");for(let n=0,o=e.length;n<o;++n){let r=e[n];i=i[r]||(i[r]=Object.create(null))}return i}function ba(i,t,e){return typeof t=="string"?bi(Ui(i,t),e):bi(Ui(i,""),t)}var va=class{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,o)=>ha(o.backgroundColor),this.hoverBorderColor=(n,o)=>ha(o.borderColor),this.hoverColor=(n,o)=>ha(o.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return ba(this,t,e)}get(t){return Ui(this,t)}describe(t,e){return ba(jo,t,e)}override(t,e){return ba(Ln,t,e)}route(t,e,n,o){let r=Ui(this,t),a=Ui(this,n),l="_"+e;Object.defineProperties(r,{[l]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){let m=this[l],u=a[o];return xe(m)?Object.assign({},u,m):Ce(m,u)},set(m){this[l]=m}}})}apply(t){t.forEach(e=>e(this))}},Ke=new va({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Zp,em,im]);function om(i){return!i||ve(i.size)||ve(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function Gi(i,t,e,n,o){let r=t[o];return r||(r=t[o]=i.measureText(o).width,e.push(o)),r>n&&(n=r),n}function Fd(i,t,e,n){n=n||{};let o=n.data=n.data||{},r=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(o=n.data={},r=n.garbageCollect=[],n.font=t),i.save(),i.font=t;let a=0,l=e.length,m,u,f,x,P;for(m=0;m<l;m++)if(x=e[m],x!=null&&!We(x))a=Gi(i,o,r,a,x);else if(We(x))for(u=0,f=x.length;u<f;u++)P=x[u],P!=null&&!We(P)&&(a=Gi(i,o,r,a,P));i.restore();let k=r.length/2;if(k>e.length){for(m=0;m<k;m++)delete o[r[m]];r.splice(0,k)}return a}function zn(i,t,e){let n=i.currentDevicePixelRatio,o=e!==0?Math.max(e/2,.5):0;return Math.round((t-o)*n)/n+o}function Va(i,t){!t&&!i||(t=t||i.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,i.width,i.height),t.restore())}function Dd(i,t,e,n){Ad(i,t,e,n,null)}function Ad(i,t,e,n,o){let r,a,l,m,u,f,x,P,k=t.pointStyle,I=t.rotation,F=t.radius,D=(I||0)*Yp;if(k&&typeof k=="object"&&(r=k.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){i.save(),i.translate(e,n),i.rotate(D),i.drawImage(k,-k.width/2,-k.height/2,k.width,k.height),i.restore();return}if(!(isNaN(F)||F<=0)){switch(i.beginPath(),k){default:o?i.ellipse(e,n,o/2,F,0,0,Be):i.arc(e,n,F,0,Be),i.closePath();break;case"triangle":f=o?o/2:F,i.moveTo(e+Math.sin(D)*f,n-Math.cos(D)*F),D+=sd,i.lineTo(e+Math.sin(D)*f,n-Math.cos(D)*F),D+=sd,i.lineTo(e+Math.sin(D)*f,n-Math.cos(D)*F),i.closePath();break;case"rectRounded":u=F*.516,m=F-u,a=Math.cos(D+Kn)*m,x=Math.cos(D+Kn)*(o?o/2-u:m),l=Math.sin(D+Kn)*m,P=Math.sin(D+Kn)*(o?o/2-u:m),i.arc(e-x,n-l,u,D-ke,D-Ye),i.arc(e+P,n-a,u,D-Ye,D),i.arc(e+x,n+l,u,D,D+Ye),i.arc(e-P,n+a,u,D+Ye,D+ke),i.closePath();break;case"rect":if(!I){m=Math.SQRT1_2*F,f=o?o/2:m,i.rect(e-f,n-m,2*f,2*m);break}D+=Kn;case"rectRot":x=Math.cos(D)*(o?o/2:F),a=Math.cos(D)*F,l=Math.sin(D)*F,P=Math.sin(D)*(o?o/2:F),i.moveTo(e-x,n-l),i.lineTo(e+P,n-a),i.lineTo(e+x,n+l),i.lineTo(e-P,n+a),i.closePath();break;case"crossRot":D+=Kn;case"cross":x=Math.cos(D)*(o?o/2:F),a=Math.cos(D)*F,l=Math.sin(D)*F,P=Math.sin(D)*(o?o/2:F),i.moveTo(e-x,n-l),i.lineTo(e+x,n+l),i.moveTo(e+P,n-a),i.lineTo(e-P,n+a);break;case"star":x=Math.cos(D)*(o?o/2:F),a=Math.cos(D)*F,l=Math.sin(D)*F,P=Math.sin(D)*(o?o/2:F),i.moveTo(e-x,n-l),i.lineTo(e+x,n+l),i.moveTo(e+P,n-a),i.lineTo(e-P,n+a),D+=Kn,x=Math.cos(D)*(o?o/2:F),a=Math.cos(D)*F,l=Math.sin(D)*F,P=Math.sin(D)*(o?o/2:F),i.moveTo(e-x,n-l),i.lineTo(e+x,n+l),i.moveTo(e+P,n-a),i.lineTo(e-P,n+a);break;case"line":a=o?o/2:Math.cos(D)*F,l=Math.sin(D)*F,i.moveTo(e-a,n-l),i.lineTo(e+a,n+l);break;case"dash":i.moveTo(e,n),i.lineTo(e+Math.cos(D)*(o?o/2:F),n+Math.sin(D)*F);break;case!1:i.closePath();break}i.fill(),t.borderWidth>0&&i.stroke()}}function sn(i,t,e){return e=e||.5,!t||i&&i.x>t.left-e&&i.x<t.right+e&&i.y>t.top-e&&i.y<t.bottom+e}function Ra(i,t){i.save(),i.beginPath(),i.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),i.clip()}function La(i){i.restore()}function Vd(i,t,e,n,o){if(!t)return i.lineTo(e.x,e.y);if(o==="middle"){let r=(t.x+e.x)/2;i.lineTo(r,t.y),i.lineTo(r,e.y)}else o==="after"!=!!n?i.lineTo(t.x,e.y):i.lineTo(e.x,t.y);i.lineTo(e.x,e.y)}function Rd(i,t,e,n){if(!t)return i.lineTo(e.x,e.y);i.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?e.cp2x:e.cp1x,n?e.cp2y:e.cp1y,e.x,e.y)}function rm(i,t){t.translation&&i.translate(t.translation[0],t.translation[1]),ve(t.rotation)||i.rotate(t.rotation),t.color&&(i.fillStyle=t.color),t.textAlign&&(i.textAlign=t.textAlign),t.textBaseline&&(i.textBaseline=t.textBaseline)}function am(i,t,e,n,o){if(o.strikethrough||o.underline){let r=i.measureText(n),a=t-r.actualBoundingBoxLeft,l=t+r.actualBoundingBoxRight,m=e-r.actualBoundingBoxAscent,u=e+r.actualBoundingBoxDescent,f=o.strikethrough?(m+u)/2:u;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=o.decorationWidth||2,i.moveTo(a,f),i.lineTo(l,f),i.stroke()}}function sm(i,t){let e=i.fillStyle;i.fillStyle=t.color,i.fillRect(t.left,t.top,t.width,t.height),i.fillStyle=e}function $i(i,t,e,n,o,r={}){let a=We(t)?t:[t],l=r.strokeWidth>0&&r.strokeColor!=="",m,u;for(i.save(),i.font=o.string,rm(i,r),m=0;m<a.length;++m)u=a[m],r.backdrop&&sm(i,r.backdrop),l&&(r.strokeColor&&(i.strokeStyle=r.strokeColor),ve(r.strokeWidth)||(i.lineWidth=r.strokeWidth),i.strokeText(u,e,n,r.maxWidth)),i.fillText(u,e,n,r.maxWidth),am(i,e,n,u,r),n+=Number(o.lineHeight);i.restore()}function za(i,t){let{x:e,y:n,w:o,h:r,radius:a}=t;i.arc(e+a.topLeft,n+a.topLeft,a.topLeft,1.5*ke,ke,!0),i.lineTo(e,n+r-a.bottomLeft),i.arc(e+a.bottomLeft,n+r-a.bottomLeft,a.bottomLeft,ke,Ye,!0),i.lineTo(e+o-a.bottomRight,n+r),i.arc(e+o-a.bottomRight,n+r-a.bottomRight,a.bottomRight,Ye,0,!0),i.lineTo(e+o,n+a.topRight),i.arc(e+o-a.topRight,n+a.topRight,a.topRight,0,-Ye,!0),i.lineTo(e+a.topLeft,n)}var cm=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,dm=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function lm(i,t){let e=(""+i).match(cm);if(!e||e[1]==="normal")return t*1.2;switch(i=+e[2],e[3]){case"px":return i;case"%":i/=100;break}return t*i}var pm=i=>+i||0;function Uo(i,t){let e={},n=xe(t),o=n?Object.keys(t):t,r=xe(i)?n?a=>Ce(i[a],i[t[a]]):a=>i[a]:()=>i;for(let a of o)e[a]=pm(r(a));return e}function Na(i){return Uo(i,{top:"y",right:"x",bottom:"y",left:"x"})}function Ba(i){return Uo(i,["topLeft","topRight","bottomLeft","bottomRight"])}function cn(i){let t=Na(i);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Jn(i,t){i=i||{},t=t||Ke.font;let e=Ce(i.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let n=Ce(i.style,t.style);n&&!(""+n).match(dm)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);let o={family:Ce(i.family,t.family),lineHeight:lm(Ce(i.lineHeight,t.lineHeight),e),size:e,style:n,weight:Ce(i.weight,t.weight),string:""};return o.string=om(o),o}function Yi(i,t,e,n){let o=!0,r,a,l;for(r=0,a=i.length;r<a;++r)if(l=i[r],l!==void 0&&(t!==void 0&&typeof l=="function"&&(l=l(t),o=!1),e!==void 0&&We(l)&&(l=l[e%l.length],o=!1),l!==void 0))return n&&!o&&(n.cacheable=!1),l}function Ld(i,t,e){let{min:n,max:o}=i,r=xa(t,(o-n)/2),a=(l,m)=>e&&l===0?0:l+m;return{min:a(n,-Math.abs(r)),max:a(o,r)}}function Nn(i,t){return Object.assign(Object.create(i),t)}function Go(i,t=[""],e,n,o=()=>i[0]){let r=e||i;typeof n>"u"&&(n=Bd("_fallback",i));let a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:r,_fallback:n,_getTarget:o,override:l=>Go([l,...i],t,r,n)};return new Proxy(a,{deleteProperty(l,m){return delete l[m],delete l._keys,delete i[0][m],!0},get(l,m){return zd(l,m,()=>Cm(m,t,i,l))},getOwnPropertyDescriptor(l,m){return Reflect.getOwnPropertyDescriptor(l._scopes[0],m)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(l,m){return md(l).includes(m)},ownKeys(l){return md(l)},set(l,m,u){let f=l._storage||(l._storage=o());return l[m]=f[m]=u,delete l._keys,!0}})}function Qn(i,t,e,n){let o={_cacheable:!1,_proxy:i,_context:t,_subProxy:e,_stack:new Set,_descriptors:ja(i,n),setContext:r=>Qn(i,r,e,n),override:r=>Qn(i.override(r),t,e,n)};return new Proxy(o,{deleteProperty(r,a){return delete r[a],delete i[a],!0},get(r,a,l){return zd(r,a,()=>gm(r,a,l))},getOwnPropertyDescriptor(r,a){return r._descriptors.allKeys?Reflect.has(i,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,a)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(r,a){return Reflect.has(i,a)},ownKeys(){return Reflect.ownKeys(i)},set(r,a,l){return i[a]=l,delete r[a],!0}})}function ja(i,t={scriptable:!0,indexable:!0}){let{_scriptable:e=t.scriptable,_indexable:n=t.indexable,_allKeys:o=t.allKeys}=i;return{allKeys:o,scriptable:e,indexable:n,isScriptable:mn(e)?e:()=>e,isIndexable:mn(n)?n:()=>n}}var mm=(i,t)=>i?i+zo(t):t,Ua=(i,t)=>xe(t)&&i!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function zd(i,t,e){if(Object.prototype.hasOwnProperty.call(i,t)||t==="constructor")return i[t];let n=e();return i[t]=n,n}function gm(i,t,e){let{_proxy:n,_context:o,_subProxy:r,_descriptors:a}=i,l=n[t];return mn(l)&&a.isScriptable(t)&&(l=um(t,l,i,e)),We(l)&&l.length&&(l=fm(t,l,i,a.isIndexable)),Ua(t,l)&&(l=Qn(l,o,r&&r[t],a)),l}function um(i,t,e,n){let{_proxy:o,_context:r,_subProxy:a,_stack:l}=e;if(l.has(i))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+i);l.add(i);let m=t(r,a||n);return l.delete(i),Ua(i,m)&&(m=Ga(o._scopes,o,i,m)),m}function fm(i,t,e,n){let{_proxy:o,_context:r,_subProxy:a,_descriptors:l}=e;if(typeof r.index<"u"&&n(i))return t[r.index%t.length];if(xe(t[0])){let m=t,u=o._scopes.filter(f=>f!==m);t=[];for(let f of m){let x=Ga(u,o,i,f);t.push(Qn(x,r,a&&a[i],l))}}return t}function Nd(i,t,e){return mn(i)?i(t,e):i}var _m=(i,t)=>i===!0?t:typeof i=="string"?Rn(t,i):void 0;function hm(i,t,e,n,o){for(let r of t){let a=_m(e,r);if(a){i.add(a);let l=Nd(a._fallback,e,o);if(typeof l<"u"&&l!==e&&l!==n)return l}else if(a===!1&&typeof n<"u"&&e!==n)return null}return!1}function Ga(i,t,e,n){let o=t._rootScopes,r=Nd(t._fallback,e,n),a=[...i,...o],l=new Set;l.add(n);let m=pd(l,a,e,r||e,n);return m===null||typeof r<"u"&&r!==e&&(m=pd(l,a,r,m,n),m===null)?!1:Go(Array.from(l),[""],o,r,()=>bm(t,e,n))}function pd(i,t,e,n,o){for(;e;)e=hm(i,t,e,n,o);return e}function bm(i,t,e){let n=i._getTarget();t in n||(n[t]={});let o=n[t];return We(o)&&xe(e)?e:o||{}}function Cm(i,t,e,n){let o;for(let r of t)if(o=Bd(mm(r,i),e),typeof o<"u")return Ua(i,o)?Ga(e,n,i,o):o}function Bd(i,t){for(let e of t){if(!e)continue;let n=e[i];if(typeof n<"u")return n}}function md(i){let t=i._keys;return t||(t=i._keys=vm(i._scopes)),t}function vm(i){let t=new Set;for(let e of i)for(let n of Object.keys(e).filter(o=>!o.startsWith("_")))t.add(n);return Array.from(t)}var xm=Number.EPSILON||1e-14,Ci=(i,t)=>t<i.length&&!i[t].skip&&i[t],jd=i=>i==="x"?"y":"x";function Pm(i,t,e,n){let o=i.skip?t:i,r=t,a=e.skip?t:e,l=Ca(r,o),m=Ca(a,r),u=l/(l+m),f=m/(l+m);u=isNaN(u)?0:u,f=isNaN(f)?0:f;let x=n*u,P=n*f;return{previous:{x:r.x-x*(a.x-o.x),y:r.y-x*(a.y-o.y)},next:{x:r.x+P*(a.x-o.x),y:r.y+P*(a.y-o.y)}}}function ym(i,t,e){let n=i.length,o,r,a,l,m,u=Ci(i,0);for(let f=0;f<n-1;++f)if(m=u,u=Ci(i,f+1),!(!m||!u)){if(Pi(t[f],0,xm)){e[f]=e[f+1]=0;continue}o=e[f]/t[f],r=e[f+1]/t[f],l=Math.pow(o,2)+Math.pow(r,2),!(l<=9)&&(a=3/Math.sqrt(l),e[f]=o*a*t[f],e[f+1]=r*a*t[f])}}function Mm(i,t,e="x"){let n=jd(e),o=i.length,r,a,l,m=Ci(i,0);for(let u=0;u<o;++u){if(a=l,l=m,m=Ci(i,u+1),!l)continue;let f=l[e],x=l[n];a&&(r=(f-a[e])/3,l[`cp1${e}`]=f-r,l[`cp1${n}`]=x-r*t[u]),m&&(r=(m[e]-f)/3,l[`cp2${e}`]=f+r,l[`cp2${n}`]=x+r*t[u])}}function Om(i,t="x"){let e=jd(t),n=i.length,o=Array(n).fill(0),r=Array(n),a,l,m,u=Ci(i,0);for(a=0;a<n;++a)if(l=m,m=u,u=Ci(i,a+1),!!m){if(u){let f=u[t]-m[t];o[a]=f!==0?(u[e]-m[e])/f:0}r[a]=l?u?qt(o[a-1])!==qt(o[a])?0:(o[a-1]+o[a])/2:o[a-1]:o[a]}ym(i,o,r),Mm(i,r,t)}function Do(i,t,e){return Math.max(Math.min(i,e),t)}function wm(i,t){let e,n,o,r,a,l=sn(i[0],t);for(e=0,n=i.length;e<n;++e)a=r,r=l,l=e<n-1&&sn(i[e+1],t),r&&(o=i[e],a&&(o.cp1x=Do(o.cp1x,t.left,t.right),o.cp1y=Do(o.cp1y,t.top,t.bottom)),l&&(o.cp2x=Do(o.cp2x,t.left,t.right),o.cp2y=Do(o.cp2y,t.top,t.bottom)))}function Ud(i,t,e,n,o){let r,a,l,m;if(t.spanGaps&&(i=i.filter(u=>!u.skip)),t.cubicInterpolationMode==="monotone")Om(i,o);else{let u=n?i[i.length-1]:i[0];for(r=0,a=i.length;r<a;++r)l=i[r],m=Pm(u,l,i[Math.min(r+1,a-(n?0:1))%a],t.tension),l.cp1x=m.previous.x,l.cp1y=m.previous.y,l.cp2x=m.next.x,l.cp2y=m.next.y,u=l}t.capBezierPoints&&wm(i,e)}function qo(){return typeof window<"u"&&typeof document<"u"}function Wo(i){let t=i.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Lo(i,t,e){let n;return typeof i=="string"?(n=parseInt(i,10),i.indexOf("%")!==-1&&(n=n/100*t.parentNode[e])):n=i,n}var Ho=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function Sm(i,t){return Ho(i).getPropertyValue(t)}var km=["top","right","bottom","left"];function Xn(i,t,e){let n={};e=e?"-"+e:"";for(let o=0;o<4;o++){let r=km[o];n[r]=parseFloat(i[t+"-"+r+e])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}var Im=(i,t,e)=>(i>0||t>0)&&(!e||!e.shadowRoot);function Tm(i,t){let e=i.touches,n=e&&e.length?e[0]:i,{offsetX:o,offsetY:r}=n,a=!1,l,m;if(Im(o,r,i.target))l=o,m=r;else{let u=t.getBoundingClientRect();l=n.clientX-u.left,m=n.clientY-u.top,a=!0}return{x:l,y:m,box:a}}function Bn(i,t){if("native"in i)return i;let{canvas:e,currentDevicePixelRatio:n}=t,o=Ho(e),r=o.boxSizing==="border-box",a=Xn(o,"padding"),l=Xn(o,"border","width"),{x:m,y:u,box:f}=Tm(i,e),x=a.left+(f&&l.left),P=a.top+(f&&l.top),{width:k,height:I}=t;return r&&(k-=a.width+l.width,I-=a.height+l.height),{x:Math.round((m-x)/k*e.width/n),y:Math.round((u-P)/I*e.height/n)}}function Em(i,t,e){let n,o;if(t===void 0||e===void 0){let r=i&&Wo(i);if(!r)t=i.clientWidth,e=i.clientHeight;else{let a=r.getBoundingClientRect(),l=Ho(r),m=Xn(l,"border","width"),u=Xn(l,"padding");t=a.width-u.width-m.width,e=a.height-u.height-m.height,n=Lo(l.maxWidth,r,"clientWidth"),o=Lo(l.maxHeight,r,"clientHeight")}}return{width:t,height:e,maxWidth:n||Ro,maxHeight:o||Ro}}var Vn=i=>Math.round(i*10)/10;function Gd(i,t,e,n){let o=Ho(i),r=Xn(o,"margin"),a=Lo(o.maxWidth,i,"clientWidth")||Ro,l=Lo(o.maxHeight,i,"clientHeight")||Ro,m=Em(i,t,e),{width:u,height:f}=m;if(o.boxSizing==="content-box"){let P=Xn(o,"border","width"),k=Xn(o,"padding");u-=k.width+P.width,f-=k.height+P.height}return u=Math.max(0,u-r.width),f=Math.max(0,n?u/n:f-r.height),u=Vn(Math.min(u,a,m.maxWidth)),f=Vn(Math.min(f,l,m.maxHeight)),u&&!f&&(f=Vn(u/2)),(t!==void 0||e!==void 0)&&n&&m.height&&f>m.height&&(f=m.height,u=Vn(Math.floor(f*n))),{width:u,height:f}}function qa(i,t,e){let n=t||1,o=Vn(i.height*n),r=Vn(i.width*n);i.height=Vn(i.height),i.width=Vn(i.width);let a=i.canvas;return a.style&&(e||!a.style.height&&!a.style.width)&&(a.style.height=`${i.height}px`,a.style.width=`${i.width}px`),i.currentDevicePixelRatio!==n||a.height!==o||a.width!==r?(i.currentDevicePixelRatio=n,a.height=o,a.width=r,i.ctx.setTransform(n,0,0,n,0,0),!0):!1}var qd=function(){let i=!1;try{let t={get passive(){return i=!0,!1}};qo()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return i}();function Wa(i,t){let e=Sm(i,t),n=e&&e.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Dn(i,t,e,n){return{x:i.x+e*(t.x-i.x),y:i.y+e*(t.y-i.y)}}function Wd(i,t,e,n){return{x:i.x+e*(t.x-i.x),y:n==="middle"?e<.5?i.y:t.y:n==="after"?e<1?i.y:t.y:e>0?t.y:i.y}}function Hd(i,t,e,n){let o={x:i.cp2x,y:i.cp2y},r={x:t.cp1x,y:t.cp1y},a=Dn(i,o,e),l=Dn(o,r,e),m=Dn(r,t,e),u=Dn(a,l,e),f=Dn(l,m,e);return Dn(u,f,e)}function $d(i){return i==="angle"?{between:Mi,compare:Xp,normalize:Ot}:{between:qi,compare:(t,e)=>t-e,normalize:t=>t}}function gd({start:i,end:t,count:e,loop:n,style:o}){return{start:i%e,end:t%e,loop:n&&(t-i+1)%e===0,style:o}}function Fm(i,t,e){let{property:n,start:o,end:r}=e,{between:a,normalize:l}=$d(n),m=t.length,{start:u,end:f,loop:x}=i,P,k;if(x){for(u+=m,f+=m,P=0,k=m;P<k&&a(l(t[u%m][n]),o,r);++P)u--,f--;u%=m,f%=m}return f<u&&(f+=m),{start:u,end:f,loop:x,style:i.style}}function Yd(i,t,e){if(!e)return[i];let{property:n,start:o,end:r}=e,a=t.length,{compare:l,between:m,normalize:u}=$d(n),{start:f,end:x,loop:P,style:k}=Fm(i,t,e),I=[],F=!1,D=null,V,B,$,J=()=>m(o,$,V)&&l(o,$)!==0,q=()=>l(r,V)===0||m(r,$,V),K=()=>F||J(),ae=()=>!F||q();for(let ie=f,re=f;ie<=x;++ie)B=t[ie%a],!B.skip&&(V=u(B[n]),V!==$&&(F=m(V,o,r),D===null&&K()&&(D=l(V,o)===0?ie:re),D!==null&&ae()&&(I.push(gd({start:D,end:ie,loop:P,count:a,style:k})),D=null),re=ie,$=V));return D!==null&&I.push(gd({start:D,end:x,loop:P,count:a,style:k})),I}function Kd(i,t){let e=[],n=i.segments;for(let o=0;o<n.length;o++){let r=Yd(n[o],i.points,t);r.length&&e.push(...r)}return e}function Dm(i,t,e,n){let o=0,r=t-1;if(e&&!n)for(;o<t&&!i[o].skip;)o++;for(;o<t&&i[o].skip;)o++;for(o%=t,e&&(r+=o);r>o&&i[r%t].skip;)r--;return r%=t,{start:o,end:r}}function Am(i,t,e,n){let o=i.length,r=[],a=t,l=i[t],m;for(m=t+1;m<=e;++m){let u=i[m%o];u.skip||u.stop?l.skip||(n=!1,r.push({start:t%o,end:(m-1)%o,loop:n}),t=a=u.stop?m:null):(a=m,l.skip&&(t=m)),l=u}return a!==null&&r.push({start:t%o,end:a%o,loop:n}),r}function Xd(i,t){let e=i.points,n=i.options.spanGaps,o=e.length;if(!o)return[];let r=!!i._loop,{start:a,end:l}=Dm(e,o,r,n);if(n===!0)return ud(i,[{start:a,end:l,loop:r}],e,t);let m=l<a?l+o:l,u=!!i._fullLoop&&a===0&&l===o-1;return ud(i,Am(e,a,m,u),e,t)}function ud(i,t,e,n){return!n||!n.setContext||!e?t:Vm(i,t,e,n)}function Vm(i,t,e,n){let o=i._chart.getContext(),r=fd(i.options),{_datasetIndex:a,options:{spanGaps:l}}=i,m=e.length,u=[],f=r,x=t[0].start,P=x;function k(I,F,D,V){let B=l?-1:1;if(I!==F){for(I+=m;e[I%m].skip;)I-=B;for(;e[F%m].skip;)F+=B;I%m!==F%m&&(u.push({start:I%m,end:F%m,loop:D,style:V}),f=V,x=F%m)}}for(let I of t){x=l?x:I.start;let F=e[x%m],D;for(P=x+1;P<=I.end;P++){let V=e[P%m];D=fd(n.setContext(Nn(o,{type:"segment",p0:F,p1:V,p0DataIndex:(P-1)%m,p1DataIndex:P%m,datasetIndex:a}))),Rm(D,f)&&k(x,P-1,I.loop,f),F=V,f=D}x<P-1&&k(x,P-1,I.loop,f)}return u}function fd(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function Rm(i,t){if(!t)return!1;let e=[],n=function(o,r){return Da(r)?(e.includes(r)||e.push(r),e.indexOf(r)):r};return JSON.stringify(i,n)!==JSON.stringify(t,n)}function Ao(i,t,e){return i.options.clip?i[e]:t[e]}function Lm(i,t){let{xScale:e,yScale:n}=i;return e&&n?{left:Ao(e,t,"left"),right:Ao(e,t,"right"),top:Ao(n,t,"top"),bottom:Ao(n,t,"bottom")}:t}function Qd(i,t){let e=t._clip;if(e.disabled)return!1;let n=Lm(t,i.chartArea);return{left:e.left===!1?0:n.left-(e.left===!0?0:e.left),right:e.right===!1?i.width:n.right+(e.right===!0?0:e.right),top:e.top===!1?0:n.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?i.height:n.bottom+(e.bottom===!0?0:e.bottom)}}var ts=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,o){let r=e.listeners[o],a=e.duration;r.forEach(l=>l({chart:t,initial:e.initial,numSteps:a,currentStep:Math.min(n-e.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=Ta.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((n,o)=>{if(!n.running||!n.items.length)return;let r=n.items,a=r.length-1,l=!1,m;for(;a>=0;--a)m=r[a],m._active?(m._total>n.duration&&(n.duration=m._total),m.tick(t),l=!0):(r[a]=r[r.length-1],r.pop());l&&(o.draw(),this._notify(o,n,t,"progress")),r.length||(n.running=!1,this._notify(o,n,t,"complete"),n.initial=!1),e+=r.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){let e=this._charts,n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){let e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((n,o)=>Math.max(n,o._duration),0),this._refresh())}running(t){if(!this._running)return!1;let e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){let e=this._charts.get(t);if(!e||!e.items.length)return;let n=e.items,o=n.length-1;for(;o>=0;--o)n[o].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}},un=new ts,Jd="transparent",zm={boolean(i,t,e){return e>.5?t:i},color(i,t,e){let n=Aa(i||Jd),o=n.valid&&Aa(t||Jd);return o&&o.valid?o.mix(n,e).hexString():t},number(i,t,e){return i+(t-i)*e}},ns=class{constructor(t,e,n,o){let r=e[n];o=Yi([t.to,o,r,t.from]);let a=Yi([t.from,r,o]);this._active=!0,this._fn=t.fn||zm[t.type||typeof a],this._easing=hi[t.easing]||hi.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=a,this._to=o,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);let o=this._target[this._prop],r=n-this._start,a=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Yi([t.to,e,o,t.from]),this._from=Yi([t.from,o,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){let e=t-this._start,n=this._duration,o=this._prop,r=this._from,a=this._loop,l=this._to,m;if(this._active=r!==l&&(a||e<n),!this._active){this._target[o]=l,this._notify(!0);return}if(e<0){this._target[o]=r;return}m=e/n%2,m=a&&m>1?2-m:m,m=this._easing(Math.min(1,Math.max(0,m))),this._target[o]=this._fn(r,l,m)}wait(){let t=this._promises||(this._promises=[]);return new Promise((e,n)=>{t.push({res:e,rej:n})})}_notify(t){let e=t?"res":"rej",n=this._promises||[];for(let o=0;o<n.length;o++)n[o][e]()}},is=class{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!xe(t))return;let e=Object.keys(Ke.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(o=>{let r=t[o];if(!xe(r))return;let a={};for(let l of e)a[l]=r[l];(We(r.properties)&&r.properties||[o]).forEach(l=>{(l===o||!n.has(l))&&n.set(l,a)})})}_animateOptions(t,e){let n=e.options,o=Bm(t,n);if(!o)return[];let r=this._createAnimations(o,n);return n.$shared&&Nm(t.options.$animations,n).then(()=>{t.options=n},()=>{}),r}_createAnimations(t,e){let n=this._properties,o=[],r=t.$animations||(t.$animations={}),a=Object.keys(e),l=Date.now(),m;for(m=a.length-1;m>=0;--m){let u=a[m];if(u.charAt(0)==="$")continue;if(u==="options"){o.push(...this._animateOptions(t,e));continue}let f=e[u],x=r[u],P=n.get(u);if(x)if(P&&x.active()){x.update(P,f,l);continue}else x.cancel();if(!P||!P.duration){t[u]=f;continue}r[u]=x=new ns(P,t,u,f),o.push(x)}return o}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}let n=this._createAnimations(t,e);if(n.length)return un.add(this._chart,n),!0}};function Nm(i,t){let e=[],n=Object.keys(t);for(let o=0;o<n.length;o++){let r=i[n[o]];r&&r.active()&&e.push(r.wait())}return Promise.all(e)}function Bm(i,t){if(!t)return;let e=i.options;if(!e){i.options=t;return}return e.$shared&&(i.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function Zd(i,t){let e=i&&i.options||{},n=e.reverse,o=e.min===void 0?t:0,r=e.max===void 0?t:0;return{start:n?r:o,end:n?o:r}}function jm(i,t,e){if(e===!1)return!1;let n=Zd(i,e),o=Zd(t,e);return{top:o.end,right:n.end,bottom:o.start,left:n.start}}function Um(i){let t,e,n,o;return xe(i)?(t=i.top,e=i.right,n=i.bottom,o=i.left):t=e=n=o=i,{top:t,right:e,bottom:n,left:o,disabled:i===!1}}function jl(i,t){let e=[],n=i._getSortedDatasetMetas(t),o,r;for(o=0,r=n.length;o<r;++o)e.push(n[o].index);return e}function el(i,t,e,n={}){let o=i.keys,r=n.mode==="single",a,l,m,u;if(t===null)return;let f=!1;for(a=0,l=o.length;a<l;++a){if(m=+o[a],m===e){if(f=!0,n.all)continue;break}u=i.values[m],rt(u)&&(r||t===0||qt(t)===qt(u))&&(t+=u)}return!f&&!n.all?0:t}function Gm(i,t){let{iScale:e,vScale:n}=t,o=e.axis==="x"?"x":"y",r=n.axis==="x"?"x":"y",a=Object.keys(i),l=new Array(a.length),m,u,f;for(m=0,u=a.length;m<u;++m)f=a[m],l[m]={[o]:f,[r]:i[f]};return l}function Ha(i,t){let e=i&&i.options.stacked;return e||e===void 0&&t.stack!==void 0}function qm(i,t,e){return`${i.id}.${t.id}.${e.stack||e.type}`}function Wm(i){let{min:t,max:e,minDefined:n,maxDefined:o}=i.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:o?e:Number.POSITIVE_INFINITY}}function Hm(i,t,e){let n=i[t]||(i[t]={});return n[e]||(n[e]={})}function tl(i,t,e,n){for(let o of t.getMatchingVisibleMetas(n).reverse()){let r=i[o.index];if(e&&r>0||!e&&r<0)return o.index}return null}function nl(i,t){let{chart:e,_cachedMeta:n}=i,o=e._stacks||(e._stacks={}),{iScale:r,vScale:a,index:l}=n,m=r.axis,u=a.axis,f=qm(r,a,n),x=t.length,P;for(let k=0;k<x;++k){let I=t[k],{[m]:F,[u]:D}=I,V=I._stacks||(I._stacks={});P=V[u]=Hm(o,f,F),P[l]=D,P._top=tl(P,a,!0,n.type),P._bottom=tl(P,a,!1,n.type);let B=P._visualValues||(P._visualValues={});B[l]=D}}function $a(i,t){let e=i.scales;return Object.keys(e).filter(n=>e[n].axis===t).shift()}function $m(i,t){return Nn(i,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Ym(i,t,e){return Nn(i,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Ki(i,t){let e=i.controller.index,n=i.vScale&&i.vScale.axis;if(n){t=t||i._parsed;for(let o of t){let r=o._stacks;if(!r||r[n]===void 0||r[n][e]===void 0)return;delete r[n][e],r[n]._visualValues!==void 0&&r[n]._visualValues[e]!==void 0&&delete r[n]._visualValues[e]}}}var Ya=i=>i==="reset"||i==="none",il=(i,t)=>t?i:Object.assign({},i),Km=(i,t,e)=>i&&!t.hidden&&t._stacked&&{keys:jl(e,!0),values:null},rr=(()=>{class i{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Ha(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ki(this._cachedMeta),this.index=e}linkScales(){let e=this.chart,n=this._cachedMeta,o=this.getDataset(),r=(P,k,I,F)=>P==="x"?k:P==="r"?F:I,a=n.xAxisID=Ce(o.xAxisID,$a(e,"x")),l=n.yAxisID=Ce(o.yAxisID,$a(e,"y")),m=n.rAxisID=Ce(o.rAxisID,$a(e,"r")),u=n.indexAxis,f=n.iAxisID=r(u,a,l,m),x=n.vAxisID=r(u,l,a,m);n.xScale=this.getScaleForId(a),n.yScale=this.getScaleForId(l),n.rScale=this.getScaleForId(m),n.iScale=this.getScaleForId(f),n.vScale=this.getScaleForId(x)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){let n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){let e=this._cachedMeta;this._data&&ka(this._data,this),e._stacked&&Ki(e)}_dataCheck(){let e=this.getDataset(),n=e.data||(e.data=[]),o=this._data;if(xe(n)){let r=this._cachedMeta;this._data=Gm(n,r)}else if(o!==n){if(o){ka(o,this);let r=this._cachedMeta;Ki(r),r._parsed=[]}n&&Object.isExtensible(n)&&wd(n,this),this._syncList=[],this._data=n}}addElements(){let e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){let n=this._cachedMeta,o=this.getDataset(),r=!1;this._dataCheck();let a=n._stacked;n._stacked=Ha(n.vScale,n),n.stack!==o.stack&&(r=!0,Ki(n),n.stack=o.stack),this._resyncElements(e),(r||a!==n._stacked)&&(nl(this,n._parsed),n._stacked=Ha(n.vScale,n))}configure(){let e=this.chart.config,n=e.datasetScopeKeys(this._type),o=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(o,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){let{_cachedMeta:o,_data:r}=this,{iScale:a,_stacked:l}=o,m=a.axis,u=e===0&&n===r.length?!0:o._sorted,f=e>0&&o._parsed[e-1],x,P,k;if(this._parsing===!1)o._parsed=r,o._sorted=!0,k=r;else{We(r[e])?k=this.parseArrayData(o,r,e,n):xe(r[e])?k=this.parseObjectData(o,r,e,n):k=this.parsePrimitiveData(o,r,e,n);let I=()=>P[m]===null||f&&P[m]<f[m];for(x=0;x<n;++x)o._parsed[x+e]=P=k[x],u&&(I()&&(u=!1),f=P);o._sorted=u}l&&nl(this,k)}parsePrimitiveData(e,n,o,r){let{iScale:a,vScale:l}=e,m=a.axis,u=l.axis,f=a.getLabels(),x=a===l,P=new Array(r),k,I,F;for(k=0,I=r;k<I;++k)F=k+o,P[k]={[m]:x||a.parse(f[F],F),[u]:l.parse(n[F],F)};return P}parseArrayData(e,n,o,r){let{xScale:a,yScale:l}=e,m=new Array(r),u,f,x,P;for(u=0,f=r;u<f;++u)x=u+o,P=n[x],m[u]={x:a.parse(P[0],x),y:l.parse(P[1],x)};return m}parseObjectData(e,n,o,r){let{xScale:a,yScale:l}=e,{xAxisKey:m="x",yAxisKey:u="y"}=this._parsing,f=new Array(r),x,P,k,I;for(x=0,P=r;x<P;++x)k=x+o,I=n[k],f[x]={x:a.parse(Rn(I,m),k),y:l.parse(Rn(I,u),k)};return f}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,o){let r=this.chart,a=this._cachedMeta,l=n[e.axis],m={keys:jl(r,!0),values:n._stacks[e.axis]._visualValues};return el(m,l,a.index,{mode:o})}updateRangeFromParsed(e,n,o,r){let a=o[n.axis],l=a===null?NaN:a,m=r&&o._stacks[n.axis];r&&m&&(r.values=m,l=el(r,a,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,n){let o=this._cachedMeta,r=o._parsed,a=o._sorted&&e===o.iScale,l=r.length,m=this._getOtherScale(e),u=Km(n,o,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:x,max:P}=Wm(m),k,I;function F(){I=r[k];let D=I[m.axis];return!rt(I[e.axis])||x>D||P<D}for(k=0;k<l&&!(!F()&&(this.updateRangeFromParsed(f,e,I,u),a));++k);if(a){for(k=l-1;k>=0;--k)if(!F()){this.updateRangeFromParsed(f,e,I,u);break}}return f}getAllParsedValues(e){let n=this._cachedMeta._parsed,o=[],r,a,l;for(r=0,a=n.length;r<a;++r)l=n[r][e.axis],rt(l)&&o.push(l);return o}getMaxOverflow(){return!1}getLabelAndValue(e){let n=this._cachedMeta,o=n.iScale,r=n.vScale,a=this.getParsed(e);return{label:o?""+o.getLabelForValue(a[o.axis]):"",value:r?""+r.getLabelForValue(a[r.axis]):""}}_update(e){let n=this._cachedMeta;this.update(e||"default"),n._clip=Um(Ce(this.options.clip,jm(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){let e=this._ctx,n=this.chart,o=this._cachedMeta,r=o.data||[],a=n.chartArea,l=[],m=this._drawStart||0,u=this._drawCount||r.length-m,f=this.options.drawActiveElementsOnTop,x;for(o.dataset&&o.dataset.draw(e,a,m,u),x=m;x<m+u;++x){let P=r[x];P.hidden||(P.active&&f?l.push(P):P.draw(e,a))}for(x=0;x<l.length;++x)l[x].draw(e,a)}getStyle(e,n){let o=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(o):this.resolveDataElementOptions(e||0,o)}getContext(e,n,o){let r=this.getDataset(),a;if(e>=0&&e<this._cachedMeta.data.length){let l=this._cachedMeta.data[e];a=l.$context||(l.$context=Ym(this.getContext(),e,l)),a.parsed=this.getParsed(e),a.raw=r.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=$m(this.chart.getContext(),this.index)),a.dataset=r,a.index=a.datasetIndex=this.index;return a.active=!!n,a.mode=o,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",o){let r=n==="active",a=this._cachedDataOpts,l=e+"-"+n,m=a[l],u=this.enableOptionSharing&&xi(o);if(m)return il(m,u);let f=this.chart.config,x=f.datasetElementScopeKeys(this._type,e),P=r?[`${e}Hover`,"hover",e,""]:[e,""],k=f.getOptionScopes(this.getDataset(),x),I=Object.keys(Ke.elements[e]),F=()=>this.getContext(o,r,n),D=f.resolveNamedOptions(k,I,F,P);return D.$shared&&(D.$shared=u,a[l]=Object.freeze(il(D,u))),D}_resolveAnimations(e,n,o){let r=this.chart,a=this._cachedDataOpts,l=`animation-${n}`,m=a[l];if(m)return m;let u;if(r.options.animation!==!1){let x=this.chart.config,P=x.datasetAnimationScopeKeys(this._type,n),k=x.getOptionScopes(this.getDataset(),P);u=x.createResolver(k,this.getContext(e,o,n))}let f=new is(r,u&&u.animations);return u&&u._cacheable&&(a[l]=Object.freeze(f)),f}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Ya(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){let o=this.resolveDataElementOptions(e,n),r=this._sharedOptions,a=this.getSharedOptions(o),l=this.includeOptions(n,a)||a!==r;return this.updateSharedOptions(a,n,o),{sharedOptions:a,includeOptions:l}}updateElement(e,n,o,r){Ya(r)?Object.assign(e,o):this._resolveAnimations(n,r).update(e,o)}updateSharedOptions(e,n,o){e&&!Ya(n)&&this._resolveAnimations(void 0,n).update(e,o)}_setStyle(e,n,o,r){e.active=r;let a=this.getStyle(n,r);this._resolveAnimations(n,o,r).update(e,{options:!r&&this.getSharedOptions(a)||a})}removeHoverStyle(e,n,o){this._setStyle(e,o,"active",!1)}setHoverStyle(e,n,o){this._setStyle(e,o,"active",!0)}_removeDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){let n=this._data,o=this._cachedMeta.data;for(let[m,u,f]of this._syncList)this[m](u,f);this._syncList=[];let r=o.length,a=n.length,l=Math.min(a,r);l&&this.parse(0,l),a>r?this._insertElements(r,a-r,e):a<r&&this._removeElements(a,r-a)}_insertElements(e,n,o=!0){let r=this._cachedMeta,a=r.data,l=e+n,m,u=f=>{for(f.length+=n,m=f.length-1;m>=l;m--)f[m]=f[m-n]};for(u(a),m=e;m<l;++m)a[m]=new this.dataElementType;this._parsing&&u(r._parsed),this.parse(e,n),o&&this.updateElements(a,e,n,"reset")}updateElements(e,n,o,r){}_removeElements(e,n){let o=this._cachedMeta;if(this._parsing){let r=o._parsed.splice(e,n);o._stacked&&Ki(o,r)}o.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{let[n,o,r]=e;this[n](o,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){let e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);let o=arguments.length-2;o&&this._sync(["_insertElements",e,o])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return i})();function Xm(i,t){if(!i._cache.$bar){let e=i.getMatchingVisibleMetas(t),n=[];for(let o=0,r=e.length;o<r;o++)n=n.concat(e[o].controller.getAllParsedValues(i));i._cache.$bar=Ia(n.sort((o,r)=>o-r))}return i._cache.$bar}function Qm(i){let t=i.iScale,e=Xm(t,i.type),n=t._length,o,r,a,l,m=()=>{a===32767||a===-32768||(xi(l)&&(n=Math.min(n,Math.abs(a-l)||n)),l=a)};for(o=0,r=e.length;o<r;++o)a=t.getPixelForValue(e[o]),m();for(l=void 0,o=0,r=t.ticks.length;o<r;++o)a=t.getPixelForTick(o),m();return n}function Jm(i,t,e,n){let o=e.barThickness,r,a;return ve(o)?(r=t.min*e.categoryPercentage,a=e.barPercentage):(r=o*n,a=1),{chunk:r/n,ratio:a,start:t.pixels[i]-r/2}}function Zm(i,t,e,n){let o=t.pixels,r=o[i],a=i>0?o[i-1]:null,l=i<o.length-1?o[i+1]:null,m=e.categoryPercentage;a===null&&(a=r-(l===null?t.end-t.start:l-r)),l===null&&(l=r+r-a);let u=r-(r-Math.min(a,l))/2*m;return{chunk:Math.abs(l-a)/2*m/n,ratio:e.barPercentage,start:u}}function eg(i,t,e,n){let o=e.parse(i[0],n),r=e.parse(i[1],n),a=Math.min(o,r),l=Math.max(o,r),m=a,u=l;Math.abs(a)>Math.abs(l)&&(m=l,u=a),t[e.axis]=u,t._custom={barStart:m,barEnd:u,start:o,end:r,min:a,max:l}}function Ul(i,t,e,n){return We(i)?eg(i,t,e,n):t[e.axis]=e.parse(i,n),t}function ol(i,t,e,n){let o=i.iScale,r=i.vScale,a=o.getLabels(),l=o===r,m=[],u,f,x,P;for(u=e,f=e+n;u<f;++u)P=t[u],x={},x[o.axis]=l||o.parse(a[u],u),m.push(Ul(P,x,r,u));return m}function Ka(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function tg(i,t,e){return i!==0?qt(i):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function ng(i){let t,e,n,o,r;return i.horizontal?(t=i.base>i.x,e="left",n="right"):(t=i.base<i.y,e="bottom",n="top"),t?(o="end",r="start"):(o="start",r="end"),{start:e,end:n,reverse:t,top:o,bottom:r}}function ig(i,t,e,n){let o=t.borderSkipped,r={};if(!o){i.borderSkipped=r;return}if(o===!0){i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:a,end:l,reverse:m,top:u,bottom:f}=ng(i);o==="middle"&&e&&(i.enableBorderRadius=!0,(e._top||0)===n?o=u:(e._bottom||0)===n?o=f:(r[rl(f,a,l,m)]=!0,o=u)),r[rl(o,a,l,m)]=!0,i.borderSkipped=r}function rl(i,t,e,n){return n?(i=og(i,t,e),i=al(i,e,t)):i=al(i,t,e),i}function og(i,t,e){return i===t?e:i===e?t:i}function al(i,t,e){return i==="start"?t:i==="end"?e:i}function rg(i,{inflateAmount:t},e){i.inflateAmount=t==="auto"?e===1?.33:0:t}var Gl=(()=>{class i extends rr{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,n,o,r){return ol(e,n,o,r)}parseArrayData(e,n,o,r){return ol(e,n,o,r)}parseObjectData(e,n,o,r){let{iScale:a,vScale:l}=e,{xAxisKey:m="x",yAxisKey:u="y"}=this._parsing,f=a.axis==="x"?m:u,x=l.axis==="x"?m:u,P=[],k,I,F,D;for(k=o,I=o+r;k<I;++k)D=n[k],F={},F[a.axis]=a.parse(Rn(D,f),k),P.push(Ul(Rn(D,x),F,l,k));return P}updateRangeFromParsed(e,n,o,r){super.updateRangeFromParsed(e,n,o,r);let a=o._custom;a&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(e){let n=this._cachedMeta,{iScale:o,vScale:r}=n,a=this.getParsed(e),l=a._custom,m=Ka(l)?"["+l.start+", "+l.end+"]":""+r.getLabelForValue(a[r.axis]);return{label:""+o.getLabelForValue(a[o.axis]),value:m}}initialize(){this.enableOptionSharing=!0,super.initialize();let e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){let n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,o,r){let a=r==="reset",{index:l,_cachedMeta:{vScale:m}}=this,u=m.getBasePixel(),f=m.isHorizontal(),x=this._getRuler(),{sharedOptions:P,includeOptions:k}=this._getSharedOptions(n,r);for(let I=n;I<n+o;I++){let F=this.getParsed(I),D=a||ve(F[m.axis])?{base:u,head:u}:this._calculateBarValuePixels(I),V=this._calculateBarIndexPixels(I,x),B=(F._stacks||{})[m.axis],$={horizontal:f,base:D.base,enableBorderRadius:!B||Ka(F._custom)||l===B._top||l===B._bottom,x:f?D.head:V.center,y:f?V.center:D.head,height:f?V.size:Math.abs(D.size),width:f?Math.abs(D.size):V.size};k&&($.options=P||this.resolveDataElementOptions(I,e[I].active?"active":r));let J=$.options||e[I].options;ig($,J,B,l),rg($,J,x.ratio),this.updateElement(e[I],I,$,r)}}_getStacks(e,n){let{iScale:o}=this._cachedMeta,r=o.getMatchingVisibleMetas(this._type).filter(x=>x.controller.options.grouped),a=o.options.stacked,l=[],m=this._cachedMeta.controller.getParsed(n),u=m&&m[o.axis],f=x=>{let P=x._parsed.find(I=>I[o.axis]===u),k=P&&P[x.vScale.axis];if(ve(k)||isNaN(k))return!0};for(let x of r)if(!(n!==void 0&&f(x))&&((a===!1||l.indexOf(x.stack)===-1||a===void 0&&x.stack===void 0)&&l.push(x.stack),x.index===e))break;return l.length||l.push(void 0),l}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(o=>e[o].axis===n).shift()}_getAxis(){let e={},n=this.getFirstScaleIdForIndexAxis();for(let o of this.chart.data.datasets)e[Ce(this.chart.options.indexAxis==="x"?o.xAxisID:o.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,o){let r=this._getStacks(e,o),a=n!==void 0?r.indexOf(n):-1;return a===-1?r.length-1:a}_getRuler(){let e=this.options,n=this._cachedMeta,o=n.iScale,r=[],a,l;for(a=0,l=n.data.length;a<l;++a)r.push(o.getPixelForValue(this.getParsed(a)[o.axis],a));let m=e.barThickness;return{min:m||Qm(n),pixels:r,start:o._startPixel,end:o._endPixel,stackCount:this._getStackCount(),scale:o,grouped:e.grouped,ratio:m?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){let{_cachedMeta:{vScale:n,_stacked:o,index:r},options:{base:a,minBarLength:l}}=this,m=a||0,u=this.getParsed(e),f=u._custom,x=Ka(f),P=u[n.axis],k=0,I=o?this.applyStack(n,u,o):P,F,D;I!==P&&(k=I-P,I=P),x&&(P=f.barStart,I=f.barEnd-f.barStart,P!==0&&qt(P)!==qt(f.barEnd)&&(k=0),k+=P);let V=!ve(a)&&!x?a:k,B=n.getPixelForValue(V);if(this.chart.getDataVisibility(e)?F=n.getPixelForValue(k+I):F=B,D=F-B,Math.abs(D)<l){D=tg(D,n,m)*l,P===m&&(B-=D/2);let $=n.getPixelForDecimal(0),J=n.getPixelForDecimal(1),q=Math.min($,J),K=Math.max($,J);B=Math.max(Math.min(B,K),q),F=B+D,o&&!x&&(u._stacks[n.axis]._visualValues[r]=n.getValueForPixel(F)-n.getValueForPixel(B))}if(B===n.getPixelForValue(m)){let $=qt(D)*n.getLineWidthForValue(m)/2;B+=$,D-=$}return{size:D,base:B,head:F,center:F+D/2}}_calculateBarIndexPixels(e,n){let o=n.scale,r=this.options,a=r.skipNull,l=Ce(r.maxBarThickness,1/0),m,u,f=this._getAxisCount();if(n.grouped){let x=a?this._getStackCount(e):n.stackCount,P=r.barThickness==="flex"?Zm(e,n,r,x*f):Jm(e,n,r,x*f),k=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,I=this._getAxis().indexOf(Ce(k,this.getFirstScaleIdForIndexAxis())),F=this._getStackIndex(this.index,this._cachedMeta.stack,a?e:void 0)+I;m=P.start+P.chunk*F+P.chunk/2,u=Math.min(l,P.chunk*P.ratio)}else m=o.getPixelForValue(this.getParsed(e)[o.axis],e),u=Math.min(l,n.min*n.ratio);return{base:m-u/2,head:m+u/2,center:m,size:u}}draw(){let e=this._cachedMeta,n=e.vScale,o=e.data,r=o.length,a=0;for(;a<r;++a)this.getParsed(a)[n.axis]!==null&&!o[a].hidden&&o[a].draw(this._ctx)}}return i})();function ag(i,t,e){let n=1,o=1,r=0,a=0;if(t<Be){let l=i,m=l+t,u=Math.cos(l),f=Math.sin(l),x=Math.cos(m),P=Math.sin(m),k=($,J,q)=>Mi($,l,m,!0)?1:Math.max(J,J*e,q,q*e),I=($,J,q)=>Mi($,l,m,!0)?-1:Math.min(J,J*e,q,q*e),F=k(0,u,x),D=k(Ye,f,P),V=I(ke,u,x),B=I(ke+Ye,f,P);n=(F-V)/2,o=(D-B)/2,r=-(F+V)/2,a=-(D+B)/2}return{ratioX:n,ratioY:o,offsetX:r,offsetY:a}}var ar=(()=>{class i extends rr{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let n=e.data,{labels:{pointStyle:o,textAlign:r,color:a,useBorderRadius:l,borderRadius:m}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((u,f)=>{let P=e.getDatasetMeta(0).controller.getStyle(f);return{text:u,fillStyle:P.backgroundColor,fontColor:a,hidden:!e.getDataVisibility(f),lineDash:P.borderDash,lineDashOffset:P.borderDashOffset,lineJoin:P.borderJoinStyle,lineWidth:P.borderWidth,strokeStyle:P.borderColor,textAlign:r,pointStyle:o,borderRadius:l&&(m||P.borderRadius),index:f}}):[]}},onClick(e,n,o){o.chart.toggleDataVisibility(n.index),o.chart.update()}}}};constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){let o=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=o;else{let a=u=>+o[u];if(xe(o[e])){let{key:u="value"}=this._parsing;a=f=>+Rn(o[f],u)}let l,m;for(l=e,m=e+n;l<m;++l)r._parsed[l]=a(l)}}_getRotation(){return Wt(this.options.rotation-90)}_getCircumference(){return Wt(this.options.circumference)}_getRotationExtents(){let e=Be,n=-Be;for(let o=0;o<this.chart.data.datasets.length;++o)if(this.chart.isDatasetVisible(o)&&this.chart.getDatasetMeta(o).type===this._type){let r=this.chart.getDatasetMeta(o).controller,a=r._getRotation(),l=r._getCircumference();e=Math.min(e,a),n=Math.max(n,a+l)}return{rotation:e,circumference:n-e}}update(e){let n=this.chart,{chartArea:o}=n,r=this._cachedMeta,a=r.data,l=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,m=Math.max((Math.min(o.width,o.height)-l)/2,0),u=Math.min(hd(this.options.cutout,m),1),f=this._getRingWeight(this.index),{circumference:x,rotation:P}=this._getRotationExtents(),{ratioX:k,ratioY:I,offsetX:F,offsetY:D}=ag(P,x,u),V=(o.width-l)/k,B=(o.height-l)/I,$=Math.max(Math.min(V,B)/2,0),J=xa(this.options.radius,$),q=Math.max(J*u,0),K=(J-q)/this._getVisibleDatasetWeightTotal();this.offsetX=F*J,this.offsetY=D*J,r.total=this.calculateTotal(),this.outerRadius=J-K*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-K*f,0),this.updateElements(a,0,a.length,e)}_circumference(e,n){let o=this.options,r=this._cachedMeta,a=this._getCircumference();return n&&o.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*a/Be)}updateElements(e,n,o,r){let a=r==="reset",l=this.chart,m=l.chartArea,f=l.options.animation,x=(m.left+m.right)/2,P=(m.top+m.bottom)/2,k=a&&f.animateScale,I=k?0:this.innerRadius,F=k?0:this.outerRadius,{sharedOptions:D,includeOptions:V}=this._getSharedOptions(n,r),B=this._getRotation(),$;for($=0;$<n;++$)B+=this._circumference($,a);for($=n;$<n+o;++$){let J=this._circumference($,a),q=e[$],K={x:x+this.offsetX,y:P+this.offsetY,startAngle:B,endAngle:B+J,circumference:J,outerRadius:F,innerRadius:I};V&&(K.options=D||this.resolveDataElementOptions($,q.active?"active":r)),B+=J,this.updateElement(q,$,K,r)}}calculateTotal(){let e=this._cachedMeta,n=e.data,o=0,r;for(r=0;r<n.length;r++){let a=e._parsed[r];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(o+=Math.abs(a))}return o}calculateCircumference(e){let n=this._cachedMeta.total;return n>0&&!isNaN(e)?Be*(Math.abs(e)/n):0}getLabelAndValue(e){let n=this._cachedMeta,o=this.chart,r=o.data.labels||[],a=Wi(n._parsed[e],o.options.locale);return{label:r[e]||"",value:a}}getMaxBorderWidth(e){let n=0,o=this.chart,r,a,l,m,u;if(!e){for(r=0,a=o.data.datasets.length;r<a;++r)if(o.isDatasetVisible(r)){l=o.getDatasetMeta(r),e=l.data,m=l.controller;break}}if(!e)return 0;for(r=0,a=e.length;r<a;++r)u=m.resolveDataElementOptions(r),u.borderAlign!=="inner"&&(n=Math.max(n,u.borderWidth||0,u.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let o=0,r=e.length;o<r;++o){let a=this.resolveDataElementOptions(o);n=Math.max(n,a.offset||0,a.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let o=0;o<e;++o)this.chart.isDatasetVisible(o)&&(n+=this._getRingWeight(o));return n}_getRingWeight(e){return Math.max(Ce(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return i})(),ql=(()=>{class i extends rr{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){let n=this._cachedMeta,{dataset:o,data:r=[],_dataset:a}=n,l=this.chart._animationsDisabled,{start:m,count:u}=Id(n,r,l);this._drawStart=m,this._drawCount=u,Td(n)&&(m=0,u=r.length),o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!a._decimated,o.points=r;let f=this.resolveDatasetElementOptions(e);this.options.showLine||(f.borderWidth=0),f.segment=this.options.segment,this.updateElement(o,void 0,{animated:!l,options:f},e),this.updateElements(r,m,u,e)}updateElements(e,n,o,r){let a=r==="reset",{iScale:l,vScale:m,_stacked:u,_dataset:f}=this._cachedMeta,{sharedOptions:x,includeOptions:P}=this._getSharedOptions(n,r),k=l.axis,I=m.axis,{spanGaps:F,segment:D}=this.options,V=yi(F)?F:Number.POSITIVE_INFINITY,B=this.chart._animationsDisabled||a||r==="none",$=n+o,J=e.length,q=n>0&&this.getParsed(n-1);for(let K=0;K<J;++K){let ae=e[K],ie=B?ae:{};if(K<n||K>=$){ie.skip=!0;continue}let re=this.getParsed(K),Ie=ve(re[I]),je=ie[k]=l.getPixelForValue(re[k],K),Ne=ie[I]=a||Ie?m.getBasePixel():m.getPixelForValue(u?this.applyStack(m,re,u):re[I],K);ie.skip=isNaN(je)||isNaN(Ne)||Ie,ie.stop=K>0&&Math.abs(re[k]-q[k])>V,D&&(ie.parsed=re,ie.raw=f.data[K]),P&&(ie.options=x||this.resolveDataElementOptions(K,ae.active?"active":r)),B||this.updateElement(ae,K,ie,r),q=re}}getMaxOverflow(){let e=this._cachedMeta,n=e.dataset,o=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return o;let a=r[0].size(this.resolveDataElementOptions(0)),l=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(o,a,l)/2}draw(){let e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}return i})();function Zn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var os=class i{static override(t){Object.assign(i.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Zn()}parse(){return Zn()}format(){return Zn()}add(){return Zn()}diff(){return Zn()}startOf(){return Zn()}endOf(){return Zn()}},sg={_date:os};function cg(i,t,e,n){let{controller:o,data:r,_sorted:a}=i,l=o._cachedMeta.iScale,m=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null;if(l&&t===l.axis&&t!=="r"&&a&&r.length){let u=l._reversePixels?yd:An;if(n){if(o._sharedOptions){let f=r[0],x=typeof f.getRange=="function"&&f.getRange(t);if(x){let P=u(r,t,e-x),k=u(r,t,e+x);return{lo:P.lo,hi:k.hi}}}}else{let f=u(r,t,e);if(m){let{vScale:x}=o._cachedMeta,{_parsed:P}=i,k=P.slice(0,f.lo+1).reverse().findIndex(F=>!ve(F[x.axis]));f.lo-=Math.max(0,k);let I=P.slice(f.hi).findIndex(F=>!ve(F[x.axis]));f.hi+=Math.max(0,I)}return f}}return{lo:0,hi:r.length-1}}function io(i,t,e,n,o){let r=i.getSortedVisibleDatasetMetas(),a=e[t];for(let l=0,m=r.length;l<m;++l){let{index:u,data:f}=r[l],{lo:x,hi:P}=cg(r[l],t,a,o);for(let k=x;k<=P;++k){let I=f[k];I.skip||n(I,u,k)}}}function dg(i){let t=i.indexOf("x")!==-1,e=i.indexOf("y")!==-1;return function(n,o){let r=t?Math.abs(n.x-o.x):0,a=e?Math.abs(n.y-o.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(a,2))}}function Xa(i,t,e,n,o){let r=[];return!o&&!i.isPointInArea(t)||io(i,e,t,function(l,m,u){!o&&!sn(l,i.chartArea,0)||l.inRange(t.x,t.y,n)&&r.push({element:l,datasetIndex:m,index:u})},!0),r}function lg(i,t,e,n){let o=[];function r(a,l,m){let{startAngle:u,endAngle:f}=a.getProps(["startAngle","endAngle"],n),{angle:x}=Sa(a,{x:t.x,y:t.y});Mi(x,u,f)&&o.push({element:a,datasetIndex:l,index:m})}return io(i,e,t,r),o}function pg(i,t,e,n,o,r){let a=[],l=dg(e),m=Number.POSITIVE_INFINITY;function u(f,x,P){let k=f.inRange(t.x,t.y,o);if(n&&!k)return;let I=f.getCenterPoint(o);if(!(!!r||i.isPointInArea(I))&&!k)return;let D=l(t,I);D<m?(a=[{element:f,datasetIndex:x,index:P}],m=D):D===m&&a.push({element:f,datasetIndex:x,index:P})}return io(i,e,t,u),a}function Qa(i,t,e,n,o,r){return!r&&!i.isPointInArea(t)?[]:e==="r"&&!n?lg(i,t,e,o):pg(i,t,e,n,o,r)}function sl(i,t,e,n,o){let r=[],a=e==="x"?"inXRange":"inYRange",l=!1;return io(i,e,t,(m,u,f)=>{m[a]&&m[a](t[e],o)&&(r.push({element:m,datasetIndex:u,index:f}),l=l||m.inRange(t.x,t.y,o))}),n&&!l?[]:r}var mg={evaluateInteractionItems:io,modes:{index(i,t,e,n){let o=Bn(t,i),r=e.axis||"x",a=e.includeInvisible||!1,l=e.intersect?Xa(i,o,r,n,a):Qa(i,o,r,!1,n,a),m=[];return l.length?(i.getSortedVisibleDatasetMetas().forEach(u=>{let f=l[0].index,x=u.data[f];x&&!x.skip&&m.push({element:x,datasetIndex:u.index,index:f})}),m):[]},dataset(i,t,e,n){let o=Bn(t,i),r=e.axis||"xy",a=e.includeInvisible||!1,l=e.intersect?Xa(i,o,r,n,a):Qa(i,o,r,!1,n,a);if(l.length>0){let m=l[0].datasetIndex,u=i.getDatasetMeta(m).data;l=[];for(let f=0;f<u.length;++f)l.push({element:u[f],datasetIndex:m,index:f})}return l},point(i,t,e,n){let o=Bn(t,i),r=e.axis||"xy",a=e.includeInvisible||!1;return Xa(i,o,r,n,a)},nearest(i,t,e,n){let o=Bn(t,i),r=e.axis||"xy",a=e.includeInvisible||!1;return Qa(i,o,r,e.intersect,n,a)},x(i,t,e,n){let o=Bn(t,i);return sl(i,o,"x",e.intersect,n)},y(i,t,e,n){let o=Bn(t,i);return sl(i,o,"y",e.intersect,n)}}},Wl=["left","top","right","bottom"];function Xi(i,t){return i.filter(e=>e.pos===t)}function cl(i,t){return i.filter(e=>Wl.indexOf(e.pos)===-1&&e.box.axis===t)}function Qi(i,t){return i.sort((e,n)=>{let o=t?n:e,r=t?e:n;return o.weight===r.weight?o.index-r.index:o.weight-r.weight})}function gg(i){let t=[],e,n,o,r,a,l;for(e=0,n=(i||[]).length;e<n;++e)o=i[e],{position:r,options:{stack:a,stackWeight:l=1}}=o,t.push({index:e,box:o,pos:r,horizontal:o.isHorizontal(),weight:o.weight,stack:a&&r+a,stackWeight:l});return t}function ug(i){let t={};for(let e of i){let{stack:n,pos:o,stackWeight:r}=e;if(!n||!Wl.includes(o))continue;let a=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=r}return t}function fg(i,t){let e=ug(i),{vBoxMaxWidth:n,hBoxMaxHeight:o}=t,r,a,l;for(r=0,a=i.length;r<a;++r){l=i[r];let{fullSize:m}=l.box,u=e[l.stack],f=u&&l.stackWeight/u.weight;l.horizontal?(l.width=f?f*n:m&&t.availableWidth,l.height=o):(l.width=n,l.height=f?f*o:m&&t.availableHeight)}return e}function _g(i){let t=gg(i),e=Qi(t.filter(u=>u.box.fullSize),!0),n=Qi(Xi(t,"left"),!0),o=Qi(Xi(t,"right")),r=Qi(Xi(t,"top"),!0),a=Qi(Xi(t,"bottom")),l=cl(t,"x"),m=cl(t,"y");return{fullSize:e,leftAndTop:n.concat(r),rightAndBottom:o.concat(m).concat(a).concat(l),chartArea:Xi(t,"chartArea"),vertical:n.concat(o).concat(m),horizontal:r.concat(a).concat(l)}}function dl(i,t,e,n){return Math.max(i[e],t[e])+Math.max(i[n],t[n])}function Hl(i,t){i.top=Math.max(i.top,t.top),i.left=Math.max(i.left,t.left),i.bottom=Math.max(i.bottom,t.bottom),i.right=Math.max(i.right,t.right)}function hg(i,t,e,n){let{pos:o,box:r}=e,a=i.maxPadding;if(!xe(o)){e.size&&(i[o]-=e.size);let x=n[e.stack]||{size:0,count:1};x.size=Math.max(x.size,e.horizontal?r.height:r.width),e.size=x.size/x.count,i[o]+=e.size}r.getPadding&&Hl(a,r.getPadding());let l=Math.max(0,t.outerWidth-dl(a,i,"left","right")),m=Math.max(0,t.outerHeight-dl(a,i,"top","bottom")),u=l!==i.w,f=m!==i.h;return i.w=l,i.h=m,e.horizontal?{same:u,other:f}:{same:f,other:u}}function bg(i){let t=i.maxPadding;function e(n){let o=Math.max(t[n]-i[n],0);return i[n]+=o,o}i.y+=e("top"),i.x+=e("left"),e("right"),e("bottom")}function Cg(i,t){let e=t.maxPadding;function n(o){let r={left:0,top:0,right:0,bottom:0};return o.forEach(a=>{r[a]=Math.max(t[a],e[a])}),r}return n(i?["left","right"]:["top","bottom"])}function eo(i,t,e,n){let o=[],r,a,l,m,u,f;for(r=0,a=i.length,u=0;r<a;++r){l=i[r],m=l.box,m.update(l.width||t.w,l.height||t.h,Cg(l.horizontal,t));let{same:x,other:P}=hg(t,e,l,n);u|=x&&o.length,f=f||P,m.fullSize||o.push(l)}return u&&eo(o,t,e,n)||f}function $o(i,t,e,n,o){i.top=e,i.left=t,i.right=t+n,i.bottom=e+o,i.width=n,i.height=o}function ll(i,t,e,n){let o=e.padding,{x:r,y:a}=t;for(let l of i){let m=l.box,u=n[l.stack]||{count:1,placed:0,weight:1},f=l.stackWeight/u.weight||1;if(l.horizontal){let x=t.w*f,P=u.size||m.height;xi(u.start)&&(a=u.start),m.fullSize?$o(m,o.left,a,e.outerWidth-o.right-o.left,P):$o(m,t.left+u.placed,a,x,P),u.start=a,u.placed+=x,a=m.bottom}else{let x=t.h*f,P=u.size||m.width;xi(u.start)&&(r=u.start),m.fullSize?$o(m,r,o.top,P,e.outerHeight-o.bottom-o.top):$o(m,r,t.top+u.placed,P,x),u.start=r,u.placed+=x,r=m.right}}t.x=r,t.y=a}var Yo={addBox(i,t){i.boxes||(i.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},i.boxes.push(t)},removeBox(i,t){let e=i.boxes?i.boxes.indexOf(t):-1;e!==-1&&i.boxes.splice(e,1)},configure(i,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(i,t,e,n){if(!i)return;let o=cn(i.options.layout.padding),r=Math.max(t-o.width,0),a=Math.max(e-o.height,0),l=_g(i.boxes),m=l.vertical,u=l.horizontal;ut(i.boxes,F=>{typeof F.beforeLayout=="function"&&F.beforeLayout()});let f=m.reduce((F,D)=>D.box.options&&D.box.options.display===!1?F:F+1,0)||1,x=Object.freeze({outerWidth:t,outerHeight:e,padding:o,availableWidth:r,availableHeight:a,vBoxMaxWidth:r/2/f,hBoxMaxHeight:a/2}),P=Object.assign({},o);Hl(P,cn(n));let k=Object.assign({maxPadding:P,w:r,h:a,x:o.left,y:o.top},o),I=fg(m.concat(u),x);eo(l.fullSize,k,x,I),eo(m,k,x,I),eo(u,k,x,I)&&eo(m,k,x,I),bg(k),ll(l.leftAndTop,k,x,I),k.x+=k.w,k.y+=k.h,ll(l.rightAndBottom,k,x,I),i.chartArea={left:k.left,top:k.top,right:k.left+k.w,bottom:k.top+k.h,height:k.h,width:k.w},ut(l.chartArea,F=>{let D=F.box;Object.assign(D,i.chartArea),D.update(k.w,k.h,{left:0,top:0,right:0,bottom:0})})}},er=class{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,o){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,o?Math.floor(e/o):n)}}isAttached(t){return!0}updateConfig(t){}},rs=class extends er{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}},Jo="$chartjs",vg={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},pl=i=>i===null||i==="";function xg(i,t){let e=i.style,n=i.getAttribute("height"),o=i.getAttribute("width");if(i[Jo]={initial:{height:n,width:o,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",pl(o)){let r=Wa(i,"width");r!==void 0&&(i.width=r)}if(pl(n))if(i.style.height==="")i.height=i.width/(t||2);else{let r=Wa(i,"height");r!==void 0&&(i.height=r)}return i}var $l=qd?{passive:!0}:!1;function Pg(i,t,e){i&&i.addEventListener(t,e,$l)}function yg(i,t,e){i&&i.canvas&&i.canvas.removeEventListener(t,e,$l)}function Mg(i,t){let e=vg[i.type]||i.type,{x:n,y:o}=Bn(i,t);return{type:e,chart:t,native:i,x:n!==void 0?n:null,y:o!==void 0?o:null}}function tr(i,t){for(let e of i)if(e===t||e.contains(t))return!0}function Og(i,t,e){let n=i.canvas,o=new MutationObserver(r=>{let a=!1;for(let l of r)a=a||tr(l.addedNodes,n),a=a&&!tr(l.removedNodes,n);a&&e()});return o.observe(document,{childList:!0,subtree:!0}),o}function wg(i,t,e){let n=i.canvas,o=new MutationObserver(r=>{let a=!1;for(let l of r)a=a||tr(l.removedNodes,n),a=a&&!tr(l.addedNodes,n);a&&e()});return o.observe(document,{childList:!0,subtree:!0}),o}var to=new Map,ml=0;function Yl(){let i=window.devicePixelRatio;i!==ml&&(ml=i,to.forEach((t,e)=>{e.currentDevicePixelRatio!==i&&t()}))}function Sg(i,t){to.size||window.addEventListener("resize",Yl),to.set(i,t)}function kg(i){to.delete(i),to.size||window.removeEventListener("resize",Yl)}function Ig(i,t,e){let n=i.canvas,o=n&&Wo(n);if(!o)return;let r=Ea((l,m)=>{let u=o.clientWidth;e(l,m),u<o.clientWidth&&e()},window),a=new ResizeObserver(l=>{let m=l[0],u=m.contentRect.width,f=m.contentRect.height;u===0&&f===0||r(u,f)});return a.observe(o),Sg(i,r),a}function Ja(i,t,e){e&&e.disconnect(),t==="resize"&&kg(i)}function Tg(i,t,e){let n=i.canvas,o=Ea(r=>{i.ctx!==null&&e(Mg(r,i))},i);return Pg(n,t,o),o}var as=class extends er{acquireContext(t,e){let n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(xg(t,e),n):null}releaseContext(t){let e=t.canvas;if(!e[Jo])return!1;let n=e[Jo].initial;["height","width"].forEach(r=>{let a=n[r];ve(a)?e.removeAttribute(r):e.setAttribute(r,a)});let o=n.style||{};return Object.keys(o).forEach(r=>{e.style[r]=o[r]}),e.width=e.width,delete e[Jo],!0}addEventListener(t,e,n){this.removeEventListener(t,e);let o=t.$proxies||(t.$proxies={}),a={attach:Og,detach:wg,resize:Ig}[e]||Tg;o[e]=a(t,e,n)}removeEventListener(t,e){let n=t.$proxies||(t.$proxies={}),o=n[e];if(!o)return;({attach:Ja,detach:Ja,resize:Ja}[e]||yg)(t,e,o),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,o){return Gd(t,e,n,o)}isAttached(t){let e=t&&Wo(t);return!!(e&&e.isConnected)}};function Eg(i){return!qo()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?rs:as}var Un=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){let{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return yi(this.x)&&yi(this.y)}getProps(t,e){let n=this.$animations;if(!e||!n)return this;let o={};return t.forEach(r=>{o[r]=n[r]&&n[r].active()?n[r]._to:this[r]}),o}};function Fg(i,t){let e=i.options.ticks,n=Dg(i),o=Math.min(e.maxTicksLimit||n,n),r=e.major.enabled?Vg(t):[],a=r.length,l=r[0],m=r[a-1],u=[];if(a>o)return Rg(t,u,r,a/o),u;let f=Ag(r,t,o);if(a>0){let x,P,k=a>1?Math.round((m-l)/(a-1)):null;for(Ko(t,u,f,ve(k)?0:l-k,l),x=0,P=a-1;x<P;x++)Ko(t,u,f,r[x],r[x+1]);return Ko(t,u,f,m,ve(k)?t.length:m+k),u}return Ko(t,u,f),u}function Dg(i){let t=i.options.offset,e=i._tickSize(),n=i._length/e+(t?0:1),o=i._maxLength/e;return Math.floor(Math.min(n,o))}function Ag(i,t,e){let n=Lg(i),o=t.length/e;if(!n)return Math.max(o,1);let r=vd(n);for(let a=0,l=r.length-1;a<l;a++){let m=r[a];if(m>o)return m}return Math.max(o,1)}function Vg(i){let t=[],e,n;for(e=0,n=i.length;e<n;e++)i[e].major&&t.push(e);return t}function Rg(i,t,e,n){let o=0,r=e[0],a;for(n=Math.ceil(n),a=0;a<i.length;a++)a===r&&(t.push(i[a]),o++,r=e[o*n])}function Ko(i,t,e,n,o){let r=Ce(n,0),a=Math.min(Ce(o,i.length),i.length),l=0,m,u,f;for(e=Math.ceil(e),o&&(m=o-n,e=m/Math.floor(m/e)),f=r;f<0;)l++,f=Math.round(r+l*e);for(u=Math.max(r,0);u<a;u++)u===f&&(t.push(i[u]),l++,f=Math.round(r+l*e))}function Lg(i){let t=i.length,e,n;if(t<2)return!1;for(n=i[0],e=1;e<t;++e)if(i[e]-i[e-1]!==n)return!1;return n}var zg=i=>i==="left"?"right":i==="right"?"left":i,gl=(i,t,e)=>t==="top"||t==="left"?i[t]+e:i[t]-e,ul=(i,t)=>Math.min(t||i,i);function fl(i,t){let e=[],n=i.length/t,o=i.length,r=0;for(;r<o;r+=n)e.push(i[Math.floor(r)]);return e}function Ng(i,t,e){let n=i.ticks.length,o=Math.min(t,n-1),r=i._startPixel,a=i._endPixel,l=1e-6,m=i.getPixelForTick(o),u;if(!(e&&(n===1?u=Math.max(m-r,a-m):t===0?u=(i.getPixelForTick(1)-m)/2:u=(m-i.getPixelForTick(o-1))/2,m+=o<t?u:-u,m<r-l||m>a+l)))return m}function Bg(i,t){ut(i,e=>{let n=e.gc,o=n.length/2,r;if(o>t){for(r=0;r<o;++r)delete e.data[n[r]];n.splice(0,o)}})}function Ji(i){return i.drawTicks?i.tickLength:0}function _l(i,t){if(!i.display)return 0;let e=Jn(i.font,t),n=cn(i.padding);return(We(i.text)?i.text.length:1)*e.lineHeight+n.height}function jg(i,t){return Nn(i,{scale:t,type:"scale"})}function Ug(i,t,e){return Nn(i,{tick:e,index:t,type:"tick"})}function Gg(i,t,e){let n=kd(i);return(e&&t!=="right"||!e&&t==="right")&&(n=zg(n)),n}function qg(i,t,e,n){let{top:o,left:r,bottom:a,right:l,chart:m}=i,{chartArea:u,scales:f}=m,x=0,P,k,I,F=a-o,D=l-r;if(i.isHorizontal()){if(k=Fa(n,r,l),xe(e)){let V=Object.keys(e)[0],B=e[V];I=f[V].getPixelForValue(B)+F-t}else e==="center"?I=(u.bottom+u.top)/2+F-t:I=gl(i,e,t);P=l-r}else{if(xe(e)){let V=Object.keys(e)[0],B=e[V];k=f[V].getPixelForValue(B)-D+t}else e==="center"?k=(u.left+u.right)/2-D+t:k=gl(i,e,t);I=Fa(n,a,o),x=e==="left"?-Ye:Ye}return{titleX:k,titleY:I,maxWidth:P,rotation:x}}var ti=class i extends Un{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:o}=this;return t=Tt(t,Number.POSITIVE_INFINITY),e=Tt(e,Number.NEGATIVE_INFINITY),n=Tt(n,Number.POSITIVE_INFINITY),o=Tt(o,Number.NEGATIVE_INFINITY),{min:Tt(t,n),max:Tt(e,o),minDefined:rt(t),maxDefined:rt(e)}}getMinMax(t){let{min:e,max:n,minDefined:o,maxDefined:r}=this.getUserBounds(),a;if(o&&r)return{min:e,max:n};let l=this.getMatchingVisibleMetas();for(let m=0,u=l.length;m<u;++m)a=l[m].controller.getMinMax(this,t),o||(e=Math.min(e,a.min)),r||(n=Math.max(n,a.max));return e=r&&e>n?n:e,n=o&&e>n?e:n,{min:Tt(e,Tt(n,e)),max:Tt(n,Tt(e,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){He(this.options.beforeUpdate,[this])}update(t,e,n){let{beginAtZero:o,grace:r,ticks:a}=this.options,l=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Ld(this,r,o),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let m=l<this.ticks.length;this._convertTicksToLabels(m?fl(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=Fg(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),m&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,n;this.isHorizontal()?(e=this.left,n=this.right):(e=this.top,n=this.bottom,t=!t),this._startPixel=e,this._endPixel=n,this._reversePixels=t,this._length=n-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){He(this.options.afterUpdate,[this])}beforeSetDimensions(){He(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){He(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),He(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){He(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){let e=this.options.ticks,n,o,r;for(n=0,o=t.length;n<o;n++)r=t[n],r.label=He(e.callback,[r.value,n,t],this)}afterTickToLabelConversion(){He(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){He(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let t=this.options,e=t.ticks,n=ul(this.ticks.length,t.ticks.maxTicksLimit),o=e.minRotation||0,r=e.maxRotation,a=o,l,m,u;if(!this._isVisible()||!e.display||o>=r||n<=1||!this.isHorizontal()){this.labelRotation=o;return}let f=this._getLabelSizes(),x=f.widest.width,P=f.highest.height,k=wt(this.chart.width-x,0,this.maxWidth);l=t.offset?this.maxWidth/n:k/(n-1),x+6>l&&(l=k/(n-(t.offset?.5:1)),m=this.maxHeight-Ji(t.grid)-e.padding-_l(t.title,this.chart.options.font),u=Math.sqrt(x*x+P*P),a=No(Math.min(Math.asin(wt((f.highest.height+6)/l,-1,1)),Math.asin(wt(m/u,-1,1))-Math.asin(wt(P/u,-1,1)))),a=Math.max(o,Math.min(r,a))),this.labelRotation=a}afterCalculateLabelRotation(){He(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){He(this.options.beforeFit,[this])}fit(){let t={width:0,height:0},{chart:e,options:{ticks:n,title:o,grid:r}}=this,a=this._isVisible(),l=this.isHorizontal();if(a){let m=_l(o,e.options.font);if(l?(t.width=this.maxWidth,t.height=Ji(r)+m):(t.height=this.maxHeight,t.width=Ji(r)+m),n.display&&this.ticks.length){let{first:u,last:f,widest:x,highest:P}=this._getLabelSizes(),k=n.padding*2,I=Wt(this.labelRotation),F=Math.cos(I),D=Math.sin(I);if(l){let V=n.mirror?0:D*x.width+F*P.height;t.height=Math.min(this.maxHeight,t.height+V+k)}else{let V=n.mirror?0:F*x.width+D*P.height;t.width=Math.min(this.maxWidth,t.width+V+k)}this._calculatePadding(u,f,D,F)}}this._handleMargins(),l?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,o){let{ticks:{align:r,padding:a},position:l}=this.options,m=this.labelRotation!==0,u=l!=="top"&&this.axis==="x";if(this.isHorizontal()){let f=this.getPixelForTick(0)-this.left,x=this.right-this.getPixelForTick(this.ticks.length-1),P=0,k=0;m?u?(P=o*t.width,k=n*e.height):(P=n*t.height,k=o*e.width):r==="start"?k=e.width:r==="end"?P=t.width:r!=="inner"&&(P=t.width/2,k=e.width/2),this.paddingLeft=Math.max((P-f+a)*this.width/(this.width-f),0),this.paddingRight=Math.max((k-x+a)*this.width/(this.width-x),0)}else{let f=e.height/2,x=t.height/2;r==="start"?(f=0,x=t.height):r==="end"&&(f=e.height,x=0),this.paddingTop=f+a,this.paddingBottom=x+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){He(this.options.afterFit,[this])}isHorizontal(){let{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,n;for(e=0,n=t.length;e<n;e++)ve(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){let e=this.options.ticks.sampleSize,n=this.ticks;e<n.length&&(n=fl(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){let{ctx:o,_longestTextCache:r}=this,a=[],l=[],m=Math.floor(e/ul(e,n)),u=0,f=0,x,P,k,I,F,D,V,B,$,J,q;for(x=0;x<e;x+=m){if(I=t[x].label,F=this._resolveTickFontOptions(x),o.font=D=F.string,V=r[D]=r[D]||{data:{},gc:[]},B=F.lineHeight,$=J=0,!ve(I)&&!We(I))$=Gi(o,V.data,V.gc,$,I),J=B;else if(We(I))for(P=0,k=I.length;P<k;++P)q=I[P],!ve(q)&&!We(q)&&($=Gi(o,V.data,V.gc,$,q),J+=B);a.push($),l.push(J),u=Math.max($,u),f=Math.max(J,f)}Bg(r,e);let K=a.indexOf(u),ae=l.indexOf(f),ie=re=>({width:a[re]||0,height:l[re]||0});return{first:ie(0),last:ie(e-1),widest:ie(K),highest:ie(ae),widths:a,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){let e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);let e=this._startPixel+t*this._length;return Pd(this._alignToPixels?zn(this.chart,e,0):e)}getDecimalForPixel(t){let e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){let e=this.ticks||[];if(t>=0&&t<e.length){let n=e[t];return n.$context||(n.$context=Ug(this.getContext(),t,n))}return this.$context||(this.$context=jg(this.chart.getContext(),this))}_tickSize(){let t=this.options.ticks,e=Wt(this.labelRotation),n=Math.abs(Math.cos(e)),o=Math.abs(Math.sin(e)),r=this._getLabelSizes(),a=t.autoSkipPadding||0,l=r?r.widest.width+a:0,m=r?r.highest.height+a:0;return this.isHorizontal()?m*n>l*o?l/n:m/o:m*o<l*n?m/n:l/o}_isVisible(){let t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){let e=this.axis,n=this.chart,o=this.options,{grid:r,position:a,border:l}=o,m=r.offset,u=this.isHorizontal(),x=this.ticks.length+(m?1:0),P=Ji(r),k=[],I=l.setContext(this.getContext()),F=I.display?I.width:0,D=F/2,V=function(Ue){return zn(n,Ue,F)},B,$,J,q,K,ae,ie,re,Ie,je,Ne,Ft;if(a==="top")B=V(this.bottom),ae=this.bottom-P,re=B-D,je=V(t.top)+D,Ft=t.bottom;else if(a==="bottom")B=V(this.top),je=t.top,Ft=V(t.bottom)-D,ae=B+D,re=this.top+P;else if(a==="left")B=V(this.right),K=this.right-P,ie=B-D,Ie=V(t.left)+D,Ne=t.right;else if(a==="right")B=V(this.left),Ie=t.left,Ne=V(t.right)-D,K=B+D,ie=this.left+P;else if(e==="x"){if(a==="center")B=V((t.top+t.bottom)/2+.5);else if(xe(a)){let Ue=Object.keys(a)[0],Xe=a[Ue];B=V(this.chart.scales[Ue].getPixelForValue(Xe))}je=t.top,Ft=t.bottom,ae=B+D,re=ae+P}else if(e==="y"){if(a==="center")B=V((t.left+t.right)/2);else if(xe(a)){let Ue=Object.keys(a)[0],Xe=a[Ue];B=V(this.chart.scales[Ue].getPixelForValue(Xe))}K=B-D,ie=K-P,Ie=t.left,Ne=t.right}let jt=Ce(o.ticks.maxTicksLimit,x),Te=Math.max(1,Math.ceil(x/jt));for($=0;$<x;$+=Te){let Ue=this.getContext($),Xe=r.setContext(Ue),Ut=l.setContext(Ue),_t=Xe.lineWidth,ri=Xe.color,ro=Ut.dash||[],ai=Ut.dashOffset,Vi=Xe.tickWidth,Hn=Xe.tickColor,Ri=Xe.tickBorderDash||[],$n=Xe.tickBorderDashOffset;J=Ng(this,$,m),J!==void 0&&(q=zn(n,J,_t),u?K=ie=Ie=Ne=q:ae=re=je=Ft=q,k.push({tx1:K,ty1:ae,tx2:ie,ty2:re,x1:Ie,y1:je,x2:Ne,y2:Ft,width:_t,color:ri,borderDash:ro,borderDashOffset:ai,tickWidth:Vi,tickColor:Hn,tickBorderDash:Ri,tickBorderDashOffset:$n}))}return this._ticksLength=x,this._borderValue=B,k}_computeLabelItems(t){let e=this.axis,n=this.options,{position:o,ticks:r}=n,a=this.isHorizontal(),l=this.ticks,{align:m,crossAlign:u,padding:f,mirror:x}=r,P=Ji(n.grid),k=P+f,I=x?-f:k,F=-Wt(this.labelRotation),D=[],V,B,$,J,q,K,ae,ie,re,Ie,je,Ne,Ft="middle";if(o==="top")K=this.bottom-I,ae=this._getXAxisLabelAlignment();else if(o==="bottom")K=this.top+I,ae=this._getXAxisLabelAlignment();else if(o==="left"){let Te=this._getYAxisLabelAlignment(P);ae=Te.textAlign,q=Te.x}else if(o==="right"){let Te=this._getYAxisLabelAlignment(P);ae=Te.textAlign,q=Te.x}else if(e==="x"){if(o==="center")K=(t.top+t.bottom)/2+k;else if(xe(o)){let Te=Object.keys(o)[0],Ue=o[Te];K=this.chart.scales[Te].getPixelForValue(Ue)+k}ae=this._getXAxisLabelAlignment()}else if(e==="y"){if(o==="center")q=(t.left+t.right)/2-k;else if(xe(o)){let Te=Object.keys(o)[0],Ue=o[Te];q=this.chart.scales[Te].getPixelForValue(Ue)}ae=this._getYAxisLabelAlignment(P).textAlign}e==="y"&&(m==="start"?Ft="top":m==="end"&&(Ft="bottom"));let jt=this._getLabelSizes();for(V=0,B=l.length;V<B;++V){$=l[V],J=$.label;let Te=r.setContext(this.getContext(V));ie=this.getPixelForTick(V)+r.labelOffset,re=this._resolveTickFontOptions(V),Ie=re.lineHeight,je=We(J)?J.length:1;let Ue=je/2,Xe=Te.color,Ut=Te.textStrokeColor,_t=Te.textStrokeWidth,ri=ae;a?(q=ie,ae==="inner"&&(V===B-1?ri=this.options.reverse?"left":"right":V===0?ri=this.options.reverse?"right":"left":ri="center"),o==="top"?u==="near"||F!==0?Ne=-je*Ie+Ie/2:u==="center"?Ne=-jt.highest.height/2-Ue*Ie+Ie:Ne=-jt.highest.height+Ie/2:u==="near"||F!==0?Ne=Ie/2:u==="center"?Ne=jt.highest.height/2-Ue*Ie:Ne=jt.highest.height-je*Ie,x&&(Ne*=-1),F!==0&&!Te.showLabelBackdrop&&(q+=Ie/2*Math.sin(F))):(K=ie,Ne=(1-je)*Ie/2);let ro;if(Te.showLabelBackdrop){let ai=cn(Te.backdropPadding),Vi=jt.heights[V],Hn=jt.widths[V],Ri=Ne-ai.top,$n=0-ai.left;switch(Ft){case"middle":Ri-=Vi/2;break;case"bottom":Ri-=Vi;break}switch(ae){case"center":$n-=Hn/2;break;case"right":$n-=Hn;break;case"inner":V===B-1?$n-=Hn:V>0&&($n-=Hn/2);break}ro={left:$n,top:Ri,width:Hn+ai.width,height:Vi+ai.height,color:Te.backdropColor}}D.push({label:J,font:re,textOffset:Ne,options:{rotation:F,color:Xe,strokeColor:Ut,strokeWidth:_t,textAlign:ri,textBaseline:Ft,translation:[q,K],backdrop:ro}})}return D}_getXAxisLabelAlignment(){let{position:t,ticks:e}=this.options;if(-Wt(this.labelRotation))return t==="top"?"left":"right";let o="center";return e.align==="start"?o="left":e.align==="end"?o="right":e.align==="inner"&&(o="inner"),o}_getYAxisLabelAlignment(t){let{position:e,ticks:{crossAlign:n,mirror:o,padding:r}}=this.options,a=this._getLabelSizes(),l=t+r,m=a.widest.width,u,f;return e==="left"?o?(f=this.right+r,n==="near"?u="left":n==="center"?(u="center",f+=m/2):(u="right",f+=m)):(f=this.right-l,n==="near"?u="right":n==="center"?(u="center",f-=m/2):(u="left",f=this.left)):e==="right"?o?(f=this.left+r,n==="near"?u="right":n==="center"?(u="center",f-=m/2):(u="left",f-=m)):(f=this.left+l,n==="near"?u="left":n==="center"?(u="center",f+=m/2):(u="right",f=this.right)):u="right",{textAlign:u,x:f}}_computeLabelArea(){if(this.options.ticks.mirror)return;let t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){let{ctx:t,options:{backgroundColor:e},left:n,top:o,width:r,height:a}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,o,r,a),t.restore())}getLineWidthForValue(t){let e=this.options.grid;if(!this._isVisible()||!e.display)return 0;let o=this.ticks.findIndex(r=>r.value===t);return o>=0?e.setContext(this.getContext(o)).lineWidth:0}drawGrid(t){let e=this.options.grid,n=this.ctx,o=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t)),r,a,l=(m,u,f)=>{!f.width||!f.color||(n.save(),n.lineWidth=f.width,n.strokeStyle=f.color,n.setLineDash(f.borderDash||[]),n.lineDashOffset=f.borderDashOffset,n.beginPath(),n.moveTo(m.x,m.y),n.lineTo(u.x,u.y),n.stroke(),n.restore())};if(e.display)for(r=0,a=o.length;r<a;++r){let m=o[r];e.drawOnChartArea&&l({x:m.x1,y:m.y1},{x:m.x2,y:m.y2},m),e.drawTicks&&l({x:m.tx1,y:m.ty1},{x:m.tx2,y:m.ty2},{color:m.tickColor,width:m.tickWidth,borderDash:m.tickBorderDash,borderDashOffset:m.tickBorderDashOffset})}}drawBorder(){let{chart:t,ctx:e,options:{border:n,grid:o}}=this,r=n.setContext(this.getContext()),a=n.display?r.width:0;if(!a)return;let l=o.setContext(this.getContext(0)).lineWidth,m=this._borderValue,u,f,x,P;this.isHorizontal()?(u=zn(t,this.left,a)-a/2,f=zn(t,this.right,l)+l/2,x=P=m):(x=zn(t,this.top,a)-a/2,P=zn(t,this.bottom,l)+l/2,u=f=m),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(u,x),e.lineTo(f,P),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;let n=this.ctx,o=this._computeLabelArea();o&&Ra(n,o);let r=this.getLabelItems(t);for(let a of r){let l=a.options,m=a.font,u=a.label,f=a.textOffset;$i(n,u,0,f,m,l)}o&&La(n)}drawTitle(){let{ctx:t,options:{position:e,title:n,reverse:o}}=this;if(!n.display)return;let r=Jn(n.font),a=cn(n.padding),l=n.align,m=r.lineHeight/2;e==="bottom"||e==="center"||xe(e)?(m+=a.bottom,We(n.text)&&(m+=r.lineHeight*(n.text.length-1))):m+=a.top;let{titleX:u,titleY:f,maxWidth:x,rotation:P}=qg(this,m,e,l);$i(t,n.text,0,0,r,{color:n.color,maxWidth:x,rotation:P,textAlign:Gg(l,e,o),textBaseline:"middle",translation:[u,f]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){let t=this.options,e=t.ticks&&t.ticks.z||0,n=Ce(t.grid&&t.grid.z,-1),o=Ce(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==i.prototype.draw?[{z:e,draw:r=>{this.draw(r)}}]:[{z:n,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:o,draw:()=>{this.drawBorder()}},{z:e,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){let e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",o=[],r,a;for(r=0,a=e.length;r<a;++r){let l=e[r];l[n]===this.id&&(!t||l.type===t)&&o.push(l)}return o}_resolveTickFontOptions(t){let e=this.options.ticks.setContext(this.getContext(t));return Jn(e.font)}_maxDigits(){let t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}},wi=class{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){let e=Object.getPrototypeOf(t),n;$g(e)&&(n=this.register(e));let o=this.items,r=t.id,a=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in o||(o[r]=t,Wg(t,a,n),this.override&&Ke.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){let e=this.items,n=t.id,o=this.scope;n in e&&delete e[n],o&&n in Ke[o]&&(delete Ke[o][n],this.override&&delete Ln[n])}};function Wg(i,t,e){let n=bi(Object.create(null),[e?Ke.get(e):{},Ke.get(t),i.defaults]);Ke.set(t,n),i.defaultRoutes&&Hg(t,i.defaultRoutes),i.descriptors&&Ke.describe(t,i.descriptors)}function Hg(i,t){Object.keys(t).forEach(e=>{let n=e.split("."),o=n.pop(),r=[i].concat(n).join("."),a=t[e].split("."),l=a.pop(),m=a.join(".");Ke.route(r,o,m,l)})}function $g(i){return"id"in i&&"defaults"in i}var ss=class{constructor(){this.controllers=new wi(rr,"datasets",!0),this.elements=new wi(Un,"elements"),this.plugins=new wi(Object,"plugins"),this.scales=new wi(ti,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach(o=>{let r=n||this._getRegistryForType(o);n||r.isForType(o)||r===this.plugins&&o.id?this._exec(t,r,o):ut(o,a=>{let l=n||this._getRegistryForType(a);this._exec(t,l,a)})})}_exec(t,e,n){let o=zo(t);He(n["before"+o],[],n),e[t](n),He(n["after"+o],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){let n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){let o=e.get(t);if(o===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return o}},dn=new ss,cs=class{constructor(){this._init=void 0}notify(t,e,n,o){if(e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;let r=o?this._descriptors(t).filter(o):this._descriptors(t),a=this._notify(r,t,e,n);return e==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),a}_notify(t,e,n,o){o=o||{};for(let r of t){let a=r.plugin,l=a[n],m=[e,o,r.options];if(He(l,m,a)===!1&&o.cancelable)return!1}return!0}invalidate(){ve(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;let e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){let n=t&&t.config,o=Ce(n.options&&n.options.plugins,{}),r=Yg(n);return o===!1&&!e?[]:Xg(t,r,o,e)}_notifyStateChanges(t){let e=this._oldCache||[],n=this._cache,o=(r,a)=>r.filter(l=>!a.some(m=>l.plugin.id===m.plugin.id));this._notify(o(e,n),t,"stop"),this._notify(o(n,e),t,"start")}};function Yg(i){let t={},e=[],n=Object.keys(dn.plugins.items);for(let r=0;r<n.length;r++)e.push(dn.getPlugin(n[r]));let o=i.plugins||[];for(let r=0;r<o.length;r++){let a=o[r];e.indexOf(a)===-1&&(e.push(a),t[a.id]=!0)}return{plugins:e,localIds:t}}function Kg(i,t){return!t&&i===!1?null:i===!0?{}:i}function Xg(i,{plugins:t,localIds:e},n,o){let r=[],a=i.getContext();for(let l of t){let m=l.id,u=Kg(n[m],o);u!==null&&r.push({plugin:l,options:Qg(i.config,{plugin:l,local:e[m]},u,a)})}return r}function Qg(i,{plugin:t,local:e},n,o){let r=i.pluginScopeKeys(t),a=i.getOptionScopes(n,r);return e&&t.defaults&&a.push(t.defaults),i.createResolver(a,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ds(i,t){let e=Ke.datasets[i]||{};return((t.datasets||{})[i]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function Jg(i,t){let e=i;return i==="_index_"?e=t:i==="_value_"&&(e=t==="x"?"y":"x"),e}function Zg(i,t){return i===t?"_index_":"_value_"}function hl(i){if(i==="x"||i==="y"||i==="r")return i}function eu(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function ls(i,...t){if(hl(i))return i;for(let e of t){let n=e.axis||eu(e.position)||i.length>1&&hl(i[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function bl(i,t,e){if(e[t+"AxisID"]===i)return{axis:t}}function tu(i,t){if(t.data&&t.data.datasets){let e=t.data.datasets.filter(n=>n.xAxisID===i||n.yAxisID===i);if(e.length)return bl(i,"x",e[0])||bl(i,"y",e[0])}return{}}function nu(i,t){let e=Ln[i.type]||{scales:{}},n=t.scales||{},o=ds(i.type,t),r=Object.create(null);return Object.keys(n).forEach(a=>{let l=n[a];if(!xe(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);let m=ls(a,l,tu(a,i),Ke.scales[l.type]),u=Zg(m,o),f=e.scales||{};r[a]=vi(Object.create(null),[{axis:m},l,f[m],f[u]])}),i.data.datasets.forEach(a=>{let l=a.type||i.type,m=a.indexAxis||ds(l,t),f=(Ln[l]||{}).scales||{};Object.keys(f).forEach(x=>{let P=Jg(x,m),k=a[P+"AxisID"]||P;r[k]=r[k]||Object.create(null),vi(r[k],[{axis:P},n[k],f[x]])})}),Object.keys(r).forEach(a=>{let l=r[a];vi(l,[Ke.scales[l.type],Ke.scale])}),r}function Kl(i){let t=i.options||(i.options={});t.plugins=Ce(t.plugins,{}),t.scales=nu(i,t)}function Xl(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function iu(i){return i=i||{},i.data=Xl(i.data),Kl(i),i}var Cl=new Map,Ql=new Set;function Xo(i,t){let e=Cl.get(i);return e||(e=t(),Cl.set(i,e),Ql.add(e)),e}var Zi=(i,t,e)=>{let n=Rn(t,e);n!==void 0&&i.add(n)},ps=class{constructor(t){this._config=iu(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Xl(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){let t=this._config;this.clearCache(),Kl(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Xo(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Xo(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Xo(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){let e=t.id,n=this.type;return Xo(`${n}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){let n=this._scopeCache,o=n.get(t);return(!o||e)&&(o=new Map,n.set(t,o)),o}getOptionScopes(t,e,n){let{options:o,type:r}=this,a=this._cachedScopes(t,n),l=a.get(e);if(l)return l;let m=new Set;e.forEach(f=>{t&&(m.add(t),f.forEach(x=>Zi(m,t,x))),f.forEach(x=>Zi(m,o,x)),f.forEach(x=>Zi(m,Ln[r]||{},x)),f.forEach(x=>Zi(m,Ke,x)),f.forEach(x=>Zi(m,jo,x))});let u=Array.from(m);return u.length===0&&u.push(Object.create(null)),Ql.has(e)&&a.set(e,u),u}chartOptionScopes(){let{options:t,type:e}=this;return[t,Ln[e]||{},Ke.datasets[e]||{},{type:e},Ke,jo]}resolveNamedOptions(t,e,n,o=[""]){let r={$shared:!0},{resolver:a,subPrefixes:l}=vl(this._resolverCache,t,o),m=a;if(ru(a,e)){r.$shared=!1,n=mn(n)?n():n;let u=this.createResolver(t,n,l);m=Qn(a,n,u)}for(let u of e)r[u]=m[u];return r}createResolver(t,e,n=[""],o){let{resolver:r}=vl(this._resolverCache,t,n);return xe(e)?Qn(r,e,void 0,o):r}};function vl(i,t,e){let n=i.get(t);n||(n=new Map,i.set(t,n));let o=e.join(),r=n.get(o);return r||(r={resolver:Go(t,e),subPrefixes:e.filter(l=>!l.toLowerCase().includes("hover"))},n.set(o,r)),r}var ou=i=>xe(i)&&Object.getOwnPropertyNames(i).some(t=>mn(i[t]));function ru(i,t){let{isScriptable:e,isIndexable:n}=ja(i);for(let o of t){let r=e(o),a=n(o),l=(a||r)&&i[o];if(r&&(mn(l)||ou(l))||a&&We(l))return!0}return!1}var au="4.5.1",su=["top","bottom","left","right","chartArea"];function xl(i,t){return i==="top"||i==="bottom"||su.indexOf(i)===-1&&t==="x"}function Pl(i,t){return function(e,n){return e[i]===n[i]?e[t]-n[t]:e[i]-n[i]}}function yl(i){let t=i.chart,e=t.options.animation;t.notifyPlugins("afterRender"),He(e&&e.onComplete,[i],t)}function cu(i){let t=i.chart,e=t.options.animation;He(e&&e.onProgress,[i],t)}function Jl(i){return qo()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}var Zo={},Ml=i=>{let t=Jl(i);return Object.values(Zo).filter(e=>e.canvas===t).pop()};function du(i,t,e){let n=Object.keys(i);for(let o of n){let r=+o;if(r>=t){let a=i[o];delete i[o],(e>0||r>t)&&(i[r+e]=a)}}}function lu(i,t,e,n){return!e||i.type==="mouseout"?null:n?t:i}var Lt=(()=>{class i{static defaults=Ke;static instances=Zo;static overrides=Ln;static registry=dn;static version=au;static getChart=Ml;static register(...e){dn.add(...e),Ol()}static unregister(...e){dn.remove(...e),Ol()}constructor(e,n){let o=this.config=new ps(n),r=Jl(e),a=Ml(r);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");let l=o.createResolver(o.chartOptionScopes(),this.getContext());this.platform=new(o.platform||Eg(r)),this.platform.updateConfig(o);let m=this.platform.acquireContext(r,l.aspectRatio),u=m&&m.canvas,f=u&&u.height,x=u&&u.width;if(this.id=_d(),this.ctx=m,this.canvas=u,this.width=x,this.height=f,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new cs,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Sd(P=>this.update(P),l.resizeDelay||0),this._dataChanges=[],Zo[this.id]=this,!m||!u){console.error("Failed to create chart: can't acquire context from the given item");return}un.listen(this,"complete",yl),un.listen(this,"progress",cu),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:e,maintainAspectRatio:n},width:o,height:r,_aspectRatio:a}=this;return ve(e)?n&&a?a:r?o/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return dn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():qa(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Va(this.canvas,this.ctx),this}stop(){return un.stop(this),this}resize(e,n){un.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){let o=this.options,r=this.canvas,a=o.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(r,e,n,a),m=o.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,qa(this,m,!0)&&(this.notifyPlugins("resize",{size:l}),He(o.onResize,[this,l],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){let n=this.options.scales||{};ut(n,(o,r)=>{o.id=r})}buildOrUpdateScales(){let e=this.options,n=e.scales,o=this.scales,r=Object.keys(o).reduce((l,m)=>(l[m]=!1,l),{}),a=[];n&&(a=a.concat(Object.keys(n).map(l=>{let m=n[l],u=ls(l,m),f=u==="r",x=u==="x";return{options:m,dposition:f?"chartArea":x?"bottom":"left",dtype:f?"radialLinear":x?"category":"linear"}}))),ut(a,l=>{let m=l.options,u=m.id,f=ls(u,m),x=Ce(m.type,l.dtype);(m.position===void 0||xl(m.position,f)!==xl(l.dposition))&&(m.position=l.dposition),r[u]=!0;let P=null;if(u in o&&o[u].type===x)P=o[u];else{let k=dn.getScale(x);P=new k({id:u,type:x,ctx:this.ctx,chart:this}),o[P.id]=P}P.init(m,e)}),ut(r,(l,m)=>{l||delete o[m]}),ut(o,l=>{Yo.configure(this,l,l.options),Yo.addBox(this,l)})}_updateMetasets(){let e=this._metasets,n=this.data.datasets.length,o=e.length;if(e.sort((r,a)=>r.index-a.index),o>n){for(let r=n;r<o;++r)this._destroyDatasetMeta(r);e.splice(n,o-n)}this._sortedMetasets=e.slice(0).sort(Pl("order","index"))}_removeUnreferencedMetasets(){let{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((o,r)=>{n.filter(a=>a===o._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){let e=[],n=this.data.datasets,o,r;for(this._removeUnreferencedMetasets(),o=0,r=n.length;o<r;o++){let a=n[o],l=this.getDatasetMeta(o),m=a.type||this.config.type;if(l.type&&l.type!==m&&(this._destroyDatasetMeta(o),l=this.getDatasetMeta(o)),l.type=m,l.indexAxis=a.indexAxis||ds(m,this.options),l.order=a.order||0,l.index=o,l.label=""+a.label,l.visible=this.isDatasetVisible(o),l.controller)l.controller.updateIndex(o),l.controller.linkScales();else{let u=dn.getController(m),{datasetElementType:f,dataElementType:x}=Ke.datasets[m];Object.assign(u,{dataElementType:dn.getElement(x),datasetElementType:f&&dn.getElement(f)}),l.controller=new u(this,o),e.push(l.controller)}}return this._updateMetasets(),e}_resetElements(){ut(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){let n=this.config;n.update();let o=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!o.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;let a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let f=0,x=this.data.datasets.length;f<x;f++){let{controller:P}=this.getDatasetMeta(f),k=!r&&a.indexOf(P)===-1;P.buildOrUpdateElements(k),l=Math.max(+P.getMaxOverflow(),l)}l=this._minPadding=o.layout.autoPadding?l:0,this._updateLayout(l),r||ut(a,f=>{f.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Pl("z","_idx"));let{_active:m,_lastEvent:u}=this;u?this._eventHandler(u,!0):m.length&&this._updateHoverStyles(m,m,!0),this.render()}_updateScales(){ut(this.scales,e=>{Yo.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let e=this.options,n=new Set(Object.keys(this._listeners)),o=new Set(e.events);(!ya(n,o)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(let{method:o,start:r,count:a}of n){let l=o==="_removeElements"?-a:a;du(e,r,l)}}_getUniformDataChanges(){let e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];let n=this.data.datasets.length,o=a=>new Set(e.filter(l=>l[0]===a).map((l,m)=>m+","+l.splice(1).join(","))),r=o(0);for(let a=1;a<n;a++)if(!ya(r,o(a)))return;return Array.from(r).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Yo.update(this,this.width,this.height,e);let n=this.chartArea,o=n.width<=0||n.height<=0;this._layers=[],ut(this.boxes,r=>{o&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,a)=>{r._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,o=this.data.datasets.length;n<o;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,o=this.data.datasets.length;n<o;++n)this._updateDataset(n,mn(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){let o=this.getDatasetMeta(e),r={meta:o,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(o.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(un.has(this)?this.attached&&!un.running(this)&&un.start(this):(this.draw(),yl({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){let{width:o,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(o,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){let n=this._sortedMetasets,o=[],r,a;for(r=0,a=n.length;r<a;++r){let l=n[r];(!e||l.visible)&&o.push(l)}return o}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){let n=this.ctx,o={meta:e,index:e.index,cancelable:!0},r=Qd(this,e);this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(r&&Ra(n,r),e.controller.draw(),r&&La(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return sn(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,o,r){let a=mg.modes[n];return typeof a=="function"?a(this,e,o,r):[]}getDatasetMeta(e){let n=this.data.datasets[e],o=this._metasets,r=o.filter(a=>a&&a._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},o.push(r)),r}getContext(){return this.$context||(this.$context=Nn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){let n=this.data.datasets[e];if(!n)return!1;let o=this.getDatasetMeta(e);return typeof o.hidden=="boolean"?!o.hidden:!n.hidden}setDatasetVisibility(e,n){let o=this.getDatasetMeta(e);o.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,o){let r=o?"show":"hide",a=this.getDatasetMeta(e),l=a.controller._resolveAnimations(void 0,r);xi(n)?(a.data[n].hidden=!o,this.update()):(this.setDatasetVisibility(e,o),l.update(a,{visible:o}),this.update(m=>m.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){let n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),un.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Va(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Zo[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let e=this._listeners,n=this.platform,o=(a,l)=>{n.addEventListener(this,a,l),e[a]=l},r=(a,l,m)=>{a.offsetX=l,a.offsetY=m,this._eventHandler(a)};ut(this.options.events,a=>o(a,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let e=this._responsiveListeners,n=this.platform,o=(u,f)=>{n.addEventListener(this,u,f),e[u]=f},r=(u,f)=>{e[u]&&(n.removeEventListener(this,u,f),delete e[u])},a=(u,f)=>{this.canvas&&this.resize(u,f)},l,m=()=>{r("attach",m),this.attached=!0,this.resize(),o("resize",a),o("detach",l)};l=()=>{this.attached=!1,r("resize",a),this._stop(),this._resize(0,0),o("attach",m)},n.isAttached(this.canvas)?m():l()}unbindEvents(){ut(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ut(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,o){let r=o?"set":"remove",a,l,m,u;for(n==="dataset"&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+r+"DatasetHoverStyle"]()),m=0,u=e.length;m<u;++m){l=e[m];let f=l&&this.getDatasetMeta(l.datasetIndex).controller;f&&f[r+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){let n=this._active||[],o=e.map(({datasetIndex:a,index:l})=>{let m=this.getDatasetMeta(a);if(!m)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:m.data[l],index:l}});!Pa(o,n)&&(this._active=o,this._lastEvent=null,this._updateHoverStyles(o,n))}notifyPlugins(e,n,o){return this._plugins.notify(this,e,n,o)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,o){let r=this.options.hover,a=(u,f)=>u.filter(x=>!f.some(P=>x.datasetIndex===P.datasetIndex&&x.index===P.index)),l=a(n,e),m=o?e:a(e,n);l.length&&this.updateHoverStyle(l,r.mode,!1),m.length&&r.mode&&this.updateHoverStyle(m,r.mode,!0)}_eventHandler(e,n){let o={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=l=>(l.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",o,r)===!1)return;let a=this._handleEvent(e,n,o.inChartArea);return o.cancelable=!1,this.notifyPlugins("afterEvent",o,r),(a||o.changed)&&this.render(),this}_handleEvent(e,n,o){let{_active:r=[],options:a}=this,l=n,m=this._getActiveElements(e,r,o,l),u=Cd(e),f=lu(e,this._lastEvent,o,u);o&&(this._lastEvent=null,He(a.onHover,[e,m,this],this),u&&He(a.onClick,[e,m,this],this));let x=!Pa(m,r);return(x||n)&&(this._active=m,this._updateHoverStyles(m,r,n)),this._lastEvent=f,x}_getActiveElements(e,n,o,r){if(e.type==="mouseout")return[];if(!o)return n;let a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,r)}}return i})();function Ol(){return ut(Lt.instances,i=>i._plugins.invalidate())}function pu(i,t,e){let{startAngle:n,x:o,y:r,outerRadius:a,innerRadius:l,options:m}=t,{borderWidth:u,borderJoinStyle:f}=m,x=Math.min(u/a,Ot(n-e));if(i.beginPath(),i.arc(o,r,a-u/2,n+x/2,e-x/2),l>0){let P=Math.min(u/l,Ot(n-e));i.arc(o,r,l+u/2,e-P/2,n+P/2,!0)}else{let P=Math.min(u/2,a*Ot(n-e));if(f==="round")i.arc(o,r,P,e-ke/2,n+ke/2,!0);else if(f==="bevel"){let k=2*P*P,I=-k*Math.cos(e+ke/2)+o,F=-k*Math.sin(e+ke/2)+r,D=k*Math.cos(n+ke/2)+o,V=k*Math.sin(n+ke/2)+r;i.lineTo(I,F),i.lineTo(D,V)}}i.closePath(),i.moveTo(0,0),i.rect(0,0,i.canvas.width,i.canvas.height),i.clip("evenodd")}function mu(i,t,e){let{startAngle:n,pixelMargin:o,x:r,y:a,outerRadius:l,innerRadius:m}=t,u=o/l;i.beginPath(),i.arc(r,a,l,n-u,e+u),m>o?(u=o/m,i.arc(r,a,m,e+u,n-u,!0)):i.arc(r,a,o,e+Ye,n-Ye),i.closePath(),i.clip()}function gu(i){return Uo(i,["outerStart","outerEnd","innerStart","innerEnd"])}function uu(i,t,e,n){let o=gu(i.options.borderRadius),r=(e-t)/2,a=Math.min(r,n*t/2),l=m=>{let u=(e-Math.min(r,m))*n/2;return wt(m,0,Math.min(r,u))};return{outerStart:l(o.outerStart),outerEnd:l(o.outerEnd),innerStart:wt(o.innerStart,0,a),innerEnd:wt(o.innerEnd,0,a)}}function Oi(i,t,e,n){return{x:e+i*Math.cos(t),y:n+i*Math.sin(t)}}function nr(i,t,e,n,o,r){let{x:a,y:l,startAngle:m,pixelMargin:u,innerRadius:f}=t,x=Math.max(t.outerRadius+n+e-u,0),P=f>0?f+n+e+u:0,k=0,I=o-m;if(n){let Te=f>0?f-n:0,Ue=x>0?x-n:0,Xe=(Te+Ue)/2,Ut=Xe!==0?I*Xe/(Xe+n):I;k=(I-Ut)/2}let F=Math.max(.001,I*x-e/ke)/x,D=(I-F)/2,V=m+D+k,B=o-D-k,{outerStart:$,outerEnd:J,innerStart:q,innerEnd:K}=uu(t,P,x,B-V),ae=x-$,ie=x-J,re=V+$/ae,Ie=B-J/ie,je=P+q,Ne=P+K,Ft=V+q/je,jt=B-K/Ne;if(i.beginPath(),r){let Te=(re+Ie)/2;if(i.arc(a,l,x,re,Te),i.arc(a,l,x,Te,Ie),J>0){let _t=Oi(ie,Ie,a,l);i.arc(_t.x,_t.y,J,Ie,B+Ye)}let Ue=Oi(Ne,B,a,l);if(i.lineTo(Ue.x,Ue.y),K>0){let _t=Oi(Ne,jt,a,l);i.arc(_t.x,_t.y,K,B+Ye,jt+Math.PI)}let Xe=(B-K/P+(V+q/P))/2;if(i.arc(a,l,P,B-K/P,Xe,!0),i.arc(a,l,P,Xe,V+q/P,!0),q>0){let _t=Oi(je,Ft,a,l);i.arc(_t.x,_t.y,q,Ft+Math.PI,V-Ye)}let Ut=Oi(ae,V,a,l);if(i.lineTo(Ut.x,Ut.y),$>0){let _t=Oi(ae,re,a,l);i.arc(_t.x,_t.y,$,V-Ye,re)}}else{i.moveTo(a,l);let Te=Math.cos(re)*x+a,Ue=Math.sin(re)*x+l;i.lineTo(Te,Ue);let Xe=Math.cos(Ie)*x+a,Ut=Math.sin(Ie)*x+l;i.lineTo(Xe,Ut)}i.closePath()}function fu(i,t,e,n,o){let{fullCircles:r,startAngle:a,circumference:l}=t,m=t.endAngle;if(r){nr(i,t,e,n,m,o);for(let u=0;u<r;++u)i.fill();isNaN(l)||(m=a+(l%Be||Be))}return nr(i,t,e,n,m,o),i.fill(),m}function _u(i,t,e,n,o){let{fullCircles:r,startAngle:a,circumference:l,options:m}=t,{borderWidth:u,borderJoinStyle:f,borderDash:x,borderDashOffset:P,borderRadius:k}=m,I=m.borderAlign==="inner";if(!u)return;i.setLineDash(x||[]),i.lineDashOffset=P,I?(i.lineWidth=u*2,i.lineJoin=f||"round"):(i.lineWidth=u,i.lineJoin=f||"bevel");let F=t.endAngle;if(r){nr(i,t,e,n,F,o);for(let D=0;D<r;++D)i.stroke();isNaN(l)||(F=a+(l%Be||Be))}I&&mu(i,t,F),m.selfJoin&&F-a>=ke&&k===0&&f!=="miter"&&pu(i,t,F),r||(nr(i,t,e,n,F,o),i.stroke())}var Si=class extends Un{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){let o=this.getProps(["x","y"],n),{angle:r,distance:a}=Sa(o,{x:t,y:e}),{startAngle:l,endAngle:m,innerRadius:u,outerRadius:f,circumference:x}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),P=(this.options.spacing+this.options.borderWidth)/2,k=Ce(x,m-l),I=Mi(r,l,m)&&l!==m,F=k>=Be||I,D=qi(a,u+P,f+P);return F&&D}getCenterPoint(t){let{x:e,y:n,startAngle:o,endAngle:r,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:m,spacing:u}=this.options,f=(o+r)/2,x=(a+l+u+m)/2;return{x:e+Math.cos(f)*x,y:n+Math.sin(f)*x}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){let{options:e,circumference:n}=this,o=(e.offset||0)/4,r=(e.spacing||0)/2,a=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=n>Be?Math.floor(n/Be):0,n===0||this.innerRadius<0||this.outerRadius<0)return;t.save();let l=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(l)*o,Math.sin(l)*o);let m=1-Math.sin(Math.min(ke,n||0)),u=o*m;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,fu(t,this,u,r,a),_u(t,this,u,r,a),t.restore()}};function Zl(i,t,e=t){i.lineCap=Ce(e.borderCapStyle,t.borderCapStyle),i.setLineDash(Ce(e.borderDash,t.borderDash)),i.lineDashOffset=Ce(e.borderDashOffset,t.borderDashOffset),i.lineJoin=Ce(e.borderJoinStyle,t.borderJoinStyle),i.lineWidth=Ce(e.borderWidth,t.borderWidth),i.strokeStyle=Ce(e.borderColor,t.borderColor)}function hu(i,t,e){i.lineTo(e.x,e.y)}function bu(i){return i.stepped?Vd:i.tension||i.cubicInterpolationMode==="monotone"?Rd:hu}function ep(i,t,e={}){let n=i.length,{start:o=0,end:r=n-1}=e,{start:a,end:l}=t,m=Math.max(o,a),u=Math.min(r,l),f=o<a&&r<a||o>l&&r>l;return{count:n,start:m,loop:t.loop,ilen:u<m&&!f?n+u-m:u-m}}function Cu(i,t,e,n){let{points:o,options:r}=t,{count:a,start:l,loop:m,ilen:u}=ep(o,e,n),f=bu(r),{move:x=!0,reverse:P}=n||{},k,I,F;for(k=0;k<=u;++k)I=o[(l+(P?u-k:k))%a],!I.skip&&(x?(i.moveTo(I.x,I.y),x=!1):f(i,F,I,P,r.stepped),F=I);return m&&(I=o[(l+(P?u:0))%a],f(i,F,I,P,r.stepped)),!!m}function vu(i,t,e,n){let o=t.points,{count:r,start:a,ilen:l}=ep(o,e,n),{move:m=!0,reverse:u}=n||{},f=0,x=0,P,k,I,F,D,V,B=J=>(a+(u?l-J:J))%r,$=()=>{F!==D&&(i.lineTo(f,D),i.lineTo(f,F),i.lineTo(f,V))};for(m&&(k=o[B(0)],i.moveTo(k.x,k.y)),P=0;P<=l;++P){if(k=o[B(P)],k.skip)continue;let J=k.x,q=k.y,K=J|0;K===I?(q<F?F=q:q>D&&(D=q),f=(x*f+J)/++x):($(),i.lineTo(J,q),I=K,x=0,F=D=q),V=q}$()}function ms(i){let t=i.options,e=t.borderDash&&t.borderDash.length;return!i._decimated&&!i._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?vu:Cu}function xu(i){return i.stepped?Wd:i.tension||i.cubicInterpolationMode==="monotone"?Hd:Dn}function Pu(i,t,e,n){let o=t._path;o||(o=t._path=new Path2D,t.path(o,e,n)&&o.closePath()),Zl(i,t.options),i.stroke(o)}function yu(i,t,e,n){let{segments:o,options:r}=t,a=ms(t);for(let l of o)Zl(i,r,l.style),i.beginPath(),a(i,t,l,{start:e,end:e+n-1})&&i.closePath(),i.stroke()}var Mu=typeof Path2D=="function";function Ou(i,t,e,n){Mu&&!t.options.segment?Pu(i,t,e,n):yu(i,t,e,n)}var tp=(()=>{class i extends Un{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){let o=this.options;if((o.tension||o.cubicInterpolationMode==="monotone")&&!o.stepped&&!this._pointsUpdated){let r=o.spanGaps?this._loop:this._fullLoop;Ud(this._points,o,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Xd(this,this.options.segment))}first(){let e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){let e=this.segments,n=this.points,o=e.length;return o&&n[e[o-1].end]}interpolate(e,n){let o=this.options,r=e[n],a=this.points,l=Kd(this,{property:n,start:r,end:r});if(!l.length)return;let m=[],u=xu(o),f,x;for(f=0,x=l.length;f<x;++f){let{start:P,end:k}=l[f],I=a[P],F=a[k];if(I===F){m.push(I);continue}let D=Math.abs((r-I[n])/(F[n]-I[n])),V=u(I,F,D,o.stepped);V[n]=e[n],m.push(V)}return m.length===1?m[0]:m}pathSegment(e,n,o){return ms(this)(e,this,n,o)}path(e,n,o){let r=this.segments,a=ms(this),l=this._loop;n=n||0,o=o||this.points.length-n;for(let m of r)l&=a(e,this,m,{start:n,end:n+o-1});return!!l}draw(e,n,o,r){let a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),Ou(e,this,o,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return i})();function wl(i,t,e,n){let o=i.options,{[e]:r}=i.getProps([e],n);return Math.abs(t-r)<o.radius+o.hitRadius}var np=(()=>{class i extends Un{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,o){let r=this.options,{x:a,y:l}=this.getProps(["x","y"],o);return Math.pow(e-a,2)+Math.pow(n-l,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,n){return wl(this,e,"x",n)}inYRange(e,n){return wl(this,e,"y",n)}getCenterPoint(e){let{x:n,y:o}=this.getProps(["x","y"],e);return{x:n,y:o}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);let o=n&&e.borderWidth||0;return(n+o)*2}draw(e,n){let o=this.options;this.skip||o.radius<.1||!sn(this,n,this.size(o)/2)||(e.strokeStyle=o.borderColor,e.lineWidth=o.borderWidth,e.fillStyle=o.backgroundColor,Dd(e,o,this.x,this.y))}getRange(){let e=this.options||{};return e.radius+e.hitRadius}}return i})();function ip(i,t){let{x:e,y:n,base:o,width:r,height:a}=i.getProps(["x","y","base","width","height"],t),l,m,u,f,x;return i.horizontal?(x=a/2,l=Math.min(e,o),m=Math.max(e,o),u=n-x,f=n+x):(x=r/2,l=e-x,m=e+x,u=Math.min(n,o),f=Math.max(n,o)),{left:l,top:u,right:m,bottom:f}}function jn(i,t,e,n){return i?0:wt(t,e,n)}function wu(i,t,e){let n=i.options.borderWidth,o=i.borderSkipped,r=Na(n);return{t:jn(o.top,r.top,0,e),r:jn(o.right,r.right,0,t),b:jn(o.bottom,r.bottom,0,e),l:jn(o.left,r.left,0,t)}}function Su(i,t,e){let{enableBorderRadius:n}=i.getProps(["enableBorderRadius"]),o=i.options.borderRadius,r=Ba(o),a=Math.min(t,e),l=i.borderSkipped,m=n||xe(o);return{topLeft:jn(!m||l.top||l.left,r.topLeft,0,a),topRight:jn(!m||l.top||l.right,r.topRight,0,a),bottomLeft:jn(!m||l.bottom||l.left,r.bottomLeft,0,a),bottomRight:jn(!m||l.bottom||l.right,r.bottomRight,0,a)}}function ku(i){let t=ip(i),e=t.right-t.left,n=t.bottom-t.top,o=wu(i,e/2,n/2),r=Su(i,e/2,n/2);return{outer:{x:t.left,y:t.top,w:e,h:n,radius:r},inner:{x:t.left+o.l,y:t.top+o.t,w:e-o.l-o.r,h:n-o.t-o.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(o.t,o.l)),topRight:Math.max(0,r.topRight-Math.max(o.t,o.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(o.b,o.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(o.b,o.r))}}}}function Za(i,t,e,n){let o=t===null,r=e===null,l=i&&!(o&&r)&&ip(i,n);return l&&(o||qi(t,l.left,l.right))&&(r||qi(e,l.top,l.bottom))}function Iu(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}function Tu(i,t){i.rect(t.x,t.y,t.w,t.h)}function es(i,t,e={}){let n=i.x!==e.x?-t:0,o=i.y!==e.y?-t:0,r=(i.x+i.w!==e.x+e.w?t:0)-n,a=(i.y+i.h!==e.y+e.h?t:0)-o;return{x:i.x+n,y:i.y+o,w:i.w+r,h:i.h+a,radius:i.radius}}var ir=class extends Un{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){let{inflateAmount:e,options:{borderColor:n,backgroundColor:o}}=this,{inner:r,outer:a}=ku(this),l=Iu(a.radius)?za:Tu;t.save(),(a.w!==r.w||a.h!==r.h)&&(t.beginPath(),l(t,es(a,e,r)),t.clip(),l(t,es(r,-e,a)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),l(t,es(r,e)),t.fillStyle=o,t.fill(),t.restore()}inRange(t,e,n){return Za(this,t,e,n)}inXRange(t,e){return Za(this,t,null,e)}inYRange(t,e){return Za(this,null,t,e)}getCenterPoint(t){let{x:e,y:n,base:o,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+o)/2:e,y:r?n:(n+o)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}};var Eu=(i,t,e,n)=>(typeof t=="string"?(e=i.push(t)-1,n.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function Fu(i,t,e,n){let o=i.indexOf(t);if(o===-1)return Eu(i,t,e,n);let r=i.lastIndexOf(t);return o!==r?e:o}var Du=(i,t)=>i===null?null:wt(Math.round(i),0,t);function Sl(i){let t=this.getLabels();return i>=0&&i<t.length?t[i]:i}var op=(()=>{class i extends ti{static id="category";static defaults={ticks:{callback:Sl}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){let n=this._addedLabels;if(n.length){let o=this.getLabels();for(let{index:r,label:a}of n)o[r]===a&&o.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(ve(e))return null;let o=this.getLabels();return n=isFinite(n)&&o[n]===e?n:Fu(o,e,Ce(n,e),this._addedLabels),Du(n,o.length-1)}determineDataLimits(){let{minDefined:e,maxDefined:n}=this.getUserBounds(),{min:o,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(o=0),n||(r=this.getLabels().length-1)),this.min=o,this.max=r}buildTicks(){let e=this.min,n=this.max,o=this.options.offset,r=[],a=this.getLabels();a=e===0&&n===a.length-1?a:a.slice(e,n+1),this._valueRange=Math.max(a.length-(o?0:1),1),this._startValue=this.min-(o?.5:0);for(let l=e;l<=n;l++)r.push({value:l});return r}getLabelForValue(e){return Sl.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){let n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}return i})();function Au(i,t){let e=[],{bounds:o,step:r,min:a,max:l,precision:m,count:u,maxTicks:f,maxDigits:x,includeBounds:P}=i,k=r||1,I=f-1,{min:F,max:D}=t,V=!ve(a),B=!ve(l),$=!ve(u),J=(D-F)/(x+1),q=Ma((D-F)/I/k)*k,K,ae,ie,re;if(q<1e-14&&!V&&!B)return[{value:F},{value:D}];re=Math.ceil(D/q)-Math.floor(F/q),re>I&&(q=Ma(re*q/I/k)*k),ve(m)||(K=Math.pow(10,m),q=Math.ceil(q*K)/K),o==="ticks"?(ae=Math.floor(F/q)*q,ie=Math.ceil(D/q)*q):(ae=F,ie=D),V&&B&&r&&xd((l-a)/r,q/1e3)?(re=Math.round(Math.min((l-a)/q,f)),q=(l-a)/re,ae=a,ie=l):$?(ae=V?a:ae,ie=B?l:ie,re=u-1,q=(ie-ae)/re):(re=(ie-ae)/q,Pi(re,Math.round(re),q/1e3)?re=Math.round(re):re=Math.ceil(re));let Ie=Math.max(wa(q),wa(ae));K=Math.pow(10,ve(m)?Ie:m),ae=Math.round(ae*K)/K,ie=Math.round(ie*K)/K;let je=0;for(V&&(P&&ae!==a?(e.push({value:a}),ae<a&&je++,Pi(Math.round((ae+je*q)*K)/K,a,kl(a,J,i))&&je++):ae<a&&je++);je<re;++je){let Ne=Math.round((ae+je*q)*K)/K;if(B&&Ne>l)break;e.push({value:Ne})}return B&&P&&ie!==l?e.length&&Pi(e[e.length-1].value,l,kl(l,J,i))?e[e.length-1].value=l:e.push({value:l}):(!B||ie===l)&&e.push({value:ie}),e}function kl(i,t,{horizontal:e,minRotation:n}){let o=Wt(n),r=(e?Math.sin(o):Math.cos(o))||.001,a=.75*t*(""+i).length;return Math.min(t/r,a)}var ki=class extends ti{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return ve(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){let{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds(),{min:o,max:r}=this,a=m=>o=e?o:m,l=m=>r=n?r:m;if(t){let m=qt(o),u=qt(r);m<0&&u<0?l(0):m>0&&u>0&&a(0)}if(o===r){let m=r===0?1:Math.abs(r*.05);l(r+m),t||a(o-m)}this.min=o,this.max=r}getTickLimit(){let t=this.options.ticks,{maxTicksLimit:e,stepSize:n}=t,o;return n?(o=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,o>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${o} ticks. Limiting to 1000.`),o=1e3)):(o=this.computeTickLimit(),e=e||11),e&&(o=Math.min(e,o)),o}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let t=this.options,e=t.ticks,n=this.getTickLimit();n=Math.max(2,n);let o={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},r=this._range||this,a=Au(o,r);return t.bounds==="ticks"&&Oa(a,this,"value"),t.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){let t=this.ticks,e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){let o=(n-e)/Math.max(t.length-1,1)/2;e-=o,n+=o}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return Wi(t,this.chart.options.locale,this.options.ticks.format)}},or=class extends ki{static id="linear";static defaults={ticks:{callback:Hi.formatters.numeric}};determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=rt(t)?t:0,this.max=rt(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){let t=this.isHorizontal(),e=t?this.width:this.height,n=Wt(this.options.ticks.minRotation),o=(t?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/o))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}},no=i=>Math.floor(gn(i)),ei=(i,t)=>Math.pow(10,no(i)+t);function Il(i){return i/Math.pow(10,no(i))===1}function Tl(i,t,e){let n=Math.pow(10,e),o=Math.floor(i/n);return Math.ceil(t/n)-o}function Vu(i,t){let e=t-i,n=no(e);for(;Tl(i,t,n)>10;)n++;for(;Tl(i,t,n)<10;)n--;return Math.min(n,no(i))}function Ru(i,{min:t,max:e}){t=Tt(i.min,t);let n=[],o=no(t),r=Vu(t,e),a=r<0?Math.pow(10,Math.abs(r)):1,l=Math.pow(10,r),m=o>r?Math.pow(10,o):0,u=Math.round((t-m)*a)/a,f=Math.floor((t-m)/l/10)*l*10,x=Math.floor((u-f)/Math.pow(10,r)),P=Tt(i.min,Math.round((m+f+x*Math.pow(10,r))*a)/a);for(;P<e;)n.push({value:P,major:Il(P),significand:x}),x>=10?x=x<15?15:20:x++,x>=20&&(r++,x=2,a=r>=0?1:a),P=Math.round((m+f+x*Math.pow(10,r))*a)/a;let k=Tt(i.max,P);return n.push({value:k,major:Il(k),significand:x}),n}var El=class extends ti{static id="logarithmic";static defaults={ticks:{callback:Hi.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){let n=ki.prototype.parse.apply(this,[t,e]);if(n===0){this._zero=!0;return}return rt(n)&&n>0?n:null}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=rt(t)?Math.max(0,t):null,this.max=rt(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!rt(this._userMin)&&(this.min=t===ei(this.min,0)?ei(this.min,-1):ei(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:t,maxDefined:e}=this.getUserBounds(),n=this.min,o=this.max,r=l=>n=t?n:l,a=l=>o=e?o:l;n===o&&(n<=0?(r(1),a(10)):(r(ei(n,-1)),a(ei(o,1)))),n<=0&&r(ei(o,-1)),o<=0&&a(ei(n,1)),this.min=n,this.max=o}buildTicks(){let t=this.options,e={min:this._userMin,max:this._userMax},n=Ru(e,this);return t.bounds==="ticks"&&Oa(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(t){return t===void 0?"0":Wi(t,this.chart.options.locale,this.options.ticks.format)}configure(){let t=this.min;super.configure(),this._startValue=gn(t),this._valueRange=gn(this.max)-gn(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(gn(t)-this._startValue)/this._valueRange)}getValueForPixel(t){let e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}};function gs(i){let t=i.ticks;if(t.display&&i.display){let e=cn(t.backdropPadding);return Ce(t.font&&t.font.size,Ke.font.size)+e.height}return 0}function Lu(i,t,e){return e=We(e)?e:[e],{w:Fd(i,t.string,e),h:e.length*t.lineHeight}}function Fl(i,t,e,n,o){return i===n||i===o?{start:t-e/2,end:t+e/2}:i<n||i>o?{start:t-e,end:t}:{start:t,end:t+e}}function zu(i){let t={l:i.left+i._padding.left,r:i.right-i._padding.right,t:i.top+i._padding.top,b:i.bottom-i._padding.bottom},e=Object.assign({},t),n=[],o=[],r=i._pointLabels.length,a=i.options.pointLabels,l=a.centerPointLabels?ke/r:0;for(let m=0;m<r;m++){let u=a.setContext(i.getPointLabelContext(m));o[m]=u.padding;let f=i.getPointPosition(m,i.drawingArea+o[m],l),x=Jn(u.font),P=Lu(i.ctx,x,i._pointLabels[m]);n[m]=P;let k=Ot(i.getIndexAngle(m)+l),I=Math.round(No(k)),F=Fl(I,f.x,P.w,0,180),D=Fl(I,f.y,P.h,90,270);Nu(e,t,k,F,D)}i.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),i._pointLabelItems=Uu(i,n,o)}function Nu(i,t,e,n,o){let r=Math.abs(Math.sin(e)),a=Math.abs(Math.cos(e)),l=0,m=0;n.start<t.l?(l=(t.l-n.start)/r,i.l=Math.min(i.l,t.l-l)):n.end>t.r&&(l=(n.end-t.r)/r,i.r=Math.max(i.r,t.r+l)),o.start<t.t?(m=(t.t-o.start)/a,i.t=Math.min(i.t,t.t-m)):o.end>t.b&&(m=(o.end-t.b)/a,i.b=Math.max(i.b,t.b+m))}function Bu(i,t,e){let n=i.drawingArea,{extra:o,additionalAngle:r,padding:a,size:l}=e,m=i.getPointPosition(t,n+o+a,r),u=Math.round(No(Ot(m.angle+Ye))),f=Wu(m.y,l.h,u),x=Gu(u),P=qu(m.x,l.w,x);return{visible:!0,x:m.x,y:f,textAlign:x,left:P,top:f,right:P+l.w,bottom:f+l.h}}function ju(i,t){if(!t)return!0;let{left:e,top:n,right:o,bottom:r}=i;return!(sn({x:e,y:n},t)||sn({x:e,y:r},t)||sn({x:o,y:n},t)||sn({x:o,y:r},t))}function Uu(i,t,e){let n=[],o=i._pointLabels.length,r=i.options,{centerPointLabels:a,display:l}=r.pointLabels,m={extra:gs(r)/2,additionalAngle:a?ke/o:0},u;for(let f=0;f<o;f++){m.padding=e[f],m.size=t[f];let x=Bu(i,f,m);n.push(x),l==="auto"&&(x.visible=ju(x,u),x.visible&&(u=x))}return n}function Gu(i){return i===0||i===180?"center":i<180?"left":"right"}function qu(i,t,e){return e==="right"?i-=t:e==="center"&&(i-=t/2),i}function Wu(i,t,e){return e===90||e===270?i-=t/2:(e>270||e<90)&&(i-=t),i}function Hu(i,t,e){let{left:n,top:o,right:r,bottom:a}=e,{backdropColor:l}=t;if(!ve(l)){let m=Ba(t.borderRadius),u=cn(t.backdropPadding);i.fillStyle=l;let f=n-u.left,x=o-u.top,P=r-n+u.width,k=a-o+u.height;Object.values(m).some(I=>I!==0)?(i.beginPath(),za(i,{x:f,y:x,w:P,h:k,radius:m}),i.fill()):i.fillRect(f,x,P,k)}}function $u(i,t){let{ctx:e,options:{pointLabels:n}}=i;for(let o=t-1;o>=0;o--){let r=i._pointLabelItems[o];if(!r.visible)continue;let a=n.setContext(i.getPointLabelContext(o));Hu(e,a,r);let l=Jn(a.font),{x:m,y:u,textAlign:f}=r;$i(e,i._pointLabels[o],m,u+l.lineHeight/2,l,{color:a.color,textAlign:f,textBaseline:"middle"})}}function rp(i,t,e,n){let{ctx:o}=i;if(e)o.arc(i.xCenter,i.yCenter,t,0,Be);else{let r=i.getPointPosition(0,t);o.moveTo(r.x,r.y);for(let a=1;a<n;a++)r=i.getPointPosition(a,t),o.lineTo(r.x,r.y)}}function Yu(i,t,e,n,o){let r=i.ctx,a=t.circular,{color:l,lineWidth:m}=t;!a&&!n||!l||!m||e<0||(r.save(),r.strokeStyle=l,r.lineWidth=m,r.setLineDash(o.dash||[]),r.lineDashOffset=o.dashOffset,r.beginPath(),rp(i,e,a,n),r.closePath(),r.stroke(),r.restore())}function Ku(i,t,e){return Nn(i,{label:e,index:t,type:"pointLabel"})}var Dl=class extends ki{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Hi.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let t=this._padding=cn(gs(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!1);this.min=rt(t)&&!isNaN(t)?t:0,this.max=rt(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/gs(this.options))}generateTickLabels(t){ki.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,n)=>{let o=He(this.options.pointLabels.callback,[e,n],this);return o||o===0?o:""}).filter((e,n)=>this.chart.getDataVisibility(n))}fit(){let t=this.options;t.display&&t.pointLabels.display?zu(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,o){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-o)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,o))}getIndexAngle(t){let e=Be/(this._pointLabels.length||1),n=this.options.startAngle||0;return Ot(t*e+Wt(n))}getDistanceFromCenterForValue(t){if(ve(t))return NaN;let e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(ve(t))return NaN;let e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){let e=this._pointLabels||[];if(t>=0&&t<e.length){let n=e[t];return Ku(this.getContext(),t,n)}}getPointPosition(t,e,n=0){let o=this.getIndexAngle(t)-Ye+n;return{x:Math.cos(o)*e+this.xCenter,y:Math.sin(o)*e+this.yCenter,angle:o}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){let{left:e,top:n,right:o,bottom:r}=this._pointLabelItems[t];return{left:e,top:n,right:o,bottom:r}}drawBackground(){let{backgroundColor:t,grid:{circular:e}}=this.options;if(t){let n=this.ctx;n.save(),n.beginPath(),rp(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){let t=this.ctx,e=this.options,{angleLines:n,grid:o,border:r}=e,a=this._pointLabels.length,l,m,u;if(e.pointLabels.display&&$u(this,a),o.display&&this.ticks.forEach((f,x)=>{if(x!==0||x===0&&this.min<0){m=this.getDistanceFromCenterForValue(f.value);let P=this.getContext(x),k=o.setContext(P),I=r.setContext(P);Yu(this,k,m,a,I)}}),n.display){for(t.save(),l=a-1;l>=0;l--){let f=n.setContext(this.getPointLabelContext(l)),{color:x,lineWidth:P}=f;!P||!x||(t.lineWidth=P,t.strokeStyle=x,t.setLineDash(f.borderDash),t.lineDashOffset=f.borderDashOffset,m=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),u=this.getPointPosition(l,m),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(u.x,u.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){let t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;let o=this.getIndexAngle(0),r,a;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(o),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((l,m)=>{if(m===0&&this.min>=0&&!e.reverse)return;let u=n.setContext(this.getContext(m)),f=Jn(u.font);if(r=this.getDistanceFromCenterForValue(this.ticks[m].value),u.showLabelBackdrop){t.font=f.string,a=t.measureText(l.label).width,t.fillStyle=u.backdropColor;let x=cn(u.backdropPadding);t.fillRect(-a/2-x.left,-r-f.size/2-x.top,a+x.width,f.size+x.height)}$i(t,l.label,0,-r,f,{color:u.color,strokeColor:u.textStrokeColor,strokeWidth:u.textStrokeWidth})}),t.restore()}drawTitle(){}},sr={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Et=Object.keys(sr);function Al(i,t){return i-t}function Vl(i,t){if(ve(t))return null;let e=i._adapter,{parser:n,round:o,isoWeekday:r}=i._parseOpts,a=t;return typeof n=="function"&&(a=n(a)),rt(a)||(a=typeof n=="string"?e.parse(a,n):e.parse(a)),a===null?null:(o&&(a=o==="week"&&(yi(r)||r===!0)?e.startOf(a,"isoWeek",r):e.startOf(a,o)),+a)}function Rl(i,t,e,n){let o=Et.length;for(let r=Et.indexOf(i);r<o-1;++r){let a=sr[Et[r]],l=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((e-t)/(l*a.size))<=n)return Et[r]}return Et[o-1]}function Xu(i,t,e,n,o){for(let r=Et.length-1;r>=Et.indexOf(e);r--){let a=Et[r];if(sr[a].common&&i._adapter.diff(o,n,a)>=t-1)return a}return Et[e?Et.indexOf(e):0]}function Qu(i){for(let t=Et.indexOf(i)+1,e=Et.length;t<e;++t)if(sr[Et[t]].common)return Et[t]}function Ll(i,t,e){if(!e)i[t]=!0;else if(e.length){let{lo:n,hi:o}=Bo(e,t),r=e[n]>=t?e[n]:e[o];i[r]=!0}}function Ju(i,t,e,n){let o=i._adapter,r=+o.startOf(t[0].value,n),a=t[t.length-1].value,l,m;for(l=r;l<=a;l=+o.add(l,1,n))m=e[l],m>=0&&(t[m].major=!0);return t}function zl(i,t,e){let n=[],o={},r=t.length,a,l;for(a=0;a<r;++a)l=t[a],o[l]=a,n.push({value:l,major:!1});return r===0||!e?n:Ju(i,n,o,e)}var Nl=(()=>{class i extends ti{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){let o=e.time||(e.time={}),r=this._adapter=new sg._date(e.adapters.date);r.init(n),vi(o.displayFormats,r.formats()),this._parseOpts={parser:o.parser,round:o.round,isoWeekday:o.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Vl(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let e=this.options,n=this._adapter,o=e.time.unit||"day",{min:r,max:a,minDefined:l,maxDefined:m}=this.getUserBounds();function u(f){!l&&!isNaN(f.min)&&(r=Math.min(r,f.min)),!m&&!isNaN(f.max)&&(a=Math.max(a,f.max))}(!l||!m)&&(u(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&u(this.getMinMax(!1))),r=rt(r)&&!isNaN(r)?r:+n.startOf(Date.now(),o),a=rt(a)&&!isNaN(a)?a:+n.endOf(Date.now(),o)+1,this.min=Math.min(r,a-1),this.max=Math.max(r+1,a)}_getLabelBounds(){let e=this.getLabelTimestamps(),n=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],o=e[e.length-1]),{min:n,max:o}}buildTicks(){let e=this.options,n=e.time,o=e.ticks,r=o.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);let a=this.min,l=this.max,m=Md(r,a,l);return this._unit=n.unit||(o.autoSkip?Rl(n.minUnit,this.min,this.max,this._getLabelCapacity(a)):Xu(this,m.length,n.minUnit,this.min,this.max)),this._majorUnit=!o.major.enabled||this._unit==="year"?void 0:Qu(this._unit),this.initOffsets(r),e.reverse&&m.reverse(),zl(this,m,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,o=0,r,a;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,a=this.getDecimalForValue(e[e.length-1]),e.length===1?o=a:o=(a-this.getDecimalForValue(e[e.length-2]))/2);let l=e.length<3?.5:.25;n=wt(n,0,l),o=wt(o,0,l),this._offsets={start:n,end:o,factor:1/(n+1+o)}}_generate(){let e=this._adapter,n=this.min,o=this.max,r=this.options,a=r.time,l=a.unit||Rl(a.minUnit,n,o,this._getLabelCapacity(n)),m=Ce(r.ticks.stepSize,1),u=l==="week"?a.isoWeekday:!1,f=yi(u)||u===!0,x={},P=n,k,I;if(f&&(P=+e.startOf(P,"isoWeek",u)),P=+e.startOf(P,f?"day":l),e.diff(o,n,l)>1e5*m)throw new Error(n+" and "+o+" are too far apart with stepSize of "+m+" "+l);let F=r.ticks.source==="data"&&this.getDataTimestamps();for(k=P,I=0;k<o;k=+e.add(k,m,l),I++)Ll(x,k,F);return(k===o||r.bounds==="ticks"||I===1)&&Ll(x,k,F),Object.keys(x).sort(Al).map(D=>+D)}getLabelForValue(e){let n=this._adapter,o=this.options.time;return o.tooltipFormat?n.format(e,o.tooltipFormat):n.format(e,o.displayFormats.datetime)}format(e,n){let r=this.options.time.displayFormats,a=this._unit,l=n||r[a];return this._adapter.format(e,l)}_tickFormatFunction(e,n,o,r){let a=this.options,l=a.ticks.callback;if(l)return He(l,[e,n,o],this);let m=a.time.displayFormats,u=this._unit,f=this._majorUnit,x=u&&m[u],P=f&&m[f],k=o[n],I=f&&P&&k&&k.major;return this._adapter.format(e,r||(I?P:x))}generateTickLabels(e){let n,o,r;for(n=0,o=e.length;n<o;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){let n=this._offsets,o=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+o)*n.factor)}getValueForPixel(e){let n=this._offsets,o=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+o*(this.max-this.min)}_getLabelSize(e){let n=this.options.ticks,o=this.ctx.measureText(e).width,r=Wt(this.isHorizontal()?n.maxRotation:n.minRotation),a=Math.cos(r),l=Math.sin(r),m=this._resolveTickFontOptions(0).size;return{w:o*a+m*l,h:o*l+m*a}}_getLabelCapacity(e){let n=this.options.time,o=n.displayFormats,r=o[n.unit]||o.millisecond,a=this._tickFormatFunction(e,0,zl(this,[e],this._majorUnit),r),l=this._getLabelSize(a),m=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return m>0?m:1}getDataTimestamps(){let e=this._cache.data||[],n,o;if(e.length)return e;let r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,o=r.length;n<o;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){let e=this._cache.labels||[],n,o;if(e.length)return e;let r=this.getLabels();for(n=0,o=r.length;n<o;++n)e.push(Vl(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Ia(e.sort(Al))}}return i})();function Qo(i,t,e){let n=0,o=i.length-1,r,a,l,m;e?(t>=i[n].pos&&t<=i[o].pos&&({lo:n,hi:o}=An(i,"pos",t)),{pos:r,time:l}=i[n],{pos:a,time:m}=i[o]):(t>=i[n].time&&t<=i[o].time&&({lo:n,hi:o}=An(i,"time",t)),{time:r,pos:l}=i[n],{time:a,pos:m}=i[o]);let u=a-r;return u?l+(m-l)*(t-r)/u:l}var Bl=class extends Nl{static id="timeseries";static defaults=Nl.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Qo(e,this.min),this._tableRange=Qo(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){let{min:e,max:n}=this,o=[],r=[],a,l,m,u,f;for(a=0,l=t.length;a<l;++a)u=t[a],u>=e&&u<=n&&o.push(u);if(o.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(a=0,l=o.length;a<l;++a)f=o[a+1],m=o[a-1],u=o[a],Math.round((f+m)/2)!==u&&r.push({time:u,pos:a/(l-1)});return r}_generate(){let t=this.min,e=this.max,n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(e)||n.length===1)&&n.push(e),n.sort((o,r)=>o-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;let e=this.getDataTimestamps(),n=this.getLabelTimestamps();return e.length&&n.length?t=this.normalize(e.concat(n)):t=e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Qo(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){let e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return Qo(this._table,n*this._tableRange+this._minPos,!0)}};var Zu=(i,t)=>({"bg-[#6B21A8] text-white":i,"text-[#6B21A8] hover:text-[#4C1D95]":t});function e0(i,t){if(i&1){let e=E();s(0,"button",24),v("click",function(){let o=b(e).$implicit,r=_();return C(r.selectTimeFrame(o))}),p(1),c()}if(i&2){let e=t.$implicit,n=_();g("ngClass",Gt(2,Zu,n.selectedTimeFrame===e,n.selectedTimeFrame!==e)),d(),T(" ",e," ")}}var cr=class i{constructor(t,e){this.dashboardService=t;this.authServ=e;this.salesOverviewDetail={revenue:0,expenses:0,profit:0,total_orders:0,total_sales:0,unique_customers:0,order_detail:[]},Lt.register(ar,Si)}userName="Krishna";monthlyEarning=1e4;statisticsChart;ordersChart;ordersData={total:1e4,delivered:9500,pending:500};timeFrames=["Daily","Weekly","Monthly","Yearly"];selectedTimeFrame="Weekly";fullOverviewData;salesOverviewDetail;statistics={profit:2e7,expense:23e3,revenue:23e6};metrics={orders:300,sales:23e6,expenses:23e3,netProfit:23e3,customers:23e3};ordersTrendData={labels:Array.from({length:12},(t,e)=>`Point ${e+1}`),values:[150,220,180,200,250,230,180,220,190,200,180,250]};navItems=["Explore","Dashboards","Orders","Dues","Transactions"];selectedNav="Dashboards";ngOnInit(){this.triggerGetData(),this.authServ.providerChange$.subscribe(t=>{t&&this.triggerGetData()})}ngAfterViewInit(){setTimeout(()=>{this.createStatisticsChart(),this.createOrdersTrendChart()},100)}createStatisticsChart(){let t=document.getElementById("statisticsChartOverview");t&&(this.statisticsChart&&this.statisticsChart.destroy(),this.statisticsChart=new Lt(t,{type:"doughnut",data:{labels:["Revenue","Profit","Expense"],datasets:[{data:[this.salesOverviewDetail.revenue,this.salesOverviewDetail.profit,this.salesOverviewDetail.expenses],backgroundColor:["#8B3DFF","#4CAF50","#FFA726"],borderWidth:0}]},options:{cutout:"70%",plugins:{legend:{display:!1}},responsive:!0,maintainAspectRatio:!0}}))}createOrdersTrendChart(){let t=document.getElementById("ordersTrendChart1");t&&(this.ordersChart&&this.ordersChart.destroy(),this.ordersChart=new Lt(t,{type:"line",data:{labels:this.ordersTrendData.labels,datasets:[{data:this.ordersTrendData.values,borderColor:"#2196F3",backgroundColor:"rgba(33, 150, 243, 0.1)",fill:!0,tension:.4,borderWidth:2,pointRadius:0}]},options:{plugins:{legend:{display:!1}},scales:{x:{display:!1},y:{display:!1}},maintainAspectRatio:!1,responsive:!0}}))}selectTimeFrame(t){this.selectedTimeFrame=t,this.applyTimeFrameData()}selectNavItem(t){this.selectedNav=t}triggerGetData(){let t=this.authServ.getSelectedProviderId();this.dashboardService.getProviderDashboardDetail(Tn[1],t).subscribe(e=>{this.fullOverviewData=e,this.applyTimeFrameData()})}applyTimeFrameData(){let t=this.selectedTimeFrame.toLowerCase(),e=this.fullOverviewData[t]?.[0];if(!e)return;this.salesOverviewDetail=e;let n=this.convertOrderDetailToTrendData(e.order_detail,t);this.ordersTrendData=n,this.createStatisticsChart(),this.createOrdersTrendChart()}convertOrderDetailToTrendData(t,e){let n=[],o=[],r=new Map;if(t.forEach(a=>{let l=Object.keys(a)[0],m=a[l];r.set(l,m)}),e==="yearly"){let a=new Date().getFullYear();n=Array.from({length:5},(l,m)=>`${a-4+m}`)}else if(e==="monthly")n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];else if(e==="weekly")n=Array.from({length:4},(a,l)=>`Week ${l+1}`);else if(e==="daily"){let a=new Date;n=Array.from({length:7},(l,m)=>{let u=new Date(a);return u.setDate(a.getDate()-(6-m)),u.toLocaleDateString("en-GB",{day:"2-digit",month:"short"})})}return o=n.map(a=>{for(let l of r.keys())if(l.startsWith(a))return r.get(l)??0;return 0}),{labels:n,values:o}}static \u0275fac=function(e){return new(e||i)(w(pt),w(G))};static \u0275cmp=R({type:i,selectors:[["chart-overview"]],decls:54,vars:7,consts:[[1,"section-header","flex","justify-center"],[1,"flex"],["class","text-sm tracking-wide px-6 py-1.5 rounded-b-md transition duration-200",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"dashboard"],[1,"card","statistics-card"],[1,"card-title"],[1,"statistics-content"],["id","statisticsChartOverview","width","150","height","150"],[1,"chart-center-text"],[1,"label"],[1,"amount"],[1,"chart-legend"],[1,"legend-item"],[1,"dot","expense"],[1,"dot","profit"],[1,"dot","revenue"],[1,"card","order-card","border-right","flex","justify-center","items-center","gap-8"],[1,"order-value"],[1,"trend-chart"],["id","ordersTrendChart1"],[1,"grid"],[1,"card","grid-card","bg-white","shadow-lg","rounded-xl","p-4","border-top"],[1,"card-value"],[1,"card","grid-card","border-top"],[1,"text-sm","tracking-wide","px-6","py-1.5","rounded-b-md","transition","duration-200",3,"click","ngClass"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1),y(2,e0,2,5,"button",2),c()(),s(3,"div",3)(4,"div",4)(5,"h4",5),p(6,"Statistics"),c(),s(7,"div",6)(8,"div"),h(9,"canvas",7),s(10,"div",8)(11,"span",9),p(12,"Profit"),c(),s(13,"span",10),p(14),c()()(),s(15,"div",11)(16,"div",12),h(17,"span",13),p(18," Expense"),c(),s(19,"div",12),h(20,"span",14),p(21," Profit"),c(),s(22,"div",12),h(23,"span",15),p(24," Revenue"),c()()()(),s(25,"div",16)(26,"div")(27,"h4",5),p(28,"Orders"),c(),s(29,"span",17),p(30),c()(),s(31,"div",18),h(32,"canvas",19),c()(),s(33,"div",20)(34,"div",21)(35,"h4",5),p(36,"Sales"),c(),s(37,"div",22),p(38),c()(),s(39,"div",23)(40,"h4",5),p(41,"Expenses"),c(),s(42,"div",22),p(43),c()(),s(44,"div",23)(45,"h4",5),p(46,"Customers"),c(),s(47,"div",22),p(48),c()(),s(49,"div",23)(50,"h4",5),p(51,"Net Profit"),c(),s(52,"div",22),p(53),c()()()()),e&2&&(d(2),g("ngForOf",n.timeFrames),d(12),S(n.salesOverviewDetail.profit),d(16),S(n.salesOverviewDetail.total_orders),d(8),S(n.salesOverviewDetail.total_sales),d(5),S(n.salesOverviewDetail.expenses),d(5),S(n.salesOverviewDetail.unique_customers),d(5),S(n.salesOverviewDetail.profit))},dependencies:[Se,ee],styles:[".dashboard-wrapper[_ngcontent-%COMP%]{height:100vh;background-color:#f5f5f5;overflow-y:auto}.dashboard-container[_ngcontent-%COMP%]{max-width:480px;margin:0 auto;padding:16px}.header[_ngcontent-%COMP%]{margin-bottom:20px}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#5d157c;margin-bottom:8px;font-size:1.5rem;font-weight:500}.header[_ngcontent-%COMP%]   .earning[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;color:#666;font-size:.9rem;margin-bottom:4px}.header[_ngcontent-%COMP%]   .earning[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:500;color:#333}.order-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-bottom:20px}.order-stats[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{background:#fff;padding:16px;border-radius:12px;text-align:center}.order-stats[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-bottom:8px;font-size:24px;color:#5d157c}.order-stats[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;color:#666;font-size:.9rem;margin-bottom:4px}.order-stats[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:500;color:#333}.main-content[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem;color:#333}.section-header[_ngcontent-%COMP%]   .time-frames[_ngcontent-%COMP%]{display:flex;gap:8px}.section-header[_ngcontent-%COMP%]   .time-frames[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:20px;background:#f5f5f5;color:#666;font-size:.9rem}.section-header[_ngcontent-%COMP%]   .time-frames[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#5d157c;color:#fff}.statistics-section[_ngcontent-%COMP%]{margin-bottom:24px}.statistics-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:16px;color:#333}.statistics-section[_ngcontent-%COMP%]   .chart-wrapper[_ngcontent-%COMP%]{max-width:300px;margin:0 auto}.statistics-section[_ngcontent-%COMP%]   .chart-wrapper[_ngcontent-%COMP%]   .donut-chart[_ngcontent-%COMP%]{position:relative;width:100%;padding-bottom:100%}.statistics-section[_ngcontent-%COMP%]   .chart-wrapper[_ngcontent-%COMP%]   .donut-chart[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.statistics-section[_ngcontent-%COMP%]   .chart-wrapper[_ngcontent-%COMP%]   .donut-chart[_ngcontent-%COMP%]   .center-text[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center}.statistics-section[_ngcontent-%COMP%]   .chart-wrapper[_ngcontent-%COMP%]   .donut-chart[_ngcontent-%COMP%]   .center-text[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;color:#666;font-size:.9rem;margin-bottom:4px}.statistics-section[_ngcontent-%COMP%]   .chart-wrapper[_ngcontent-%COMP%]   .donut-chart[_ngcontent-%COMP%]   .center-text[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:500;color:#333}.statistics-section[_ngcontent-%COMP%]   .chart-wrapper[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:16px;margin-top:16px}.statistics-section[_ngcontent-%COMP%]   .chart-wrapper[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:.9rem;color:#666}.statistics-section[_ngcontent-%COMP%]   .chart-wrapper[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%}.statistics-section[_ngcontent-%COMP%]   .chart-wrapper[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .dot.revenue[_ngcontent-%COMP%]{background:#5d157c}.statistics-section[_ngcontent-%COMP%]   .chart-wrapper[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .dot.profit[_ngcontent-%COMP%]{background:#4caf50}.statistics-section[_ngcontent-%COMP%]   .chart-wrapper[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .dot.expense[_ngcontent-%COMP%]{background:#ffa726}.statistics-section[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.statistics-section[_ngcontent-%COMP%]{border-radius:.75rem;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1));padding:1rem;--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.statistics-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5rem;font-weight:600;--tw-text-opacity: 1;color:rgb(22 101 52 / var(--tw-text-opacity, 1))}.chart-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1rem}.donut-chart[_ngcontent-%COMP%]{position:relative;height:120px;width:120px}.center-text[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center}.center-text[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem;--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.center-text[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5rem;font-weight:700;--tw-text-opacity: 1;color:rgb(21 128 61 / var(--tw-text-opacity, 1))}.chart-legend[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.875rem;line-height:1.25rem}.legend-item[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{display:inline-block;height:.75rem;width:.75rem;border-radius:9999px}.legend-item[_ngcontent-%COMP%]   .revenue[_ngcontent-%COMP%]{background-color:#7e22ce}.legend-item[_ngcontent-%COMP%]   .profit[_ngcontent-%COMP%]{background-color:#15803d}.legend-item[_ngcontent-%COMP%]   .expense[_ngcontent-%COMP%]{background-color:#fbbf24}.dashboard[_ngcontent-%COMP%]{max-width:380px;margin:0 .5rem;display:flex;flex-direction:column;gap:16px}.card[_ngcontent-%COMP%]{background:#fff;box-shadow:0 2.5px 6.5px #1c191d4a,0 0 2px #1c191d52;padding:16px}.border-right[_ngcontent-%COMP%]{border-radius:0 10px 10px 0!important}.border-top[_ngcontent-%COMP%]{border-radius:0 0 10px 10px!important}.card-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#053b17;margin-bottom:12px}.statistics-card[_ngcontent-%COMP%]   .statistics-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.chart-container[_ngcontent-%COMP%]{position:relative;width:100px;height:100px}.chart-center-text[_ngcontent-%COMP%]{position:relative;left:50%;bottom:75px;transform:translate(-50%,-50%);text-align:center;display:flex;flex-direction:column}.chart-center-text[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:11px;color:#7a7a7a}.chart-center-text[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#2c3e50}.chart-legend[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;font-size:12px}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;color:#4a4a4a}.dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%}.dot.expense[_ngcontent-%COMP%]{background-color:#f1c40f}.dot.profit[_ngcontent-%COMP%]{background-color:#27ae60}.dot.revenue[_ngcontent-%COMP%]{background-color:#8e44ad}.order-card[_ngcontent-%COMP%]{padding:16px;border-left:.5rem solid #6a1b9a}.order-value[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#5d157c;margin-bottom:8px}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px 15px}.grid-card[_ngcontent-%COMP%]{border-top:.5rem solid #6a1b9a;padding:16px;text-align:center}.card-value[_ngcontent-%COMP%]{font-size:17px;font-weight:600;color:#5d157c;margin-top:6px}.trend-chart[_ngcontent-%COMP%]{width:60%;max-width:300px;height:100px;position:relative}"]})};var n0=(i,t)=>({"bg-[#6B21A8] text-white":i,"text-[#6B21A8] hover:text-[#4C1D95]":t});function i0(i,t){if(i&1){let e=E();s(0,"button",18),v("click",function(){let o=b(e).$implicit,r=_();return C(r.selectTimeFrame(o))}),p(1),c()}if(i&2){let e=t.$implicit,n=_();g("ngClass",Gt(2,n0,n.selectedTimeFrame===e,n.selectedTimeFrame!==e)),d(),T(" ",e," ")}}var dr=class i{constructor(t,e){this.dashboardService=t;this.authServ=e;Lt.register(op,or,Gl,tp,ir,np)}userName="Krishna";monthlyEarning=1e4;statisticsChart;ordersChart;fullSalesSummaryData;salesSummaryDetail;ordersData={total:1e4,delivered:9500,pending:500};timeFrames=["Daily","Weekly","Monthly","Yearly"];selectedTimeFrame="Weekly";statisticsData={labels:["Jul","Aug","Sep","Oct","Nov","Dec"],sales:[800,750,500,500,600,800],profit:[400,300,200,200,250,400]};metrics={orders:300,sales:23e6,expenses:23e3,netProfit:23e3,customers:23e3};ordersTrendData={labels:Array.from({length:12},(t,e)=>`Point ${e+1}`),values:[150,220,180,200,250,230,180,220,190,200,180,250]};navItems=["Explore","Dashboards","Orders","Dues","Transactions"];selectedNav="Dashboards";ngOnInit(){this.triggerGetData(),this.authServ.providerChange$.subscribe(t=>{t&&this.triggerGetData()})}ngAfterViewInit(){setTimeout(()=>{this.createStatisticsChart()},100)}createStatisticsChart(){let t=document.getElementById("statisticsChartSales");t&&(this.statisticsChart&&this.statisticsChart.destroy(),this.statisticsChart=new Lt(t,{type:"bar",data:{labels:this.statisticsData.labels,datasets:[{label:"Sales",data:this.statisticsData.sales,backgroundColor:"#8B3DFF",borderColor:"#8B3DFF",borderRadius:4,barThickness:20},{label:"Profit",data:this.statisticsData.profit,backgroundColor:"#E6D5FF",borderColor:"#E6D5FF",borderRadius:4,barThickness:20}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",align:"start",labels:{boxWidth:8,boxHeight:8,usePointStyle:!0,pointStyle:"circle",padding:20,color:"#666"}},title:{display:!0,text:"Statistics",align:"start",color:"#1E4620",padding:{bottom:30}}},scales:{x:{grid:{display:!0,color:"#f0f0f0"},ticks:{color:"#666"}},y:{display:!0,beginAtZero:!0,grid:{display:!0,color:"#f0f0f0"},ticks:{color:"#666",callback:function(e){return Number(e).toLocaleString("en-IN",{maximumFractionDigits:0})}},title:{display:!0,text:"Amount (\u20B9)",color:"#333",font:{size:12,weight:"bold"}}}}}}))}createOrdersTrendChart(){let t=document.getElementById("ordersTrendChart2");t&&(this.ordersChart=new Lt(t,{type:"line",data:{labels:this.ordersTrendData.labels,datasets:[{data:this.ordersTrendData.values,borderColor:"#2196F3",backgroundColor:"rgba(33, 150, 243, 0.1)",fill:!0,tension:.4,borderWidth:2,pointRadius:0}]},options:{plugins:{legend:{display:!1}},scales:{x:{display:!1},y:{display:!1}},maintainAspectRatio:!1,responsive:!0}}))}selectTimeFrame(t){this.selectedTimeFrame=t,this.applyTimeFrameData()}selectNavItem(t){this.selectedNav=t}triggerGetData(){let t=this.authServ.getSelectedProviderId();this.dashboardService.getProviderDashboardDetail(Tn[2],t).subscribe(e=>{this.fullSalesSummaryData=e,this.applyTimeFrameData()})}applyTimeFrameData(){let t=this.selectedTimeFrame.toLowerCase(),e=this.fullSalesSummaryData[t]?.[0];if(!e)return;this.salesSummaryDetail=e;let n=e.sales_trend||[],o=[],r=[],a=[];if(this.selectedTimeFrame==="Yearly"){let l=Array.from({length:5},(m,u)=>`${2021+u}`);for(let m of l){let u=n.find(f=>f.label===m);o.push(m),r.push(u?u.sales:0),a.push(u?u.profit:0)}}else if(this.selectedTimeFrame==="Monthly"){let l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(let m of l){let u=n.find(f=>f.label.startsWith(m));o.push(m),r.push(u?u.sales:0),a.push(u?u.profit:0)}}else n.forEach(l=>{o.push(l.label),r.push(l.sales),a.push(l.profit)});this.statisticsData={labels:o,sales:r,profit:a},this.createStatisticsChart()}static \u0275fac=function(e){return new(e||i)(w(pt),w(G))};static \u0275cmp=R({type:i,selectors:[["chart-sales"]],decls:40,vars:5,consts:[[1,"section-header","flex","justify-center"],[1,"flex"],["class","text-sm tracking-wide px-6 py-1.5 rounded-b-md transition duration-200",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"dashboard"],[1,"card","statistics-section"],[1,"card-title","mb-4"],[1,"chart-wrapper"],["id","statisticsChartSales"],[1,"chart-legend"],[1,"legend-item"],[1,"legend-color","sales-color"],[1,"legend-label"],[1,"legend-color","profit-color"],[1,"grid"],[1,"card","grid-card","bg-white","shadow-lg","rounded-xl","p-4","border-top"],[1,"card-title"],[1,"card-value"],[1,"card","grid-card","border-top"],[1,"text-sm","tracking-wide","px-6","py-1.5","rounded-b-md","transition","duration-200",3,"click","ngClass"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1),y(2,i0,2,5,"button",2),c()(),s(3,"div",3)(4,"div",4)(5,"div",5),p(6,"Statistics"),c(),s(7,"div",6),h(8,"canvas",7),c(),s(9,"div",8)(10,"div",9),h(11,"span",10),s(12,"span",11),p(13,"Sales"),c()(),s(14,"div",9),h(15,"span",12),s(16,"span",11),p(17,"Profit"),c()()()(),s(18,"div",13)(19,"div",14)(20,"div")(21,"h4",15),p(22,"Sale"),c(),s(23,"span",16),p(24),c()()(),s(25,"div",17)(26,"h4",15),p(27,"Pending"),c(),s(28,"span",16),p(29),c()(),s(30,"div",17)(31,"h4",15),p(32,"Avg Sale Value"),c(),s(33,"span",16),p(34),c()(),s(35,"div",17)(36,"h4",15),p(37,"Top Sale Product"),c(),s(38,"span",16),p(39),c()()()()),e&2&&(d(2),g("ngForOf",n.timeFrames),d(22),S(n.salesSummaryDetail.total_sales||0),d(5),S(n.salesSummaryDetail.pending_orders||0),d(5),S(n.salesSummaryDetail.avg_sale_value||0),d(5),T(" ",n.salesSummaryDetail.top_selling_product||"-"," "))},dependencies:[Se,ee],styles:[".section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem;color:#333}.section-header[_ngcontent-%COMP%]   .time-frames[_ngcontent-%COMP%]{display:flex;gap:8px}.section-header[_ngcontent-%COMP%]   .time-frames[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:20px;background:#f5f5f5;color:#666;font-size:.9rem}.section-header[_ngcontent-%COMP%]   .time-frames[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#8b3dff;color:#fff}.statistics-section[_ngcontent-%COMP%]{margin-bottom:24px;background:#fff;border-radius:12px}.statistics-section[_ngcontent-%COMP%]   .chart-wrapper[_ngcontent-%COMP%]{width:100%;height:300px;padding:16px}.statistics-section[_ngcontent-%COMP%]   .chart-wrapper[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{width:100%!important;height:100%!important}.statistics-section[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:0 16px 16px;font-size:.85rem;font-family:Poppins,sans-serif;color:#4b5563}.statistics-section[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.statistics-section[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]   .legend-color[_ngcontent-%COMP%]{width:14px;height:14px;border-radius:4px}.statistics-section[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]   .legend-color.sales-color[_ngcontent-%COMP%]{background-color:#8b3dff}.statistics-section[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]   .legend-color.profit-color[_ngcontent-%COMP%]{background-color:#e6d5ff}.statistics-section[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]   .legend-label[_ngcontent-%COMP%]{white-space:nowrap}.card[_ngcontent-%COMP%]{background:#fff;box-shadow:0 2.5px 6.5px #1c191d4a,0 0 2px #1c191d52}.border-right[_ngcontent-%COMP%]{border-radius:0 10px 10px 0!important}.border-top[_ngcontent-%COMP%]{border-radius:0 0 10px 10px!important}.card-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#053b17;margin-bottom:12px;text-align:center;font-family:Poppins,sans-serif}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px 15px}.card-value[_ngcontent-%COMP%]{font-size:17px;font-weight:600;color:#5d157c;margin-top:6px}.dashboard[_ngcontent-%COMP%]{max-width:380px;margin:0 .5rem;display:flex;flex-direction:column;gap:16px}.grid-card[_ngcontent-%COMP%]{border-top:.5rem solid #6a1b9a;padding:16px;text-align:center}"]})};var r0=(i,t)=>({"bg-[#6B21A8] text-white":i,"text-[#6B21A8] hover:text-[#4C1D95]":t});function a0(i,t){if(i&1){let e=E();s(0,"button",14),v("click",function(){let o=b(e).$implicit,r=_();return C(r.selectTimeFrame(o))}),p(1),c()}if(i&2){let e=t.$implicit,n=_();g("ngClass",Gt(2,r0,n.selectedTimeFrame===e,n.selectedTimeFrame!==e)),d(),T(" ",e," ")}}var lr=class i{constructor(t,e){this.dashboardService=t;this.authServ=e;Lt.register(ql,Si,ar)}statisticsChart;userName="Krishna";monthlyEarning=1e4;timeFrames=["Daily","Weekly","Monthly","Yearly"];selectedTimeFrame="Weekly";customerTrendData={labels:[],data:[]};fullCustomerTrendData;customerSummaryDetail;navItems=["Explore","Dashboards","Orders","Dues","Transactions"];selectedNav="Dashboards";ngOnInit(){this.fetchCustomerDataOnce(),this.authServ.providerChange$.subscribe(t=>{t&&this.fetchCustomerDataOnce()})}ngAfterViewInit(){setTimeout(()=>{this.createCustomerTrendChart()},100)}fetchCustomerDataOnce(){let t=this.authServ.getSelectedProviderId();this.dashboardService.getProviderDashboardDetail(Tn[3],t).subscribe(e=>{this.fullCustomerTrendData=e,this.updateChartForTimeframe()})}selectTimeFrame(t){this.selectedTimeFrame=t,this.updateChartForTimeframe()}selectNavItem(t){this.selectedNav=t}updateChartForTimeframe(){let t=this.selectedTimeFrame.toLowerCase(),e=this.fullCustomerTrendData[t]?.[0];if(!e)return;this.customerSummaryDetail=e;let n=e.customer_trend||[],o=[],r=[];if(this.selectedTimeFrame==="Yearly")o=Array.from({length:5},(l,m)=>`${2021+m}`);else if(this.selectedTimeFrame==="Monthly")o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];else if(this.selectedTimeFrame==="Weekly")o=Array.from({length:4},(a,l)=>`Week ${l+1}`);else if(this.selectedTimeFrame==="Daily"){let a=new Date;o=Array.from({length:7},(l,m)=>{let u=new Date(a);return u.setDate(a.getDate()-(6-m)),u.toLocaleDateString("en-US",{month:"short",day:"numeric"})})}r=o.map(a=>{let l=n.find(m=>m.label?.startsWith(a));return l?l.count:0}),this.customerTrendData={labels:o,data:r},this.statisticsChart&&this.statisticsChart.destroy(),setTimeout(()=>this.createCustomerTrendChart(),0)}createCustomerTrendChart(){let t=document.getElementById("statisticsChartMember");t&&(this.statisticsChart=new Lt(t,{type:"line",data:{labels:this.customerTrendData.labels,datasets:[{label:"Customer Trend",data:this.customerTrendData.data,borderColor:"#5D157C",backgroundColor:"#5D157C",fill:!0,tension:.4,borderWidth:2,pointRadius:4,pointBackgroundColor:"#5D157C"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",align:"start",labels:{boxWidth:8,boxHeight:8,usePointStyle:!0,pointStyle:"circle",padding:20,color:"#666"}}},scales:{x:{grid:{display:!0,color:"#f0f0f0"},ticks:{color:"#666",padding:10},border:{display:!1}},y:{display:!0,grid:{display:!0,color:"#f0f0f0"},ticks:{color:"#666",callback:e=>Number(e).toLocaleString("en-IN",{maximumFractionDigits:0})},title:{display:!0,text:"Customers",color:"#333",font:{size:12,weight:"bold"}}}}}}))}static \u0275fac=function(e){return new(e||i)(w(pt),w(G))};static \u0275cmp=R({type:i,selectors:[["charts-members"]],decls:21,vars:3,consts:[[1,"overview-section"],[1,"section-header","flex","justify-center"],[1,"flex"],["class","text-sm tracking-wide px-6 py-1.5 rounded-b-md transition duration-200",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"dashboard"],[1,"card"],[1,"card-title","mb-4"],[1,"chart-wrapper"],["id","statisticsChartMember"],[1,"grid"],[1,"card","grid-card","bg-white","shadow-lg","rounded-xl","p-4","border-top"],[1,"card-title"],[1,"card-value"],[1,"card","grid-card","border-top"],[1,"text-sm","tracking-wide","px-6","py-1.5","rounded-b-md","transition","duration-200",3,"click","ngClass"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2),y(3,a0,2,5,"button",3),c()(),s(4,"div",4)(5,"div",5)(6,"div",6),p(7,"Customer Trend"),c(),s(8,"div",7),h(9,"canvas",8),c()(),s(10,"div",9)(11,"div",10)(12,"h4",11),p(13,"Active Customers"),c(),s(14,"div",12),p(15),c()(),s(16,"div",13)(17,"h4",11),p(18,"New Customers"),c(),s(19,"div",12),p(20),c()()()()()),e&2&&(d(3),g("ngForOf",n.timeFrames),d(12),S(n.customerSummaryDetail.active_customers||0),d(5),S(n.customerSummaryDetail.new_customers||0))},dependencies:[Se,ee],styles:[".overview-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px}.overview-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.overview-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .time-frames[_ngcontent-%COMP%]{display:flex;gap:8px}.overview-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .time-frames[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:20px;background:#f5f5f5;color:#666;font-size:.9rem;cursor:pointer}.overview-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .time-frames[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#8b3dff;color:#fff}.statistics-section[_ngcontent-%COMP%]{margin-bottom:24px;border-radius:12px}.statistics-section[_ngcontent-%COMP%]   .chart-wrapper[_ngcontent-%COMP%]{width:100%;height:300px;padding:16px}.statistics-section[_ngcontent-%COMP%]   .chart-wrapper[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{width:100%!important;height:100%!important}.card[_ngcontent-%COMP%]{background:#fff;box-shadow:0 2.5px 6.5px #1c191d4a,0 0 2px #1c191d52;padding:16px}.border-right[_ngcontent-%COMP%]{border-radius:0 10px 10px 0!important}.border-top[_ngcontent-%COMP%]{border-radius:0 0 10px 10px!important}.card-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#053b17;margin-bottom:12px;text-align:center;font-family:Poppins,sans-serif}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px 15px}.card-value[_ngcontent-%COMP%]{font-size:17px;font-weight:600;color:#5d157c;margin-top:6px}.dashboard[_ngcontent-%COMP%]{max-width:380px;margin:0 .5rem;display:flex;flex-direction:column;gap:16px}.grid-card[_ngcontent-%COMP%]{border-top:.5rem solid #6a1b9a;padding:16px;text-align:center}.dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%}.trend-chart[_ngcontent-%COMP%]{height:40px;margin-top:8px}"]})};var pr=class i{selectedIndex=0;onTabChange(t){this.selectedIndex=t.index}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=R({type:i,selectors:[["business-dashboard"]],decls:8,vars:1,consts:[[1,"business-view","w-full","rounded-t-md","overflow-hidden"],[3,"onChange","styleClass"],["header","Overview"],["header","Sales"],["header","Members"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"p-tabView",1),v("onChange",function(r){return n.onTabChange(r)}),s(2,"p-tabPanel",2),h(3,"chart-overview"),c(),s(4,"p-tabPanel",3),h(5,"chart-sales"),c(),s(6,"p-tabPanel",4),h(7,"charts-members"),c()()()),e&2&&(d(),g("styleClass","custom-tabview w-full border-b border-gray-200 mb-2 rounded-t-md bg-white"))},dependencies:[lc,dc,cr,dr,lr],styles:[".business-view[_ngcontent-%COMP%]{font-family:Arial,sans-serif;max-width:1200px;margin:0 auto;padding-bottom:80px}.business-view[_ngcontent-%COMP%]   .tab-header[_ngcontent-%COMP%]{display:flex;margin-bottom:20px}.business-view[_ngcontent-%COMP%]   .tab-header[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{padding:12px 24px;background-color:#f0f0f0;border:1px solid #ddd;cursor:pointer;transition:background-color .3s ease;margin-right:10px;display:flex;align-items:center}.business-view[_ngcontent-%COMP%]   .tab-header[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.business-view[_ngcontent-%COMP%]   .tab-header[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:hover{background-color:#ddd}.business-view[_ngcontent-%COMP%]   .tab-header[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;font-weight:700}.business-view[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .chart-view[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]{width:100%;height:400px;display:flex;justify-content:center;align-items:center}.business-view[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .chart-view[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{width:100%!important;height:100%!important}.business-view[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .data-view[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;color:#333}.business-view[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .data-view[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px;border:1px solid #ddd}.business-view[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .data-view[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .business-view[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .data-view[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border:1px solid #ddd}.business-view[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .data-view[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}  .p-tabview .p-tabview-panels{padding:0!important}  .p-tabview .p-tabview-nav li .p-tabview-nav-link{background:none!important}  .custom-tabview .p-tabview-nav{margin-bottom:1rem;display:flex;border-bottom-width:1px;--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1))}  .custom-tabview .p-tabview-nav li{background-color:#f9f2fd!important;color:#5d157c;flex:1 1 0%;text-align:center}  .custom-tabview .p-tabview-nav li.p-highlight{background-color:#fff!important;border-top-width:4px;--tw-border-opacity: 1;border-color:rgb(126 34 206 / var(--tw-border-opacity, 1));border-bottom-width:0!important;color:#5d157c}  .custom-tabview .p-tabview-nav li .p-tabview-nav-link{display:block;width:100%;padding-top:.75rem;padding-bottom:.75rem;border:none!important}  .custom-tabview .p-tabview-panels{padding:0}"]})};function d0(i,t){if(i&1){let e=E();s(0,"div",11),v("click",function(){let o=b(e).$implicit,r=_();return C(r.assign(o))}),s(1,"div",12)(2,"div",13),h(3,"i",14),c(),s(4,"div",15)(5,"div",16),p(6),c(),s(7,"div",17),p(8),c()()()()}if(i&2){let e=t.$implicit;d(6),S(e.employee_name),d(2),S(e.myid_role||"Employee")}}function l0(i,t){if(i&1&&(s(0,"div",18)(1,"p"),p(2),c()()),i&2){let e=_();d(2),T('No employees found matching "',e.searchText,'"')}}var mr=class i{constructor(t,e){this.dialogRef=t;this.data=e;e&&e.employees&&(this.employees=e.employees)}searchText="";employees=[];assign(t){this.dialogRef.close({employeeId:t.employee_id,employeeName:t.employee_name,employee:t})}getFilteredEmployees(){return this.searchText?this.employees.filter(t=>t.employee_name.toLowerCase().includes(this.searchText.toLowerCase())||t.myid_role.toLowerCase().includes(this.searchText.toLowerCase())):this.employees}static \u0275fac=function(e){return new(e||i)(w(mi),w(gi))};static \u0275cmp=R({type:i,selectors:[["assign-order-dialog"]],decls:12,vars:3,consts:[[1,"assign-order-dialog"],[1,"dialog-header"],[1,"dialog-title"],[1,"close-btn",3,"click"],[1,"pi","pi-times"],[1,"dialog-content"],[1,"search-section"],["type","text","placeholder","Search employee name or role",1,"search-input",3,"ngModelChange","ngModel"],[1,"employee-list"],["class","employee-item",3,"click",4,"ngFor","ngForOf"],["class","no-results",4,"ngIf"],[1,"employee-item",3,"click"],[1,"employee-info"],[1,"employee-icon"],[1,"pi","pi-user"],[1,"employee-details"],[1,"employee-name"],[1,"employee-role"],[1,"no-results"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"h2",2),p(3,"Assign order"),c(),s(4,"button",3),v("click",function(){return n.dialogRef.close()}),h(5,"i",4),c()(),s(6,"div",5)(7,"div",6)(8,"input",7),N("ngModelChange",function(r){return z(n.searchText,r)||(n.searchText=r),r}),c()(),s(9,"div",8),y(10,d0,9,2,"div",9),c(),y(11,l0,3,1,"div",10),c()()),e&2&&(d(8),L("ngModel",n.searchText),d(2),g("ngForOf",n.getFilteredEmployees()),d(),g("ngIf",n.getFilteredEmployees().length===0&&n.searchText))},dependencies:[ee,W,Z,Y,_e],styles:[".assign-order-dialog[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 4px 20px #00000026;max-width:400px;width:100%;overflow:hidden}.assign-order-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:24px 24px 16px;border-bottom:1px solid #f0f0f0}.assign-order-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .dialog-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#374151;margin:0}.assign-order-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#6b7280;font-size:18px;cursor:pointer;padding:4px;border-radius:4px;transition:color .2s}.assign-order-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#374151}.assign-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{padding:20px 24px}.assign-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]{margin-bottom:16px}.assign-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1.5px solid #d1d5db;border-radius:8px;font-size:14px;color:#374151;background:#fff;transition:border-color .2s}.assign-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#5d157c;box-shadow:0 0 0 3px #7b2ff21a}.assign-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.assign-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .employee-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;max-height:300px;overflow-y:auto}.assign-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .employee-list[_ngcontent-%COMP%]   .employee-item[_ngcontent-%COMP%]{border:1.5px solid #5D157C;border-radius:12px;padding:12px 16px;cursor:pointer;transition:all .2s;background:#fff}.assign-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .employee-list[_ngcontent-%COMP%]   .employee-item[_ngcontent-%COMP%]:hover{background:#f3e8ff;transform:translateY(-1px);box-shadow:0 2px 8px #7b2ff226}.assign-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .employee-list[_ngcontent-%COMP%]   .employee-item[_ngcontent-%COMP%]   .employee-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.assign-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .employee-list[_ngcontent-%COMP%]   .employee-item[_ngcontent-%COMP%]   .employee-info[_ngcontent-%COMP%]   .employee-icon[_ngcontent-%COMP%]{width:32px;height:32px;background:#5d157c;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-size:14px}.assign-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .employee-list[_ngcontent-%COMP%]   .employee-item[_ngcontent-%COMP%]   .employee-info[_ngcontent-%COMP%]   .employee-details[_ngcontent-%COMP%]{flex:1}.assign-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .employee-list[_ngcontent-%COMP%]   .employee-item[_ngcontent-%COMP%]   .employee-info[_ngcontent-%COMP%]   .employee-details[_ngcontent-%COMP%]   .employee-name[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#374151;margin-bottom:2px}.assign-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .employee-list[_ngcontent-%COMP%]   .employee-item[_ngcontent-%COMP%]   .employee-info[_ngcontent-%COMP%]   .employee-details[_ngcontent-%COMP%]   .employee-role[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;text-transform:capitalize}.assign-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .no-results[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#6b7280;font-size:14px}.assign-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}"]})};function p0(i,t){if(i&1&&(s(0,"div",15)(1,"span",16),p(2,"Amount:"),c(),s(3,"span",17),p(4),c()()),i&2){let e=_(2);d(4),T("\u20B9",e.currentAmount,"")}}function m0(i,t){if(i&1&&(s(0,"div",12)(1,"div",13),p(2),c(),y(3,p0,5,1,"div",14),c()),i&2){let e=_();d(2),S(e.data.message||"Amount paid?"),d(),g("ngIf",e.showAmount)}}function g0(i,t){i&1&&(s(0,"div",22),p(1," Please enter a valid amount greater than 0 "),c())}function u0(i,t){if(i&1){let e=E();s(0,"div",18)(1,"label",19),p(2,"Amount"),c(),s(3,"input",20),N("ngModelChange",function(o){b(e);let r=_();return z(r.amount,o)||(r.amount=o),C(o)}),v("ngModelChange",function(){b(e);let o=_();return C(o.onAmountChange())}),c(),y(4,g0,2,0,"div",21),c()}if(i&2){let e=_();d(3),j("invalid",!e.isValidAmount&&e.amount!==0),L("ngModel",e.amount),d(),g("ngIf",!e.isValidAmount&&e.amount!==0)}}var qn=class i{constructor(t,e){this.dialogRef=t;this.data=e;this.showAmountInput=e.showAmountInput!==!1,this.showAmount=e.showAmount||!1,this.currentAmount=e.currentAmount||0,this.amount=e.amount||this.currentAmount||0,this.validateAmount()}amount;isValidAmount=!1;showAmountInput=!0;showAmount=!1;currentAmount=0;validateAmount(){this.isValidAmount=this.amount>0&&this.amount!==null&&this.amount!==void 0}onAmountChange(){this.validateAmount()}confirm(){this.showAmountInput&&!this.isValidAmount||this.dialogRef.close({confirmed:!0,amount:this.amount})}cancel(){this.dialogRef.close({confirmed:!1,amount:this.amount})}closeDialog(){this.dialogRef.close(null)}static \u0275fac=function(e){return new(e||i)(w(mi),w(gi))};static \u0275cmp=R({type:i,selectors:[["confirm-amount-dialog"]],decls:15,vars:5,consts:[[1,"confirm-amount-dialog"],[1,"dialog-header"],[1,"header-content"],[1,"dialog-title"],[1,"close-btn",3,"click"],[1,"pi","pi-times"],[1,"dialog-content"],["class","payment-confirmation",4,"ngIf"],["class","form-group",4,"ngIf"],[1,"dialog-footer"],[1,"btn","btn-cancel",3,"click"],[1,"btn","btn-confirm",3,"click","disabled"],[1,"payment-confirmation"],[1,"message"],["class","amount-display",4,"ngIf"],[1,"amount-display"],[1,"amount-label"],[1,"amount-value"],[1,"form-group"],[1,"form-label"],["type","number","placeholder","Enter amount",1,"amount-input",3,"ngModelChange","ngModel"],["class","validation-message",4,"ngIf"],[1,"validation-message"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),p(4),c()(),s(5,"button",4),v("click",function(){return n.closeDialog()}),h(6,"i",5),c()(),s(7,"div",6),y(8,m0,4,2,"div",7)(9,u0,5,4,"div",8),c(),s(10,"div",9)(11,"button",10),v("click",function(){return n.cancel()}),p(12,"No"),c(),s(13,"button",11),v("click",function(){return n.confirm()}),p(14),c()()()),e&2&&(d(4),S(n.data.title||"Payment Confirmation"),d(4),g("ngIf",!n.showAmountInput),d(),g("ngIf",n.showAmountInput),d(4),g("disabled",n.showAmountInput&&!n.isValidAmount),d(),T(" ",n.showAmountInput?"Confirm & Close":"Yes"," "))},dependencies:[W,Z,ct,Y,_e],styles:[".confirm-amount-dialog[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 4px 20px #00000026;max-width:400px;width:100%;overflow:hidden}.confirm-amount-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;padding:24px 24px 16px;border-bottom:1px solid #f0f0f0}.confirm-amount-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{flex:1}.confirm-amount-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .dialog-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#5d157c;margin:0 0 4px}.confirm-amount-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .received-amount[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#22c55e;margin:0}.confirm-amount-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#6b7280;font-size:18px;cursor:pointer;padding:4px;border-radius:4px;transition:color .2s}.confirm-amount-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#374151}.confirm-amount-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{padding:20px 24px}.confirm-amount-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .payment-confirmation[_ngcontent-%COMP%]{text-align:center;padding:20px 0}.confirm-amount-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .payment-confirmation[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#374151;margin-bottom:20px}.confirm-amount-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .payment-confirmation[_ngcontent-%COMP%]   .amount-display[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:12px;padding:16px 20px;margin:0 auto;max-width:200px}.confirm-amount-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .payment-confirmation[_ngcontent-%COMP%]   .amount-display[_ngcontent-%COMP%]   .amount-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#6b7280;display:block;margin-bottom:4px}.confirm-amount-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .payment-confirmation[_ngcontent-%COMP%]   .amount-display[_ngcontent-%COMP%]   .amount-value[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#5d157c}.confirm-amount-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0}.confirm-amount-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:600;color:#374151;margin-bottom:8px}.confirm-amount-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .amount-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1.5px solid #d1d5db;border-radius:8px;font-size:16px;color:#374151;background:#fff;transition:border-color .2s}.confirm-amount-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .amount-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#5d157c;box-shadow:0 0 0 3px #7b2ff21a}.confirm-amount-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .amount-input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.confirm-amount-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .amount-input.invalid[_ngcontent-%COMP%]{border-color:#dc2626;background-color:#fef2f2}.confirm-amount-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .amount-input.invalid[_ngcontent-%COMP%]:focus{border-color:#dc2626;box-shadow:0 0 0 3px #dc26261a}.confirm-amount-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .validation-message[_ngcontent-%COMP%]{color:#dc2626;font-size:12px;margin-top:4px;font-weight:500}.confirm-amount-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]{display:flex;gap:12px;padding:16px 24px 24px;border-top:1px solid #f0f0f0}.confirm-amount-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1;padding:12px 24px;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s;border:none}.confirm-amount-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   .btn.btn-cancel[_ngcontent-%COMP%]{background:#f3f4f6;color:#6b7280}.confirm-amount-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   .btn.btn-cancel[_ngcontent-%COMP%]:hover{background:#e5e7eb}.confirm-amount-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   .btn.btn-confirm[_ngcontent-%COMP%]{background:#5d157c;color:#fff}.confirm-amount-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   .btn.btn-confirm[_ngcontent-%COMP%]:hover{background:#5d157c}.confirm-amount-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   .btn.btn-confirm[_ngcontent-%COMP%]:disabled{background:#d1d5db;color:#9ca3af;cursor:not-allowed;opacity:.6}.confirm-amount-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   .btn.btn-confirm[_ngcontent-%COMP%]:disabled:hover{background:#d1d5db}"]})};var Wn=class i extends on{constructor(e,n){let o=n.getSelectedProviderId(),r=i.getUrlObj(o);super(e,"employee_id",r,"employee");this.authServ=n}getEmployeesForProvider(e,n=0,o=10){let r=`provider/${e}/employees/?offset=${n}&limit=${o}`;return this.http.get(r)}list(){return this.setUrl(i.getUrlObj(this.authServ.getSelectedProviderId())),super.list()}updateProviderUrl(e){if(!e||e===0)return;let n=i.getUrlObj(e);this.setUrl(n)}static getUrlObj(e,n=0,o=10){let r=Q.EMPLOYEE.LIST.replace("_PROVIDER_ID_",e.toString());return{create:Q.EMPLOYEE.URL,update:Q.EMPLOYEE.URL,list:r,delete:Q.EMPLOYEE.URL}}static \u0275fac=function(n){return new(n||i)(Ae($e),Ae(G))};static \u0275prov=Je({token:i,factory:i.\u0275fac,providedIn:"root"})};var f0=["infiniteScrollSentinel"],_0=["ordersContainer"],h0=["ordersList"],ap=i=>({active:i}),b0=()=>[1,2,3,4],C0=()=>[1,2,3,4,5];function v0(i,t){if(i&1){let e=E();s(0,"div",42)(1,"p-dropdown",43),M(2,"translate"),N("ngModelChange",function(o){b(e);let r=_();return z(r.selectedDateFilter,o)||(r.selectedDateFilter=o),C(o)}),v("onChange",function(){b(e);let o=_();return C(o.onDateFilterChange())}),c()()}if(i&2){let e=_();d(),ne("placeholder",O(2,4,"orders.select_date_range")),g("options",e.dateFilterOptions),L("ngModel",e.selectedDateFilter),g("appendTo","body")}}function x0(i,t){i&1&&(s(0,"div",44),h(1,"div",45),c())}function P0(i,t){if(i&1){let e=E();s(0,"button",58),v("click",function(){b(e);let o=_(2);return C(o.clearCustomDate())}),h(1,"i",59),c()}}function y0(i,t){if(i&1){let e=E();s(0,"div",46)(1,"div",47)(2,"div",48),h(3,"i",49),s(4,"span"),p(5),M(6,"translate"),c()(),y(7,P0,2,0,"button",50),c(),s(8,"div",51)(9,"div",52)(10,"div",53)(11,"label",54),p(12),M(13,"translate"),c(),s(14,"div",55),h(15,"i",56),s(16,"input",57),N("ngModelChange",function(o){b(e);let r=_();return z(r.customStartDate,o)||(r.customStartDate=o),C(o)}),v("change",function(){b(e);let o=_();return C(o.onCustomDateChange())}),c()()(),s(17,"div",53)(18,"label",54),p(19),M(20,"translate"),c(),s(21,"div",55),h(22,"i",56),s(23,"input",57),N("ngModelChange",function(o){b(e);let r=_();return z(r.customEndDate,o)||(r.customEndDate=o),C(o)}),v("change",function(){b(e);let o=_();return C(o.onCustomDateChange())}),c()()()()()()}if(i&2){let e=_();d(5),S(O(6,10,"orders.date_range")),d(2),g("ngIf",e.customStartDate||e.customEndDate),d(5),S(O(13,12,"orders.start_date")),d(4),j("has-value",e.customStartDate),L("ngModel",e.customStartDate),d(3),S(O(20,14,"orders.end_date")),d(4),j("has-value",e.customEndDate),L("ngModel",e.customEndDate)}}function M0(i,t){i&1&&(s(0,"div",60),h(1,"div",61),c())}function O0(i,t){if(i&1){let e=E();s(0,"mat-chip",67),v("click",function(){let o=b(e).$implicit,r=_(2);return C(r.quickAssignEmployee(o))})("wheel",function(o){return b(e),C(o.stopPropagation())})("touchstart",function(o){return b(e),C(o.stopPropagation())})("touchmove",function(o){return b(e),C(o.stopPropagation())}),p(1),c()}if(i&2){let e=t.$implicit;g("selected",!1),d(),T(" ",e.employee_name," ")}}function w0(i,t){if(i&1&&(s(0,"div",62)(1,"div",63),p(2),M(3,"translate"),c(),s(4,"div",64)(5,"div",65)(6,"mat-chip-list"),y(7,O0,2,2,"mat-chip",66),c()()()()),i&2){let e=_();d(2),S(O(3,2,"orders.quick_assign")),d(5),g("ngForOf",e.employees)}}function S0(i,t){i&1&&h(0,"div",70)}function k0(i,t){i&1&&(s(0,"div",68)(1,"div",63),p(2),M(3,"translate"),c(),s(4,"div",64)(5,"div",65),y(6,S0,1,0,"div",69),c()()()),i&2&&(d(2),S(O(3,2,"orders.quick_assign")),d(4),g("ngForOf",se(4,b0)))}function I0(i,t){if(i&1){let e=E();s(0,"button",82),M(1,"translate"),M(2,"translate"),v("click",function(o){return b(e),_(2).clearSearch(),C(o.stopPropagation())}),h(3,"i",59),c()}i&2&&(ne("title",O(1,2,"orders.clear")),po("aria-label",O(2,4,"orders.clear")))}function T0(i,t){i&1&&(s(0,"div",83),h(1,"div",84),c())}function E0(i,t){if(i&1){let e=E();s(0,"button",85),v("click",function(){b(e);let o=_(2);return C(o.goToSales())}),c()}}function F0(i,t){if(i&1){let e=E();s(0,"button",86),M(1,"translate"),v("click",function(){b(e);let o=_(2);return C(o.acceptAllOrders())}),c()}if(i&2){let e=_(2);ne("label",O(1,2,"orders.accept_all")),g("disabled",e.loading||e.infiniteLoading)}}function D0(i,t){if(i&1){let e=E();s(0,"div",71)(1,"div",72)(2,"div",73)(3,"div",74)(4,"input",75),M(5,"translate"),N("ngModelChange",function(o){b(e);let r=_();return z(r.searchText,o)||(r.searchText=o),C(o)}),v("ngModelChange",function(){b(e);let o=_();return C(o.onSearchChange())}),c(),y(6,I0,4,6,"button",76)(7,T0,2,0,"div",77),c()(),s(8,"div",78)(9,"span",79),y(10,E0,1,0,"button",80)(11,F0,2,4,"button",81),c()()()()}if(i&2){let e=_();d(4),j("searching",e.searchText&&e.loading),ne("placeholder",O(5,8,"orders.search_by_order_id")),L("ngModel",e.searchText),d(2),g("ngIf",e.searchText),d(),g("ngIf",e.searchText&&e.loading),d(3),g("ngIf",!e.selectAll),d(),g("ngIf",e.selectAll)}}function A0(i,t){i&1&&(s(0,"div",87)(1,"div",72)(2,"div",88),h(3,"div",89)(4,"div",90),c(),s(5,"div",88),h(6,"div",89)(7,"div",45),c()()())}function V0(i,t){i&1&&(s(0,"div",97)(1,"div",98)(2,"div",99)(3,"div",100),h(4,"div",101)(5,"div",102),c(),s(6,"div",103),h(7,"div",104)(8,"div",104)(9,"div",104),c()(),s(10,"div",105),h(11,"div",106)(12,"div",106)(13,"div",106)(14,"div",106),c()(),s(15,"div",107),h(16,"div",108)(17,"div",108)(18,"div",108),c()())}function R0(i,t){i&1&&(s(0,"div",91)(1,"div",92)(2,"div",93),h(3,"div",94)(4,"div",95),c(),y(5,V0,19,0,"div",96),c()()),i&2&&(d(5),g("ngForOf",se(1,C0)))}function L0(i,t){if(i&1){let e=E();s(0,"div",109)(1,"p",110),p(2),c(),s(3,"button",111),v("click",function(){b(e);let o=_();return C(o.fetchOrders())}),p(4,"Retry"),c()()}if(i&2){let e=_();d(2),S(e.error)}}function z0(i,t){i&1&&(s(0,"div",119)(1,"p"),p(2),M(3,"translate"),c(),s(4,"p",120),p(5),M(6,"translate"),c()()),i&2&&(d(2),S(O(3,2,"orders.no_orders_found")),d(3),T(" ",O(6,4,"orders.try_adjusting_filters")," "))}function N0(i,t){if(i&1){let e=E();s(0,"a",151),v("click",function(o){b(e);let r=_().$implicit,a=_(2);return C(a.makeCall(r.customer_mobile_number,o))}),h(1,"i",152),c()}if(i&2){let e=_().$implicit;po("title","Call "+e.customer_mobile_number)("aria-label","Call "+e.customer_name)}}function B0(i,t){if(i&1){let e=E();s(0,"button",153),v("click",function(o){b(e);let r=_().$implicit;return _(2).showDirection(r),C(o.stopPropagation())}),s(1,"div",154),h(2,"i",155),s(3,"span"),p(4,"Direction"),c()()()}}function j0(i,t){if(i&1){let e=E();s(0,"button",156),v("click",function(o){b(e);let r=_().$implicit;return _(2).openAssignOrderDialog(r),C(o.stopPropagation())}),s(1,"div",154),h(2,"i",157),s(3,"span"),p(4),M(5,"translate"),c()()()}if(i&2){let e=_().$implicit,n=_(2);g("disabled",n.isActionDisabled(e)||n.processingOrders.has(e.id)),d(4),S(O(5,2,"orders.assign"))}}function U0(i,t){if(i&1&&(s(0,"div",158),h(1,"i",159),s(2,"span"),p(3),c()()),i&2){let e=_().$implicit;d(3),S((e.assigned_to_info==null?null:e.assigned_to_info.employee_name)||e.assigned_to)}}function G0(i,t){i&1&&h(0,"i",164)}function q0(i,t){i&1&&h(0,"i",165)}function W0(i,t){i&1&&(s(0,"span"),p(1),M(2,"translate"),c()),i&2&&(d(),S(O(2,1,"orders.accept")))}function H0(i,t){i&1&&(s(0,"span",166),p(1),M(2,"translate"),c()),i&2&&(d(),S(O(2,1,"orders.processing")))}function $0(i,t){if(i&1){let e=E();s(0,"button",160),v("click",function(o){b(e);let r=_().$implicit;return _(2).acceptOrder(r),C(o.stopPropagation())}),s(1,"div",154),y(2,G0,1,0,"i",161)(3,q0,1,0,"i",162)(4,W0,3,3,"span",21)(5,H0,3,3,"span",163),c()()}if(i&2){let e=_().$implicit,n=_(2);g("disabled",n.isActionDisabled(e)||n.processingOrders.has(e.id)),d(2),g("ngIf",!n.processingOrders.has(e.id)),d(),g("ngIf",n.processingOrders.has(e.id)),d(),g("ngIf",!n.processingOrders.has(e.id)),d(),g("ngIf",n.processingOrders.has(e.id))}}function Y0(i,t){i&1&&h(0,"i",59)}function K0(i,t){i&1&&h(0,"i",165)}function X0(i,t){i&1&&(s(0,"span"),p(1),M(2,"translate"),c()),i&2&&(d(),S(O(2,1,"orders.reject")))}function Q0(i,t){i&1&&(s(0,"span",166),p(1),M(2,"translate"),c()),i&2&&(d(),S(O(2,1,"orders.processing")))}function J0(i,t){if(i&1){let e=E();s(0,"button",167),v("click",function(o){b(e);let r=_().$implicit;return _(2).rejectOrder(r),C(o.stopPropagation())}),s(1,"div",154),y(2,Y0,1,0,"i",168)(3,K0,1,0,"i",162)(4,X0,3,3,"span",21)(5,Q0,3,3,"span",163),c()()}if(i&2){let e=_().$implicit,n=_(2);g("disabled",n.isActionDisabled(e)||n.processingOrders.has(e.id)),d(2),g("ngIf",!n.processingOrders.has(e.id)),d(),g("ngIf",n.processingOrders.has(e.id)),d(),g("ngIf",!n.processingOrders.has(e.id)),d(),g("ngIf",n.processingOrders.has(e.id))}}function Z0(i,t){if(i&1){let e=E();s(0,"button",169),v("click",function(o){b(e);let r=_().$implicit,a=_(2);return r.amount===0?a.openConfirmAmountDialog(r):a.completeOrder(r),C(o.stopPropagation())}),s(1,"div",154),h(2,"i",170),s(3,"span"),p(4,"Complete"),c()()()}if(i&2){let e=_().$implicit,n=_(2);yt("background",n.isButtonDisabled(e,"complete")?"#e5e7eb":"")("color",n.isButtonDisabled(e,"complete")?"#9ca3af":"")("opacity",n.isButtonDisabled(e,"complete")?"0.4":"1")("cursor",n.isButtonDisabled(e,"complete")?"not-allowed":"pointer"),j("btn-disabled",n.isButtonDisabled(e,"complete")),g("disabled",n.isButtonDisabled(e,"complete"))}}function ef(i,t){if(i&1){let e=E();s(0,"button",171),v("click",function(o){b(e);let r=_().$implicit;return _(2).markReady(r),C(o.stopPropagation())}),s(1,"div",154),h(2,"i",172),s(3,"span"),p(4,"Ready"),c()()()}if(i&2){let e=_().$implicit,n=_(2);yt("background",n.isButtonDisabled(e,"ready")?"#e5e7eb":"")("color",n.isButtonDisabled(e,"ready")?"#9ca3af":"")("opacity",n.isButtonDisabled(e,"ready")?"0.4":"1")("cursor",n.isButtonDisabled(e,"ready")?"not-allowed":"pointer"),j("btn-disabled",n.isButtonDisabled(e,"ready")),g("disabled",n.isButtonDisabled(e,"ready"))}}function tf(i,t){if(i&1){let e=E();s(0,"button",173),v("click",function(o){b(e);let r=_().$implicit;return _(2).markDelivery(r),C(o.stopPropagation())}),s(1,"div",154),h(2,"i",174),s(3,"span"),p(4,"Delivery"),c()()()}if(i&2){let e=_().$implicit,n=_(2);yt("background",n.isButtonDisabled(e,"delivery")?"#e5e7eb":"")("color",n.isButtonDisabled(e,"delivery")?"#9ca3af":"")("opacity",n.isButtonDisabled(e,"delivery")?"0.4":"1")("cursor",n.isButtonDisabled(e,"delivery")?"not-allowed":"pointer"),j("btn-disabled",n.isButtonDisabled(e,"delivery")),g("disabled",n.isButtonDisabled(e,"delivery"))}}function nf(i,t){if(i&1){let e=E();et(0),s(1,"div",121),v("click",function(o){let r=b(e).$implicit;return _(2).openOrderDetails(r),C(o.stopPropagation())}),s(2,"div",122)(3,"div",123)(4,"mat-checkbox",124),N("ngModelChange",function(o){let r=b(e).$implicit;return z(r.selected,o)||(r.selected=o),C(o)}),v("click",function(o){return b(e),C(o.stopPropagation())}),c(),s(5,"span",125),p(6),c()(),s(7,"div",126),p(8),M(9,"titlecase"),c()(),s(10,"div",127)(11,"div",128)(12,"div",129)(13,"div",130)(14,"div",131),y(15,N0,2,2,"a",132),s(16,"div",133),p(17),M(18,"translate"),c()(),s(19,"div",134),p(20),c()(),s(21,"div",130)(22,"div",135)(23,"span",136),p(24),M(25,"translate"),c(),s(26,"div",137),p(27),M(28,"titlecase"),c()(),s(29,"div",138)(30,"span",136),p(31),M(32,"translate"),c(),s(33,"span",139),M(34,"translate"),p(35),c()()()(),s(36,"div",140),y(37,B0,5,0,"button",141)(38,j0,6,4,"button",142)(39,U0,4,1,"div",143),c()()(),s(40,"div",144)(41,"div",145),y(42,$0,6,5,"button",146)(43,J0,6,5,"button",147)(44,Z0,5,11,"button",148)(45,ef,5,11,"button",149)(46,tf,5,11,"button",150),c()()(),tt()}if(i&2){let e=t.$implicit,n=_(2);d(),po("data-order-id",e.id),d(3),L("ngModel",e.selected),d(2),T("#",e.display_order_id,""),d(),Mt("status-"+e.status),d(),T(" ",O(9,26,e.status)," "),d(7),g("ngIf",e.customer_mobile_number),d(2),T(" ",e.customer_name||O(18,28,"orders.customer")," "),d(3),T(" ",n.getOrderProductsDisplay(e)," "),d(4),S(O(25,30,"orders.payment")),d(2),Mt("status-"+e.payment_status),d(),T(" ",O(28,32,e.payment_status)," "),d(4),S(O(32,34,"orders.bill_total")),d(2),Mt("zero-amount"),g("title",e.amount===0?O(34,36,"orders.click_to_confirm_amount"):""),d(2),T(" \u20B9",e.amount," "),d(2),g("ngIf",e.status!=="pending"&&e.order_type!=="service_subscription"),d(),g("ngIf",!e.assigned_to_info&&e.order_type!=="service_subscription"),d(),g("ngIf",(e.assigned_to_info||e.assigned_to)&&e.order_type!=="service_subscription"),d(3),g("ngIf",n.isOrderActionable(e)),d(),g("ngIf",n.isOrderActionable(e)),d(),g("ngIf",e.status!=="pending"),d(),g("ngIf",e.status!=="pending"&&e.order_type!=="service_subscription"),d(),g("ngIf",e.status!=="pending"&&e.order_type!=="service_subscription")}}function of(i,t){if(i&1){let e=E();s(0,"button",175),v("click",function(){b(e);let o=_(2);return C(o.goToTop())}),h(1,"i",176),c()}}function rf(i,t){if(i&1){let e=E();s(0,"div")(1,"div",112)(2,"mat-checkbox",113),N("ngModelChange",function(o){b(e);let r=_();return z(r.selectAll,o)||(r.selectAll=o),C(o)}),v("change",function(){b(e);let o=_();return C(o.toggleAllCheckboxes())}),p(3),M(4,"translate"),c(),s(5,"div",114)(6,"p-dropdown",115),M(7,"translate"),N("ngModelChange",function(o){b(e);let r=_();return z(r.selectedStatus,o)||(r.selectedStatus=o),C(o)}),v("onChange",function(o){b(e);let r=_();return C(r.onStatusChange(o))}),c()()(),y(8,z0,7,6,"div",116)(9,nf,47,38,"ng-container",117)(10,of,2,0,"button",118),c()}if(i&2){let e=_();d(2),L("ngModel",e.selectAll),d(),S(O(4,9,"orders.all")),d(3),ne("placeholder",O(7,11,"orders.filter_by_status")),g("options",e.statusOptions),L("ngModel",e.selectedStatus),g("showClear",!0),d(2),g("ngIf",e.orders.length===0),d(),g("ngForOf",e.orders),d(),g("ngIf",e.showGoTop)}}function af(i,t){i&1&&(s(0,"div",177),h(1,"span",178),s(2,"span",179),p(3),M(4,"translate"),c()()),i&2&&(d(3),S(O(4,1,"orders.loading_more")))}var fs=class{currentState={searchText:"",selectedStatus:null,selectedDateFilter:"today",customStartDate:"",customEndDate:"",dateRange:{start:null,end:null},selected:"order",currentPage:0,focusedOrderId:void 0,scrollPosition:0};saveStateBeforeNavigation(t){this.currentState=U({},t)}getCurrentState(){return U({},this.currentState)}setFocusedOrder(t){this.currentState.focusedOrderId=t}clearFocusedOrder(){this.currentState.focusedOrderId=void 0}resetState(){this.currentState={searchText:"",selectedStatus:null,selectedDateFilter:"today",customStartDate:"",customEndDate:"",dateRange:{start:null,end:null},selected:"order",currentPage:0,focusedOrderId:void 0,scrollPosition:0}}},gr=class i{constructor(t,e,n,o,r,a,l,m){this.authService=t;this.orderService=e;this.employeeService=n;this.dialog=o;this.toast=r;this.router=a;this.translate=l;this.cdr=m;this.orderListStateService=new fs,this.searchSubscription=this.searchSubject.pipe(Xt(2500),Qt()).subscribe(u=>{this.searchText=u,this.currentPage=0,this.hasMore=!0,this.showGoTop=!1,this.fetchOrders(!1)})}orders=[];employees=[];selectAll=!1;loading=!1;error=null;processingOrders=new Set;statusOptions=[];selectedStatus=null;searchText="";dateRange={start:null,end:null};today=new Date;quickSaleFormData={paid:!0,orderClosed:!0};dateFilterOptions=[];selectedDateFilter="today";customStartDate="";customEndDate="";currentPage=0;pageSize=10;totalOrders=0;selected="order";infiniteScrollSentinel;ordersContainer;ordersList;infiniteObserver;infiniteLoading=!1;hasMore=!0;showGoTop=!1;onWindowScroll=()=>{let e=window.scrollY+window.innerHeight;document.documentElement.scrollHeight-e<=300&&this.loadNextPage(),this.showGoTop=window.scrollY>300&&this.orders.length>this.pageSize,this.cdr.detectChanges()};searchSubject=new Yt;searchSubscription=new Os;orderListStateService;ngOnInit(){this.loadTranslations(),this.orderListStateService.getCurrentState().focusedOrderId?this.restoreState():(this.updateDateRangeFromFilter(),this.fetchOrders()),this.fetchEmployees(),this.authService.providerChange$.subscribe(t=>{t&&(this.currentPage=0,this.hasMore=!0,this.showGoTop=!1,this.orders=[],this.fetchOrders(),this.fetchEmployees())}),this.translate.onLangChange.subscribe(()=>{this.loadTranslations(),this.cdr.detectChanges()})}restoreState(){let t=this.orderListStateService.getCurrentState();this.searchText=t.searchText,this.selectedStatus=t.selectedStatus,this.selectedDateFilter=t.selectedDateFilter,this.customStartDate=t.customStartDate,this.customEndDate=t.customEndDate,this.dateRange=t.dateRange,this.selected=t.selected,this.currentPage=t.currentPage,this.fetchOrders(!1,!0)}loadTranslations(){this.statusOptions=[{label:this.translate.instant("orders.status_pending"),value:"pending"},{label:this.translate.instant("orders.status_accepted"),value:"accepted"},{label:this.translate.instant("orders.status_delivered"),value:"delivered"},{label:this.translate.instant("orders.status_completed"),value:"completed"},{label:this.translate.instant("orders.status_cancelled"),value:"cancelled"}],this.dateFilterOptions=[{label:this.translate.instant("orders.date_today"),value:"today"},{label:this.translate.instant("orders.date_this_week"),value:"thisWeek"},{label:this.translate.instant("orders.date_last_week"),value:"lastWeek"},{label:this.translate.instant("orders.date_this_month"),value:"thisMonth"},{label:this.translate.instant("orders.date_custom"),value:"custom"}]}ngAfterViewInit(){"IntersectionObserver"in window&&(this.infiniteObserver=new IntersectionObserver(t=>{t[0].isIntersecting&&this.loadNextPage()},{root:null,rootMargin:"200px",threshold:0}),this.observeSentinel()),window.addEventListener("scroll",this.onWindowScroll,{passive:!0})}observeSentinel(){this.infiniteObserver&&this.infiniteScrollSentinel?.nativeElement&&(this.infiniteObserver.disconnect(),this.infiniteObserver.observe(this.infiniteScrollSentinel.nativeElement))}fetchOrders(t=!1,e=!1){if(this.loading||this.infiniteLoading||t&&!this.hasMore)return;t?this.infiniteLoading=!0:this.loading=!0,this.error=null;let n=this.authService.getSelectedProviderId(),o,r;this.dateRange.start&&(o=this.selected==="delivery"?this.formatDate(this.dateRange.start):this.formatDateTime(this.dateRange.start)),this.dateRange.end&&(r=this.selected==="delivery"?this.formatDate(this.dateRange.end):this.formatDateTime(this.dateRange.end));let a=this.selectedStatus||void 0,l=this.currentPage*this.pageSize,m=this.pageSize;e&&(l=0,m=(this.currentPage+1)*this.pageSize),this.orderService.getOrdersByProvider(n,this.searchText||void 0,o,r,void 0,a,l,m,this.selected==="delivery"?"delivery":"created").subscribe({next:u=>{let x=(u&&u.orders?u.orders:Array.isArray(u)?u:[]).map(P=>H(U({},P),{selected:!1,expanded:!1}));if(this.totalOrders=u?.total,t?this.orders=[...this.orders,...x]:e?this.orders=x:this.orders=x,u&&typeof u.total=="number"?this.totalOrders=u.total:this.totalOrders=e?this.orders.length+(u.total||0):x.length,e)this.hasMore=this.orders.length<this.totalOrders;else{let P=x.length;this.hasMore=P>=this.pageSize&&this.orders.length<this.totalOrders,!t&&x.length===0&&(this.hasMore=!1)}if(this.loading=!1,this.infiniteLoading=!1,!this.hasMore&&this.orders.length>0,setTimeout(()=>this.observeSentinel(),100),e){let P=this.orderListStateService.getCurrentState();P.scrollPosition&&setTimeout(()=>{window.scrollTo({top:P.scrollPosition,behavior:"auto"}),this.orderListStateService.clearFocusedOrder()},100)}},error:u=>{console.error("Error fetching orders:",u),this.error="Failed to load orders.",this.loading=!1,this.infiniteLoading=!1,this.toast.error("Error","Failed to load orders. Please try again.")}})}formatDate(t){let e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${o}`}formatDateTime(t){let e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0"),r=String(t.getHours()).padStart(2,"0"),a=String(t.getMinutes()).padStart(2,"0"),l=String(t.getSeconds()).padStart(2,"0");return`${e}-${n}-${o} ${r}:${a}:${l}`}fetchEmployees(){let t=this.authService.getSelectedProviderId();this.employeeService.getEmployeesForProvider(t).subscribe({next:e=>{this.employees=e.employee||[]},error:e=>{console.error("Failed to load employees:",e),this.toast.error("Error","Failed to load employees.")}})}toggleAllCheckboxes(){this.orders.forEach(t=>t.selected=this.selectAll)}openOrderDetails(t){let e={searchText:this.searchText,selectedStatus:this.selectedStatus,selectedDateFilter:this.selectedDateFilter,customStartDate:this.customStartDate,customEndDate:this.customEndDate,dateRange:this.dateRange,selected:this.selected,currentPage:this.currentPage,focusedOrderId:t.id,scrollPosition:window.scrollY};this.orderListStateService.saveStateBeforeNavigation(e),this.router.navigate(["/providers/orders",t.id],{state:{order:t}})}goToSales(){this.router.navigate(["providers","add-sales"])}openAssignOrderDialog(t){this.dialog.open(mr,{width:"400px",data:{order:t,employees:this.employees}}).afterClosed().subscribe(n=>{n&&this.assignOrderToEmployee(t,n.employeeId)})}openConfirmAmountDialog(t){this.dialog.open(qn,{width:"400px",data:{order:t,amount:t.amount}}).afterClosed().subscribe(n=>{n&&this.confirmOrderAmount(t,n.amount)})}onStatusChange(t){this.currentPage=0,this.hasMore=!0,this.showGoTop=!1,this.fetchOrders(!1)}onSearchChange(){this.searchSubject.next(this.searchText)}clearSearch(){this.searchText&&(this.searchText="",this.currentPage=0,this.hasMore=!0,this.showGoTop=!1,this.fetchOrders(!1))}onDateRangeChange(){this.currentPage=0,this.hasMore=!0,this.showGoTop=!1,this.fetchOrders(!1)}onDateFilterChange(){this.currentPage=0,this.updateDateRangeFromFilter(),this.selectedDateFilter==="custom"&&this.setDefaultCustomDates(),this.hasMore=!0,this.showGoTop=!1,this.fetchOrders(!1)}setSelected(t){this.selected!==t&&(this.selected=t,this.currentPage=0,this.hasMore=!0,this.showGoTop=!1,this.updateDateRangeFromFilter(),this.fetchOrders(!1))}updateDateRangeFromFilter(){let t=new Date;switch(t.setHours(0,0,0,0),this.selectedDateFilter){case"today":this.dateRange={start:t,end:new Date(t.getTime()+24*60*60*1e3-1)};break;case"thisWeek":let e=new Date(t);e.setDate(t.getDate()-t.getDay());let n=new Date(e);n.setDate(e.getDate()+6),n.setHours(23,59,59,999),this.dateRange={start:e,end:n};break;case"lastWeek":let o=new Date(t);o.setDate(t.getDate()-t.getDay()-7);let r=new Date(o);r.setDate(o.getDate()+6),r.setHours(23,59,59,999),this.dateRange={start:o,end:r};break;case"thisMonth":let a=new Date(t.getFullYear(),t.getMonth(),1),l=new Date(t.getFullYear(),t.getMonth()+1,0);l.setHours(23,59,59,999),this.dateRange={start:a,end:l};break;case"custom":break;default:this.dateRange={start:t,end:new Date(t.getTime()+24*60*60*1e3-1)};break}}setDefaultCustomDates(){let t=new Date,e=new Date(t.getFullYear(),t.getMonth()-1,t.getDate());this.customStartDate=e.toISOString().split("T")[0],this.customEndDate=t.toISOString().split("T")[0],this.dateRange={start:new Date(this.customStartDate),end:new Date(this.customEndDate+"T23:59:59.999")}}clearDateFilter(){this.selectedDateFilter="today",this.customStartDate="",this.customEndDate="",this.currentPage=0,this.showGoTop=!1,this.updateDateRangeFromFilter(),this.fetchOrders()}getDateFilterDisplayText(){if(this.selectedDateFilter==="custom"&&this.dateRange.start&&this.dateRange.end){let e=this.dateRange.start.toLocaleDateString(),n=this.dateRange.end.toLocaleDateString();return`${e} - ${n}`}let t=this.dateFilterOptions.find(e=>e.value===this.selectedDateFilter);return t?t.label:this.translate.instant("orders.date_today")}getOrderProductsDisplay(t){let e=t.metadata;if(typeof e=="string")try{e=JSON.parse(e)}catch(n){console.error("Error parsing metadata:",n),e={}}return e?.product_name?e.product_name:!t.products_info||t.products_info.length===0?this.translate.instant("orders.no_products"):t.products_info.length===1?t.products_info[0].product_name:`${t.products_info[0].product_name} +${t.products_info.length-1} more`}onCustomDateChange(){if(this.customStartDate&&this.customEndDate){if(new Date(this.customEndDate)<new Date(this.customStartDate)){this.toast.warn("Warning","End date cannot be before start date.");return}this.dateRange={start:new Date(this.customStartDate),end:new Date(this.customEndDate+"T23:59:59.999")},this.currentPage=0,this.fetchOrders()}}clearCustomDate(){this.customStartDate="",this.customEndDate="",this.dateRange={start:null,end:null},this.selectedDateFilter="today",this.currentPage=0,this.fetchOrders()}applyCustomDate(){this.customStartDate&&this.customEndDate&&this.onCustomDateChange()}filterOrders(){return this.orders}quickAssignEmployee(t){let e=this.orders.filter(n=>n.selected);if(e.length===0){this.toast.warn("Warning","Please select orders to assign.");return}e.forEach(n=>{this.assignOrderToEmployee(n,t.employee_id)})}assignOrderToEmployee(t,e){let n={id:t.id,display_order_id:t.display_order_id,order_type:t.order_type,status:t.status,amount:t.amount,slot_id:t.slot_id,delivery_date:t.delivery_date,created_at:t.created_at,address:t.address,fullfillment_type:t.fullfillment_type,payment_status:t.payment_status,assigned_to:e,updated_by:this.authService.getUserId(),payment_info:t.payment_info?H(U({},t.payment_info),{transaction_id:"dummy"}):{method:"cash",status:t.payment_status||"pending",transaction_id:"dummy",amount:t.amount,payment_details:{}}};t.metadata&&(n.metadata=t.metadata),t.customer_name&&(n.customer_name=t.customer_name),t.customer_mobile_number&&(n.customer_mobile_number=t.customer_mobile_number),t.products_info&&(n.products_info=t.products_info),t.provider_info&&(n.provider_info=t.provider_info),t.slot_info&&(n.slot_info=t.slot_info),this.orderService.assignOrder(t.id,n).subscribe({next:o=>{this.toast.success("Success","Order assigned successfully."),this.fetchOrders()},error:o=>{console.error("\u274C Error assigning order:",o),this.toast.error("Error","Failed to assign order. Please try again.")}})}acceptOrder(t){this.processingOrders.has(t.id)||(this.processingOrders.add(t.id),this.orderService.updateOrderStatus(t.id,"accepted").subscribe({next:e=>{this.toast.success("Success","Order accepted successfully."),this.fetchOrders(),this.processingOrders.delete(t.id)},error:e=>{console.error("Error accepting order:",e),this.toast.error("Error","Failed to accept order. Please try again."),this.processingOrders.delete(t.id)}}))}rejectOrder(t){this.processingOrders.has(t.id)||(this.processingOrders.add(t.id),this.orderService.updateOrderStatus(t.id,"cancelled").subscribe({next:e=>{this.toast.success("Success","Order rejected successfully."),this.fetchOrders(),this.processingOrders.delete(t.id)},error:e=>{console.error("Error rejecting order:",e),this.toast.error("Error","Failed to reject order. Please try again."),this.processingOrders.delete(t.id)}}))}acceptAllOrders(){let t=this.orders.filter(o=>this.isOrderActionable(o)&&(this.selectAll||o.selected));if(t.length===0){this.toast.warn("Warning","No eligible orders to accept.");return}this.loading=!0;let e=0,n=()=>{let o=t.shift();if(!o){this.loading=!1,this.toast.success("Success",`Accepted ${e} orders.`),this.fetchOrders(!1);return}this.orderService.updateOrderStatus(o.id,"accepted").subscribe({next:()=>{e+=1,n()},error:()=>{n()}})};n()}makeCall(t,e){if(e.preventDefault(),e.stopPropagation(),!t)return;let n=t.replace(/[\s\-\(\)]/g,"");window.ReactNativeWebView?window.ReactNativeWebView.postMessage(JSON.stringify({type:"ACTION",data:{action:"make_call",phoneNumber:n,value:n}})):window.location.href=`tel:${n}`}showDirection(t){this.openInMap(t.address.latlong)}openInMap(t){window.ReactNativeWebView?window.ReactNativeWebView.postMessage(JSON.stringify({type:"ACTION",data:{action:"open_map",value:t}})):window.open(`https://www.google.com/maps?q=${t}`,"_blank")}markDelivered(t){this.orderService.updateOrderStatus(t.id,"delivered").subscribe({next:e=>{this.toast.success("Success","Order marked as delivered."),this.fetchOrders()},error:e=>{console.error("Error marking order as delivered:",e),this.toast.error("Error","Failed to mark order as delivered. Please try again.")}})}completeOrder(t){if(console.log("\u{1F504} Completing order:",t),console.log("\u{1F4B0} Order amount:",t.amount),t.payment_status==="paid"||t.payment_info?.status==="paid"){console.log("\u2705 Order is already paid - Completing immediately using updateOrderStatus"),this.updateOrderStatus(t.id,"completed");return}this.openPaymentReceivedDialog(t)}openPaymentReceivedDialog(t){this.dialog.open(qn,{width:"400px",disableClose:!1,data:{order:t,title:"Payment Confirmation",message:"Payment received?",showAmountInput:!1,currentAmount:t.amount,showAmount:t.amount>0,confirmText:"Yes",cancelText:"No"}}).afterClosed().subscribe(n=>{n!==void 0&&(n.confirmed?this.updateOrderWithPayment(t,t.amount||0,!0,"completed"):this.updateOrderWithPayment(t,t.amount||0,!1,"completed"))})}updateOrderWithPayment(t,e,n,o){let r="dummy",a=t.payment_info?.method||"cash",l={method:a,status:n?"paid":"pending",transaction_id:r,amount:e};a==="online"&&t.payment_info?.payment_details&&(l.payment_details=t.payment_info.payment_details);let m={id:t.id,display_order_id:t.display_order_id,order_type:t.order_type,slot_id:t.slot_id,status:o,fullfillment_type:t.fullfillment_type,amount:e,created_at:t.created_at,payment_status:n?"paid":"unpaid",payment_info:l,address:t.address,delivery_date:t.delivery_date,updated_by:this.authService.getUserId(),metadata:t.metadata};t.provider_info&&(m.provider_info=t.provider_info),t.slot_info&&(m.slot_info=t.slot_info),t.assigned_to_info&&(m.assigned_to_info=t.assigned_to_info),t.customer_name&&(m.customer_name=t.customer_name),t.customer_mobile_number&&(m.customer_mobile_number=t.customer_mobile_number),t.products_info&&(m.products_info=t.products_info),this.orderService.updateOrder(t.id,m).subscribe({next:u=>{let f=n?"paid":"pending";this.toast.success("Success",`Order completed with payment status: ${f}`),this.fetchOrders()},error:u=>{console.error("\u274C ========================================"),console.error("\u274C ERROR - Backend Response"),console.error("\u274C ========================================"),console.error("\u274C Error Object:",u),console.error("\u274C Error Status:",u.status),console.error("\u274C Error Message:",u.message),console.error("\u274C Error Details:",u.error),console.error("\u274C ========================================"),this.toast.error("Error","Failed to update order. Please try again.")}})}updateOrderStatus(t,e,n){this.orderService.updateOrderStatus(t,e).subscribe({next:o=>{this.toast.success("Success",`Order marked as ${e}.`),this.fetchOrders()},error:o=>{console.error("\u274C Error updating order status:",o),console.error("Error details:",o.error),this.toast.error("Error","Failed to update order. Please try again.")}})}markReady(t){this.updateOrderStatus(t.id,"ready",t)}markDelivery(t){this.updateOrderStatus(t.id,"delivered",t)}closeOrder(t){this.completeOrder(t)}isButtonDisabled(t,e){return(()=>{switch(e){case"ready":return t.status==="ready"||t.status==="delivered"||t.status==="completed"||t.status==="cancelled";case"delivery":return t.status==="delivered"||t.status==="completed"||t.status==="cancelled";case"complete":return t.status==="completed"||t.status==="cancelled";default:return!1}})()}confirmOrderAmount(t,e){this.processingOrders.add(t.id);let n={id:t.id,display_order_id:t.display_order_id,order_type:t.order_type,status:t.status,amount:e,slot_id:t.slot_id,delivery_date:t.delivery_date,created_at:t.created_at,address:t.address,fullfillment_type:t.fullfillment_type,payment_status:t.payment_status,assigned_to:t?.assigned_to_info?.employee_id,updated_by:this.authService.getUserId(),payment_info:t.payment_info?H(U({},t.payment_info),{transaction_id:"dummy",amount:e}):{method:"cash",status:t.payment_status||"pending",transaction_id:"dummy",amount:e,payment_details:{}}};t.metadata&&(n.metadata=t.metadata),t.customer_name&&(n.customer_name=t.customer_name),t.customer_mobile_number&&(n.customer_mobile_number=t.customer_mobile_number),t.products_info&&(n.products_info=t.products_info),t.provider_info&&(n.provider_info=t.provider_info),t.slot_info&&(n.slot_info=t.slot_info),this.orderService.assignOrder(t.id,n).subscribe({next:o=>{this.toast.success("Success","Order amount confirmed successfully."),this.fetchOrders(),this.processingOrders.delete(t.id)},error:o=>{console.error("\u274C Error confirming amount:",o),this.toast.error("Error","Failed to confirm amount. Please try again."),this.processingOrders.delete(t.id)}})}onPageChange(t){this.currentPage=t,this.fetchOrders(!1)}getTotalPages(){return Math.ceil(this.totalOrders/this.pageSize)}isActionDisabled(t){return t.status!=="pending"&&t.status!=="received"&&t.status!=="accepted"}isOrderActionable(t){return t.status==="pending"||t.status==="received"}Math=Math;ngOnDestroy(){this.searchSubscription&&this.searchSubscription.unsubscribe(),this.infiniteObserver&&this.infiniteObserver.disconnect(),window.removeEventListener("scroll",this.onWindowScroll)}loadNextPage(){this.loading||this.infiniteLoading||!this.hasMore||(this.currentPage+=1,this.fetchOrders(!0))}goToTop(){if(this.ordersList&&this.ordersList.nativeElement){this.ordersList.nativeElement.scrollTo({top:0,behavior:"smooth"});return}this.ordersContainer&&this.ordersContainer.nativeElement&&this.ordersContainer.nativeElement.scrollTo({top:0,behavior:"smooth"}),window.scrollTo({top:0,behavior:"smooth"})}static \u0275fac=function(e){return new(e||i)(w(G),w(Vt),w(Wn),w(At),w(te),w(le),w(li),w(hn))};static \u0275cmp=R({type:i,selectors:[["orders-list"]],viewQuery:function(e,n){if(e&1&&(nt(f0,5),nt(_0,5),nt(h0,5)),e&2){let o;it(o=ot())&&(n.infiniteScrollSentinel=o.first),it(o=ot())&&(n.ordersContainer=o.first),it(o=ot())&&(n.ordersList=o.first)}},decls:79,vars:43,consts:[["ordersContainer",""],["ordersList",""],["infiniteScrollSentinel",""],["quickSaleForm","ngForm"],[1,"orders-container"],[1,"top-controls"],[1,"top-controls-row"],[1,"toggle-wrapper"],["pButton","",3,"click","ngClass","label"],[1,"date-filter-container"],["class","date-filter-row",4,"ngIf"],["class","date-filter-skeleton",4,"ngIf"],["class","custom-date-section",4,"ngIf"],["class","custom-date-skeleton",4,"ngIf"],["class","quick-assign",4,"ngIf"],["class","quick-assign skeleton",4,"ngIf"],["class","filter-section",4,"ngIf"],["class","filter-section skeleton",4,"ngIf"],[1,"orders-list"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],[4,"ngIf"],["class","infinite-scroll-loader","aria-live","polite","role","status",4,"ngIf"],["aria-hidden","true",1,"infinite-scroll-sentinel"],[1,"quick-sale-panel",2,"display","none"],[1,"panel-title"],[1,"quick-sale-form"],[1,"form-field"],[1,"field-label"],[1,"input-container"],["type","text","name","customerName","ngModel","","placeholder","searched if not can be entered",1,"form-input"],[1,"pi","pi-search","search-icon"],["type","text","name","mobileNumber","ngModel","","placeholder","Auto Populated",1,"form-input"],["type","text","name","productName","ngModel","","placeholder","searched if not can be entered",1,"form-input"],["type","number","name","price","ngModel","","placeholder","Auto populated can be edited",1,"form-input"],["type","hidden","name","paid","ngModel","",3,"ngModelChange","ngModel"],["type","hidden","name","orderClosed","ngModel","",3,"ngModelChange","ngModel"],[1,"toggle-switch"],["type","radio","name","paid",3,"ngModelChange","ngModel","value"],["type","radio","name","orderClosed",3,"ngModelChange","ngModel","value"],[1,"form-actions"],["type","submit",1,"add-button",3,"disabled"],[1,"date-filter-row"],["optionLabel","label","optionValue","value",1,"date-filter-dropdown","custom-dropdown",3,"ngModelChange","onChange","options","ngModel","placeholder","appendTo"],[1,"date-filter-skeleton"],[1,"skeleton-dropdown"],[1,"custom-date-section"],[1,"date-range-header"],[1,"date-range-title"],[1,"pi","pi-calendar"],["class","clear-date-btn",3,"click",4,"ngIf"],[1,"modern-date-picker"],[1,"date-input-group"],[1,"date-input-wrapper"],[1,"date-label"],[1,"date-input-container"],[1,"pi","pi-calendar","date-icon"],["type","date",1,"modern-date-input",3,"ngModelChange","change","ngModel"],[1,"clear-date-btn",3,"click"],[1,"pi","pi-times"],[1,"custom-date-skeleton"],[1,"skeleton-date-range"],[1,"quick-assign"],[1,"title"],[1,"chips-scroll-wrapper"],[1,"chips"],[3,"selected","click","wheel","touchstart","touchmove",4,"ngFor","ngForOf"],[3,"click","wheel","touchstart","touchmove","selected"],[1,"quick-assign","skeleton"],["class","skeleton-chip",4,"ngFor","ngForOf"],[1,"skeleton-chip"],[1,"filter-section"],[1,"filter-row"],[1,"filter-item",2,"margin-bottom","0"],[1,"search-input-container"],["type","text",1,"search-input",3,"ngModelChange","ngModel","placeholder"],["type","button","class","search-clear-btn",3,"title","click",4,"ngIf"],["class","search-loading",4,"ngIf"],[1,"filter-item","action-buttons-container",2,"display","flex","align-items","flex-end","justify-content","flex-end"],[1,"top-controls","top-controls-inline",2,"margin-bottom","0"],["pButton","","type","button","icon","pi pi-plus","label","New Order","class","new-order p-button-primary p-button-sm","style",`
              min-width: auto;
              height: 34px;
              padding: 0 12px;
              font-size: 13px;
              gap: 4px;
              display: inline-flex;
              align-items: center;
              justify-content: center;
              border-radius: 8px;
            `,3,"click",4,"ngIf"],["pButton","","type","button","class","accept-all p-button-outlined p-button-sm","style",`
              min-width: auto;
              height: 38px;
              padding: 0 16px;
              font-size: 13px;
            `,3,"label","disabled","click",4,"ngIf"],["type","button",1,"search-clear-btn",3,"click","title"],[1,"search-loading"],[1,"search-spinner"],["pButton","","type","button","icon","pi pi-plus","label","New Order",1,"new-order","p-button-primary","p-button-sm",2,"min-width","auto","height","34px","padding","0 12px","font-size","13px","gap","4px","display","inline-flex","align-items","center","justify-content","center","border-radius","8px",3,"click"],["pButton","","type","button",1,"accept-all","p-button-outlined","p-button-sm",2,"min-width","auto","height","38px","padding","0 16px","font-size","13px",3,"click","label","disabled"],[1,"filter-section","skeleton"],[1,"filter-item"],[1,"skeleton-label"],[1,"skeleton-input"],[1,"loading-state"],[1,"skeleton-loader"],[1,"skeleton-select-all"],[1,"skeleton-checkbox"],[1,"skeleton-date"],["class","skeleton-order-card",4,"ngFor","ngForOf"],[1,"skeleton-order-card"],[1,"skeleton-order-content"],[1,"skeleton-order-info"],[1,"skeleton-order-title"],[1,"skeleton-checkbox-small"],[1,"skeleton-order-id"],[1,"skeleton-order-desc"],[1,"skeleton-text"],[1,"skeleton-order-status"],[1,"skeleton-status-row"],[1,"skeleton-order-footer"],[1,"skeleton-button"],[1,"error-state"],[1,"error-message"],[1,"retry-button",3,"click"],[1,"select-all"],[3,"ngModelChange","change","ngModel"],[1,"status-filter-container",2,"min-width","200px","display","flex","align-items","center","justify-content","flex-end"],["optionLabel","label","optionValue","value",1,"status-dropdown","custom-dropdown",3,"ngModelChange","onChange","options","ngModel","placeholder","showClear"],["class","empty-state",4,"ngIf"],[4,"ngFor","ngForOf"],["class","go-top-btn","aria-label","Go to top",3,"click",4,"ngIf"],[1,"empty-state"],[1,"empty-subtitle"],[1,"order-card",3,"click"],[1,"order-header"],[1,"order-title"],[3,"ngModelChange","click","ngModel"],[1,"order-id"],[1,"order-status-badge"],[1,"order-content"],[1,"order-info"],[1,"customer-section"],[1,"customer-info"],[1,"customer-name-wrapper"],["href","javascript:void(0)","class","call-icon-link",3,"click",4,"ngIf"],[1,"customer-name"],[1,"order-items"],[1,"summary-item","flex"],[1,"summary-label"],[1,"payment-status-text"],[1,"summary-item"],[1,"summary-value",3,"title"],[1,"secondary-actions"],["class","btn btn-direction","title","Direction",3,"click",4,"ngIf"],["class","btn btn-assign","title","Assign",3,"disabled","click",4,"ngIf"],["class","assigned-person-name",4,"ngIf"],[1,"order-footer"],[1,"action-buttons"],["class","btn btn-accept",3,"disabled","click",4,"ngIf"],["class","btn btn-reject",3,"disabled","click",4,"ngIf"],["class","btn btn-complete","title","Complete",3,"btn-disabled","background","color","opacity","cursor","disabled","click",4,"ngIf"],["class","btn btn-ready","title","Ready",3,"btn-disabled","background","color","opacity","cursor","disabled","click",4,"ngIf"],["class","btn btn-delivery","title","Delivery",3,"btn-disabled","background","color","opacity","cursor","disabled","click",4,"ngIf"],["href","javascript:void(0)",1,"call-icon-link",3,"click"],[1,"pi","pi-phone"],["title","Direction",1,"btn","btn-direction",3,"click"],[1,"btn-content"],[1,"pi","pi-map-marker"],["title","Assign",1,"btn","btn-assign",3,"click","disabled"],[1,"pi","pi-user-plus"],[1,"assigned-person-name"],[1,"pi","pi-user"],[1,"btn","btn-accept",3,"click","disabled"],["class","pi pi-check",4,"ngIf"],["class","pi pi-spin pi-spinner",4,"ngIf"],["class","loading-text",4,"ngIf"],[1,"pi","pi-check"],[1,"pi","pi-spin","pi-spinner"],[1,"loading-text"],[1,"btn","btn-reject",3,"click","disabled"],["class","pi pi-times",4,"ngIf"],["title","Complete",1,"btn","btn-complete",3,"click","disabled"],[1,"pi","pi-check-circle"],["title","Ready",1,"btn","btn-ready",3,"click","disabled"],[1,"pi","pi-clock"],["title","Delivery",1,"btn","btn-delivery",3,"click","disabled"],[1,"pi","pi-truck"],["aria-label","Go to top",1,"go-top-btn",3,"click"],[1,"pi","pi-arrow-up"],["aria-live","polite","role","status",1,"infinite-scroll-loader"],["aria-hidden","true",1,"spinner"],[1,"loader-text"]],template:function(e,n){if(e&1){let o=E();s(0,"div",4,0)(2,"div",5)(3,"div",6)(4,"div",7)(5,"button",8),M(6,"translate"),v("click",function(){return b(o),C(n.setSelected("order"))}),c(),s(7,"button",8),M(8,"translate"),v("click",function(){return b(o),C(n.setSelected("delivery"))}),c()(),s(9,"div",9),y(10,v0,3,6,"div",10)(11,x0,2,0,"div",11),c()(),y(12,y0,24,16,"div",12)(13,M0,2,0,"div",13),c(),y(14,w0,8,4,"div",14)(15,k0,7,5,"div",15)(16,D0,12,10,"div",16)(17,A0,8,0,"div",17),s(18,"div",18,1),y(20,R0,6,2,"div",19)(21,L0,5,1,"div",20)(22,rf,11,13,"div",21),c(),y(23,af,5,3,"div",22),h(24,"div",23,2),s(26,"div",24)(27,"div",25),p(28,"Add Quick Sales"),c(),s(29,"form",26,3)(31,"div",27)(32,"label",28),p(33,"Customer Name"),c(),s(34,"div",29),h(35,"input",30)(36,"i",31),c()(),s(37,"div",27)(38,"label",28),p(39,"Mobile Number"),c(),s(40,"div",29),h(41,"input",32)(42,"i",31),c()(),s(43,"div",27)(44,"label",28),p(45,"Product Name"),c(),s(46,"div",29),h(47,"input",33)(48,"i",31),c()(),s(49,"div",27)(50,"label",28),p(51,"Price"),c(),s(52,"div",29),h(53,"input",34),c()(),s(54,"input",35),N("ngModelChange",function(a){return b(o),z(n.quickSaleFormData.paid,a)||(n.quickSaleFormData.paid=a),C(a)}),c(),s(55,"input",36),N("ngModelChange",function(a){return b(o),z(n.quickSaleFormData.orderClosed,a)||(n.quickSaleFormData.orderClosed=a),C(a)}),c(),s(56,"div",27)(57,"label",28),p(58,"Paid"),c(),s(59,"div",37)(60,"label")(61,"input",38),N("ngModelChange",function(a){return b(o),z(n.quickSaleFormData.paid,a)||(n.quickSaleFormData.paid=a),C(a)}),c(),p(62," Yes "),c(),s(63,"label")(64,"input",38),N("ngModelChange",function(a){return b(o),z(n.quickSaleFormData.paid,a)||(n.quickSaleFormData.paid=a),C(a)}),c(),p(65," No "),c()()(),s(66,"div",27)(67,"label",28),p(68,"Order Closed"),c(),s(69,"div",37)(70,"label")(71,"input",39),N("ngModelChange",function(a){return b(o),z(n.quickSaleFormData.orderClosed,a)||(n.quickSaleFormData.orderClosed=a),C(a)}),c(),p(72," Yes "),c(),s(73,"label")(74,"input",39),N("ngModelChange",function(a){return b(o),z(n.quickSaleFormData.orderClosed,a)||(n.quickSaleFormData.orderClosed=a),C(a)}),c(),p(75," No "),c()()(),s(76,"div",40)(77,"button",41),p(78," Add "),c()()()()()}if(e&2){let o=ge(30);d(5),ne("label",O(6,35,"orders.by_order")),g("ngClass",ln(39,ap,n.selected==="order")),d(2),ne("label",O(8,37,"orders.by_delivery")),g("ngClass",ln(41,ap,n.selected==="delivery")),d(3),g("ngIf",!n.loading),d(),g("ngIf",n.loading),d(),g("ngIf",n.selectedDateFilter==="custom"&&!n.loading),d(),g("ngIf",n.selectedDateFilter==="custom"&&n.loading),d(),g("ngIf",!n.loading),d(),g("ngIf",n.loading),d(),g("ngIf",!n.loading),d(),g("ngIf",n.loading),d(3),g("ngIf",n.loading),d(),g("ngIf",n.error&&!n.loading),d(),g("ngIf",!n.loading&&!n.error),d(),g("ngIf",n.infiniteLoading),d(31),L("ngModel",n.quickSaleFormData.paid),d(),L("ngModel",n.quickSaleFormData.orderClosed),d(5),j("active",n.quickSaleFormData.paid===!0),d(),L("ngModel",n.quickSaleFormData.paid),g("value",!0),d(2),j("active",n.quickSaleFormData.paid===!1),d(),L("ngModel",n.quickSaleFormData.paid),g("value",!1),d(6),j("active",n.quickSaleFormData.orderClosed===!0),d(),L("ngModel",n.quickSaleFormData.orderClosed),g("value",!0),d(2),j("active",n.quickSaleFormData.orderClosed===!1),d(),L("ngModel",n.quickSaleFormData.orderClosed),g("value",!1),d(3),g("disabled",!o.valid)}},dependencies:[Se,ee,W,mc,gc,Mn,Ve,ye,Z,ct,vn,Y,fe,_e,Gs,bn,ce],styles:['.orders-container[_ngcontent-%COMP%]{background:#f5f5f5;min-height:100vh;padding:10px 10px 50px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.top-controls[_ngcontent-%COMP%]{margin-bottom:10px}.top-controls[_ngcontent-%COMP%]   .top-controls-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;gap:16px;align-items:center;flex-wrap:nowrap;overflow-x:auto;-webkit-overflow-scrolling:touch}.top-controls[_ngcontent-%COMP%]   .custom-date-section[_ngcontent-%COMP%]{margin-top:16px;padding:20px;background:linear-gradient(135deg,#fff,#f8fafc);border-radius:16px;box-shadow:0 4px 20px #00000014;border:1px solid rgba(93,21,124,.1);position:relative;overflow:hidden}.top-controls[_ngcontent-%COMP%]   .custom-date-section[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,#5d157c,#6a1fd9)}@media (max-width: 480px){.top-controls[_ngcontent-%COMP%]   .custom-date-section[_ngcontent-%COMP%]{margin-top:12px;padding:16px}}.top-controls[_ngcontent-%COMP%]   .date-range-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.top-controls[_ngcontent-%COMP%]   .date-range-header[_ngcontent-%COMP%]   .date-range-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:16px;font-weight:600;color:#1f2937}.top-controls[_ngcontent-%COMP%]   .date-range-header[_ngcontent-%COMP%]   .date-range-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#5d157c;font-size:18px}.top-controls[_ngcontent-%COMP%]   .date-range-header[_ngcontent-%COMP%]   .clear-date-btn[_ngcontent-%COMP%]{background:#ef44441a;border:1px solid rgba(239,68,68,.2);border-radius:8px;padding:8px;color:#dc2626;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;width:36px;height:36px}.top-controls[_ngcontent-%COMP%]   .date-range-header[_ngcontent-%COMP%]   .clear-date-btn[_ngcontent-%COMP%]:hover{background:#ef444433;transform:scale(1.05)}.top-controls[_ngcontent-%COMP%]   .date-range-header[_ngcontent-%COMP%]   .clear-date-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.top-controls[_ngcontent-%COMP%]   .modern-date-picker[_ngcontent-%COMP%]   .date-input-group[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto 1fr;gap:16px;align-items:end;margin-bottom:20px}@media (max-width: 768px){.top-controls[_ngcontent-%COMP%]   .modern-date-picker[_ngcontent-%COMP%]   .date-input-group[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}}.top-controls[_ngcontent-%COMP%]   .modern-date-picker[_ngcontent-%COMP%]   .date-input-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.top-controls[_ngcontent-%COMP%]   .modern-date-picker[_ngcontent-%COMP%]   .date-input-wrapper[_ngcontent-%COMP%]   .date-label[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#374151;margin:0;text-transform:uppercase;letter-spacing:.5px}.top-controls[_ngcontent-%COMP%]   .modern-date-picker[_ngcontent-%COMP%]   .date-input-wrapper[_ngcontent-%COMP%]   .date-input-container[_ngcontent-%COMP%]{position:relative;background:#fff;border:2px solid #e5e7eb;border-radius:12px;padding:4px 16px 4px 40px;transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:0 2px 4px #0000000a}.top-controls[_ngcontent-%COMP%]   .modern-date-picker[_ngcontent-%COMP%]   .date-input-wrapper[_ngcontent-%COMP%]   .date-input-container[_ngcontent-%COMP%]:hover{border-color:#9ca3af;box-shadow:0 4px 12px #00000014}.top-controls[_ngcontent-%COMP%]   .modern-date-picker[_ngcontent-%COMP%]   .date-input-wrapper[_ngcontent-%COMP%]   .date-input-container[_ngcontent-%COMP%]:focus-within{border-color:#5d157c;box-shadow:0 0 0 4px #5d157c1a;transform:translateY(-1px)}.top-controls[_ngcontent-%COMP%]   .modern-date-picker[_ngcontent-%COMP%]   .date-input-wrapper[_ngcontent-%COMP%]   .date-input-container[_ngcontent-%COMP%]   .date-icon[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#9ca3af;font-size:16px;transition:color .2s ease}.top-controls[_ngcontent-%COMP%]   .modern-date-picker[_ngcontent-%COMP%]   .date-input-wrapper[_ngcontent-%COMP%]   .date-input-container[_ngcontent-%COMP%]:focus-within   .date-icon[_ngcontent-%COMP%]{color:#5d157c}.top-controls[_ngcontent-%COMP%]   .modern-date-picker[_ngcontent-%COMP%]   .date-input-wrapper[_ngcontent-%COMP%]   .date-input-container[_ngcontent-%COMP%]   .modern-date-input[_ngcontent-%COMP%]{border:none;background:transparent;font-size:14px;font-weight:500;color:#1f2937;padding:12px 0;width:100%;outline:none;transition:all .2s ease}.top-controls[_ngcontent-%COMP%]   .modern-date-picker[_ngcontent-%COMP%]   .date-input-wrapper[_ngcontent-%COMP%]   .date-input-container[_ngcontent-%COMP%]   .modern-date-input[_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{cursor:pointer;filter:invert(.4);padding:4px;border-radius:4px;transition:all .2s ease}.top-controls[_ngcontent-%COMP%]   .modern-date-picker[_ngcontent-%COMP%]   .date-input-wrapper[_ngcontent-%COMP%]   .date-input-container[_ngcontent-%COMP%]   .modern-date-input[_ngcontent-%COMP%]::-webkit-calendar-picker-indicator:hover{filter:invert(.6);background:#0000000d}.top-controls[_ngcontent-%COMP%]   .modern-date-picker[_ngcontent-%COMP%]   .date-input-wrapper[_ngcontent-%COMP%]   .date-input-container[_ngcontent-%COMP%]   .modern-date-input[_ngcontent-%COMP%]::-webkit-datetime-edit-text{color:#6b7280;font-weight:400}.top-controls[_ngcontent-%COMP%]   .modern-date-picker[_ngcontent-%COMP%]   .date-input-wrapper[_ngcontent-%COMP%]   .date-input-container[_ngcontent-%COMP%]   .modern-date-input[_ngcontent-%COMP%]::-webkit-datetime-edit-month-field, .top-controls[_ngcontent-%COMP%]   .modern-date-picker[_ngcontent-%COMP%]   .date-input-wrapper[_ngcontent-%COMP%]   .date-input-container[_ngcontent-%COMP%]   .modern-date-input[_ngcontent-%COMP%]::-webkit-datetime-edit-day-field, .top-controls[_ngcontent-%COMP%]   .modern-date-picker[_ngcontent-%COMP%]   .date-input-wrapper[_ngcontent-%COMP%]   .date-input-container[_ngcontent-%COMP%]   .modern-date-input[_ngcontent-%COMP%]::-webkit-datetime-edit-year-field{color:#1f2937;font-weight:500}.top-controls[_ngcontent-%COMP%]   .modern-date-picker[_ngcontent-%COMP%]   .date-input-wrapper[_ngcontent-%COMP%]   .date-input-container[_ngcontent-%COMP%]   .modern-date-input.has-value[_ngcontent-%COMP%]{color:#1f2937;font-weight:600}.top-controls[_ngcontent-%COMP%]   .modern-date-picker[_ngcontent-%COMP%]   .date-connector[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;padding:0 8px}@media (max-width: 768px){.top-controls[_ngcontent-%COMP%]   .modern-date-picker[_ngcontent-%COMP%]   .date-connector[_ngcontent-%COMP%]{order:-1;flex-direction:row;padding:8px 0}}.top-controls[_ngcontent-%COMP%]   .modern-date-picker[_ngcontent-%COMP%]   .date-connector[_ngcontent-%COMP%]   .connector-line[_ngcontent-%COMP%]{width:2px;height:40px;background:linear-gradient(180deg,#5d157c,#6a1fd9);border-radius:1px;position:relative}@media (max-width: 768px){.top-controls[_ngcontent-%COMP%]   .modern-date-picker[_ngcontent-%COMP%]   .date-connector[_ngcontent-%COMP%]   .connector-line[_ngcontent-%COMP%]{width:40px;height:2px}}.top-controls[_ngcontent-%COMP%]   .modern-date-picker[_ngcontent-%COMP%]   .date-connector[_ngcontent-%COMP%]   .connector-line[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:8px;height:8px;background:#fff;border:2px solid #5D157C;border-radius:50%}.top-controls[_ngcontent-%COMP%]   .modern-date-picker[_ngcontent-%COMP%]   .date-connector[_ngcontent-%COMP%]   .connector-dot[_ngcontent-%COMP%]{width:8px;height:8px;background:#5d157c;border-radius:50%;margin:4px 0;box-shadow:0 0 0 4px #5d157c1a}@media (max-width: 768px){.top-controls[_ngcontent-%COMP%]   .modern-date-picker[_ngcontent-%COMP%]   .date-connector[_ngcontent-%COMP%]   .connector-dot[_ngcontent-%COMP%]{margin:0 8px}}.top-controls[_ngcontent-%COMP%]   .modern-date-picker[_ngcontent-%COMP%]   .date-connector[_ngcontent-%COMP%]   .connector-text[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#5d157c;background:#fff;padding:4px 8px;border-radius:6px;border:1px solid rgba(93,21,124,.2);white-space:nowrap;position:relative;z-index:1}.top-controls[_ngcontent-%COMP%]   .modern-date-picker[_ngcontent-%COMP%]   .date-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:16px}.top-controls[_ngcontent-%COMP%]   .modern-date-picker[_ngcontent-%COMP%]   .date-actions[_ngcontent-%COMP%]   .apply-date-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#5d157c,#6a1fd9);color:#fff;border:none;border-radius:12px;padding:12px 24px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);display:flex;align-items:center;gap:8px;box-shadow:0 4px 12px #5d157c4d}.top-controls[_ngcontent-%COMP%]   .modern-date-picker[_ngcontent-%COMP%]   .date-actions[_ngcontent-%COMP%]   .apply-date-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #5d157c66}.top-controls[_ngcontent-%COMP%]   .modern-date-picker[_ngcontent-%COMP%]   .date-actions[_ngcontent-%COMP%]   .apply-date-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.top-controls[_ngcontent-%COMP%]   .modern-date-picker[_ngcontent-%COMP%]   .date-actions[_ngcontent-%COMP%]   .apply-date-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.top-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:12px;font-weight:600;font-size:14px;min-width:140px;height:44px;border:none;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 8px #00000014}.top-controls[_ngcontent-%COMP%]   button.new-order[_ngcontent-%COMP%]{background:#5d157c;color:#fff}.top-controls[_ngcontent-%COMP%]   button.new-order[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#4a0f63,#6a1fd9);transform:translateY(-1px);box-shadow:0 4px 12px #5d157c4d}.top-controls[_ngcontent-%COMP%]   button.accept-all[_ngcontent-%COMP%]{background:#fff;color:#5d157c;border:2px solid #5D157C}.top-controls[_ngcontent-%COMP%]   button.accept-all[_ngcontent-%COMP%]:hover{background:#f5e8ff;transform:translateY(-1px)}.top-controls[_ngcontent-%COMP%]   .date-filter-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;min-width:150px;flex:0 0 auto;margin-left:auto;border:2px solid #5D157C;border-radius:8px;position:relative;z-index:3}.top-controls[_ngcontent-%COMP%]   .date-filter-container[_ngcontent-%COMP%]   .date-filter-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.top-controls[_ngcontent-%COMP%]   .date-filter-container[_ngcontent-%COMP%]   .date-filter-row[_ngcontent-%COMP%]   .date-filter-dropdown[_ngcontent-%COMP%]{flex:1}.top-controls[_ngcontent-%COMP%]   .date-filter-container[_ngcontent-%COMP%]   .date-filter-row[_ngcontent-%COMP%]   .date-filter-dropdown[_ngcontent-%COMP%]   .p-dropdown[_ngcontent-%COMP%]{width:100%;border-color:#5d157c;border-width:2px;border-radius:8px;height:44px;display:flex;align-items:center}.top-controls[_ngcontent-%COMP%]   .date-filter-container[_ngcontent-%COMP%]   .date-filter-row[_ngcontent-%COMP%]   .clear-date-btn[_ngcontent-%COMP%]{background:none;border:none;color:#6b7280;cursor:pointer;padding:4px;border-radius:4px;transition:all .2s ease;display:flex;align-items:center;justify-content:center;width:24px;height:24px;flex-shrink:0}.top-controls[_ngcontent-%COMP%]   .date-filter-container[_ngcontent-%COMP%]   .date-filter-row[_ngcontent-%COMP%]   .clear-date-btn[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#374151}.top-controls[_ngcontent-%COMP%]   .date-filter-container[_ngcontent-%COMP%]   .date-filter-row[_ngcontent-%COMP%]   .clear-date-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.top-controls[_ngcontent-%COMP%]   .date-filter-container[_ngcontent-%COMP%]   .active-filter-indicator[_ngcontent-%COMP%]{background:#f0f9ff;border:1px solid #0ea5e9;border-radius:6px;padding:6px 10px;margin-top:4px}.top-controls[_ngcontent-%COMP%]   .date-filter-container[_ngcontent-%COMP%]   .active-filter-indicator[_ngcontent-%COMP%]   .indicator-text[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#0369a1}.top-controls[_ngcontent-%COMP%]   .custom-date-skeleton[_ngcontent-%COMP%]{margin-top:16px;padding:20px;background:linear-gradient(135deg,#fff,#f8fafc);border-radius:16px;box-shadow:0 4px 20px #00000014;border:1px solid rgba(93,21,124,.1);position:relative;overflow:hidden}.top-controls[_ngcontent-%COMP%]   .custom-date-skeleton[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,#5d157c,#6a1fd9)}.top-controls[_ngcontent-%COMP%]   .custom-date-skeleton[_ngcontent-%COMP%]   .skeleton-date-range[_ngcontent-%COMP%]{height:120px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_loading 1.5s infinite;border-radius:12px;position:relative}.top-controls[_ngcontent-%COMP%]   .custom-date-skeleton[_ngcontent-%COMP%]   .skeleton-date-range[_ngcontent-%COMP%]:before{content:"";position:absolute;top:20px;left:20px;right:20px;height:20px;background:linear-gradient(90deg,#e0e0e0 25%,#d0d0d0,#e0e0e0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_loading 1.5s infinite;border-radius:4px}.top-controls[_ngcontent-%COMP%]   .custom-date-skeleton[_ngcontent-%COMP%]   .skeleton-date-range[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:20px;left:20px;right:20px;height:40px;background:linear-gradient(90deg,#e0e0e0 25%,#d0d0d0,#e0e0e0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_loading 1.5s infinite;border-radius:8px}[_nghost-%COMP%]     .p-dropdown-panel{border:2px solid #5D157C;border-radius:10px;box-shadow:0 8px 24px #0000001f;overflow:hidden}[_nghost-%COMP%]     .p-dropdown-panel .p-dropdown-header{padding:8px 10px;border-bottom:1px solid rgba(0,0,0,.06)}[_nghost-%COMP%]     .p-dropdown-items{padding:6px;max-height:280px;overflow-y:auto}[_nghost-%COMP%]     .p-dropdown-items .p-dropdown-item{padding:10px 12px;margin:2px 0;border-radius:6px;font-size:14px;line-height:1.2;display:flex;align-items:center;gap:8px;color:#1f2937;cursor:pointer;transition:background .15s ease,color .15s ease}[_nghost-%COMP%]     .p-dropdown-items .p-dropdown-item:focus{outline:none;box-shadow:0 0 0 2px #5d157c40 inset}[_nghost-%COMP%]     .p-dropdown-items .p-dropdown-item:hover{background:#f5f0ff}[_nghost-%COMP%]     .p-dropdown-items .p-dropdown-item.p-highlight{background:#5d157c;color:#fff;font-weight:600}[_nghost-%COMP%]     .p-dropdown-items .p-dropdown-empty-message{padding:12px;color:#6b7280}.date-filter-skeleton[_ngcontent-%COMP%]   .skeleton-dropdown[_ngcontent-%COMP%]{height:44px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_loading 1.5s infinite;border-radius:8px;min-width:180px}@keyframes _ngcontent-%COMP%_loading{0%{background-position:200% 0}to{background-position:-200% 0}}.quick-assign[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:8px 20px;margin-bottom:10px;box-shadow:0 2px 12px #0000000d}.quick-assign[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;font-size:16px;color:#1f2937;margin-bottom:16px}.quick-assign[_ngcontent-%COMP%]   .chips-scroll-wrapper[_ngcontent-%COMP%]{overflow-x:auto;white-space:nowrap;-webkit-overflow-scrolling:touch;scrollbar-width:none;overscroll-behavior:contain;-webkit-overscroll-behavior:contain;isolation:isolate;contain:layout style paint}.quick-assign[_ngcontent-%COMP%]   .chips-scroll-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.quick-assign[_ngcontent-%COMP%]   .chips-scroll-wrapper[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]{display:flex;gap:12px;min-width:max-content;padding-bottom:4px;overscroll-behavior:contain;-webkit-overscroll-behavior:contain;isolation:isolate;contain:layout style paint}.quick-assign[_ngcontent-%COMP%]   .chips-scroll-wrapper[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{border-radius:20px;padding:8px 16px;font-size:14px;font-weight:500;transition:all .2s ease;cursor:pointer;overscroll-behavior:contain;-webkit-overscroll-behavior:contain;touch-action:pan-x}.quick-assign[_ngcontent-%COMP%]   .chips-scroll-wrapper[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#5d157c!important}.quick-assign[_ngcontent-%COMP%]   .chips-scroll-wrapper[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]   mat-chip.mat-chip-selected[_ngcontent-%COMP%]{background:#5d157c;color:#fff;box-shadow:0 2px 8px #5d157c4d}.quick-assign[_ngcontent-%COMP%]   .chips-scroll-wrapper[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]:not(.mat-chip-selected){background:#fff;color:#5d157c;border:1.5px solid #5D157C;margin-right:1rem}.quick-assign[_ngcontent-%COMP%]   .chips-scroll-wrapper[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]:not(.mat-chip-selected):hover{border-color:#5d157c;background:#f5e8ff;transform:translateY(-1px)}.filter-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:8px 20px;margin-bottom:10px;box-shadow:0 2px 8px #0000001a}.filter-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]{display:flex;gap:20px}.filter-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]{flex:1}.filter-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]{display:block;font-size:13px;font-weight:500;color:#6b7280;margin-bottom:8px}.filter-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]{position:relative}.filter-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1px solid #e0e0e0;border-radius:8px;font-size:14px}.filter-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#5d157c;box-shadow:0 0 0 3px #5d157c1f}.filter-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .search-input.searching[_ngcontent-%COMP%]{border-color:#5d157c}.filter-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .search-loading[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%)}.filter-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .search-loading[_ngcontent-%COMP%]   .search-spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid #e0e0e0;border-top:2px solid #ff6b35;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.filter-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .search-clear-btn[_ngcontent-%COMP%]{position:absolute;right:36px;top:50%;transform:translateY(-50%);background:transparent;border:none;color:#9ca3af;cursor:pointer;padding:4px;border-radius:4px}.filter-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .search-clear-btn[_ngcontent-%COMP%]:hover{color:#6b7280;background:#f3f4f6}.filter-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]   .status-dropdown[_ngcontent-%COMP%]{width:100%}.filter-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]   .status-dropdown[_ngcontent-%COMP%]   .p-dropdown[_ngcontent-%COMP%]{width:100%;border:1px solid #e0e0e0;border-radius:8px}.filter-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]   .status-dropdown[_ngcontent-%COMP%]   .p-dropdown[_ngcontent-%COMP%]:focus{border-color:#ff6b35;box-shadow:0 0 0 3px #ff6b351a}.custom-dropdown[_ngcontent-%COMP%]   .p-dropdown[_ngcontent-%COMP%]{width:100%;height:44px;border:2px solid #5D157C;border-radius:8px;display:flex;align-items:center;padding:0 8px}.custom-dropdown[_ngcontent-%COMP%]   .p-dropdown[_ngcontent-%COMP%]:focus-within{box-shadow:0 0 0 3px #5d157c1f}.custom-dropdown[_ngcontent-%COMP%]   .p-dropdown[_ngcontent-%COMP%]   .p-dropdown-label[_ngcontent-%COMP%]{font-size:14px}.custom-dropdown[_ngcontent-%COMP%]   .p-dropdown[_ngcontent-%COMP%]   .p-dropdown-trigger[_ngcontent-%COMP%]{color:#5d157c}.orders-list[_ngcontent-%COMP%]   .go-top-btn[_ngcontent-%COMP%]{position:fixed;bottom:80px;margin-left:auto;right:16px;width:44px;height:44px;border-radius:50%;border:none;background:#5d157c;color:#fff;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px #0003;cursor:pointer;z-index:1000;transition:transform .2s ease,box-shadow .2s ease,opacity .2s ease}.orders-list[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;box-shadow:0 2px 8px #0000001a}.orders-list[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .skeleton-select-all[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px}.orders-list[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .skeleton-select-all[_ngcontent-%COMP%]   .skeleton-checkbox[_ngcontent-%COMP%]{width:20px;height:20px;background:#f0f0f0;border-radius:4px;animation:_ngcontent-%COMP%_shimmer 1.5s infinite}.orders-list[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .skeleton-select-all[_ngcontent-%COMP%]   .skeleton-date[_ngcontent-%COMP%]{width:120px;height:16px;background:#f0f0f0;border-radius:4px;animation:_ngcontent-%COMP%_shimmer 1.5s infinite}.orders-list[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .skeleton-order-card[_ngcontent-%COMP%]{background:#f9f9f9;border-radius:12px;padding:16px;margin-bottom:12px}.orders-list[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .skeleton-order-card[_ngcontent-%COMP%]   .skeleton-order-content[_ngcontent-%COMP%]   .skeleton-order-info[_ngcontent-%COMP%]   .skeleton-order-title[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:12px}.orders-list[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .skeleton-order-card[_ngcontent-%COMP%]   .skeleton-order-content[_ngcontent-%COMP%]   .skeleton-order-info[_ngcontent-%COMP%]   .skeleton-order-title[_ngcontent-%COMP%]   .skeleton-checkbox-small[_ngcontent-%COMP%]{width:16px;height:16px;background:#f0f0f0;border-radius:3px;margin-right:12px;animation:_ngcontent-%COMP%_shimmer 1.5s infinite}.orders-list[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .skeleton-order-card[_ngcontent-%COMP%]   .skeleton-order-content[_ngcontent-%COMP%]   .skeleton-order-info[_ngcontent-%COMP%]   .skeleton-order-title[_ngcontent-%COMP%]   .skeleton-order-id[_ngcontent-%COMP%]{width:100px;height:16px;background:#f0f0f0;border-radius:4px;animation:_ngcontent-%COMP%_shimmer 1.5s infinite}.orders-list[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .skeleton-order-card[_ngcontent-%COMP%]   .skeleton-order-content[_ngcontent-%COMP%]   .skeleton-order-info[_ngcontent-%COMP%]   .skeleton-order-desc[_ngcontent-%COMP%]   .skeleton-text[_ngcontent-%COMP%]{width:80%;height:14px;background:#f0f0f0;border-radius:4px;margin-bottom:8px;animation:_ngcontent-%COMP%_shimmer 1.5s infinite}.orders-list[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .skeleton-order-card[_ngcontent-%COMP%]   .skeleton-order-content[_ngcontent-%COMP%]   .skeleton-order-info[_ngcontent-%COMP%]   .skeleton-order-desc[_ngcontent-%COMP%]   .skeleton-text[_ngcontent-%COMP%]:last-child{width:60%}.orders-list[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .skeleton-order-card[_ngcontent-%COMP%]   .skeleton-order-content[_ngcontent-%COMP%]   .skeleton-order-status[_ngcontent-%COMP%]   .skeleton-status-row[_ngcontent-%COMP%]{width:100%;height:12px;background:#f0f0f0;border-radius:4px;margin-bottom:6px;animation:_ngcontent-%COMP%_shimmer 1.5s infinite}.orders-list[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .skeleton-order-card[_ngcontent-%COMP%]   .skeleton-order-footer[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:12px}.orders-list[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]   .skeleton-order-card[_ngcontent-%COMP%]   .skeleton-order-footer[_ngcontent-%COMP%]   .skeleton-button[_ngcontent-%COMP%]{width:80px;height:32px;background:#f0f0f0;border-radius:6px;animation:_ngcontent-%COMP%_shimmer 1.5s infinite}.orders-list[_ngcontent-%COMP%]   .error-state[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:40px 20px;text-align:center;box-shadow:0 2px 8px #0000001a}.orders-list[_ngcontent-%COMP%]   .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#666;font-size:16px;margin-bottom:16px}.orders-list[_ngcontent-%COMP%]   .error-state[_ngcontent-%COMP%]   .retry-button[_ngcontent-%COMP%]{background:#ff6b35;color:#fff;border:none;padding:12px 24px;border-radius:8px;font-size:14px;cursor:pointer}.orders-list[_ngcontent-%COMP%]   .error-state[_ngcontent-%COMP%]   .retry-button[_ngcontent-%COMP%]:hover{background:#e55a2b}.orders-list[_ngcontent-%COMP%]   .select-all[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background:#fff;border-radius:12px 12px 0 0;padding:16px 20px;border-bottom:1px solid #e0e0e0;box-shadow:0 2px 8px #0000001a}.orders-list[_ngcontent-%COMP%]   .select-all[_ngcontent-%COMP%]   .date-label[_ngcontent-%COMP%]{font-size:14px;color:#000;font-weight:500}.orders-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:40px 20px;text-align:center;box-shadow:0 2px 8px #0000001a}.orders-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:16px;margin-bottom:8px}.orders-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p.empty-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#999}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;margin-bottom:16px;box-shadow:0 2px 8px #0000001a;cursor:pointer;transition:transform .2s,box-shadow .2s}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 16px #00000026}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]:last-child{margin-bottom:24px}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:6px 20px;border-bottom:1px solid #f0f0f0}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-header[_ngcontent-%COMP%]   .order-title[_ngcontent-%COMP%]{display:flex;align-items:center}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-header[_ngcontent-%COMP%]   .order-title[_ngcontent-%COMP%]   .order-id[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#333;margin-left:12px}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]{padding:6px 20px}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .customer-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]{margin-bottom:16px}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:4px 0}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%]{font-size:13px;color:#6b7280;font-weight:500}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{font-size:14px;color:#1f2937;font-weight:600}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]:last-child   .summary-item[_ngcontent-%COMP%]{padding:2px 0}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .customer-name-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:4px}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .call-icon-link[_ngcontent-%COMP%]{color:#10b981;text-decoration:none;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center;justify-content:center}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .call-icon-link[_ngcontent-%COMP%]:hover{color:#059669;transform:scale(1.1)}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .call-icon-link[_ngcontent-%COMP%]:active{transform:scale(.95)}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .call-icon-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .customer-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#333}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .order-items[_ngcontent-%COMP%]{font-size:14px;color:#666}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;width:100%;justify-content:flex-start;flex-direction:row;flex-wrap:nowrap;overflow-x:auto}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions.accepted-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:50px;font-size:12px;font-weight:600;padding:5px 10px;border:none!important;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);min-width:80px;height:35px;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;flex-shrink:0;box-shadow:0 4px 12px #00000026;background:transparent}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(135deg,#fff3,#ffffff1a);opacity:0;transition:opacity .3s ease}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover:before{opacity:1}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]{display:flex;align-items:center!important;justify-content:center!important;gap:6px!important;z-index:1;position:relative;width:100%;height:100%}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px;z-index:1;position:relative}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:11px;line-height:1.2;font-weight:600;text-transform:uppercase;letter-spacing:.3px;z-index:1;position:relative}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.4!important;cursor:not-allowed!important;transform:none!important;box-shadow:0 2px 6px #0000001a!important;background:#e5e7eb!important;color:#9ca3af!important;pointer-events:none!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled   .btn-content[_ngcontent-%COMP%]{opacity:.6!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled   i[_ngcontent-%COMP%]{opacity:.6!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%]{font-size:12px;text-transform:none;letter-spacing:normal}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn.btn-accept[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669)!important;color:#fff!important;box-shadow:0 4px 12px #10b9814d!important;border:none!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn.btn-accept[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#059669,#047857)!important;transform:translateY(-3px) scale(1.05);box-shadow:0 8px 20px #10b98166!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn.btn-accept[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(-1px) scale(1.02)}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn.btn-reject[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626)!important;color:#fff!important;box-shadow:0 4px 12px #ef44444d!important;border:none!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn.btn-reject[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#dc2626,#b91c1c)!important;transform:translateY(-3px) scale(1.05);box-shadow:0 8px 20px #ef444466!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn.btn-reject[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(-1px) scale(1.02)}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn.btn-assign[_ngcontent-%COMP%]{background:linear-gradient(135deg,#7c3aed,#6d28d9)!important;color:#fff!important;box-shadow:0 4px 12px #7c3aed4d!important;border:none!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn.btn-assign[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#6d28d9,#5b21b6)!important;transform:translateY(-3px) scale(1.05);box-shadow:0 8px 20px #7c3aed66!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn.btn-assign[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(-1px) scale(1.02)}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn.btn-direction[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#7c3aed)!important;color:#fff!important;box-shadow:0 4px 12px #8b5cf64d!important;border:none!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn.btn-direction[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#7c3aed,#6d28d9)!important;transform:translateY(-3px) scale(1.05);box-shadow:0 8px 20px #8b5cf666!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn.btn-direction[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(-1px) scale(1.02)}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn.btn-ready[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706)!important;color:#fff!important;box-shadow:0 4px 12px #f59e0b4d!important;border:none!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn.btn-ready[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#d97706,#b45309)!important;transform:translateY(-3px) scale(1.05);box-shadow:0 8px 20px #f59e0b66!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn.btn-ready[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(-1px) scale(1.02)}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn.btn-ready[_ngcontent-%COMP%]:disabled{background:#e5e7eb!important;color:#9ca3af!important;box-shadow:0 2px 6px #0000001a!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn.btn-delivery[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ea580c,#dc2626)!important;color:#fff!important;box-shadow:0 4px 12px #ea580c4d!important;border:none!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn.btn-delivery[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#dc2626,#b91c1c)!important;transform:translateY(-3px) scale(1.05);box-shadow:0 8px 20px #ea580c66!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn.btn-delivery[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(-1px) scale(1.02)}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn.btn-delivery[_ngcontent-%COMP%]:disabled{background:#e5e7eb!important;color:#9ca3af!important;box-shadow:0 2px 6px #0000001a!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn.btn-complete[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669)!important;color:#fff!important;box-shadow:0 4px 12px #10b9814d!important;border:none!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn.btn-complete[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#059669,#047857)!important;transform:translateY(-3px) scale(1.05);box-shadow:0 8px 20px #10b98166!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn.btn-complete[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(-1px) scale(1.02)}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn.btn-complete[_ngcontent-%COMP%]:disabled{background:#e5e7eb!important;color:#9ca3af!important;box-shadow:0 2px 6px #0000001a!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:50px;font-size:12px;font-weight:600;padding:5px 10px;border:none!important;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);min-width:80px;height:35px;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;flex-shrink:0;box-shadow:0 4px 12px #00000026;background:transparent}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(135deg,#fff3,#ffffff1a);opacity:0;transition:opacity .3s ease}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover:before{opacity:1}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:6px;z-index:1;position:relative}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn.btn-direction[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#7c3aed)!important;color:#fff!important;box-shadow:0 4px 12px #8b5cf64d!important;border:none!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn.btn-direction[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#7c3aed,#6d28d9)!important;transform:translateY(-3px) scale(1.05);box-shadow:0 8px 20px #8b5cf666!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn.btn-direction[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(-1px) scale(1.02)}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn.btn-assign[_ngcontent-%COMP%]{background:linear-gradient(135deg,#7c3aed,#6d28d9)!important;color:#fff!important;box-shadow:0 4px 12px #7c3aed4d!important;border:none!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn.btn-assign[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#6d28d9,#5b21b6)!important;transform:translateY(-3px) scale(1.05);box-shadow:0 8px 20px #7c3aed66!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .secondary-actions[_ngcontent-%COMP%]   .btn.btn-assign[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(-1px) scale(1.02)}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled, .orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn.btn-disabled[_ngcontent-%COMP%]{background:#e5e7eb!important;color:#9ca3af!important;opacity:.4!important;cursor:not-allowed!important;transform:none!important;box-shadow:0 2px 6px #0000001a!important;pointer-events:none!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled   .btn-content[_ngcontent-%COMP%], .orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn.btn-disabled[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]{opacity:.6!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled   i[_ngcontent-%COMP%], .orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn.btn-disabled[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{opacity:.6!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .btn.btn-disabled[_ngcontent-%COMP%]{background:#e5e7eb!important;color:#9ca3af!important;opacity:.4!important;cursor:not-allowed!important;transform:none!important;box-shadow:0 2px 6px #0000001a!important;pointer-events:none!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .btn.btn-disabled[_ngcontent-%COMP%]:hover{background:#e5e7eb!important;color:#9ca3af!important;transform:none!important;box-shadow:0 2px 6px #0000001a!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .btn.btn-disabled[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%], .orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .btn.btn-disabled[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{opacity:.6!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .orders-container[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn.btn-disabled[_ngcontent-%COMP%], .orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .orders-container[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{background:#e5e7eb!important;background-image:none!important;color:#9ca3af!important;opacity:.4!important;cursor:not-allowed!important;transform:none!important;box-shadow:0 2px 6px #0000001a!important;pointer-events:none!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .orders-container[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn.btn-disabled[_ngcontent-%COMP%]:hover, .orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .orders-container[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn.btn-disabled[_ngcontent-%COMP%]:focus, .orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .orders-container[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn.btn-disabled[_ngcontent-%COMP%]:active, .orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .orders-container[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled:hover, .orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .orders-container[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled:focus, .orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .orders-container[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled:active{background:#e5e7eb!important;background-image:none!important;color:#9ca3af!important;transform:none!important;box-shadow:0 2px 6px #0000001a!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .orders-container[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn.btn-disabled[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%], .orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .orders-container[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled   .btn-content[_ngcontent-%COMP%]{opacity:.6!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .orders-container[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn.btn-disabled[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .orders-container[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled   i[_ngcontent-%COMP%]{opacity:.6!important}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:8px}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{font-size:14px;color:#666}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#333}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-value.payment-paid[_ngcontent-%COMP%]{color:#28a745}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-value.payment-pending[_ngcontent-%COMP%]{color:#ffc107}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-value.payment-failed[_ngcontent-%COMP%]{color:#dc3545}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-status-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:12px;font-size:13px;font-weight:600;text-align:center}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-status-badge.status-pending[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-status-badge.status-accepted[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-status-badge.status-delivered[_ngcontent-%COMP%], .orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-status-badge.status-completed[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-status-badge.status-cancelled[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-status-badge.status-ready[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .payment-status-text[_ngcontent-%COMP%]{font-size:14px;font-weight:600;text-align:right}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .payment-status-text.status-paid[_ngcontent-%COMP%], .orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .payment-status-text.status-completed[_ngcontent-%COMP%]{color:#28a745}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .payment-status-text.status-pending[_ngcontent-%COMP%], .orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .payment-status-text.status-unpaid[_ngcontent-%COMP%]{color:#ffc107}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .payment-status-text.status-failed[_ngcontent-%COMP%], .orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .payment-status-text.status-cancelled[_ngcontent-%COMP%]{color:#dc3545}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px;background:#f9fafb;border-top:1px solid #e5e7eb}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-footer[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;width:100%;justify-content:space-between;flex-direction:row;padding:5px;background:linear-gradient(135deg,#f8fafc,#f1f5f9);flex-wrap:nowrap;overflow-x:auto}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-footer[_ngcontent-%COMP%]   .action-buttons.close[_ngcontent-%COMP%]{background:#f59e0b;color:#fff;border-radius:12px;min-width:100px;height:44px;padding:12px 20px;font-weight:700;font-size:14px;text-transform:uppercase;letter-spacing:.5px;border:none}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-footer[_ngcontent-%COMP%]   .action-buttons.close[_ngcontent-%COMP%]:hover:not(:disabled){background:#d97706;transform:translateY(-2px);box-shadow:0 6px 16px #f59e0b66}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-footer[_ngcontent-%COMP%]   .assigned-person[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#5d157c;padding:8px 12px;background:#f5e8ff;border-radius:6px;border:1px solid #e9d5ff}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-footer[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:12px;font-size:12px;font-weight:600;margin-left:auto}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-footer[_ngcontent-%COMP%]   .status-badge.status-completed[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-footer[_ngcontent-%COMP%]   .status-badge.status-cancelled[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-footer[_ngcontent-%COMP%]   .status-badge.status-ready[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.pagination-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;margin-top:20px;box-shadow:0 2px 8px #0000001a}.pagination-section[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]{text-align:center;font-size:14px;color:#666;margin-bottom:16px}.pagination-section[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:16px}.pagination-section[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   .pagination-btn[_ngcontent-%COMP%]{background:#ff6b35;color:#fff;border:none;padding:8px 16px;border-radius:6px;font-size:14px;cursor:pointer}.pagination-section[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   .pagination-btn[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed}.pagination-section[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   .pagination-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#e55a2b}.pagination-section[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{font-size:14px;color:#666}.quick-sale-panel[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;margin-top:20px;box-shadow:0 2px 8px #0000001a}.quick-sale-panel[_ngcontent-%COMP%]   .panel-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#333;margin-bottom:20px}.quick-sale-panel[_ngcontent-%COMP%]   .quick-sale-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{margin-bottom:16px}.quick-sale-panel[_ngcontent-%COMP%]   .quick-sale-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]{display:block;font-size:13px;font-weight:500;color:#6b7280;margin-bottom:8px}.quick-sale-panel[_ngcontent-%COMP%]   .quick-sale-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]{position:relative}.quick-sale-panel[_ngcontent-%COMP%]   .quick-sale-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1px solid #e0e0e0;border-radius:8px;font-size:14px}.quick-sale-panel[_ngcontent-%COMP%]   .quick-sale-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#ff6b35;box-shadow:0 0 0 3px #ff6b351a}.quick-sale-panel[_ngcontent-%COMP%]   .quick-sale-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);color:#666}.quick-sale-panel[_ngcontent-%COMP%]   .quick-sale-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .toggle-switch[_ngcontent-%COMP%]{display:flex;gap:8px}.quick-sale-panel[_ngcontent-%COMP%]   .quick-sale-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .toggle-switch[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1;padding:8px 16px;border:1px solid #e0e0e0;border-radius:6px;text-align:center;cursor:pointer;transition:all .2s}.quick-sale-panel[_ngcontent-%COMP%]   .quick-sale-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .toggle-switch[_ngcontent-%COMP%]   label.active[_ngcontent-%COMP%]{background:#ff6b35;color:#fff;border-color:#ff6b35}.quick-sale-panel[_ngcontent-%COMP%]   .quick-sale-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .toggle-switch[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.quick-sale-panel[_ngcontent-%COMP%]   .quick-sale-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{background:#ff6b35;color:#fff;border:none;padding:12px 24px;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;width:100%}.quick-sale-panel[_ngcontent-%COMP%]   .quick-sale-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed}.quick-sale-panel[_ngcontent-%COMP%]   .quick-sale-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#e55a2b}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-200px 0}to{background-position:calc(200px + 100%) 0}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.skeleton[_ngcontent-%COMP%]   .skeleton-label[_ngcontent-%COMP%]{width:80px;height:16px;background:#f0f0f0;border-radius:4px;margin-bottom:8px;animation:_ngcontent-%COMP%_shimmer 1.5s infinite}.skeleton[_ngcontent-%COMP%]   .skeleton-input[_ngcontent-%COMP%], .skeleton[_ngcontent-%COMP%]   .skeleton-dropdown[_ngcontent-%COMP%]{width:100%;height:44px;background:#f0f0f0;border-radius:8px;animation:_ngcontent-%COMP%_shimmer 1.5s infinite}.skeleton[_ngcontent-%COMP%]   .skeleton-chip[_ngcontent-%COMP%]{width:80px;height:32px;background:#f0f0f0;border-radius:16px;margin-right:8px;margin-bottom:8px;animation:_ngcontent-%COMP%_shimmer 1.5s infinite}.order-summary[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-size:14px;color:#1f2937;margin-top:16px;padding:12px 16px;background:#f9fafb;border-radius:8px;border:1px solid #e5e7eb}.order-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.order-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%]{font-weight:700;color:#1f2937;min-width:80px}.order-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{font-weight:400;color:#1f2937;font-size:14px}.order-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-value.zero-amount[_ngcontent-%COMP%]{color:#dc2626;text-decoration:underline;cursor:pointer;transition:all .2s ease}.order-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-value.zero-amount[_ngcontent-%COMP%]:hover{color:#b91c1c;text-decoration:none}.order-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-value.zero-amount[_ngcontent-%COMP%]   .zero-amount-icon[_ngcontent-%COMP%]{margin-left:4px;font-size:12px;color:#f59e0b;animation:_ngcontent-%COMP%_pulse 2s infinite}.order-summary[_ngcontent-%COMP%]   .summary-separator[_ngcontent-%COMP%]{margin:0 8px;color:#1f2937;font-weight:400;font-size:14px}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.infinite-scroll-sentinel[_ngcontent-%COMP%]{display:block;height:2px;width:100%}.infinite-scroll-loader[_ngcontent-%COMP%]{text-align:center;padding:8px 0;color:#666;font-size:12px;display:flex;align-items:center;justify-content:center;gap:8px}.infinite-scroll-loader[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid #e0e0e0;border-top:2px solid #6a1b9a;border-radius:50%;animation:_ngcontent-%COMP%_spin .9s linear infinite}.infinite-scroll-loader[_ngcontent-%COMP%]   .loader-text[_ngcontent-%COMP%]{font-size:12px;color:#6b7280}.toggle-wrapper[_ngcontent-%COMP%]{display:flex;border:1px solid #6a1b9a;border-radius:8px;overflow:hidden;width:fit-content;flex:1 1 auto;min-width:0}@media (max-width: 600px){.toggle-wrapper[_ngcontent-%COMP%]{width:100%}}.toggle-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;border:none;border-radius:0;background:#fff;color:#6a1b9a;font-weight:500;padding:10px 12px;font-size:14px;transition:all .2s ease;min-width:100px}.toggle-wrapper[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#6a1b9a;color:#fff}.toggle-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(.active):hover{background:#f3e5f5}@media (max-width: 600px){.toggle-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:0;font-size:13px;padding:10px 8px}}[_nghost-%COMP%]     .mat-mdc-checkbox .mdc-form-field label, [_nghost-%COMP%]     .mat-checkbox .mat-checkbox-label, [_nghost-%COMP%]     .mat-mdc-checkbox .mdc-label{color:#000!important;font-weight:400}.order-card.focused-order[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_focusHighlight 2s ease-in-out;border:2px solid #6a1b9a!important;box-shadow:0 0 20px #6a1b9a4d!important;transform:scale(1.02);transition:all .3s ease}@keyframes _ngcontent-%COMP%_focusHighlight{0%{box-shadow:0 0 #6a1b9a66;transform:scale(1)}50%{box-shadow:0 0 30px #6a1b9a99;transform:scale(1.05)}to{box-shadow:0 0 20px #6a1b9a4d;transform:scale(1.02)}}@media (max-width: 768px){.action-buttons[_ngcontent-%COMP%]{gap:6px;padding:12px 16px;flex-wrap:nowrap;justify-content:space-between;overflow-x:auto;-webkit-overflow-scrolling:touch}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:70px;height:36px;flex-shrink:0}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]{gap:4px}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:10px}.action-buttons.accepted-actions[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr);gap:6px;padding:8px}.action-buttons.accepted-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:50px}.action-buttons.accepted-actions[_ngcontent-%COMP%]   .btn.vertical-layout[_ngcontent-%COMP%]{padding:8px 4px;min-width:50px}.action-buttons.accepted-actions[_ngcontent-%COMP%]   .btn.vertical-layout[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:8px}.action-buttons.accepted-actions[_ngcontent-%COMP%]   .btn.vertical-layout[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.action-buttons.accepted-actions[_ngcontent-%COMP%]   .btn.complete-icon[_ngcontent-%COMP%], .action-buttons.accepted-actions[_ngcontent-%COMP%]   .btn.direction-icon[_ngcontent-%COMP%]{min-width:40px;height:40px}.action-buttons.accepted-actions[_ngcontent-%COMP%]   .btn.complete-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .action-buttons.accepted-actions[_ngcontent-%COMP%]   .btn.direction-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 480px){.action-buttons[_ngcontent-%COMP%]{gap:4px;padding:10px 12px;overflow-x:auto;-webkit-overflow-scrolling:touch}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:60px;height:32px;flex-shrink:0}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]{gap:3px}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:9px}.action-buttons.accepted-actions[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:4px;padding:6px}.action-buttons.accepted-actions[_ngcontent-%COMP%]   .btn.vertical-layout[_ngcontent-%COMP%]{padding:6px 2px;min-width:45px}.action-buttons.accepted-actions[_ngcontent-%COMP%]   .btn.vertical-layout[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:7px}.action-buttons.accepted-actions[_ngcontent-%COMP%]   .btn.vertical-layout[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.action-buttons.accepted-actions[_ngcontent-%COMP%]   .btn.complete-icon[_ngcontent-%COMP%], .action-buttons.accepted-actions[_ngcontent-%COMP%]   .btn.direction-icon[_ngcontent-%COMP%]{min-width:36px;height:36px}.action-buttons.accepted-actions[_ngcontent-%COMP%]   .btn.complete-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .action-buttons.accepted-actions[_ngcontent-%COMP%]   .btn.direction-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}}.action-buttons[_ngcontent-%COMP%]   .btn.btn-accept[_ngcontent-%COMP%], .action-buttons[_ngcontent-%COMP%]   .btn.btn-reject[_ngcontent-%COMP%], .action-buttons[_ngcontent-%COMP%]   .btn.btn-ready[_ngcontent-%COMP%], .action-buttons[_ngcontent-%COMP%]   .btn.btn-delivery[_ngcontent-%COMP%], .action-buttons[_ngcontent-%COMP%]   .btn.btn-complete[_ngcontent-%COMP%], .action-buttons[_ngcontent-%COMP%]   .btn.btn-assign[_ngcontent-%COMP%], .action-buttons[_ngcontent-%COMP%]   .btn.btn-direction[_ngcontent-%COMP%]{background:var(--button-bg)!important;color:#fff!important;border:none!important;box-shadow:var(--button-shadow)!important;border-radius:50px}.action-buttons[_ngcontent-%COMP%]   .btn.btn-accept[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%], .action-buttons[_ngcontent-%COMP%]   .btn.btn-reject[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%], .action-buttons[_ngcontent-%COMP%]   .btn.btn-ready[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%], .action-buttons[_ngcontent-%COMP%]   .btn.btn-delivery[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%], .action-buttons[_ngcontent-%COMP%]   .btn.btn-complete[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%], .action-buttons[_ngcontent-%COMP%]   .btn.btn-assign[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%], .action-buttons[_ngcontent-%COMP%]   .btn.btn-direction[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]{display:flex;gap:10px!important;padding:5px 15px!important;justify-content:center!important;align-items:center!important}.action-buttons[_ngcontent-%COMP%]   .btn.btn-accept[_ngcontent-%COMP%]:hover:not(:disabled), .action-buttons[_ngcontent-%COMP%]   .btn.btn-reject[_ngcontent-%COMP%]:hover:not(:disabled), .action-buttons[_ngcontent-%COMP%]   .btn.btn-ready[_ngcontent-%COMP%]:hover:not(:disabled), .action-buttons[_ngcontent-%COMP%]   .btn.btn-delivery[_ngcontent-%COMP%]:hover:not(:disabled), .action-buttons[_ngcontent-%COMP%]   .btn.btn-complete[_ngcontent-%COMP%]:hover:not(:disabled), .action-buttons[_ngcontent-%COMP%]   .btn.btn-assign[_ngcontent-%COMP%]:hover:not(:disabled), .action-buttons[_ngcontent-%COMP%]   .btn.btn-direction[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--button-hover-bg)!important;transform:translateY(-3px) scale(1.05);box-shadow:var(--button-hover-shadow)!important}.action-buttons[_ngcontent-%COMP%]   .btn.btn-accept[_ngcontent-%COMP%]:active:not(:disabled), .action-buttons[_ngcontent-%COMP%]   .btn.btn-reject[_ngcontent-%COMP%]:active:not(:disabled), .action-buttons[_ngcontent-%COMP%]   .btn.btn-ready[_ngcontent-%COMP%]:active:not(:disabled), .action-buttons[_ngcontent-%COMP%]   .btn.btn-delivery[_ngcontent-%COMP%]:active:not(:disabled), .action-buttons[_ngcontent-%COMP%]   .btn.btn-complete[_ngcontent-%COMP%]:active:not(:disabled), .action-buttons[_ngcontent-%COMP%]   .btn.btn-assign[_ngcontent-%COMP%]:active:not(:disabled), .action-buttons[_ngcontent-%COMP%]   .btn.btn-direction[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(-1px) scale(1.02)}.action-buttons[_ngcontent-%COMP%]   .btn.btn-accept[_ngcontent-%COMP%]{--button-bg: linear-gradient(135deg, #10b981 0%, #059669 100%);--button-hover-bg: linear-gradient(135deg, #059669 0%, #047857 100%);--button-shadow: 0 4px 12px rgba(16, 185, 129, .3);--button-hover-shadow: 0 8px 20px rgba(16, 185, 129, .4)}.action-buttons[_ngcontent-%COMP%]   .btn.btn-reject[_ngcontent-%COMP%]{--button-bg: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);--button-hover-bg: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);--button-shadow: 0 4px 12px rgba(239, 68, 68, .3);--button-hover-shadow: 0 8px 20px rgba(239, 68, 68, .4)}.action-buttons[_ngcontent-%COMP%]   .btn.btn-ready[_ngcontent-%COMP%]{--button-bg: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);--button-hover-bg: linear-gradient(135deg, #d97706 0%, #b45309 100%);--button-shadow: 0 4px 12px rgba(245, 158, 11, .3);--button-hover-shadow: 0 8px 20px rgba(245, 158, 11, .4)}.action-buttons[_ngcontent-%COMP%]   .btn.btn-delivery[_ngcontent-%COMP%]{--button-bg: linear-gradient(135deg, #ea580c 0%, #dc2626 100%);--button-hover-bg: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);--button-shadow: 0 4px 12px rgba(234, 88, 12, .3);--button-hover-shadow: 0 8px 20px rgba(234, 88, 12, .4)}.action-buttons[_ngcontent-%COMP%]   .btn.btn-complete[_ngcontent-%COMP%]{--button-bg: linear-gradient(135deg, #10b981 0%, #059669 100%);--button-hover-bg: linear-gradient(135deg, #059669 0%, #047857 100%);--button-shadow: 0 4px 12px rgba(16, 185, 129, .3);--button-hover-shadow: 0 8px 20px rgba(16, 185, 129, .4)}.action-buttons[_ngcontent-%COMP%]   .btn.btn-assign[_ngcontent-%COMP%]{--button-bg: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);--button-hover-bg: linear-gradient(135deg, #6d28d9 0%, #5b21b6 100%);--button-shadow: 0 4px 12px rgba(124, 58, 237, .3);--button-hover-shadow: 0 8px 20px rgba(124, 58, 237, .4)}.action-buttons[_ngcontent-%COMP%]   .btn.btn-direction[_ngcontent-%COMP%]{--button-bg: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);--button-hover-bg: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);--button-shadow: 0 4px 12px rgba(139, 92, 246, .3);--button-hover-shadow: 0 8px 20px rgba(139, 92, 246, .4)}.secondary-actions[_ngcontent-%COMP%]   .btn.btn-direction[_ngcontent-%COMP%], .secondary-actions[_ngcontent-%COMP%]   .btn.btn-assign[_ngcontent-%COMP%]{background:var(--button-bg)!important;color:#fff!important;border:none!important;box-shadow:var(--button-shadow)!important}.secondary-actions[_ngcontent-%COMP%]   .btn.btn-direction[_ngcontent-%COMP%]:hover:not(:disabled), .secondary-actions[_ngcontent-%COMP%]   .btn.btn-assign[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--button-hover-bg)!important;transform:translateY(-3px) scale(1.05);box-shadow:var(--button-hover-shadow)!important}.secondary-actions[_ngcontent-%COMP%]   .btn.btn-direction[_ngcontent-%COMP%]:active:not(:disabled), .secondary-actions[_ngcontent-%COMP%]   .btn.btn-assign[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(-1px) scale(1.02)}.secondary-actions[_ngcontent-%COMP%]   .btn.btn-direction[_ngcontent-%COMP%]{--button-bg: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);--button-hover-bg: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);--button-shadow: 0 4px 12px rgba(139, 92, 246, .3);--button-hover-shadow: 0 8px 20px rgba(139, 92, 246, .4);margin-right:auto}.secondary-actions[_ngcontent-%COMP%]   .btn.btn-assign[_ngcontent-%COMP%]{--button-bg: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);--button-hover-bg: linear-gradient(135deg, #6d28d9 0%, #5b21b6 100%);--button-shadow: 0 4px 12px rgba(124, 58, 237, .3);--button-hover-shadow: 0 8px 20px rgba(124, 58, 237, .4);margin-left:auto}.assigned-person-name[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px;background:linear-gradient(135deg,#f3f4f6,#e5e7eb);border:1px solid #d1d5db;border-radius:50px;color:#374151;font-size:13px;font-weight:600;margin-left:auto;box-shadow:0 2px 4px #0000001a;min-width:80px;height:35px;justify-content:center}.assigned-person-name[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px;color:#6b7280}.assigned-person-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#374151;font-weight:600}']})};var ur=class i{ngOnInit(){}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=R({type:i,selectors:[["orders-overview"]],features:[_n([],[pc])],decls:1,vars:0,template:function(e,n){e&1&&h(0,"orders-list")},dependencies:[gr]})};var df=i=>({"rotate-180":i}),lf=()=>[1,2,3],pf=()=>[1,2];function mf(i,t){if(i&1){let e=E();s(0,"div",21)(1,"div",22),v("click",function(){b(e);let o=_(2);return C(o.selectFilter("More Than 5 days"))}),p(2," More Than 5 days "),c(),s(3,"div",22),v("click",function(){b(e);let o=_(2);return C(o.selectFilter("Last 7 days"))}),p(4," Last 7 days "),c(),s(5,"div",22),v("click",function(){b(e);let o=_(2);return C(o.selectFilter("This Month"))}),p(6," This Month "),c()()}}function gf(i,t){if(i&1){let e=E();s(0,"div",16)(1,"div",17)(2,"button",18),v("click",function(){b(e);let o=_();return C(o.toggleDropdown())}),p(3),h(4,"i",19),c(),y(5,mf,7,0,"div",20),c()()}if(i&2){let e=_();d(3),T(" ",e.selectedFilter," "),d(),g("ngClass",ln(3,df,e.isDropdownOpen)),d(),g("ngIf",e.isDropdownOpen)}}function uf(i,t){i&1&&(s(0,"div",35)(1,"div",36),h(2,"div",37)(3,"div",38),c(),s(4,"div",39),h(5,"div",40)(6,"div",41)(7,"div",42),c()())}function ff(i,t){i&1&&(s(0,"div",25)(1,"div",26),h(2,"div",27)(3,"div",28),c(),s(4,"div",29),h(5,"div",30)(6,"div",31)(7,"div",32),c(),s(8,"div",33),y(9,uf,8,0,"div",34),c()()),i&2&&(d(9),g("ngForOf",se(1,pf)))}function _f(i,t){i&1&&(s(0,"div",23),y(1,ff,10,2,"div",24),c()),i&2&&(d(),g("ngForOf",se(1,lf)))}function hf(i,t){if(i&1&&(s(0,"span"),p(1),c()),i&2){let e=_().$implicit;d(),T("x",e.quantity,"")}}function bf(i,t){if(i&1&&(s(0,"div",73)(1,"span"),p(2),y(3,hf,2,1,"span",12),c(),s(4,"span"),p(5),c()()),i&2){let e=t.$implicit;d(2),T("",e.product_name," "),d(),g("ngIf",e.quantity),d(2),T("\u20B9",e.price,"")}}function Cf(i,t){if(i&1&&(et(0),y(1,bf,6,3,"div",72),tt()),i&2){let e=_(2).$implicit;d(),g("ngForOf",e.order_items)}}function vf(i,t){i&1&&(s(0,"div",74),p(1," No items available "),c())}function xf(i,t){if(i&1&&(s(0,"div",68)(1,"div",69),p(2," Order Details "),c(),y(3,Cf,2,1,"ng-container",70)(4,vf,2,0,"ng-template",null,0,Pe),s(6,"div",71)(7,"span"),p(8,"Total"),c(),s(9,"span"),p(10),c()()()),i&2){let e=ge(5),n=_().$implicit;d(3),g("ngIf",n.order_items==null?null:n.order_items.length)("ngIfElse",e),d(7),T("\u20B9",n.total_amount,"")}}function Pf(i,t){if(i&1){let e=E();s(0,"div",61)(1,"div",62),v("click",function(){let o=b(e).$implicit,r=_(4);return C(r.toggleOrder(o))}),s(2,"label",63)(3,"input",64),N("ngModelChange",function(o){let r=b(e).$implicit;return z(r.selected,o)||(r.selected=o),C(o)}),v("click",function(o){return b(e),C(o.stopPropagation())}),c(),p(4),c(),s(5,"div",48)(6,"span",65),p(7),M(8,"number"),c(),s(9,"mat-icon",66),v("click",function(o){let r=b(e).$implicit;return _(4).toggleOrder(r),C(o.stopPropagation())}),p(10),c()()(),y(11,xf,11,3,"div",67),c()}if(i&2){let e=t.$implicit;d(3),L("ngModel",e.selected),d(),T(" #ORT",e.order_id," "),d(3),S(O(8,5,e.total_amount)),d(3),T(" ",e.isExpanded?"keyboard_arrow_up":"keyboard_arrow_down"," "),d(),g("ngIf",e.isExpanded)}}function yf(i,t){if(i&1&&(s(0,"div",59),y(1,Pf,12,7,"div",60),c()),i&2){let e=_().$implicit;d(),g("ngForOf",e.overdue_orders)}}function Mf(i,t){if(i&1){let e=E();s(0,"div",45)(1,"div",46),v("click",function(){let o=b(e).$implicit,r=_(2);return C(r.toggleUser(o))}),s(2,"div",47),p(3),c(),s(4,"div",48)(5,"span",49),p(6),M(7,"number"),c(),s(8,"mat-icon",50),p(9),c()()(),s(10,"div",51)(11,"div",52)(12,"button",53),v("click",function(o){let r=b(e).$implicit;return _(2).showProviderQR(r),C(o.stopPropagation())}),s(13,"mat-icon",54),p(14,"qr_code"),c(),s(15,"span",55),p(16,"BILL QR"),c()(),s(17,"button",56),v("click",function(o){let r=b(e).$implicit;return _(2).clearSelectedOrders(r),C(o.stopPropagation())}),p(18," Clear "),c(),s(19,"span",57),p(20,"Remind"),c()()(),y(21,yf,2,1,"div",58),c()}if(i&2){let e=t.$implicit;d(3),T(" ",e.username||"Unnamed User"," "),d(3),T(" ",O(7,4,e.total_overdue_amount)," "),d(3),T(" ",e.isExpanded?"keyboard_arrow_up":"keyboard_arrow_down"," "),d(12),g("ngIf",e.isExpanded)}}function Of(i,t){i&1&&(s(0,"div",75),p(1," No overdue users found. "),c())}function wf(i,t){if(i&1&&(s(0,"div"),y(1,Mf,22,6,"div",43)(2,Of,2,0,"div",44),c()),i&2){let e=_();d(),g("ngForOf",e.filteredUsers),d(),g("ngIf",e.filteredUsers.length===0&&!e.isLoading)}}function Sf(i,t){i&1&&(s(0,"div",76),h(1,"i",77),s(2,"span",78),p(3,"Loading more..."),c()())}function kf(i,t){if(i&1){let e=E();s(0,"button",82),v("click",function(){b(e);let o=_(2);return C(o.loadNextPage())}),p(1," Load More "),c()}}function If(i,t){i&1&&(s(0,"span",83),p(1," There are no more dues "),c())}function Tf(i,t){if(i&1&&(s(0,"div",79),y(1,kf,2,0,"button",80)(2,If,2,0,"span",81),c()),i&2){let e=_();d(),g("ngIf",e.hasMore),d(),g("ngIf",!e.hasMore)}}function Ef(i,t){if(i&1&&h(0,"qrcode",99),i&2){let e=_(2);g("qrdata",e.qrData)("width",250)("errorCorrectionLevel","M")}}function Ff(i,t){if(i&1&&(s(0,"div",100),p(1),c()),i&2){let e=_(2);d(),T(" Customer: ",e.selectedUserForQr.username||"Unnamed User"," ")}}function Df(i,t){if(i&1){let e=E();s(0,"div",84),v("click",function(){b(e);let o=_();return C(o.closeQrDialog())}),s(1,"div",85),v("click",function(o){return b(e),C(o.stopPropagation())}),s(2,"div",86)(3,"h3",87),p(4,"Payment QR Code"),c(),s(5,"button",88),v("click",function(){b(e);let o=_();return C(o.closeQrDialog())}),s(6,"mat-icon"),p(7,"close"),c()()(),s(8,"div",89)(9,"div",90),y(10,Ef,1,3,"qrcode",91),c(),s(11,"div",16)(12,"p",92),p(13,"Pay to"),c(),s(14,"p",93),p(15),c()(),s(16,"div",16)(17,"p",92),p(18,"UPI ID"),c(),s(19,"p",94),p(20),c()(),s(21,"div",95)(22,"p",92),p(23,"Amount"),c(),s(24,"p",96),p(25),M(26,"number"),c()(),y(27,Ff,2,1,"div",97),s(28,"button",98),v("click",function(){b(e);let o=_();return C(o.closeQrDialog())}),p(29," Close "),c()()()()}if(i&2){let e=_();d(10),g("ngIf",e.qrData),d(5),T(" ",e.qrProviderName," "),d(5),S(e.qrUpiId),d(5),T(" \u20B9",gt(26,5,e.qrAmount,"1.2-2")," "),d(2),g("ngIf",e.selectedUserForQr)}}var fr=class i{constructor(t,e,n,o,r){this.orderService=t;this.bankDetailsService=e;this.authService=n;this.dialog=o;this.toast=r}pageIndex=0;contentPerPage=dt;total=0;searchTerm="";searchControl=new Cn("");date_from=null;date_to=null;selectedFilter="More Than 5 days";showFilter=!1;isDropdownOpen=!1;isLoading=!1;errorMessage="";overdueUsers=[];filteredUsers=[];hasMore=!0;infiniteLoading=!1;showQrDialog=!1;qrData="";qrAmount=0;qrProviderName="";qrUpiId="";selectedUserForQr=null;ngOnInit(){this.searchControl.valueChanges.pipe(Xt(1e3),Qt()).subscribe(t=>{this.searchTerm=t?.trim()||"",this.pageIndex=0,this.loadOverdues()}),this.loadOverdues(),this.authService.providerChange$.subscribe(t=>{t&&(this.pageIndex=0,this.hasMore=!0,this.overdueUsers=[],this.filteredUsers=[],this.loadOverdues())})}loadOverdues(t=!1){if(this.isLoading||this.infiniteLoading||t&&!this.hasMore)return;t?this.infiniteLoading=!0:this.isLoading=!0,this.errorMessage="";let e={skip:this.pageIndex*this.contentPerPage,limit:this.contentPerPage};this.searchTerm.trim()&&(e.search=this.searchTerm.trim()),this.date_from&&this.date_to&&(e.from_date=this.date_from,e.to_date=this.date_to),this.orderService.listWithTotal(e,{cache:{noCache:!0}}).subscribe({next:n=>{this.isLoading=!1,this.infiniteLoading=!1,this.total=n.total;let o=n.data.map(r=>H(U({},r),{isExpanded:!1,overdue_orders:(r.overdue_orders||[]).map(a=>H(U({},a),{selected:!1,isExpanded:!1}))}));t?this.overdueUsers=[...this.overdueUsers,...o]:this.overdueUsers=o,this.filteredUsers=[...this.overdueUsers],this.hasMore=o.length>0},error:n=>{this.isLoading=!1,this.infiniteLoading=!1,this.errorMessage="Failed to load overdue orders. Please try again.",console.error("Error fetching overdues:",n)}})}ngOnDestroy(){}loadNextPage(){!this.isLoading&&!this.infiniteLoading&&this.hasMore&&(this.pageIndex++,this.loadOverdues(!0))}filterData(){this.pageIndex=0,this.loadOverdues()}toggleUser(t){t.isExpanded=!t.isExpanded}toggleOrder(t){t.isExpanded=!t.isExpanded}toggleAllOrders(t,e){t.overdue_orders.forEach(n=>n.selected=e)}toggleDropdown(){this.isDropdownOpen=!this.isDropdownOpen}selectFilter(t){this.selectedFilter=t,this.isDropdownOpen=!1,this.pageIndex=0;let e=new Date;switch(t){case"More Than 5 days":this.date_from=null,this.date_to=null;break;case"Last 7 days":let n=new Date(e);n.setDate(e.getDate()-7),this.date_from=Li(n,"yyyy-MM-dd"),this.date_to=Li(e,"yyyy-MM-dd");break;case"This Month":let o=new Date(e.getFullYear(),e.getMonth(),1),r=new Date(e.getFullYear(),e.getMonth()+1,0);this.date_from=Li(o,"yyyy-MM-dd"),this.date_to=Li(r,"yyyy-MM-dd");break;default:this.date_from=null,this.date_to=null}this.loadOverdues()}toggleFilter(){this.showFilter=!this.showFilter}trackByUser(t,e){return e.user_id}trackByOrder(t,e){return e.order_id}showProviderQR(t){this.selectedUserForQr=t;let e=t.overdue_orders.filter(o=>o.selected);e.length>0?this.qrAmount=e.reduce((o,r)=>o+r.total_amount,0):this.qrAmount=t.total_overdue_amount;let n=this.authService.getSelectedProviderId();if(!n){this.toast.error("Error","Provider ID not found");return}this.bankDetailsService.getBankDetails(n).subscribe({next:o=>{let r=o.data||o,a=r.primary_upi||r.secondary_upi;if(!a){this.toast.error("Error","Provider UPI ID not found in bank details");return}let l=JSON.parse(sessionStorage.getItem("selectedProvider")||"{}").name||JSON.parse(sessionStorage.getItem("provider")||"{}").name||"Provider";this.qrUpiId=a,this.qrProviderName=l;let m=`Payment for ${t.username||"Customer"}`;this.qrData=`upi://pay?pa=${a}&pn=${encodeURIComponent(l)}&am=${this.qrAmount}&cu=INR&tn=${encodeURIComponent(m)}`,this.showQrDialog=!0},error:o=>{console.error("Error fetching bank details:",o),this.toast.error("Error","Failed to load provider bank details")}})}closeQrDialog(){this.showQrDialog=!1,this.qrData="",this.qrAmount=0,this.qrProviderName="",this.qrUpiId="",this.selectedUserForQr=null}clearSelectedOrders(t){let e=t.overdue_orders.filter(a=>a.selected);if(e.length===0){this.toast.info("Info","Please select at least one order to mark as paid");return}let n=e.reduce((a,l)=>a+l.total_amount,0),o=e.length;this.dialog.open(uc,{width:"400px",data:{title:"Mark Orders as Paid",message:`Are you sure you want to mark ${o} order(s) with total amount \u20B9${n.toFixed(2)} as paid?`,confirmText:"Mark as Paid",confirmButtonColor:"primary"}}).afterClosed().subscribe(a=>{a&&this.markOrdersAsPaid(e,t)})}markOrdersAsPaid(t,e){let n=0,o=0,r=t.length;t.forEach(a=>{let l=H(U({},a),{amount:a.total_amount,payment_status:"paid",status:"completed"});this.orderService.updateOrder(a.order_id,l).subscribe({next:()=>{n++,a.payment_status="paid",a.status="completed",n+o===r&&(o===0?this.toast.success("Success",`Successfully marked ${n} order(s) as paid`):this.toast.warn("Partial Success",`Marked ${n} order(s) as paid. ${o} failed.`),this.loadOverdues())},error:m=>{console.error(`Error updating order ${a.order_id}:`,m),o++,n+o===r&&(n>0?this.toast.warn("Partial Success",`Marked ${n} order(s) as paid. ${o} failed.`):this.toast.error("Error","Failed to mark orders as paid"),this.loadOverdues())}})})}static \u0275fac=function(e){return new(e||i)(w(Vt),w(fc),w(G),w(At),w(te))};static \u0275cmp=R({type:i,selectors:[["order-dues"]],decls:17,vars:7,consts:[["noItems",""],[1,"container","px-2","pt-4","pb-24","max-w-md","mx-auto","font-sans"],[1,"flex","items-center","gap-2","mb-4"],[1,"relative","flex-1"],["type","text","placeholder","Search",1,"w-full","border","border-purple-300","rounded-full","px-4","py-2","pr-10","text-sm","focus:outline-none","focus:ring-2","focus:ring-purple-500",3,"formControl"],[1,"absolute","right-3","top-2.5","text-gray-500"],[1,"pi","pi-search"],[1,"cursor-pointer","text-purple-700",3,"click"],["class","mb-2",4,"ngIf"],[1,"mb-4","flex","justify-end"],[1,"bg-purple-700","text-white","px-4","py-2","rounded-full","text-sm","hover:bg-purple-800","transition-all"],["class","space-y-4",4,"ngIf"],[4,"ngIf"],["class","flex justify-center items-center py-4 space-x-2",4,"ngIf"],["class","flex justify-center pb-6 mt-4",4,"ngIf"],["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",3,"click",4,"ngIf"],[1,"mb-2"],[1,"relative"],[1,"w-full","text-left","border","border-purple-400","px-4","py-2","rounded-full","text-sm","flex","justify-between","items-center",3,"click"],[1,"pi","pi-chevron-down","ml-2","transition-transform","duration-200",3,"ngClass"],["class","absolute mt-1 w-full bg-white border border-purple-200 rounded shadow-sm z-10",4,"ngIf"],[1,"absolute","mt-1","w-full","bg-white","border","border-purple-200","rounded","shadow-sm","z-10"],[1,"px-4","py-2","hover:bg-purple-50","cursor-pointer",3,"click"],[1,"space-y-4"],["class","border border-purple-200 rounded-xl overflow-hidden bg-white animate-pulse",4,"ngFor","ngForOf"],[1,"border","border-purple-200","rounded-xl","overflow-hidden","bg-white","animate-pulse"],[1,"px-4","py-3","bg-purple-50","border-b","border-purple-100"],[1,"h-4","w-1/3","bg-purple-200","rounded","mb-2"],[1,"h-3","w-1/4","bg-purple-200","rounded"],[1,"px-4","py-2","flex","gap-2"],[1,"h-6","w-24","bg-purple-100","rounded-full"],[1,"h-6","w-16","bg-green-100","rounded-full"],[1,"h-6","w-16","bg-yellow-100","rounded-full"],[1,"px-4","pb-4","space-y-3"],["class","border border-purple-100 rounded-lg p-3",4,"ngFor","ngForOf"],[1,"border","border-purple-100","rounded-lg","p-3"],[1,"flex","justify-between","mb-2"],[1,"h-3","w-1/2","bg-purple-100","rounded"],[1,"h-3","w-10","bg-purple-100","rounded"],[1,"space-y-1"],[1,"h-2","w-full","bg-gray-100","rounded"],[1,"h-2","w-3/4","bg-gray-100","rounded"],[1,"h-2","w-2/3","bg-gray-100","rounded"],["class","mb-4 border rounded-xl shadow bg-white border border-purple-900 overflow-hidden",4,"ngFor","ngForOf"],["class","text-center text-gray-500 py-8",4,"ngIf"],[1,"mb-4","border","rounded-xl","shadow","bg-white","border","border-purple-900","overflow-hidden"],[1,"flex","items-center","justify-between","px-4","py-3","bg-purple-50","border-b","border-purple-100","cursor-pointer","rounded-t-xl",3,"click"],[1,"text-sm","font-semibold","text-purple-900"],[1,"flex","items-center","gap-2"],[1,"text-orange-600","font-bold","text-sm"],[1,"text-gray-600"],[1,"px-4","py-2","flex","items-center","justify-between","bg-white"],[1,"flex","gap-2","items-center"],[1,"flex","items-center","gap-1","border","px-2","py-1","text-xs","rounded-full","border-purple-900","bg-purple-50","hover:bg-purple-100","transition",3,"click"],[1,"text-sm","text-purple-900"],[1,"text-purple-900","font-medium"],[1,"bg-green-700","text-white","text-xs","px-3","py-1.5","rounded-full","font-medium","hover:bg-green-800","transition",3,"click"],[1,"bg-yellow-400","text-white","text-xs","px-3","py-1.5","rounded-full","font-medium","cursor-pointer","hover:bg-yellow-500","transition"],["class","bg-gray-50 px-4 py-2 space-y-2",4,"ngIf"],[1,"bg-gray-50","px-4","py-2","space-y-2"],["class","border border-purple-200 rounded-lg bg-white shadow-sm",4,"ngFor","ngForOf"],[1,"border","border-purple-200","rounded-lg","bg-white","shadow-sm"],[1,"flex","justify-between","items-center","px-3","py-2","cursor-pointer",3,"click"],[1,"flex","items-center","gap-2","text-sm","font-medium"],["type","checkbox",1,"accent-purple-600",3,"ngModelChange","click","ngModel"],[1,"text-orange-700","font-semibold","text-sm"],[1,"cursor-pointer",3,"click"],["class","px-4 pb-3 pt-1 text-sm text-gray-700 bg-purple-50 border-t border-purple-100",4,"ngIf"],[1,"px-4","pb-3","pt-1","text-sm","text-gray-700","bg-purple-50","border-t","border-purple-100"],[1,"font-semibold","text-center","text-purple-900","mb-2"],[4,"ngIf","ngIfElse"],[1,"flex","justify-between","font-semibold","border-t","pt-1","mt-1"],["class","flex justify-between",4,"ngFor","ngForOf"],[1,"flex","justify-between"],[1,"text-center","text-gray-500","py-2"],[1,"text-center","text-gray-500","py-8"],[1,"flex","justify-center","items-center","py-4","space-x-2"],[1,"pi","pi-spin","pi-spinner","text-purple-700","text-xl"],[1,"text-purple-700","font-medium"],[1,"flex","justify-center","pb-6","mt-4"],["class","text-sm font-medium text-purple-700 px-6 py-2 rounded-full border border-purple-200 bg-purple-50 hover:bg-purple-100 transition shadow-sm",3,"click",4,"ngIf"],["class","text-xs text-gray-400 py-2",4,"ngIf"],[1,"text-sm","font-medium","text-purple-700","px-6","py-2","rounded-full","border","border-purple-200","bg-purple-50","hover:bg-purple-100","transition","shadow-sm",3,"click"],[1,"text-xs","text-gray-400","py-2"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50",3,"click"],[1,"bg-white","rounded-lg","p-6","max-w-sm","w-full","mx-4","shadow-xl",3,"click"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-lg","font-semibold","text-purple-900"],[1,"text-gray-500","hover:text-gray-700",3,"click"],[1,"text-center"],[1,"mb-4","flex","justify-center"],[3,"qrdata","width","errorCorrectionLevel",4,"ngIf"],[1,"text-sm","text-gray-600"],[1,"text-base","font-semibold","text-purple-900"],[1,"text-sm","font-medium","text-gray-800"],[1,"mb-4"],[1,"text-2xl","font-bold","text-purple-900"],["class","text-xs text-gray-500 mb-4",4,"ngIf"],[1,"w-full","bg-purple-700","text-white","px-4","py-2","rounded-full","hover:bg-purple-800","transition",3,"click"],[3,"qrdata","width","errorCorrectionLevel"],[1,"text-xs","text-gray-500","mb-4"]],template:function(e,n){e&1&&(s(0,"div",1)(1,"div",2)(2,"div",3),h(3,"input",4),s(4,"span",5),h(5,"i",6),c()(),s(6,"mat-icon",7),v("click",function(){return n.toggleFilter()}),p(7,"tune"),c()(),y(8,gf,6,5,"div",8),s(9,"div",9)(10,"button",10),p(11," Remind ALL "),c()(),y(12,_f,2,2,"div",11)(13,wf,3,2,"div",12)(14,Sf,4,0,"div",13)(15,Tf,3,2,"div",14)(16,Df,30,8,"div",15),c()),e&2&&(d(3),g("formControl",n.searchControl),d(5),g("ngIf",n.showFilter),d(4),g("ngIf",n.isLoading),d(),g("ngIf",!n.isLoading),d(),g("ngIf",n.infiniteLoading),d(),g("ngIf",!n.isLoading&&!n.infiniteLoading&&n.overdueUsers.length>0),d(),g("ngIf",n.showQrDialog))},dependencies:[Se,ee,W,ui,Z,ho,Y,_e,qs,_c,_o],styles:[".search-section[_ngcontent-%COMP%]{display:flex;align-items:center}.search-section[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]{padding:8px 10px;font-size:14px;border:1px solid #ccc;border-radius:4px;width:100%}.filter-enabler-container[_ngcontent-%COMP%]{width:100%;text-align:right}.filter-enabler-container[_ngcontent-%COMP%]   .filter-enabler[_ngcontent-%COMP%]{color:#8a2be2}.filter-dropdown[_ngcontent-%COMP%]{position:relative}.filter-dropdown[_ngcontent-%COMP%]   .filter-icon[_ngcontent-%COMP%]{display:flex;align-items:center;padding:8px 12px;background-color:#f4f4f4;border-radius:4px;font-size:14px;cursor:pointer;border:none}.filter-dropdown[_ngcontent-%COMP%]   .filter-icon[_ngcontent-%COMP%]   .filter-text[_ngcontent-%COMP%]{margin-right:8px}.filter-dropdown[_ngcontent-%COMP%]   .filter-icon[_ngcontent-%COMP%]   .arrow-icon[_ngcontent-%COMP%]{font-size:14px;transition:transform .3s ease}.filter-dropdown[_ngcontent-%COMP%]   .filter-icon[_ngcontent-%COMP%]   .arrow-icon.open[_ngcontent-%COMP%]{transform:rotate(180deg)}.filter-dropdown[_ngcontent-%COMP%]   .dropdown-list[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;background-color:#fff;border:1px solid #ccc;border-radius:4px;box-shadow:0 4px 6px #0000001a;width:200px;z-index:10}.filter-dropdown[_ngcontent-%COMP%]   .dropdown-list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:8px;cursor:pointer}.filter-dropdown[_ngcontent-%COMP%]   .dropdown-list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.remind-all-btn-container[_ngcontent-%COMP%]{text-align:right}.remind-all-btn-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{margin-bottom:1rem}.user-list[_ngcontent-%COMP%]   .user-accordion[_ngcontent-%COMP%]{margin-bottom:15px;background-color:#f9f9f9;border-radius:4px;border:1px solid #5d157c;cursor:pointer}.user-list[_ngcontent-%COMP%]   .user-accordion[_ngcontent-%COMP%]   .user-header-container[_ngcontent-%COMP%]   .user-header[_ngcontent-%COMP%]{padding:10px;display:flex;justify-content:space-between;font-weight:700}.user-list[_ngcontent-%COMP%]   .user-accordion[_ngcontent-%COMP%]   .user-header-container[_ngcontent-%COMP%]   .user-header[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-weight:700}.user-list[_ngcontent-%COMP%]   .user-accordion[_ngcontent-%COMP%]   .user-header-container[_ngcontent-%COMP%]   .user-header[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:#888}.user-list[_ngcontent-%COMP%]   .user-accordion[_ngcontent-%COMP%]   .user-header-container[_ngcontent-%COMP%]   .user-header-btns[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.user-list[_ngcontent-%COMP%]   .user-accordion[_ngcontent-%COMP%]   .user-header-container[_ngcontent-%COMP%]   .user-header-btns[_ngcontent-%COMP%]   .user-header-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-around;gap:1rem;margin-left:1rem}.user-list[_ngcontent-%COMP%]   .user-accordion[_ngcontent-%COMP%]   .user-header-container[_ngcontent-%COMP%]   .user-header-btns[_ngcontent-%COMP%]   .user-header-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0 .4rem;margin-bottom:.3rem}.user-list[_ngcontent-%COMP%]   .user-accordion[_ngcontent-%COMP%]   .user-header-container[_ngcontent-%COMP%]   .user-header-btns[_ngcontent-%COMP%]   .user-header-controls[_ngcontent-%COMP%]   button.qr[_ngcontent-%COMP%]{border-color:#5d157c;border-width:1px;border-style:solid}.user-list[_ngcontent-%COMP%]   .user-accordion[_ngcontent-%COMP%]   .user-header-container[_ngcontent-%COMP%]   .user-header-btns[_ngcontent-%COMP%]   .user-header-controls[_ngcontent-%COMP%]   button.status[_ngcontent-%COMP%]{background-color:#117b34;color:#fff}.user-list[_ngcontent-%COMP%]   .user-accordion[_ngcontent-%COMP%]   .user-header-container[_ngcontent-%COMP%]   .user-header-btns[_ngcontent-%COMP%]   .user-header-controls[_ngcontent-%COMP%]   button.remind[_ngcontent-%COMP%]{background-color:#f2c263;color:#5d157c}.user-list[_ngcontent-%COMP%]   .user-accordion[_ngcontent-%COMP%]   .order-list[_ngcontent-%COMP%]{padding:10px}.user-list[_ngcontent-%COMP%]   .user-accordion[_ngcontent-%COMP%]   .order-list[_ngcontent-%COMP%]   .order-accordion[_ngcontent-%COMP%]{margin-bottom:10px;background-color:#f4f4f4;padding:10px;border-radius:4px;cursor:pointer}.user-list[_ngcontent-%COMP%]   .user-accordion[_ngcontent-%COMP%]   .order-list[_ngcontent-%COMP%]   .order-accordion[_ngcontent-%COMP%]   .order-header[_ngcontent-%COMP%]{display:flex;align-items:center}.user-list[_ngcontent-%COMP%]   .user-accordion[_ngcontent-%COMP%]   .order-list[_ngcontent-%COMP%]   .order-accordion[_ngcontent-%COMP%]   .order-header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:10px}.user-list[_ngcontent-%COMP%]   .user-accordion[_ngcontent-%COMP%]   .order-list[_ngcontent-%COMP%]   .order-accordion[_ngcontent-%COMP%]   .order-header[_ngcontent-%COMP%]   .order-id[_ngcontent-%COMP%]{font-weight:700}.user-list[_ngcontent-%COMP%]   .user-accordion[_ngcontent-%COMP%]   .order-list[_ngcontent-%COMP%]   .order-accordion[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]{padding-left:20px;margin-top:10px}.user-list[_ngcontent-%COMP%]   .user-accordion[_ngcontent-%COMP%]   .order-list[_ngcontent-%COMP%]   .order-accordion[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .order-detail[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:8px}.user-list[_ngcontent-%COMP%]   .user-accordion[_ngcontent-%COMP%]   .order-list[_ngcontent-%COMP%]   .order-accordion[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{font-weight:700;display:flex;justify-content:space-between}.qr-dialog-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.qr-dialog-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;max-width:400px;width:90%;margin:0 16px;box-shadow:0 10px 25px #0003}.qr-dialog-content[_ngcontent-%COMP%]   .qr-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.qr-dialog-content[_ngcontent-%COMP%]   .qr-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#5d157c;margin:0}.qr-dialog-content[_ngcontent-%COMP%]   .qr-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;color:#666;cursor:pointer;padding:4px;display:flex;align-items:center;transition:color .2s}.qr-dialog-content[_ngcontent-%COMP%]   .qr-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#333}.qr-dialog-content[_ngcontent-%COMP%]   .qr-body[_ngcontent-%COMP%]{text-align:center}.qr-dialog-content[_ngcontent-%COMP%]   .qr-body[_ngcontent-%COMP%]   .qr-code-container[_ngcontent-%COMP%]{margin-bottom:16px;display:flex;justify-content:center}.qr-dialog-content[_ngcontent-%COMP%]   .qr-body[_ngcontent-%COMP%]   .qr-info[_ngcontent-%COMP%]{margin-bottom:12px}.qr-dialog-content[_ngcontent-%COMP%]   .qr-body[_ngcontent-%COMP%]   .qr-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:14px}.qr-dialog-content[_ngcontent-%COMP%]   .qr-body[_ngcontent-%COMP%]   .qr-info[_ngcontent-%COMP%]   p.label[_ngcontent-%COMP%]{color:#666;font-size:12px}.qr-dialog-content[_ngcontent-%COMP%]   .qr-body[_ngcontent-%COMP%]   .qr-info[_ngcontent-%COMP%]   p.value[_ngcontent-%COMP%]{color:#333;font-weight:600;font-size:16px}.qr-dialog-content[_ngcontent-%COMP%]   .qr-body[_ngcontent-%COMP%]   .qr-info[_ngcontent-%COMP%]   p.amount[_ngcontent-%COMP%]{color:#5d157c;font-size:24px;font-weight:700}.qr-dialog-content[_ngcontent-%COMP%]   .qr-body[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]{font-size:12px;color:#666;margin-bottom:16px}.qr-dialog-content[_ngcontent-%COMP%]   .qr-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background-color:#5d157c;color:#fff;padding:12px;border-radius:8px;border:none;font-weight:600;cursor:pointer;transition:background-color .2s}.qr-dialog-content[_ngcontent-%COMP%]   .qr-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#4a1070}"]})};function Vf(i,t){if(i&1&&(s(0,"span",36),p(1),c()),i&2){let e=_();d(),S(e.customerNameError)}}function Rf(i,t){if(i&1&&(s(0,"span",36),p(1),c()),i&2){let e=_();d(),S(e.customerMobileError)}}function Lf(i,t){if(i&1&&(s(0,"span",36),p(1),c()),i&2){let e=_();d(),S(e.amountError)}}function zf(i,t){if(i&1&&(s(0,"option",37),p(1),c()),i&2){let e=t.$implicit;g("value",e.value),d(),T(" ",e.label," ")}}function Nf(i,t){if(i&1&&(s(0,"option",37),p(1),c()),i&2){let e=t.$implicit;g("value",e.value),d(),T(" ",e.label," ")}}function Bf(i,t){if(i&1&&(s(0,"div",40)(1,"div",41),p(2),c(),s(3,"div",42),p(4),c()()),i&2){let e=t.$implicit;d(2),T(" ",e.product_name||"Unknown Product"," "),d(2),T("Qty: ",e.quantity||1,"")}}function jf(i,t){if(i&1&&(s(0,"div",7)(1,"h3",8),p(2,"Products"),c(),s(3,"div",38),y(4,Bf,5,2,"div",39),c()()),i&2){let e=_();d(4),g("ngForOf",e.data.productsInfo)}}function Uf(i,t){if(i&1&&(s(0,"div",7)(1,"h3",8),p(2,"Slot Information"),c(),s(3,"div",43)(4,"p")(5,"strong"),p(6,"Slot:"),c(),p(7),c(),s(8,"p")(9,"strong"),p(10,"Time:"),c(),p(11),c()()()),i&2){let e=_();d(7),T(" ",e.data.slotInfo.slot_name,""),d(4),Qe(" ",e.data.slotInfo.start_time," - ",e.data.slotInfo.end_time," ")}}function Gf(i,t){i&1&&(s(0,"span"),p(1,"Save Changes"),c())}function qf(i,t){i&1&&(s(0,"span"),h(1,"i",46),p(2," Saving... "),c())}function Wf(i,t){if(i&1){let e=E();s(0,"button",44),v("click",function(){b(e);let o=_();return C(o.onSave())}),y(1,Gf,2,0,"span",45)(2,qf,3,0,"span",45),c()}if(i&2){let e=_();g("disabled",e.isLoading||e.editOrderForm.invalid),d(),g("ngIf",!e.isLoading),d(),g("ngIf",e.isLoading)}}var _r=class i{constructor(t,e,n,o,r){this.dialogRef=t;this.data=e;this.fb=n;this.orderService=o;this.messageService=r;this.editOrderForm=this.createForm()}editOrderForm;isLoading=!1;orderStatuses=[{label:"Pending",value:"pending"},{label:"Accepted",value:"accepted"},{label:"Completed",value:"completed"},{label:"Cancelled",value:"cancelled"}];paymentStatuses=[{label:"Paid",value:"paid"},{label:"Unpaid",value:"unpaid"},{label:"Pending",value:"pending"}];ngOnInit(){this.populateForm(),this.data.viewOnly&&this.editOrderForm.disable()}createForm(){return this.fb.group({customerName:["",A.required],customerMobile:["",[A.required,A.pattern(/^[0-9]{10}$/)]],amount:[0,[A.required,A.min(0)]],deliveryDate:["",A.required],status:["",A.required],paymentStatus:[""],orderType:[""]})}populateForm(){this.data&&this.editOrderForm.patchValue({customerName:this.data.customerName||"",customerMobile:this.data.customerMobile||"",amount:this.data.amount||0,deliveryDate:this.formatDateForInput(this.data.deliveryDate),status:this.data.status||"",paymentStatus:this.data.paymentStatus||"unpaid",orderType:this.data.orderType||"token"})}formatDateForInput(t){if(!t)return"";try{return new Date(t).toISOString().split("T")[0]}catch{return""}}onCancel(){this.dialogRef.close(!1)}onSave(){if(this.editOrderForm.valid){this.isLoading=!0;let t=H(U({},this.data.fullOrderData),{customer_name:this.editOrderForm.value.customerName,customer_mobile_number:this.editOrderForm.value.customerMobile,amount:this.editOrderForm.value.amount,delivery_date:this.editOrderForm.value.deliveryDate,status:this.editOrderForm.value.status,payment_status:this.editOrderForm.value.paymentStatus,order_type:this.editOrderForm.value.orderType});this.orderService.updateOrder(this.data.orderId,t).subscribe({next:e=>{console.log("Order updated successfully:",e),this.messageService.add({severity:"success",summary:"Success",detail:"Order updated successfully."}),this.isLoading=!1,this.dialogRef.close(!0)},error:e=>{console.error("Error updating order:",e),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to update order. Please try again."}),this.isLoading=!1}})}else this.messageService.add({severity:"warn",summary:"Validation Error",detail:"Please fill all required fields correctly."}),this.markFormGroupTouched(this.editOrderForm)}markFormGroupTouched(t){Object.keys(t.controls).forEach(e=>{let n=t.get(e);n?.markAsTouched(),n instanceof Us&&this.markFormGroupTouched(n)})}get customerNameError(){let t=this.editOrderForm.get("customerName");return t?.hasError("required")&&t?.touched?"Customer name is required":""}get customerMobileError(){let t=this.editOrderForm.get("customerMobile");return t?.hasError("required")&&t?.touched?"Mobile number is required":t?.hasError("pattern")&&t?.touched?"Please enter a valid 10-digit mobile number":""}get amountError(){let t=this.editOrderForm.get("amount");return t?.hasError("required")&&t?.touched?"Amount is required":t?.hasError("min")&&t?.touched?"Amount must be greater than or equal to 0":""}static \u0275fac=function(e){return new(e||i)(w(mi),w(gi),w(ue),w(Vt),w(kt))};static \u0275cmp=R({type:i,selectors:[["app-edit-order-dialog"]],decls:73,vars:23,consts:[[1,"edit-order-dialog"],[1,"dialog-header"],[1,"dialog-title"],["type","button",1,"close-btn",3,"click"],[1,"pi","pi-times"],[1,"dialog-content"],[1,"edit-order-form",3,"formGroup"],[1,"form-section"],[1,"section-title"],[1,"form-row"],[1,"form-field"],["for","customerName",1,"field-label"],[1,"required"],["id","customerName","type","text","formControlName","customerName","placeholder","Enter customer name",1,"field-input"],["class","error-message",4,"ngIf"],["for","customerMobile",1,"field-label"],["id","customerMobile","type","tel","formControlName","customerMobile","placeholder","Enter 10-digit mobile number","maxlength","10",1,"field-input"],["for","orderType",1,"field-label"],["id","orderType","formControlName","orderType",1,"field-select"],["value","token"],["value","appointment"],["for","deliveryDate",1,"field-label"],["id","deliveryDate","type","date","formControlName","deliveryDate",1,"field-input"],["for","amount",1,"field-label"],["id","amount","type","number","formControlName","amount","placeholder","Enter amount","min","0",1,"field-input"],["for","paymentStatus",1,"field-label"],["id","paymentStatus","formControlName","paymentStatus",1,"field-select"],[3,"value",4,"ngFor","ngForOf"],[1,"form-field","full-width"],["for","status",1,"field-label"],["id","status","formControlName","status",1,"field-select"],["value",""],["class","form-section",4,"ngIf"],[1,"dialog-footer"],["type","button",1,"btn","btn-cancel",3,"click","disabled"],["type","button","class","btn btn-save",3,"disabled","click",4,"ngIf"],[1,"error-message"],[3,"value"],[1,"products-list"],["class","product-item",4,"ngFor","ngForOf"],[1,"product-item"],[1,"product-name"],[1,"product-qty"],[1,"info-box"],["type","button",1,"btn","btn-save",3,"click","disabled"],[4,"ngIf"],[1,"pi","pi-spinner","pi-spin"]],template:function(e,n){if(e&1&&(s(0,"div",0)(1,"div",1)(2,"h2",2),p(3),c(),s(4,"button",3),v("click",function(){return n.onCancel()}),h(5,"i",4),c()(),s(6,"div",5)(7,"form",6)(8,"div",7)(9,"h3",8),p(10,"Customer Information"),c(),s(11,"div",9)(12,"div",10)(13,"label",11),p(14," Customer Name "),s(15,"span",12),p(16,"*"),c()(),h(17,"input",13),y(18,Vf,2,1,"span",14),c(),s(19,"div",10)(20,"label",15),p(21," Mobile Number "),s(22,"span",12),p(23,"*"),c()(),h(24,"input",16),y(25,Rf,2,1,"span",14),c()()(),s(26,"div",7)(27,"h3",8),p(28,"Order Details"),c(),s(29,"div",9)(30,"div",10)(31,"label",17),p(32,"Order Type"),c(),s(33,"select",18)(34,"option",19),p(35,"Token"),c(),s(36,"option",20),p(37,"Appointment"),c()()(),s(38,"div",10)(39,"label",21),p(40," Delivery Date "),s(41,"span",12),p(42,"*"),c()(),h(43,"input",22),c()(),s(44,"div",9)(45,"div",10)(46,"label",23),p(47," Amount "),s(48,"span",12),p(49,"*"),c()(),h(50,"input",24),y(51,Lf,2,1,"span",14),c(),s(52,"div",10)(53,"label",25),p(54,"Payment Status"),c(),s(55,"select",26),y(56,zf,2,2,"option",27),c()()(),s(57,"div",9)(58,"div",28)(59,"label",29),p(60," Order Status "),s(61,"span",12),p(62,"*"),c()(),s(63,"select",30)(64,"option",31),p(65,"Select Status"),c(),y(66,Nf,2,2,"option",27),c()()()(),y(67,jf,5,1,"div",32)(68,Uf,12,3,"div",32),c()(),s(69,"div",33)(70,"button",34),v("click",function(){return n.onCancel()}),p(71),c(),y(72,Wf,3,3,"button",35),c()()),e&2){let o,r,a,l,m;d(3),Qe(" ",n.data.viewOnly?"Order Details":"Edit Order"," - #",n.data.displayOrderId," "),d(4),g("formGroup",n.editOrderForm),d(10),j("error",((o=n.editOrderForm.get("customerName"))==null?null:o.invalid)&&((o=n.editOrderForm.get("customerName"))==null?null:o.touched)),d(),g("ngIf",n.customerNameError),d(6),j("error",((r=n.editOrderForm.get("customerMobile"))==null?null:r.invalid)&&((r=n.editOrderForm.get("customerMobile"))==null?null:r.touched)),d(),g("ngIf",n.customerMobileError),d(18),j("error",((a=n.editOrderForm.get("deliveryDate"))==null?null:a.invalid)&&((a=n.editOrderForm.get("deliveryDate"))==null?null:a.touched)),d(7),j("error",((l=n.editOrderForm.get("amount"))==null?null:l.invalid)&&((l=n.editOrderForm.get("amount"))==null?null:l.touched)),d(),g("ngIf",n.amountError),d(5),g("ngForOf",n.paymentStatuses),d(7),j("error",((m=n.editOrderForm.get("status"))==null?null:m.invalid)&&((m=n.editOrderForm.get("status"))==null?null:m.touched)),d(3),g("ngForOf",n.orderStatuses),d(),g("ngIf",n.data.productsInfo&&n.data.productsInfo.length>0),d(),g("ngIf",n.data.slotInfo),d(2),g("disabled",n.isLoading),d(),T(" ",n.data.viewOnly?"Close":"Cancel"," "),d(),g("ngIf",!n.data.viewOnly)}},dependencies:[ee,W,ye,tn,nn,Z,ct,en,Y,fe,bo,xn,Me,Oe],styles:[".edit-order-dialog[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:40rem;max-height:90vh;background:#fff;border-radius:.5rem;overflow:hidden}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.25rem 1.5rem;border-bottom:1px solid #e0e0e0;background:#f5f5f5}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .dialog-title[_ngcontent-%COMP%]{margin:0;font-size:1.125rem;font-weight:600;color:#333}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;font-size:1.25rem;color:#666;padding:.25rem .5rem;border-radius:.25rem;transition:all .2s}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#e0e0e0;color:#333}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:1.5rem}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .edit-order-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .edit-order-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#333;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:2px solid #7c3aed}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .edit-order-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .edit-order-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{flex:1}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .edit-order-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-field.full-width[_ngcontent-%COMP%]{flex:1 1 100%}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .edit-order-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:#555;margin-bottom:.375rem}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .edit-order-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#ef4444}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .edit-order-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .field-input[_ngcontent-%COMP%], .edit-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .edit-order-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .field-select[_ngcontent-%COMP%]{width:100%;padding:.625rem .75rem;border:1px solid #d1d5db;border-radius:.375rem;font-size:.875rem;color:#333;transition:all .2s}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .edit-order-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .field-input[_ngcontent-%COMP%]:focus, .edit-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .edit-order-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .field-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#7c3aed;box-shadow:0 0 0 .1875rem #7c3aed1a}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .edit-order-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .field-input.error[_ngcontent-%COMP%], .edit-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .edit-order-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .field-select.error[_ngcontent-%COMP%]{border-color:#ef4444}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .edit-order-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .field-input.error[_ngcontent-%COMP%]:focus, .edit-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .edit-order-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .field-select.error[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .1875rem #ef44441a}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .edit-order-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .field-input[_ngcontent-%COMP%]::placeholder, .edit-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .edit-order-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .field-select[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .edit-order-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:block;margin-top:.25rem;font-size:.75rem;color:#ef4444}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .edit-order-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .edit-order-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.75rem;background:#f9fafb;border:1px solid #e5e7eb;border-radius:.375rem}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .edit-order-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-weight:500;color:#333}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .edit-order-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-qty[_ngcontent-%COMP%]{color:#666;font-size:.875rem}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .edit-order-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]{padding:.75rem;background:#f0f9ff;border:1px solid #bfdbfe;border-radius:.375rem}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .edit-order-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.375rem 0;font-size:.875rem;color:#1e40af}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .edit-order-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem;padding:1rem 1.5rem;border-top:1px solid #e0e0e0;background:#f9fafb}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.625rem 1.25rem;border:none;border-radius:.375rem;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   .btn.btn-cancel[_ngcontent-%COMP%]{background:#f3f4f6;color:#4b5563}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   .btn.btn-cancel[_ngcontent-%COMP%]:hover:not(:disabled){background:#e5e7eb}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]{background:#7c3aed;color:#fff}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]:hover:not(:disabled){background:#6d28d9}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.375rem}@media (max-width: 48rem){.edit-order-dialog[_ngcontent-%COMP%]{max-width:95vw}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]{padding:1rem 1.25rem}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .dialog-title[_ngcontent-%COMP%]{font-size:1rem}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{padding:1rem}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .edit-order-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{flex-direction:column;gap:.75rem}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]{padding:.75rem 1rem}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:.8125rem}}@media (max-width: 30rem){.edit-order-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]{flex-direction:column}.edit-order-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}  .edit-order-dialog-container .mat-dialog-container{padding:0!important;border-radius:.5rem!important;overflow:hidden!important}"]})};var hr=class i{constructor(t){this.http=t}baseUrl="slot-availability";getSlotAvailability(t){let e=new Dt().set("slot_date",t.slot_date).set("slot_type",t.slot_type).set("provider_id",t.provider_id.toString());return t.product_id&&(e=e.set("product_id",t.product_id.toString())),this.http.get(this.baseUrl,{params:e})}getProviderSlotAvailability(t,e,n="provider",o){return this.getSlotAvailability(U({slot_date:e,slot_type:n,provider_id:t},o&&{product_id:o}))}static \u0275fac=function(e){return new(e||i)(Ae(di))};static \u0275prov=Je({token:i,factory:i.\u0275fac,providedIn:"root"})};var Yf=()=>({width:"400px"}),Kf=()=>[1,2,3,4,5,6],Xf=()=>[10,20,50],dp=()=>({width:"100%"});function Qf(i,t){if(i&1){let e=E();s(0,"div",8)(1,"label",9),p(2,"Service"),c(),s(3,"p-dropdown",30),v("ngModelChange",function(o){b(e);let r=_();return C(r.onSubscriptionProductChange(o))}),c()()}if(i&2){let e=_();d(3),g("options",e.subscriptionProducts)("ngModel",e.selectedSubscriptionProduct)("showClear",!0)}}function Jf(i,t){i&1&&(s(0,"div",33),h(1,"div",34)(2,"div",35),c())}function Zf(i,t){i&1&&(s(0,"div",31),y(1,Jf,3,0,"div",32),c()),i&2&&(d(),g("ngForOf",se(1,Kf)))}function e_(i,t){if(i&1){let e=E();s(0,"div",36)(1,"div",37),h(2,"i",38),c(),s(3,"p",39),p(4),c(),s(5,"button",40),v("click",function(){b(e);let o=_();return C(o.loadSlotAvailability())}),h(6,"i",41),p(7," Retry "),c()()}if(i&2){let e=_();d(4),S(e.errorMessage)}}function t_(i,t){if(i&1){let e=E();s(0,"div",44),v("click",function(){let o=b(e).$implicit,r=_(2);return C(r.onSelectTimeSlot(o))}),s(1,"div",45),p(2),c(),s(3,"div",46),p(4),c()()}if(i&2){let e=t.$implicit,n=_(2);j("available",e.is_available)("unavailable",!e.is_available)("selected",(n.selectedTimeSlot==null?null:n.selectedTimeSlot.slot_id)==e.slot_id),d(2),S(e.label),d(2),Qe("",e.load,"/",e.total,"")}}function n_(i,t){if(i&1&&(s(0,"div",42),y(1,t_,5,9,"div",43),c()),i&2){let e=_();d(),g("ngForOf",e.timeSlots)("ngForTrackBy",e.trackBySlotId)}}function i_(i,t){i&1&&(s(0,"div",47)(1,"div",48),h(2,"i",49),c(),s(3,"p",50),p(4,"Please select a service"),c()())}function o_(i,t){i&1&&(s(0,"div",47)(1,"div",48),h(2,"i",51),c(),s(3,"p",50),p(4,"No slots available"),c()())}function r_(i,t){i&1&&(s(0,"div",52)(1,"div",53),h(2,"i",54),c(),s(3,"p"),p(4,"Loading orders..."),c()())}function a_(i,t){i&1&&(s(0,"div",55),h(1,"i",56),s(2,"span"),p(3,"Please select availability to assign slots."),c()())}function s_(i,t){i&1&&(s(0,"span",67),h(1,"i",54),c())}function c_(i,t){if(i&1){let e=E();s(0,"tr")(1,"td",60)(2,"div",61),v("click",function(){let o=b(e).$implicit,r=_(2);return C(r.viewOrderDetails(o))}),p(3),c(),s(4,"div",62),p(5),c()(),s(6,"td",63)(7,"div",64)(8,"p-dropdown",65),N("ngModelChange",function(o){let r=b(e).$implicit;return z(r.slot_assignment,o)||(r.slot_assignment=o),C(o)}),v("onChange",function(o){let r=b(e).$implicit,a=_(2);return C(a.onSlotAssignmentChange(r,o.value))}),c(),y(9,s_,2,0,"span",66),c()()()}if(i&2){let e=t.$implicit,n=_(2);d(3),T(" ",e.customer_name||"Unknown Customer"," "),d(),g("title",e.display_order_id),d(),T(" ",e.display_order_id," "),d(3),g("options",n.getOrderSlotOptions(e)),L("ngModel",e.slot_assignment),g("disabled",n.processingOrders.has(e.id)||n.timeSlots.length===0)("appendTo","body")("filter",!1)("showClear",!1),d(),g("ngIf",n.processingOrders.has(e.id))}}function d_(i,t){if(i&1&&(s(0,"div",57)(1,"table",58)(2,"thead")(3,"tr")(4,"th"),p(5,"Customer"),c(),s(6,"th"),p(7,"Slot"),c()()(),s(8,"tbody"),y(9,c_,10,10,"tr",59),c()()()),i&2){let e=_();d(9),g("ngForOf",e.orders)}}function l_(i,t){if(i&1){let e=E();s(0,"p-paginator",68),v("onPageChange",function(o){b(e);let r=_();return C(r.onPageChange(o))}),c()}if(i&2){let e=_();g("rows",e.limit)("totalRecords",e.totalRecords)("rowsPerPageOptions",se(3,Xf))}}function p_(i,t){i&1&&(s(0,"div",69),h(1,"i",70),p(2," There are no orders for the selected date. "),c())}function m_(i,t){i&1&&(s(0,"div",55),h(1,"i",56),s(2,"span"),p(3,"Please select a service to view its orders."),c()())}function g_(i,t){i&1&&(s(0,"div",71)(1,"span",72),p(2,"Order Details"),c()())}function u_(i,t){if(i&1&&(s(0,"div",87)(1,"span",88),p(2),c(),s(3,"span",89),p(4),c()()),i&2){let e=t.$implicit;d(2),S(e.product_name),d(2),S(e.quantity)}}function f_(i,t){if(i&1&&(s(0,"div",84)(1,"div",85),p(2,"Products"),c(),y(3,u_,5,2,"div",86),c()),i&2){let e=_(2);d(3),g("ngForOf",e.selectedOrderForView.products_info)}}function __(i,t){if(i&1&&(s(0,"div",76)(1,"div",74)(2,"label"),p(3,"Status"),c(),s(4,"div",90),p(5),M(6,"titlecase"),c()(),s(7,"div",74)(8,"label"),p(9,"Payment"),c(),s(10,"div",90),p(11),M(12,"titlecase"),c()()()),i&2){let e=_(2);d(4),g("ngClass",e.selectedOrderForView.status),d(),T(" ",O(6,4,e.selectedOrderForView.status)," "),d(5),g("ngClass",e.selectedOrderForView.payment_status),d(),T(" ",O(12,6,e.selectedOrderForView.payment_status||"Unpaid")," ")}}function h_(i,t){if(i&1){let e=E();s(0,"div",91)(1,"div",74)(2,"label"),p(3,"Status"),c(),s(4,"p-dropdown",92),N("ngModelChange",function(o){b(e);let r=_(2);return z(r.selectedOrderForView.status,o)||(r.selectedOrderForView.status=o),C(o)}),c()(),s(5,"div",74)(6,"label"),p(7,"Payment Status"),c(),s(8,"p-dropdown",93),N("ngModelChange",function(o){b(e);let r=_(2);return z(r.selectedOrderForView.payment_status,o)||(r.selectedOrderForView.payment_status=o),C(o)}),c()()()}if(i&2){let e=_(2);d(4),st(se(10,dp)),g("options",e.orderStatuses),L("ngModel",e.selectedOrderForView.status),g("appendTo","body"),d(4),st(se(11,dp)),g("options",e.paymentStatuses),L("ngModel",e.selectedOrderForView.payment_status),g("appendTo","body")}}function b_(i,t){if(i&1&&(s(0,"div",73)(1,"div",74)(2,"label"),p(3,"Customer"),c(),s(4,"div",75),p(5),c()(),s(6,"div",76)(7,"div",74)(8,"label"),p(9,"Order ID"),c(),s(10,"div",77),p(11),c()(),s(12,"div",78)(13,"label"),p(14,"Amount"),c(),s(15,"div",79),p(16),M(17,"currency"),c()()(),y(18,f_,4,1,"div",80),s(19,"div",74)(20,"label"),p(21,"Delivery Address"),c(),s(22,"div",81),p(23),c()(),y(24,__,13,8,"div",82)(25,h_,9,12,"div",83),c()),i&2){let e=_();d(5),T(" ",e.selectedOrderForView.customer_name||"Unknown"," "),d(6),T(" ",e.selectedOrderForView.display_order_id," "),d(5),T(" ",gt(17,10,e.selectedOrderForView.amount,"INR")," "),d(2),g("ngIf",e.selectedOrderForView.products_info==null?null:e.selectedOrderForView.products_info.length),d(5),As(" ",e.selectedOrderForView.address==null?null:e.selectedOrderForView.address.apartment_number,", ",e.selectedOrderForView.address==null?null:e.selectedOrderForView.address.street_name,", ",e.selectedOrderForView.address==null?null:e.selectedOrderForView.address.city," - ",e.selectedOrderForView.address==null?null:e.selectedOrderForView.address.pincode," "),d(),g("ngIf",!e.isOrderDetailsEditMode),d(),g("ngIf",e.isOrderDetailsEditMode)}}function C_(i,t){if(i&1){let e=E();s(0,"button",97),v("click",function(){b(e);let o=_(2);return C(o.isOrderDetailsEditMode=!0)}),c()}}function v_(i,t){if(i&1){let e=E();s(0,"button",98),v("click",function(){b(e);let o=_(2);return C(o.isOrderDetailsEditMode=!1)}),c()}}function x_(i,t){if(i&1){let e=E();s(0,"button",99),v("click",function(){b(e);let o=_(2);return C(o.updateOrderDetails())}),c()}if(i&2){let e=_(2);g("loading",e.isUpdatingOrder)}}function P_(i,t){if(i&1&&y(0,C_,1,0,"button",94)(1,v_,1,0,"button",95)(2,x_,1,1,"button",96),i&2){let e=_();g("ngIf",!e.isOrderDetailsEditMode),d(),g("ngIf",e.isOrderDetailsEditMode),d(),g("ngIf",e.isOrderDetailsEditMode)}}var br=class i{constructor(t,e,n,o,r,a,l,m,u){this.confirmationService=t;this.messageService=e;this.dialog=n;this.router=o;this.slotAvailabilityService=r;this.authService=a;this.productService=l;this.subscriptionProductsService=m;this.orderService=u}rowToBeEdited;isLoadingSlots=!1;errorMessage="";slotAvailabilityData={date:"",slot_type:"",provider_id:0,slots:[]};selectedDate=new Date().toISOString().split("T")[0];selectedSlotType="provider";selectedProviderId=0;selectedProductId;products=[];selectedProduct;subscriptionProducts=[];selectedSubscriptionProduct;selectedTimeSlot=null;orders=[];isLoadingOrders=!1;processingOrders=new Set;skip=0;limit=10;totalRecords=0;isLoadingMore=!1;slotTypeOptions=[{label:"Provider",value:"provider"},{label:"Service",value:"service"}];visible=!1;confirmAmountDialog=!1;editDialogData=null;datesList=[];slotOptions=[];destroy$=new Yt;services;selectedService;assign;orderType;assignees=[];orderTypes=[];timeSlots=[];columns=[{displayName:"Name",displayValue:"name"},{displayName:"Assign",displayValue:"assign"},{displayName:"Act",displayValue:"quickAction"}];gridData=[];get ordersGridData(){return this.orders.map((t,e)=>({action:"",flag:"",assign:t.slot_id?"6:30pm-7:30pm":"Unassigned",quickAction:"",order:t.display_order_id,name:t.customer_name||"Unknown Customer",subName:t.order_type==="appointment"?"Appointment":"Token",isActionEnabled:!1,originalOrder:t}))}ngOnInit(){this.initializeComponent(),this.setLoggedInProviderId(),this.selectedSlotType==="service"?this.loadSubscriptionProducts():this.loadSlotAvailability(),this.loadOrders(),this.authService.providerChange$.subscribe(t=>{t&&(this.setLoggedInProviderId(),this.skip=0,this.orders=[],this.selectedSlotType==="service"?(this.selectedProductId=void 0,this.selectedProduct=void 0,this.selectedSubscriptionProduct=void 0,this.selectedTimeSlot=null,this.loadSubscriptionProducts()):this.loadSlotAvailability(),this.loadOrders())})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initializeComponent(){this.services=[{name:"New York",code:"NY"},{name:"Rome",code:"RM"},{name:"London",code:"LDN"},{name:"Istanbul",code:"IST"},{name:"Paris",code:"PRS"}],this.orderTypes=this.services,this.assignees=this.services,this.gridData=[]}setLoggedInProviderId(){this.selectedProviderId=this.authService.getSelectedProviderId()}loadProducts(){this.productService.list().subscribe({next:t=>{this.products=t.data||t||[]},error:t=>{console.error("Error loading products:",t),this.products=[]}})}loadSubscriptionProducts(){this.selectedProviderId&&this.subscriptionProductsService.getSubscriptionProducts(this.selectedProviderId,void 0,0,100,"service",void 0).pipe(Pt(this.destroy$)).subscribe({next:t=>{this.subscriptionProducts=t.data?.products?.filter(e=>e.is_service===!0)||[],console.log("Filtered subscription products (is_service: true):",this.subscriptionProducts),this.selectedSubscriptionProduct=void 0,this.selectedProductId=void 0,this.timeSlots=[],console.log("Service products loaded, waiting for user selection")},error:t=>{console.error("Error loading subscription products:",t),this.subscriptionProducts=[]}})}loadOrders(){if(this.selectedProviderId){if(this.selectedSlotType==="service"&&!this.selectedSubscriptionProduct){this.orders=[],this.totalRecords=0,this.isLoadingOrders=!1;return}this.isLoadingOrders=!0,this.orders=[];let t=this.selectedDate,e=this.selectedDate,n=this.selectedTimeSlot?.slot_id;console.log("Loading orders:",{deliveryFrom:t,deliveryTo:e,slotId:n,skip:this.skip,limit:this.limit}),this.orderService.getOrdersByProvider(this.selectedProviderId,void 0,t,e,void 0,void 0,this.skip,this.limit,"delivery",n).pipe(Pt(this.destroy$)).subscribe({next:o=>{let r=(o.orders||[]).map(a=>H(U({},a),{isActionEnabled:!1,slot_assignment:this.getInitialSlotAssignment(a)}));this.orders=r,this.totalRecords=o.total||0,this.isLoadingOrders=!1,console.log("Orders loaded:",this.orders.length,"Total:",this.totalRecords),this.updateAllOrderSlotAssignments()},error:o=>{console.error("Error loading orders:",o),this.orders=[],this.totalRecords=0,this.isLoadingOrders=!1}})}}onPageChange(t){this.skip=t.first,this.limit=t.rows,this.loadOrders()}filterOrders(){this.skip=0,this.loadOrders()}onSelectTimeSlot(t){console.log("Toggling slot selection:",{current:this.selectedTimeSlot,new:t}),this.selectedTimeSlot?.slot_id==t.slot_id?(console.log("Deselecting slot:",t.slot_id),this.selectedTimeSlot=null):(console.log("Selecting slot:",t.slot_id),this.selectedTimeSlot=t),this.loadOrders()}trackBySlotId(t,e){return e.slot_id}loadSlotAvailability(){if(this.selectedSlotType==="service"&&!this.selectedSubscriptionProduct){this.timeSlots=[],this.isLoadingSlots=!1;return}this.isLoadingSlots=!0,this.errorMessage="";let t=U({slot_date:this.selectedDate,slot_type:this.selectedSlotType,provider_id:this.selectedProviderId},this.selectedProductId&&{product_id:this.selectedProductId});this.slotAvailabilityService.getSlotAvailability(t).pipe(Pt(this.destroy$)).subscribe({next:e=>{this.slotAvailabilityData=e,this.updateTimeSlotsDisplay(),this.isLoadingSlots=!1},error:e=>{console.error("Error loading slot availability:",e),this.errorMessage="Failed to load slot availability. Please try again.",this.isLoadingSlots=!1}})}updateTimeSlotsDisplay(){console.log("Data-->",this.slotAvailabilityData);let t=this.slotAvailabilityData?.slots||this.slotAvailabilityData||[];t&&t.length>0?this.timeSlots=t.map(e=>({label:e.slot_name||`${e.start_time}-${e.end_time}`,load:e.availability||e.slot_limit-e.occupancy,total:e.slot_limit,occupied:e.occupancy,slot_id:e.slot_id,is_available:e.enable&&e.occupancy<e.slot_limit})):this.timeSlots=[],console.log("TIMESLOTS-->",this.timeSlots),this.updateAllOrderSlotAssignments(),this.updateSlotOptions()}updateSlotOptions(){this.slotOptions=this.timeSlots.map(t=>({label:this.getSlotDisplayLabel(t),value:this.getSlotDisplayValue(t),disabled:!t.is_available,slot_id:t.slot_id}))}getOrderSlotOptions(t){let e=[{label:"Unassigned",value:"Unassigned",disabled:!1}];if(t.slot_assignment!=="Unassigned"&&t.slot_id&&!this.isSlotInList(t.slot_id)){let o=this.extractSlotName(t.slot_assignment);e.push({label:o,value:t.slot_assignment||`${t.slot_id}:${o}`,disabled:!1})}let n=this.slotOptions.map(o=>H(U({},o),{disabled:o.disabled&&!this.isSlotSelectedByOption(t,o)}));return[...e,...n]}isSlotSelectedByOption(t,e){if(!t.slot_id)return!1;let n=e.value.split(":")[0];return String(t.slot_id)===String(n)}updateAllOrderSlotAssignments(){this.orders.length>0&&this.timeSlots.length>0&&this.orders.forEach(t=>{if(t.slot_id){let e=this.timeSlots.find(n=>n.slot_id==t.slot_id);e&&(t.slot_assignment=this.getSlotDisplayValue(e))}})}onFilterChange(){this.loadSlotAvailability()}onDateChange(t){this.selectedDate=t,this.loadSlotAvailability(),this.loadOrders()}prevDate(){let t=new Date(this.selectedDate);t.setDate(t.getDate()-1),this.selectedDate=t.toISOString().split("T")[0],this.loadSlotAvailability(),this.loadOrders()}nextDate(){let t=new Date(this.selectedDate);t.setDate(t.getDate()+1),this.selectedDate=t.toISOString().split("T")[0],this.loadSlotAvailability(),this.loadOrders()}selectDate(t){this.selectedDate=t.fullDate,this.loadSlotAvailability(),this.loadOrders()}onSlotTypeChange(t){this.selectedSlotType=t,t==="provider"?(this.selectedProductId=void 0,this.selectedProduct=void 0,this.selectedSubscriptionProduct=void 0,this.selectedTimeSlot=null,this.loadSlotAvailability(),this.filterOrders()):t==="service"&&(this.timeSlots=[],this.selectedTimeSlot=null,this.loadSubscriptionProducts(),this.filterOrders())}onProviderChange(t){this.selectedProviderId=t,this.onFilterChange()}onProductChange(t){this.selectedProduct=t,this.selectedProductId=t.product_id,this.selectedTimeSlot=null,this.loadSlotAvailability(),this.filterOrders()}onSubscriptionProductChange(t){t?(this.timeSlots=[],this.selectedSubscriptionProduct=t,this.selectedProductId=t.product_id,this.selectedTimeSlot=null,console.log("Subscription product changed to:",t),this.loadSlotAvailability(),this.filterOrders()):(this.selectedSubscriptionProduct=void 0,this.selectedProductId=void 0,this.selectedTimeSlot=null,this.timeSlots=[],console.log("Subscription product cleared"),this.filterOrders())}formatTimeSlot(t){if(!t||!t.includes("-"))return t;let[e,n]=t.split("-"),o=r=>{let[a,l]=r.split(":"),m=parseInt(a),u=parseInt(l);return m===0?`12:${u.toString().padStart(2,"0")}am`:m<12?`${m}:${u.toString().padStart(2,"0")}am`:m===12?`12:${u.toString().padStart(2,"0")}pm`:`${m-12}:${u.toString().padStart(2,"0")}pm`};return`${o(e)}-${o(n)}`}editRow(t){}rowClicked(t){t.isActionEnabled=!t.isActionEnabled,console.log("Row clicked for order:",t.id,"isActionEnabled:",t.isActionEnabled),setTimeout(()=>{console.log("After timeout - isActionEnabled:",t.isActionEnabled)},100)}acceptOrder(t){this.processingOrders.has(t.id)||this.confirmationService.confirm({message:"Accept",header:"",icon:"",acceptIcon:"none",rejectIcon:"none",acceptLabel:"Confirm",rejectLabel:"Cancel",accept:()=>{this.processingOrders.add(t.id),this.orderService.updateOrderStatus(t.id,"accepted").subscribe({next:e=>{console.log("Order accepted successfully:",e),this.messageService.add({severity:"success",summary:"Success",detail:"Order accepted successfully."}),this.loadOrders(),this.processingOrders.delete(t.id)},error:e=>{console.error("Error accepting order:",e),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to accept order. Please try again."}),this.processingOrders.delete(t.id)}})},reject:()=>{}})}rejectOrder(t){this.processingOrders.has(t.id)||this.confirmationService.confirm({message:"Reject",header:"",icon:"",acceptIcon:"none",rejectIcon:"none",acceptLabel:"Confirm",rejectLabel:"Cancel",accept:()=>{this.processingOrders.add(t.id),this.orderService.updateOrderStatus(t.id,"cancelled").subscribe({next:e=>{console.log("Order rejected successfully:",e),this.messageService.add({severity:"success",summary:"Success",detail:"Order rejected successfully."}),this.loadOrders(),this.processingOrders.delete(t.id)},error:e=>{console.error("Error rejecting order:",e),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to reject order. Please try again."}),this.processingOrders.delete(t.id)}})},reject:()=>{}})}viewOrderDetailsVisible=!1;selectedOrderForView=null;isOrderDetailsEditMode=!1;viewOrderDetails(t){console.log("View details clicked for order:",t),this.selectedOrderForView=JSON.parse(JSON.stringify(t)),this.isOrderDetailsEditMode=!1,this.viewOrderDetailsVisible=!0}deleteDialog(t){this.confirmationService.confirm({message:"Remove",header:"",icon:"",acceptIcon:"none",rejectIcon:"none",acceptLabel:"Confirm",rejectLabel:"Cancel",accept:()=>{this.messageService.add({severity:"info",summary:"Confirmed",detail:"Record deleted"})},reject:()=>{}})}showEditDialog(t){let e={orderId:t.id,displayOrderId:t.display_order_id,customerName:t.customer_name||"",customerMobile:t.customer_mobile_number||"",orderType:t.order_type,amount:t.amount,deliveryDate:t.delivery_date||"",slotId:t.slot_id,status:t.status,paymentStatus:t.payment_status||"unpaid",fullfillmentType:t.fullfillment_type||"",address:t.address||{},productsInfo:t.products_info||[],slotInfo:t.slot_info||null,assignedToInfo:t.assigned_to_info||null,providerInfo:t.provider_info||null,createdAt:t.created_at||"",updatedAt:t.updated_at||"",updatedBy:t.updated_by||null,isEditMode:!0,fullOrderData:t};this.dialog.open(_r,{width:"650px",maxHeight:"90vh",data:e,disableClose:!1,panelClass:"edit-order-dialog-container"}).afterClosed().subscribe(o=>{o===!0&&(this.loadOrders(),this.loadSlotAvailability())})}onDialogClose(t=!1){this.visible=!1,this.editDialogData=null,this.rowToBeEdited=null,t&&this.loadOrders()}completeOrder(t){if(this.processingOrders.has(t.id))return;t.payment_status==="paid"?this.updateOrderStatus(t.id,"completed",t):t?.amount>0?(console.log("Order has amount - showing payment confirmation"),this.openSimplePaymentDialog(t)):(console.log("Order has no amount - showing amount input dialog"),this.openPaymentConfirmationDialog(t))}openSimplePaymentDialog(t){this.dialog.open(qn,{width:"400px",data:{order:t,title:"Payment Confirmation",message:"Amount paid?",showAmountInput:!1,currentAmount:t.amount,showAmount:!0}}).afterClosed().subscribe(n=>{n!==void 0&&(n.confirmed?this.updateOrderWithPayment(t,t.amount,!0,"completed"):this.updateOrderWithPayment(t,t.amount,!1,"completed"))})}openPaymentConfirmationDialog(t){this.dialog.open(qn,{width:"400px",data:{order:t,title:"Payment Confirmation",message:"Amount paid?",showAmountInput:!0,currentAmount:0,showAmount:!1}}).afterClosed().subscribe(n=>{n!==void 0&&(n.confirmed?this.updateOrderWithPayment(t,n.amount,!0,"completed"):this.updateOrderWithPayment(t,n.amount||0,!1,"completed"))})}updateOrderWithPayment(t,e,n,o){let r=H(U({},t),{amount:e,payment_status:n?"paid":"unpaid",status:o});console.log("OrderDetail:-->",t),console.log("UpdateData:-->",r),this.orderService.updateOrder(t.id,r).subscribe({next:a=>{let l=n?"paid":"unpaid";this.messageService.add({severity:"success",summary:"Success",detail:`Order marked as ${l} and completed.`}),this.loadOrders()},error:a=>{console.error("Error updating order:",a),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to update order. Please try again."})}})}updateOrderStatus(t,e,n){this.processingOrders.add(t),this.orderService.updateOrderStatus(t,e).subscribe({next:o=>{this.messageService.add({severity:"success",summary:"Success",detail:`Order ${e} successfully.`}),this.loadOrders(),this.processingOrders.delete(t)},error:o=>{console.error(`Error ${e} order:`,o),this.messageService.add({severity:"error",summary:"Error",detail:`Failed to ${e} order. Please try again.`}),this.processingOrders.delete(t)}})}newOrderDialog(){this.messageService.add({severity:"info",summary:"Info",detail:"New order feature coming soon."})}getInitialSlotAssignment(t){let e=t.slot_info;if(e&&e.slot_id){let o=e.slot_name||`${e.start_time}-${e.end_time}`;return`${e.slot_id}:${o}`}if(!t.slot_id)return"Unassigned";let n=this.timeSlots.find(o=>o.slot_id===t.slot_id);return n?this.getSlotDisplayValue(n):"Unassigned"}isSlotInList(t){return this.timeSlots.some(e=>e.slot_id===t)}getOrderSlotLabel(t){let e=t.slot_info;if(e){let n=e.start_time,o=e.end_time,r=e.slot_name;if(r)return`${e.slot_id}:${r}`;if(n&&o){let a=`${n}-${o}`;return`${e.slot_id}:${a}`}}return""}extractSlotName(t){if(!t)return"";let e=t.split(":");return e.length>1?e[1]:t}getSlotDisplayValue(t){return`${t.slot_id}:${t.label}`}getSlotDisplayLabel(t){return t.label}isSlotSelected(t,e){if(t.slot_id&&t.slot_id===e.slot_id)return!0;let n=t.slot_info;return!!(n&&n.slot_id===e.slot_id)}onSlotAssignmentChange(t,e){if(console.log("Slot assignment changed for order:",t.id,"to:",e),this.processingOrders.add(t.id),e==="Unassigned")t.slot_id=null,t.slot_assignment="Unassigned",this.updateOrderSlotAssignment(t,null);else{let n=parseInt(e.split(":")[0]),o=this.timeSlots.find(r=>r.slot_id===n);if(o){t.slot_id=n,t.slot_assignment=this.getSlotDisplayValue(o);let r=t.slot_info;(!r||r.slot_id!==n)&&(t.slot_info={slot_id:n,slot_name:o.label,start_time:o.label.split("-")[0],end_time:o.label.split("-")[1],slot_limit:o.total||0,status:"Available"}),this.updateOrderSlotAssignment(t,n)}}}updateOrderSlotAssignment(t,e){let n={id:t.id,display_order_id:t.display_order_id,order_type:t.order_type,status:t.status,slot_id:e,slot_info:e?t.slot_info:null};console.log("Updating order slot assignment:",t.id,"with data:",n),this.orderService.updateOrder(t.id,n).subscribe({next:o=>{this.messageService.add({severity:"success",summary:"Success",detail:`Order slot assignment ${e?"updated":"removed"} successfully.`}),this.processingOrders.delete(t.id)},error:o=>{console.error("Error updating order slot assignment:",o),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to update order slot assignment. Please try again."}),this.processingOrders.delete(t.id),this.revertSlotAssignment(t)}})}revertSlotAssignment(t){if(t.slot_assignment=this.getInitialSlotAssignment(t),t.slot_assignment==="Unassigned")t.slot_id=null;else{let e=parseInt(t.slot_assignment.split(":")[0]),n=this.timeSlots.find(o=>o.slot_id===e);n&&(t.slot_id=e,t.slot_info={slot_id:e,slot_name:n.label,start_time:n.label.split("-")[0],end_time:n.label.split("-")[1],slot_limit:n.total||0,status:"Available"})}}isUpdatingOrder=!1;orderStatuses=[{label:"Pending",value:"pending"},{label:"Accepted",value:"accepted"},{label:"Completed",value:"completed"},{label:"Cancelled",value:"cancelled"}];paymentStatuses=[{label:"Paid",value:"paid"},{label:"Unpaid",value:"unpaid"},{label:"Pending",value:"pending"}];updateOrderDetails(){if(!this.selectedOrderForView)return;this.isUpdatingOrder=!0,console.log("Updating order from view modal:",this.selectedOrderForView);let t=this.selectedOrderForView.payment_status||"unpaid";t==="paid"&&this.selectedOrderForView.payment_info&&(this.selectedOrderForView.payment_info.status="paid");let e=H(U({},this.selectedOrderForView),{status:this.selectedOrderForView.status,payment_status:t,payment_info:this.selectedOrderForView.payment_info}),n=this.selectedOrderForView.id;if(!n){console.error("Order ID missing for update"),this.isUpdatingOrder=!1;return}this.orderService.updateOrder(n,e).subscribe({next:o=>{console.log("Order updated successfully:",o),this.messageService.add({severity:"success",summary:"Success",detail:"Order details updated successfully."}),this.isUpdatingOrder=!1,this.viewOrderDetailsVisible=!1,this.loadOrders(),this.loadSlotAvailability()},error:o=>{console.error("Error updating order:",o),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to update order details. Please try again."}),this.isUpdatingOrder=!1}})}static \u0275fac=function(e){return new(e||i)(w(pe),w(kt),w(At),w(le),w(hr),w(G),w(It),w(Po),w(Vt))};static \u0275cmp=R({type:i,selectors:[["order-slots"]],decls:41,vars:26,consts:[[1,"order-slots-container"],[1,"filters-section"],[1,"date-navigation"],[1,"nav-btn",3,"click"],[1,"pi","pi-chevron-left"],[1,"current-date"],[1,"pi","pi-chevron-right"],[1,"filter-row-compact"],[1,"filter-group","compact"],[1,"filter-label"],["optionLabel","label","optionValue","value","placeholder","Select Type","styleClass","compact-dropdown",3,"ngModelChange","onChange","options","ngModel"],["class","filter-group compact",4,"ngIf"],["title","Add New Order",1,"new-order-btn","compact","icon-only",3,"click"],[1,"pi","pi-plus"],[1,"time-slots-grid-container","compact"],[1,"header"],["class","skeleton-grid time-slots-grid",4,"ngIf"],["class","error-state",4,"ngIf"],["class","time-slots-grid",4,"ngIf"],["class","no-slots-message compact",4,"ngIf"],[1,"table-container"],["class","loading-state",4,"ngIf"],["class","warning-message",4,"ngIf"],["class","table-wrapper",4,"ngIf"],[3,"rows","totalRecords","rowsPerPageOptions","onPageChange",4,"ngIf"],["class","no-data-message",4,"ngIf"],["styleClass","order-details-dialog compact-modal",3,"visibleChange","visible","modal","draggable","resizable"],["pTemplate","header"],["class","order-details-content",4,"ngIf"],["pTemplate","footer"],["optionLabel","product_name","placeholder","Select Service","styleClass","compact-dropdown",3,"ngModelChange","options","ngModel","showClear"],[1,"skeleton-grid","time-slots-grid"],["class","skeleton-card",4,"ngFor","ngForOf"],[1,"skeleton-card"],[1,"skeleton-time"],[1,"skeleton-availability"],[1,"error-state"],[1,"error-icon"],[1,"pi","pi-exclamation-triangle"],[1,"error-message"],[1,"retry-button",3,"click"],[1,"pi","pi-refresh"],[1,"time-slots-grid"],["class","time-slot-card",3,"available","unavailable","selected","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"time-slot-card",3,"click"],[1,"slot-name"],[1,"slot-limit"],[1,"no-slots-message","compact"],[1,"no-slots-icon"],[1,"pi","pi-briefcase"],[1,"no-slots-text"],[1,"pi","pi-calendar-times"],[1,"loading-state"],[1,"loading-spinner"],[1,"pi","pi-spin","pi-spinner"],[1,"warning-message"],[1,"pi","pi-info-circle"],[1,"table-wrapper"],[1,"orders-table"],[4,"ngFor","ngForOf"],[1,"td-customer"],["title","View Order Details",1,"customer-name",3,"click"],[1,"order-id","truncate",3,"title"],[1,"td-slot"],[1,"slot-wrapper"],["placeholder","Select Slot","optionLabel","label","optionValue","value","styleClass","slot-dropdown",3,"ngModelChange","onChange","options","ngModel","disabled","appendTo","filter","showClear"],["class","slot-loading",4,"ngIf"],[1,"slot-loading"],[3,"onPageChange","rows","totalRecords","rowsPerPageOptions"],[1,"no-data-message"],[1,"pi","pi-info-circle",2,"margin-right","0.5rem"],[1,"custom-modal-header"],[1,"p-dialog-title"],[1,"order-details-content"],[1,"detail-group"],[1,"value"],[1,"detail-row"],[1,"value","text-sm","text-gray-500"],[1,"detail-group","text-right"],[1,"value","font-bold","text-primary"],["class","detail-section",4,"ngIf"],[1,"value","address","text-sm"],["class","detail-row",4,"ngIf"],["class","edit-section",4,"ngIf"],[1,"detail-section"],[1,"section-label"],["class","product-item",4,"ngFor","ngForOf"],[1,"product-item"],[1,"prod-name"],[1,"prod-qty"],[1,"value","status-badge",3,"ngClass"],[1,"edit-section"],["optionLabel","label","optionValue","value","placeholder","Select Status","styleClass","compact-dropdown",3,"ngModelChange","options","ngModel","appendTo"],["optionLabel","label","optionValue","value","placeholder","Select Payment Status","styleClass","compact-dropdown",3,"ngModelChange","options","ngModel","appendTo"],["pButton","","label","Edit","icon","pi pi-pencil","class","p-button-outlined p-button-sm",3,"click",4,"ngIf"],["pButton","","label","Cancel","icon","pi pi-times","class","p-button-text p-button-sm",3,"click",4,"ngIf"],["pButton","","label","Update","icon","pi pi-check","class","p-button-outlined p-button-sm",3,"loading","click",4,"ngIf"],["pButton","","label","Edit","icon","pi pi-pencil",1,"p-button-outlined","p-button-sm",3,"click"],["pButton","","label","Cancel","icon","pi pi-times",1,"p-button-text","p-button-sm",3,"click"],["pButton","","label","Update","icon","pi pi-check",1,"p-button-outlined","p-button-sm",3,"click","loading"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),v("click",function(){return n.prevDate()}),h(4,"i",4),c(),s(5,"div",5),p(6),M(7,"date"),c(),s(8,"button",3),v("click",function(){return n.nextDate()}),h(9,"i",6),c()(),s(10,"div",7)(11,"div",8)(12,"label",9),p(13,"Slot Type"),c(),s(14,"p-dropdown",10),N("ngModelChange",function(r){return z(n.selectedSlotType,r)||(n.selectedSlotType=r),r}),v("onChange",function(r){return n.onSlotTypeChange(r.value)}),c()(),y(15,Qf,4,3,"div",11),s(16,"button",12),v("click",function(){return n.newOrderDialog()}),h(17,"i",13),c()()(),s(18,"div",14)(19,"h3",15),p(20,"Available Slots"),c(),y(21,Zf,2,2,"div",16)(22,e_,8,1,"div",17)(23,n_,2,2,"div",18)(24,i_,5,0,"div",19)(25,o_,5,0,"div",19),c(),s(26,"div",20)(27,"h3",15),p(28,"Orders"),c(),y(29,r_,5,0,"div",21)(30,a_,4,0,"div",22)(31,d_,10,1,"div",23)(32,l_,1,4,"p-paginator",24)(33,p_,3,0,"div",25)(34,m_,4,0,"div",22),c()(),h(35,"p-confirmDialog")(36,"p-toast"),s(37,"p-dialog",26),N("visibleChange",function(r){return z(n.viewOrderDetailsVisible,r)||(n.viewOrderDetailsVisible=r),r}),y(38,g_,3,0,"ng-template",27)(39,b_,26,13,"div",28)(40,P_,3,3,"ng-template",29),c()),e&2&&(d(6),T(" ",gt(7,22,n.selectedDate,"EEEE, MMM d")," "),d(8),g("options",n.slotTypeOptions),L("ngModel",n.selectedSlotType),d(),g("ngIf",n.selectedSlotType==="service"),d(6),g("ngIf",n.isLoadingSlots),d(),g("ngIf",n.errorMessage&&!n.isLoadingSlots),d(),g("ngIf",!n.isLoadingSlots&&!n.errorMessage&&n.timeSlots.length>0),d(),g("ngIf",n.selectedSlotType==="service"&&!n.selectedSubscriptionProduct),d(),g("ngIf",!n.isLoadingSlots&&!n.errorMessage&&n.timeSlots.length===0&&!(n.selectedSlotType==="service"&&!n.selectedSubscriptionProduct)),d(4),g("ngIf",n.isLoadingOrders),d(),g("ngIf",!n.isLoadingOrders&&n.orders.length>0&&n.timeSlots.length===0&&!(n.selectedSlotType==="service"&&!n.selectedSubscriptionProduct)),d(),g("ngIf",!n.isLoadingOrders&&n.orders.length>0&&!(n.selectedSlotType==="service"&&!n.selectedSubscriptionProduct)),d(),g("ngIf",!n.isLoadingOrders&&n.orders.length>0),d(),g("ngIf",!n.isLoadingOrders&&n.orders.length===0&&!(n.selectedSlotType==="service"&&!n.selectedSubscriptionProduct)),d(),g("ngIf",n.selectedSlotType==="service"&&!n.selectedSubscriptionProduct),d(3),st(se(25,Yf)),L("visible",n.viewOrderDetailsVisible),g("modal",!0)("draggable",!1)("resizable",!1),d(2),g("ngIf",n.selectedOrderForView))},dependencies:[Se,ee,W,Mn,Pn,Ve,Cc,Y,_e,On,he,wn,bn,zs,Zt],styles:[`.order-slots-container{padding:1rem 1rem 3rem;background-color:#f8f9fa;min-height:100vh;max-width:100%}.order-slots-container .filters-section{margin-bottom:.75rem}.order-slots-container .filters-section .date-navigation{display:flex;align-items:center;justify-content:center;gap:1.5rem;margin-bottom:1rem}.order-slots-container .filters-section .date-navigation .current-date{font-size:1.125rem;font-weight:700;color:#5d157c;min-width:10rem;text-align:center}.order-slots-container .filters-section .date-navigation .nav-btn{background:none;border:none;color:#666;cursor:pointer;padding:.5rem;display:flex;align-items:center;justify-content:center;transition:color .2s ease}.order-slots-container .filters-section .date-navigation .nav-btn:hover{color:#5d157c}.order-slots-container .filters-section .date-navigation .nav-btn i{font-size:1.25rem}.order-slots-container .filters-section .date-navigation .date-item-deprecated{display:none;flex-direction:column;align-items:center;justify-content:center;min-width:3.5rem;height:3.5rem;background:#fff;border:1px solid #e0e0e0;border-radius:.5rem;cursor:pointer;transition:all .2s ease}.order-slots-container .filters-section .date-navigation .date-item-deprecated .day{font-size:.75rem;color:#666;font-weight:500;text-transform:uppercase}.order-slots-container .filters-section .date-navigation .date-item-deprecated .date{font-size:1rem;font-weight:700;color:#333}.order-slots-container .filters-section .date-navigation .date-item-deprecated:hover{border-color:#5d157c;background:#f8f5ff}.order-slots-container .filters-section .date-navigation .date-item-deprecated.active{background:#5d157c;border-color:#5d157c}.order-slots-container .filters-section .date-navigation .date-item-deprecated.active .day,.order-slots-container .filters-section .date-navigation .date-item-deprecated.active .date{color:#fff}.order-slots-container .filters-section .filter-row-compact{display:flex;gap:.75rem;align-items:flex-end;margin-bottom:.75rem;flex-wrap:wrap}.order-slots-container .filters-section .filter-row-compact .filter-group{display:flex;flex-direction:column}.order-slots-container .filters-section .filter-row-compact .filter-group.compact .filter-label{font-size:.875rem;font-weight:700;color:#5d157c;margin-bottom:.5rem;padding-left:.5rem;border-left:3px solid #5d157c;line-height:1.2}.order-slots-container .filters-section .filter-row-compact .filter-group.compact ::ng-deep .compact-dropdown{width:8rem;height:2.25rem;font-size:.8125rem;border-radius:.5rem}.order-slots-container .filters-section .filter-row-compact .filter-group.compact ::ng-deep .compact-dropdown .p-dropdown{border:1.5px solid #d1d5db;background:#fff;transition:all .2s ease;box-shadow:0 1px 2px #0000000d}.order-slots-container .filters-section .filter-row-compact .filter-group.compact ::ng-deep .compact-dropdown .p-dropdown:hover{border-color:#5d157c}.order-slots-container .filters-section .filter-row-compact .filter-group.compact ::ng-deep .compact-dropdown .p-dropdown:focus,.order-slots-container .filters-section .filter-row-compact .filter-group.compact ::ng-deep .compact-dropdown .p-dropdown.p-focus{border-color:#5d157c;box-shadow:0 0 0 3px #5d157c1a}.order-slots-container .filters-section .filter-row-compact .filter-group.compact ::ng-deep .compact-dropdown .p-dropdown-label{padding:.4rem .6rem;font-weight:500;color:#111827}.order-slots-container .filters-section .filter-row-compact .filter-group.compact ::ng-deep .compact-dropdown .p-dropdown-trigger{color:#6b7280}.order-slots-container .filters-section .filter-row-compact .filter-group.compact ::ng-deep .compact-dropdown .p-dropdown-clear-icon{right:2.5rem;color:#666;font-size:.8rem}.order-slots-container .filters-section .filter-row-compact .filter-group.compact ::ng-deep .compact-dropdown .p-dropdown-clear-icon:hover{color:#333}.order-slots-container .filters-section .filter-row-compact .filter-group.compact ::ng-deep .p-dropdown-panel{border:1px solid #e5e7eb;border-radius:.5rem;box-shadow:0 4px 6px #0000001a}.order-slots-container .filters-section .filter-row-compact .filter-group.compact ::ng-deep .p-dropdown-panel .p-dropdown-items .p-dropdown-item{padding:.5rem .75rem;font-size:.8125rem;color:#374151}.order-slots-container .filters-section .filter-row-compact .filter-group.compact ::ng-deep .p-dropdown-panel .p-dropdown-items .p-dropdown-item:hover{background:#f3f4f6}.order-slots-container .filters-section .filter-row-compact .filter-group.compact ::ng-deep .p-dropdown-panel .p-dropdown-items .p-dropdown-item.p-highlight{background:#5d157c;color:#fff}.order-slots-container .filters-section .filter-row-compact .new-order-btn.compact.icon-only{background:#5d157c;color:#fff;border:none;border-radius:50%;width:2.25rem;height:2.25rem;display:flex;align-items:center;justify-content:center;margin-left:auto;cursor:pointer;transition:all .2s ease;flex-shrink:0}.order-slots-container .filters-section .filter-row-compact .new-order-btn.compact.icon-only:hover{background:#4a1265;transform:scale(1.1)}.order-slots-container .filters-section .filter-row-compact .new-order-btn.compact.icon-only i{font-size:.875rem}@media (max-width: 768px){.order-slots-container .filters-section .filter-row-compact{gap:.75rem}.order-slots-container .filters-section .filter-row-compact .filter-group.compact ::ng-deep .compact-dropdown{width:100%!important;min-width:8rem}.order-slots-container .filters-section .filter-row-compact .new-order-btn.compact{width:100%;justify-content:center;margin-left:0;margin-top:.5rem}}.order-slots-container .header{font-size:1rem;font-weight:700;color:#5d157c;margin-bottom:.75rem;padding-left:.625rem;border-left:3px solid #5d157c;line-height:1.2}.order-slots-container .time-slots-grid-container{margin-bottom:1rem}.order-slots-container .time-slots-grid-container .time-slots-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(110px,1fr));gap:.625rem;width:100%}.order-slots-container .time-slots-grid-container .time-slots-grid .time-slot-card{background:#fff;border:1px solid #e5e7eb;border-radius:.5rem;padding:.75rem .5rem;text-align:center;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:.375rem;transition:all .2s ease;cursor:pointer;min-height:4rem}.order-slots-container .time-slots-grid-container .time-slots-grid .time-slot-card .slot-name{font-size:.8125rem;font-weight:600;color:#5d157c;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%}.order-slots-container .time-slots-grid-container .time-slots-grid .time-slot-card .slot-limit{font-size:.6875rem;color:#6b7280;font-weight:500}.order-slots-container .time-slots-grid-container .time-slots-grid .time-slot-card.unavailable{background:#f9fafb;border-color:#e5e7eb;opacity:.7}.order-slots-container .time-slots-grid-container .time-slots-grid .time-slot-card.unavailable .slot-name,.order-slots-container .time-slots-grid-container .time-slots-grid .time-slot-card.unavailable .slot-limit{color:#9ca3af}.order-slots-container .time-slots-grid-container .time-slots-grid .time-slot-card.available:hover{border-color:#5d157c;background:#faf5ff;transform:translateY(-2px);box-shadow:0 4px 6px #5d157c26}.order-slots-container .time-slots-grid-container .time-slots-grid .time-slot-card.selected{border-color:#5d157c;background:#f3e8ff;box-shadow:0 0 0 2px #5d157c4d;transform:translateY(-1px)}.order-slots-container .time-slots-grid-container .time-slots-grid .time-slot-card.selected .slot-name{color:#5d157c;font-weight:700}.order-slots-container .time-slots-grid-container .time-slots-grid .time-slot-card.selected .slot-limit{color:#5d157c;font-weight:600}.order-slots-container .time-slots-grid-container .time-slots-grid.skeleton-grid{grid-template-columns:repeat(auto-fill,minmax(140px,1fr))}.order-slots-container .time-slots-grid-container .time-slots-grid.skeleton-grid .skeleton-card{background:#f0f0f0;border:1px solid #e0e0e0;border-radius:.375rem;height:3.5rem;animation:skeleton-loading 1.5s infinite}.order-slots-container .time-slots-grid-container .time-slots-grid.skeleton-grid .skeleton-card .skeleton-time{width:70%;height:.75rem;margin-bottom:.5rem;border-radius:.25rem;background:#0000000d}.order-slots-container .time-slots-grid-container .time-slots-grid.skeleton-grid .skeleton-card .skeleton-availability{width:40%;height:.625rem;border-radius:.25rem;background:#0000000d}.order-slots-container .time-slots-grid-container .no-slots-message.compact{padding:1.5rem;min-height:auto;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;width:100%}.order-slots-container .time-slots-grid-container .no-slots-message.compact .no-slots-icon{margin-bottom:.75rem;padding:.75rem}.order-slots-container .time-slots-grid-container .no-slots-message.compact .no-slots-icon i{font-size:1.5rem}.order-slots-container .time-slots-grid-container .no-slots-message.compact .no-slots-text{font-size:.875rem;color:#666}.order-slots-container .table-container{margin-top:1rem}.order-slots-container .table-container .loading-state{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2.5rem}.order-slots-container .table-container .warning-message{display:flex;align-items:center;justify-content:center;gap:.5rem;background-color:#fff3cd;color:#856404;border:1px solid #ffeeba;padding:.5rem 1rem;border-radius:.5rem;margin-bottom:.75rem;font-size:.8125rem;font-weight:500}.order-slots-container .table-container .warning-message i{font-size:1rem}.order-slots-container .table-container .table-wrapper{border-radius:8px;border:1px solid #e5e7eb;box-shadow:0 1px 3px #0000000d;background:#fff;overflow-x:auto}.order-slots-container .table-container .table-wrapper::-webkit-scrollbar{height:6px}.order-slots-container .table-container .table-wrapper::-webkit-scrollbar-track{background:#f1f1f1}.order-slots-container .table-container .table-wrapper::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}.order-slots-container .table-container .table-wrapper::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.order-slots-container .table-container .orders-table{width:100%;border-collapse:collapse;font-size:13px}.order-slots-container .table-container .orders-table thead{background-color:#5d157c;color:#fff;position:sticky;top:0;z-index:10}.order-slots-container .table-container .orders-table thead th{padding:10px 12px;font-weight:600;text-align:left;white-space:nowrap;font-size:13px;border-bottom:2px solid #4a1265}.order-slots-container .table-container .orders-table thead th:first-child{width:40%;padding-left:16px}.order-slots-container .table-container .orders-table thead th:nth-child(2){width:30%;text-align:left}.order-slots-container .table-container .orders-table thead th.th-actions{text-align:center;width:30%;padding-right:16px}.order-slots-container .table-container .orders-table tbody tr{border-bottom:1px solid #e5e7eb;transition:background .15s ease}.order-slots-container .table-container .orders-table tbody tr:nth-child(odd){background-color:#fff}.order-slots-container .table-container .orders-table tbody tr:nth-child(2n){background-color:#fafafa}.order-slots-container .table-container .orders-table tbody tr:hover{background-color:#f3e8ff}.order-slots-container .table-container .orders-table tbody td{padding:8px 12px;vertical-align:middle;font-size:13px}.order-slots-container .table-container .orders-table tbody .td-customer{padding-left:16px}.order-slots-container .table-container .orders-table tbody .td-customer .customer-name{font-weight:600;font-size:13px;color:#111827;margin-bottom:2px;cursor:pointer;transition:color .2s}.order-slots-container .table-container .orders-table tbody .td-customer .customer-name:hover{color:#5d157c;text-decoration:underline}.order-slots-container .table-container .orders-table tbody .td-customer .order-id{font-size:11px;color:#6b7280;font-weight:500;text-transform:uppercase;letter-spacing:.025em;background:#f3f4f6;padding:1px 6px;border-radius:4px;display:inline-block;max-width:100px}.order-slots-container .table-container .orders-table tbody .td-customer .order-id.truncate{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;vertical-align:middle}.order-slots-container .table-container .orders-table tbody .td-slot{padding:6px 12px}.order-slots-container .table-container .orders-table tbody .td-slot .slot-wrapper{display:flex;align-items:center;justify-content:flex-start;position:relative;gap:8px;width:100%}.order-slots-container .table-container .orders-table tbody .td-slot ::ng-deep .slot-dropdown{width:100%;max-width:100%}.order-slots-container .table-container .orders-table tbody .td-slot ::ng-deep .slot-dropdown .p-dropdown{width:100%;border:1px solid #d1d5db;border-radius:6px;background:#fff;transition:all .2s ease;height:32px;align-items:center}.order-slots-container .table-container .orders-table tbody .td-slot ::ng-deep .slot-dropdown .p-dropdown:hover{border-color:#5d157c}.order-slots-container .table-container .orders-table tbody .td-slot ::ng-deep .slot-dropdown .p-dropdown.p-focus{border-color:#5d157c;box-shadow:0 0 0 2px #5d157c1a}.order-slots-container .table-container .orders-table tbody .td-slot ::ng-deep .slot-dropdown .p-dropdown.p-disabled{background-color:#f9fafb;opacity:.7}.order-slots-container .table-container .orders-table tbody .td-slot ::ng-deep .slot-dropdown .p-dropdown .p-dropdown-label{padding:0 10px;line-height:30px;font-size:13px}.order-slots-container .table-container .orders-table tbody .td-slot ::ng-deep .slot-dropdown .p-dropdown .p-dropdown-trigger{width:2rem}.order-slots-container .table-container .orders-table tbody .td-slot ::ng-deep .slot-dropdown .p-dropdown .p-dropdown-trigger .p-dropdown-trigger-icon{font-size:12px}.order-slots-container .table-container .orders-table tbody .td-slot ::ng-deep .slot-dropdown .p-dropdown-panel{border-radius:6px;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.order-slots-container .table-container .orders-table tbody .td-slot ::ng-deep .slot-dropdown .p-dropdown-panel .p-dropdown-items{padding:4px 0}.order-slots-container .table-container .orders-table tbody .td-slot ::ng-deep .slot-dropdown .p-dropdown-panel .p-dropdown-items .p-dropdown-item{padding:6px 12px;font-size:13px}.order-slots-container .table-container .orders-table tbody .td-slot ::ng-deep .slot-dropdown .p-dropdown-panel .p-dropdown-items .p-dropdown-item:hover{background-color:#f3e8ff;color:#5d157c}.order-slots-container .table-container .orders-table tbody .td-slot ::ng-deep .slot-dropdown .p-dropdown-panel .p-dropdown-items .p-dropdown-item.p-highlight{background-color:#5d157c;color:#fff}.order-slots-container .table-container .orders-table tbody .td-slot .slot-loading{color:#5d157c;font-size:.875rem;display:flex;align-items:center}.order-slots-container .table-container .orders-table tbody .td-slot .slot-loading i{animation:spin 1s linear infinite}.order-slots-container .table-container .orders-table tbody .td-actions{padding-right:16px}.order-slots-container .table-container .orders-table tbody .td-actions .menu-btn{background:transparent;border:none;cursor:pointer;padding:6px;border-radius:4px;display:inline-flex;align-items:center;justify-content:center;transition:all .2s ease;color:#6b7280}.order-slots-container .table-container .orders-table tbody .td-actions .menu-btn i{font-size:16px}.order-slots-container .table-container .orders-table tbody .td-actions .menu-btn:hover{background:#f3f4f6;color:#5d157c}.order-slots-container .table-container .orders-table tbody .td-actions .menu-btn:active{background:#e5e7eb}.order-slots-container .table-container .orders-table tbody .empty-row{text-align:center;padding:60px 16px;color:#6b7280;font-size:14px}.order-slots-container .table-container .orders-table tbody .empty-row i{display:block;font-size:48px;color:#e5e7eb;margin-bottom:12px}.order-slots-container .table-container .orders-table tbody .empty-row p{margin:0}.order-slots-container .table-container .icon-btn{width:28px;height:28px;border-radius:4px;display:inline-flex;align-items:center;justify-content:center;border:1px solid transparent;background-color:transparent;cursor:pointer;font-size:14px;transition:all .2s;flex-shrink:0}.order-slots-container .table-container .icon-btn i{pointer-events:none}.order-slots-container .table-container .icon-btn:disabled{opacity:.5;cursor:not-allowed}.order-slots-container .table-container .icon-btn-edit{color:#2563eb}.order-slots-container .table-container .icon-btn-edit:hover:not(:disabled){background-color:#eff6ff}.order-slots-container .table-container .icon-btn-delete{color:#dc2626}.order-slots-container .table-container .icon-btn-delete:hover:not(:disabled){background-color:#fef2f2}.order-slots-container ::ng-deep .order-actions-menu .mat-mdc-menu-content{padding:8px 0}.order-slots-container ::ng-deep .order-actions-menu .mat-mdc-menu-item{min-height:44px;padding:0 16px;font-size:14px;color:#374151;display:flex;align-items:center;gap:12px;line-height:1.5}.order-slots-container ::ng-deep .order-actions-menu .mat-mdc-menu-item .mat-mdc-menu-item-text{display:flex;align-items:center;gap:12px}.order-slots-container ::ng-deep .order-actions-menu .mat-mdc-menu-item i{font-size:15px;width:18px;display:inline-flex;align-items:center;justify-content:center}.order-slots-container ::ng-deep .order-actions-menu .mat-mdc-menu-item span{flex:1}.order-slots-container ::ng-deep .order-actions-menu .mat-mdc-menu-item:hover{background-color:#f3f4f6}.order-slots-container ::ng-deep .order-actions-menu .mat-mdc-menu-item:hover .pi-pencil{color:#2563eb}.order-slots-container ::ng-deep .order-actions-menu .mat-mdc-menu-item:hover .pi-trash{color:#dc2626}.order-slots-container ::ng-deep .order-actions-menu .no-data-message{color:#6b7280;font-size:.875rem;text-align:center;padding:1rem;background:#f9fafb;border-radius:.5rem;margin-bottom:1rem}@keyframes skeleton-loading{0%{background-position:-200% 0}to{background-position:200% 0}}@keyframes shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.order-slots-container ::ng-deep .p-confirm-dialog .p-dialog{border-radius:1rem!important;box-shadow:0 .625rem 1.875rem #00000026!important;border:none!important;max-width:25rem!important}.order-slots-container ::ng-deep .p-confirm-dialog .p-dialog .p-dialog-header{display:none!important}.order-slots-container ::ng-deep .p-confirm-dialog .p-dialog .p-dialog-content{padding:2.5rem 1.875rem 1.875rem!important;text-align:center!important}.order-slots-container ::ng-deep .p-confirm-dialog .p-dialog .p-dialog-content .p-confirm-dialog-message{font-size:1.125rem!important;font-weight:600!important;color:#5d157c!important;line-height:1.4!important;margin-bottom:1.875rem!important;padding:0!important}.order-slots-container ::ng-deep .p-confirm-dialog .p-dialog .p-dialog-content .p-confirm-dialog-message:before{content:"Are you sure you want to";display:block;font-size:1rem;font-weight:500;color:#5d157c;margin-bottom:.25rem}.order-slots-container ::ng-deep .p-confirm-dialog .p-dialog .p-dialog-content .p-confirm-dialog-message:after{content:"?";font-size:1.25rem;font-weight:700;color:#5d157c}.order-slots-container ::ng-deep .p-confirm-dialog .p-dialog .p-dialog-content .p-confirm-dialog-message span,.order-slots-container ::ng-deep .p-confirm-dialog .p-dialog .p-dialog-content .p-confirm-dialog-message div{display:none!important}.order-slots-container ::ng-deep .p-confirm-dialog .p-dialog .p-dialog-footer{padding:0 1.875rem 1.875rem!important;border:none!important;background:transparent!important;text-align:center!important}.order-slots-container ::ng-deep .p-confirm-dialog .p-dialog .p-dialog-footer .p-button{border-radius:.75rem!important;padding:.75rem 1.5rem!important;font-weight:500!important;font-size:.875rem!important;border:none!important;min-width:6.25rem!important;transition:all .2s ease!important}.order-slots-container ::ng-deep .p-confirm-dialog .p-dialog .p-dialog-footer .p-button.p-confirm-dialog-reject{background-color:#f0f0f0!important;color:#666!important}.order-slots-container ::ng-deep .p-confirm-dialog .p-dialog .p-dialog-footer .p-button.p-confirm-dialog-reject:hover{background-color:#e0e0e0!important;transform:translateY(-.0625rem)!important}.order-slots-container ::ng-deep .p-confirm-dialog .p-dialog .p-dialog-footer .p-button.p-confirm-dialog-reject:focus{box-shadow:none!important}.order-slots-container ::ng-deep .p-confirm-dialog .p-dialog .p-dialog-footer .p-button.p-confirm-dialog-accept{background-color:#f8f5ff!important;color:#5d157c!important}.order-slots-container ::ng-deep .p-confirm-dialog .p-dialog .p-dialog-footer .p-button.p-confirm-dialog-accept:hover{background-color:#f0ebff!important;transform:translateY(-.0625rem)!important}.order-slots-container ::ng-deep .p-confirm-dialog .p-dialog .p-dialog-footer .p-button.p-confirm-dialog-accept:focus{box-shadow:none!important}.order-slots-container ::ng-deep .p-confirm-dialog .p-dialog .p-dialog-footer .p-button:not(:last-child){margin-right:1rem!important}.order-details-dialog{border-radius:12px;box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;overflow:visible!important;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol}.order-details-dialog .p-dialog-header{background:linear-gradient(135deg,#5d157c,#4a1265);color:#fff;padding:1rem 1.25rem;border-bottom:1px solid rgba(255,255,255,.1);border-top-left-radius:12px;border-top-right-radius:12px}.order-details-dialog .p-dialog-header .p-dialog-title{font-weight:700;font-size:1.125rem;letter-spacing:.01em}.order-details-dialog .p-dialog-header .p-dialog-header-icon{color:#ffffffd9;width:1.75rem;height:1.75rem;border-radius:50%;transition:all .2s ease;border:none}.order-details-dialog .p-dialog-header .p-dialog-header-icon:hover{color:#fff;background:#ffffff26;transform:rotate(90deg)}.order-details-dialog .p-dialog-header .p-dialog-header-icon:focus{box-shadow:0 0 0 2px #ffffff4d}.order-details-dialog .p-dialog-content{padding:0!important;background:#fff;overflow-y:visible!important}.order-details-dialog .p-dialog-content .order-details-content{display:flex;flex-direction:column;gap:1rem;padding:1.25rem 1.25rem 2rem}.order-details-dialog .p-dialog-content .detail-group{display:flex;flex-direction:column;gap:.25rem}.order-details-dialog .p-dialog-content .detail-group label{font-size:.75rem;font-weight:700;color:#6b7280;text-transform:uppercase;letter-spacing:.05em;margin-bottom:0}.order-details-dialog .p-dialog-content .detail-group .value{font-size:.9rem;color:#1f2937;font-weight:500;line-height:1.4}.order-details-dialog .p-dialog-content .detail-group .value.address{background:#f9fafb;padding:.625rem .875rem;border-radius:.5rem;border:1px solid #f3f4f6;color:#374151;font-size:.875rem}.order-details-dialog .p-dialog-content .detail-group .value.status-badge{display:inline-flex;align-items:center;justify-content:center;padding:.25rem .75rem;border-radius:9999px;font-size:.75rem;font-weight:700;text-transform:uppercase;letter-spacing:.025em}.order-details-dialog .p-dialog-content .detail-group .value.status-badge.pending{background:#fff7ed;color:#c2410c;border:1px solid #ffedd5}.order-details-dialog .p-dialog-content .detail-group .value.status-badge.accepted{background:#eff6ff;color:#1d4ed8;border:1px solid #dbeafe}.order-details-dialog .p-dialog-content .detail-group .value.status-badge.completed{background:#f0fdf4;color:#15803d;border:1px solid #dcfce7}.order-details-dialog .p-dialog-content .detail-group .value.status-badge.cancelled{background:#fef2f2;color:#b91c1c;border:1px solid #fee2e2}.order-details-dialog .p-dialog-content .detail-row{display:grid;grid-template-columns:1fr 1fr;gap:1rem;align-items:start}.order-details-dialog .p-dialog-content .detail-section{background:#f8fafc;border:1px solid #e2e8f0;border-radius:.5rem;padding:.75rem;box-shadow:0 1px 2px #00000008}.order-details-dialog .p-dialog-content .detail-section .section-label{font-size:.75rem;font-weight:700;color:#64748b;margin-bottom:.5rem;text-transform:uppercase;letter-spacing:.05em;padding-bottom:.375rem;border-bottom:1px solid #e2e8f0}.order-details-dialog .p-dialog-content .detail-section .product-item{display:flex;justify-content:space-between;align-items:center;padding:.5rem .375rem;border-bottom:1px solid #f1f5f9;font-size:.875rem;transition:background-color .2s;border-radius:.375rem}.order-details-dialog .p-dialog-content .detail-section .product-item:last-child{border-bottom:none}.order-details-dialog .p-dialog-content .detail-section .product-item:hover{background-color:#f1f5f9}.order-details-dialog .p-dialog-content .detail-section .product-item .prod-name{font-weight:600;color:#334155}.order-details-dialog .p-dialog-content .detail-section .product-item .prod-qty{color:#64748b;font-weight:600;background:#e2e8f0;padding:.125rem .375rem;border-radius:.25rem;font-size:.75rem}.order-details-dialog .p-dialog-content .edit-section{background:#f0f9ff;border:1px solid #bae6fd;border-radius:.75rem;padding:1rem;display:flex;flex-direction:column;gap:1rem}.order-details-dialog .p-dialog-content .edit-section .detail-group label{color:#0369a1}.order-details-dialog .p-dialog-footer{padding:1rem 1.25rem;border-top:1px solid #e5e7eb;background:#f9fafb;display:flex;justify-content:flex-end;gap:.5rem;border-bottom-left-radius:12px;border-bottom-right-radius:12px}.order-details-dialog .p-dialog-footer button.p-button-text{color:#6b7280;font-weight:600;padding:.5rem 1rem}.order-details-dialog .p-dialog-footer button.p-button-text:hover{background:#f3f4f6;color:#374151}.order-details-dialog .p-dialog-footer button.p-button-primary{background:#5d157c;border:1px solid #5d157c;padding:.5rem 1rem;font-weight:600}.order-details-dialog .p-dialog-footer button.p-button-primary:hover{background:#4a1265;border-color:#4a1265}::ng-deep .p-paginator{margin-top:1rem;border:none;background:transparent;padding:.5rem}::ng-deep .p-paginator .p-paginator-current{font-size:.875rem;color:#6b7280}::ng-deep .p-paginator .p-paginator-pages .p-paginator-page{min-width:2rem;height:2rem;font-size:.875rem;border-radius:.375rem;color:#4b5563}::ng-deep .p-paginator .p-paginator-pages .p-paginator-page:not(.p-highlight):hover{background:#f3f4f6;color:#5d157c}::ng-deep .p-paginator .p-paginator-pages .p-paginator-page.p-highlight{background:#5d157c;color:#fff;border-color:#5d157c}::ng-deep .p-paginator .p-paginator-first,::ng-deep .p-paginator .p-paginator-prev,::ng-deep .p-paginator .p-paginator-next,::ng-deep .p-paginator .p-paginator-last{min-width:2rem;height:2rem;border-radius:.375rem;color:#6b7280}::ng-deep .p-paginator .p-paginator-first:not(.p-disabled):hover,::ng-deep .p-paginator .p-paginator-prev:not(.p-disabled):hover,::ng-deep .p-paginator .p-paginator-next:not(.p-disabled):hover,::ng-deep .p-paginator .p-paginator-last:not(.p-disabled):hover{background:#f3f4f6;color:#5d157c}::ng-deep .p-paginator .p-dropdown{height:2.25rem;align-items:center}::ng-deep .p-paginator .p-dropdown .p-dropdown-label{padding-top:0;padding-bottom:0;line-height:2.25rem}::ng-deep .order-details-dialog .p-dialog-header{padding:1rem 1.25rem;border-bottom:1px solid #e5e7eb}::ng-deep .order-details-dialog .p-dialog-header .custom-modal-header{display:flex;align-items:center;justify-content:space-between;flex-grow:1;padding-right:2rem}::ng-deep .order-details-dialog .p-dialog-header .p-dialog-title{font-size:1.125rem;font-weight:600;margin:0!important}::ng-deep .order-details-dialog .p-dialog-content{padding:1.25rem}::ng-deep .order-details-dialog .p-dialog-footer{padding:1rem 1.25rem;border-top:1px solid #e5e7eb;display:flex;justify-content:flex-end}::ng-deep .order-details-dialog .p-dialog-footer .p-button-outlined{border:1.5px solid #111827!important;border-radius:0;background:transparent!important;color:#111827;padding:.375rem 1.25rem;font-weight:600}::ng-deep .order-details-dialog .p-dialog-footer .p-button-outlined:enabled:hover{background:#f3f4f6!important;color:#111827}::ng-deep .order-details-dialog .p-dialog-footer .p-button-outlined:enabled:active{background:#e5e7eb!important}::ng-deep .order-details-dialog .p-dialog-footer .p-button-outlined:focus{box-shadow:none}::ng-deep .order-details-dialog .order-details-content{display:flex;flex-direction:column;gap:1rem}::ng-deep .order-details-dialog .order-details-content .detail-group{display:flex;flex-direction:column;gap:.25rem}::ng-deep .order-details-dialog .order-details-content .detail-group label{font-size:.75rem;font-weight:600;color:#6b7280;text-transform:uppercase;letter-spacing:.025em}::ng-deep .order-details-dialog .order-details-content .detail-group .value{font-size:.9375rem;color:#111827;font-weight:500;word-break:break-word}::ng-deep .order-details-dialog .order-details-content .detail-group .value.address{line-height:1.4}::ng-deep .order-details-dialog .order-details-content .detail-group .value.status-badge{display:inline-flex;align-items:center;padding:.25rem .75rem;border-radius:6px;font-size:.75rem;font-weight:700}::ng-deep .order-details-dialog .order-details-content .detail-group .value.status-badge.pending{border:1px solid #fed7aa;border-radius:9999px;color:#c2410c;background-color:#fffaf0}::ng-deep .order-details-dialog .order-details-content .detail-group .value.status-badge.accepted{border:1px solid #bbf7d0;border-radius:9999px;color:#15803d;background-color:#f0fdf4}::ng-deep .order-details-dialog .order-details-content .detail-group .value.status-badge.completed{border:1px solid #bfdbfe;border-radius:9999px;color:#1d4ed8;background-color:#eff6ff}::ng-deep .order-details-dialog .order-details-content .detail-group .value.status-badge.cancelled{border:1px solid #fecaca;border-radius:9999px;color:#b91c1c;background-color:#fef2f2}::ng-deep .order-details-dialog .order-details-content .detail-group .value.status-badge.paid{border:1.5px solid #111827;border-radius:0;color:#111827;background-color:transparent}::ng-deep .order-details-dialog .order-details-content .detail-group .value.status-badge.unpaid{border:1.5px solid #111827;border-radius:0;color:#111827;background-color:transparent}::ng-deep .order-details-dialog .order-details-content .detail-row{display:grid;grid-template-columns:1fr 1fr;gap:1rem}::ng-deep .order-details-dialog .order-details-content .detail-section{background:#f9fafb;border:1px solid #e5e7eb;border-radius:.5rem;padding:.75rem;margin-top:.5rem}::ng-deep .order-details-dialog .order-details-content .detail-section .section-label{font-size:.75rem;font-weight:600;color:#4b5563;margin-bottom:.5rem;text-transform:uppercase}::ng-deep .order-details-dialog .order-details-content .detail-section .product-item{display:flex;justify-content:space-between;align-items:center;padding:.375rem 0;border-bottom:1px dashed #e5e7eb;font-size:.875rem}::ng-deep .order-details-dialog .order-details-content .detail-section .product-item:last-child{border-bottom:none}::ng-deep .order-details-dialog .order-details-content .detail-section .product-item .prod-name{font-weight:500;color:#374151}::ng-deep .order-details-dialog .order-details-content .detail-section .product-item .prod-qty{font-weight:600;color:#5d157c;background:#f3e8ff;padding:.125rem .375rem;border-radius:.25rem;font-size:.75rem}::ng-deep .order-details-dialog .order-details-content .edit-section{margin-top:.5rem;border-top:1px solid #e5e7eb;padding-top:1rem;display:grid;grid-template-columns:1fr 1fr;gap:1rem}
`],encapsulation:2})};function M_(i,t){i&1&&(s(0,"div",17),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"sales.customer_name_required")," "))}function O_(i,t){i&1&&(s(0,"div",17),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"sales.mobile_required")," "))}function w_(i,t){i&1&&(s(0,"div",17),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"sales.product_required")," "))}function S_(i,t){i&1&&(s(0,"div",17),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"sales.price_required")," "))}var Ti=class i{constructor(t){this.fb=t;this.salesForm=this.fb.group({customerName:["",A.required],mobile:["",[A.required]],productName:["",[A.required]],price:["",[A.required]],paidStatus:[!1,[A.required]],orderStatus:[!1,[A.required]]})}defaultExpander=!1;isHeaderClickBlockExpand=!1;onCancelTrigger=new Ee;onSubmitTrigger=new Ee;types=[{name:"Supplier",code:"sup"},{name:"Distributer",code:"dis"}];salesForm;onSubmit(){this.salesForm.valid,this.onSubmitTrigger.emit(this.salesForm.value)}buttonClicked(t){t.buttonType===1?this.onSubmit():t.buttonType===2&&this.onCancel()}onCancel(){this.onCancelTrigger.emit(!0)}static \u0275fac=function(e){return new(e||i)(w(ue))};static \u0275cmp=R({type:i,selectors:[["add-sales"]],inputs:{defaultExpander:"defaultExpander",isHeaderClickBlockExpand:"isHeaderClickBlockExpand"},outputs:{onCancelTrigger:"onCancelTrigger",onSubmitTrigger:"onSubmitTrigger"},decls:42,vars:42,consts:[[3,"buttonEventTriggered","compName","title","inputForm","isExpanded","isBlockExpand"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","customerName"],["id","customerName","type","text","formControlName","customerName",3,"placeholder"],["class","error-message",4,"ngIf"],["for","mobile"],["id","mobile","type","text","formControlName","mobile",3,"placeholder"],["for","productName"],["id","productName","type","text","formControlName","productName",3,"placeholder"],["for","price"],["id","price","type","text","formControlName","price",3,"placeholder"],["for","paid"],["id","paid","formControlName","paid"],["for","orderStatus"],["id","orderStatus","formControlName","orderStatus"],[2,"margin-bottom","24px"],[1,"error-message"]],template:function(e,n){if(e&1&&(s(0,"form-template",0),M(1,"translate"),v("buttonEventTriggered",function(r){return n.buttonClicked(r)}),s(2,"form",1),v("ngSubmit",function(){return n.onSubmit()}),s(3,"div",2)(4,"label",3),p(5),M(6,"translate"),c(),h(7,"input",4),M(8,"translate"),y(9,M_,3,3,"div",5),c(),s(10,"div",2)(11,"label",6),p(12),M(13,"translate"),c(),h(14,"input",7),M(15,"translate"),y(16,O_,3,3,"div",5),c(),s(17,"div",2)(18,"label",8),p(19),M(20,"translate"),c(),h(21,"input",9),M(22,"translate"),y(23,w_,3,3,"div",5),c(),s(24,"div",2)(25,"label",10),p(26),M(27,"translate"),c(),h(28,"input",11),M(29,"translate"),y(30,S_,3,3,"div",5),c(),s(31,"div",2)(32,"label",12),p(33),M(34,"translate"),c(),h(35,"p-inputSwitch",13),c(),s(36,"div",2)(37,"label",14),p(38),M(39,"translate"),c(),h(40,"p-inputSwitch",15),c(),h(41,"div",16),c()()),e&2){let o,r,a,l;g("compName","add-quick-sales")("title",O(1,20,"sales.add_sales"))("inputForm",n.salesForm)("isExpanded",n.defaultExpander)("isBlockExpand",n.isHeaderClickBlockExpand),d(2),g("formGroup",n.salesForm),d(3),S(O(6,22,"sales.customer_name")),d(2),g("placeholder",O(8,24,"sales.customer_name_placeholder")),d(2),g("ngIf",((o=n.salesForm.get("customerName"))==null?null:o.invalid)&&((o=n.salesForm.get("customerName"))==null?null:o.touched)),d(3),S(O(13,26,"sales.mobile_number")),d(2),g("placeholder",O(15,28,"sales.mobile_placeholder")),d(2),g("ngIf",((r=n.salesForm.get("mobile"))==null?null:r.invalid)&&((r=n.salesForm.get("mobile"))==null?null:r.touched)),d(3),S(O(20,30,"sales.product_name")),d(2),g("placeholder",O(22,32,"sales.product_placeholder")),d(2),g("ngIf",((a=n.salesForm.get("productName"))==null?null:a.invalid)&&((a=n.salesForm.get("productName"))==null?null:a.touched)),d(3),S(O(27,34,"sales.price")),d(2),g("placeholder",O(29,36,"sales.price_placeholder")),d(2),g("ngIf",((l=n.salesForm.get("price"))==null?null:l.invalid)&&((l=n.salesForm.get("price"))==null?null:l.touched)),d(3),S(O(34,38,"sales.paid")),d(5),S(O(39,40,"sales.order_status"))}},dependencies:[W,bt,ye,Z,Y,fe,Me,Oe,Le,ce],styles:[".full-width-dropdown{width:100%}  .full-width-dropdown>span{padding:.5rem}  .add-quick-sales-form-container.template-container{background-color:#fff}  form .form-group{margin-bottom:1rem}  form .form-group label{display:block;margin-bottom:.5rem;font-weight:500;color:#5d157c}  form .form-group input,   form .form-group p-dropdown,   form .form-group p-inputSwitch{width:100%}  form .form-group input{padding:.75rem;border:1px solid #d1d5db;border-radius:6px;transition:border-color .2s}  form .form-group input:focus{outline:none;border-color:#5d157c;box-shadow:0 0 0 3px #5d157c1a}  form .form-group .error-message{color:#ef4444;font-size:.875rem;margin-top:.25rem}"]})};var pp=()=>({width:"100%"}),mp=()=>({"max-height":"300px"}),k_=()=>({width:"25rem"});function I_(i,t){i&1&&(s(0,"p",10),h(1,"i",11),p(2," Please select a service to view available groups and members "),c())}function T_(i,t){if(i&1){let e=E();s(0,"div",26),v("click",function(){let o=b(e).$implicit,r=_(3);return C(r.selectGroup(o))}),s(1,"span",27),p(2),c(),s(3,"span",28),p(4),c()()}if(i&2){let e=t.$implicit,n=_(3);j("active",(n.selectedGroup==null?null:n.selectedGroup.group_id)===e.group_id),d(2),S(e.label),d(2),S(e.count)}}function E_(i,t){if(i&1&&(s(0,"div",24),y(1,T_,5,4,"div",25),c()),i&2){let e=_(2);d(),g("ngForOf",e.groupAvailability)}}function F_(i,t){i&1&&(s(0,"div",29),p(1,"No group available for this service"),c())}function D_(i,t){if(i&1){let e=E();s(0,"button",35),v("click",function(){b(e);let o=_(2).$implicit,r=_(2);return C(r.renewSubscription(o))}),h(1,"i",39),s(2,"span"),p(3,"Renew"),c()()}}function A_(i,t){if(i&1){let e=E();s(0,"button",35),v("click",function(){b(e);let o=_(2).$implicit,r=_(2);return C(r.remindSubscription(o))}),h(1,"i",40),s(2,"span"),p(3,"Remind"),c()()}}function V_(i,t){if(i&1){let e=E();s(0,"button",35),v("click",function(){b(e);let o=_(2).$implicit,r=_(2);return C(r.payInAdvance(o))}),h(1,"i",41),s(2,"span"),p(3,"Pay in Advance"),c()()}}function R_(i,t){if(i&1){let e=E();s(0,"button",35),v("click",function(){b(e);let o=_(2).$implicit,r=_(2);return C(r.markAsPaid(o))}),h(1,"i",42),s(2,"span"),p(3,"Mark as Paid"),c()()}}function L_(i,t){if(i&1){let e=E();s(0,"div",34),v("click",function(o){return b(e),C(o.stopPropagation())}),s(1,"button",35),v("click",function(){b(e);let o=_().$implicit,r=_(2);return C(r.viewSubscription(o))}),h(2,"i",36),s(3,"span"),p(4,"View"),c()(),s(5,"button",35),v("click",function(){b(e);let o=_().$implicit,r=_(2);return C(r.deleteSubscription(o))}),h(6,"i",37),s(7,"span"),p(8,"Delete"),c()(),y(9,D_,4,0,"button",38)(10,A_,4,0,"button",38)(11,V_,4,0,"button",38)(12,R_,4,0,"button",38),c()}if(i&2){let e=_().$implicit,n=_(2);yt("top",n.menuPosition.top)("left",n.menuPosition.left),d(9),g("ngIf",e.status==="expired"),d(),g("ngIf",e.status==="expired"),d(),g("ngIf",e.status==="active"),d(),g("ngIf",e.status==="inactive")}}function z_(i,t){if(i&1){let e=E();s(0,"div",30)(1,"button",31),v("click",function(o){let r=b(e).$implicit,a=_(2);return C(a.toggleMenu(r.subscription_id,o))}),h(2,"i",32),c(),y(3,L_,13,8,"div",33),c()}if(i&2){let e=t.$implicit,n=_(2);d(3),g("ngIf",n.openMenuId===e.subscription_id)}}function N_(i,t){if(i&1){let e=E();s(0,"div")(1,"div",12),p(2),M(3,"translate"),c(),y(4,E_,2,1,"div",13)(5,F_,2,0,"ng-template",null,0,Pe),s(7,"div",14)(8,"div",15)(9,"h3"),p(10,"Members"),c()(),s(11,"div",16)(12,"div",17),h(13,"i",18),s(14,"input",19),N("ngModelChange",function(o){b(e);let r=_();return z(r.searchQuery,o)||(r.searchQuery=o),C(o)}),v("input",function(){b(e);let o=_();return C(o.onSearchChange())}),c()(),s(15,"div",20)(16,"p-dropdown",21),N("ngModelChange",function(o){b(e);let r=_();return z(r.selectedStatus,o)||(r.selectedStatus=o),C(o)}),v("onChange",function(){b(e);let o=_();return C(o.onStatusChange())}),c()()(),s(17,"div",22)(18,"simple-grid",23),v("onEditTrigger",function(o){b(e);let r=_();return C(r.showEditDialog(o))})("onDeleteTrigger",function(o){b(e);let r=_();return C(r.deleteDialog(o))})("pageChange",function(o){b(e);let r=_();return C(r.onPageChange(o))})("contentPerPageChange",function(o){b(e);let r=_();return C(r.onPageSizeChange(o))}),c(),y(19,z_,4,1,"ng-template",null,1,Pe),c()()()}if(i&2){let e=ge(6),n=ge(20),o=_();d(2),T(" ",O(3,17,"groupManage.availability")," "),d(2),g("ngIf",o.groupAvailability.length>0)("ngIfElse",e),d(10),L("ngModel",o.searchQuery),d(2),st(se(19,pp)),g("options",o.statusOptions),L("ngModel",o.selectedStatus),g("panelStyle",se(20,mp)),d(2),g("dataSet",o.gridData)("columns",o.columns)("actionTemplate",n)("enableRowActions",!1)("pageIndex",o.pageIndex)("contentPerPage",o.pageSize)("totalRecords",o.totalRecords)("isShowSearch",!1)}}function B_(i,t){if(i&1){let e=E();s(0,"div",43),v("click",function(){b(e);let o=_();return C(o.closeViewModal())}),s(1,"div",44),v("click",function(o){return b(e),C(o.stopPropagation())}),s(2,"div",45)(3,"h2"),p(4,"Subscription Details"),c(),s(5,"button",46),v("click",function(){b(e);let o=_();return C(o.closeViewModal())}),h(6,"i",47),c()(),s(7,"div",48)(8,"div",49)(9,"h3"),p(10,"Member Information"),c(),s(11,"div",50)(12,"div",51)(13,"span",52),p(14,"Name:"),c(),s(15,"span",53),p(16),c()(),s(17,"div",51)(18,"span",52),p(19,"Mobile:"),c(),s(20,"span",53),p(21),c()(),s(22,"div",51)(23,"span",52),p(24,"Member ID:"),c(),s(25,"span",53),p(26),c()()()(),s(27,"div",49)(28,"h3"),p(29,"Subscription Information"),c(),s(30,"div",50)(31,"div",51)(32,"span",52),p(33,"ID:"),c(),s(34,"span",53),p(35),c()(),s(36,"div",51)(37,"span",52),p(38,"Order ID:"),c(),s(39,"span",53),p(40),c()(),s(41,"div",51)(42,"span",52),p(43,"Status:"),c(),s(44,"span",54),p(45),c()(),s(46,"div",51)(47,"span",52),p(48,"Plan:"),c(),s(49,"span",53),p(50),c()()()(),s(51,"div",49)(52,"h3"),p(53,"Billing Details"),c(),s(54,"div",50)(55,"div",51)(56,"span",52),p(57,"Amount:"),c(),s(58,"span",53),p(59),c()(),s(60,"div",51)(61,"span",52),p(62,"Billing Type:"),c(),s(63,"span",53),p(64),c()(),s(65,"div",51)(66,"span",52),p(67,"Billing Cycle:"),c(),s(68,"span",53),p(69),c()()()(),s(70,"div",49)(71,"h3"),p(72,"Dates"),c(),s(73,"div",50)(74,"div",51)(75,"span",52),p(76,"Start Date:"),c(),s(77,"span",53),p(78),M(79,"date"),c()(),s(80,"div",51)(81,"span",52),p(82,"End Date:"),c(),s(83,"span",53),p(84),M(85,"date"),c()()()()(),s(86,"div",55)(87,"button",56),v("click",function(){b(e);let o=_();return C(o.closeViewModal())}),c()()()()}if(i&2){let e=_();d(16),S(e.viewingSubscription.name),d(5),S(e.viewingSubscription.mobile_number),d(5),S(e.viewingSubscription.member_id),d(9),S(e.viewingSubscription.subscription_id),d(5),S(e.viewingSubscription.order_id),d(4),Mt(e.viewingSubscription.status),d(),S(e.viewingSubscription.status),d(5),S(e.viewingSubscription.plan_name),d(9),T("\u20B9",e.viewingSubscription.amount_paid,""),d(5),S(e.viewingSubscription.billing_type),d(5),S(e.viewingSubscription.billing_cycle),d(9),S(gt(79,14,e.viewingSubscription.start_date,"mediumDate")),d(6),S(gt(85,17,e.viewingSubscription.end_date,"mediumDate"))}}function j_(i,t){if(i&1){let e=E();s(0,"add-sales",57),v("onCancelTrigger",function(){b(e);let o=_();return C(o.visible=!1)}),c()}i&2&&g("defaultExpander",!0)("isHeaderClickBlockExpand",!0)}var Cr=class i{constructor(t,e,n,o,r,a,l){this.confirmationService=t;this.messageService=e;this.productService=n;this.authService=o;this.groupService=r;this.router=a;this.http=l}pageIndex=0;pageSize=10;totalRecords=0;rowToBeEdited;newOrderDialogEnable=!1;viewingSubscription=null;openMenuId=null;menuPosition={top:"0",left:"0"};visible=!1;confirmAmountDialog=!1;assign;orderType;assignees=[];orderTypes=[];groupAvailability=[];timeSlots=[];selectedService="";serviceOptions=[];selectedGroup=null;selectedStatus="";searchQuery="";allSubscriptions=[];groupOptions=[{label:"All Groups",value:""},{label:"Sunday batch",value:"sunday"},{label:"Weekend batch",value:"weekend"}];statusOptions=[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"},{label:"Expired",value:"expired"},{label:"All Statuses",value:"active,inactive,expired"}];columns=[{displayName:"Name",displayValue:"name"},{displayName:"Expires In",displayValue:"expires_in"},{displayName:"Status",displayValue:"status",dataType:"status_badge"},{displayName:"",displayValue:"action"}];gridData=[];actionItems=[];ngOnInit(){this.getServices(),this.gridData=[],this.actionItems=[{label:"View",icon:"pi pi-eye",command:()=>this.onQuickAction(this.selectedRow,"View")},{label:"Renew",icon:"pi pi-refresh",command:()=>this.onQuickAction(this.selectedRow,"Renew")},{label:"Remind",icon:"pi pi-bell",command:()=>this.onQuickAction(this.selectedRow,"Remind")},{label:"Delete",icon:"pi pi-trash",command:()=>this.deleteDialog(this.selectedRow)}],this.authService.providerChange$.subscribe(t=>{t&&(this.selectedService="",this.selectedGroup=null,this.selectedStatus="",this.searchQuery="",this.pageIndex=0,this.getServices(),this.gridData=[],this.allSubscriptions=[])})}editRow(t){console.log(t)}selectGroup(t){this.selectedGroup=t,this.loadAllSubscriptions()}getSubscriptions(){this.loadAllSubscriptions()}onStatusChange(){this.loadAllSubscriptions()}onSearchChange(){this.pageIndex=0,this.updateGridData()}onPaginationChange(t){}onPageChange(t){this.pageIndex=t,this.updateGridData()}onPageSizeChange(t){this.pageSize=t,this.pageIndex=0,this.updateGridData()}updateGridData(){let t=[...this.allSubscriptions||[]];if(this.searchQuery&&this.searchQuery.trim()!==""){let o=this.searchQuery.toLowerCase().trim();t=t.filter(r=>{let a=(r.name||"").toLowerCase(),l=(r.mobile_number||"").toLowerCase();return a.includes(o)||l.includes(o)})}this.totalRecords=t.length;let e=this.pageIndex*this.pageSize,n=e+this.pageSize;this.gridData=t.slice(e,n)}showEditDialog(t){this.visible=!0,this.rowToBeEdited=t}deleteDialog(t){let e=t instanceof Event?this.selectedRow:t;this.confirmationService.confirm({target:t instanceof Event?t.target:void 0,message:"Do you want to delete this record?",header:"Delete Confirmation",icon:"pi pi-info-circle",acceptButtonStyleClass:"p-button-danger p-button-text",rejectButtonStyleClass:"p-button-text p-button-text",acceptIcon:"none",rejectIcon:"none",accept:()=>{this.messageService.add({severity:"info",summary:"Confirmed",detail:"Record deleted"})},reject:()=>{}})}getServices(){let t=this.authService.getSelectedProviderId();if(t){let e={product_type:"subscription",limit:1e3};this.productService.listWithTotalForProvider(t,e).subscribe(n=>{if(console.log("Services API Response:",n),n&&n.data&&n.data.length>0){let o=n.data.map(r=>({label:r.product_name,value:r.product_id}));console.log("Mapped Services:",o),this.serviceOptions=o}else console.error("API Response missing data array:",n),this.messageService.add({severity:"error",summary:"Error",detail:"No products found for this provider"})},n=>{console.error("Services API Error:",n),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to fetch products"})})}}onServiceChange(){let t=this.authService.getSelectedProviderId();if(this.selectedGroup=null,this.selectedStatus="",this.searchQuery="",this.gridData=[],this.allSubscriptions=[],t&&this.selectedService){let e=Number(this.selectedService);this.groupService.getAvailability(t,e).subscribe(n=>{console.log("Group Availability API Response:",n),n&&n.length>0?this.groupAvailability=n.map(o=>H(U({},o),{label:o.group_name,count:`( ${o.occupied} / ${o.max_limit} )`})):this.groupAvailability=[]},n=>{console.error("Group Availability API Error:",n),this.groupAvailability=[]}),this.loadAllSubscriptions()}}loadAllSubscriptions(){let t=this.authService.getSelectedProviderId(),e=Number(this.selectedService);if(t&&e){let n={provider_id:t,product_id:e,status:this.selectedStatus||"active,inactive,expired"};this.selectedGroup&&(n.group_id=this.selectedGroup.group_id),console.log("Fetching subscriptions with params:",n),this.groupService.listSubscriptions(n).subscribe(o=>{console.log("Subscriptions Response:",o);let r=Array.isArray(o)?o:o?.data||[];if(r&&r.length>0){let a=r.map(l=>{let m=new Date(l.end_date),u=new Date,f=Math.abs(m.getTime()-u.getTime()),x=Math.ceil(f/(1e3*60*60*24)),k=u>m?`Expired ${x} days ago`:`${x} days`;return H(U({},l),{id:Number(l.subscription_id||l.id)||0,name:l.member_name||l.user_name||"Unknown",expires_in:k,status:l.status||"active",action:"viewTemplate",isActionEnabled:!1,order_id:l.order_id,subscription_id:l.subscription_id||l.id,billing_type:l.billing_type||"monthly",billing_cycle:l.billing_cycle||"pre_cycle",plan_id:l.plan_id,plan_name:l.plan_name||l.plan?.name,amount_paid:l.amount_paid||0,provider_id:l.provider_id||t,group_id:l.group_id||this.selectedGroup?.group_id,group_name:l.group?.group_name||this.selectedGroup?.group_name,member_id:l.member_id,mobile_number:l.mobile_number,start_date:l.start_date,end_date:l.end_date})});this.allSubscriptions=a,this.allSubscriptions=a,this.updateGridData(),this.searchQuery&&this.searchQuery.trim()!==""&&this.onSearchChange()}else this.allSubscriptions=[],this.gridData=[]},o=>{console.error("Subscription API Error:",o),this.allSubscriptions=[],this.gridData=[]})}}viewDialogVisible=!1;selectedRow;onQuickAction(t,e){e==="View"?(this.selectedRow=t,this.viewDialogVisible=!0):e==="Remind"?this.messageService.add({severity:"info",summary:"Remind",detail:"Reminder sent to "+t.name}):e==="Renew"&&this.messageService.add({severity:"info",summary:"Renew",detail:"Renew action triggered for "+t.name})}toggleMenu(t,e){if(e&&e.stopPropagation(),this.openMenuId===t)this.openMenuId=null;else if(this.openMenuId=t,e){let o=e.currentTarget.getBoundingClientRect();this.menuPosition={top:`${o.bottom+4}px`,left:`${o.right-140}px`}}}clickout(){this.openMenuId=null}viewSubscription(t){console.log("View subscription:",t),this.openMenuId=null,this.viewingSubscription=t}closeViewModal(){this.viewingSubscription=null}deleteSubscription(t){console.log("Delete subscription:",t),this.openMenuId=null,this.confirmationService.confirm({message:`Are you sure you want to delete the subscription for ${t.name}?`,header:"Delete Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{this.http.delete(`subscriptions/${t.id}?soft_delete=true`).pipe(qe(e=>(console.error("Error deleting subscription:",e),this.messageService.add({severity:"error",summary:"Delete Failed",detail:e.error?.message||"Failed to delete subscription. Please try again."}),De(null)))).subscribe(e=>{e&&(console.log("Subscription deleted successfully:",e),this.messageService.add({severity:"success",summary:"Deleted",detail:`Subscription for ${t.name} has been deleted successfully.`}),this.loadAllSubscriptions())})},reject:()=>{console.log("Delete cancelled")}})}renewSubscription(t){console.log("Renew subscription:",t),this.openMenuId=null;let e={id:t.plan_id,name:t.plan_name||"Subscription Plan",price:t.amount_paid||0,billing_type:t.billing_type||"monthly",billing_cycle:t.billing_cycle||"pre_cycle",provider_id:t.provider_id||this.authService.getSelectedProviderId(),group_ids:[{group_id:t.group_id,group_name:t.group_name||""}]},n={group_id:t.group_id,group_name:t.group_name||""},o={product_id:this.selectedService,product_subtype:"service_subscription"},a={isProvider:!0,data:{plan:e,group:n,selectedProduct:o,subscription:t,isExistingMember:!0,member:{member_id:t.member_id,member_name:t.name,mobile_number:t.mobile_number},isRenewal:!0}};sessionStorage.setItem("checkout_navigation_state",JSON.stringify(a)),console.log("Navigating to checkout for renewal:",a),this.router.navigate(["providers/info/view-cart"],{state:a})}remindSubscription(t){console.log("Remind subscription:",t),this.openMenuId=null,this.confirmationService.confirm({message:`Send a reminder to ${t.name} about their expired subscription?`,header:"Send Reminder",icon:"pi pi-bell",accept:()=>{console.log("Sending reminder to:",{member_name:t.name,mobile_number:t.mobile_number,subscription_id:t.id}),this.messageService.add({severity:"success",summary:"Reminder Sent",detail:`Reminder sent successfully to ${t.name} at ${t.mobile_number}`})},reject:()=>{console.log("Reminder cancelled")}})}markAsPaid(t){console.log("Mark as paid:",t),this.openMenuId=null,this.confirmationService.confirm({message:`Mark subscription for ${t.name} as paid?`,header:"Mark as Paid",icon:"pi pi-check-circle",accept:()=>{let e={payment_status:"paid",payment_info:{status:"paid"}};this.http.patch(`provider/${t.provider_id}/orders/${t.order_id}`,e).pipe(qe(n=>(console.error("Error marking order as paid:",n),this.messageService.add({severity:"error",summary:"Update Failed",detail:n.error?.message||"Failed to mark order as paid. Please try again."}),De(null)))).subscribe(n=>{n&&(console.log("Order marked as paid successfully:",n),this.messageService.add({severity:"success",summary:"Updated",detail:`Order for ${t.name} has been marked as paid.`}),this.loadAllSubscriptions())})},reject:()=>{console.log("Mark as paid cancelled")}})}payInAdvance(t){console.log("Pay in advance:",t),this.openMenuId=null;let e={id:t.plan_id,name:t.plan_name||"Subscription Plan",price:t.amount_paid||0,billing_type:t.billing_type||"monthly",billing_cycle:t.billing_cycle||"pre_cycle",provider_id:t.provider_id||this.authService.getSelectedProviderId(),group_ids:[{group_id:t.group_id,group_name:t.group_name||""}]},n={group_id:t.group_id,group_name:t.group_name||""},o={product_id:this.selectedService,product_subtype:"service_subscription"},a={isProvider:!0,data:{plan:e,group:n,selectedProduct:o,subscription:t,isExistingMember:!0,member:{member_id:t.member_id,member_name:t.name,mobile_number:t.mobile_number},isPayInAdvance:!0}};sessionStorage.setItem("checkout_navigation_state",JSON.stringify(a)),console.log("Navigating to checkout for pay in advance:",a),this.router.navigate(["providers/info/view-cart"],{state:a})}getRowKeys(t){return t?Object.keys(t).filter(e=>!["isActionEnabled","action","flag","quickAction","name","assign","orders","subName"].includes(e)):[]}static \u0275fac=function(e){return new(e||i)(w(pe),w(kt),w(It),w(G),w(Sn),w(le),w(di))};static \u0275cmp=R({type:i,selectors:[["group-manage"]],hostBindings:function(e,n){e&1&&v("click",function(){return n.clickout()},!1,Ts)},decls:12,vars:15,consts:[["noData",""],["actionTemplate",""],[1,"group-manage-container"],[1,"service-selector"],["optionLabel","label","optionValue","value","placeholder","Select a Service",1,"service-dropdown",3,"ngModelChange","onChange","options","ngModel","panelStyle"],["class","service-selector-note",4,"ngIf"],[4,"ngIf"],["class","modal-backdrop",3,"click",4,"ngIf"],[3,"visibleChange","modal","visible"],["pTemplate","headless"],[1,"service-selector-note"],[1,"pi","pi-info-circle"],[1,"header"],["class","group-availability-container",4,"ngIf","ngIfElse"],[1,"members-section"],[1,"section-header"],[1,"filter-controls"],[1,"search-wrapper"],[1,"pi","pi-search","search-icon"],["type","text","placeholder","Search by name or mobile number",1,"search-input",3,"ngModelChange","input","ngModel"],[1,"status-filter-wrapper"],["optionLabel","label","optionValue","value","placeholder","Filter by Status",1,"status-dropdown",3,"ngModelChange","onChange","options","ngModel","panelStyle"],[1,"table-wrapper"],[3,"onEditTrigger","onDeleteTrigger","pageChange","contentPerPageChange","dataSet","columns","actionTemplate","enableRowActions","pageIndex","contentPerPage","totalRecords","isShowSearch"],[1,"group-availability-container"],["class","availability-badge",3,"active","click",4,"ngFor","ngForOf"],[1,"availability-badge",3,"click"],[1,"badge-label"],[1,"badge-count"],[1,"no-data-message"],[1,"action-buttons-container"],[1,"action-btn-icon","menu-trigger",3,"click"],[1,"pi","pi-ellipsis-v"],["class","menu-dropdown",3,"top","left","click",4,"ngIf"],[1,"menu-dropdown",3,"click"],[1,"menu-item",3,"click"],[1,"pi","pi-eye"],[1,"pi","pi-trash"],["class","menu-item",3,"click",4,"ngIf"],[1,"pi","pi-refresh"],[1,"pi","pi-bell"],[1,"pi","pi-credit-card"],[1,"pi","pi-check-circle"],[1,"modal-backdrop",3,"click"],[1,"modal-container","view-subscription-modal",3,"click"],[1,"modal-header"],[1,"modal-close-btn",3,"click"],[1,"pi","pi-times"],[1,"modal-body"],[1,"detail-section"],[1,"detail-grid"],[1,"detail-row"],[1,"detail-label"],[1,"detail-value"],[1,"status-badge"],[1,"modal-footer"],["pButton","","label","Close",1,"p-button-secondary",3,"click"],[3,"onCancelTrigger","defaultExpander","isHeaderClickBlockExpand"]],template:function(e,n){e&1&&(s(0,"div",2)(1,"div",3)(2,"label"),p(3,"Service"),c(),s(4,"p-dropdown",4),N("ngModelChange",function(r){return z(n.selectedService,r)||(n.selectedService=r),r}),v("onChange",function(){return n.onServiceChange()}),c(),y(5,I_,3,0,"p",5),c(),y(6,N_,21,21,"div",6),c(),h(7,"p-toast")(8,"p-confirmDialog"),y(9,B_,88,20,"div",7),s(10,"p-dialog",8),N("visibleChange",function(r){return z(n.visible,r)||(n.visible=r),r}),y(11,j_,1,2,"ng-template",9),c()),e&2&&(d(4),st(se(12,pp)),g("options",n.serviceOptions),L("ngModel",n.selectedService),g("panelStyle",se(13,mp)),d(),g("ngIf",!n.selectedService),d(),g("ngIf",n.selectedService),d(3),g("ngIf",n.viewingSubscription),d(),st(se(14,k_)),g("modal",!0),L("visible",n.visible))},dependencies:[ee,W,Re,Mn,Pn,Ve,Z,Y,_e,On,he,wn,Ti,Zt,ce],styles:[".group-manage-container[_ngcontent-%COMP%]{padding-bottom:4rem}.group-manage-container[_ngcontent-%COMP%]   .service-selector[_ngcontent-%COMP%]{margin-bottom:1.5rem;position:relative}.group-manage-container[_ngcontent-%COMP%]   .service-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:#171a1f;font-size:.875rem;font-weight:600;margin-bottom:.5rem;letter-spacing:.02em}.group-manage-container[_ngcontent-%COMP%]   .service-selector[_ngcontent-%COMP%]   .service-dropdown[_ngcontent-%COMP%]{width:100%}.group-manage-container[_ngcontent-%COMP%]   .service-selector[_ngcontent-%COMP%]   .service-dropdown[_ngcontent-%COMP%]     .p-dropdown{width:100%;border-radius:.5rem;border:1px solid #E2E8F0;transition:all .2s ease-in-out;background:#fff;box-shadow:0 1px 2px #0000000d}.group-manage-container[_ngcontent-%COMP%]   .service-selector[_ngcontent-%COMP%]   .service-dropdown[_ngcontent-%COMP%]     .p-dropdown:hover{border-color:#5d157c}.group-manage-container[_ngcontent-%COMP%]   .service-selector[_ngcontent-%COMP%]   .service-dropdown[_ngcontent-%COMP%]     .p-dropdown.p-focus{border-color:#5d157c;box-shadow:0 0 0 2px #5d157c26}.group-manage-container[_ngcontent-%COMP%]   .service-selector[_ngcontent-%COMP%]   .service-dropdown[_ngcontent-%COMP%]     .p-dropdown .p-dropdown-label{padding:.75rem 1rem;font-size:.875rem;font-weight:500;color:#1e293b}.group-manage-container[_ngcontent-%COMP%]   .service-selector[_ngcontent-%COMP%]   .service-dropdown[_ngcontent-%COMP%]     .p-dropdown .p-dropdown-trigger{width:2.5rem;color:#64748b}.group-manage-container[_ngcontent-%COMP%]   .service-selector[_ngcontent-%COMP%]   .service-dropdown[_ngcontent-%COMP%]     .p-dropdown .p-dropdown-panel{border-radius:.5rem;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.group-manage-container[_ngcontent-%COMP%]   .service-selector[_ngcontent-%COMP%]   .service-dropdown[_ngcontent-%COMP%]     .p-dropdown .p-dropdown-panel .p-dropdown-items .p-dropdown-item{padding:.75rem 1rem;font-size:.875rem}.group-manage-container[_ngcontent-%COMP%]   .service-selector[_ngcontent-%COMP%]   .service-dropdown[_ngcontent-%COMP%]     .p-dropdown .p-dropdown-panel .p-dropdown-items .p-dropdown-item.p-highlight{background:#f9f2fd;color:#5d157c}.group-manage-container[_ngcontent-%COMP%]   .service-selector[_ngcontent-%COMP%]   .service-selector-note[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-top:.75rem;padding:.75rem 1rem;background:#eff6ff;border-left:3px solid #3B82F6;border-radius:.375rem;color:#1e40af;font-size:.875rem;line-height:1.5}.group-manage-container[_ngcontent-%COMP%]   .service-selector[_ngcontent-%COMP%]   .service-selector-note[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem;color:#3b82f6;flex-shrink:0}@media (min-width: 768px){.group-manage-container[_ngcontent-%COMP%]   .service-selector[_ngcontent-%COMP%]{max-width:350px}}.group-manage-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{color:#4f126a;font-size:1rem;font-weight:700;margin-top:1rem;margin-bottom:.5rem}.group-manage-container[_ngcontent-%COMP%]   .group-availability-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:1rem;align-items:center}.group-manage-container[_ngcontent-%COMP%]   .group-availability-container[_ngcontent-%COMP%]   .availability-badge[_ngcontent-%COMP%]{background:#f9f2fd;border:1px solid #5d157c;border-radius:8px;padding:.5rem 1rem;display:flex;align-items:center;gap:.5rem;transition:all .2s ease;cursor:pointer}.group-manage-container[_ngcontent-%COMP%]   .group-availability-container[_ngcontent-%COMP%]   .availability-badge[_ngcontent-%COMP%]:hover{background:#f3e5f5;transform:translateY(-1px);box-shadow:0 2px 4px #5d157c1a}.group-manage-container[_ngcontent-%COMP%]   .group-availability-container[_ngcontent-%COMP%]   .availability-badge.active[_ngcontent-%COMP%]{background:#5d157c;border-color:#5d157c}.group-manage-container[_ngcontent-%COMP%]   .group-availability-container[_ngcontent-%COMP%]   .availability-badge.active[_ngcontent-%COMP%]   .badge-label[_ngcontent-%COMP%]{color:#fff}.group-manage-container[_ngcontent-%COMP%]   .group-availability-container[_ngcontent-%COMP%]   .availability-badge.active[_ngcontent-%COMP%]   .badge-count[_ngcontent-%COMP%]{background:#fff3;color:#fff}.group-manage-container[_ngcontent-%COMP%]   .group-availability-container[_ngcontent-%COMP%]   .availability-badge[_ngcontent-%COMP%]   .badge-label[_ngcontent-%COMP%]{color:#333;font-weight:500;font-size:.9rem}.group-manage-container[_ngcontent-%COMP%]   .group-availability-container[_ngcontent-%COMP%]   .availability-badge[_ngcontent-%COMP%]   .badge-count[_ngcontent-%COMP%]{color:#5d157c;font-weight:600;font-size:.85rem;background:#5d157c1a;padding:2px 8px;border-radius:12px}.group-manage-container[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]{color:#6b7280;font-size:.875rem;text-align:center;padding:1rem;background:#f9fafb;border-radius:.5rem;margin-bottom:1rem}.group-manage-container[_ngcontent-%COMP%]   .time-slot-container[_ngcontent-%COMP%]{margin-bottom:1rem}.group-manage-container[_ngcontent-%COMP%]   .time-slot-container[_ngcontent-%COMP%]   .time-slot[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.25rem}.group-manage-container[_ngcontent-%COMP%]   .time-slot-container[_ngcontent-%COMP%]   .time-slot[_ngcontent-%COMP%]   .time-displayer[_ngcontent-%COMP%]{border-radius:1.5rem;min-width:6.5rem;border:1.5px solid #5d157c;text-align:center;padding:.4rem .75rem;background:#fff}.group-manage-container[_ngcontent-%COMP%]   .time-slot-container[_ngcontent-%COMP%]   .time-slot[_ngcontent-%COMP%]   .time-displayer[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#5d157c;font-weight:600;font-size:.875rem}.group-manage-container[_ngcontent-%COMP%]   .time-slot-container[_ngcontent-%COMP%]   .time-slot[_ngcontent-%COMP%]   .time-displayer[_ngcontent-%COMP%]   .load[_ngcontent-%COMP%]{color:#5d157c;font-weight:700;font-size:.875rem;margin-left:.25rem}.group-manage-container[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem}.group-manage-container[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.group-manage-container[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#171a1f;font-size:.875rem;font-weight:600}.group-manage-container[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #dee1e6;border-radius:.375rem;background:#fff;color:#171a1f;font-size:.875rem;min-width:150px;cursor:pointer}.group-manage-container[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#5d157c}.group-manage-container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]{margin-top:1.5rem}.group-manage-container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.group-manage-container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#4f126a;font-size:1rem;font-weight:700;margin:0}.group-manage-container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .filter-controls[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:.75rem;margin-bottom:1rem;align-items:center}.group-manage-container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .filter-controls[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{position:relative;flex:1;min-width:0}.group-manage-container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .filter-controls[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;top:50%;transform:translateY(-50%);color:#64748b;font-size:.875rem;pointer-events:none}.group-manage-container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .filter-controls[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem .75rem 2.75rem;border:1px solid #E2E8F0;border-radius:.5rem;font-size:.875rem;color:#1e293b;transition:all .2s ease-in-out;background:#fff;box-shadow:0 1px 2px #0000000d}.group-manage-container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .filter-controls[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#94a3b8}.group-manage-container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .filter-controls[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#5d157c;box-shadow:0 0 0 2px #5d157c26}.group-manage-container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .filter-controls[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:hover{border-color:#cbd5e1}.group-manage-container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .filter-controls[_ngcontent-%COMP%]   .status-filter-wrapper[_ngcontent-%COMP%]{flex:0 0 auto;width:180px}.group-manage-container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .filter-controls[_ngcontent-%COMP%]   .status-filter-wrapper[_ngcontent-%COMP%]   .status-dropdown[_ngcontent-%COMP%]{width:100%}.group-manage-container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .filter-controls[_ngcontent-%COMP%]   .status-filter-wrapper[_ngcontent-%COMP%]   .status-dropdown[_ngcontent-%COMP%]     .p-dropdown{width:100%;border-radius:.5rem;border:1px solid #E2E8F0;transition:all .2s ease-in-out;background:#fff;box-shadow:0 1px 2px #0000000d}.group-manage-container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .filter-controls[_ngcontent-%COMP%]   .status-filter-wrapper[_ngcontent-%COMP%]   .status-dropdown[_ngcontent-%COMP%]     .p-dropdown:hover{border-color:#5d157c}.group-manage-container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .filter-controls[_ngcontent-%COMP%]   .status-filter-wrapper[_ngcontent-%COMP%]   .status-dropdown[_ngcontent-%COMP%]     .p-dropdown.p-focus{border-color:#5d157c;box-shadow:0 0 0 2px #5d157c26}.group-manage-container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .filter-controls[_ngcontent-%COMP%]   .status-filter-wrapper[_ngcontent-%COMP%]   .status-dropdown[_ngcontent-%COMP%]     .p-dropdown .p-dropdown-label{padding:.75rem 1rem;font-size:.875rem;font-weight:500;color:#1e293b}.group-manage-container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .filter-controls[_ngcontent-%COMP%]   .status-filter-wrapper[_ngcontent-%COMP%]   .status-dropdown[_ngcontent-%COMP%]     .p-dropdown .p-dropdown-trigger{width:2.5rem;color:#64748b}.group-manage-container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .filter-controls[_ngcontent-%COMP%]   .status-filter-wrapper[_ngcontent-%COMP%]   .status-dropdown[_ngcontent-%COMP%]     .p-dropdown .p-dropdown-panel{border-radius:.5rem;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.group-manage-container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .filter-controls[_ngcontent-%COMP%]   .status-filter-wrapper[_ngcontent-%COMP%]   .status-dropdown[_ngcontent-%COMP%]     .p-dropdown .p-dropdown-panel .p-dropdown-items .p-dropdown-item{padding:.75rem 1rem;font-size:.875rem}.group-manage-container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .filter-controls[_ngcontent-%COMP%]   .status-filter-wrapper[_ngcontent-%COMP%]   .status-dropdown[_ngcontent-%COMP%]     .p-dropdown .p-dropdown-panel .p-dropdown-items .p-dropdown-item.p-highlight{background:#f9f2fd;color:#5d157c}@media (min-width: 768px){.group-manage-container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .filter-controls[_ngcontent-%COMP%]   .status-filter-wrapper[_ngcontent-%COMP%]{width:200px}}.group-manage-container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .status-prompt[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:1rem;background:#fef3c7;border-left:3px solid #F59E0B;border-radius:.375rem;color:#92400e;font-size:.875rem;margin-bottom:1rem}.group-manage-container[_ngcontent-%COMP%]   .members-section[_ngcontent-%COMP%]   .status-prompt[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem;color:#f59e0b;flex-shrink:0}.group-manage-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]{margin-bottom:1rem}.group-manage-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .tr-action-table[_ngcontent-%COMP%]{border-bottom:1px solid #f3f4f6}.group-manage-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .tr-action-table[_ngcontent-%COMP%]   .td-name[_ngcontent-%COMP%]{padding:1rem .5rem}.group-manage-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .tr-action-table[_ngcontent-%COMP%]   .td-name[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:#171a1f;font-weight:400;font-size:.875rem}.group-manage-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .tr-action-table[_ngcontent-%COMP%]   .td-status[_ngcontent-%COMP%]{padding:1rem .5rem}.group-manage-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .tr-action-table[_ngcontent-%COMP%]   .td-status[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:.375rem 1rem;border-radius:1.25rem;font-size:.75rem;font-weight:600;display:inline-block}.group-manage-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .tr-action-table[_ngcontent-%COMP%]   .td-status[_ngcontent-%COMP%]   .status-badge.expired[_ngcontent-%COMP%], .group-manage-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .tr-action-table[_ngcontent-%COMP%]   .td-status[_ngcontent-%COMP%]   .status-badge.active[_ngcontent-%COMP%]{background:#fff;color:#171a1f;border:1px solid #171a1f}.group-manage-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .tr-action-table[_ngcontent-%COMP%]   .td-details[_ngcontent-%COMP%]{padding:1rem .5rem;text-align:right}.group-manage-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .tr-action-table[_ngcontent-%COMP%]   .td-details[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{padding:.375rem 1rem;border-radius:1.25rem;font-size:.75rem;font-weight:600;border:none;cursor:pointer;min-width:70px}.group-manage-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .tr-action-table[_ngcontent-%COMP%]   .td-details[_ngcontent-%COMP%]   .action-btn.remind[_ngcontent-%COMP%], .group-manage-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .tr-action-table[_ngcontent-%COMP%]   .td-details[_ngcontent-%COMP%]   .action-btn.paid[_ngcontent-%COMP%], .group-manage-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .tr-action-table[_ngcontent-%COMP%]   .td-details[_ngcontent-%COMP%]   .action-btn.view[_ngcontent-%COMP%]{background:#5d157c;color:#fff}.group-manage-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .tr-action-table[_ngcontent-%COMP%]   .td-details[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover{opacity:.9}.group-manage-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .action-row[_ngcontent-%COMP%]   .action-container[_ngcontent-%COMP%]{background:#f9f2fd;padding:1rem}.group-manage-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .action-row[_ngcontent-%COMP%]   .action-container[_ngcontent-%COMP%]   .action-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.group-manage-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .action-row[_ngcontent-%COMP%]   .action-container[_ngcontent-%COMP%]   .action-header[_ngcontent-%COMP%]   .action-title[_ngcontent-%COMP%]{color:#171a1f;font-size:.875rem;font-weight:700}.group-manage-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .action-row[_ngcontent-%COMP%]   .action-container[_ngcontent-%COMP%]   .action-btn-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin:1rem 0;gap:.25rem}.group-manage-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .action-row[_ngcontent-%COMP%]   .action-container[_ngcontent-%COMP%]   .action-btn-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#5d157c;color:#fff;padding:0 1rem;border-radius:6px;height:1.8rem;font-size:.875rem}.group-manage-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .action-row[_ngcontent-%COMP%]   .action-container[_ngcontent-%COMP%]   .action-btn-container[_ngcontent-%COMP%]   button.remove-btn[_ngcontent-%COMP%]{color:#de3b40;border:1px solid #de3b40;background-color:#fff}.group-manage-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .action-row[_ngcontent-%COMP%]   .action-container[_ngcontent-%COMP%]   .action-btn-container[_ngcontent-%COMP%]   button.accept[_ngcontent-%COMP%]{background:#28a745;color:#fff;border:none;border-radius:6px;padding:8px 12px;height:1.8rem;min-width:40px;display:flex;align-items:center;justify-content:center;margin:0 .4rem}.group-manage-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .action-row[_ngcontent-%COMP%]   .action-container[_ngcontent-%COMP%]   .action-btn-container[_ngcontent-%COMP%]   button.accept[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.group-manage-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .action-row[_ngcontent-%COMP%]   .action-container[_ngcontent-%COMP%]   .action-btn-container[_ngcontent-%COMP%]   button.accept[_ngcontent-%COMP%]:hover{background:#218838;transform:translateY(-1px);box-shadow:0 2px 8px #28a7454d}.group-manage-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .action-row[_ngcontent-%COMP%]   .action-container[_ngcontent-%COMP%]   .action-btn-container[_ngcontent-%COMP%]   button.reject[_ngcontent-%COMP%]{background:#dc3545;color:#fff;border:none;border-radius:6px;padding:8px 12px;height:1.8rem;min-width:40px;display:flex;align-items:center;justify-content:center;margin:0 .4rem}.group-manage-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .action-row[_ngcontent-%COMP%]   .action-container[_ngcontent-%COMP%]   .action-btn-container[_ngcontent-%COMP%]   button.reject[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.group-manage-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .action-row[_ngcontent-%COMP%]   .action-container[_ngcontent-%COMP%]   .action-btn-container[_ngcontent-%COMP%]   button.reject[_ngcontent-%COMP%]:hover{background:#c82333;transform:translateY(-1px);box-shadow:0 2px 8px #dc35454d}.subscription-details-container[_ngcontent-%COMP%]{font-family:Inter,sans-serif;color:#171a1f}.subscription-details-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-bottom:.5rem;margin-bottom:.5rem;border-bottom:1px solid #f3f4f6}.subscription-details-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:700;color:#5d157c;margin-bottom:.25rem}.subscription-details-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .plan-badge[_ngcontent-%COMP%]{background:#f9f2fd;color:#5d157c;padding:.25rem .75rem;border-radius:1rem;font-size:.75rem;font-weight:600;border:1px solid #e9d5ff}.subscription-details-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:.375rem 1rem;border-radius:1.25rem;font-size:.875rem;font-weight:600;text-transform:capitalize}.subscription-details-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .status-badge.active[_ngcontent-%COMP%]{background-color:#d1fae5;color:#065f46;border:1px solid #a7f3d0}.subscription-details-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .status-badge.expired[_ngcontent-%COMP%]{background-color:#f3f4f6;color:#374151;border:1px solid #d1d5db}.subscription-details-container[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem}.subscription-details-container[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.75rem;font-weight:600;color:#6b7280;margin-bottom:.25rem;text-transform:uppercase;letter-spacing:.05em}.subscription-details-container[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:#111827}.subscription-details-container[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem;font-size:1.1rem}.action-buttons-container[_ngcontent-%COMP%]{position:relative}.menu-trigger[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:.5rem;border-radius:50%;transition:background-color .2s}.menu-trigger[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}.menu-dropdown[_ngcontent-%COMP%]{position:fixed;background:#fff;border-radius:8px;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f;padding:.5rem;z-index:1000;min-width:160px;border:1px solid #e5e7eb}.menu-dropdown[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;padding:.5rem 1rem;border:none;background:none;cursor:pointer;text-align:left;color:#374151;border-radius:4px;font-size:.875rem;transition:background-color .2s}.menu-dropdown[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}.menu-dropdown[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.75rem;font-size:1rem;color:#6b7280}.menu-dropdown[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1100}.modal-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;width:90%;max-width:500px;max-height:90vh;display:flex;flex-direction:column;overflow:hidden}.modal-container.view-subscription-modal[_ngcontent-%COMP%]{max-width:600px}.modal-container[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.25rem 1.5rem;border-bottom:1px solid #e5e7eb}.modal-container[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:#111827}.modal-container[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .modal-close-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;color:#9ca3af;padding:.5rem;border-radius:50%;transition:all .2s}.modal-container[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .modal-close-btn[_ngcontent-%COMP%]:hover{background-color:#f3f4f6;color:#4b5563}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:1.5rem;overflow-y:auto;flex:1}.modal-container[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-top:1px solid #e5e7eb;display:flex;justify-content:flex-end;gap:.75rem;background-color:#f9fafb}.detail-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.detail-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.detail-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#374151;margin-bottom:.75rem;padding-bottom:.5rem;border-bottom:1px solid #e5e7eb}.detail-section[_ngcontent-%COMP%]   .detail-grid[_ngcontent-%COMP%]{display:grid;gap:.75rem}.detail-section[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.detail-section[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280}.detail-section[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#111827;text-align:right}.status-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:9999px;font-size:.75rem;font-weight:500;text-transform:capitalize}.status-badge.active[_ngcontent-%COMP%], .status-badge.paid[_ngcontent-%COMP%]{background-color:#d1fae5;color:#065f46}.status-badge.inactive[_ngcontent-%COMP%], .status-badge.pending[_ngcontent-%COMP%]{background-color:#f3f4f6;color:#374151}.status-badge.expired[_ngcontent-%COMP%], .status-badge.cancelled[_ngcontent-%COMP%]{background-color:#fee2e2;color:#b91c1c}.status-badge.upcoming[_ngcontent-%COMP%]{background-color:#e0f2fe;color:#0369a1}"]})};var G_=["navTabsContainer"],q_=i=>["/providers",i];function W_(i,t){i&1&&(s(0,"div",4),h(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",7),c())}function H_(i,t){if(i&1){let e=E();s(0,"div",21)(1,"button",22),v("click",function(){b(e);let o=_(3);return C(o.logout())}),p(2),M(3,"translate"),c()()}i&2&&(d(2),T(" ",O(3,1,"admin.logout")," "))}function $_(i,t){if(i&1&&(s(0,"header",15)(1,"div",16)(2,"h1"),p(3),M(4,"translate"),c(),s(5,"div",17)(6,"span",18),p(7),M(8,"translate"),c(),s(9,"span",19),p(10),M(11,"number"),c()(),y(12,H_,4,3,"div",20),c()()),i&2){let e=_(2);d(3),Qe("",O(4,5,"admin.hello")," ",e.userName,""),d(4),S(O(8,7,"admin.earnings")),d(3),T("\u20B9",O(11,9,e.monthlyEarning),""),d(2),g("ngIf",e.platform.isBrowser)}}function Y_(i,t){if(i&1&&(s(0,"div",25)(1,"mat-icon",26),p(2),c(),s(3,"div",27)(4,"p"),p(5),c(),s(6,"h3"),p(7),M(8,"number"),c()()()),i&2){let e=t.$implicit;j("warning",e.color==="warning"),d(2),S(e.mat_icon),d(3),S(e.label),d(2),S(O(8,5,e.value))}}function K_(i,t){if(i&1&&(s(0,"div",23),y(1,Y_,9,7,"div",24),c()),i&2){let e=_(2);d(),g("ngForOf",e.stats)}}function X_(i,t){if(i&1){let e=E();s(0,"button",28),v("click",function(){let o=b(e).$implicit,r=_(2);return C(r.setActiveTab(o))}),p(1),c()}if(i&2){let e=t.$implicit,n=_(2);j("active",n.activeTab===e),d(),T(" ",e," ")}}function Q_(i,t){if(i&1&&(s(0,"div",35)(1,"div",36)(2,"mat-icon",26),p(3),c(),s(4,"h3"),p(5),c()(),s(6,"p"),p(7),c()()),i&2){let e=t.$implicit;g("routerLink",ln(4,q_,e.link)),d(3),S(e.mat_icon),d(2),S(e.title),d(2),S(e.description)}}function J_(i,t){if(i&1){let e=E();s(0,"button",40),v("click",function(){let o=b(e).$implicit,r=_(4);return C(r.setupLink(o))}),s(1,"mat-icon",26),p(2),c(),p(3),c()}if(i&2){let e=t.$implicit;d(2),S(e.mat_icon),d(),T(" ",e.label," ")}}function Z_(i,t){if(i&1&&(s(0,"section",29)(1,"h2",37),p(2),c(),s(3,"div",38),y(4,J_,4,2,"button",39),c()()),i&2){let e=t.$implicit;d(),g("ngClass",e.className),d(),T(" ",e.header," "),d(2),g("ngForOf",e.entity)}}function eh(i,t){if(i&1){let e=E();s(0,"div",42),v("click",function(){let o=b(e).$implicit,r=_(4);return C(r.goToInfo(o.link))}),s(1,"div",36)(2,"mat-icon",26),p(3),c(),s(4,"h3"),p(5),c()(),s(6,"p"),p(7),c()()}if(i&2){let e=t.$implicit;d(3),S(e.mat_icon),d(2),S(e.title),d(2),S(e.desc)}}function th(i,t){if(i&1&&(s(0,"section",29)(1,"h2"),p(2),M(3,"translate"),c(),s(4,"div",31),y(5,eh,8,3,"div",41),c()()),i&2){let e=_(3);d(2),S(O(3,2,"admin.about_us_setup")),d(3),g("ngForOf",e.buisnessSetupCards)}}function nh(i,t){if(i&1&&(et(0),s(1,"section",29)(2,"h2",30),p(3),M(4,"translate"),c(),s(5,"div",31),y(6,Q_,8,6,"div",32),c()(),y(7,Z_,5,3,"section",33)(8,th,6,4,"section",34),tt()),i&2){let e=_(2);d(3),T(" ",O(4,4,"admin.daily_transactions")," "),d(3),g("ngForOf",e.dailyTransactions),d(),g("ngForOf",e.setupSections),d(),g("ngIf",e.role=="admin"||e.role=="")}}function ih(i,t){i&1&&h(0,"business-dashboard")}function oh(i,t){i&1&&h(0,"orders-overview")}function rh(i,t){i&1&&h(0,"order-dues")}function ah(i,t){i&1&&h(0,"order-slots")}function sh(i,t){i&1&&h(0,"group-manage")}function ch(i,t){if(i&1&&h(0,"my-transactions",43),i&2){let e=_(2);g("providerId",e.currentProviderId)}}function dh(i,t){if(i&1){let e=E();s(0,"div"),y(1,$_,13,11,"header",8)(2,K_,2,1,"div",9),s(3,"nav",10)(4,"div",11,0),y(6,X_,2,3,"button",12),c()(),s(7,"div",13),v("touchstart",function(o){b(e);let r=_();return C(r.onTouchStart(o))})("touchend",function(o){b(e);let r=_();return C(r.onTouchEnd(o))}),y(8,nh,9,6,"ng-container",3)(9,ih,1,0,"business-dashboard",3)(10,oh,1,0,"orders-overview",3)(11,rh,1,0,"order-dues",3)(12,ah,1,0,"order-slots",3)(13,sh,1,0,"group-manage",3)(14,ch,1,1,"my-transactions",14),c()()}if(i&2){let e=_();d(),g("ngIf",e.role=="admin"||e.role==""),d(),g("ngIf",e.role=="admin"||e.role==""),d(4),g("ngForOf",e.navTabs),d(2),g("ngIf",e.activeTab=="Explore"),d(),g("ngIf",e.activeTab==="Dashboards"),d(),g("ngIf",e.activeTab==="Orders"),d(),g("ngIf",e.activeTab==="Dues"),d(),g("ngIf",e.activeTab==="Slots"),d(),g("ngIf",e.activeTab==="Group"),d(),g("ngIf",e.activeTab==="Transaction")}}var vr=class i{constructor(t,e,n,o,r){this.router=t;this.route=e;this.dashboardService=n;this.authService=o;this.platform=r;try{let a=this.router.getCurrentNavigation();if(!a)return;let l=a.extras?.state;l&&(this.userTabAccess=l.userTabAccess,this.accessibleTabs=this.userTabAccess?.tabs||[],this.role=l.card?.role,this.filterNavTabs(),this.filterSetupSections(),this.filterDailyTransactions())}catch(a){console.error("\u274C Exception caught:",a)}}navTabsContainer;touchStartY=0;touchEndY=0;touchStartX=0;touchEndX=0;userName="";monthlyEarning=0;currentProviderId=0;setupSections=[];orderSummaryDetail;userTabAccess=null;accessibleTabs=[];role="";businessType=[];providerChangeSubscription;loading=!1;stats=[{label:"Orders",value:1e4,icon:"cube",mat_icon:"store"},{label:"Delivered",value:9500,icon:"truck",mat_icon:"local_shipping"},{label:"Pending",value:500,icon:"clock",color:"warning",mat_icon:"pending_actions"},{label:"Overdue",value:400,icon:"clock",color:"warning",mat_icon:"hourglass_bottom"}];navTabs=["Explore","Orders","Dashboards","Dues","Slots","Group","Transaction"];dailyTransactions=[{title:"Sales",description:"Monitor revenue and performance",icon:"shopping-bag",mat_icon:"shopping_bag_outline",link:"add-sales"},{title:"Expense",description:"Log and track costs and optimize budgeting",icon:"credit-card",mat_icon:"receipt_long",link:"expenses"},{title:"Member",description:"Manage member subscriptions and engagement",icon:"users",mat_icon:"group",link:"members"},{title:"Product",description:"Handle inquiries and enhance customer service",icon:"help-circle",mat_icon:"inventory_2",link:"product"}];productSetup=[{label:"Category Setup",mat_icon:"category",link:"category"},{label:"Slots Setting",mat_icon:"schedule",link:"slots"}];subscriptionSetup=[{label:"Card Setup",mat_icon:"badge",link:"member-card-setup"},{label:"Add Group",mat_icon:"group_add",link:"group"},{label:"Subscription Setup",mat_icon:"badge",link:"subscription-setup"}];adminSetup=[{label:"Factory Setting",mat_icon:"settings",link:"settings"},{label:"Add Employee",mat_icon:"person_add",link:"employee-setup"},{label:"Enquiry",mat_icon:"assignment_ind",link:"enquiry"},{label:"Approval",mat_icon:"credit_card",link:"approval"},{label:"Registration Setup",mat_icon:"app_registration",link:"setup-registration"},{label:"Grievance Management",mat_icon:"report_problem",link:"grievance-management"}];townAdminSetup=[{label:"Onboarding",mat_icon:"person_add",link:"info/buisiness-form"},{label:"Order review",mat_icon:"rate_review",link:"order-review"},{label:"Bank Detail",mat_icon:"credit_card",link:"info/bank-detail"},{label:"Provider Access",mat_icon:"admin_panel_settings",link:"provider-access"},{label:"Community",mat_icon:"groups",link:"community-approval"},{label:"Provider Management",mat_icon:"assignment_ind",link:"provider-management"},{label:"KYC Management",mat_icon:"badge",link:"provider-kyc"}];buisnessSetupCards=[{title:"Business Profile",desc:"Update and manage information that represents your business to the public. Ensure all details are accurate and current.",mat_icon:"storefront",link:"about-us"},{title:"Business Card",desc:"Create and customize your business card to showcase essential contact details and branding.",mat_icon:"badge",link:"contact-us"}];activeTab=sessionStorage.getItem("activeDashboardTab")||"Explore";activePage="dashboard";swipeHandled=!1;ngOnInit(){this.setupProviderChangeListener(),this.initializeDashboard(),this.setupQueryParamsListener()}loadUserTabAccess(){let e=this.router.getCurrentNavigation()?.extras?.state;if(e||(e=window.history.state),!e){setTimeout(()=>{let o=this.router.getCurrentNavigation()?.extras?.state||window.history.state;o&&o.userTabAccess?(this.userTabAccess=o.userTabAccess,this.accessibleTabs=o.userTabAccess.tabs||[],this.filterNavTabs(),this.filterSetupSections(),this.filterDailyTransactions()):this.accessibleTabs=this.navTabs},100);return}e&&e.userTabAccess?(this.userTabAccess=e.userTabAccess,this.accessibleTabs=e.userTabAccess.tabs||[],this.filterNavTabs()):this.accessibleTabs=this.navTabs}filterNavTabs(){if(this.accessibleTabs&&this.accessibleTabs.length>0){let t={dashboard:"Dashboards",orders:"Orders",slots:"Slots",group:"Group",products:"Explore",sales:"Transaction",expenses:"Dues",members:"Explore"};this.navTabs=this.navTabs.filter(n=>{let o=Object.keys(t).filter(r=>t[r]===n);return o.length>0?o.some(r=>this.accessibleTabs.includes(r)):!0});let e=sessionStorage.getItem("activeDashboardTab");e&&this.navTabs.includes(e)?(this.activeTab=e,setTimeout(()=>this.scrollToActiveTab(),0)):this.navTabs.includes("Explore")?this.activeTab="Explore":this.navTabs.length>0&&(this.activeTab=this.navTabs[0])}}initializeDashboard(){let t=sessionStorage.getItem("selectedProvider"),e;if(t)try{e=JSON.parse(t)}catch(o){console.error("[AdminDashboard] \u274C Failed to parse stored provider from sessionStorage:",o)}else e=this.authService.getSelectedProvider();let n=this.authService.getProviderInfo();this.userName=e?.display_name||n?.[0]?.display_name||"",this.currentProviderId=e?.provider_id||n?.[0]?.provider_id||0,console.log("[AdminDashboard] \u2705 Final provider state after initialization:",{selectedProvider:e?.display_name||e?.name||"NONE",selectedProviderId:e?.provider_id||0,firstProvider:n?.[0]?.display_name||n?.[0]?.name||"NONE",firstProviderId:n?.[0]?.provider_id||0,providerCount:n?.length||0,hasSelectedProvider:!!e,providerFromAuthService:this.authService.getSelectedProvider()?.display_name||"NONE",userName:this.userName}),console.log("[DEBUG] AdminDashboard - currentProviderId set to:",this.currentProviderId),e||console.warn("[AdminDashboard] \u26A0\uFE0F No selected provider found in sessionStorage or authService"),this.loadProviderInfo(),this.setupSections=[{header:"Product Setup",className:"product-setup",entity:this.productSetup},{header:"Subscription Setup",className:"subscription-setup",entity:this.subscriptionSetup},{header:"Admin Setup",className:"admin-setup",entity:this.adminSetup},{header:"Town Admin",className:"town-admin",entity:this.townAdminSetup}],this.triggerGetData()}loadProviderInfo(){let t=this.authService.getSelectedProviderId();if(!t){this.loading=!1;return}this.loading=!0,this.dashboardService.getProviderInfo(t).subscribe({next:e=>{this.businessType=e?.data?.business_type||[],this.filterSectionsByBusinessType(),this.loading=!1},error:e=>{console.error("Error loading provider info:",e),this.businessType=[],this.filterSectionsByBusinessType(),this.loading=!1}})}filterSectionsByBusinessType(){let t=this.businessType.includes("on_demand"),e=this.businessType.includes("subscription"),n=this.businessType.includes("admin"),o=[];n?o.push({header:"Product Setup",className:"product-setup",entity:this.productSetup},{header:"Subscription Setup",className:"subscription-setup",entity:this.subscriptionSetup},{header:"Admin Setup",className:"admin-setup",entity:this.adminSetup},{header:"Town Admin",className:"town-admin",entity:this.townAdminSetup}):(t&&o.push({header:"Product Setup",className:"product-setup",entity:this.productSetup}),e&&o.push({header:"Subscription Setup",className:"subscription-setup",entity:this.subscriptionSetup}),(t||e)&&o.push({header:"Admin Setup",className:"admin-setup",entity:this.adminSetup})),this.businessType.length===0&&!n&&o.push({header:"Product Setup",className:"product-setup",entity:this.productSetup},{header:"Subscription Setup",className:"subscription-setup",entity:this.subscriptionSetup},{header:"Admin Setup",className:"admin-setup",entity:this.adminSetup}),this.setupSections=o,this.accessibleTabs&&this.accessibleTabs.length>0&&this.filterSetupSections()}filterSetupSections(){this.accessibleTabs&&this.accessibleTabs.length>0&&(this.setupSections=this.setupSections.map(t=>{let e=t.entity.filter(n=>({product:["products"],category:["products"],slots:["slots"],"member-card-setup":["members"],"setup-registration":["members"],"employee-setup":["group"],group:["group"],"order-review":["orders"],settings:["dashboard"]}[n.link||""]||[]).some(a=>this.accessibleTabs.includes(a)));return H(U({},t),{entity:e})}).filter(t=>t.entity.length>0))}filterDailyTransactions(){if(this.accessibleTabs&&this.accessibleTabs.length>0){let t={"add-sales":["sales"],expenses:["expenses"],members:["members"],enquiry:["orders"]};this.dailyTransactions=this.dailyTransactions.filter(e=>(t[e.link||""]||[]).some(o=>this.accessibleTabs.includes(o)))}}setupProviderChangeListener(){this.providerChangeSubscription=this.authService.providerChange$.subscribe(t=>{t&&(this.loading=!0,this.userName=t.display_name||t.name||"",this.currentProviderId=t.provider_id||0,console.log("[DEBUG] AdminDashboard - Provider changed, currentProviderId:",this.currentProviderId),this.loadProviderInfo(),this.triggerGetData())})}setupQueryParamsListener(){this.route.queryParams.subscribe(t=>{t.tab&&this.navTabs.includes(t.tab)&&this.setActiveTab(t.tab)})}ngOnDestroy(){this.providerChangeSubscription&&this.providerChangeSubscription.unsubscribe()}triggerGetData(){let t=this.authService.getSelectedProviderId();if(!t){this.loading=!1;return}this.loading=!0;let e=new Date,n={year:e.getFullYear().toString(),month:(e.getMonth()+1).toString()};this.dashboardService.getProviderDashboardData(Tn[0],t,n).subscribe({next:o=>{this.orderSummaryDetail=o,this.monthlyEarning=this.orderSummaryDetail.order_value,this.stats=[{label:"Orders",value:o.order_total_count,icon:"cube",mat_icon:"store"},{label:"Delivered",value:o.order_delivered_count,icon:"truck",mat_icon:"local_shipping"},{label:"Pending",value:o.order_pending_count,icon:"clock",color:"warning",mat_icon:"pending_actions"},{label:"Overdue",value:o.order_overdue_value,icon:"clock",color:"warning",mat_icon:"hourglass_bottom"}],this.loading=!1},error:o=>{console.error("Dashboard data loading error:",o),this.loading=!1}})}onTouchStart(t){this.touchStartX=t.changedTouches[0].screenX,this.touchStartY=t.changedTouches[0].screenY,this.swipeHandled=!1}onTouchEnd(t){this.touchEndX=t.changedTouches[0].screenX,this.touchEndY=t.changedTouches[0].screenY,this.swipeHandled||(this.handleSwipeGesture(),this.swipeHandled=!0)}handleSwipeGesture(){let t=this.touchEndX-this.touchStartX,e=this.touchEndY-this.touchStartY,n=80,o=40;if(Math.abs(t)<n||Math.abs(t)<Math.abs(e))return;let r=this.navTabs.indexOf(this.activeTab);t>0&&r>0?this.setActiveTab(this.navTabs[r-1]):t<0&&r<this.navTabs.length-1&&this.setActiveTab(this.navTabs[r+1])}setActiveTab(t){this.activeTab=t,sessionStorage.setItem("activeDashboardTab",t),setTimeout(()=>this.scrollToActiveTab(),0),this.scrollToActiveTab()}scrollToActiveTab(){let t=this.navTabsContainer?.nativeElement;if(!t)return;let n=Array.from(t.querySelectorAll("button")).find(o=>o.classList.contains("active"));if(n){let o=t.offsetWidth,r=n.offsetLeft,a=n.offsetWidth,l=r-o/2+a/2;n.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}}prevTab(){let t=this.navTabs.indexOf(this.activeTab);t>0&&(this.activeTab=this.navTabs[t-1])}nextTab(){let t=this.navTabs.indexOf(this.activeTab);t<this.navTabs.length-1&&(this.activeTab=this.navTabs[t+1])}logout(){sessionStorage.removeItem("activeDashboardTab");try{this.authService.clearSession(),this.router.navigate(["/web-login"])}catch{this.authService.clearSession(),this.router.navigate(["/web-login"])}}goToInfo(t){let e=this.authService.getSelectedProviderId();this.router.navigate(["providers","info"],{state:{userType:"provider",link:t,providerId:e}})}goActionCard(t){this.router.navigate(["providers",t])}setupLink(t){t.link&&this.router.navigate(["providers",...t.link.split("/")])}static \u0275fac=function(e){return new(e||i)(w(le),w(Co),w(pt),w(G),w(Js))};static \u0275cmp=R({type:i,selectors:[["app-admin-dashboard"]],viewQuery:function(e,n){if(e&1&&nt(G_,5),e&2){let o;it(o=ot())&&(n.navTabsContainer=o.first)}},decls:3,vars:2,consts:[["navTabsContainer",""],[1,"dashboard-container"],["class","skeleton-loader","aria-label","Loading content",4,"ngIf"],[4,"ngIf"],["aria-label","Loading content",1,"skeleton-loader"],[1,"skeleton-header"],[1,"skeleton-stats"],[1,"skeleton-section"],["class","header",4,"ngIf"],["class","stats-container",4,"ngIf"],[1,"nav-tabs-wrapper"],[1,"nav-tabs"],[3,"active","click",4,"ngFor","ngForOf"],[1,"swipe-area",3,"touchstart","touchend"],[3,"providerId",4,"ngIf"],[1,"header"],[1,"header-content"],[1,"earning-info"],[1,"label"],[1,"amount"],["style","margin-left: auto",4,"ngIf"],[2,"margin-left","auto"],["mat-stroked-button","","color","warn",3,"click"],[1,"stats-container"],["class","stat-card",3,"warning",4,"ngFor","ngForOf"],[1,"stat-card"],["fontSet","material-icons-outlined"],[1,"stat-info"],[3,"click"],[1,"section"],[1,"daily-trx"],[1,"cards-grid"],["class","action-card",3,"routerLink",4,"ngFor","ngForOf"],["class","section",4,"ngFor","ngForOf"],["class","section",4,"ngIf"],[1,"action-card",3,"routerLink"],[1,"action-card-title-card"],[3,"ngClass"],[1,"button-group"],["class","action-button",3,"click",4,"ngFor","ngForOf"],[1,"action-button",3,"click"],["class","action-card",3,"click",4,"ngFor","ngForOf"],[1,"action-card",3,"click"],[3,"providerId"]],template:function(e,n){e&1&&(s(0,"div",1),y(1,W_,5,0,"div",2)(2,dh,15,10,"div",3),c()),e&2&&(d(),g("ngIf",n.loading),d(),g("ngIf",!n.loading))},dependencies:[Se,ee,W,ac,Ks,sc,ui,pr,ur,fr,br,Cr,_o,ce],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:1rem 1rem 6rem;max-width:1200px;margin:0 auto}.dashboard-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.dashboard-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#4a1d96;font-size:1rem;margin-bottom:.5rem;font-weight:700}.dashboard-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .earning-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.dashboard-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .earning-info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#666;font-size:.875rem;font-weight:400}.dashboard-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .earning-info[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:#4a1d96;font-weight:700;font-size:1.25rem}.dashboard-container[_ngcontent-%COMP%]   .stats-container[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1.5rem;overflow:scroll;scrollbar-width:none}.dashboard-container[_ngcontent-%COMP%]   .stats-container[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{border:1px solid #5D157C;background:#f9f2fd;padding:1rem;border-radius:.5rem;display:flex;align-items:center;box-shadow:0 2px 4px #0000000d;flex-direction:column}.dashboard-container[_ngcontent-%COMP%]   .stats-container[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:1.875rem;width:1.875rem;height:1.875rem;color:#5d157c}.dashboard-container[_ngcontent-%COMP%]   .stats-container[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]{text-align:center}.dashboard-container[_ngcontent-%COMP%]   .stats-container[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#5d157c;font-size:.875rem;font-weight:700}.dashboard-container[_ngcontent-%COMP%]   .stats-container[_ngcontent-%COMP%]   .stat-card.warning[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#f59e0b}.dashboard-container[_ngcontent-%COMP%]   .stats-container[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#4a1d96;margin:0;font-size:1rem}.dashboard-container[_ngcontent-%COMP%]   .stats-container[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:.875rem}.dashboard-container[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]{display:flex;gap:12px;background-color:#fff;overflow-x:auto;white-space:nowrap;-webkit-overflow-scrolling:touch;scrollbar-width:none;margin-bottom:1rem}.dashboard-container[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.dashboard-container[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-shrink:0;padding:8px 16px;border:none;border-radius:12px;background-color:#f8eaff;color:#6a1b9a;font-weight:500;font-size:14px;cursor:pointer;transition:background-color .3s}.dashboard-container[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#d19ce6;color:#4a0072}.dashboard-container[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#eacbfa}.dashboard-container[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{margin-bottom:2rem}.dashboard-container[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1f2937;font-size:1rem;font-weight:700;margin-bottom:.5rem;word-wrap:break-word;overflow-wrap:break-word;white-space:normal;line-height:1.4}.dashboard-container[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:not(.daily-trx){font-size:1.25rem;margin-bottom:.5rem}.dashboard-container[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .cards-grid[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]{background:#fff;padding:1rem;border-radius:.5rem;box-shadow:0 2.5px 6.5px #1c191d4a,0 0 2px #1c191d52;flex:1}.dashboard-container[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .cards-grid[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   .action-card-title-card[_ngcontent-%COMP%]{color:#5d157c;display:flex;justify-content:center;gap:.5rem}.dashboard-container[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .cards-grid[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   .action-card-title-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#5d157c;font-weight:700;margin-bottom:.5rem;word-wrap:break-word;overflow-wrap:break-word;white-space:normal;line-height:1.4;text-align:center}.dashboard-container[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .cards-grid[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#2f4ad6;font-size:.75rem;margin:0;text-align:center;word-wrap:break-word;overflow-wrap:break-word;white-space:normal;line-height:1.5}.dashboard-container[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.25rem}.dashboard-container[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{background:#5d157c;color:#fff;border:none;border-radius:.5rem;cursor:pointer;display:flex;align-items:center;gap:.5rem;font-size:.875rem;width:48%;padding:.3rem;white-space:normal;word-wrap:break-word;overflow-wrap:break-word;line-height:1.4;min-height:2.5rem;text-align:center;justify-content:center}.dashboard-container[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:1.25rem;height:1.25rem;width:1.25rem;flex-shrink:0}.dashboard-container[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .business-card-setup[_ngcontent-%COMP%]{display:flex;box-shadow:0 0 1.5px #1c191d45,0 0 2px #1c191d52;border-radius:6px;padding:.75rem;margin-bottom:1rem}.dashboard-container[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .business-card-setup[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex}.dashboard-container[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .business-card-setup[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]:first-child{width:90%;margin-right:1rem}.dashboard-container[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .business-card-setup[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:14px;color:#171a1f;font-weight:700;word-wrap:break-word;overflow-wrap:break-word;white-space:normal;line-height:1.4}.dashboard-container[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .business-card-setup[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{font-size:14px;color:#9095a1;font-weight:400;word-wrap:break-word;overflow-wrap:break-word;white-space:normal;line-height:1.5;margin-top:.25rem}@media (max-width: 768px){.dashboard-container[_ngcontent-%COMP%]   .stats-container[_ngcontent-%COMP%]{display:flex}.dashboard-container[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .cards-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1.5rem}.dashboard-container[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{flex-direction:row}.dashboard-container[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{width:48%}}.nav-tabs-wrapper[_ngcontent-%COMP%]{overflow-x:auto;scrollbar-width:none}.nav-tabs-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.nav-tabs[_ngcontent-%COMP%]{display:flex;gap:1rem;min-width:max-content}.nav-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;white-space:nowrap;cursor:pointer;border:none;background:none}.nav-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{font-weight:700;border-bottom:2px solid #5d157c}.skeleton-loader[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;padding:1rem}.skeleton-loader[_ngcontent-%COMP%]   .skeleton-header[_ngcontent-%COMP%], .skeleton-loader[_ngcontent-%COMP%]   .skeleton-stats[_ngcontent-%COMP%], .skeleton-loader[_ngcontent-%COMP%]   .skeleton-section[_ngcontent-%COMP%]{background-color:#e0e0e0;border-radius:6px;animation:_ngcontent-%COMP%_pulse 1.5s infinite ease-in-out}.skeleton-loader[_ngcontent-%COMP%]   .skeleton-header[_ngcontent-%COMP%]{height:2rem;width:40%;margin-bottom:1rem}.skeleton-loader[_ngcontent-%COMP%]   .skeleton-stats[_ngcontent-%COMP%]{height:4rem;width:100%}.skeleton-loader[_ngcontent-%COMP%]   .skeleton-section[_ngcontent-%COMP%]{height:8rem;width:100%}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:1}50%{opacity:.4}to{opacity:1}}"]})};function lh(i,t){i&1&&(s(0,"div",11),p(1," Category Name is required. "),c())}function ph(i,t){i&1&&(s(0,"div",11),p(1," Parent Category is required. "),c())}function mh(i,t){i&1&&(s(0,"div",11),p(1," Valid order is required. "),c())}var xr=class i{constructor(t,e,n,o){this.fb=t;this.categoryServ=e;this.authService=n;this.toast=o;this.categoryForm=this.fb.group({name:["",A.required],parent_id:[null],img:[""],priority:["",[A.required]]})}fileUploadComponent;parentCategories=[];editFormValues=void 0;saveSuccess=new Ee;categoryForm;formExpanded=!1;submitBtnText="Add";ngOnChanges(t){t.editFormValues&&t.editFormValues.currentValue!=null&&this.setEditFormValue()}ngOnInit(){}setEditFormValue(){this.submitBtnText="Update",this.categoryForm.controls.name?.setValue(this.editFormValues?.name),this.categoryForm.controls.parent_id?.setValue(this.editFormValues?.parent_id),this.categoryForm.controls.img?.setValue(this.editFormValues?.img),this.categoryForm.controls.priority?.setValue(this.editFormValues?.priority),this.formExpanded=!0}onSubmit(){if(this.categoryForm.valid){let t=this.editFormValues?.product_category_id,e=this.categoryForm.value;e.provider_id=this.authService.getSelectedProviderId(),this.categoryServ.createOrUpdate(e,t).subscribe({next:n=>{this.saveSuccess.emit(n),this.editFormValues=void 0,this.categoryForm.reset(),this.fileUploadComponent.reset(),this.formExpanded=!1,this.toast.success("Success","Category saved successfully")},error:n=>{console.error("Error saving category:",n),this.toast.error("Error","Failed to save category. Please try again.")}})}}buttonClicked(t){t.buttonType===1?this.onSubmit():t.buttonType===2&&this.onCancel()}onCancel(){this.categoryForm.reset(),this.formExpanded=!1,this.submitBtnText="Add",this.editFormValues=void 0}afterUploadFile(t){this.categoryForm?.get("img")?.setValue(t[0])}static \u0275fac=function(e){return new(e||i)(w(ue),w(kn),w(G),w(te))};static \u0275cmp=R({type:i,selectors:[["add-category"]],viewQuery:function(e,n){if(e&1&&nt(ht,5),e&2){let o;it(o=ot())&&(n.fileUploadComponent=o.first)}},inputs:{parentCategories:"parentCategories",editFormValues:"editFormValues"},outputs:{saveSuccess:"saveSuccess"},features:[Ze],decls:18,vars:12,consts:[[3,"buttonEventTriggered","compName","title","inputForm","isExpanded","submitBtnText"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","name"],["id","name","type","text","placeholder","Category Name","formControlName","name"],["class","error-message",4,"ngIf"],["for","types"],["formControlName","parent_id","optionValue","product_category_id","optionLabel","name","styleClass","full-width-dropdown","placeholder","Select a Parent Category",1,"custom-dropdown",3,"options"],["for","priority"],["id","priority","type","text","placeholder","order","formControlName","priority"],[3,"uploadedUrls","enableMultiple","uploadedFileName"],[1,"error-message"]],template:function(e,n){if(e&1&&(s(0,"form-template",0),v("buttonEventTriggered",function(r){return n.buttonClicked(r)}),s(1,"form",1),v("ngSubmit",function(){return n.onSubmit()}),s(2,"div",2)(3,"label",3),p(4,"Category Name"),c(),h(5,"input",4),y(6,lh,2,0,"div",5),c(),s(7,"div",2)(8,"label",6),p(9," Parent Category (optional)"),c(),h(10,"p-dropdown",7),y(11,ph,2,0,"div",5),c(),s(12,"div",2)(13,"label",8),p(14,"Priority"),c(),h(15,"input",9),y(16,mh,2,0,"div",5),c(),s(17,"file-upload",10),v("uploadedUrls",function(r){return n.afterUploadFile(r)}),c()()()),e&2){let o,r,a,l;g("compName","add-category")("title","Add Category")("inputForm",n.categoryForm)("isExpanded",n.formExpanded)("submitBtnText",n.submitBtnText),d(),g("formGroup",n.categoryForm),d(5),g("ngIf",((o=n.categoryForm.get("name"))==null?null:o.invalid)&&((o=n.categoryForm.get("name"))==null?null:o.touched)),d(4),g("options",n.parentCategories),d(),g("ngIf",((r=n.categoryForm.get("parent_id"))==null?null:r.invalid)&&((r=n.categoryForm.get("parent_id"))==null?null:r.touched)),d(5),g("ngIf",((a=n.categoryForm.get("priority"))==null?null:a.invalid)&&((a=n.categoryForm.get("priority"))==null?null:a.touched)),d(),g("enableMultiple",!1)("uploadedFileName",(l=n.categoryForm.get("img"))==null?null:l.value)}},dependencies:[W,ht,Ve,ye,Z,Y,fe,Me,Oe,Le],styles:[".full-width-dropdown{width:100%}  .full-width-dropdown>span{padding:.5rem}"]})};function uh(i,t){if(i&1){let e=E();s(0,"div",6),v("click",function(o){let r=b(e).$implicit;return _().handleActionClick(r,o),C(o.stopPropagation())}),s(1,"p-inputSwitch",7),N("ngModelChange",function(o){let r=b(e).$implicit;return z(r.enable,o)||(r.enable=o),C(o)}),c()()}if(i&2){let e=t.$implicit;d(),L("ngModel",e.enable)}}var yr=class i{constructor(t,e,n,o){this.authService=t;this.categoryService=e;this.confirmationService=n;this.toast=o}pageIndex=0;contentPerPage=dt;total=0;searchTerm="";providerChangeSubscription;ngOnInit(){let t=this.authService.getSelectedProviderId();t&&this.categoryService.updateProviderUrl(t),this.loadParentCategories(),this.triggerGetCategories(void 0),this.providerChangeSubscription=this.authService.providerChange$.subscribe(e=>{if(e){let n=this.authService.getSelectedProviderId();n&&(this.categoryService.updateProviderUrl(n),this.pageIndex=0,this.loadParentCategories(),this.triggerGetCategories(void 0))}})}ngOnDestroy(){this.providerChangeSubscription&&this.providerChangeSubscription.unsubscribe()}loadParentCategories(){this.categoryService.listWithTotal({skip:0,limit:1e3}).subscribe(t=>{this.parentCategories=t.data.filter(e=>e.parent_id===null)})}columns=[{displayName:"Name",displayValue:"name"},{displayName:"Parent",displayValue:"parent_name"},{displayName:"Action",displayValue:"action"}];parentCategories=[];categories=[];editCategory;edit(t){let e=H(U({},t),{name:t.originalName||t.name,parent_name:t.originalParentName||t.parent_name});this.editCategory=e}remove(t){this.confirmDelete(t)}confirmDelete(t){this.confirmationService.confirm({message:"Are you sure you want to delete this category?",header:"Delete Category",icon:"pi pi-info-circle",acceptLabel:"Delete",rejectLabel:"Cancel",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-secondary",accept:()=>{this.categoryService.delete(t.product_category_id).subscribe({next:e=>{this.triggerGetCategories(void 0),this.toast.success("Success","Category deleted successfully")},error:e=>{console.error(e),this.toast.error("Failed","Failed to delete category")}})},reject:e=>{e===Fe.REJECT||Fe.CANCEL}})}handleActionClick(t,e){e?.preventDefault(),this.categoryService.update(t).subscribe({next:n=>{this.toast.success("Success","Category Updated successfully")},error:n=>{console.error("Error updating category:",n),this.toast.error("Error","Failed to update category. Please try again.")}})}triggerGetCategories(t){let e={skip:this.pageIndex*this.contentPerPage,limit:this.contentPerPage};this.searchTerm&&this.searchTerm.trim()!==""&&(e.search=this.searchTerm.trim()),this.categoryService.listWithTotal(e).subscribe(n=>{this.total=n.total,this.convertCategorySet(n.data)})}truncateCategoryName(t){return t?t.length>10?t.substring(0,10)+"...":t:""}convertCategorySet(t){let e=t.map(n=>{let o=n.parent_name||this.parentCategories.find(r=>r.product_category_id===n.parent_id)?.name;return H(U({},n),{originalName:n.name,originalParentName:o,name:this.truncateCategoryName(n.name),parent_name:this.truncateCategoryName(o),id:n.product_category_id??0,action:"viewTemplate"})});setTimeout(()=>{this.categories=e},200)}onPageChange(t){this.pageIndex=t,this.triggerGetCategories(void 0)}onContentPerPageChange(t){this.contentPerPage=t,this.pageIndex=0,this.triggerGetCategories(void 0)}onSearchChange(t){this.searchTerm=t,this.pageIndex=0,this.triggerGetCategories(void 0)}static \u0275fac=function(e){return new(e||i)(w(G),w(kn),w(pe),w(te))};static \u0275cmp=R({type:i,selectors:[["app-category"]],decls:8,vars:12,consts:[["viewTemplate",""],[3,"title","icon","showBack"],[1,"card-wrapper"],[1,"card"],[3,"saveSuccess","parentCategories","editFormValues"],[3,"onEditTrigger","onDeleteTrigger","pageChange","searchDataChange","contentPerPageChange","dataSet","columns","showDateFilter","actionTemplate","totalRecords","pageIndex","contentPerPage"],[1,"view",3,"click"],[3,"ngModelChange","ngModel"]],template:function(e,n){if(e&1){let o=E();h(0,"app-title-card",1),s(1,"div",2)(2,"mat-card",3)(3,"add-category",4),v("saveSuccess",function(a){return b(o),C(n.triggerGetCategories(a))}),c()()(),h(4,"p-confirmDialog"),s(5,"simple-grid",5),v("onEditTrigger",function(a){return b(o),C(n.edit(a))})("onDeleteTrigger",function(a){return b(o),C(n.remove(a))})("pageChange",function(a){return b(o),C(n.onPageChange(a))})("searchDataChange",function(a){return b(o),C(n.onSearchChange(a))})("contentPerPageChange",function(a){return b(o),C(n.onContentPerPageChange(a))}),c(),y(6,uh,2,1,"ng-template",null,0,Pe)}if(e&2){let o=ge(7);g("title","Category")("icon","category")("showBack",!0),d(3),g("parentCategories",n.parentCategories)("editFormValues",n.editCategory),d(2),g("dataSet",n.categories)("columns",n.columns)("showDateFilter",!1)("actionTemplate",o)("totalRecords",n.total)("pageIndex",n.pageIndex)("contentPerPage",n.contentPerPage)}},dependencies:[Re,be,ze,bt,Y,_e,he,xr],styles:[".full-width-dropdown{width:100%}  .full-width-dropdown>span{padding:.5rem}"]})};function fh(i,t){i&1&&(s(0,"div",9),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"member.name_required")," "))}function _h(i,t){i&1&&(s(0,"div"),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"member.mobile_number_required")," "))}function hh(i,t){i&1&&(s(0,"div"),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"member.valid_mobile_number")," "))}function bh(i,t){if(i&1&&(s(0,"div",9),y(1,_h,3,3,"div",10)(2,hh,3,3,"div",10),c()),i&2){let e,n,o=_();d(),g("ngIf",(e=o.memberForm.get("member_mobile_number"))==null||e.errors==null?null:e.errors.required),d(),g("ngIf",(n=o.memberForm.get("member_mobile_number"))==null||n.errors==null?null:n.errors.pattern)}}function Ch(i,t){if(i&1&&h(0,"input",25),i&2){let e=_(2).$implicit;ne("id",e.label_name),fn("placeholder","Enter ",e.label_name,""),g("formControlName",e.label_name)}}function vh(i,t){if(i&1&&h(0,"textarea",26),i&2){let e=_(2).$implicit;ne("id",e.label_name),fn("placeholder","Enter ",e.label_name,""),g("formControlName",e.label_name)}}function xh(i,t){if(i&1&&(s(0,"div"),y(1,Ch,1,4,"input",25)(2,vh,1,4,"textarea",26),c()),i&2){let e=_().$implicit,n=_(2);d(),mo(e.element_type===n.formElementType.BOX||e.element_type===n.formElementType.TEXT_BOX?1:e.element_type===n.formElementType.AREA?2:-1)}}function Ph(i,t){if(i&1&&(s(0,"div",2)(1,"label",24),p(2),c(),y(3,xh,3,1,"div",10),c()),i&2){let e,n=t.$implicit,o=_(2);d(),ne("for",n.label_name),d(),T(" ",n.label_name," "),d(),g("ngIf",(e=o.memberForm.get("member_json_form_obj"))==null?null:e.get(n.label_name))}}function yh(i,t){if(i&1){let e=E();s(0,"div",11)(1,"div",12),v("click",function(){b(e);let o=_();return C(o.toggleAdvancedSection())}),s(2,"div",13),si(),s(3,"svg",14),h(4,"path",15)(5,"path",16),c(),ci(),s(6,"h3",17),p(7,"More Details"),c(),s(8,"span",18),p(9),c()(),si(),s(10,"svg",19),h(11,"polyline",20),c()(),ci(),s(12,"div",21)(13,"div",22),y(14,Ph,4,3,"div",23),c()()()}if(i&2){let e=_();d(9),T("",e.registerFormRecords.length," fields"),d(),j("expanded",e.advancedSectionExpanded),d(2),j("expanded",e.advancedSectionExpanded),d(2),g("ngForOf",e.registerFormRecords)}}var Mr=class i{constructor(t,e,n,o,r){this.fb=t;this.authService=e;this.memberService=n;this.setupService=o;this.toast=r;this.memberForm=this.fb.group({member_name:["",A.required],member_mobile_number:["",[A.required,A.pattern(/^[6-9]\d{9}$/)]],member_json_form_obj:this.fb.group({})})}formTemplate;memberForm;editFormValues;saveSuccess=new Ee;formExpanded=!1;formElementType=Yn;regiseteredForm;registerFormRecords=[];advancedSectionExpanded=!0;submitBtnText="Add";ngOnInit(){let t=this.authService.getSelectedProviderId();this.setupService.getRegisteredForm("user",t).subscribe(e=>{this.regiseteredForm=e[0];let n=this.regiseteredForm.form_data[0].elements.filter(o=>o.display_for_user!==!1);n.forEach(o=>{this.addMemberJsonForm(o)}),this.registerFormRecords=n})}ngOnChanges(t){t.editFormValues&&t.editFormValues.currentValue!=null&&this.setEditFormValue()}addMemberJsonForm(t){let e=this.memberForm.get("member_json_form_obj");t.hasOwnProperty("label_name")&&e.addControl(t.label_name,new Cn)}setEditFormValue(){this.submitBtnText="Update";let t=this.memberForm.get("member_json_form_obj");if(this.memberForm.controls.member_name?.setValue(this.editFormValues?.member_name),this.memberForm.controls.member_mobile_number?.setValue(this.editFormValues?.member_mobile_number),this.editFormValues?.member_json_form){let e=this.editFormValues?.member_json_form;Object.keys(this.editFormValues?.member_json_form).length===0&&t.reset(),this.editFormValues?.member_json_form.forEach((n,o)=>{let r=Object.keys(n).filter(a=>a!=="display_for_user")[0];r&&(t.contains(r)||t.addControl(r,new Cn),t.controls[r].setValue(e[o][r]))})}this.formExpanded=!0}onSubmit(){if(this.memberForm.valid){console.log("Form Data:",this.memberForm.value);let t=this.memberForm.value;t.provider_id=this.authService.getSelectedProviderId(),t.member_mobile_number=t.member_mobile_number.toString(),t.myid_enabled=!0;let e=this.editFormValues?.member_id;t.member_json_form=this.registerFormRecords.map(n=>({[n.label_name]:t.member_json_form_obj[n.label_name],display_for_user:n.display_for_user})),this.memberService.createOrUpdate(t,e).subscribe({next:n=>{console.log(n),this.saveSuccess.emit(n),this.editFormValues=void 0,this.memberForm.reset(),this.formExpanded=!1,this.formTemplate&&(this.formTemplate.isExpanded=!1),this.toast.success("Success","Member saved successfully")},error:n=>{console.error("Error:",n),this.toast.error("Error","Failed to add or update member")}}),console.log(t)}}buttonClicked(t){t.buttonType===1?this.onSubmit():t.buttonType===2&&this.onCancel()}cancel=new Ee;onCancel(){if(this.submitBtnText=="Add"){this.memberForm.reset();let t=this.memberForm.get("member_json_form_obj");t&&t.reset(),this.formExpanded=!1,this.formTemplate&&(this.formTemplate.isExpanded=!1)}else this.setEditFormValue();this.cancel.emit()}toggleAdvancedSection(){this.advancedSectionExpanded=!this.advancedSectionExpanded}static \u0275fac=function(e){return new(e||i)(w(ue),w(G),w(rn),w(yn),w(te))};static \u0275cmp=R({type:i,selectors:[["add-member-form"]],viewQuery:function(e,n){if(e&1&&nt(Le,5),e&2){let o;it(o=ot())&&(n.formTemplate=o.first)}},inputs:{editFormValues:"editFormValues"},outputs:{saveSuccess:"saveSuccess",cancel:"cancel"},features:[Ze],decls:16,vars:18,consts:[[3,"buttonEventTriggered","compName","title","inputForm","isExpanded","submitBtnText"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","name"],["id","name","type","text","placeholder","Enter member name","formControlName","member_name",1,"form-input"],["class","error-message",4,"ngIf"],["for","mobile"],["id","mobile","type","number","formControlName","member_mobile_number",1,"form-input",3,"placeholder"],["class","advanced-myid-section",4,"ngIf"],[1,"error-message"],[4,"ngIf"],[1,"advanced-myid-section"],[1,"section-header",3,"click"],[1,"header-content"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor",1,"icon-advanced"],["d","M12 2L2 7l10 5 10-5-10-5z"],["d","M2 17l10 5 10-5M2 12l10 5 10-5"],[1,"section-title"],[1,"field-count"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor",1,"expand-icon"],["points","6 9 12 15 18 9"],["formGroupName","member_json_form_obj",1,"section-content"],[1,"dynamic-fields-grid"],["class","form-group",4,"ngFor","ngForOf"],[3,"for"],["type","text",1,"form-input",3,"formControlName","id","placeholder"],["rows","4",1,"form-textarea",3,"formControlName","id","placeholder"]],template:function(e,n){if(e&1&&(s(0,"form-template",0),v("buttonEventTriggered",function(r){return n.buttonClicked(r)}),s(1,"form",1),v("ngSubmit",function(){return n.onSubmit()}),s(2,"div",2)(3,"label",3),p(4),M(5,"translate"),c(),h(6,"input",4),y(7,fh,3,3,"div",5),c(),s(8,"div",2)(9,"label",6),p(10),M(11,"translate"),c(),h(12,"input",7),M(13,"translate"),y(14,bh,3,2,"div",5),c(),y(15,yh,15,6,"div",8),c()()),e&2){let o,r;g("compName","add-member")("title","Add Member")("inputForm",n.memberForm)("isExpanded",n.formExpanded)("submitBtnText",n.submitBtnText),d(),g("formGroup",n.memberForm),d(3),S(O(5,12,"profile.name")),d(3),g("ngIf",((o=n.memberForm.get("member_name"))==null?null:o.invalid)&&((o=n.memberForm.get("member_name"))==null?null:o.touched)),d(3),S(O(11,14,"member.mobile_number")),d(2),ne("placeholder",O(13,16,"member.mobile_number")),d(2),g("ngIf",((r=n.memberForm.get("member_mobile_number"))==null?null:r.touched)&&((r=n.memberForm.get("member_mobile_number"))==null?null:r.invalid)),d(),g("ngIf",n.registerFormRecords.length>0)}},dependencies:[ee,W,ye,Z,ct,Y,fe,Me,Oe,pi,Le,ce],styles:['@charset "UTF-8";.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-size:14px;font-weight:500;color:#333;letter-spacing:.3px}.form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;font-size:14px;color:#333;background-color:#fff;border:1px solid #e0e0e0;border-radius:8px;transition:all .3s ease;box-shadow:0 1px 3px #0000000d}.form-input[_ngcontent-%COMP%]::placeholder, .form-textarea[_ngcontent-%COMP%]::placeholder{color:#999;opacity:1}.form-input[_ngcontent-%COMP%]:hover, .form-textarea[_ngcontent-%COMP%]:hover{border-color:#a080c0;box-shadow:0 2px 6px #a080c026}.form-input[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#a080c0;box-shadow:0 0 0 3px #a080c01a}.form-input[_ngcontent-%COMP%]:disabled, .form-textarea[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;cursor:not-allowed;opacity:.6}.form-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px;font-family:inherit;line-height:1.5}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{appearance:textfield;-moz-appearance:textfield}.error-message[_ngcontent-%COMP%]{margin-top:.5rem;font-size:12px;color:#dc3545;display:flex;align-items:center}.error-message[_ngcontent-%COMP%]:before{content:"\\26a0";margin-right:.25rem}.advanced-myid-section[_ngcontent-%COMP%]{margin-top:2rem;border:1px solid #e0e0e0;border-radius:12px;background:linear-gradient(135deg,#f8f9fa,#fff);overflow:hidden;transition:all .3s ease}.advanced-myid-section[_ngcontent-%COMP%]:hover{border-color:#a080c0;box-shadow:0 4px 12px #a080c01a}.section-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1.25rem 1.5rem;cursor:pointer;-webkit-user-select:none;user-select:none;transition:all .3s ease;background:linear-gradient(to right,rgba(160,128,192,.05),transparent)}.section-header[_ngcontent-%COMP%]:hover{background:linear-gradient(to right,rgba(160,128,192,.1),transparent)}.section-header[_ngcontent-%COMP%]:hover   .section-title[_ngcontent-%COMP%]{color:#a080c0}.section-header[_ngcontent-%COMP%]:active{transform:scale(.99)}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;flex:1}.icon-advanced[_ngcontent-%COMP%]{stroke:#a080c0;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;flex-shrink:0}.section-title[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600;color:#333;letter-spacing:.3px;transition:color .3s ease}.field-count[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.25rem .75rem;background-color:#a080c01a;color:#a080c0;border-radius:12px;font-size:12px;font-weight:500}.expand-icon[_ngcontent-%COMP%]{stroke:#a080c0;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;transition:transform .3s ease;flex-shrink:0}.expand-icon.expanded[_ngcontent-%COMP%]{transform:rotate(180deg)}.section-content[_ngcontent-%COMP%]{max-height:0;overflow:hidden;transition:max-height .4s cubic-bezier(.4,0,.2,1),padding .4s ease;padding:0 1.5rem}.section-content.expanded[_ngcontent-%COMP%]{max-height:2000px;padding:1.5rem;border-top:1px solid #e0e0e0}.dynamic-fields-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem;animation:_ngcontent-%COMP%_fadeIn .4s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.dynamic-fields-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.25rem}.section-header[_ngcontent-%COMP%], .section-content.expanded[_ngcontent-%COMP%]{padding:1rem}}@media (max-width: 480px){.header-content[_ngcontent-%COMP%]{gap:.5rem}.section-title[_ngcontent-%COMP%]{font-size:14px}.field-count[_ngcontent-%COMP%]{font-size:11px;padding:.2rem .6rem}}']})};var Oh=()=>({width:"450px"}),wh=()=>({"960px":"75vw","640px":"90vw"});function Sh(i,t){if(i&1){let e=E();s(0,"button",10),v("click",function(o){return b(e),C(o.stopPropagation())}),h(1,"i",11),c(),s(2,"mat-menu",12,1)(4,"button",13),v("click",function(o){let r=b(e).$implicit,a=_();return C(a.handleActionClick(r,o))}),h(5,"i",14),s(6,"span"),p(7,"View"),c()(),s(8,"button",13),v("click",function(o){let r=b(e).$implicit;return _().edit(r),C(o.stopPropagation())}),h(9,"i",15),s(10,"span"),p(11,"Edit"),c()(),s(12,"button",13),v("click",function(o){let r=b(e).$implicit;return _().remove(r),C(o.stopPropagation())}),h(13,"i",16),s(14,"span"),p(15,"Delete"),c()(),s(16,"button",13),v("click",function(o){let r=b(e).$implicit,a=_();return C(a.toggleStatus(r,o))}),h(17,"i",17),s(18,"span"),p(19),c()()()}if(i&2){let e=t.$implicit,n=ge(3);g("matMenuTriggerFor",n),d(17),g("ngClass",e.is_active?"pi-ban":"pi-check-circle"),d(2),S(e.is_active?"Deactivate":"Activate")}}function kh(i,t){if(i&1&&(s(0,"div",18)(1,"div",19)(2,"strong"),p(3,"Name:"),c(),p(4),c(),s(5,"div",19)(6,"strong"),p(7,"ID:"),c(),p(8),c(),s(9,"div",19)(10,"strong"),p(11,"Mobile Number:"),c(),p(12),c(),s(13,"div",19)(14,"strong"),p(15,"Status:"),c(),s(16,"span"),p(17),c()()()),i&2){let e=_();d(4),T(" ",e.selectedMember.member_name," "),d(4),T(" ",e.selectedMember.member_id," "),d(4),T(" ",e.selectedMember.member_mobile_number," "),d(4),j("active",e.selectedMember.is_active)("inactive",!e.selectedMember.is_active),d(),T(" ",e.selectedMember.is_active?"Active":"Inactive"," ")}}var wr=class i{constructor(t,e,n,o,r,a){this.memberService=t;this.authService=e;this.confirmationService=n;this.toast=o;this.router=r;this.backHandleService=a}pageIndex=0;contentPerPage=dt;total=0;searchTerm="";providerChangeSubscription;ngOnInit(){let t=this.authService.getSelectedProviderId();t&&this.memberService.updateProviderUrl(t),this.registerBackAction(),this.triggerGetMember(void 0),this.providerChangeSubscription=this.authService.providerChange$.subscribe(e=>{if(e){let n=this.authService.getSelectedProviderId();n&&(this.memberService.updateProviderUrl(n),this.pageIndex=0,this.triggerGetMember(void 0))}})}ngOnDestroy(){this.providerChangeSubscription&&this.providerChangeSubscription.unsubscribe(),setTimeout(()=>{this.cleanupBackAction()},100)}registerBackAction(){let t=this.router.url;[t,t.split("?")[0],"/providers/members"].forEach((n,o)=>{let r={id:`members-back-action-${o}`,actionType:"navigate",backNavigationUrl:"/providers/dashboard",callback:()=>{},value:"",forPageUrl:n};this.backHandleService.backAction=this.backHandleService.backAction.filter(a=>!a.id.startsWith("members-back-action-")||a.forPageUrl!==n),this.backHandleService.backAction.push(r)})}cleanupBackAction(){let t=this.router.url,e=this.backHandleService.backAction.length;this.backHandleService.backAction=this.backHandleService.backAction.filter(n=>!n.id.startsWith("members-back-action-"))}columns=[{displayName:"Name",displayValue:"member_name"},{displayName:"Number",displayValue:"member_mobile_number"},{displayName:"Status",displayValue:"status"},{displayName:"",displayValue:"action"}];membersData=[];editMember=void 0;displayMemberModal=!1;selectedMember;toggleStatus(t,e){e.stopPropagation();let n=t.is_active,o=!n;t.is_active=o;let r=U({},t);delete r.action,delete r.id,delete r.status,r.is_active=o,this.memberService.updateMember(r).subscribe({next:a=>{this.toast.success("Success",`Member ${o?"activated":"deactivated"} successfully`)},error:a=>{console.error(a),t.is_active=n,this.toast.error("Failed","Failed to update member status")}})}edit(t){console.log(t);let e=U({},t);delete e.status,delete e.action,this.editMember=e}onFormCancel(){this.editMember=void 0}remove(t){this.confirmDelete(t)}confirmDelete(t){this.confirmationService.confirm({message:"Are you sure you want to delete this member?",header:"Delete Member",icon:"pi pi-info-circle",acceptLabel:"Delete",rejectLabel:"Cancel",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-secondary",accept:()=>{this.memberService.delete(t.member_id).subscribe({next:e=>{this.triggerGetMember(void 0),this.toast.success("Success","Member deleted successfully")},error:e=>{console.error(e),this.toast.error("Failed","Failed to delete member")}})},reject:e=>{e===Fe.REJECT||Fe.CANCEL}})}handleActionClick(t,e){e.stopPropagation(),this.selectedMember=t,this.displayMemberModal=!0}triggerGetMember(t){let e={skip:this.pageIndex*this.contentPerPage,limit:this.contentPerPage};this.searchTerm&&this.searchTerm.trim()!==""&&(e.search=this.searchTerm.trim()),this.memberService.listWithTotal(e).subscribe(n=>{this.total=n.total,this.convertMemberSet(n.data)})}convertMemberSet(t){let e=t.map(n=>H(U({},n),{id:n.member_id??0,action:"viewTemplate",status:n.is_active?"Active":"Inactive"}));setTimeout(()=>{this.membersData=e},200)}onPageChange(t){this.pageIndex=t,this.triggerGetMember(void 0)}onContentPerPageChange(t){this.contentPerPage=t,this.pageIndex=0,this.triggerGetMember(void 0)}onSearchChange(t){this.searchTerm=t,this.pageIndex=0,this.triggerGetMember(void 0)}static \u0275fac=function(e){return new(e||i)(w(rn),w(G),w(pe),w(te),w(le),w(Ct))};static \u0275cmp=R({type:i,selectors:[["app-add-member"]],decls:11,vars:22,consts:[["viewTemplate",""],["menu","matMenu"],[3,"title","icon","showBack"],[1,"card-wrapper"],[1,"card"],[3,"saveSuccess","cancel","editFormValues"],[1,"table-wrapper"],[3,"pageChange","searchDataChange","contentPerPageChange","dataSet","columns","showDateFilter","actionTemplate","totalRecords","pageIndex","contentPerPage","enableRowActions"],["header","Member Details","styleClass","member-details-dialog",3,"visibleChange","visible","modal","breakpoints","draggable","resizable"],["class","member-details",4,"ngIf"],["mat-icon-button","",1,"menu-trigger",3,"click","matMenuTriggerFor"],[1,"pi","pi-ellipsis-v"],[1,"menu-dropdown"],["mat-menu-item","",3,"click"],[1,"pi","pi-eye"],[1,"pi","pi-pencil"],[1,"pi","pi-trash"],[1,"pi",3,"ngClass"],[1,"member-details"],[1,"detail-row"]],template:function(e,n){if(e&1){let o=E();h(0,"app-title-card",2),s(1,"div",3)(2,"mat-card",4)(3,"add-member-form",5),v("saveSuccess",function(a){return b(o),C(n.triggerGetMember(a))})("cancel",function(){return b(o),C(n.onFormCancel())}),c()()(),h(4,"p-confirmDialog"),s(5,"div",6)(6,"simple-grid",7),v("pageChange",function(a){return b(o),C(n.onPageChange(a))})("searchDataChange",function(a){return b(o),C(n.onSearchChange(a))})("contentPerPageChange",function(a){return b(o),C(n.onContentPerPageChange(a))}),c()(),y(7,Sh,20,3,"ng-template",null,0,Pe),s(9,"p-dialog",8),N("visibleChange",function(a){return b(o),z(n.displayMemberModal,a)||(n.displayMemberModal=a),C(a)}),y(10,kh,18,8,"div",9),c()}if(e&2){let o=ge(8);g("title","Members")("icon","group")("showBack",!0),d(3),g("editFormValues",n.editMember),d(3),g("dataSet",n.membersData)("columns",n.columns)("showDateFilter",!1)("actionTemplate",o)("totalRecords",n.total)("pageIndex",n.pageIndex)("contentPerPage",n.contentPerPage)("enableRowActions",!1),d(3),st(se(20,Oh)),L("visible",n.displayMemberModal),g("modal",!0)("breakpoints",se(21,wh))("draggable",!1)("resizable",!1),d(),g("ngIf",n.selectedMember)}},dependencies:[Se,W,Re,be,Pc,xc,yc,ze,xo,he,wn,Mr],styles:[".table-wrapper[_ngcontent-%COMP%]{margin-bottom:1rem;background:#fff;border-radius:12px;border:1px solid #e5e7eb;box-shadow:0 2px 8px #0000000d;overflow:hidden;padding:0}.table-wrapper[_ngcontent-%COMP%]     table{width:100%;border-collapse:collapse;font-size:14px}.table-wrapper[_ngcontent-%COMP%]     table thead{background-color:#5d157c;color:#fff}.table-wrapper[_ngcontent-%COMP%]     table thead th{padding:14px 16px;font-weight:600;text-align:left;white-space:nowrap;border:none}.table-wrapper[_ngcontent-%COMP%]     table tbody tr{border-bottom:1px solid #e5e7eb;transition:background .2s}.table-wrapper[_ngcontent-%COMP%]     table tbody tr:nth-child(odd){background-color:#fff}.table-wrapper[_ngcontent-%COMP%]     table tbody tr:nth-child(2n){background-color:#faf5ff}.table-wrapper[_ngcontent-%COMP%]     table tbody tr:hover{background-color:#f3e8ff}.table-wrapper[_ngcontent-%COMP%]     table tbody tr td{padding:14px 16px;vertical-align:middle;color:#111827;font-weight:500}.menu-trigger[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;border:none;background:transparent;color:#6b7280;border-radius:6px;cursor:pointer;transition:all .2s ease;padding:0}.menu-trigger[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.menu-trigger[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#5d157c}  .menu-dropdown{min-width:160px!important;border-radius:10px!important;box-shadow:0 10px 30px #00000026,0 4px 12px #00000014!important;border:1px solid #d1d5db!important;margin-top:4px!important}  .menu-dropdown .mat-mdc-menu-content{padding:6px 0!important}  .menu-dropdown .mat-mdc-menu-item{font-family:Inter,sans-serif!important;font-size:14px!important;min-height:40px!important;color:#374151!important;padding:0 16px!important}  .menu-dropdown .mat-mdc-menu-item i{font-size:14px!important;color:#6b7280!important;margin-right:10px!important}  .menu-dropdown .mat-mdc-menu-item:hover{background-color:#f3f4f6!important;color:#5d157c!important}  .menu-dropdown .mat-mdc-menu-item:hover i{color:#5d157c!important}.member-details[_ngcontent-%COMP%]{font-size:14px}.member-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{margin-bottom:1rem;display:flex;align-items:center;padding-bottom:.5rem;border-bottom:1px solid #f0f0f0}.member-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.member-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{width:140px;color:#666;font-weight:600}  .member-details-dialog .p-dialog-header{background-color:#5d157c;color:#fff;padding:1rem}  .member-details-dialog .p-dialog-title{color:#fff!important;font-weight:600}  .member-details-dialog .p-dialog-header-icon{color:#fff!important}  .member-details-dialog .p-dialog-header-icon:hover{background-color:#ffffff1a!important;color:#fff!important}  .member-details-dialog .p-dialog-content{padding:1.5rem;border-bottom-left-radius:6px;border-bottom-right-radius:6px}"]})};function Th(i,t){i&1&&(s(0,"div",12),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"enquiry.member_required")," "))}function Eh(i,t){i&1&&(s(0,"div",12),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"enquiry.valid_type_required")," "))}function Fh(i,t){i&1&&(s(0,"div",12),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"enquiry.valid_mobile_required")," "))}function Dh(i,t){i&1&&(s(0,"div",12),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"enquiry.valid_description_required")," "))}var Sr=class i{constructor(t,e,n,o,r,a){this.fb=t;this.authService=e;this.enquiryService=n;this.productService=o;this.memberService=r;this.toast=a;this.enquiryForm=this.fb.group({enquiry_text:["",A.required],mobile_number:[""],product_id:[""],user_id:[""],name:[""]})}products=[];members=[];enquiryForm;formExpanded=!1;editFormValues;saveSuccess=new Ee;filteredMembers=this.members;selectedMember;submitBtnText="Add";selectedMemberId;ngOnInit(){this.productService.list().subscribe(t=>{this.products=t}),this.memberService.listWithTotal().subscribe(t=>{this.members=t.data})}ngOnChanges(t){t.editFormValues&&t.editFormValues.currentValue!=null&&this.setEditFormValue()}onSelectMember(t){let e=t.value,n=this.members.find(o=>o.member_id===e);this.enquiryForm.controls.mobile_number?.setValue(n?.member_mobile_number),this.enquiryForm.controls.name?.setValue(n?.member_name)}setEditFormValue(){this.submitBtnText="Update",this.selectedMemberId=this.editFormValues?.user_id,this.enquiryForm.patchValue({enquiry_text:this.editFormValues?.enquiry_text,mobile_number:this.editFormValues?.mobile_number,product_id:this.editFormValues?.product_id,user_id:this.editFormValues?.user_id}),this.formExpanded=!0}onSubmit(){if(this.enquiryForm.valid){let t=this.editFormValues?.enquiry_id,e=this.enquiryForm.value;e.provider_id=this.authService.getSelectedProviderId(),this.enquiryService.createOrUpdate(e,t).subscribe({next:n=>{this.saveSuccess.emit(n),this.editFormValues=void 0,this.enquiryForm.reset(),this.formExpanded=!0,this.toast.success("Success","Enquiry saved successfully")},error:n=>{console.error("Error occurred:",n),this.toast.error("Error",n?.message||"Failed to save enquiry")}})}}buttonClicked(t){t.buttonType===1?this.onSubmit():t.buttonType===2&&this.onCancel()}onCancel(){this.submitBtnText=="Add"?(this.enquiryForm.reset(),this.formExpanded=!1):this.setEditFormValue()}static \u0275fac=function(e){return new(e||i)(w(ue),w(G),w(yo),w(It),w(rn),w(te))};static \u0275cmp=R({type:i,selectors:[["add-enquiry"]],inputs:{editFormValues:"editFormValues"},outputs:{saveSuccess:"saveSuccess"},features:[Ze],decls:30,vars:38,consts:[[3,"buttonEventTriggered","compName","title","inputForm","isExpanded","submitBtnText"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","name"],["formControlName","user_id","optionValue","member_id","optionLabel","member_name","styleClass","full-width-dropdown",1,"custom-dropdown",3,"onChange","options","placeholder"],["class","error-message",4,"ngIf"],["for","product"],["formControlName","product_id","optionValue","product_id","optionLabel","product_name","styleClass","full-width-dropdown",1,"custom-dropdown",3,"options","placeholder"],["for","mobile"],["id","mobile","type","number","formControlName","mobile_number",3,"placeholder"],["for","description"],["id","description","type","text","formControlName","enquiry_text",3,"placeholder"],[1,"error-message"]],template:function(e,n){if(e&1&&(s(0,"form-template",0),M(1,"translate"),v("buttonEventTriggered",function(r){return n.buttonClicked(r)}),s(2,"form",1),v("ngSubmit",function(){return n.onSubmit()}),s(3,"div",2)(4,"label",3),p(5),M(6,"translate"),c(),s(7,"p-dropdown",4),M(8,"translate"),v("onChange",function(r){return n.onSelectMember(r)}),c(),y(9,Th,3,3,"div",5),s(10,"label",6),p(11),M(12,"translate"),c(),h(13,"p-dropdown",7),M(14,"translate"),y(15,Eh,3,3,"div",5),c(),s(16,"div",2)(17,"label",8),p(18),M(19,"translate"),c(),h(20,"input",9),M(21,"translate"),y(22,Fh,3,3,"div",5),c(),s(23,"div",2)(24,"label",10),p(25),M(26,"translate"),c(),h(27,"input",11),M(28,"translate"),y(29,Dh,3,3,"div",5),c()()()),e&2){let o,r,a,l;g("compName","add-enquiry")("title",O(1,20,"enquiry.add_enquiry"))("inputForm",n.enquiryForm)("isExpanded",n.formExpanded)("submitBtnText",n.submitBtnText),d(2),g("formGroup",n.enquiryForm),d(3),S(O(6,22,"enquiry.customer_name")),d(2),g("options",n.members)("placeholder",O(8,24,"enquiry.select_member")),d(2),g("ngIf",((o=n.enquiryForm.get("user_id"))==null?null:o.invalid)&&((o=n.enquiryForm.get("user_id"))==null?null:o.touched)),d(2),T(" ",O(12,26,"enquiry.product"),""),d(2),g("options",n.products)("placeholder",O(14,28,"enquiry.select_product")),d(2),g("ngIf",((r=n.enquiryForm.get("member_id"))==null?null:r.invalid)&&((r=n.enquiryForm.get("member_id"))==null?null:r.touched)),d(3),T(" ",O(19,30,"enquiry.mobile_number"),""),d(2),g("placeholder",O(21,32,"enquiry.mobile_placeholder")),d(2),g("ngIf",((a=n.enquiryForm.get("mobile_number"))==null?null:a.invalid)&&((a=n.enquiryForm.get("mobile_number"))==null?null:a.touched)),d(3),T(" ",O(26,34,"enquiry.description"),""),d(2),g("placeholder",O(28,36,"enquiry.description_placeholder")),d(2),g("ngIf",((l=n.enquiryForm.get("enquiry_text"))==null?null:l.invalid)&&((l=n.enquiryForm.get("enquiry_text"))==null?null:l.touched))}},dependencies:[W,Ve,ye,Z,ct,Y,fe,Me,Oe,Le,ce]})};function Vh(i,t){if(i&1){let e=E();s(0,"div",6),v("click",function(o){let r=b(e).$implicit,a=_();return C(a.handleActionClick(r,o))}),h(1,"i",7),c()}}var kr=class i{constructor(t,e,n,o,r,a){this.enquiryService=t;this.authServ=e;this.productService=n;this.fb=o;this.confirmationService=r;this.toast=a;this.enquiryForm=this.fb.group({customerName:["",A.required],mobile_number:["",[A.required,A.pattern(/^[0-9]{10}$/)]],enquiry_text:["",A.required],product_id:["",A.required]}),this.provider_id=e.getSelectedProviderId()}enquiryForm;pageIndex=0;contentPerPage=5;total=0;searchTerm="";provider_id=0;ngOnInit(){this.triggerGetEnq(void 0)}columns=[{displayName:"Mobile",displayValue:"mobile_number"},{displayName:"Message",displayValue:"enquiry_text"}];enquiryData=[];editEnquiry;edit(t){this.editEnquiry=t}remove(t){this.confirmDelete(t)}confirmDelete(t){this.confirmationService.confirm({message:"Are you sure you want to delete this enquiry?",header:"Delete Enquiry",icon:"pi pi-info-circle",acceptLabel:"Delete",rejectLabel:"Cancel",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-secondary",accept:()=>{this.enquiryService.delete(t.enquiry_id).subscribe({next:e=>{this.triggerGetEnq(void 0),this.toast.success("Success","Enquiry deleted successfully")},error:e=>{console.error(e),this.toast.error("Failed","Failed to delete enquiry")}})},reject:e=>{e===Fe.REJECT||Fe.CANCEL}})}handleActionClick(t,e){e.stopPropagation()}triggerGetEnq(t){let e={skip:this.pageIndex*this.contentPerPage,limit:this.contentPerPage,provider_id:this.provider_id};this.searchTerm&&this.searchTerm.trim()!==""&&(e.search=this.searchTerm.trim()),this.enquiryService.listWithTotal(e).subscribe(n=>{this.total=n.total,this.convertGroupSet(n.data)})}convertGroupSet(t){let e=t.map(n=>H(U({},n),{id:n.enquiry_id??0,action:"viewTemplate"}));setTimeout(()=>{this.enquiryData=e},200)}onPageChange(t){this.pageIndex=t,this.triggerGetEnq(void 0)}onContentPerPageChange(t){this.contentPerPage=t,this.pageIndex=0,this.triggerGetEnq(void 0)}onSearchChange(t){this.searchTerm=t,this.pageIndex=0,this.triggerGetEnq(void 0)}static \u0275fac=function(e){return new(e||i)(w(yo),w(G),w(It),w(ue),w(pe),w(te))};static \u0275cmp=R({type:i,selectors:[["app-enquiry"]],decls:8,vars:11,consts:[["viewTemplate",""],[3,"title","icon","showBack"],[1,"card-wrapper"],[1,"card"],[3,"saveSuccess","editFormValues"],[3,"onEditTrigger","onDeleteTrigger","pageChange","searchDataChange","contentPerPageChange","dataSet","columns","showDateFilter","actionTemplate","totalRecords","pageIndex","contentPerPage"],[1,"view",3,"click"],[1,"pi","pi-paperclip"]],template:function(e,n){if(e&1){let o=E();h(0,"app-title-card",1),s(1,"div",2)(2,"mat-card",3)(3,"add-enquiry",4),v("saveSuccess",function(a){return b(o),C(n.triggerGetEnq(a))}),c()()(),h(4,"p-confirmDialog"),s(5,"simple-grid",5),v("onEditTrigger",function(a){return b(o),C(n.edit(a))})("onDeleteTrigger",function(a){return b(o),C(n.remove(a))})("pageChange",function(a){return b(o),C(n.onPageChange(a))})("searchDataChange",function(a){return b(o),C(n.onSearchChange(a))})("contentPerPageChange",function(a){return b(o),C(n.onContentPerPageChange(a))}),c(),y(6,Vh,2,0,"ng-template",null,0,Pe)}if(e&2){let o=ge(7);g("title","Enquiry")("icon","assignment_ind")("showBack",!0),d(3),g("editFormValues",n.editEnquiry),d(2),g("dataSet",n.enquiryData)("columns",n.columns)("showDateFilter",!1)("actionTemplate",o)("totalRecords",n.total)("pageIndex",n.pageIndex)("contentPerPage",n.contentPerPage)}},dependencies:[Re,be,ze,he,Sr]})};var Ei=class i extends on{constructor(e,n){let o=n.getSelectedProviderId(),r={create:Q.EXPENSE.URL,update:Q.EXPENSE.URL,list:`${Q.EXPENSE.URL}/${o}`,delete:Q.EXPENSE.URL};super(e,"expense_id",r,"expenses");this.authServ=n}updateProviderUrl(e){if(!e||e===0)return;let n={create:Q.EXPENSE.URL,update:Q.EXPENSE.URL,list:`${Q.EXPENSE.URL}/${e}`,delete:Q.EXPENSE.URL};this.setUrl(n)}static \u0275fac=function(n){return new(n||i)(Ae($e),Ae(G))};static \u0275prov=Je({token:i,factory:i.\u0275fac,providedIn:"root"})};function Rh(i,t){if(i&1){let e=E();s(0,"div",18),v("click",function(){let o=b(e).$implicit,r=_();return C(r.selectType(o.value))}),p(1),c()}if(i&2){let e,n=t.$implicit,o=_();j("active",((e=o.expenseForm.get("expense_type"))==null?null:e.value)===n.value),d(),T(" ",n.name," ")}}function Lh(i,t){i&1&&(s(0,"div",19)(1,"mat-icon",20),p(2,"error_outline"),c(),s(3,"span"),p(4),M(5,"translate"),c()()),i&2&&(d(4),S(O(5,1,"group.type_required")))}function zh(i,t){i&1&&(s(0,"span"),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"group.amount_required")," "))}function Nh(i,t){i&1&&(s(0,"span"),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"group.amount_contains_only_digits")," "))}function Bh(i,t){if(i&1&&(s(0,"div",19)(1,"mat-icon",20),p(2,"error_outline"),c(),y(3,zh,3,3,"span",21)(4,Nh,3,3,"span",21),c()),i&2){let e,n,o=_();d(3),g("ngIf",(e=o.expenseForm.get("expense_amount"))==null||e.errors==null?null:e.errors.required),d(),g("ngIf",(n=o.expenseForm.get("expense_amount"))==null||n.errors==null?null:n.errors.pattern)}}function jh(i,t){i&1&&(s(0,"div",19)(1,"mat-icon",20),p(2,"error_outline"),c(),s(3,"span"),p(4),M(5,"translate"),c()()),i&2&&(d(4),S(O(5,1,"group.expense_date_is_required")))}var Ir=class i{constructor(t,e,n,o){this.fb=t;this.expenseService=e;this.authServ=n;this.toast=o;this.expenseForm=this.fb.group({expense_amount:["",[A.required,A.pattern("^[0-9]+$")]],expense_type:["",[A.required]],expense_description:[""],expense_image_url:[""],ex_date:["",A.required]})}types=Yc;submitBtnText="Add";fileUploadComponent;editFormValues;saveSuccess=new Ee;formExpanded=!1;expenseForm;ngOnChanges(t){t.editFormValues&&t.editFormValues.currentValue!=null&&this.setEditFormValue()}selectType(t){this.expenseForm.get("expense_type")?.setValue(t),this.expenseForm.get("expense_type")?.markAsTouched()}setEditFormValue(){this.submitBtnText="Update",this.expenseForm.controls.expense_amount?.setValue(this.editFormValues?.expense_amount),this.expenseForm.controls.expense_type?.setValue(this.editFormValues?.expense_type),this.expenseForm.controls.expense_description?.setValue(this.editFormValues?.expense_description),this.expenseForm.controls.expense_image_url?.setValue(this.editFormValues?.expense_image_url);let t=this.editFormValues?.ex_date?new Date(this.editFormValues?.ex_date):null;this.expenseForm.controls.ex_date?.setValue(t),this.formExpanded=!0}afterUploadFile(t){this.expenseForm?.get("expense_image_url")?.setValue(t[0])}onSubmit(){if(Object.keys(this.expenseForm.controls).forEach(t=>{this.expenseForm.get(t)?.markAsTouched()}),this.expenseForm.valid){let t=this.editFormValues?.expense_id,e=this.expenseForm.value;e.provider_id=this.authServ.getSelectedProviderId(),this.expenseService.createOrUpdate(e,t).subscribe({next:n=>{this.saveSuccess.emit(n),this.resetForm(),this.toast.success("Success","Expense saved successfully")},error:n=>{console.error("Error saving expense:",n);let o=n?.error?.message||"Failed to save expense";this.toast.error("Error",o)}})}else this.toast.error("Validation Error","Please fill all required fields correctly")}buttonClicked(t){t.buttonType===1?this.onSubmit():t.buttonType===2&&this.onCancel()}onCancel(){this.submitBtnText==="Add"?this.resetForm():(this.setEditFormValue(),this.formExpanded=!1)}resetForm(){this.editFormValues=void 0,this.expenseForm.reset(),Object.keys(this.expenseForm.controls).forEach(t=>{this.expenseForm.get(t)?.markAsUntouched(),this.expenseForm.get(t)?.markAsPristine()}),this.fileUploadComponent&&this.fileUploadComponent.reset(),this.formExpanded=!1,this.submitBtnText="Add"}static \u0275fac=function(e){return new(e||i)(w(ue),w(Ei),w(G),w(te))};static \u0275cmp=R({type:i,selectors:[["add-expenses"]],viewQuery:function(e,n){if(e&1&&nt(ht,5),e&2){let o;it(o=ot())&&(n.fileUploadComponent=o.first)}},inputs:{editFormValues:"editFormValues"},outputs:{saveSuccess:"saveSuccess"},features:[Ze],decls:44,vars:30,consts:[["picker",""],[3,"buttonEventTriggered","compName","title","inputForm","showBtnContainer","submitBtnText","isExpanded"],[1,"expense-form",3,"ngSubmit","formGroup"],[1,"form-group"],[1,"form-label"],[1,"type-chips"],["class","type-chip",3,"active","click",4,"ngFor","ngForOf"],["class","error-message",4,"ngIf"],[1,"input-wrapper"],[1,"currency-symbol"],["matInput","","id","expense_amount","type","text","formControlName","expense_amount","placeholder","2000","pattern","^[0-9]*$",1,"styled-input"],[1,"optional-text"],["matInput","","id","expense_description","type","text","formControlName","expense_description","placeholder","e.g., Petrol, Groceries",1,"styled-input"],[1,"date-input-wrapper"],["matInput","","formControlName","ex_date","placeholder","Select date","readonly","",1,"styled-input","date-input",3,"click","matDatepicker"],[1,"calendar-icon",3,"for"],["matDatepickerToggleIcon",""],[3,"uploadedUrls","enableMultiple","uploadedFileName"],[1,"type-chip",3,"click"],[1,"error-message"],[1,"error-icon"],[4,"ngIf"]],template:function(e,n){if(e&1){let o=E();s(0,"form-template",1),v("buttonEventTriggered",function(a){return b(o),C(n.buttonClicked(a))}),s(1,"form",2),v("ngSubmit",function(){return b(o),C(n.onSubmit())}),s(2,"div",3)(3,"label",4),p(4),M(5,"translate"),c(),s(6,"div",5),y(7,Rh,2,3,"div",6),c(),y(8,Lh,6,3,"div",7),c(),s(9,"div",3)(10,"label",4),p(11),M(12,"translate"),c(),s(13,"div",8)(14,"span",9),p(15,"\u20B9"),c(),h(16,"input",10),c(),y(17,Bh,5,2,"div",7),c(),s(18,"div",3)(19,"label",4),p(20),M(21,"translate"),s(22,"span",11),p(23,"(optional)"),c()(),h(24,"input",12),c(),s(25,"div",3)(26,"label",4),p(27),M(28,"translate"),c(),s(29,"div",13)(30,"input",14),v("click",function(){b(o);let a=ge(35);return C(a.open())}),c(),s(31,"mat-datepicker-toggle",15)(32,"mat-icon",16),p(33,"calendar_today"),c()(),h(34,"mat-datepicker",null,0),c(),y(36,jh,6,3,"div",7),c(),s(37,"div",3)(38,"label",4),p(39),M(40,"translate"),s(41,"span",11),p(42,"(optional)"),c()(),s(43,"file-upload",17),v("uploadedUrls",function(a){return b(o),C(n.afterUploadFile(a))}),c()()()()}if(e&2){let o,r,a,l,m=ge(35);g("compName","add-expense")("title","Add Expense")("inputForm",n.expenseForm)("showBtnContainer",!0)("submitBtnText",n.submitBtnText)("isExpanded",n.formExpanded),d(),g("formGroup",n.expenseForm),d(3),S(O(5,20,"group.type")),d(3),g("ngForOf",n.types),d(),g("ngIf",((o=n.expenseForm.get("expense_type"))==null?null:o.invalid)&&((o=n.expenseForm.get("expense_type"))==null?null:o.touched)),d(3),S(O(12,22,"group.amount")),d(6),g("ngIf",((r=n.expenseForm.get("expense_amount"))==null?null:r.invalid)&&((r=n.expenseForm.get("expense_amount"))==null?null:r.touched)),d(3),S(O(21,24,"group.description")),d(7),S(O(28,26,"group.book_date")),d(3),g("matDatepicker",m),d(),g("for",m),d(5),g("ngIf",((a=n.expenseForm.get("ex_date"))==null?null:a.invalid)&&((a=n.expenseForm.get("ex_date"))==null?null:a.touched)),d(3),S(O(40,28,"group.attachment")),d(4),g("enableMultiple",!1)("uploadedFileName",(l=n.expenseForm.get("expense_image_url"))==null?null:l.value)}},dependencies:[ee,W,ht,Mc,Oc,Sc,wc,fi,ui,ye,Z,Y,fe,Hs,Me,Oe,Le,ce],styles:[".full-width-dropdown{width:100%}  .full-width-dropdown>span{padding:.5rem}  .mat-datepicker-input{color:#000!important;-webkit-text-fill-color:#000000!important}  .mat-mdc-input-element,   .mat-input-element{color:#000!important;-webkit-text-fill-color:#000000!important}  .mat-mdc-input-element::placeholder,   .mat-input-element::placeholder{color:#9e9e9e!important;-webkit-text-fill-color:#9e9e9e!important;opacity:1}  .mat-mdc-form-field .mat-mdc-input-element{color:#000!important;-webkit-text-fill-color:#000000!important}.expense-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;max-width:480px;margin:0 auto;padding:.5rem;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif}.expense-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.expense-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#1a1a1a;margin-bottom:.25rem}.expense-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]   .optional-text[_ngcontent-%COMP%]{font-weight:400;color:#757575;font-size:.813rem}.expense-form[_ngcontent-%COMP%]   .type-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.expense-form[_ngcontent-%COMP%]   .type-chips[_ngcontent-%COMP%]   .type-chip[_ngcontent-%COMP%]{padding:8px 16px;font-size:.875rem;font-weight:500;color:#424242;background-color:#f5f5f5;border:1px solid #e0e0e0;border-radius:8px;cursor:pointer;transition:all .15s ease;-webkit-user-select:none;user-select:none}.expense-form[_ngcontent-%COMP%]   .type-chips[_ngcontent-%COMP%]   .type-chip.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#5d157c,#8e20bd,#3c0e50);color:#fff;border-color:#6b0d85}.expense-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.expense-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .currency-symbol[_ngcontent-%COMP%]{position:absolute;left:12px;font-size:.938rem;font-weight:500;color:#616161;z-index:1}.expense-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:32px;color:#000!important;-webkit-text-fill-color:#000000!important}.expense-form[_ngcontent-%COMP%]   .date-input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.expense-form[_ngcontent-%COMP%]   .date-input-wrapper[_ngcontent-%COMP%]   .date-input[_ngcontent-%COMP%]{padding-right:48px;color:#000!important;-webkit-text-fill-color:#000000!important}.expense-form[_ngcontent-%COMP%]   .date-input-wrapper[_ngcontent-%COMP%]   .calendar-icon[_ngcontent-%COMP%]{position:absolute;right:8px;top:50%;transform:translateY(-50%);color:#616161}.expense-form[_ngcontent-%COMP%]   .date-input-wrapper[_ngcontent-%COMP%]   .calendar-icon[_ngcontent-%COMP%]     .mat-mdc-icon-button{width:32px;height:32px;padding:4px;display:flex;align-items:center;justify-content:center}.expense-form[_ngcontent-%COMP%]   .date-input-wrapper[_ngcontent-%COMP%]   .calendar-icon[_ngcontent-%COMP%]     .mat-mdc-icon-button:hover{background-color:#f5f5f5}.expense-form[_ngcontent-%COMP%]   .date-input-wrapper[_ngcontent-%COMP%]   .calendar-icon[_ngcontent-%COMP%]     mat-icon{font-size:20px;width:20px;height:20px;line-height:20px}.expense-form[_ngcontent-%COMP%]   .styled-input[_ngcontent-%COMP%]{width:100%;padding:12px 14px;font-size:.938rem;border:1.5px solid #e0e0e0;border-radius:8px;background-color:#fff!important;color:#000!important;-webkit-text-fill-color:#000000!important;font-weight:500;transition:all .2s ease;font-family:inherit}.expense-form[_ngcontent-%COMP%]   .styled-input[_ngcontent-%COMP%]::placeholder{color:#9e9e9e!important;-webkit-text-fill-color:#9e9e9e!important;font-weight:400;opacity:1}.expense-form[_ngcontent-%COMP%]   .styled-input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#9e9e9e!important;-webkit-text-fill-color:#9e9e9e!important;font-weight:400;opacity:1}.expense-form[_ngcontent-%COMP%]   .styled-input[_ngcontent-%COMP%]::-moz-placeholder{color:#9e9e9e!important;font-weight:400;opacity:1}.expense-form[_ngcontent-%COMP%]   .styled-input[_ngcontent-%COMP%]:-ms-input-placeholder{color:#9e9e9e!important;font-weight:400;opacity:1}.expense-form[_ngcontent-%COMP%]   .styled-input[_ngcontent-%COMP%]:hover{border-color:#bdbdbd}.expense-form[_ngcontent-%COMP%]   .styled-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#6b0d85;box-shadow:0 0 0 3px #6b0d851a;color:#000!important;-webkit-text-fill-color:#000000!important}.expense-form[_ngcontent-%COMP%]   .styled-input[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;cursor:not-allowed;opacity:.6}.expense-form[_ngcontent-%COMP%]   .styled-input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#dc3545}.expense-form[_ngcontent-%COMP%]   .styled-input.ng-invalid.ng-touched[_ngcontent-%COMP%]:focus{border-color:#dc3545;box-shadow:0 0 0 3px #dc354526}.expense-form[_ngcontent-%COMP%]   .styled-input.date-input[_ngcontent-%COMP%]{cursor:pointer;color:#000!important;-webkit-text-fill-color:#000000!important;font-weight:500}.expense-form[_ngcontent-%COMP%]   .styled-input.date-input[_ngcontent-%COMP%]::placeholder{color:#9e9e9e!important;-webkit-text-fill-color:#9e9e9e!important;font-weight:400}.expense-form[_ngcontent-%COMP%]   .styled-input[matinput][_ngcontent-%COMP%], .expense-form[_ngcontent-%COMP%]   .styled-input.mat-input-element[_ngcontent-%COMP%], .expense-form[_ngcontent-%COMP%]   .styled-input.mat-mdc-input-element[_ngcontent-%COMP%]{color:#000!important;-webkit-text-fill-color:#000000!important}.expense-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.375rem;color:#dc3545;font-size:.75rem;margin-top:.25rem;animation:_ngcontent-%COMP%_slideIn .2s ease-out;font-weight:500}.expense-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:1rem;width:1rem;height:1rem;color:#dc3545}.expense-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:1.4;color:#dc3545}.expense-form[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#5d157c,#8e20bd,#3c0e50);color:#fff;padding:12px 24px;border:none;border-radius:8px;cursor:pointer;font-weight:600;font-size:.938rem;display:flex;align-items:center;justify-content:center;gap:.5rem;transition:all .2s ease;box-shadow:0 2px 4px #6b0d8533;margin-top:.5rem}.expense-form[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(#00000026,#00000026),linear-gradient(135deg,#5d157c,#8e20bd,#3c0e50);box-shadow:0 4px 8px #6b0d854d;transform:translateY(-1px)}.expense-form[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0);box-shadow:0 1px 2px #6b0d8533}.expense-form[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:disabled{background:#e0e0e0;color:#9e9e9e;cursor:not-allowed;box-shadow:none}.expense-form[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.25rem;width:1.25rem;height:1.25rem}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.expense-form[_ngcontent-%COMP%]{max-width:100%;padding:.75rem;gap:1.25rem}.expense-form[_ngcontent-%COMP%]   .type-chips[_ngcontent-%COMP%]{gap:.375rem}.expense-form[_ngcontent-%COMP%]   .type-chips[_ngcontent-%COMP%]   .type-chip[_ngcontent-%COMP%]{padding:6px 12px;font-size:.813rem}.expense-form[_ngcontent-%COMP%]   .date-input-wrapper[_ngcontent-%COMP%]   .calendar-icon[_ngcontent-%COMP%]     .mat-mdc-icon-button{width:30px;height:30px}.expense-form[_ngcontent-%COMP%]   .date-input-wrapper[_ngcontent-%COMP%]   .calendar-icon[_ngcontent-%COMP%]     mat-icon{font-size:18px;width:18px;height:18px}}@media (max-width: 480px){.expense-form[_ngcontent-%COMP%]{gap:1rem}.expense-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-size:.813rem}.expense-form[_ngcontent-%COMP%]   .styled-input[_ngcontent-%COMP%]{padding:10px 12px;font-size:.875rem}.expense-form[_ngcontent-%COMP%]   .type-chips[_ngcontent-%COMP%]   .type-chip[_ngcontent-%COMP%]{font-size:.75rem;padding:6px 10px}.expense-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .currency-symbol[_ngcontent-%COMP%]{font-size:.875rem;left:10px}.expense-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:28px}.expense-form[_ngcontent-%COMP%]   .date-input-wrapper[_ngcontent-%COMP%]   .date-input[_ngcontent-%COMP%]{padding-right:44px}.expense-form[_ngcontent-%COMP%]   .date-input-wrapper[_ngcontent-%COMP%]   .calendar-icon[_ngcontent-%COMP%]{right:6px}.expense-form[_ngcontent-%COMP%]   .date-input-wrapper[_ngcontent-%COMP%]   .calendar-icon[_ngcontent-%COMP%]     .mat-mdc-icon-button{width:28px;height:28px}.expense-form[_ngcontent-%COMP%]   .date-input-wrapper[_ngcontent-%COMP%]   .calendar-icon[_ngcontent-%COMP%]     mat-icon{font-size:18px;width:18px;height:18px}}@media (prefers-color-scheme: dark){.expense-form[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:#e0e0e0}.expense-form[_ngcontent-%COMP%]   .styled-input[_ngcontent-%COMP%]{background-color:#2c2c2c;border-color:#424242;color:#fff!important;-webkit-text-fill-color:#ffffff!important}.expense-form[_ngcontent-%COMP%]   .styled-input[_ngcontent-%COMP%]::placeholder{color:#757575!important;-webkit-text-fill-color:#757575!important}.expense-form[_ngcontent-%COMP%]   .styled-input[_ngcontent-%COMP%]:hover{border-color:#616161}.expense-form[_ngcontent-%COMP%]   .styled-input[_ngcontent-%COMP%]:focus{border-color:#8e20bd}.expense-form[_ngcontent-%COMP%]   .type-chip[_ngcontent-%COMP%]{background-color:#2c2c2c;border-color:#424242;color:#e0e0e0}.expense-form[_ngcontent-%COMP%]   .date-input-wrapper[_ngcontent-%COMP%]   .calendar-icon[_ngcontent-%COMP%]{color:#e0e0e0}.expense-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%], .expense-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%], .expense-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#ff6b6b}  .mat-datepicker-input,   .mat-mdc-input-element,   .mat-input-element{color:#fff!important;-webkit-text-fill-color:#ffffff!important}}"]})};function Gh(i,t){if(i&1){let e=E();s(0,"div",6),v("click",function(o){let r=b(e).$implicit,a=_();return C(a.handleActionClick(r,o))}),h(1,"i",7),c()}}var Tr=class i{constructor(t,e,n,o,r,a,l){this.expenseService=t;this.authService=e;this.confirmationService=n;this.toast=o;this.dialog=r;this.router=a;this.backHandleService=l}pageIndex=0;contentPerPage=dt;total=0;imageList=[];searchTerm="";date_from=null;date_to=null;providerChangeSubscription;ngOnInit(){let t=this.authService.getSelectedProviderId();t&&this.expenseService.updateProviderUrl(t),this.registerBackAction(),this.triggerGetExp(void 0),this.providerChangeSubscription=this.authService.providerChange$.subscribe(e=>{if(e){let n=this.authService.getSelectedProviderId();n&&(this.expenseService.updateProviderUrl(n),this.pageIndex=0,this.triggerGetExp(void 0))}})}ngOnDestroy(){this.providerChangeSubscription&&this.providerChangeSubscription.unsubscribe(),setTimeout(()=>{this.cleanupBackAction()},100)}registerBackAction(){let t=this.router.url;[t,t.split("?")[0],"/providers/expenses"].forEach((n,o)=>{let r={id:`expenses-back-action-${o}`,actionType:"navigate",backNavigationUrl:"/providers/dashboard",callback:()=>{},value:"",forPageUrl:n};this.backHandleService.backAction=this.backHandleService.backAction.filter(a=>!a.id.startsWith("expenses-back-action-")||a.forPageUrl!==n),this.backHandleService.backAction.push(r)})}cleanupBackAction(){let t=this.router.url,e=this.backHandleService.backAction.length;this.backHandleService.backAction=this.backHandleService.backAction.filter(n=>!n.id.startsWith("expenses-back-action-"))}columns=[{displayName:"Date",displayValue:"ex_date"},{displayName:"Expense",displayValue:"expense_description"},{displayName:"Action",displayValue:"action"}];expenseData=[];editExpense;edit(t){this.editExpense=t}remove(t){this.confirmDelete(t)}confirmDelete(t){this.confirmationService.confirm({message:"Are you sure you want to delete this expense?",header:"Delete Expense",icon:"pi pi-info-circle",acceptLabel:"Delete",rejectLabel:"Cancel",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-secondary",accept:()=>{this.expenseService.delete(t.expense_id).subscribe({next:e=>{this.triggerGetExp(void 0),this.toast.success("Success","Expense deleted successfully")},error:e=>{console.error(e),this.toast.error("Failed","Failed to delete expense")}})},reject:e=>{e===Fe.REJECT||Fe.CANCEL}})}handleActionClick(t,e){e?.preventDefault(),e?.stopPropagation(),t?.expense_image_url!=""?(this.imageList.push(t?.expense_image_url),this.dialog.open(Mo,{data:{images:this.imageList},panelClass:"image-preview-dialog",maxWidth:"100vw",maxHeight:"60vh",height:"60vh",width:"100vw",disableClose:!1})):this.toast.error("","No Files")}triggerGetExp(t){let e={skip:this.pageIndex*this.contentPerPage,limit:this.contentPerPage};this.searchTerm&&this.searchTerm.trim()!==""&&(e.search=this.searchTerm.trim()),this.date_from&&this.date_to&&(e.date_from=this.date_from,e.date_to=this.date_to),this.expenseService.listWithTotal(e).subscribe(n=>{this.total=n.total,this.convertExpenseSet(n.data)})}handlePageChange(t){this.expenseService.list({skip:t.skip,limit:t.limit}).subscribe(e=>{this.convertExpenseSet(e)})}convertExpenseSet(t){let e=t.map(n=>H(U({},n),{id:n.expense_id??0,action:"viewTemplate"}));setTimeout(()=>{this.expenseData=e},200)}downloadFile(t){}fetchFilterData(t){let{startDate:e,endDate:n}=t;this.expenseService.listWithTotal({date_from:e,date_to:n}).subscribe(o=>{this.total=o.total,this.convertExpenseSet(o.data)})}onPageChange(t){this.pageIndex=t,this.triggerGetExp(void 0)}onContentPerPageChange(t){this.contentPerPage=t,this.pageIndex=0,this.triggerGetExp(void 0)}onDateFilterChange(t){this.date_from=t?.startDate||null,this.date_to=t?.endDate||null,this.pageIndex=0,this.triggerGetExp(void 0)}onSearchChange(t){this.searchTerm=t,this.pageIndex=0,this.triggerGetExp(void 0)}static \u0275fac=function(e){return new(e||i)(w(Ei),w(G),w(pe),w(te),w(At),w(le),w(Ct))};static \u0275cmp=R({type:i,selectors:[["app-expenses"]],decls:8,vars:11,consts:[["viewTemplate",""],[3,"title","icon","showBack"],[1,"card-wrapper"],[1,"card"],[3,"saveSuccess","editFormValues"],[3,"onEditTrigger","onDeleteTrigger","pageChange","searchDataChange","contentPerPageChange","onDateFilterSelected","dataSet","columns","showDateFilter","actionTemplate","totalRecords","pageIndex","contentPerPage"],[1,"view",3,"click"],[1,"pi","pi-paperclip"]],template:function(e,n){if(e&1){let o=E();h(0,"app-title-card",1),s(1,"div",2)(2,"mat-card",3)(3,"add-expenses",4),v("saveSuccess",function(a){return b(o),C(n.triggerGetExp(a))}),c()()(),s(4,"simple-grid",5),v("onEditTrigger",function(a){return b(o),C(n.edit(a))})("onDeleteTrigger",function(a){return b(o),C(n.remove(a))})("pageChange",function(a){return b(o),C(n.onPageChange(a))})("searchDataChange",function(a){return b(o),C(n.onSearchChange(a))})("contentPerPageChange",function(a){return b(o),C(n.onContentPerPageChange(a))})("onDateFilterSelected",function(a){return b(o),C(n.onDateFilterChange(a))}),c(),h(5,"p-confirmDialog"),y(6,Gh,2,0,"ng-template",null,0,Pe)}if(e&2){let o=ge(7);g("title","Expenses")("icon","receipt_long")("showBack",!0),d(3),g("editFormValues",n.editExpense),d(),g("dataSet",n.expenseData)("columns",n.columns)("showDateFilter",!0)("actionTemplate",o)("totalRecords",n.total)("pageIndex",n.pageIndex)("contentPerPage",n.contentPerPage)}},dependencies:[Re,be,ze,he,Ir]})};function qh(i,t){i&1&&(s(0,"span"),p(1," Name is required. "),c())}function Wh(i,t){if(i&1&&(s(0,"div",9),y(1,qh,2,0,"span",10),c()),i&2){let e,n=_();d(),g("ngIf",(e=n.approvalForm.get("name"))==null||e.errors==null?null:e.errors.required)}}function Hh(i,t){i&1&&(s(0,"span"),p(1," Mobile number is required. "),c())}function $h(i,t){i&1&&(s(0,"span"),p(1," Please enter a valid 10-digit mobile number. "),c())}function Yh(i,t){if(i&1&&(s(0,"div",9),y(1,Hh,2,0,"span",10)(2,$h,2,0,"span",10),c()),i&2){let e,n,o=_();d(),g("ngIf",(e=o.approvalForm.get("mobile_number"))==null||e.errors==null?null:e.errors.required),d(),g("ngIf",((n=o.approvalForm.get("mobile_number"))==null||n.errors==null?null:n.errors.pattern)&&!(!((n=o.approvalForm.get("mobile_number"))==null||n.errors==null)&&n.errors.required))}}var Er=class i{constructor(t,e,n,o){this.fb=t;this.memberService=e;this.authServ=n;this.toast=o;this.approvalForm=this.fb.group({name:["",A.required],mobile_number:["",[A.required,A.pattern("^[0-9]{10}$")]],description:[""]})}submitBtnText="Approve";formExpanded=!0;editFormValues;saveSuccess=new Ee;approvalForm;ngOnChanges(t){t.editFormValues&&t.editFormValues.currentValue!=null&&this.setEditFormValue()}setEditFormValue(){this.submitBtnText="Update",this.approvalForm.controls.name?.setValue(this.editFormValues?.name),this.approvalForm.controls.mobile_number?.setValue(this.editFormValues?.mobile_number),this.approvalForm.controls.description?.setValue(this.editFormValues?.description),this.formExpanded=!0}onSubmit(){if(Object.keys(this.approvalForm.controls).forEach(t=>{this.approvalForm.get(t)?.markAsTouched()}),this.approvalForm.valid){let t={provider_id:this.authServ.getSelectedProviderId(),member_name:this.approvalForm.value.name,member_mobile_number:this.approvalForm.value.mobile_number.toString(),myid_enabled:!0,member_json_form:this.approvalForm.value.description?[{description:this.approvalForm.value.description,display_for_user:!0}]:[]};this.memberService.createOrUpdate(t,void 0).subscribe({next:e=>{this.saveSuccess.emit(H(U({},e),{isNew:!this.editFormValues})),this.editFormValues=void 0,this.approvalForm.reset(),this.formExpanded=!1,this.toast.success("Success","Member added successfully")},error:e=>{console.error("\u274C Error adding member:",e);let n=e?.error?.message||"Failed to add member";this.toast.error("Error",n)}})}else this.toast.error("Validation Error","Please fill in all required fields correctly.")}buttonClicked(t){t.buttonType===1?this.onSubmit():t.buttonType===2&&this.onCancel()}onCancel(){this.submitBtnText=="Approve"?(this.approvalForm.reset(),this.formExpanded=!1):(this.setEditFormValue(),this.formExpanded=!1)}static \u0275fac=function(e){return new(e||i)(w(ue),w(rn),w(G),w(te))};static \u0275cmp=R({type:i,selectors:[["add-approval"]],inputs:{editFormValues:"editFormValues"},outputs:{saveSuccess:"saveSuccess"},features:[Ze],decls:22,vars:13,consts:[[3,"buttonEventTriggered","compName","title","inputForm","showBtnContainer","submitBtnText","isExpanded"],[1,"approval-form",3,"ngSubmit","formGroup"],[1,"form-group"],[1,"required-indicator"],["matInput","","id","name","type","text","formControlName","name","placeholder","Enter name"],["class","error-message",4,"ngIf"],["matInput","","id","mobile_number","type","text","formControlName","mobile_number","placeholder","Enter 10-digit mobile number","maxlength","10"],[1,"optional-indicator"],["matInput","","id","description","formControlName","description","rows","3","placeholder","Add description...",1,"styled-textarea"],[1,"error-message"],[4,"ngIf"]],template:function(e,n){if(e&1&&(s(0,"form-template",0),v("buttonEventTriggered",function(r){return n.buttonClicked(r)}),s(1,"form",1),v("ngSubmit",function(){return n.onSubmit()}),s(2,"div",2)(3,"label"),p(4,"Name "),s(5,"span",3),p(6,"*"),c()(),h(7,"input",4),y(8,Wh,2,1,"div",5),c(),s(9,"div",2)(10,"label"),p(11,"Mobile Number "),s(12,"span",3),p(13,"*"),c()(),h(14,"input",6),y(15,Yh,3,2,"div",5),c(),s(16,"div",2)(17,"label"),p(18,"Description "),s(19,"span",7),p(20,"(optional)"),c()(),h(21,"textarea",8),c()()()),e&2){let o,r,a,l;g("compName","add-approval")("title","Add Access")("inputForm",n.approvalForm)("showBtnContainer",!0)("submitBtnText",n.submitBtnText)("isExpanded",n.formExpanded),d(),g("formGroup",n.approvalForm),d(6),j("invalid",((o=n.approvalForm.get("name"))==null?null:o.invalid)&&((o=n.approvalForm.get("name"))==null?null:o.touched)),d(),g("ngIf",((r=n.approvalForm.get("name"))==null?null:r.invalid)&&((r=n.approvalForm.get("name"))==null?null:r.touched)),d(6),j("invalid",((a=n.approvalForm.get("mobile_number"))==null?null:a.invalid)&&((a=n.approvalForm.get("mobile_number"))==null?null:a.touched)),d(),g("ngIf",((l=n.approvalForm.get("mobile_number"))==null?null:l.invalid)&&((l=n.approvalForm.get("mobile_number"))==null?null:l.touched))}},dependencies:[W,fi,ye,Z,Y,fe,bo,Me,Oe,Le],styles:[".full-width-dropdown{width:100%}  .full-width-dropdown>span{padding:.5rem}.approval-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.approval-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:#333}.approval-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required-indicator[_ngcontent-%COMP%]{color:#d32f2f;margin-left:2px}.approval-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .optional-indicator[_ngcontent-%COMP%]{color:#757575;font-weight:400;font-size:.9em}.approval-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[matInput][_ngcontent-%COMP%], .approval-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[matInput][_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #ddd;border-radius:4px;font-size:1rem;transition:border-color .3s ease}.approval-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[matInput][_ngcontent-%COMP%]:focus, .approval-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[matInput][_ngcontent-%COMP%]:focus{outline:none;border-color:#5d157c;box-shadow:0 0 0 2px #5d157c1a}.approval-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[matInput].invalid[_ngcontent-%COMP%], .approval-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[matInput].invalid[_ngcontent-%COMP%]{border-color:#d32f2f;background-color:#fff5f5}.approval-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea.styled-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px;font-family:inherit}.approval-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#d32f2f;font-size:.875rem;margin-top:.5rem;display:block;min-height:1.25rem}"]})};function Xh(i,t){if(i&1){let e=E();s(0,"div",6)(1,"button",7),v("click",function(o){let r=b(e).$implicit;return _().approve(r),C(o.stopPropagation())}),h(2,"i",8),c(),s(3,"button",9),v("click",function(o){let r=b(e).$implicit;return _().reject(r),C(o.stopPropagation())}),h(4,"i",10),c()()}if(i&2){let e=t.$implicit,n=_();d(),j("disabled",!n.isActionEnabled(e)),g("disabled",!n.isActionEnabled(e)),d(2),j("disabled",!n.isActionEnabled(e)),g("disabled",!n.isActionEnabled(e))}}var Fr=class i{constructor(t,e,n,o){this.approvalService=t;this.authService=e;this.confirmationService=n;this.toast=o}pageIndex=0;contentPerPage=dt;total=0;searchTerm="";providerChangeSubscription;ngOnInit(){let t=this.authService.getSelectedProviderId();t&&this.approvalService.updateProviderUrl(t),this.triggerGetApproval(void 0),this.providerChangeSubscription=this.authService.providerChange$.subscribe(e=>{if(e){let n=this.authService.getSelectedProviderId();n&&(this.approvalService.updateProviderUrl(n),this.pageIndex=0,this.triggerGetApproval(void 0))}})}ngOnDestroy(){this.providerChangeSubscription&&this.providerChangeSubscription.unsubscribe()}columns=[{displayName:"Name",displayValue:"name"},{displayName:"Desc",displayValue:"description"},{displayName:"Status",displayValue:"status"},{displayName:"Approve",displayValue:"action"}];approvalData=[];editApproval;triggerGetApproval(t){t?.isNew&&(this.pageIndex=0);let e={skip:0,limit:1e3};this.searchTerm&&this.searchTerm.trim()!==""&&(e.search=this.searchTerm.trim()),this.approvalService.listWithTotal(e).subscribe(n=>{let o=(n.data||[]).filter(m=>!m.status||m.status.toLowerCase()==="pending");this.total=o.length;let r=this.pageIndex*this.contentPerPage,a=r+this.contentPerPage,l=o.slice(r,a);this.convertApprovalSet(l),this.editApproval=void 0})}convertApprovalSet(t){let e=t.map(n=>{let o=n.id||n.approval_id||0;return H(U({},n),{approval_id:o,id:o,action:"viewTemplate"})});setTimeout(()=>{this.approvalData=e},200)}onPageChange(t){this.pageIndex=t,this.triggerGetApproval(void 0)}onContentPerPageChange(t){this.contentPerPage=t,this.pageIndex=0,this.triggerGetApproval(void 0)}onSearchChange(t){this.searchTerm=t,this.pageIndex=0,this.triggerGetApproval(void 0)}approve(t){if(!this.isActionEnabled(t)){this.toast.warn("Warning","This approval request cannot be approved as it is not in pending status");return}let e=t.id||t.approval_id;if(!e){this.toast.error("Error","Approval ID not found");return}this.approvalService.approve(e).subscribe({next:n=>{this.toast.success("Success","Approval granted successfully"),this.triggerGetApproval(void 0)},error:n=>{console.error("\u274C Approval failed:",n),this.toast.error("Failed",n?.error?.message||"Failed to approve request")}})}reject(t){if(!this.isActionEnabled(t)){this.toast.warn("Warning","This approval request cannot be rejected as it is not in pending status");return}let e=t.id||t.approval_id;if(!e){this.toast.error("Error","Approval ID not found");return}this.approvalService.reject(e).subscribe({next:n=>{this.toast.success("Success","Approval rejected successfully"),this.triggerGetApproval(void 0)},error:n=>{console.error("\u274C Rejection failed:",n),this.toast.error("Failed",n?.error?.message||"Failed to reject request")}})}isActionEnabled(t){let e=t.status?.toLowerCase();return e==="pending"||!e}getStatusDisplay(t){return t?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():"Pending"}static \u0275fac=function(e){return new(e||i)(w(kc),w(G),w(pe),w(te))};static \u0275cmp=R({type:i,selectors:[["app-approval"]],decls:8,vars:12,consts:[["approveTemplate",""],[3,"title","icon","showBack"],[1,"card-wrapper"],[1,"card"],[3,"saveSuccess","editFormValues"],[3,"pageChange","searchDataChange","contentPerPageChange","dataSet","columns","showDateFilter","enableRowActions","actionTemplate","totalRecords","pageIndex","contentPerPage"],[1,"approval-actions"],["title","Approve",1,"approve-btn",3,"click","disabled"],[1,"pi","pi-check"],["title","Reject",1,"reject-btn",3,"click","disabled"],[1,"pi","pi-times"]],template:function(e,n){if(e&1){let o=E();h(0,"app-title-card",1),s(1,"div",2)(2,"mat-card",3)(3,"add-approval",4),v("saveSuccess",function(a){return b(o),C(n.triggerGetApproval(a))}),c()()(),s(4,"simple-grid",5),v("pageChange",function(a){return b(o),C(n.onPageChange(a))})("searchDataChange",function(a){return b(o),C(n.onSearchChange(a))})("contentPerPageChange",function(a){return b(o),C(n.onContentPerPageChange(a))}),c(),y(5,Xh,5,6,"ng-template",null,0,Pe),h(7,"p-confirmDialog")}if(e&2){let o=ge(6);g("title","Approval")("icon","assignment_ind")("showBack",!0),d(3),g("editFormValues",n.editApproval),d(),g("dataSet",n.approvalData)("columns",n.columns)("showDateFilter",!1)("enableRowActions",!1)("actionTemplate",o)("totalRecords",n.total)("pageIndex",n.pageIndex)("contentPerPage",n.contentPerPage)}},dependencies:[Re,be,ze,he,Er],styles:[".card-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:20px}.approval-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:center;align-items:center}.approval-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:36px;height:36px;border:2px solid #000;border-radius:4px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;background-color:#fff;padding:0}.approval-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.approval-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){transform:scale(1.05);box-shadow:0 2px 4px #0003}.approval-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.95)}.approval-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 2px #5d157c4d}.approval-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled, .approval-actions[_ngcontent-%COMP%]   button.disabled[_ngcontent-%COMP%]{cursor:not-allowed;opacity:.5;pointer-events:none}.approval-actions[_ngcontent-%COMP%]   .approve-btn[_ngcontent-%COMP%]{background-color:#10b981;color:#fff;border-color:#10b981}.approval-actions[_ngcontent-%COMP%]   .approve-btn[_ngcontent-%COMP%]:hover:not(:disabled):not(.disabled){background-color:#f0fdf4;border-color:#10b981}.approval-actions[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]{background-color:#ef4444;color:#fff;border-color:#ef4444}.approval-actions[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]:hover:not(:disabled):not(.disabled){background-color:#fef2f2;border-color:#ef4444}"]})};var Fi=class i extends on{constructor(e,n){let o=n.getSelectedProviderId();o||console.error("No provider ID available in SubscriptionSetupService");let r={create:Q.SUBSCRIPTION_SETUP.URL.replace("{provider_id}",o?.toString()||""),update:Q.SUBSCRIPTION_SETUP.URL.replace("{provider_id}",o?.toString()||""),list:Q.SUBSCRIPTION_SETUP.LIST,delete:Q.SUBSCRIPTION_SETUP.URL.replace("{provider_id}",o?.toString()||"")};super(e,"plan_id",r,"data");this.authServ=n}createSubscriptionPlan(e){return this.create(e)}getSubscriptionPlans(e){return this.list()}updateSubscriptionPlan(e,n){let o=`${this.url.update}/${n}`;return this.http.put(o,e)}deleteSubscriptionPlan(e){return this.delete(e)}createOrUpdateSubscriptionPlan(e){return this.createOrUpdate(e,e.plan_id)}updateProviderUrl(e){let n={create:Q.SUBSCRIPTION_SETUP.URL.replace("{provider_id}",e.toString()),update:Q.SUBSCRIPTION_SETUP.URL.replace("{provider_id}",e.toString()),list:Q.SUBSCRIPTION_SETUP.LIST,delete:Q.SUBSCRIPTION_SETUP.URL.replace("{provider_id}",e.toString())};this.setUrl(n)}static \u0275fac=function(n){return new(n||i)(Ae($e),Ae(G))};static \u0275prov=Je({token:i,factory:i.\u0275fac,providedIn:"root"})};var Zh=()=>({name:"Pre Cycle",value:"pre_cycle"}),eb=()=>({name:"Post Cycle",value:"post_cycle"}),tb=(i,t)=>[i,t];function nb(i,t){i&1&&(s(0,"span"),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"add-subscription.plan_name_required")," "))}function ib(i,t){i&1&&(s(0,"span"),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"add-subscription.plan_name_min_length")," "))}function ob(i,t){if(i&1&&(s(0,"div",22),y(1,nb,3,3,"span",23)(2,ib,3,3,"span",23),c()),i&2){let e,n,o=_();d(),g("ngIf",(e=o.subscriptionForm.get("name"))==null||e.errors==null?null:e.errors.required),d(),g("ngIf",(n=o.subscriptionForm.get("name"))==null||n.errors==null?null:n.errors.minlength)}}function rb(i,t){i&1&&(s(0,"div",22),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"add-subscription.group_required")," "))}function ab(i,t){if(i&1&&(s(0,"div",24),p(1),c()),i&2){let e,n=_();d(),T(" ",(e=n.subscriptionForm.get("group_ids"))==null||e.value==null?null:e.value.length," group(s) selected ")}}function sb(i,t){i&1&&(s(0,"div",22),p(1," Product is required. "),c())}function cb(i,t){i&1&&(s(0,"div",24),p(1," No subscription products available "),c())}function db(i,t){i&1&&(s(0,"div",22),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"add-subscription.plan_type_required")," "))}function lb(i,t){i&1&&(s(0,"span"),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"add-subscription.price_required")," "))}function pb(i,t){i&1&&(s(0,"span"),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"add-subscription.price_min_value")," "))}function mb(i,t){if(i&1&&(s(0,"div",22),y(1,lb,3,3,"span",23)(2,pb,3,3,"span",23),c()),i&2){let e,n,o=_();d(),g("ngIf",(e=o.subscriptionForm.get("price"))==null||e.errors==null?null:e.errors.required),d(),g("ngIf",(n=o.subscriptionForm.get("price"))==null||n.errors==null?null:n.errors.min)}}function gb(i,t){i&1&&(s(0,"div",22),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"add-subscription.subscription_start_date_required")," "))}function ub(i,t){i&1&&(s(0,"div",22),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"add-subscription.payment_type_required")," "))}var Dr=class i{constructor(t,e,n,o,r,a){this.fb=t;this.subscriptionSetupService=e;this.groupService=n;this.productService=o;this.authServ=r;this.toast=a;this.subscriptionForm=this.fb.group({name:["",[A.required,A.minLength(3)]],description:[""],billing_type:["",[A.required]],duration_days:[""],price:["",[A.required,A.min(0)]],group_ids:[[],[A.required]],product_id:["",[A.required]],billing_cycle:["pre_cycle"],subscription_cycle_start:["",[A.required]],payment_type:["pre_paid",[A.required]]})}planTypes=Kc;groups=[];products=[];loadingGroups=!1;loadingProducts=!1;submitBtnText="Add";editFormValues;saveSuccess=new Ee;formExpanded=!1;subscriptionForm;occurances=[{name:"Weekly",code:"weekly"},{name:"Monthly",code:"monthly"},{name:"Quarterly",code:"quarterly"},{name:"Yearly",code:"yearly"}];ngOnInit(){this.loadGroups(),this.loadProducts()}loadGroups(){this.loadingGroups=!0;let t=this.authServ.getSelectedProviderId();if(!t){this.toast.error("Error","Provider ID not found"),this.loadingGroups=!1;return}this.groupService.listGroup(t,{skip:0,limit:100}).subscribe({next:e=>{this.groups=e.groups||[],this.loadingGroups=!1},error:e=>{console.error("Error loading groups:",e),this.toast.error("Error","Failed to load groups"),this.loadingGroups=!1}})}loadProducts(){this.loadingProducts=!0;let t=this.authServ.getSelectedProviderId();if(!t){this.toast.error("Error","Provider ID not found"),this.loadingProducts=!1;return}this.productService.updateProviderUrl(t),this.productService.list({provider_id:t,product_type:"subscription"}).subscribe({next:e=>{let n=[];Array.isArray(e)?n=e:e?.products&&Array.isArray(e.products)?n=e.products:e?.data&&Array.isArray(e.data)?n=e.data:n=[],this.products=n,this.loadingProducts=!1},error:e=>{console.error("Error loading products:",e),this.toast.error("Error","Failed to load products"),this.products=[],this.loadingProducts=!1}})}ngOnChanges(t){t.editFormValues&&t.editFormValues.currentValue!=null&&this.setEditFormValue()}setEditFormValue(){this.submitBtnText="Update",this.formExpanded=!0;let t=this.editFormValues;this.subscriptionForm.controls.name?.setValue(t?.name||t?.plan_name||""),this.subscriptionForm.controls.description?.setValue(t?.description||t?.plan_description||""),this.subscriptionForm.controls.billing_type?.setValue(t?.billing_type||t?.plan_type||""),this.subscriptionForm.controls.price?.setValue(t?.price||0),this.subscriptionForm.controls.billing_cycle?.setValue(t?.billing_cycle||"pre_cycle"),this.subscriptionForm.controls.payment_type?.setValue(t?.payment_type||"pre_paid");let e=[];if(t?.group_ids&&Array.isArray(t.group_ids)?e=t.group_ids:t?.group_id&&(e=[t.group_id]),this.subscriptionForm.controls.group_ids?.setValue(e),this.subscriptionForm.controls.group_ids?.updateValueAndValidity(),t?.product_id&&this.subscriptionForm.controls.product_id?.setValue(t.product_id),t?.subscription_cycle_start){let n=new Date(t.subscription_cycle_start);this.subscriptionForm.controls.subscription_cycle_start?.setValue(this.formatDateForInput(n))}else this.subscriptionForm.controls.subscription_cycle_start?.setValue(this.formatDateForInput(new Date));t?.billing_type||t?.plan_type?this.calculateDurationFromPlanType(t.billing_type||t.plan_type):this.subscriptionForm.controls.duration_days?.setValue(t?.duration_days||"")}onGroupChange(t){let e=t.value;this.subscriptionForm.controls.group_ids?.setValue(e),this.subscriptionForm.controls.group_ids?.updateValueAndValidity()}onProductChange(t){let e=t.value}onBillingCycleChange(t){let e=t.value}onPlanTypeChange(t){let e=t.value;this.calculateDurationFromPlanType(e)}calculateDurationFromPlanType(t){switch(t){case"weekly":this.subscriptionForm.get("duration_days")?.setValue(7);break;case"monthly":this.subscriptionForm.get("duration_days")?.setValue(30);break;case"quarterly":this.subscriptionForm.get("duration_days")?.setValue(90);break;case"yearly":this.subscriptionForm.get("duration_days")?.setValue(365);break;default:break}}onPaymentTypeChange(t){this.subscriptionForm.get("payment_type")?.setValue(t)}toggleActive(){let t=this.subscriptionForm.get("is_active")?.value;this.subscriptionForm.get("is_active")?.setValue(!t)}formatDateForInput(t){let e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0"),r=String(t.getHours()).padStart(2,"0"),a=String(t.getMinutes()).padStart(2,"0");return`${e}-${n}-${o}T${r}:${a}`}onSubmit(){if(this.subscriptionForm.valid){let t=this.subscriptionForm.get("group_ids")?.value||[];if(!Array.isArray(t)||t.length===0){this.toast.error("Validation Error","Please select at least one group");return}let e={name:this.subscriptionForm.get("name")?.value,description:this.subscriptionForm.get("description")?.value||"",billing_type:this.subscriptionForm.get("billing_type")?.value,duration_days:Number(this.subscriptionForm.get("duration_days")?.value)||0,price:Number(this.subscriptionForm.get("price")?.value),provider_id:this.authServ.getSelectedProviderId()||0,group_ids:t,product_id:Number(this.subscriptionForm.get("product_id")?.value),features:{},billing_cycle:this.subscriptionForm.get("billing_cycle")?.value,subscription_cycle_start:this.subscriptionForm.get("subscription_cycle_start")?.value?new Date(this.subscriptionForm.get("subscription_cycle_start")?.value).toISOString():new Date().toISOString(),is_active:"active"},n=this.editFormValues?.plan_id||this.editFormValues?.id;n?this.subscriptionSetupService.updateSubscriptionPlan(e,n).subscribe({next:o=>{this.saveSuccess.emit(o),this.resetForm(),this.toast.success("Success","Subscription plan updated successfully")},error:o=>{console.error("Error updating subscription plan:",o);let r=o?.error?.message||"Failed to update subscription plan";this.toast.error("Error",r)}}):this.subscriptionSetupService.createSubscriptionPlan(e).subscribe({next:o=>{this.saveSuccess.emit(o),this.resetForm(),this.toast.success("Success","Subscription plan saved successfully")},error:o=>{console.error("Error saving subscription plan:",o);let r=o?.error?.message||"Failed to save subscription plan";this.toast.error("Error",r)}})}else this.subscriptionForm.markAllAsTouched(),this.toast.error("Validation Error","Please fill all required fields")}buttonClicked(t){t.buttonType===1?this.onSubmit():t.buttonType===2&&this.onCancel()}onCancel(){this.submitBtnText=="Add"?this.resetForm():(this.editFormValues=void 0,this.submitBtnText="Add",this.formExpanded=!1)}resetForm(){this.editFormValues=void 0,this.submitBtnText="Add",this.subscriptionForm.reset(),this.subscriptionForm.controls.billing_cycle.setValue("pre_cycle"),this.subscriptionForm.controls.payment_type.setValue("pre_paid"),this.subscriptionForm.controls.group_ids.setValue([]),this.formExpanded=!1}static \u0275fac=function(e){return new(e||i)(w(ue),w(Fi),w(Sn),w(It),w(G),w(te))};static \u0275cmp=R({type:i,selectors:[["add-subscription-setup"]],inputs:{editFormValues:"editFormValues"},outputs:{saveSuccess:"saveSuccess"},features:[Ze],decls:83,vars:82,consts:[[3,"buttonEventTriggered","compName","title","inputForm","isExpanded","submitBtnText"],[3,"ngSubmit","formGroup"],[1,"form-group"],["matInput","","id","name","type","text","formControlName","name",3,"placeholder"],["class","error-message",4,"ngIf"],["matInput","","id","description","formControlName","description","rows","3",1,"styled-textarea",3,"placeholder"],[2,"color","#dc3545"],["formControlName","group_ids","optionLabel","group_name","optionValue","group_id","styleClass","custom-dropdown","selectedItemsLabel","{0} groups selected",3,"onChange","options","placeholder","disabled","loading","showToggleAll","maxSelectedLabels"],["class","help-text",4,"ngIf"],["formControlName","product_id","optionLabel","product_name","optionValue","product_id","styleClass","custom-dropdown","filterBy","product_name",3,"onChange","options","placeholder","disabled","loading","filter","showClear"],["formControlName","billing_type","optionLabel","name","optionValue","code","styleClass","custom-dropdown",3,"onChange","options","placeholder"],["id","price","type","number","formControlName","price","min","0","step","0.01",3,"placeholder"],["formControlName","billing_cycle","optionLabel","name","optionValue","value","styleClass","custom-dropdown",3,"onChange","options","placeholder"],["formControlName","subscription_cycle_start"],[1,"section-title"],[1,"payment-options"],[1,"radio-option"],["type","radio","id","pre-paid","name","paymentType","value","pre_paid","formControlName","payment_type",3,"change"],["for","pre-paid",1,"radio-label"],[1,"radio-custom"],["type","radio","id","post-paid","name","paymentType","value","post_paid","formControlName","payment_type",3,"change"],["for","post-paid",1,"radio-label"],[1,"error-message"],[4,"ngIf"],[1,"help-text"]],template:function(e,n){if(e&1&&(s(0,"form-template",0),v("buttonEventTriggered",function(r){return n.buttonClicked(r)}),s(1,"form",1),v("ngSubmit",function(){return n.onSubmit()}),s(2,"div",2)(3,"label"),p(4),M(5,"translate"),c(),h(6,"input",3),M(7,"translate"),y(8,ob,3,2,"div",4),c(),s(9,"div",2)(10,"label"),p(11),M(12,"translate"),c(),h(13,"textarea",5),M(14,"translate"),c(),s(15,"div",2)(16,"label"),p(17),M(18,"translate"),s(19,"span",6),p(20,"*"),c()(),s(21,"p-multiSelect",7),v("onChange",function(r){return n.onGroupChange(r)}),c(),y(22,rb,3,3,"div",4)(23,ab,2,1,"div",8),c(),s(24,"div",2)(25,"label"),p(26),M(27,"translate"),s(28,"span",6),p(29,"*"),c()(),s(30,"p-dropdown",9),v("onChange",function(r){return n.onProductChange(r)}),c(),y(31,sb,2,0,"div",4)(32,cb,2,0,"div",8),c(),s(33,"div",2)(34,"label"),p(35),M(36,"translate"),s(37,"span",6),p(38,"*"),c()(),s(39,"p-dropdown",10),M(40,"translate"),v("onChange",function(r){return n.onPlanTypeChange(r)}),c(),y(41,db,3,3,"div",4),c(),s(42,"div",2)(43,"label"),p(44),M(45,"translate"),s(46,"span",6),p(47,"*"),c()(),h(48,"input",11),M(49,"translate"),y(50,mb,3,2,"div",4),c(),s(51,"div",2)(52,"label"),p(53),M(54,"translate"),c(),s(55,"p-dropdown",12),M(56,"translate"),v("onChange",function(r){return n.onBillingCycleChange(r)}),c()(),s(57,"div",2)(58,"label"),p(59),M(60,"translate"),s(61,"span",6),p(62,"*"),c()(),h(63,"date-picker-on-range",13),y(64,gb,3,3,"div",4),c(),s(65,"div",2)(66,"label",14),p(67),M(68,"translate"),c(),s(69,"div",15)(70,"div",16)(71,"input",17),v("change",function(){return n.onPaymentTypeChange("pre_paid")}),c(),s(72,"label",18),h(73,"span",19),p(74),M(75,"translate"),c()(),s(76,"div",16)(77,"input",20),v("change",function(){return n.onPaymentTypeChange("post_paid")}),c(),s(78,"label",21),h(79,"span",19),p(80),M(81,"translate"),c()()(),y(82,ub,3,3,"div",4),c()()()),e&2){let o,r,a,l,m,u,f,x;g("compName","add-subcription")("title","Add Subscription")("inputForm",n.subscriptionForm)("isExpanded",n.formExpanded)("submitBtnText",n.submitBtnText),d(),g("formGroup",n.subscriptionForm),d(3),S(O(5,45,"add-subscription.plan_name")),d(2),ne("placeholder",O(7,47,"add-subscription.plan_name_placeholder")),d(2),g("ngIf",((o=n.subscriptionForm.get("name"))==null?null:o.touched)&&((o=n.subscriptionForm.get("name"))==null?null:o.invalid)),d(3),S(O(12,49,"add-subscription.plan_description")),d(2),ne("placeholder",O(14,51,"add-subscription.plan_description_placeholder")),d(4),T(" ",O(18,53,"add-subscription.group")," "),d(4),g("options",n.groups)("placeholder",n.loadingGroups?"Loading groups...":"Select Groups")("disabled",n.loadingGroups)("loading",n.loadingGroups)("showToggleAll",!0)("maxSelectedLabels",2),d(),g("ngIf",((r=n.subscriptionForm.get("group_ids"))==null?null:r.touched)&&((r=n.subscriptionForm.get("group_ids"))==null?null:r.invalid)),d(),g("ngIf",((a=n.subscriptionForm.get("group_ids"))==null||a.value==null?null:a.value.length)>0),d(3),T(" ",O(27,55,"product.name")," "),d(4),g("options",n.products)("placeholder",n.loadingProducts?"Loading products...":"Select Subscription Product")("disabled",n.loadingProducts||n.products.length===0)("loading",n.loadingProducts)("filter",!0)("showClear",!0),d(),g("ngIf",((l=n.subscriptionForm.get("product_id"))==null?null:l.touched)&&((l=n.subscriptionForm.get("product_id"))==null?null:l.invalid)),d(),g("ngIf",n.products.length===0&&!n.loadingProducts),d(3),T(" ",O(36,57,"add-subscription.plan_type")," "),d(4),ne("placeholder",O(40,59,"add-subscription.select_plan_type")),g("options",n.occurances),d(2),g("ngIf",((m=n.subscriptionForm.get("billing_type"))==null?null:m.touched)&&((m=n.subscriptionForm.get("billing_type"))==null?null:m.invalid)),d(3),T(" ",O(45,61,"add-subscription.subscription_price")," "),d(4),ne("placeholder",O(49,63,"add-subscription.subscription_price")),d(2),g("ngIf",((u=n.subscriptionForm.get("price"))==null?null:u.touched)&&((u=n.subscriptionForm.get("price"))==null?null:u.invalid)),d(3),S(O(54,65,"add-subscription.billing_cycle")),d(2),ne("placeholder",O(56,67,"add-subscription.select_billing_cycle")),g("options",Gt(79,tb,se(77,Zh),se(78,eb))),d(4),T(" ",O(60,69,"add-subscription.subscription_start_date")," "),d(5),g("ngIf",((f=n.subscriptionForm.get("subscription_cycle_start"))==null?null:f.touched)&&((f=n.subscriptionForm.get("subscription_cycle_start"))==null?null:f.invalid)),d(3),S(O(68,71,"add-subscription.payment")),d(7),T(" ",O(75,73,"add-subscription.pre_paid")," "),d(6),T(" ",O(81,75,"add-subscription.post_paid")," "),d(2),g("ngIf",((x=n.subscriptionForm.get("payment_type"))==null?null:x.touched)&&((x=n.subscriptionForm.get("payment_type"))==null?null:x.invalid))}},dependencies:[W,vo,fi,Ve,Oo,ye,Z,ct,vn,Y,fe,xn,Me,Oe,Le,ce],styles:['.subscription-form[_ngcontent-%COMP%]{padding:1rem;font-family:Roboto,sans-serif}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:600;color:#333;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:2px solid #e1e5e9;border-radius:8px;font-size:14px;transition:border-color .3s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#5d157c;box-shadow:0 0 0 3px #5d157c1a}.styled-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.type-toggle-group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;border:2px solid #e1e5e9;border-radius:8px;padding:.5rem}.chip-toggle[_ngcontent-%COMP%]{border-radius:20px!important;border:1px solid #e1e5e9!important;background-color:#f8f9fa!important;color:#6c757d!important;font-weight:500;padding:.5rem 1rem;transition:all .3s ease}.chip-toggle[_ngcontent-%COMP%]:hover{background-color:#e9ecef!important;border-color:#5d157c!important}.chip-toggle.mat-button-toggle-checked[_ngcontent-%COMP%]{background-color:#5d157c!important;color:#fff!important;border-color:#5d157c!important}.toggle-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:.75rem;border:2px solid #e1e5e9;border-radius:8px;background-color:#f8f9fa}.toggle-label[_ngcontent-%COMP%]{font-weight:500;color:#333}.help-text[_ngcontent-%COMP%]{display:block;margin-top:.25rem;font-size:12px;color:#6c757d}.error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;margin-top:.25rem;display:block}.error-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}  .p-inputswitch-checked .p-inputswitch-slider{background:#5d157c}  .p-inputswitch .p-inputswitch-slider{background:#e1e5e9;border:1px solid #e1e5e9}  .custom-dropdown{width:100%!important}  .custom-dropdown .p-dropdown{width:100%!important;border:2px solid #e1e5e9;border-radius:8px;transition:all .3s ease;background:#fff}  .custom-dropdown .p-dropdown:hover{border-color:#9ca3af}  .custom-dropdown .p-dropdown:focus-within{border-color:#5d157c;box-shadow:0 0 0 3px #5d157c1a}  .custom-dropdown .p-dropdown .p-dropdown-label{padding:.75rem;font-size:14px;color:#333}  .custom-dropdown .p-dropdown .p-dropdown-trigger{color:#6c757d;width:2rem}  .custom-dropdown .p-dropdown-panel{border:2px solid #5D157C;border-radius:8px;box-shadow:0 4px 12px #00000026}  .custom-dropdown .p-dropdown-panel .p-dropdown-items .p-dropdown-item{padding:.75rem 1rem;font-size:14px;transition:all .2s ease}  .custom-dropdown .p-dropdown-panel .p-dropdown-items .p-dropdown-item:hover{background-color:#f8ecfc;color:#5d157c}  .custom-dropdown .p-dropdown-panel .p-dropdown-items .p-dropdown-item.p-highlight{background-color:#5d157c;color:#fff}  .full-width-dropdown{width:100%!important}  .full-width-dropdown .p-dropdown{width:100%!important}.section-title[_ngcontent-%COMP%]{color:#5d157c!important;font-weight:700!important;font-size:16px!important;margin-bottom:1rem!important;display:block!important}.payment-options[_ngcontent-%COMP%]{display:flex;gap:24px;margin-top:.5rem}.payment-options[_ngcontent-%COMP%]   .radio-option[_ngcontent-%COMP%]{display:flex;align-items:center}.payment-options[_ngcontent-%COMP%]   .radio-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{display:none}.payment-options[_ngcontent-%COMP%]   .radio-option[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;font-size:14px;font-weight:500;color:#333}.payment-options[_ngcontent-%COMP%]   .radio-option[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]   .radio-custom[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid #e1e5e9;border-radius:50%;margin-right:8px;position:relative;transition:all .3s ease;background:#fff}.payment-options[_ngcontent-%COMP%]   .radio-option[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]   .radio-custom[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:8px;height:8px;border-radius:50%;background:#5d157c;opacity:0;transition:opacity .3s ease}.payment-options[_ngcontent-%COMP%]   .radio-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked + .radio-label[_ngcontent-%COMP%]{color:#5d157c;font-weight:600}.payment-options[_ngcontent-%COMP%]   .radio-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked + .radio-label[_ngcontent-%COMP%]   .radio-custom[_ngcontent-%COMP%]{border-color:#5d157c}.payment-options[_ngcontent-%COMP%]   .radio-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked + .radio-label[_ngcontent-%COMP%]   .radio-custom[_ngcontent-%COMP%]:after{opacity:1}.payment-options[_ngcontent-%COMP%]   .radio-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:hover + .radio-label[_ngcontent-%COMP%]   .radio-custom[_ngcontent-%COMP%]{border-color:#9ca3af}@media (max-width: 768px){.subscription-form[_ngcontent-%COMP%]{padding:.5rem}.type-toggle-group[_ngcontent-%COMP%]{flex-direction:column}.chip-toggle[_ngcontent-%COMP%]{width:100%;text-align:center}.payment-options[_ngcontent-%COMP%]{flex-direction:row;gap:16px}.toggle-container[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}  .custom-dropdown{width:100%!important}  .custom-dropdown .p-multiselect{width:100%!important;border:2px solid #e1e5e9;border-radius:8px;transition:all .3s ease;background:#fff}  .custom-dropdown .p-multiselect:hover{border-color:#9ca3af}  .custom-dropdown .p-multiselect:focus-within,   .custom-dropdown .p-multiselect.p-focus{border-color:#5d157c;box-shadow:0 0 0 3px #5d157c1a}  .custom-dropdown .p-multiselect .p-multiselect-label{padding:.75rem;font-size:14px;color:#333}  .custom-dropdown .p-multiselect .p-multiselect-trigger{color:#6c757d;width:2rem}  .custom-dropdown .p-multiselect-panel{border:2px solid #5D157C;border-radius:8px;box-shadow:0 4px 12px #00000026}  .custom-dropdown .p-multiselect-panel .p-multiselect-items .p-multiselect-item{padding:.75rem 1rem;font-size:14px;transition:all .2s ease}  .custom-dropdown .p-multiselect-panel .p-multiselect-items .p-multiselect-item:hover{background-color:#f8ecfc;color:#5d157c}  .custom-dropdown .p-multiselect-panel .p-multiselect-items .p-multiselect-item.p-highlight{background-color:#5d157c;color:#fff}  .custom-dropdown .p-multiselect-panel .p-multiselect-items .p-multiselect-item.p-highlight .p-checkbox-box{background-color:#5d157c!important;border-color:#5d157c!important}  .custom-dropdown .p-checkbox-box{border:2px solid #5D157C;border-radius:4px;background-color:#fff}  .custom-dropdown .p-checkbox-box.p-highlight{background-color:#5d157c;border-color:#5d157c}  .custom-dropdown .p-checkbox-box .p-checkbox-icon{color:#fff}}']})};function _b(i,t){i&1&&h(0,"div",7)}var Ar=class i{constructor(t,e,n,o){this.subscriptionSetupService=t;this.authService=e;this.confirmationService=n;this.toast=o}pageIndex=0;contentPerPage=dt;total=0;searchTerm="";providerChangeSubscription;ngOnInit(){let t=this.authService.getSelectedProviderId();if(t)this.subscriptionSetupService.updateProviderUrl(t);else{this.toast.error("Error","No provider selected");return}this.triggerGetSubscriptionPlans(),this.providerChangeSubscription=this.authService.providerChange$.subscribe(e=>{if(e){let n=this.authService.getSelectedProviderId();n&&(this.subscriptionSetupService.updateProviderUrl(n),this.pageIndex=0,this.triggerGetSubscriptionPlans())}})}ngOnDestroy(){this.providerChangeSubscription&&this.providerChangeSubscription.unsubscribe()}columns=[{displayName:"Plan Name",displayValue:"name"},{displayName:"Type",displayValue:"billing_type"},{displayName:"Price",displayValue:"price"}];subscriptionData=[];editSubscriptionPlan;edit(t){this.editSubscriptionPlan=t}remove(t){this.confirmDelete(t)}confirmDelete(t){let e=t.plan_id||t.id;this.confirmationService.confirm({message:"Are you sure you want to delete this subscription plan?",header:"Delete Subscription Plan",icon:"pi pi-info-circle",acceptLabel:"Delete",rejectLabel:"Cancel",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-secondary",accept:()=>{this.subscriptionSetupService.deleteSubscriptionPlan(e).subscribe({next:()=>{this.triggerGetSubscriptionPlans(),this.toast.success("Success","Subscription plan deleted successfully")},error:()=>{this.toast.error("Failed","Failed to delete subscription plan")}})}})}handleActionClick(t,e){e?.preventDefault(),e?.stopPropagation()}triggerGetSubscriptionPlans(){let t=this.authService.getSelectedProviderId();if(!t){this.toast.error("Error","No provider selected");return}let e={provider_id:t,skip:this.pageIndex*this.contentPerPage,limit:this.contentPerPage};this.searchTerm?.trim()&&(e.search=this.searchTerm.trim()),this.subscriptionSetupService.listWithTotal(e).subscribe({next:n=>{if(!n){this.toast.error("Error","Invalid response from server"),this.subscriptionData=[],this.total=0;return}this.total=n.total??0,this.convertSubscriptionSet(n.data??[])},error:n=>{console.error("Failed to load subscription plans:",n),this.toast.error("Error","Failed to load subscription plans"),this.subscriptionData=[],this.total=0}})}convertSubscriptionSet(t){if(!Array.isArray(t)){console.error("Invalid subscription plans data:",t),this.subscriptionData=[];return}let e=t.map(n=>H(U({},n),{id:n.plan_id??n.id??0,action:"viewTemplate"}));setTimeout(()=>{this.subscriptionData=e},200)}onPageChange(t){this.pageIndex=t,this.triggerGetSubscriptionPlans()}onContentPerPageChange(t){this.contentPerPage=t,this.pageIndex=0,this.triggerGetSubscriptionPlans()}onSearchChange(t){this.searchTerm=t,this.pageIndex=0,this.triggerGetSubscriptionPlans()}static \u0275fac=function(e){return new(e||i)(w(Fi),w(G),w(pe),w(te))};static \u0275cmp=R({type:i,selectors:[["app-subscription-setup"]],decls:9,vars:10,consts:[["viewTemplate",""],[3,"title","icon","showBack"],[1,"card-wrapper"],[1,"card"],[3,"saveSuccess","editFormValues"],[3,"onEditTrigger","onDeleteTrigger","pageChange","searchDataChange","contentPerPageChange","dataSet","columns","actionTemplate","totalRecords","pageIndex","contentPerPage"],[2,"white-space","pre-wrap","max-height","200px","overflow","auto"],[1,"view"]],template:function(e,n){if(e&1){let o=E();h(0,"app-title-card",1),s(1,"div",2)(2,"mat-card",3)(3,"add-subscription-setup",4),v("saveSuccess",function(){return b(o),C(n.triggerGetSubscriptionPlans())}),c()()(),s(4,"simple-grid",5),v("onEditTrigger",function(a){return b(o),C(n.edit(a))})("onDeleteTrigger",function(a){return b(o),C(n.remove(a))})("pageChange",function(a){return b(o),C(n.onPageChange(a))})("searchDataChange",function(a){return b(o),C(n.onSearchChange(a))})("contentPerPageChange",function(a){return b(o),C(n.onContentPerPageChange(a))}),c(),h(5,"pre",6)(6,"p-confirmDialog"),y(7,_b,1,0,"ng-template",null,0,Pe)}if(e&2){let o=ge(8);g("title","Subscription Plans")("icon","subscriptions")("showBack",!0),d(3),g("editFormValues",n.editSubscriptionPlan),d(),g("dataSet",n.subscriptionData)("columns",n.columns)("actionTemplate",o)("totalRecords",n.total)("pageIndex",n.pageIndex)("contentPerPage",n.contentPerPage)}},dependencies:[Re,be,ze,he,Dr]})};var bb=["formTemplate"];function Cb(i,t){i&1&&(s(0,"div",12),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"add-emp.employee_name_required")," "))}function vb(i,t){i&1&&(s(0,"div"),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"add-emp.mobile_required")," "))}function xb(i,t){i&1&&(s(0,"div"),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"add-emp.mobile_valid")," "))}function Pb(i,t){if(i&1&&(s(0,"div",12),y(1,vb,3,3,"div",13)(2,xb,3,3,"div",13),c()),i&2){let e,n,o=_();d(),g("ngIf",(e=o.employeeSetupForm.get("mobile"))==null||e.errors==null?null:e.errors.required),d(),g("ngIf",(n=o.employeeSetupForm.get("mobile"))==null||n.errors==null?null:n.errors.pattern)}}function yb(i,t){i&1&&(s(0,"div",12),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"add-emp.application_role_required")," "))}function Mb(i,t){if(i&1&&h(0,"input",28),i&2){let e=_(2).$implicit;ne("id",e.label_name),fn("placeholder","Enter ",e.label_name,""),g("formControlName",e.label_name)}}function Ob(i,t){if(i&1&&h(0,"textarea",29),i&2){let e=_(2).$implicit;ne("id",e.label_name),fn("placeholder","Enter ",e.label_name,""),g("formControlName",e.label_name)}}function wb(i,t){if(i&1&&(s(0,"div"),y(1,Mb,1,4,"input",28)(2,Ob,1,4,"textarea",29),c()),i&2){let e=_().$implicit,n=_(2);d(),mo(e.element_type===n.formElementType.BOX||e.element_type===n.formElementType.TEXT_BOX?1:e.element_type===n.formElementType.AREA?2:-1)}}function Sb(i,t){if(i&1&&(s(0,"div",3)(1,"label",27),p(2),c(),y(3,wb,3,1,"div",13),c()),i&2){let e,n=t.$implicit,o=_(2);d(),ne("for",n.label_name),d(),T(" ",n.label_name," "),d(),g("ngIf",(e=o.employeeSetupForm.get("employee_json_form"))==null?null:e.get(n.label_name))}}function kb(i,t){if(i&1){let e=E();s(0,"div",14)(1,"div",15),v("click",function(){b(e);let o=_();return C(o.toggleAdvancedSection())}),s(2,"div",16),si(),s(3,"svg",17),h(4,"path",18)(5,"path",19),c(),ci(),s(6,"h3",20),p(7,"More Details"),c(),s(8,"span",21),p(9),c()(),si(),s(10,"svg",22),h(11,"polyline",23),c()(),ci(),s(12,"div",24)(13,"div",25),y(14,Sb,4,3,"div",26),c()()()}if(i&2){let e=_();d(9),T("",e.registerFormRecords.length," fields"),d(),j("expanded",e.advancedSectionExpanded),d(2),j("expanded",e.advancedSectionExpanded),d(2),g("ngForOf",e.registerFormRecords)}}var Vr=class i{constructor(t,e,n,o,r,a){this.fb=t;this.authService=e;this.empSetupServ=n;this.setupService=o;this.toast=r;this.rbacService=a;this.employeeSetupForm=this.fb.group({name:["",A.required],mobile:["",[A.required,A.pattern(/^[6-9]\d{9}$/)]],designation:["",[A.required]],employee_json_form:this.fb.group({})}),this.employeeSetupForm.get("designation")?.valueChanges.subscribe(l=>{this.updateTabSelectionForRole(l)})}formTemplate;application_role=Xc;submitBtnText="Add";advancedSectionExpanded=!1;availableTabs=[{label:"Dashboard",value:"dashboard"},{label:"Orders",value:"orders"},{label:"Products",value:"products"},{label:"Sales",value:"sales"},{label:"Expenses",value:"expenses"},{label:"Members",value:"members"},{label:"Settings",value:"settings"}];selectedTabs=["dashboard"];isTabSelectionDisabled=!1;ngOnChanges(t){t.editFormValues&&t.editFormValues.currentValue!=null&&this.setEditFormValue()}ngOnInit(){let t=this.authService.getSelectedProviderId();this.setupService.getRegisteredForm("employee",t).subscribe(e=>{this.regiseteredForm=e[0];let n=this.regiseteredForm.form_data[0].elements.filter(o=>o.display_for_user!==!1);n.forEach(o=>{this.addEmployeeJsonForm(o)}),this.registerFormRecords=n,n.length>0&&(this.advancedSectionExpanded=!0)})}formElementType=Yn;regiseteredForm;registerFormRecords=[];formExpanded=!1;employeeSetupForm;editFormValues=void 0;saveSuccess=new Ee;cancel=new Ee;onSubmit(){if(this.employeeSetupForm.valid){let t=this.employeeSetupForm.value,e={employee_name:t.name,employee_mobile_number:t.mobile.toString(),myid_role:t.designation,employee_designation:t.designation,employee_json_form:t.employee_json_form,employee_status:"Active",provider_id:this.authService.getSelectedProviderId(),user_id:this.authService.getUserId()},n=this.editFormValues?.employee_id;this.empSetupServ.createOrUpdate(e,n).subscribe({next:o=>{this.saveSuccess.emit(o),this.configureEmployeeTabs(t.designation),this.editFormValues=void 0,this.employeeSetupForm.reset(),this.formExpanded=!1,this.formTemplate&&(this.formTemplate.isExpanded=!1),this.selectedTabs=["dashboard"],this.isTabSelectionDisabled=!1,this.advancedSectionExpanded=!1,this.toast.success("Success","Employee saved successfully")},error:o=>{console.error("Error saving employee:",o),this.toast.error("Error","Failed to save employee. Please try again.")}})}}addEmployeeJsonForm(t){let e=this.employeeSetupForm.get("employee_json_form");t.hasOwnProperty("label_name")&&e.addControl(t.label_name,new Cn)}buttonClicked(t){t.buttonType===1?this.onSubmit():t.buttonType===2&&this.onCancel()}onCancel(){this.editFormValues=void 0,this.submitBtnText="Add",this.employeeSetupForm.reset(),this.formExpanded=!1,this.selectedTabs=["dashboard"],this.isTabSelectionDisabled=!1,this.advancedSectionExpanded=!1,this.formTemplate&&(this.formTemplate.isExpanded=!1),this.cancel.emit()}setEditFormValue(){this.submitBtnText="Update";let t=this.employeeSetupForm.get("employee_json_form");if(this.employeeSetupForm.controls.name?.setValue(this.editFormValues?.employee_name),this.employeeSetupForm.controls.mobile?.setValue(this.editFormValues?.employee_mobile_number),this.employeeSetupForm.controls.designation?.setValue(this.editFormValues?.myid_role?.toLowerCase()),this.editFormValues?.employee_json_form){let e=this.editFormValues?.employee_json_form;Object.keys(this.editFormValues?.employee_json_form).length===0&&t.reset(),Object.keys(this.editFormValues?.employee_json_form).forEach(n=>{let o=n;t.contains(o)||t.addControl(o,new Cn),t.controls[o].setValue(e[n])}),this.advancedSectionExpanded=!0}this.formExpanded=!0}toggleAdvancedSection(){this.advancedSectionExpanded=!this.advancedSectionExpanded}updateTabSelectionForRole(t){if(t)switch(t.toLowerCase()){case"admin":this.selectedTabs=["dashboard","orders","products","sales","expenses","members","settings"],this.isTabSelectionDisabled=!0;break;case"manager":this.selectedTabs=["orders","products","sales","expenses","members","settings"],this.isTabSelectionDisabled=!0;break;case"employee":this.selectedTabs=["orders"],this.isTabSelectionDisabled=!0;break;default:this.selectedTabs=["dashboard"],this.isTabSelectionDisabled=!1;break}}toggleTab(t){if(this.isTabSelectionDisabled)return;let e=this.selectedTabs.indexOf(t);e>-1?this.selectedTabs.splice(e,1):this.selectedTabs.push(t)}configureEmployeeTabs(t){let n={provider_id:this.authService.getSelectedProviderId(),role:t.toLowerCase(),tabs:this.selectedTabs};this.rbacService.configureTabs(n).subscribe({next:o=>{this.toast.success("Success","Employee tabs configured successfully")},error:o=>{console.error("Error configuring tabs:",o),this.toast.error("Warning","Employee saved but tab configuration failed")}})}static \u0275fac=function(e){return new(e||i)(w(ue),w(G),w(Wn),w(yn),w(te),w(wo))};static \u0275cmp=R({type:i,selectors:[["add-employee"]],viewQuery:function(e,n){if(e&1&&nt(bb,5),e&2){let o;it(o=ot())&&(n.formTemplate=o.first)}},inputs:{editFormValues:"editFormValues"},outputs:{saveSuccess:"saveSuccess",cancel:"cancel"},features:[Ze],decls:23,vars:24,consts:[["formTemplate",""],[3,"buttonEventTriggered","compName","title","inputForm","isExpanded","submitBtnText"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","name"],["id","name","type","text","placeholder","Enter employee name","formControlName","name",1,"form-input"],["class","error-message",4,"ngIf"],["for","mobile"],["id","mobile","type","number","formControlName","mobile",1,"form-input",3,"placeholder"],["for","designation"],["id","designation","styleClass","elegant-dropdown","formControlName","designation","placeholder","Select application role",3,"options","showClear"],["class","advanced-myid-section",4,"ngIf"],[1,"error-message"],[4,"ngIf"],[1,"advanced-myid-section"],[1,"section-header",3,"click"],[1,"header-content"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor",1,"icon-advanced"],["d","M12 2L2 7l10 5 10-5-10-5z"],["d","M2 17l10 5 10-5M2 12l10 5 10-5"],[1,"section-title"],[1,"field-count"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor",1,"expand-icon"],["points","6 9 12 15 18 9"],["formGroupName","employee_json_form",1,"section-content"],[1,"dynamic-fields-grid"],["class","form-group",4,"ngFor","ngForOf"],[3,"for"],["type","text",1,"form-input",3,"formControlName","id","placeholder"],["rows","4",1,"form-textarea",3,"formControlName","id","placeholder"]],template:function(e,n){if(e&1){let o=E();s(0,"form-template",1,0),v("buttonEventTriggered",function(a){return b(o),C(n.buttonClicked(a))}),s(2,"form",2),v("ngSubmit",function(){return b(o),C(n.onSubmit())}),s(3,"div",3)(4,"label",4),p(5),M(6,"translate"),c(),h(7,"input",5),y(8,Cb,3,3,"div",6),c(),s(9,"div",3)(10,"label",7),p(11),M(12,"translate"),c(),h(13,"input",8),M(14,"translate"),y(15,Pb,3,2,"div",6),c(),s(16,"div",3)(17,"label",9),p(18),M(19,"translate"),c(),h(20,"p-dropdown",10),y(21,yb,3,3,"div",6),c(),y(22,kb,15,6,"div",11),c()()}if(e&2){let o,r,a;g("compName","add-employee")("title","Add Employee")("inputForm",n.employeeSetupForm)("isExpanded",n.formExpanded)("submitBtnText",n.submitBtnText),d(2),g("formGroup",n.employeeSetupForm),d(3),S(O(6,16,"add-emp.employee_name")),d(3),g("ngIf",((o=n.employeeSetupForm.get("name"))==null?null:o.invalid)&&((o=n.employeeSetupForm.get("name"))==null?null:o.touched)),d(3),S(O(12,18,"add-emp.mobile")),d(2),ne("placeholder",O(14,20,"add-emp.mobile_number")),d(2),g("ngIf",((r=n.employeeSetupForm.get("mobile"))==null?null:r.touched)&&((r=n.employeeSetupForm.get("mobile"))==null?null:r.invalid)),d(3),S(O(19,22,"add-emp.application_role")),d(2),g("options",n.application_role)("showClear",!1),d(),g("ngIf",((a=n.employeeSetupForm.get("designation"))==null?null:a.invalid)&&((a=n.employeeSetupForm.get("designation"))==null?null:a.touched)),d(),g("ngIf",n.registerFormRecords.length>0)}},dependencies:[ee,W,Ve,ye,Z,ct,Y,fe,Me,Oe,pi,Le,ce],styles:['@charset "UTF-8";  .elegant-dropdown{width:100%}  .elegant-dropdown .p-dropdown{width:100%;border:1px solid #e0e0e0;border-radius:8px;background:#fff;transition:all .3s ease;box-shadow:0 1px 3px #0000000d}  .elegant-dropdown .p-dropdown:hover{border-color:#a080c0;box-shadow:0 2px 6px #a080c026}  .elegant-dropdown .p-dropdown:focus,   .elegant-dropdown .p-dropdown.p-focus{outline:none;border-color:#a080c0;box-shadow:0 0 0 3px #a080c01a}  .elegant-dropdown .p-dropdown-label{padding:.75rem 1rem;font-size:14px;color:#333}  .elegant-dropdown .p-dropdown-label.p-placeholder{color:#999}  .elegant-dropdown .p-dropdown-trigger{width:2.5rem;color:#a080c0}  .p-dropdown-panel{border:1px solid #e0e0e0;border-radius:8px;box-shadow:0 4px 12px #0000001a;margin-top:4px}  .p-dropdown-panel .p-dropdown-items{padding:.5rem 0}  .p-dropdown-panel .p-dropdown-items .p-dropdown-item{padding:.75rem 1rem;font-size:14px;color:#333;transition:all .2s ease}  .p-dropdown-panel .p-dropdown-items .p-dropdown-item:hover{background-color:#f8f5ff;color:#a080c0}  .p-dropdown-panel .p-dropdown-items .p-dropdown-item.p-highlight{background-color:#a080c0;color:#fff}  .full-width-dropdown{width:100%}  .full-width-dropdown>span{padding:.5rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-size:14px;font-weight:500;color:#333;letter-spacing:.3px}.form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;font-size:14px;color:#333;background-color:#fff;border:1px solid #e0e0e0;border-radius:8px;transition:all .3s ease;box-shadow:0 1px 3px #0000000d}.form-input[_ngcontent-%COMP%]::placeholder, .form-textarea[_ngcontent-%COMP%]::placeholder{color:#999;opacity:1}.form-input[_ngcontent-%COMP%]:hover, .form-textarea[_ngcontent-%COMP%]:hover{border-color:#a080c0;box-shadow:0 2px 6px #a080c026}.form-input[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#a080c0;box-shadow:0 0 0 3px #a080c01a}.form-input[_ngcontent-%COMP%]:disabled, .form-textarea[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;cursor:not-allowed;opacity:.6}.form-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px;font-family:inherit;line-height:1.5}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.error-message[_ngcontent-%COMP%]{margin-top:.5rem;font-size:12px;color:#dc3545;display:flex;align-items:center}.error-message[_ngcontent-%COMP%]:before{content:"\\26a0";margin-right:.25rem}.advanced-myid-section[_ngcontent-%COMP%]{margin-top:2rem;border:1px solid #e0e0e0;border-radius:12px;background:linear-gradient(135deg,#f8f9fa,#fff);overflow:hidden;transition:all .3s ease}.advanced-myid-section[_ngcontent-%COMP%]:hover{border-color:#a080c0;box-shadow:0 4px 12px #a080c01a}.section-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1.25rem 1.5rem;cursor:pointer;-webkit-user-select:none;user-select:none;transition:all .3s ease;background:linear-gradient(to right,rgba(160,128,192,.05),transparent)}.section-header[_ngcontent-%COMP%]:hover{background:linear-gradient(to right,rgba(160,128,192,.1),transparent)}.section-header[_ngcontent-%COMP%]:hover   .section-title[_ngcontent-%COMP%]{color:#a080c0}.section-header[_ngcontent-%COMP%]:active{transform:scale(.99)}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;flex:1}.icon-advanced[_ngcontent-%COMP%]{stroke:#a080c0;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;flex-shrink:0}.section-title[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600;color:#333;letter-spacing:.3px;transition:color .3s ease}.field-count[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.25rem .75rem;background-color:#a080c01a;color:#a080c0;border-radius:12px;font-size:12px;font-weight:500}.expand-icon[_ngcontent-%COMP%]{stroke:#a080c0;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;transition:transform .3s ease;flex-shrink:0}.expand-icon.expanded[_ngcontent-%COMP%]{transform:rotate(180deg)}.section-content[_ngcontent-%COMP%]{max-height:0;overflow:hidden;transition:max-height .4s cubic-bezier(.4,0,.2,1),padding .4s ease;padding:0 1.5rem}.section-content.expanded[_ngcontent-%COMP%]{max-height:2000px;padding:1.5rem;border-top:1px solid #e0e0e0}.dynamic-fields-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem;animation:_ngcontent-%COMP%_fadeIn .4s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.tab-selection-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-top:8px}.tab-button[_ngcontent-%COMP%]{background-color:#fff;border:2px solid #A080C0;color:#a080c0;border-radius:8px;padding:10px 16px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;min-width:100px;text-align:center}.tab-button[_ngcontent-%COMP%]:hover{background-color:#f8f5ff;border-color:#8b6bb3;color:#8b6bb3;transform:translateY(-2px);box-shadow:0 2px 6px #a080c033}.tab-button.selected[_ngcontent-%COMP%]{background-color:#a080c0;color:#fff;border-color:#a080c0}.tab-button.selected[_ngcontent-%COMP%]:hover{background-color:#8b6bb3;border-color:#8b6bb3}.tab-button.disabled[_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}.tab-button.disabled[_ngcontent-%COMP%]:hover{background-color:#fff;border-color:#a080c0;color:#a080c0;transform:none;box-shadow:none}.tab-button.disabled.selected[_ngcontent-%COMP%]{background-color:#a080c0;color:#fff;border-color:#a080c0}.tab-button.disabled.selected[_ngcontent-%COMP%]:hover{background-color:#a080c0;border-color:#a080c0;color:#fff}.help-text[_ngcontent-%COMP%]{color:#666;font-size:12px;margin-top:8px;display:block;font-style:italic}@media (max-width: 768px){.form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.dynamic-fields-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.25rem}.section-header[_ngcontent-%COMP%], .section-content.expanded[_ngcontent-%COMP%]{padding:1rem}.tab-button[_ngcontent-%COMP%]{min-width:80px;padding:8px 12px;font-size:13px}}@media (max-width: 480px){.header-content[_ngcontent-%COMP%]{gap:.5rem}.section-title[_ngcontent-%COMP%]{font-size:14px}.field-count[_ngcontent-%COMP%]{font-size:11px;padding:.2rem .6rem}}']})};function Tb(i,t){i&1&&(s(0,"div",7)(1,"div",8),h(2,"div",9),s(3,"p"),p(4,"Loading employees..."),c()()())}function Eb(i,t){if(i&1){let e=E();s(0,"div",10),v("click",function(o){let r=b(e).$implicit,a=_();return C(a.handleActionClick(r,o))}),c()}}var Rr=class i{constructor(t,e,n,o){this.empSetupServ=t;this.authService=e;this.confirmationService=n;this.toast=o}pageIndex=0;contentPerPage=dt;total=0;searchTerm="";isLoading=!1;providerChangeSubscription;ngOnInit(){let t=this.authService.getSelectedProviderId();t&&this.empSetupServ.updateProviderUrl(t),this.triggerGetEmp(void 0),this.providerChangeSubscription=this.authService.providerChange$.subscribe(e=>{if(e){let n=this.authService.getSelectedProviderId();n&&(this.empSetupServ.updateProviderUrl(n),this.pageIndex=0,this.triggerGetEmp(void 0))}})}ngOnDestroy(){this.providerChangeSubscription&&this.providerChangeSubscription.unsubscribe()}columns=[{displayName:"Name",displayValue:"employee_name"},{displayName:"Mobile",displayValue:"employee_mobile_number"},{displayName:"Application Role",displayValue:"myid_role"},{displayName:"Status",displayValue:"employee_status_toggle"}];empData=[];editEmployee=void 0;edit(t){this.editEmployee=U({},t)}remove(t){this.confirmDelete(t)}confirmDelete(t){this.confirmationService.confirm({message:"Are you sure you want to delete this employee?",header:"Delete Employee",icon:"pi pi-info-circle",acceptLabel:"Delete",rejectLabel:"Cancel",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-secondary",accept:()=>{this.empSetupServ.delete(t.employee_id).subscribe({next:e=>{this.triggerGetEmp(void 0),this.toast.success("Success","Employee deleted successfully")},error:e=>{console.error(e),this.toast.error("Failed","Failed to delete employee")}})},reject:e=>{e===Fe.REJECT||Fe.CANCEL}})}handleActionClick(t,e){e.stopPropagation()}toggleEmployeeStatus(t,e){let n=this.empData.find(a=>a.employee_id===t.employee_id);if(n&&n.isUpdating)return;n&&(n.isUpdating=!0);let o=e?"Active":"Inactive",r=H(U({},t),{employee_status:o});this.empSetupServ.update(r).subscribe({next:a=>{this.toast.success("Success",`Employee ${o==="Active"?"activated":"deactivated"} successfully`),n&&(n.isUpdating=!1),this.triggerGetEmp(void 0)},error:a=>{console.error("\u274C Failed to update employee status"),console.error("Error object:",a),console.error("Error status:",a.status),console.error("Error message:",a.message),console.error("Error details:",a.error),this.toast.error("Failed",a.error?.message||"Failed to update employee status"),n&&(n.isUpdating=!1),this.triggerGetEmp(void 0)}})}triggerGetEmp(t){this.isLoading=!0;let e={offset:this.pageIndex*this.contentPerPage,limit:this.contentPerPage};this.searchTerm&&this.searchTerm.trim()!==""&&(e.search=this.searchTerm.trim()),this.empSetupServ.listWithTotal(e).subscribe({next:n=>{this.total=n.total,this.convertEmployeeSet(n.data),this.isLoading=!1},error:n=>{console.error("Failed to fetch employees:",n),this.isLoading=!1}})}convertEmployeeSet(t){let e=t.map(n=>H(U({},n),{id:n.employee_id??0}));this.empData=e}onPageChange(t){this.pageIndex=t,this.triggerGetEmp(void 0)}onContentPerPageChange(t){this.contentPerPage=t,this.pageIndex=0,this.triggerGetEmp(void 0)}onSearchChange(t){this.searchTerm=t,this.pageIndex=0,this.triggerGetEmp(void 0)}static \u0275fac=function(e){return new(e||i)(w(Wn),w(G),w(pe),w(te))};static \u0275cmp=R({type:i,selectors:[["employee-list"]],decls:9,vars:11,consts:[["viewTemplate",""],[3,"title","icon","showBack"],[1,"card-wrapper"],[1,"card"],[3,"saveSuccess","editFormValues"],["class","loading-overlay",4,"ngIf"],[3,"onEditTrigger","onDeleteTrigger","pageChange","contentPerPageChange","searchDataChange","onStatusToggle","dataSet","columns","actionTemplate","totalRecords","pageIndex","contentPerPage"],[1,"loading-overlay"],[1,"spinner-container"],[1,"spinner"],[1,"view",3,"click"]],template:function(e,n){if(e&1){let o=E();h(0,"app-title-card",1),s(1,"div",2)(2,"mat-card",3)(3,"add-employee",4),v("saveSuccess",function(a){return b(o),C(n.triggerGetEmp(a))}),c()()(),h(4,"p-confirmDialog"),y(5,Tb,5,0,"div",5),s(6,"simple-grid",6),v("onEditTrigger",function(a){return b(o),C(n.edit(a))})("onDeleteTrigger",function(a){return b(o),C(n.remove(a))})("pageChange",function(a){return b(o),C(n.onPageChange(a))})("contentPerPageChange",function(a){return b(o),C(n.onContentPerPageChange(a))})("searchDataChange",function(a){return b(o),C(n.onSearchChange(a))})("onStatusToggle",function(a){return b(o),C(n.toggleEmployeeStatus(a.row,a.newValue))}),c(),y(7,Eb,1,0,"ng-template",null,0,Pe)}if(e&2){let o=ge(8);g("title","Employee Setup")("icon","person")("showBack",!0),d(3),g("editFormValues",n.editEmployee),d(2),g("ngIf",n.isLoading),d(),g("dataSet",n.empData)("columns",n.columns)("actionTemplate",o)("totalRecords",n.total)("pageIndex",n.pageIndex)("contentPerPage",n.contentPerPage)}},dependencies:[W,Re,be,ze,he,Vr],styles:[".loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:9999}.spinner-container[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:8px;display:flex;flex-direction:column;align-items:center;gap:1rem;box-shadow:0 4px 6px #0000001a}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #3498db;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.spinner-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#333;font-size:14px;font-weight:500}"]})};function Fb(i,t){i&1&&(s(0,"div",19),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"settings.content_required")," "))}function Db(i,t){i&1&&(s(0,"div",19),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"settings.valid_from_required")," "))}function Ab(i,t){i&1&&(s(0,"div",19),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"settings.valid_to_required")," "))}function Vb(i,t){i&1&&(s(0,"div",19),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"settings.content_required")," "))}var Lr=class i{constructor(t,e,n){this.fb=t;this.router=e;this.backHandleService=n;this.settingsForm=this.fb.group({enable:["",A.required],blockerPageContent:["",A.required],from:["",[A.required]],to:["",[A.required]],annoucement:["",[A.required]]})}settingsForm;ngOnInit(){this.registerBackAction()}ngOnDestroy(){setTimeout(()=>{this.cleanupBackAction()},100)}registerBackAction(){let t=this.router.url;[t,t.split("?")[0],"/providers/settings"].forEach((n,o)=>{let r={id:`settings-back-action-${o}`,actionType:"navigate",backNavigationUrl:"/providers/dashboard",callback:()=>{},value:"",forPageUrl:n};this.backHandleService.backAction=this.backHandleService.backAction.filter(a=>!a.id.startsWith("settings-back-action-")||a.forPageUrl!==n),this.backHandleService.backAction.push(r)})}cleanupBackAction(){let t=this.router.url,e=this.backHandleService.backAction.length;this.backHandleService.backAction=this.backHandleService.backAction.filter(n=>!n.id.startsWith("settings-back-action-"))}onSubmit(){this.settingsForm.valid}buttonClicked(t){t.buttonType===1?this.onSubmit():t.buttonType===2&&this.onCancel()}onCancel(){}static \u0275fac=function(e){return new(e||i)(w(ue),w(le),w(Ct))};static \u0275cmp=R({type:i,selectors:[["app-settings"]],decls:43,vars:40,consts:[[3,"title","icon","showBack"],[3,"ngSubmit","formGroup"],[1,"form-group","switch-btn"],["for","enableMyID"],["id","enableMyID","formControlName","enable"],[1,"card-wrapper"],[1,"card"],[3,"buttonEventTriggered","compName","title","inputForm","showCancelBtn"],[1,"form-group"],["for","blockerPageContent"],["rows","5","cols","30","pInputTextarea","","formControlName","blockerPageContent"],["class","error-message",4,"ngIf"],["for","from"],["formControlName","from"],["for","toDate"],["formControlName","to"],[3,"buttonEventTriggered","compName","title","inputForm","showCancelBtn","submitBtnText"],["for","annoucement"],["rows","5","cols","30","pInputTextarea","","formControlName","annoucement"],[1,"error-message"]],template:function(e,n){if(e&1&&(h(0,"app-title-card",0),M(1,"translate"),s(2,"form",1),v("ngSubmit",function(){return n.onSubmit()}),s(3,"div",2)(4,"label",3),p(5),M(6,"translate"),c(),h(7,"p-inputSwitch",4),c(),s(8,"div",5)(9,"mat-card",6)(10,"form-template",7),M(11,"translate"),v("buttonEventTriggered",function(r){return n.buttonClicked(r)}),s(12,"div",8)(13,"label",9),p(14),M(15,"translate"),c(),s(16,"textarea",10),p(17,"            "),c(),y(18,Fb,3,3,"div",11),c(),s(19,"div",8)(20,"label",12),p(21),M(22,"translate"),c(),h(23,"date-picker-on-range",13),y(24,Db,3,3,"div",11),c(),s(25,"div",8)(26,"label",14),p(27),M(28,"translate"),c(),h(29,"date-picker-on-range",15),y(30,Ab,3,3,"div",11),c()()()(),s(31,"div",5)(32,"mat-card",6)(33,"form-template",16),M(34,"translate"),M(35,"translate"),v("buttonEventTriggered",function(r){return n.buttonClicked(r)}),s(36,"div",8)(37,"label",17),p(38),M(39,"translate"),c(),s(40,"textarea",18),p(41,"            "),c(),y(42,Vb,3,3,"div",11),c()()()()()),e&2){let o,r,a,l;g("title",O(1,22,"settings.title"))("icon","settings")("showBack",!0),d(2),g("formGroup",n.settingsForm),d(3),T(" ",O(6,24,"settings.enable_myid"),""),d(5),g("compName","settings")("title",O(11,26,"settings.display_blocker_page"))("inputForm",n.settingsForm)("showCancelBtn",!1),d(4),S(O(15,28,"settings.content")),d(4),g("ngIf",((o=n.settingsForm.get("blockerPageContent"))==null?null:o.invalid)&&((o=n.settingsForm.get("blockerPageContent"))==null?null:o.touched)),d(3),S(O(22,30,"settings.from")),d(3),g("ngIf",((r=n.settingsForm.get("fromDate"))==null?null:r.invalid)&&((r=n.settingsForm.get("fromDate"))==null?null:r.touched)),d(3),S(O(28,32,"settings.to")),d(3),g("ngIf",((a=n.settingsForm.get("toDate"))==null?null:a.invalid)&&((a=n.settingsForm.get("toDate"))==null?null:a.touched)),d(3),g("compName","send-announcement")("title",O(34,34,"settings.send_announcement_title"))("inputForm",n.settingsForm)("showCancelBtn",!1)("submitBtnText",O(35,36,"settings.send")),d(5),S(O(39,38,"settings.announcement")),d(4),g("ngIf",((l=n.settingsForm.get("annoucement"))==null?null:l.invalid)&&((l=n.settingsForm.get("annoucement"))==null?null:l.touched))}},dependencies:[W,be,vo,ze,Ic,bt,ye,Z,Y,fe,Me,Oe,Le,ce],styles:[".template-container{margin:.2rem}  .template-container .form-container{padding:.3rem!important}  .form-group{margin-top:1rem;margin-bottom:1rem}  .form-group label{color:#4f126a;font-weight:700;font-size:1rem}  .form-group.switch-btn{display:flex;align-items:center;justify-content:center}  .form-group.switch-btn label{margin-right:1rem}"]})};var Rb=(i,t)=>t.id;function Lb(i,t){i&1&&h(0,"div",4)}function zb(i,t){if(i&1){let e=E();s(0,"div",5)(1,"div",6),v("click",function(){let o=b(e).$implicit,r=_();return C(r.selectColor(o))}),c(),s(2,"div",7),p(3),c()()}if(i&2){let e=t.$implicit;j("selected",e.selected),d(),yt("background",e.value),d(2),T(" ",e.name," ")}}var zr=class i{label="";colors=[];selectedColor=null;ngOnInit(){this.colors.length||(this.colors=zi,this.selectedColor=this.colors[0])}selectColor(t){this.selectedColor=t,this.colors=this.colors.map(e=>H(U({},e),{selected:e.id===t.id})),this.onChange(this.selectedColor),this.onTouched()}onChange=()=>{};onTouched=()=>{};writeValue(t){t?(this.selectedColor=t,this.markSelected(t)):(this.selectedColor=null,this.colors.forEach(e=>e.selected=!1))}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){}markSelected(t){this.colors.forEach(e=>e.selected=e.id===t.id)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=R({type:i,selectors:[["color-picker-on-range"]],inputs:{label:"label",colors:"colors"},features:[_n([{provide:js,useExisting:ws(()=>i),multi:!0}])],decls:7,vars:1,consts:[[1,"color-range-container"],[1,"color-range"],["class","color",4,"ngFor"],[1,"color-container",3,"selected"],[1,"color"],[1,"color-container"],[1,"color-displayer",3,"click"],[1,"color-title"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"label"),p(2),c(),s(3,"div",1),y(4,Lb,1,0,"div",2),Fs(5,zb,4,5,"div",3,Rb),c()()),e&2&&(d(2),S(n.label),d(3),Ds(n.colors))},styles:[".color-range-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#5d157c;font-size:.875rem;font-weight:700}.color-range-container[_ngcontent-%COMP%]   .color-range[_ngcontent-%COMP%]{display:flex;gap:.5rem;overflow:auto;margin-left:1rem;scrollbar-width:none}.color-range-container[_ngcontent-%COMP%]   .color-range[_ngcontent-%COMP%]   .color-container[_ngcontent-%COMP%]   .color-displayer[_ngcontent-%COMP%]{height:3rem;width:3rem;border-radius:50%;border-width:1px;border-color:#d9d9d9}.color-range-container[_ngcontent-%COMP%]   .color-range[_ngcontent-%COMP%]   .color-container[_ngcontent-%COMP%]   .color-title[_ngcontent-%COMP%]{text-align:center}.color-range-container[_ngcontent-%COMP%]   .color-range[_ngcontent-%COMP%]   .color-container.selected[_ngcontent-%COMP%]   .color-displayer[_ngcontent-%COMP%]{border:3px solid blueviolet;box-shadow:0 0 0 2px #f3f5f6 inset}"]})};var Bb=(i,t)=>({background:i,color:t}),jb=(i,t)=>[i,t];function Ub(i,t){i&1&&h(0,"div",31)}function Gb(i,t){i&1&&h(0,"div",31)}function qb(i,t){i&1&&h(0,"div",32)}function Wb(i,t){i&1&&h(0,"div",32)}function Hb(i,t){i&1&&h(0,"div",32)}function $b(i,t){if(i&1){let e=E();s(0,"div",26),v("click",function(){let o=b(e).index,r=_();return C(r.selectCard(o))}),et(1,12),y(2,Ub,1,0,"div",13)(3,Gb,1,0,"div",13)(4,qb,1,0,"div",14)(5,Wb,1,0,"div",14)(6,Hb,1,0,"div",14),tt(),s(7,"div",27)(8,"div",16)(9,"span",17),p(10),c(),h(11,"i",18),c(),s(12,"div",28),p(13),c(),s(14,"div",29),p(15),c(),s(16,"div",30),h(17,"i",19),c()()()}if(i&2){let e=t.$implicit,n=t.index,o=_();yt("background",e.card_color),g("ngClass",Gt(14,jb,e.styleClass,o.selectedCardIndex===n?"selected":"")),d(),g("ngSwitch",e.card_type),d(),g("ngSwitchCase","CLASSIC"),d(),g("ngSwitchCase","PREMIUM"),d(),g("ngSwitchCase","ULTIMATE"),d(),g("ngSwitchCase","MODERN"),d(),g("ngSwitchCase","VIRTUAL"),d(4),S(e.card_type),d(),g("ngClass",e.icon),d(2),S(e.member),d(2),T("**** **** **** ",e.id,""),d(2),g("ngClass",e.brandLogo)}}function Yb(i,t){i&1&&h(0,"div",31)}function Kb(i,t){i&1&&h(0,"div",32)}function Xb(i,t){i&1&&h(0,"div",31)}function Qb(i,t){i&1&&h(0,"div",32)}function Jb(i,t){i&1&&h(0,"div",32)}var Nr=class i{constructor(t,e,n,o){this.auth=t;this.memberCardService=e;this.toast=n;this.confirmation=o}cards=[];selectedCardIndex=0;COLORS_RANGE=zi;selectedColor=zi[0];textColorRange=[{name:"white",value:"#FFF",id:1,selected:!0},{name:"black",value:"#000",id:2,selected:!1}];selectedTextColor=this.textColorRange[0];title="";description="";formCard=null;DEFAULT_CARD={id:0,card_name:"Default Card",card_type:"CLASSIC",card_description:"Default membership card",card_color:"#cccccc",provider_id:0,member:"John Doe",org:"DEFAULT ORG",icon:"pi pi-user",styleClass:"default-card",brandLogo:"assets/visa-logo.svg"};ngOnInit(){let t=this.auth.getSelectedProviderId();this.memberCardService.listByProviderId(t).subscribe({next:e=>{if(Array.isArray(e)&&e.length>0){let n=e[0];this.formCard=H(U({},n),{id:n.id??Number(n.card_id??0),icon:n.icon??"pi pi-id-card",styleClass:n.styleClass??"classic-card",org:n.org??"",member:n.member??""}),this.title=this.formCard.card_name||"",this.description=this.formCard.card_description||"",this.selectedColor={name:"initial",value:this.formCard.card_color,id:0,selected:!0}}else this.formCard=null},error:()=>{this.formCard=null}}),this.cards=[{id:1001,card_type:"CLASSIC",card_name:"Classic Card",card_description:"Classic member benefits",card_color:"linear-gradient(135deg, #1e1e2f, #5c32a8)",provider_id:1,member:"John Doe",org:"Classic League",icon:"pi pi-star",styleClass:"classic-card",brandLogo:"assets/visa-logo.svg"},{id:1002,card_type:"PREMIUM",card_name:"Premium Card",card_description:"Priority access with exclusive rewards",card_color:"linear-gradient(135deg, #00f9ff, #7700ff)",provider_id:1,member:"Jane Smith",org:"Premium Club",icon:"pi pi-crown",styleClass:"premium-card",brandLogo:"assets/mastercard-logo.svg"},{id:1003,card_type:"ULTIMATE",card_name:"Ultimate Card",card_description:"All-in-one elite experience",card_color:"linear-gradient(135deg, #ff6a00, #ff006e)",provider_id:1,member:"Aryan Patel",org:"Ultimate Society",icon:"pi pi-diamond",styleClass:"ultimate-card",brandLogo:"assets/rupay-logo.svg"},{id:1004,card_type:"MODERN",card_name:"Modern Card",card_description:"Digital-first lifestyle card",card_color:"linear-gradient(135deg,rgb(97, 147, 247), #007cf0)",provider_id:1,member:"Anika Mehta",org:"Neo Members",icon:"pi pi-mobile",styleClass:"modern-card",brandLogo:"assets/phonepe-logo.svg"},{id:1005,card_type:"VIRTUAL",card_name:"Virtual Card",card_description:"Safe and contactless membership",card_color:"linear-gradient(135deg, #6366f1, #a855f7)",provider_id:1,member:"Karan Verma",org:"Virtual Access",icon:"pi pi-lock",styleClass:"virtual-card",brandLogo:"assets/virtual-card.svg"}],this.selectedColor={name:"initial",value:this.cards[0].card_color,id:0,selected:!0}}nextCard(){this.cards.length>0&&(this.selectedCardIndex=Math.min(this.selectedCardIndex+1,this.cards.length-1),this.selectCard(this.selectedCardIndex))}prevCard(){this.cards.length>0&&(this.selectedCardIndex=Math.max(this.selectedCardIndex-1,0),this.selectCard(this.selectedCardIndex))}selectCard(t){this.selectedCardIndex=t,this.selectedColor={name:"fromCard",value:this.cards[t].card_color,id:0,selected:!0}}get selectedCard(){return this.cards[this.selectedCardIndex]||this.DEFAULT_CARD}get currentCardBackground(){return this.selectedColor?.value||this.selectedCard.card_color}saveCard(){let t=this.auth.getSelectedProviderId(),e=this.selectedCard,n=H(U({},e),{provider_id:t,card_color:this.selectedColor.value,card_name:this.title,card_description:this.description}),o=e.card_id&&Number(e.card_id)>0?Number(e.card_id):void 0;o?(n.card_id=o,this.memberCardService.update(n).subscribe(()=>{this.toast.success("Success","Membership card updated")})):(delete n.card_id,delete n.id,this.memberCardService.listByProviderId(t).subscribe({next:r=>{if(Array.isArray(r)&&r.length>0){let l=r[0],m=Number(l?.card_id??l?.id??0);this.confirmation.confirm({header:"Permission Required",message:"This provider already has a membership card. Do you want to update it?",icon:"pi pi-exclamation-triangle",acceptLabel:"Update",rejectLabel:"Cancel",accept:()=>{m>0?(n.card_id=m,this.memberCardService.update(n).subscribe(()=>{this.toast.success("Success","Membership card updated")})):this.toast.error("Error","Invalid existing card identifier")},reject:u=>{(u===Fe.REJECT||u===Fe.CANCEL)&&this.toast.info("Cancelled","Update permission not granted")}});return}this.memberCardService.create(n).subscribe(()=>{this.toast.success("Success","Membership card created")})},error:()=>{this.toast.error("Error","Could not verify existing card for this provider")}}))}static \u0275fac=function(e){return new(e||i)(w(G),w(Tc),w(te),w(pe))};static \u0275cmp=R({type:i,selectors:[["app-member-card-setup"]],decls:48,vars:52,consts:[[3,"title","icon","showBack"],[1,"carousel-container"],[3,"click","disabled"],[1,"pi","pi-chevron-left"],[1,"carousel-wrapper"],[1,"carousel-track"],["class","carousel-card",3,"ngClass","background","click",4,"ngFor","ngForOf"],[1,"pi","pi-chevron-right"],[1,"color-section"],[3,"ngModelChange","ngModel","label"],[3,"ngModelChange","ngModel","colors","label"],[1,"preview-card",3,"ngClass","ngStyle"],[3,"ngSwitch"],["class","overlay-shape triangle",4,"ngSwitchCase"],["class","overlay-shape half-circle",4,"ngSwitchCase"],[1,"chip-nfc-row"],[1,"top-row"],[1,"card-type"],[1,"pi",3,"ngClass"],[1,"pi","pi-id-card",3,"ngClass"],[1,"card-details"],[1,"holder"],[1,"card-number"],[1,"form-section"],["type","text",3,"ngModelChange","ngModel","placeholder"],[3,"click"],[1,"carousel-card",3,"click","ngClass"],[1,"carousel-content"],[1,"card-member"],[1,"card-id"],[1,"brand-wrapper"],[1,"overlay-shape","triangle"],[1,"overlay-shape","half-circle"]],template:function(e,n){e&1&&(h(0,"app-title-card",0),M(1,"translate"),s(2,"div",1)(3,"button",2),v("click",function(){return n.prevCard()}),h(4,"i",3),c(),s(5,"div",4)(6,"div",5),y(7,$b,18,17,"div",6),c()(),s(8,"button",2),v("click",function(){return n.nextCard()}),h(9,"i",7),c()(),s(10,"div",8)(11,"color-picker-on-range",9),M(12,"translate"),N("ngModelChange",function(r){return z(n.selectedColor,r)||(n.selectedColor=r),r}),c(),s(13,"color-picker-on-range",10),M(14,"translate"),N("ngModelChange",function(r){return z(n.selectedTextColor,r)||(n.selectedTextColor=r),r}),c()(),s(15,"div",11),et(16,12),y(17,Yb,1,0,"div",13)(18,Kb,1,0,"div",14)(19,Xb,1,0,"div",13)(20,Qb,1,0,"div",14)(21,Jb,1,0,"div",14),tt(),s(22,"div",15)(23,"div",16)(24,"span",17),p(25),c(),h(26,"i",18),c(),h(27,"i",19),c(),s(28,"div",20)(29,"div",21),p(30),c(),s(31,"div",22),p(32),c()()(),s(33,"div",23)(34,"label"),p(35),M(36,"translate"),c(),s(37,"input",24),M(38,"translate"),N("ngModelChange",function(r){return z(n.title,r)||(n.title=r),r}),c(),s(39,"label"),p(40),M(41,"translate"),c(),s(42,"input",24),M(43,"translate"),N("ngModelChange",function(r){return z(n.description,r)||(n.description=r),r}),c(),s(44,"button",25),v("click",function(){return n.saveCard()}),p(45),M(46,"translate"),c()(),h(47,"p-confirmDialog")),e&2&&(g("title",O(1,33,"memberCard.title"))("icon","wallet")("showBack",!0),d(3),g("disabled",n.selectedCardIndex===0),d(3),yt("transform","translateX(-"+n.selectedCardIndex*100+"%)"),d(),g("ngForOf",n.cards),d(),g("disabled",n.selectedCardIndex===n.cards.length-1),d(3),L("ngModel",n.selectedColor),g("label",O(12,35,"memberCard.choose_background")),d(2),L("ngModel",n.selectedTextColor),g("colors",n.textColorRange)("label",O(14,37,"memberCard.choose_text_color")),d(2),g("ngClass",(n.formCard||n.selectedCard).styleClass)("ngStyle",Gt(49,Bb,n.currentCardBackground,n.selectedTextColor.value)),d(),g("ngSwitch",(n.formCard||n.selectedCard).card_type),d(),g("ngSwitchCase","CLASSIC"),d(),g("ngSwitchCase","PREMIUM"),d(),g("ngSwitchCase","ULTIMATE"),d(),g("ngSwitchCase","MODERN"),d(),g("ngSwitchCase","VIRTUAL"),d(4),S((n.formCard||n.selectedCard).card_type),d(),g("ngClass",(n.formCard||n.selectedCard).icon),d(),g("ngClass",(n.formCard||n.selectedCard).brandLogo),d(3),S((n.formCard||n.selectedCard).member),d(2),T("**** **** **** ",(n.formCard||n.selectedCard).card_id||(n.formCard||n.selectedCard).id,""),d(3),S(O(36,39,"memberCard.title_to_display")),d(2),L("ngModel",n.title),g("placeholder",O(38,41,"memberCard.title_placeholder")),d(3),S(O(41,43,"memberCard.description")),d(2),L("ngModel",n.description),g("placeholder",O(43,45,"memberCard.description_placeholder")),d(3),S(O(46,47,"memberCard.save")))},dependencies:[Se,ee,Rs,uo,fo,be,Z,Y,_e,he,zr,ce],styles:[".carousel-container[_ngcontent-%COMP%]   .carousel-wrapper[_ngcontent-%COMP%]{overflow:hidden;width:340px}.carousel-container[_ngcontent-%COMP%]   .carousel-card[_ngcontent-%COMP%]{width:320px;height:180px;position:relative;border-radius:18px;flex-shrink:0;margin:0 10px;padding:20px;color:#fff;box-shadow:0 3px 12px #0003;cursor:pointer}.carousel-container[_ngcontent-%COMP%]   .carousel-card[_ngcontent-%COMP%]   .carousel-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:100%}.carousel-container[_ngcontent-%COMP%]   .carousel-card[_ngcontent-%COMP%]   .brand-wrapper[_ngcontent-%COMP%]{text-align:right}.carousel-container[_ngcontent-%COMP%]   .carousel-card[_ngcontent-%COMP%]   .brand-logo[_ngcontent-%COMP%]{width:60px}.carousel-container[_ngcontent-%COMP%]   .carousel-card[_ngcontent-%COMP%]   .overlay-shape[_ngcontent-%COMP%]{position:absolute;opacity:.25;z-index:0}.carousel-container[_ngcontent-%COMP%]   .carousel-card[_ngcontent-%COMP%]   .triangle[_ngcontent-%COMP%]{width:100px;height:100px;top:0;right:0;background:#fff6;clip-path:polygon(0 0,100% 0,0 100%)}.carousel-container[_ngcontent-%COMP%]   .carousel-card[_ngcontent-%COMP%]   .wave[_ngcontent-%COMP%]{width:100%;height:100%;background:radial-gradient(circle at 60% 30%,rgba(186,5,138,.3),transparent 60%)}.carousel-container[_ngcontent-%COMP%]   .carousel-card[_ngcontent-%COMP%]   .quad[_ngcontent-%COMP%]{width:200px;height:200px;bottom:0;right:0;background:#fff3;clip-path:polygon(0 0,100% 0,100% 100%,30% 100%)}.carousel-container[_ngcontent-%COMP%]   .carousel-card[_ngcontent-%COMP%]   .diag[_ngcontent-%COMP%]{width:100%;height:100%;background:linear-gradient(135deg,rgba(255,255,255,.2),transparent)}.carousel-container[_ngcontent-%COMP%]   .carousel-card[_ngcontent-%COMP%]   .half-circle[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:50%;top:-30px;right:-30px;background:#ffffff4d}.preview-card[_ngcontent-%COMP%]{margin:2rem auto;width:340px;height:200px;border-radius:18px;position:relative;padding:20px;color:#fff;box-shadow:0 6px 12px #0000004d}.preview-card[_ngcontent-%COMP%]   .chip-nfc-row[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%], .preview-card[_ngcontent-%COMP%]   .chip-nfc-row[_ngcontent-%COMP%]   .nfc[_ngcontent-%COMP%]{width:30px}.preview-card[_ngcontent-%COMP%]   .card-logo-large[_ngcontent-%COMP%]{position:absolute;top:45%;left:50%;transform:translate(-50%,-50%);font-size:80px;font-weight:700;opacity:.08}.preview-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]{position:absolute;bottom:25px;left:20px}.preview-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .holder[_ngcontent-%COMP%]{font-size:18px;font-weight:600}.preview-card[_ngcontent-%COMP%]   .overlay-shape[_ngcontent-%COMP%]{position:absolute;z-index:0;opacity:.2}.carousel-card[_ngcontent-%COMP%], .preview-card[_ngcontent-%COMP%]{position:relative;overflow:hidden}.carousel-card[_ngcontent-%COMP%]   .overlay-shape[_ngcontent-%COMP%], .preview-card[_ngcontent-%COMP%]   .overlay-shape[_ngcontent-%COMP%]{position:absolute;z-index:0;opacity:.15}.carousel-card.ultimate-card[_ngcontent-%COMP%]   .overlay-shape[_ngcontent-%COMP%], .preview-card.ultimate-card[_ngcontent-%COMP%]   .overlay-shape[_ngcontent-%COMP%]{width:200px;height:200px;background:#ffffff26;clip-path:polygon(0 0,100% 0,60% 100%,0% 100%);bottom:0;right:0}.carousel-card.modern-card[_ngcontent-%COMP%], .preview-card.modern-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#00c9a7,#00f2fe);border-radius:16px;position:relative;overflow:hidden}.carousel-card.modern-card[_ngcontent-%COMP%]   .overlay-shape[_ngcontent-%COMP%], .preview-card.modern-card[_ngcontent-%COMP%]   .overlay-shape[_ngcontent-%COMP%]{position:absolute;width:150%;height:150%;top:-30%;left:-30%;background:linear-gradient(135deg,transparent 40%,rgba(255,255,255,.15) 40%,rgba(255,255,255,.15) 60%,transparent 60%);transform:rotate(45deg);z-index:0}.carousel-card.modern-card[_ngcontent-%COMP%]   .carousel-content[_ngcontent-%COMP%], .carousel-card.modern-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%], .preview-card.modern-card[_ngcontent-%COMP%]   .carousel-content[_ngcontent-%COMP%], .preview-card.modern-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]{position:relative;z-index:2}.carousel-card.modern-card[_ngcontent-%COMP%]   .brand-logo[_ngcontent-%COMP%], .preview-card.modern-card[_ngcontent-%COMP%]   .brand-logo[_ngcontent-%COMP%]{z-index:2}.color-section[_ngcontent-%COMP%], .color-range-container[_ngcontent-%COMP%]{margin:1rem}.preview-card[_ngcontent-%COMP%]{height:180px;margin:1rem 1.5rem;padding:20px;border-radius:18px;color:#fff;position:relative;box-shadow:0 6px 12px #0000004d}.preview-card[_ngcontent-%COMP%]   .chip-nfc-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:10px}.preview-card[_ngcontent-%COMP%]   .chip-nfc-row[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%], .preview-card[_ngcontent-%COMP%]   .chip-nfc-row[_ngcontent-%COMP%]   .nfc[_ngcontent-%COMP%]{width:30px;height:auto}.preview-card[_ngcontent-%COMP%]   .card-logo-large[_ngcontent-%COMP%]{position:absolute;font-size:80px;font-weight:700;top:40%;left:50%;transform:translate(-50%,-50%);opacity:.1}.preview-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]{position:absolute;bottom:30px;left:20px}.preview-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .holder[_ngcontent-%COMP%]{font-weight:600;font-size:18px}.preview-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .org[_ngcontent-%COMP%], .preview-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .card-number[_ngcontent-%COMP%]{font-size:14px}.preview-card[_ngcontent-%COMP%]   .brand-logo[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:10px;width:60px}.form-section[_ngcontent-%COMP%]{margin-top:32px;padding:24px;background:#f9f9f9;border-radius:12px;box-shadow:0 2px 10px #0000000d;display:flex;flex-direction:column;gap:16px}.form-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#333;margin-bottom:4px}.form-section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 14px;border-radius:8px;background:#f5e8ff;border:1px solid #ccc;font-size:14px;outline:none;transition:border-color .2s}.form-section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#5d157c}.form-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:12px;padding:12px 20px;background:#5d157c;color:#fff;border:none;border-radius:8px;font-weight:700;font-size:14px;cursor:pointer;transition:background .2s}.form-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.card-style[_ngcontent-%COMP%], .preview-card[_ngcontent-%COMP%], .carousel-container[_ngcontent-%COMP%]   .carousel-card[_ngcontent-%COMP%]{width:325px;height:180px;border-radius:18px;color:#fff;position:relative;box-shadow:0 6px 12px #0000004d;padding:20px;overflow:hidden}.card-style[_ngcontent-%COMP%]   .overlay-shape[_ngcontent-%COMP%], .preview-card[_ngcontent-%COMP%]   .overlay-shape[_ngcontent-%COMP%], .carousel-container[_ngcontent-%COMP%]   .carousel-card[_ngcontent-%COMP%]   .overlay-shape[_ngcontent-%COMP%]{position:absolute;z-index:0;opacity:.2;pointer-events:none}.card-style[_ngcontent-%COMP%]   .triangle[_ngcontent-%COMP%], .preview-card[_ngcontent-%COMP%]   .triangle[_ngcontent-%COMP%], .carousel-container[_ngcontent-%COMP%]   .carousel-card[_ngcontent-%COMP%]   .triangle[_ngcontent-%COMP%]{width:100px;height:100px;background:#fff6;clip-path:polygon(0 0,100% 0,0 100%);top:0;right:0}.card-style[_ngcontent-%COMP%]   .wave[_ngcontent-%COMP%], .preview-card[_ngcontent-%COMP%]   .wave[_ngcontent-%COMP%], .carousel-container[_ngcontent-%COMP%]   .carousel-card[_ngcontent-%COMP%]   .wave[_ngcontent-%COMP%]{width:100%;height:100%;background:radial-gradient(circle at 70% 30%,rgba(255,255,255,.3),transparent 60%)}.card-style[_ngcontent-%COMP%]   .quad[_ngcontent-%COMP%], .preview-card[_ngcontent-%COMP%]   .quad[_ngcontent-%COMP%], .carousel-container[_ngcontent-%COMP%]   .carousel-card[_ngcontent-%COMP%]   .quad[_ngcontent-%COMP%]{width:200px;height:200px;background:#ffffff40;clip-path:polygon(0 0,100% 0,70% 100%,0% 100%);bottom:0;right:0}.card-style[_ngcontent-%COMP%]   .diag[_ngcontent-%COMP%], .preview-card[_ngcontent-%COMP%]   .diag[_ngcontent-%COMP%], .carousel-container[_ngcontent-%COMP%]   .carousel-card[_ngcontent-%COMP%]   .diag[_ngcontent-%COMP%]{width:100%;height:100%;background:linear-gradient(135deg,rgba(255,255,255,.2),transparent)}.card-style[_ngcontent-%COMP%]   .half-circle[_ngcontent-%COMP%], .preview-card[_ngcontent-%COMP%]   .half-circle[_ngcontent-%COMP%], .carousel-container[_ngcontent-%COMP%]   .carousel-card[_ngcontent-%COMP%]   .half-circle[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:50%;background:#ffffff4d;top:-40px;right:-40px}.card-style[_ngcontent-%COMP%]   .chip-nfc-row[_ngcontent-%COMP%], .preview-card[_ngcontent-%COMP%]   .chip-nfc-row[_ngcontent-%COMP%], .carousel-container[_ngcontent-%COMP%]   .carousel-card[_ngcontent-%COMP%]   .chip-nfc-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;z-index:2;position:relative}.card-style[_ngcontent-%COMP%]   .chip-nfc-row[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%], .preview-card[_ngcontent-%COMP%]   .chip-nfc-row[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%], .carousel-container[_ngcontent-%COMP%]   .carousel-card[_ngcontent-%COMP%]   .chip-nfc-row[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%], .card-style[_ngcontent-%COMP%]   .chip-nfc-row[_ngcontent-%COMP%]   .nfc[_ngcontent-%COMP%], .preview-card[_ngcontent-%COMP%]   .chip-nfc-row[_ngcontent-%COMP%]   .nfc[_ngcontent-%COMP%], .carousel-container[_ngcontent-%COMP%]   .carousel-card[_ngcontent-%COMP%]   .chip-nfc-row[_ngcontent-%COMP%]   .nfc[_ngcontent-%COMP%]{width:30px;height:auto}.card-style[_ngcontent-%COMP%]   .card-logo-large[_ngcontent-%COMP%], .preview-card[_ngcontent-%COMP%]   .card-logo-large[_ngcontent-%COMP%], .carousel-container[_ngcontent-%COMP%]   .carousel-card[_ngcontent-%COMP%]   .card-logo-large[_ngcontent-%COMP%]{position:absolute;font-size:80px;font-weight:700;top:45%;left:50%;transform:translate(-50%,-50%);opacity:.08;z-index:1}.card-style[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%], .preview-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%], .carousel-container[_ngcontent-%COMP%]   .carousel-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]{position:absolute;bottom:30px;left:20px;z-index:2}.card-style[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .holder[_ngcontent-%COMP%], .preview-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .holder[_ngcontent-%COMP%], .carousel-container[_ngcontent-%COMP%]   .carousel-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .holder[_ngcontent-%COMP%]{font-weight:600;font-size:18px}.card-style[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .org[_ngcontent-%COMP%], .preview-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .org[_ngcontent-%COMP%], .carousel-container[_ngcontent-%COMP%]   .carousel-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .org[_ngcontent-%COMP%], .card-style[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .card-number[_ngcontent-%COMP%], .preview-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .card-number[_ngcontent-%COMP%], .carousel-container[_ngcontent-%COMP%]   .carousel-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .card-number[_ngcontent-%COMP%]{font-size:14px}.card-style[_ngcontent-%COMP%]   .brand-logo[_ngcontent-%COMP%], .preview-card[_ngcontent-%COMP%]   .brand-logo[_ngcontent-%COMP%], .carousel-container[_ngcontent-%COMP%]   .carousel-card[_ngcontent-%COMP%]   .brand-logo[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:10px;width:60px;z-index:2}.carousel-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px;margin-top:20px}.carousel-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#333}.carousel-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.carousel-container[_ngcontent-%COMP%]   .carousel-wrapper[_ngcontent-%COMP%]{overflow:hidden;width:325px}.carousel-container[_ngcontent-%COMP%]   .carousel-track[_ngcontent-%COMP%]{display:flex;transition:transform .4s ease-in-out}.carousel-container[_ngcontent-%COMP%]   .carousel-card[_ngcontent-%COMP%]{flex-shrink:0;margin:0}.carousel-container[_ngcontent-%COMP%]   .carousel-card.selected[_ngcontent-%COMP%]{transform:scale(1.03);border:2px solid white}.preview-card[_ngcontent-%COMP%]{margin:auto}"]})};var Di=class i extends on{constructor(e,n){let o=i.getUrlObj("provider");super(e,"category_id",o,"slots");this.authServ=n}createOrUpdate(e,n,o){let r=o||e.slot_type||"provider";console.log("SlotSetupService - createOrUpdate called with:",{slot_type:r,primaryIdValue:n,info:e}),this.setUrl(i.getUrlObj(r));let m=e,{slot_type:a}=m,l=ys(m,["slot_type"]);return console.log("Request body (without slot_type):",l),console.log("Using URL with slot_type:",r),console.log("API Endpoint:",n?`PUT ${Q.SLOT.URL.replace("_SLOT_TYPE_",r)}/${n}`:`POST ${Q.SLOT.URL.replace("_SLOT_TYPE_",r)}`),super.createOrUpdate(l,n)}list(e,n){let o=n||"provider";return console.log("SlotSetupService - list called with slot_type:",o,"params:",e),this.setUrl(i.getUrlObj(o)),console.log("API Endpoint:",`GET ${Q.SLOT.URL.replace("_SLOT_TYPE_",o)}`),super.list(e)}static getUrlObj(e){(!e||e==="_SLOT_TYPE_")&&(console.warn("\u26A0\uFE0F Invalid slot_type provided:",e,'- defaulting to "provider"'),e="provider");let n=Q.SLOT.URL.replace("_SLOT_TYPE_",e);return{create:n,update:n,list:n,delete:n}}getProductsByProvider(e,n){let o=`provider/${e}/products`;return console.log("Fetching products for provider:",e,"with params:",n),console.log("API Endpoint:",`GET /api/v2/${o}`),this.http.get(o,{params:n})}getSlotsByProvider(e,n="provider",o){console.log("=== GET SLOTS BY PROVIDER ==="),console.log("Provider ID:",e),console.log("Slot Type:",n),console.log("Additional Params:",o),this.setUrl(i.getUrlObj(n));let r=U({provider_id:e},o);return console.log("Final Query Params:",r),console.log("API Endpoint:",`GET ${Q.SLOT.URL.replace("_SLOT_TYPE_",n)}`),super.list(r)}deleteSlotById(e,n){return this.setUrl(i.getUrlObj(n)),console.log("API Endpoint:",`DELETE ${Q.SLOT.URL.replace("_SLOT_TYPE_",n)}/${e}`),super.delete(e)}getSlotById(e,n){let r=`${i.getUrlObj(n).list||i.getUrlObj(n).create}/${e}`;return this.http.get(r)}listSlots(e,n){return this.setUrl(i.getUrlObj(e)),console.log("API Endpoint:",`GET ${Q.SLOT.URL.replace("_SLOT_TYPE_",e)}`),super.list(n)}listSlotsWithTotal(e,n){return this.setUrl(i.getUrlObj(e)),console.log("API Endpoint:",`GET ${Q.SLOT.URL.replace("_SLOT_TYPE_",e)}`),super.listWithTotal(n)}getSlotAvailabilityWithUnavailability(e){return console.log("=== GET SLOT AVAILABILITY WITH UNAVAILABILITY ==="),console.log("Params:",e),this.http.get("slot-availability-with-unavailability",{params:e})}createUnavailability(e,n){console.log("=== CREATE UNAVAILABILITY ==="),console.log("Provider ID:",e),console.log("Body:",n);let o=`providers_new/${e}/unavailability`;return this.http.post(o,n)}updateUnavailability(e,n){console.log("=== UPDATE UNAVAILABILITY ==="),console.log("Provider ID:",e),console.log("Body:",n);let o=`providers_new/${e}/unavailability`;return this.http.put(o,n)}static \u0275fac=function(n){return new(n||i)(Ae($e),Ae(G))};static \u0275prov=Je({token:i,factory:i.\u0275fac,providedIn:"root"})};function Zb(i,t){i&1&&(s(0,"div",20),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"slot.valid_slot_name_required")," "))}function eC(i,t){i&1&&(s(0,"div",20),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"slot.start_time_required")," "))}function tC(i,t){i&1&&(s(0,"div",20),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"slot.end_time_required")," "))}function nC(i,t){i&1&&(s(0,"div",20),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"slot.valid_limit_required")," "))}function iC(i,t){i&1&&(s(0,"div",20),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"slot.slot_type_required")," "))}function oC(i,t){i&1&&(s(0,"div",20),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"slot.product_id_required")," "))}function rC(i,t){if(i&1&&(s(0,"div",2)(1,"label",21),p(2),M(3,"translate"),c(),h(4,"p-dropdown",22),M(5,"translate"),y(6,oC,3,3,"div",5),c()),i&2){let e,n=_();d(2),S(O(3,4,"slot.product")),d(2),ne("placeholder",O(5,6,"slot.select_product")),g("options",n.filteredServiceProducts),d(2),g("ngIf",((e=n.slotForm.get("product_id"))==null?null:e.invalid)&&((e=n.slotForm.get("product_id"))==null?null:e.touched))}}function aC(i,t){i&1&&(s(0,"div",20),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"slot.status_required")," "))}function sC(i,t){i&1&&(s(0,"div",20),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"slot.enable_required")," "))}var Br=class i{constructor(t,e,n){this.fb=t;this.authService=e;this.slotSetupService=n;this.slotForm=this.fb.group({start_time:[new Date,A.required],end_time:[new Date,[A.required]],slot_type:["",A.required],slot_name:["",A.required],product_id:[],slot_limit:["",[A.required]],status:["Available",A.required],enable:[!0,A.required]})}products=[];editFormValues;saveSuccess=new Ee;formExpanded=!1;statusOptions=Qc;submitBtnText=pa;slotForm;slot_types=[{label:"Provider",value:"provider"},{label:"Service",value:"service"}];filteredServiceProducts=[];slotTypeSubscription;ngOnInit(){this.slotTypeSubscription=this.slotForm.get("slot_type")?.valueChanges.subscribe(t=>{let e=this.slotForm.get("product_id");t==="service"?(e?.setValidators([A.required]),this.fetchServiceProducts()):(e?.clearValidators(),this.products=[],this.filteredServiceProducts=[],this.slotForm.patchValue({product_id:null})),e?.updateValueAndValidity()})}ngOnChanges(t){t.editFormValues&&t.editFormValues.currentValue!=null&&this.setEditFormValue()}ngOnDestroy(){this.slotTypeSubscription&&this.slotTypeSubscription.unsubscribe()}fetchServiceProducts(){let t=this.authService.getSelectedProviderId();this.slotSetupService.getProductsByProvider(t,{product_type:"service",visibility:!0}).subscribe({next:e=>{let n=[];e?.products?n=e.products:e?.data?n=e.data:Array.isArray(e)&&(n=e),this.filteredServiceProducts=n.filter(o=>o.is_service===!0||o.isService===!0),this.products=n,this.filteredServiceProducts.length>0&&!this.slotForm.get("product_id")?.value&&this.slotForm.patchValue({product_id:this.filteredServiceProducts[0].product_id})},error:e=>{console.error("Error fetching service products:",e),this.products=[],this.filteredServiceProducts=[]}})}timeStringToDate(t){if(!t)return null;let[e,n,o]=t.split(":").map(Number);if(isNaN(e)||isNaN(n)||isNaN(o))return null;let r=new Date;return r.setHours(e,n,o,0),r}setEditFormValue(){this.submitBtnText=Jc,this.editFormValues&&(this.slotForm.patchValue({start_time:this.timeStringToDate(this.editFormValues.start_time),end_time:this.timeStringToDate(this.editFormValues.end_time),slot_name:this.editFormValues.slot_name||"",slot_limit:this.editFormValues.slot_limit||"",slot_type:this.editFormValues.slot_type||null,product_id:this.editFormValues.product_id||null,status:this.editFormValues.status||null,enable:this.editFormValues.enable??!1}),this.editFormValues.slot_type==="service"&&this.fetchServiceProducts(),this.formExpanded=!0)}formatToTimeString(t){let e=new Date(t),n=String(e.getHours()).padStart(2,"0"),o=String(e.getMinutes()).padStart(2,"0"),r=String(e.getSeconds()).padStart(2,"0");return`${n}:${o}:${r}`}onSubmit(){let t=this.slotForm.get("slot_type")?.value,e=this.slotForm.get("product_id")?.value;if(t==="service"&&!e){console.error("\u274C Service slots require product_id"),this.slotForm.get("product_id")?.setErrors({required:!0}),this.slotForm.get("product_id")?.markAsTouched();return}if(this.slotForm.valid){let n=this.slotForm.value,o=this.formatToTimeString(n.start_time),r=this.formatToTimeString(n.end_time),a={start_time:o,end_time:r,slot_name:n.slot_name,slot_limit:n.slot_limit,status:n.status,enable:n.enable,provider_id:this.authService.getSelectedProviderId()};if(t==="service"){if(!e){console.error("\u274C product_id is required for service slots but is missing");return}a.product_id=e}let l=this.editFormValues?.service_slot_id||this.editFormValues?.provider_slot_id;if(t==="service"&&!a.product_id){console.error("\u274C VALIDATION FAILED: product_id is missing in request body"),alert("Please select a service/product before creating a service slot.");return}this.slotSetupService.createOrUpdate(a,l,t).subscribe({next:m=>{this.saveSuccess.emit(m),this.editFormValues=void 0,this.slotForm.reset({start_time:new Date,end_time:new Date,slot_type:"",slot_name:"",product_id:null,slot_limit:"",status:"Available",enable:!0}),this.formExpanded=!1},error:m=>{console.error("\u274C Error creating/updating slot:",m);let u="Failed to create/update slot. ";m?.error?.detail?u+=m.error.detail:m?.message&&(u+=m.message),console.error("Error details:",u),alert(u)}})}else Object.keys(this.slotForm.controls).forEach(n=>{this.slotForm.get(n)?.markAsTouched()})}getFormValidationErrors(){let t={};return Object.keys(this.slotForm.controls).forEach(e=>{let n=this.slotForm.get(e);n&&n.errors&&(t[e]=n.errors)}),t}buttonClicked(t){t.buttonType===1?this.onSubmit():t.buttonType===2&&this.onCancel()}onCancel(){this.submitBtnText==pa?(this.slotForm.reset({start_time:new Date,end_time:new Date,slot_type:"",slot_name:"",product_id:null,slot_limit:"",status:"Available",enable:!0}),this.formExpanded=!1):this.setEditFormValue()}static \u0275fac=function(e){return new(e||i)(w(ue),w(G),w(Di))};static \u0275cmp=R({type:i,selectors:[["add-slot"]],inputs:{products:"products",editFormValues:"editFormValues"},outputs:{saveSuccess:"saveSuccess"},features:[Ze],decls:50,vars:50,consts:[[3,"buttonEventTriggered","compName","isExpanded","submitBtnText","title","inputForm"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","description"],["id","slot_name","type","text","formControlName","slot_name",3,"placeholder"],["class","error-message",4,"ngIf"],["for","start_time"],["formControlName","start_time"],["for","end_time"],["formControlName","end_time"],["for","slot_limit"],["id","description","type","text","formControlName","slot_limit",3,"placeholder"],["for","slot_type"],["formControlName","slot_type","optionValue","value","optionLabel","label","styleClass","full-width-dropdown",1,"custom-dropdown",3,"disabled","options","placeholder"],["class","form-group",4,"ngIf"],["for","status"],["formControlName","status","optionLabel","label","optionValue","value",1,"w-full",3,"options","placeholder"],[1,"switch-btn-group"],["for","enable"],["id","enable","formControlName","enable"],[1,"error-message"],["for","product"],["formControlName","product_id","optionValue","product_id","optionLabel","product_name","styleClass","full-width-dropdown",1,"custom-dropdown",3,"options","placeholder"]],template:function(e,n){if(e&1&&(s(0,"form-template",0),v("buttonEventTriggered",function(r){return n.buttonClicked(r)}),s(1,"form",1),v("ngSubmit",function(){return n.onSubmit()}),s(2,"div",2)(3,"label",3),p(4),M(5,"translate"),c(),h(6,"input",4),M(7,"translate"),y(8,Zb,3,3,"div",5),c(),s(9,"div",2)(10,"label",6),p(11),M(12,"translate"),c(),h(13,"time-picker",7),y(14,eC,3,3,"div",5),c(),s(15,"div",2)(16,"label",8),p(17),M(18,"translate"),c(),h(19,"time-picker",9),y(20,tC,3,3,"div",5),c(),s(21,"div",2)(22,"label",10),p(23),M(24,"translate"),c(),h(25,"input",11),M(26,"translate"),y(27,nC,3,3,"div",5),c(),s(28,"div",2)(29,"label",12),p(30),M(31,"translate"),c(),h(32,"p-dropdown",13),M(33,"translate"),y(34,iC,3,3,"div",5),c(),y(35,rC,7,8,"div",14),s(36,"div",2)(37,"label",15),p(38),M(39,"translate"),c(),h(40,"p-dropdown",16),M(41,"translate"),y(42,aC,3,3,"div",5),c(),s(43,"div",2)(44,"div",17)(45,"label",18),p(46),M(47,"translate"),c(),h(48,"p-inputSwitch",19),y(49,sC,3,3,"div",5),c()()()()),e&2){let o,r,a,l,m,u,f,x;g("compName","add-expense")("isExpanded",n.formExpanded)("submitBtnText",n.submitBtnText)("title","Add Slot")("inputForm",n.slotForm),d(),g("formGroup",n.slotForm),d(3),T(" ",O(5,28,"slot.slot_name"),""),d(2),ne("placeholder",O(7,30,"slot.description")),d(2),g("ngIf",((o=n.slotForm.get("slot_name"))==null?null:o.invalid)&&((o=n.slotForm.get("slot_name"))==null?null:o.touched)),d(3),S(O(12,32,"slot.start_time")),d(3),g("ngIf",((r=n.slotForm.get("start_time"))==null?null:r.invalid)&&((r=n.slotForm.get("start_time"))==null?null:r.touched)),d(3),S(O(18,34,"slot.end_time")),d(3),g("ngIf",((a=n.slotForm.get("end_time"))==null?null:a.invalid)&&((a=n.slotForm.get("end_time"))==null?null:a.touched)),d(3),T(" ",O(24,36,"slot.limit"),""),d(2),ne("placeholder",O(26,38,"slot.limit")),d(2),g("ngIf",((l=n.slotForm.get("slot_limit"))==null?null:l.invalid)&&((l=n.slotForm.get("slot_limit"))==null?null:l.touched)),d(3),S(O(31,40,"slot.type")),d(2),ne("placeholder",O(33,42,"slot.select_slot_type")),g("disabled",!!(n.editFormValues!=null&&n.editFormValues.provider_slot_id)||!!(n.editFormValues!=null&&n.editFormValues.service_slot_id))("options",n.slot_types),d(2),g("ngIf",((m=n.slotForm.get("slot_type"))==null?null:m.invalid)&&((m=n.slotForm.get("slot_type"))==null?null:m.touched)),d(),g("ngIf",((u=n.slotForm.get("slot_type"))==null?null:u.value)==="service"),d(3),S(O(39,44,"slot.status")),d(2),ne("placeholder",O(41,46,"slot.select_status")),g("options",n.statusOptions),d(2),g("ngIf",((f=n.slotForm.get("status"))==null?null:f.invalid)&&((f=n.slotForm.get("status"))==null?null:f.touched)),d(4),S(O(47,48,"slot.enable")),d(3),g("ngIf",((x=n.slotForm.get("enable"))==null?null:x.invalid)&&((x=n.slotForm.get("enable"))==null?null:x.touched))}},dependencies:[W,Ec,Ve,bt,ye,Z,Y,fe,Me,Oe,Le,ce],styles:[".switch-btn-group[_ngcontent-%COMP%]{margin-top:1rem;display:flex;justify-content:space-between;width:100%;margin-bottom:1rem}.switch-btn-group.bolder[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:900;font-size:14px;color:#5d157c}.switch-btn-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#5d157c;font-weight:700;font-size:14px}.switch-btn-group[_ngcontent-%COMP%]     p-inputswitch>div{height:1.5rem}.switch-btn-group[_ngcontent-%COMP%]     .p-inputswitch.p-inputswitch-checked .p-inputswitch-slider{background-color:#5d157c!important}"]})};var lC=()=>({width:"250px"}),pC=()=>({width:"180px",height:"40px"}),mC=()=>({width:"220px",height:"40px"});function gC(i,t){if(i&1){let e=E();s(0,"div",11)(1,"label"),p(2,"Select Product"),c(),s(3,"p-dropdown",12),N("ngModelChange",function(o){b(e);let r=_();return z(r.selectedProductId,o)||(r.selectedProductId=o),C(o)}),v("onChange",function(){b(e);let o=_();return C(o.onProductChange())}),c()()}if(i&2){let e=_();d(3),st(se(4,lC)),g("options",e.products),L("ngModel",e.selectedProductId)}}function uC(i,t){if(i&1){let e=E();s(0,"div",14)(1,"label",15),p(2,"Select Product"),c(),s(3,"p-dropdown",21),N("ngModelChange",function(o){b(e);let r=_(2);return z(r.selectedProductId,o)||(r.selectedProductId=o),C(o)}),v("onChange",function(){b(e);let o=_(2);return C(o.onUnavailabilityFilterChange())}),c()()}if(i&2){let e=_(2);d(3),st(se(4,mC)),g("options",e.products),L("ngModel",e.selectedProductId)}}function fC(i,t){if(i&1){let e=E();s(0,"div",13)(1,"div",14)(2,"label",15),p(3,"Select Date"),c(),s(4,"p-calendar",16),N("ngModelChange",function(o){b(e);let r=_();return z(r.selectedDate,o)||(r.selectedDate=o),C(o)}),v("onSelect",function(){b(e);let o=_();return C(o.onUnavailabilityFilterChange())}),c()(),s(5,"div",14)(6,"label",15),p(7,"Slot Type"),c(),s(8,"p-selectButton",17),N("ngModelChange",function(o){b(e);let r=_();return z(r.unavailabilitySlotType,o)||(r.unavailabilitySlotType=o),C(o)}),v("onChange",function(){b(e);let o=_();return C(o.onUnavailabilityFilterChange())}),c()(),y(9,uC,4,5,"div",18),s(10,"div",14)(11,"label",19),p(12,"Whole Day Off"),c(),s(13,"p-inputSwitch",20),N("ngModelChange",function(o){b(e);let r=_();return z(r.isWholeDayUnavailable,o)||(r.isWholeDayUnavailable=o),C(o)}),v("onChange",function(o){b(e);let r=_();return C(r.onWholeDayChange(o))}),c()()()}if(i&2){let e=_();d(4),st(se(8,pC)),L("ngModel",e.selectedDate),g("showIcon",!0),d(4),g("options",e.unavailabilitySlotTypes),L("ngModel",e.unavailabilitySlotType),d(),g("ngIf",e.unavailabilitySlotType==="service"),d(4),L("ngModel",e.isWholeDayUnavailable)}}function _C(i,t){if(i&1){let e=E();s(0,"mat-card",22)(1,"add-slot",23),v("saveSuccess",function(o){b(e);let r=_();return C(r.triggerGetSlots(o))}),c()()}if(i&2){let e=_();d(),g("editFormValues",e.editSlot)}}function hC(i,t){i&1&&(s(0,"div",24)(1,"div",25),h(2,"i",26),s(3,"p",27),p(4," Please select a product to view available slots "),c()()())}function bC(i,t){i&1&&(s(0,"div",24)(1,"div",25),h(2,"i",28),s(3,"p",27),p(4," Whole Day is marked as unavailable. No slots to show. "),c()()())}function CC(i,t){i&1&&(s(0,"div",24)(1,"div",25),h(2,"i",26),s(3,"p",27),p(4," Please select a product to view slots for unavailability "),c()()())}function vC(i,t){if(i&1){let e=E();s(0,"simple-grid",29),v("onEditTrigger",function(o){b(e);let r=_();return C(r.edit(o))})("onDeleteTrigger",function(o){b(e);let r=_();return C(r.remove(o))})("pageChange",function(o){b(e);let r=_();return C(r.onPageChange(o))})("contentPerPageChange",function(o){b(e);let r=_();return C(r.onContentPerPageChange(o))})("searchDataChange",function(o){b(e);let r=_();return C(r.onSearchChange(o))}),c()}if(i&2){let e=_(),n=ge(19);g("dataSet",e.slotsData)("columns",e.columns)("actionTemplate",n)("totalRecords",e.total)("pageIndex",e.pageIndex)("contentPerPage",e.contentPerPage)("isShowSearch",!1)}}function xC(i,t){if(i&1){let e=E();s(0,"div",32),v("click",function(o){b(e);let r=_().$implicit,a=_();return C(a.handleActionClick(r,o))}),s(1,"p-inputSwitch",33),N("ngModelChange",function(o){b(e);let r=_().$implicit;return z(r.enable,o)||(r.enable=o),C(o)}),c()()}if(i&2){let e=_().$implicit;d(),L("ngModel",e.enable)}}function PC(i,t){if(i&1){let e=E();s(0,"div",34),v("click",function(o){return b(e),C(o.stopPropagation())}),s(1,"p-inputSwitch",35),N("ngModelChange",function(o){b(e);let r=_().$implicit;return z(r.isUnavailable,o)||(r.isUnavailable=o),C(o)}),v("onChange",function(o){b(e);let r=_().$implicit,a=_();return C(a.onSlotToggleChange(r,o))}),c()()}if(i&2){let e=_().$implicit,n=_();d(),L("ngModel",e.isUnavailable),g("disabled",n.isWholeDayUnavailable)}}function yC(i,t){if(i&1&&y(0,xC,2,1,"div",30)(1,PC,2,2,"div",31),i&2){let e=_();g("ngIf",e.selectedSlotType!=="unavailability"),d(),g("ngIf",e.selectedSlotType==="unavailability")}}var jr=class i{constructor(t,e,n,o){this.slotSetupService=t;this.authService=e;this.toast=n;this.confirmationService=o}pageIndex=0;contentPerPage=dt;total=0;searchTerm="";selectedSlotType="provider";products=[];selectedProductId=null;selectedDate=new Date;unavailabilitySlotType="provider";unavailabilitySlotTypes=[{label:"Provider",value:"provider"},{label:"Service",value:"service"}];ngOnInit(){this.triggerGetSlots(void 0)}columns=[{displayName:"Slots",displayValue:"display_slot"},{displayName:"Action",displayValue:"action"}];slotsData=[];editSlot;edit(t){this.selectedSlotType!=="unavailability"&&(this.editSlot=t)}remove(t){this.confirmDelete(t)}confirmDelete(t){this.confirmationService.confirm({message:"Are you sure you want to delete this slot?",header:"Delete Slot",icon:"pi pi-info-circle",acceptLabel:"Delete",rejectLabel:"Cancel",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-secondary",accept:()=>{this.slotSetupService.delete(t.provider_slot_id).subscribe({next:e=>{this.triggerGetSlots(void 0),this.toast.success("Success","Slot deleted successfully")},error:e=>{console.error(e),this.toast.error("Failed","Failed to delete clot")}})},reject:e=>{e===Fe.REJECT||Fe.CANCEL}})}isWholeDayUnavailable=!1;get showGrid(){return!(this.selectedSlotType==="unavailability"&&this.isWholeDayUnavailable||this.selectedSlotType==="service"&&!this.selectedProductId||this.selectedSlotType==="unavailability"&&this.unavailabilitySlotType==="service"&&!this.selectedProductId)}triggerGetSlots(t){console.log("triggered");let e={offset:this.pageIndex*this.contentPerPage,limit:this.contentPerPage,provider_id:this.authService.getSelectedProviderId()};if(this.searchTerm&&this.searchTerm.trim()!==""&&(e.search=this.searchTerm.trim()),this.selectedSlotType==="service"){if(!this.selectedProductId){console.warn("Cannot fetch service slots without a selected product"),this.slotsData=[],this.total=0;return}e.product_id=this.selectedProductId}if(this.selectedSlotType==="unavailability"){let o={slot_date:this.selectedDate.toISOString().split("T")[0],slot_type:this.unavailabilitySlotType,provider_id:this.authService.getSelectedProviderId()};if(this.unavailabilitySlotType==="service"&&(o.product_id=this.selectedProductId),this.unavailabilitySlotType==="service"&&!this.selectedProductId){this.slotsData=[],this.total=0;return}let r={provider_id:this.authService.getSelectedProviderId(),limit:1e3,offset:0};this.unavailabilitySlotType==="service"&&(r.product_id=this.selectedProductId),ao({definitions:this.slotSetupService.listSlotsWithTotal(this.unavailabilitySlotType,r),availability:this.slotSetupService.getSlotAvailabilityWithUnavailability(o)}).subscribe({next:({definitions:a,availability:l})=>{this.isWholeDayUnavailable=l.unavailability?.is_whole_day_unavailable||!1;let m=a.data||(Array.isArray(a)?a:[])||[],u=l.available_slots||l.data||[],f=l.unavailability?.blocked_slots||[],x=new Map;m.forEach(I=>{let F=I.service_slot_id||I.provider_slot_id||I.id;x.set(F,I)});let P=f.map(I=>{let F=x.get(I.slot_id);return F?U(U({},F),I):null}).filter(I=>I!==null),k=[...u,...P];this.convertGroupSetForUnavailability(k,f),this.total=k.length},error:a=>{console.error(a),this.slotsData=[]}});return}this.slotSetupService.listSlotsWithTotal(this.selectedSlotType,e).subscribe(n=>{this.total=n.total,this.convertGroupSet(n.data)})}fetchServiceProducts(){let t=this.authService.getSelectedProviderId();this.slotSetupService.getProductsByProvider(t,{product_type:"service",visibility:!0}).subscribe({next:e=>{let n=[];e?.products?n=e.products:e?.data?n=e.data:Array.isArray(e)&&(n=e),this.products=n.filter(o=>o.is_service===!0||o.isService===!0),this.selectedSlotType==="service"&&!this.selectedProductId?(this.slotsData=[],this.total=0):this.products.length>0&&this.selectedProductId&&this.triggerGetSlots(void 0)},error:e=>console.error("Error fetching products",e)})}onProductChange(){this.pageIndex=0,this.triggerGetSlots(void 0)}convertTimeSlot(t){this.slotsData=t.map(e=>{let n=o=>new Date(`1970-01-01T${o}Z`).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"UTC"});return console.log(n(e.start_time)),H(U({},e),{displaySlot:`${n(e.start_time)} - ${n(e.end_time)}`})})}convertGroupSet(t){let e=n=>new Date(`1970-01-01T${n}Z`).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"UTC"});this.slotsData=t.map(n=>H(U({},n),{display_slot:n.slot_name,id:n.service_slot_id||n.provider_slot_id||0,action:"viewTemplate"}))}onPageChange(t){this.pageIndex=t,this.triggerGetSlots(void 0)}onContentPerPageChange(t){this.contentPerPage=t,this.pageIndex=0,this.triggerGetSlots(void 0)}onSearchChange(t){this.searchTerm=t,this.pageIndex=0,this.triggerGetSlots(void 0)}onSlotTypeChange(t){this.selectedSlotType=t,this.pageIndex=0,t==="service"?(this.fetchServiceProducts(),this.products.length>0&&this.selectedProductId&&this.triggerGetSlots(void 0)):t==="unavailability"?(this.unavailabilitySlotType="provider",this.selectedProductId=null,this.triggerGetSlots(void 0)):(this.selectedProductId=null,this.triggerGetSlots(void 0))}onUnavailabilityFilterChange(){if(this.unavailabilitySlotType==="service"&&this.products.length===0){this.fetchServiceProducts();return}this.triggerGetSlots(void 0)}convertGroupSetForUnavailability(t,e){let n=r=>new Date(`1970-01-01T${r}Z`).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"UTC"}),o=new Set(e.map(r=>r.slot_id));this.slotsData=t.map(r=>{let a=r.service_slot_id||r.provider_slot_id||r.id;return H(U({},r),{display_slot:r.slot_name||`${n(r.start_time)} - ${n(r.end_time)}`,isUnavailable:o.has(a),id:a,action:"viewTemplate"})})}onWholeDayChange(t){let e=this.authService.getSelectedProviderId(),n=this.selectedDate.toISOString().split("T")[0],o=t.checked,r={unavailable_date:n,is_whole_day:o,slot_type:this.unavailabilitySlotType,reason:"Whole Day Off",status:o?"unavailable":"available"};this.unavailabilitySlotType==="service"&&(r.product_id=this.selectedProductId),this.slotSetupService.updateUnavailability(e,r).subscribe({next:a=>{this.toast.success("Success",o?"Marked Whole Day Unavailable":"Whole Day Available"),this.triggerGetSlots(void 0)},error:a=>{console.error("Error:",a),this.toast.error("Error","Failed to update whole day availability"),this.isWholeDayUnavailable=!o}})}handleActionClick(t,e){e.stopPropagation(),this.selectedSlotType!=="unavailability"&&this.slotSetupService.update(t).subscribe({next:n=>{this.toast.success("Success","Slots Updated successfully")},error:n=>{console.error("Error updating slot:",n),this.toast.error("Error","Failed to update slot. Please try again.")}})}onSlotToggleChange(t,e){if(this.isWholeDayUnavailable)return;let n=this.authService.getSelectedProviderId(),o=this.selectedDate.toISOString().split("T")[0],r=e.checked,a={unavailable_date:o,is_whole_day:!1,slot_id:t.id,slot_type:this.unavailabilitySlotType,reason:r?"Slot Unavailable":"Slot Available"};this.unavailabilitySlotType==="service"&&(a.product_id=this.selectedProductId),this.slotSetupService.updateUnavailability(n,a).subscribe({next:l=>{this.toast.success("Success",`Slot marked ${r?"Unavailable":"Available"}`),t.isUnavailable=r},error:l=>{console.error("Error:",l),this.toast.error("Error","Failed to update slot availability"),t.isUnavailable=!r}})}static \u0275fac=function(e){return new(e||i)(w(Di),w(G),w(te),w(pe))};static \u0275cmp=R({type:i,selectors:[["app-slots-list"]],decls:20,vars:16,consts:[["viewTemplate",""],[3,"title","icon","showBack"],[1,"card-wrapper"],[1,"toggle-tabs"],[1,"capsule-container"],[1,"capsule-button",3,"click"],["class","filter-container","style","margin-left: 1rem",4,"ngIf"],["class","filter-container","style",`
      margin-left: 1rem;
      flex-direction: row;
      align-items: flex-end;
      gap: 1rem;
      flex-wrap: wrap;
    `,4,"ngIf"],["class","card",4,"ngIf"],["class","empty-state-card",4,"ngIf"],[3,"dataSet","columns","actionTemplate","totalRecords","pageIndex","contentPerPage","isShowSearch","onEditTrigger","onDeleteTrigger","pageChange","contentPerPageChange","searchDataChange",4,"ngIf"],[1,"filter-container",2,"margin-left","1rem"],["optionLabel","product_name","optionValue","product_id","placeholder","Select a Product",3,"ngModelChange","onChange","options","ngModel"],[1,"filter-container",2,"margin-left","1rem","flex-direction","row","align-items","flex-end","gap","1rem","flex-wrap","wrap"],[2,"display","flex","flex-direction","column","gap","0.25rem"],[2,"font-size","0.85rem","color","#6b7280"],["dateFormat","yy-mm-dd","inputStyleClass","p-inputtext-sm",3,"ngModelChange","onSelect","ngModel","showIcon"],["optionLabel","label","optionValue","value","styleClass","p-button-sm compact-slot-type-toggle",3,"ngModelChange","onChange","options","ngModel"],["style","display: flex; flex-direction: column; gap: 0.25rem",4,"ngIf"],["for","wholeDay",2,"font-size","0.85rem","color","#6b7280","font-weight","600"],["inputId","wholeDay",1,"compact-slot-type-toggle",3,"ngModelChange","onChange","ngModel"],["optionLabel","product_name","optionValue","product_id","placeholder","Select a Product","styleClass","p-inputtext-sm",3,"ngModelChange","onChange","options","ngModel"],[1,"card"],[3,"saveSuccess","editFormValues"],[1,"empty-state-card"],[1,"empty-content"],[1,"pi","pi-box",2,"font-size","2rem","color","#a0aec0"],[2,"margin-top","1rem","color","#4b5563","font-weight","500"],[1,"pi","pi-calendar-times",2,"font-size","2rem","color","#a0aec0"],[3,"onEditTrigger","onDeleteTrigger","pageChange","contentPerPageChange","searchDataChange","dataSet","columns","actionTemplate","totalRecords","pageIndex","contentPerPage","isShowSearch"],["class","view",3,"click",4,"ngIf"],[3,"click",4,"ngIf"],[1,"view",3,"click"],[3,"ngModelChange","ngModel"],[3,"click"],[1,"compact-slot-type-toggle",3,"ngModelChange","onChange","ngModel","disabled"]],template:function(e,n){if(e&1){let o=E();h(0,"app-title-card",1),s(1,"div",2)(2,"div",3)(3,"div",4)(4,"button",5),v("click",function(){return b(o),C(n.onSlotTypeChange("provider"))}),p(5," Provider "),c(),s(6,"button",5),v("click",function(){return b(o),C(n.onSlotTypeChange("service"))}),p(7," Service "),c(),s(8,"button",5),v("click",function(){return b(o),C(n.onSlotTypeChange("unavailability"))}),p(9," Unavailability "),c()()(),y(10,gC,4,5,"div",6)(11,fC,14,9,"div",7)(12,_C,2,1,"mat-card",8),c(),y(13,hC,5,0,"div",9)(14,bC,5,0,"div",9)(15,CC,5,0,"div",9)(16,vC,1,7,"simple-grid",10),h(17,"p-confirmDialog"),y(18,yC,2,2,"ng-template",null,0,Pe)}e&2&&(g("title","Slot Setup")("icon","schedule")("showBack",!0),d(4),j("active",n.selectedSlotType==="provider"),d(2),j("active",n.selectedSlotType==="service"),d(2),j("active",n.selectedSlotType==="unavailability"),d(2),g("ngIf",n.selectedSlotType==="service"),d(),g("ngIf",n.selectedSlotType==="unavailability"),d(),g("ngIf",n.selectedSlotType!=="unavailability"),d(),g("ngIf",n.selectedSlotType==="service"&&!n.selectedProductId),d(),g("ngIf",n.selectedSlotType==="unavailability"&&n.isWholeDayUnavailable),d(),g("ngIf",n.selectedSlotType==="unavailability"&&n.unavailabilitySlotType==="service"&&!n.selectedProductId),d(),g("ngIf",n.showGrid))},dependencies:[W,Re,be,ze,vc,Ve,bt,Y,_e,So,he,Br],styles:[".card-wrapper[_ngcontent-%COMP%]{padding:1rem;display:flex;flex-direction:column;gap:1rem}.toggle-tabs[_ngcontent-%COMP%]{padding:0 20px;display:flex;justify-content:center;margin-bottom:1.5rem}.toggle-tabs[_ngcontent-%COMP%]   .capsule-container[_ngcontent-%COMP%]{display:flex;gap:.75rem;padding:2px}.toggle-tabs[_ngcontent-%COMP%]   .capsule-container[_ngcontent-%COMP%]   .capsule-button[_ngcontent-%COMP%]{padding:8px 16px;border:1px solid #5d157c;background:#fff;color:#5d157c;font-weight:600;font-size:13px;cursor:pointer;transition:all .3s ease;border-radius:50px;text-align:center;-webkit-user-select:none;user-select:none;min-width:auto}.toggle-tabs[_ngcontent-%COMP%]   .capsule-container[_ngcontent-%COMP%]   .capsule-button[_ngcontent-%COMP%]:hover{background:#f3e8ff}.toggle-tabs[_ngcontent-%COMP%]   .capsule-container[_ngcontent-%COMP%]   .capsule-button.active[_ngcontent-%COMP%]{background:#f3e8ff;color:#5d157c;border:2px solid #5d157c;box-shadow:0 2px 8px #5d157c26}[_nghost-%COMP%]     .p-dropdown, [_nghost-%COMP%]     .p-calendar .p-inputtext{border:1px solid #5d157c!important;border-radius:8px!important;height:40px;background:#fff!important}[_nghost-%COMP%]     .p-dropdown:hover, [_nghost-%COMP%]     .p-calendar .p-inputtext:hover{border-color:#3c0e50!important}[_nghost-%COMP%]     .p-dropdown:focus-within, [_nghost-%COMP%]     .p-calendar .p-inputtext:focus-within{box-shadow:0 0 0 2px #5d157c33!important;border-color:#5d157c!important}[_nghost-%COMP%]     .p-calendar .p-inputtext{text-align:center}[_nghost-%COMP%]     .p-dropdown-panel{border:1px solid #5d157c!important;border-radius:8px!important}[_nghost-%COMP%]     .p-selectbutton .p-button{background:#fff;border:1px solid #5d157c;color:#5d157c}[_nghost-%COMP%]     .p-selectbutton .p-button.p-highlight{background:#5d157c;color:#fff}[_nghost-%COMP%]     .p-selectbutton .p-button:first-child{border-top-left-radius:8px;border-bottom-left-radius:8px}[_nghost-%COMP%]     .p-selectbutton .p-button:last-child{border-top-right-radius:8px;border-bottom-right-radius:8px}.filter-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.filter-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#374151;font-size:14px}.empty-state-card[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:3rem;background-color:#fff;border-radius:8px;border:1px dashed #ced4da;margin-top:1rem}.empty-state-card[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]{text-align:center}.compact-slot-type-toggle[_ngcontent-%COMP%]     .p-button{padding:4px 12px!important;font-size:12px!important;height:32px!important}"]})};var Ai=class i{constructor(t){this.http=t}getProviders(t=0,e=100){let n=new Dt({fromObject:{skip:t.toString(),limit:e.toString()}});return this.http.get(Q.PROVIDER.LIST,{params:n}).pipe(Kt(o=>o?.items&&Array.isArray(o.items)?o.items:[]))}getProviderById(t){let e=Q.PROVIDER.DETAIL.replace(":id",t.toString());return this.http.get(e).pipe(Kt(n=>n.data||n))}updateProvider(t,e){let n=Q.PROVIDER.UPDATE.replace(":id",t.toString());return this.http.put(n,e)}deleteProvider(t){let e=Q.PROVIDER.DELETE.replace(":id",t.toString());return this.http.delete(e)}getProviderSettings(t){let e=`${Q.PROVIDER_INFO.PROVIDER_SETTINGS}/${t}`;return this.http.get(e).pipe(Kt(n=>n.data||n))}static \u0275fac=function(e){return new(e||i)(Ae($e))};static \u0275prov=Je({token:i,factory:i.\u0275fac,providedIn:"root"})};function MC(i,t){i&1&&(s(0,"div",35),p(1," Product type is required. "),c())}function OC(i,t){i&1&&(s(0,"div",35),p(1," Name is required. "),c())}function wC(i,t){i&1&&(s(0,"div",35),p(1," Valid Title is required. "),c())}function SC(i,t){i&1&&(s(0,"div",35),p(1," Valid Description is required. "),c())}function kC(i,t){i&1&&(s(0,"span",4),p(1,"*"),c())}function IC(i,t){i&1&&(s(0,"div",35),p(1," Category is required for Product and Service. "),c())}function TC(i,t){if(i&1){let e=E();s(0,"div",1)(1,"div",36)(2,"label",37),p(3,"Product Custom Form "),s(4,"span",4),p(5,"*"),c()(),s(6,"p-dropdown",38),v("onChange",function(){b(e);let o=_();return C(o.onFormNameChange())}),c()()()}if(i&2){let e=_();d(6),g("options",e.formNames)}}function EC(i,t){i&1&&(s(0,"div",35),p(1," Please enter the selling price. "),c())}function FC(i,t){i&1&&(s(0,"div",35),p(1," Please enter the purchase price. "),c())}function DC(i,t){if(i&1&&(s(0,"div",1)(1,"div",9)(2,"label",39),p(3),M(4,"translate"),s(5,"span",4),p(6,"*"),c()(),h(7,"input",40),y(8,EC,2,0,"div",6),c(),s(9,"div",9)(10,"label",41),p(11),M(12,"translate"),s(13,"span",4),p(14,"*"),c()(),h(15,"input",42),y(16,FC,2,0,"div",6),c()()),i&2){let e,n,o=_();d(3),T("",O(4,4,"product.sell_price")," "),d(5),g("ngIf",((e=o.productForm.get("selling_price"))==null?null:e.invalid)&&((e=o.productForm.get("selling_price"))==null?null:e.touched)),d(3),T("",O(12,6,"product.purchase_price")," "),d(5),g("ngIf",((n=o.productForm.get("purchase_price"))==null?null:n.invalid)&&((n=o.productForm.get("purchase_price"))==null?null:n.touched))}}function AC(i,t){i&1&&(s(0,"div",35),p(1," Please enter the per day limit. "),c())}function VC(i,t){i&1&&(s(0,"div",35),p(1," Please enter the tax percentage. "),c())}function RC(i,t){if(i&1&&(s(0,"div",1)(1,"div",9)(2,"label",43),p(3),M(4,"translate"),c(),h(5,"input",44),y(6,AC,2,0,"div",6),c(),s(7,"div",9)(8,"label",45),p(9),M(10,"translate"),c(),h(11,"input",46),y(12,VC,2,0,"div",6),c()()),i&2){let e,n,o=_();d(3),S(O(4,4,"product.per_day_limit")),d(3),g("ngIf",((e=o.productForm.get("per_day_limit"))==null?null:e.invalid)&&((e=o.productForm.get("per_day_limit"))==null?null:e.touched)),d(3),S(O(10,6,"product.tax_percentage")),d(3),g("ngIf",((n=o.productForm.get("tax_percentage"))==null?null:n.invalid)&&((n=o.productForm.get("tax_percentage"))==null?null:n.touched))}}function LC(i,t){i&1&&(s(0,"div",35),p(1," Please enter the available stock value. "),c())}function zC(i,t){i&1&&(s(0,"div",47),h(1,"i",48),s(2,"p",49),p(3,"Click to Upload Images"),c(),s(4,"p",50),p(5,"or drag and drop files here"),c()())}function NC(i,t){i&1&&(s(0,"div",35),p(1," At least one product image is required. "),c())}function BC(i,t){i&1&&(s(0,"div",35),p(1," Size is required. "),c())}function jC(i,t){i&1&&(s(0,"div",35),p(1," Price is required. "),c())}function UC(i,t){i&1&&(s(0,"div",35),p(1," Stock is required. "),c())}function GC(i,t){if(i&1){let e=E();s(0,"tr",66)(1,"td",58),h(2,"input",67),y(3,BC,2,0,"div",6),c(),s(4,"td",59),h(5,"input",68),y(6,jC,2,0,"div",6),c(),s(7,"td",60),h(8,"input",69),y(9,UC,2,0,"div",6),c(),s(10,"td",61)(11,"button",70),v("click",function(){let o=b(e).index,r=_(3);return C(r.removeVariant(o))}),h(12,"i",71),c()()()}if(i&2){let e,n,o,r=t.$implicit,a=t.index,l=_(3);g("formGroupName",a),d(3),g("ngIf",((e=r.get("size"))==null?null:e.invalid)&&((e=r.get("size"))==null?null:e.touched)),d(3),g("ngIf",((n=r.get("price"))==null?null:n.invalid)&&((n=r.get("price"))==null?null:n.touched)),d(3),g("ngIf",((o=r.get("stock"))==null?null:o.invalid)&&((o=r.get("stock"))==null?null:o.touched)),d(2),g("disabled",l.variants.length===1)}}function qC(i,t){if(i&1){let e=E();s(0,"div",56)(1,"table",57)(2,"thead")(3,"tr")(4,"th",58),p(5,"Size"),c(),s(6,"th",59),p(7,"Price"),c(),s(8,"th",60),p(9,"Stock"),c(),h(10,"th",61),c()(),s(11,"tbody"),y(12,GC,13,5,"tr",62),c()(),s(13,"div",63)(14,"button",64),v("click",function(){b(e);let o=_(2);return C(o.addVariant())}),h(15,"i",65),s(16,"span"),p(17,"Add"),c()()()()}if(i&2){let e=_(2);d(12),g("ngForOf",e.variants.controls)}}function WC(i,t){if(i&1&&(s(0,"expander-template",51)(1,"div",52)(2,"label"),p(3),M(4,"translate"),c(),s(5,"div",53)(6,"label"),h(7,"input",54),p(8),M(9,"translate"),c(),s(10,"label"),h(11,"input",54),p(12),M(13,"translate"),c()()(),y(14,qC,18,1,"div",55),c()),i&2){let e,n,o,r=_();g("title","Advance Options")("defaultExpandedStatus",!1),d(3),S(O(4,12,"product.variant")),d(3),j("active",((e=r.productForm.get("hasVariant"))==null?null:e.value)===!0),d(),g("value",!0),d(),T(" ",O(9,14,"common.yes")," "),d(2),j("active",((n=r.productForm.get("hasVariant"))==null?null:n.value)===!1),d(),g("value",!1),d(),T(" ",O(13,16,"common.no")," "),d(2),g("ngIf",(o=r.productForm.get("hasVariant"))==null?null:o.value)}}var Ur=class i{constructor(t,e,n,o,r,a,l,m){this.fb=t;this.authServ=e;this.productService=n;this.categoryService=o;this.setregService=r;this.toast=a;this.router=l;this.providerManagementService=m;this.productForm=this.fb.group({product_type:["",A.required],product_name:["",A.required],title1:["",[A.required]],description:["",[A.required]],product_category_id:[[]],category_id_tree:[[]],selling_price:[null,[A.required,A.min(0)]],purchase_price:[null,[A.required,A.min(0)]],per_day_limit:[null,[A.required,A.min(0)]],product_image_url:[[],A.required],visibility:[!1],hasVariant:[!1],gstNumber:[""],available_stock:[null,[A.required,A.min(0)]],tax_percentage:[null,[A.min(0),A.max(100)]],variants:this.fb.array([]),product_subtype:["",A.required],form_registration_id:[null],is_service:[!1]}),this.initializeTreeData()}fileUploadComponent;productForm;editFormValues;saveSuccess=new Ee;cancel=new Ee;formExpanded=!0;buttonTypeEnumValues=St;treeData=[];selectedCategories=[];registeredForms=[];formNames=[];providerSettings=null;productTypes=[{name:"Product",code:"product"},{name:"Service",code:"service"},{name:"Subscription",code:"subscription"}];subTypes=[];ngOnInit(){this.addVariant(),this.loadProviderSettings(),this.productForm.get("product_subtype")?.valueChanges.subscribe(t=>{this.updatePriceFieldValidators(t),this.updateFormRegistrationValidator()}),this.productForm.get("product_type")?.valueChanges.subscribe(t=>{this.updateCategoryValidator(t),this.updateIsServiceField(t),this.updateSubTypeOptions(t)}),this.productForm.get("hasVariant")?.valueChanges.subscribe(t=>{this.updateVariantValidators(t)})}loadProviderSettings(){let t=this.authServ.getSelectedProviderId();this.providerManagementService.getProviderSettings(t).subscribe({next:e=>{this.providerSettings=e,console.log("[AddProductComponent] Provider settings loaded:",this.providerSettings);let n=this.productForm.get("product_type")?.value;n?this.updateSubTypeOptions(n):this.updateSubTypeOptions("product")},error:e=>{console.error("Error loading provider settings:",e),this.toast.error("Error","Failed to load provider settings")}})}updateSubTypeOptions(t){if(console.log("[AddProductComponent] updateSubTypeOptions called with:",t),console.log("[AddProductComponent] Provider settings:",this.providerSettings),!this.providerSettings||!this.providerSettings.metadata){console.warn("[AddProductComponent] Provider settings or metadata not available, using fallback options"),this.subTypes=[{name:"Standard",code:"standard"},{name:"Flexible",code:"flexible"},{name:"Forms",code:"forms"},{name:"Hybrid",code:"hybrid"}];return}this.subTypes=[],t==="product"?this.subTypes=[{name:"Standard",code:lt.STANDARD},{name:"Flexible",code:lt.FLEXIBLE},{name:"Product Subscription",code:lt.PRODUCT_SUBSCRIPTION}]:t==="service"?this.subTypes=[{name:"Flexible",code:lt.FLEXIBLE},{name:"Forms",code:lt.FORMS},{name:"Product Subscription",code:lt.PRODUCT_SUBSCRIPTION},{name:"Hybrid",code:lt.HYBRID}]:t==="subscription"&&(this.subTypes=[{name:"Service Subscription",code:lt.SERVICE_SUBSCRIPTION}]),console.log("[AddProductComponent] Updated subTypes for",t,":",this.subTypes);let e=this.productForm.get("product_subtype")?.value;this.subTypes.some(o=>o.code===e)||this.productForm.get("product_subtype")?.setValue("")}updatePriceFieldValidators(t){["selling_price","purchase_price","per_day_limit"].forEach(n=>{let o=this.productForm.get(n);o&&(t===lt.FLEXIBLE||t===lt.FORMS?(o.clearValidators(),o.setValue(0)):o.setValidators([A.required,A.min(0)]),o.updateValueAndValidity())})}get variants(){return this.productForm.get("variants")}hasUploadedFiles(){let t=this.productForm.get("product_image_url")?.value;return t&&Array.isArray(t)&&t.length>0}createVariant(t){return this.fb.group({size:[t?.size||""],price:[t?.price??0,[A.min(0)]],stock:[t?.stock??0,[A.min(0)]]})}addVariant(){this.variants.push(this.createVariant())}removeVariant(t){this.variants.length>1&&this.variants.removeAt(t)}updateIsServiceField(t){let e=this.productForm.get("is_service");t==="service"?e?.setValue(!0):e?.setValue(!1)}updateVariantValidators(t){this.variants.controls.forEach(e=>{let n=e.get("size"),o=e.get("price"),r=e.get("stock");t?(n?.setValidators([A.required]),o?.setValidators([A.required,A.min(0)]),r?.setValidators([A.required,A.min(0)])):(n?.clearValidators(),o?.setValidators([A.min(0)]),r?.setValidators([A.min(0)])),n?.updateValueAndValidity(),o?.updateValueAndValidity(),r?.updateValueAndValidity()})}updateCategoryValidator(t){let e=this.productForm.get("category_id_tree");t==="subscription"?e?.clearValidators():e?.setValidators([A.required]),e?.updateValueAndValidity()}onFormNameChange(){let t=this.productForm.get("form_registration_id")?.value}ngOnChanges(t){if(t.editFormValues){let e=t.editFormValues;console.log("[AddProductComponent] editFormValues changed:",{previousValue:e.previousValue,currentValue:e.currentValue,firstChange:e.firstChange}),e.currentValue!=null?(this.variants.length===0&&(console.log("[AddProductComponent] Initializing variants before setEditFormValue"),this.addVariant()),setTimeout(()=>{this.setEditFormValue()},0)):e.currentValue===void 0&&!e.firstChange&&this.resetForm()}}resetForm(){this.productForm.reset({product_type:"",product_name:"",title1:"",description:"",product_category_id:[],category_id_tree:[],selling_price:null,purchase_price:null,per_day_limit:null,product_image_url:[],visibility:!1,hasVariant:!1,gstNumber:"",available_stock:null,tax_percentage:null,product_subtype:"",form_registration_id:null,is_service:!1}),this.variants.clear(),this.addVariant(),this.selectedCategories=[],this.fileUploadComponent&&this.fileUploadComponent.reset()}updateFormRegistrationValidator(){let t=this.productForm.get("product_subtype")?.value,e=this.productForm.get("form_registration_id");t===lt.HYBRID||t===lt.FORMS?e?.setValidators(A.required):(e?.clearValidators(),e?.setValue("")),e?.updateValueAndValidity()}getRegisteredForms(){let t=this.authServ.getSelectedProviderId();return this.setregService.getRegisteredForm("product",t).subscribe({next:e=>{this.registeredForms=e||[],this.formNames=this.registeredForms.map(n=>({label:n.form_name,value:n.registration_id})),console.log("[AddProductComponent] Registered forms loaded:",this.formNames)},error:e=>{console.error("Error loading forms:",e),this.registeredForms=[],this.formNames=[]}})}setEditFormValue(){if(!this.editFormValues){console.warn("[AddProductComponent] setEditFormValue called but editFormValues is undefined");return}console.log("[AddProductComponent] Setting edit form values:",this.editFormValues),this.variants.length===0&&this.addVariant();let t=e=>{this.registeredForms=e||[],this.formNames=this.registeredForms.map(r=>({label:r.form_name,value:r.registration_id?.toString()}));let n=this.editFormValues;if(!n)return;if(n.variants&&typeof n.variants=="string")try{n.variants=JSON.parse(n.variants),console.log("[AddProductComponent] Parsed variants:",n.variants)}catch(r){console.error("Invalid JSON in variants:",r),n.variants=[]}Object.keys(n).forEach(r=>{let a=r;if(a!=="variants"&&a!=="product_category_id"&&n[a]!==void 0){let l=this.productForm.get(a);l&&(l.setValue(n[a]),console.log(`[AddProductComponent] Set ${a}:`,n[a]))}if(a==="variants"){let l=n.variants||[];this.variants.clear(),console.log("[AddProductComponent] Setting variants:",l),l.length>0?l.forEach(m=>{this.variants.push(this.createVariant(m))}):this.addVariant()}}),this.selectedCategories=[],this.modifySelect(this.treeData),console.log("[AddProductComponent] Selected categories:",this.selectedCategories);let o=this.subTypes.find(r=>r.code===n.product_subtype)?.code||lt.STANDARD;this.productForm.patchValue({product_subtype:o,form_registration_id:n.form_registration_id?.toString()||null}),console.log("[AddProductComponent] Set product_subtype:",o),console.log("[AddProductComponent] Set form_registration_id:",n.form_registration_id),this.productForm.controls.category_id_tree.setValue(this.selectedCategories),this.productForm.controls.hasVariant.setValue(this.variants.length>0&&this.variants.at(0)?.get("size")?.value!==""),this.updateFormRegistrationValidator(),this.updateCategoryValidator(this.productForm.get("product_type")?.value),this.updateVariantValidators(this.productForm.get("hasVariant")?.value),this.updateIsServiceField(this.productForm.get("product_type")?.value),this.updatePriceFieldValidators(o),this.productForm.markAllAsTouched(),this.productForm.updateValueAndValidity(),this.formExpanded=!0,console.log("[AddProductComponent] Form populated successfully. Form value:",this.productForm.value),console.log("[AddProductComponent] Form valid:",this.productForm.valid)};this.setregService.getRegisteredForm("product",this.authServ.getSelectedProviderId()).subscribe({next:e=>{this.treeData&&this.treeData.length>0?(console.log("[AddProductComponent] Tree data already loaded, populating form"),t(e)):(console.log("[AddProductComponent] Tree data not loaded, waiting for category data"),this.categoryService.list({skip:0,limit:1e3}).subscribe(n=>{this.treeData=this.buildCategoryTree(n),console.log("[AddProductComponent] Tree data loaded:",this.treeData),t(e)}))},error:e=>{console.error("Error fetching registered forms:",e),this.formNames=[]}})}processVariants(){let t=this.variants.value;if(!t||!Array.isArray(t)||t.length===0)return null;let e=t.filter(n=>{let o=n.size&&String(n.size).trim()!=="",r=n.price!=null&&Number(n.price)>0,a=n.stock!=null&&Number(n.stock)>=0;return o&&r&&a});return e.length===0?null:e}onSubmit(){let t=this.productForm.get("product_image_url")?.value;if(!this.productForm.valid){Object.keys(this.productForm.controls).forEach(a=>{this.productForm.get(a)?.markAsTouched()}),this.toast.error("Error","Please fill all required fields");return}let e=this.editFormValues?.product_id,n=U(U({},this.editFormValues),this.productForm.value);if(e&&(n.product_id=e),n.provider_id=this.authServ.getSelectedProviderId(),!n.title2&&n.title1&&(n.title2=n.title1),!this.productForm.get("hasVariant")?.value)n.variants=null;else{let a=this.processVariants();a===null?n.variants=null:n.variants=JSON.stringify(a)}if(!n.product_image_url||n.product_image_url.length===0){this.toast.error("Error","Please upload at least one product image");return}delete n.category_id_tree,delete n.hasVariant,[lt.HYBRID,lt.FORMS].includes(n.product_subtype)||(n.form_registration_id=null);let r=n.product_subtype;(r===lt.FLEXIBLE||r===lt.FORMS)&&(n.selling_price=0,n.purchase_price=0,n.per_day_limit=0,n.tax_percentage=0),this.productService.createOrUpdate(n,e).subscribe({next:a=>{console.log("Product saved successfully:",a),this.saveSuccess.emit(a),this.editFormValues=void 0,this.resetForm(),this.formExpanded=!1;let l=e?"Product updated successfully":"Product created successfully";this.toast.success("Success",l)},error:a=>{console.error("Error saving product:",a);let l=a?.error?.message||"Failed to save product";this.toast.error("Error",l)}})}buttonClicked(t){t.buttonType===1?this.onSubmit():t.buttonType===2&&this.onCancel()}convertToTreeNode(t){return t.map(e=>({label:e.name,key:String(e.product_category_id),data:{provider_id:e.provider_id,product_category_id:e.product_category_id},selectable:!0,children:e.children&&e.children.length>0?this.convertToTreeNode(e.children):[]}))}initializeTreeData(){this.categoryService.list({skip:0,limit:1e3}).subscribe(t=>{this.treeData=this.buildCategoryTree(t),console.log("[AddProductComponent] Tree data initialized:",this.treeData)})}buildCategoryTree(t){let e={},n=[];return t.forEach(o=>{e[o.product_category_id]=H(U({},o),{children:[]})}),t.forEach(o=>{let r=e[o.product_category_id];o.parent_id&&e[o.parent_id]?e[o.parent_id].children.push(r):n.push(r)}),this.convertToTreeNode(n)}onCancel(){this.cancel.emit()}onchange(t){if(t.value)this.productForm.controls.product_subtype.setValue(t.value),this.getRegisteredForms();else{let e=this.selectedCategories.map(n=>n?.data?.product_category_id);console.log("[AddProductComponent] Categories changed:",e),this.productForm.controls.product_category_id.setValue(e)}}modifySelect(t){t?.forEach(e=>{e.data?.product_category_id&&this.editFormValues?.product_category_id.includes(e.data?.product_category_id)&&this.selectedCategories.push(e),e.children&&this.modifySelect(e.children)})}checkProductTypeSelection(){this.productForm.get("product_type")?.value||(this.toast.error("Error","Please select Product Type first"),this.productForm.get("product_type")?.markAsTouched())}afterUploadFile(t){if(console.log("[AddProductComponent] afterUploadFile called with URLs:",t),!t||t.length===0){this.toast.error("Error","Image upload failed - no URLs received");return}let e=this.productForm.get("product_image_url");e?(e.setValue(t),e.markAsTouched(),e.updateValueAndValidity(),console.log("[AddProductComponent] Image URLs set successfully:",this.productForm.get("product_image_url")?.value),this.toast.success("Success",`${t.length} image(s) uploaded successfully`)):(console.error("product_image_url control not found in form"),this.toast.error("Error","Unable to update image URLs"))}static \u0275fac=function(e){return new(e||i)(w(ue),w(G),w(It),w(kn),w(yn),w(te),w(le),w(Ai))};static \u0275cmp=R({type:i,selectors:[["add-product"]],viewQuery:function(e,n){if(e&1&&nt(ht,5),e&2){let o;it(o=ot())&&(n.fileUploadComponent=o.first)}},inputs:{editFormValues:"editFormValues"},outputs:{saveSuccess:"saveSuccess",cancel:"cancel"},features:[Ze],decls:85,vars:47,consts:[[3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-group","reg-type"],["for","product_type"],[1,"required"],["id","product_type","formControlName","product_type","optionLabel","name","optionValue","code","styleClass","full-width-dropdown","placeholder","Select Type",1,"custom-dropdown",3,"options"],["class","error-message",4,"ngIf"],["for","product_subtype"],["id","product_subtype","formControlName","product_subtype","optionLabel","name","optionValue","code","styleClass","full-width-dropdown","placeholder","Select a Sub Type",1,"custom-dropdown",3,"onChange","options"],[1,"form-group"],["for","name"],["id","name","type","text","formControlName","product_name",3,"placeholder"],["for","title"],["id","title","type","text","placeholder","Title","formControlName","title1"],["for","description"],["id","description","placeholder","Use # Heading, **Bold**, --- Horizontal line","formControlName","description","rows","3"],["for","category"],["class","required",4,"ngIf"],[1,"dropdown-tree"],["formControlName","category_id_tree","selectionMode","checkbox","placeholder","Select Categories",1,"custom-tree-select",3,"ngModelChange","options","ngModel"],["class","form-row",4,"ngIf"],["for","available_stock"],["id","available_stock","type","number","placeholder","Enter stock value","formControlName","available_stock","min","0"],[1,"form-group","switch-container"],[1,"switch-btn-group"],["for","publicUI"],["id","publicUI","formControlName","visibility"],[1,"form-group","full-width"],[1,"upload-container"],["class","upload-placeholder",4,"ngIf"],[3,"uploadedUrls","enableMultiple","uploadedFileName"],["class","advance-input product-variants-form",3,"title","defaultExpandedStatus",4,"ngIf"],[1,"button-container"],["type","button",1,"cancel-button",3,"click"],["type","button",1,"submit-button",3,"click","disabled"],[1,"error-message"],[1,"form-group","reg-type","full-width"],["for","form_registration_id"],["formControlName","form_registration_id","optionLabel","label","optionValue","value","placeholder","Select Form Name",1,"custom-dropdown","full-width",3,"onChange","options"],["for","sellPrice"],["id","sellPrice","type","number","placeholder","Enter selling price","formControlName","selling_price"],["for","purchasePrice"],["id","purchasePrice","type","number","placeholder","Enter purchase price","formControlName","purchase_price"],["for","perDayLimit"],["id","perDayLimit","type","number","placeholder","Enter per day limit","formControlName","per_day_limit"],["for","tax_percentage"],["id","tax_percentage","type","number","placeholder","Enter tax %","formControlName","tax_percentage"],[1,"upload-placeholder"],[1,"pi","pi-cloud-upload","upload-icon"],[1,"upload-text"],[1,"upload-hint"],[1,"advance-input","product-variants-form",3,"title","defaultExpandedStatus"],[1,"toggle-group"],[1,"toggle-switch"],["type","radio","formControlName","hasVariant",3,"value"],["formArrayName","variants","class","variant-container",4,"ngIf"],["formArrayName","variants",1,"variant-container"],[1,"variant-table"],[1,"col-size"],[1,"col-price"],[1,"col-stock"],[1,"col-action"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"add-variant-button-container"],["type","button","title","Add New Variant",1,"add-variant-button",3,"click"],[1,"pi","pi-plus"],[3,"formGroupName"],["formControlName","size"],["formControlName","price","type","number"],["formControlName","stock","type","number"],["mat-icon-button","","type","button","title","Delete Variant",1,"delete-button",3,"click","disabled"],[1,"pi","pi-trash"]],template:function(e,n){if(e&1&&(s(0,"form",0),v("ngSubmit",function(){return n.onSubmit()}),s(1,"div",1)(2,"div",2)(3,"label",3),p(4),M(5,"translate"),s(6,"span",4),p(7,"*"),c()(),h(8,"p-dropdown",5),y(9,MC,2,0,"div",6),c(),s(10,"div",2)(11,"label",7),p(12),M(13,"translate"),s(14,"span",4),p(15,"*"),c()(),s(16,"p-dropdown",8),v("onChange",function(r){return n.onchange(r)}),c()()(),s(17,"div",1)(18,"div",9)(19,"label",10),p(20),M(21,"translate"),s(22,"span",4),p(23,"*"),c()(),h(24,"input",11),M(25,"translate"),y(26,OC,2,0,"div",6),c(),s(27,"div",9)(28,"label",12),p(29),M(30,"translate"),s(31,"span",4),p(32,"*"),c()(),h(33,"input",13),y(34,wC,2,0,"div",6),c()(),s(35,"div",1)(36,"div",9)(37,"label",14),p(38),M(39,"translate"),s(40,"span",4),p(41,"*"),c()(),h(42,"textarea",15),y(43,SC,2,0,"div",6),c(),s(44,"div",9)(45,"label",16),p(46),M(47,"translate"),y(48,kC,2,0,"span",17),c(),s(49,"div",18)(50,"p-treeSelect",19),N("ngModelChange",function(r){return z(n.selectedCategories,r)||(n.selectedCategories=r),r}),v("ngModelChange",function(r){return n.onchange(r)}),c()(),y(51,IC,2,0,"div",6),c()(),y(52,TC,7,1,"div",20)(53,DC,17,8,"div",20)(54,RC,13,8,"div",20),s(55,"div",1)(56,"div",9)(57,"label",21),p(58,"Available Stock "),s(59,"span",4),p(60,"*"),c()(),h(61,"input",22),y(62,LC,2,0,"div",6),c(),s(63,"div",23)(64,"div",24)(65,"label",25),p(66),M(67,"translate"),c(),h(68,"p-inputSwitch",26),c()()(),s(69,"div",1)(70,"div",27)(71,"label"),p(72,"Product Images "),s(73,"span",4),p(74,"*"),c()(),s(75,"div",28),y(76,zC,6,0,"div",29),s(77,"file-upload",30),v("uploadedUrls",function(r){return n.afterUploadFile(r)}),c()(),y(78,NC,2,0,"div",6),c()(),y(79,WC,15,18,"expander-template",31),c(),s(80,"div",32)(81,"button",33),v("click",function(){return n.buttonClicked({buttonType:n.buttonTypeEnumValues.cancel})}),p(82,"Cancel"),c(),s(83,"button",34),v("click",function(){return n.buttonClicked({buttonType:n.buttonTypeEnumValues.submit})}),p(84,"Submit"),c()()),e&2){let o,r,a,l,m,u,f,x,P,k,I,F,D;g("formGroup",n.productForm),d(4),T("",O(5,31,"product.type")," "),d(4),g("options",n.productTypes),d(),g("ngIf",((o=n.productForm.get("product_type"))==null?null:o.invalid)&&((o=n.productForm.get("product_type"))==null?null:o.touched)),d(3),T("",O(13,33,"product.product_subtype")," "),d(4),g("options",n.subTypes),d(4),T("",O(21,35,"product.name")," "),d(4),ne("placeholder",O(25,37,"profile.name")),d(2),g("ngIf",((r=n.productForm.get("product_name"))==null?null:r.invalid)&&((r=n.productForm.get("product_name"))==null?null:r.touched)),d(3),T("",O(30,39,"product.title_to_display")," "),d(5),g("ngIf",((a=n.productForm.get("title1"))==null?null:a.invalid)&&((a=n.productForm.get("title1"))==null?null:a.touched)),d(4),T("",O(39,41,"product.title_description")," "),d(5),g("ngIf",((l=n.productForm.get("description"))==null?null:l.invalid)&&((l=n.productForm.get("description"))==null?null:l.touched)),d(3),T(" ",O(47,43,"product.category")," "),d(2),g("ngIf",((m=n.productForm.get("product_type"))==null?null:m.value)!=="subscription"),d(2),g("options",n.treeData),L("ngModel",n.selectedCategories),d(),g("ngIf",((u=n.productForm.get("category_id_tree"))==null?null:u.invalid)&&((u=n.productForm.get("category_id_tree"))==null?null:u.touched)),d(),g("ngIf",((f=n.productForm.get("product_subtype"))==null?null:f.value)==="hybrid"||((f=n.productForm.get("product_subtype"))==null?null:f.value)==="forms"),d(),g("ngIf",!(((x=n.productForm.get("product_subtype"))==null?null:x.value)==="flexible"||((x=n.productForm.get("product_subtype"))==null?null:x.value)==="forms")),d(),g("ngIf",!(((P=n.productForm.get("product_subtype"))==null?null:P.value)==="flexible"||((P=n.productForm.get("product_subtype"))==null?null:P.value)==="forms")),d(8),g("ngIf",((k=n.productForm.get("available_stock"))==null?null:k.invalid)&&((k=n.productForm.get("available_stock"))==null?null:k.touched)),d(4),S(O(67,45,"product.publish_ui")),d(9),j("has-files",n.hasUploadedFiles()),d(),g("ngIf",!n.hasUploadedFiles()),d(),g("enableMultiple",!0)("uploadedFileName",(I=n.productForm.get("product_image_url"))==null?null:I.value),d(),g("ngIf",((F=n.productForm.get("product_image_url"))==null?null:F.invalid)&&((F=n.productForm.get("product_image_url"))==null?null:F.touched)),d(),g("ngIf",((D=n.productForm.get("product_type"))==null?null:D.value)==="product"&&((D=n.productForm.get("product_subtype"))==null?null:D.value)==="standard"),d(4),g("disabled",n.productForm.invalid)}},dependencies:[ee,W,ht,Ac,xo,Ve,bt,ye,Z,ct,vn,Y,fe,xn,Vc,Me,Oe,pi,Ws,ce],styles:["form[_ngcontent-%COMP%]{padding:1.5rem;max-width:100%;background-color:#fff}form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem;margin-bottom:1rem}@media (max-width: 768px){form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{grid-column:1/-1}form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;font-size:14px;color:#5d157c;margin-bottom:.5rem}form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#d32f2f;margin-left:2px}form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.65rem .875rem;border:1px solid #ddd;border-radius:8px;font-size:14px;font-family:inherit;transition:all .3s ease}form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus, form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#5d157c;box-shadow:0 0 0 3px #6c00a41a}form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder, form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::placeholder{color:#999;font-size:13px}form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#d32f2f;font-size:12px;margin-top:.25rem;min-height:18px}form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]{position:relative;border:2px dashed #5D157C;border-radius:12px;padding:0;background-color:#fafafa;transition:all .3s ease;min-height:140px;overflow:visible}form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]:not(.has-files):hover{border-color:#2c0a3b;background-color:#f3e8ff;box-shadow:0 2px 8px #6c00a41f}form[_ngcontent-%COMP%]   .upload-container.has-files[_ngcontent-%COMP%]{padding:1rem;background-color:#fff;min-height:auto}form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]   .upload-placeholder[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;pointer-events:none;z-index:1;width:100%}form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]   .upload-placeholder[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{font-size:3rem;color:#5d157c;margin-bottom:.75rem;display:block}form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]   .upload-placeholder[_ngcontent-%COMP%]   .upload-text[_ngcontent-%COMP%]{color:#5d157c;font-size:15px;font-weight:600;margin:0 0 .25rem}form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]   .upload-placeholder[_ngcontent-%COMP%]   .upload-hint[_ngcontent-%COMP%]{color:#666;font-size:12px;margin:0}form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload{display:block;width:100%;position:relative}form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .upload-wrapper, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .file-upload-wrapper, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .upload-container, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .file-drop-zone, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .upload-area{border:none!important;background:transparent!important;padding:1.5rem!important;min-height:140px}form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .upload-icon:not(.uploaded-files .upload-icon), form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .pi-cloud-upload, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .pi-upload, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .upload-text:not(.uploaded-files .upload-text), form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .upload-label, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .file-upload-label, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .upload-hint:not(.uploaded-files .upload-hint), form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .upload-description, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .file-upload-hint{opacity:0!important;visibility:hidden!important}form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .uploaded-files, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .file-list, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .files-list{display:block!important;opacity:1!important;visibility:visible!important;margin:0!important;padding:0!important}form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .file-badge, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .file-item, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .uploaded-file-item{background-color:#f3e8ff;color:#5d157c;padding:.5rem .875rem;border-radius:8px;font-size:13px;font-weight:600;display:inline-flex;align-items:center;gap:.5rem;margin:.25rem;border:1px solid #5D157C}form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .file-badge .remove-icon, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .file-badge .delete-icon, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .file-badge .pi-times, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .file-item .remove-icon, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .file-item .delete-icon, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .file-item .pi-times, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .uploaded-file-item .remove-icon, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .uploaded-file-item .delete-icon, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .uploaded-file-item .pi-times{cursor:pointer;opacity:.7;font-size:14px}form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .file-badge .remove-icon:hover, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .file-badge .delete-icon:hover, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .file-badge .pi-times:hover, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .file-item .remove-icon:hover, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .file-item .delete-icon:hover, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .file-item .pi-times:hover, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .uploaded-file-item .remove-icon:hover, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .uploaded-file-item .delete-icon:hover, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .uploaded-file-item .pi-times:hover{opacity:1;color:#d32f2f}form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .upload-button, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .btn-upload, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload input[type=file]{position:absolute!important;width:100%!important;height:100%!important;top:0!important;left:0!important;opacity:0!important;cursor:pointer!important;z-index:10!important}form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload button:not(.upload-button):not(.btn-upload){opacity:1!important;background-color:transparent!important;border:none!important;color:#5d157c!important;cursor:pointer!important;padding:.25rem!important}form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .drag-over, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .dragging, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload.drag-active{background-color:#e8d5ff!important}form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .image-preview, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .file-preview{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:.5rem}form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .image-preview img, form[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]     file-upload .file-preview img{width:80px;height:80px;object-fit:cover;border-radius:8px;border:2px solid #5D157C}form[_ngcontent-%COMP%]   .switch-container[_ngcontent-%COMP%]{display:flex;align-items:center}.button-container[_ngcontent-%COMP%]{display:flex;gap:.75rem;justify-content:space-between;padding:1rem 1.5rem;background-color:#f5f5f5;border-top:1px solid #ddd;margin-top:1.5rem}.button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.65rem 2rem;font-size:14px;font-weight:600;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;min-width:120px}.button-container[_ngcontent-%COMP%]   button.cancel-button[_ngcontent-%COMP%]{background-color:#e0e0e0;color:#333;border:1px solid #999;order:1}.button-container[_ngcontent-%COMP%]   button.cancel-button[_ngcontent-%COMP%]:hover{background-color:#d0d0d0;border-color:#666;transform:translateY(-1px)}.button-container[_ngcontent-%COMP%]   button.submit-button[_ngcontent-%COMP%]{background-color:#5d157c;color:#fff;box-shadow:0 2px 4px #6c00a433;order:2}.button-container[_ngcontent-%COMP%]   button.submit-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#3c0e50;transform:translateY(-1px);box-shadow:0 4px 8px #6c00a44d}.button-container[_ngcontent-%COMP%]   button.submit-button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed;opacity:.6;box-shadow:none}.variant-container[_ngcontent-%COMP%]{margin-top:1.5rem;background-color:#fff;overflow:hidden}.variant-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background-color:#fff}.variant-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6a1b9a,#8e24aa)}.variant-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#fff;padding:1rem .875rem;text-align:left;font-size:13px;font-weight:700;letter-spacing:.3px;border:none}.variant-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th.col-size[_ngcontent-%COMP%]{width:35%}.variant-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th.col-price[_ngcontent-%COMP%], .variant-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th.col-stock[_ngcontent-%COMP%]{width:30%}.variant-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th.col-action[_ngcontent-%COMP%]{width:50px;text-align:center}.variant-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .2s ease;border-bottom:1px solid #f0f0f0}.variant-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f9f5ff}.variant-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.variant-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.875rem;vertical-align:middle;font-size:14px}.variant-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.col-action[_ngcontent-%COMP%]{text-align:center;padding:.5rem}.variant-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.625rem .75rem;border:1px solid #ddd;border-radius:8px;font-size:14px;font-family:inherit;transition:all .3s ease;background-color:#fafafa}.variant-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#5d157c;background-color:#fff;box-shadow:0 0 0 3px #6a1b9a1a}.variant-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#d32f2f;font-size:11px;margin-top:.35rem;display:block}.variant-table[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{background:transparent;border:none;color:#d32f2f;padding:.4rem;width:32px;height:32px;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center;justify-content:center}.variant-table[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px;line-height:1}.variant-table[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]:hover:not(:disabled){color:#b71c1c;transform:scale(1.15)}.variant-table[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]:disabled{color:#ccc;cursor:not-allowed;opacity:.5}.variant-table[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]:disabled:hover{transform:none}.add-variant-button-container[_ngcontent-%COMP%]{padding:1rem;background-color:#fafafa;border-top:1px solid #f0f0f0;display:flex;justify-content:center;align-items:center}.add-variant-button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;padding:.625rem 1.5rem;background-color:#5d157c;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 4px #6a1b9a33}.add-variant-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px;font-weight:700}.add-variant-button[_ngcontent-%COMP%]:hover{background-color:#3c0e50;transform:translateY(-1px);box-shadow:0 4px 8px #6a1b9a4d}.add-variant-button[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 4px #6a1b9a33}@media (max-width: 768px){.variant-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:11px;padding:.75rem .5rem}.variant-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.625rem .5rem}.variant-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.5rem;font-size:13px}.variant-table[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{width:28px;height:28px}.variant-table[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.add-variant-button[_ngcontent-%COMP%]{padding:.5rem 1.25rem;font-size:13px}.add-variant-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}}.toggle-group[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1rem;padding:1rem;background-color:#f9f0ff}.toggle-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#4a148c;font-size:14px}.toggle-switch[_ngcontent-%COMP%]{display:flex;border:2px solid #6a1b9a;border-radius:10px;overflow:hidden;width:fit-content}.toggle-switch[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1;padding:.4rem 1.5rem;text-align:center;cursor:pointer;background-color:#fff;color:#6a1b9a;transition:all .2s ease;font-weight:600;font-size:13px}.toggle-switch[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.toggle-switch[_ngcontent-%COMP%]   label.active[_ngcontent-%COMP%]{background-color:#6a1b9a;color:#fff}.toggle-switch[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover:not(.active){background-color:#f3e8ff}  .product-variants-form .template-container .content-container{padding:0!important}  .p-treeselect{width:100%;border:1px solid #ddd}.switch-btn-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.switch-btn-group.bolder[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:900;font-size:14px;color:#5d157c}.switch-btn-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#5d157c;font-weight:700;font-size:14px}.switch-btn-group[_ngcontent-%COMP%]     p-inputswitch>div{height:1.5rem}.switch-btn-group[_ngcontent-%COMP%]     .p-inputswitch.p-inputswitch-checked .p-inputswitch-slider{background-color:#5d157c!important}  .custom-tree-select .p-treeselect{border-radius:8px;border:1px solid #ddd;padding:.4rem .75rem;font-size:14px;font-weight:500;color:#5d157c;transition:all .3s ease;background-color:#fff}  .custom-tree-select .p-treeselect:hover{border-color:#5d157c}  .custom-tree-select .p-treeselect-label{padding:4px 0}  .custom-tree-select .p-treeselect-trigger{color:#5d157c;font-size:12px}  .custom-tree-select .p-treeselect-panel{border-radius:12px;border:1px solid #ddd6fe;padding:.5rem;box-shadow:0 4px 14px #6c00a41f}  .custom-tree-select .p-chips-token{background-color:#ede9fe;color:#5d157c;font-size:12px;font-weight:600;padding:4px 12px;border-radius:9999px;margin-right:6px;margin-top:6px;border:1px solid #5D157C;display:flex;align-items:center}  .custom-tree-select .p-chips-token .p-chips-token-icon{margin-left:6px;font-size:12px;color:#5d157c;cursor:pointer}  .custom-tree-select .p-treenode-content{padding:4px 0;display:flex;align-items:center}  .custom-tree-select .p-treenode-label{font-size:13px;color:#5d157c;font-weight:500;padding-left:.4rem}  .custom-tree-select .p-checkbox{margin-right:.25rem}  .custom-tree-select .p-checkbox-box{border:1px solid #5D157C;border-radius:4px;background-color:#fff;width:18px;height:18px}  .custom-tree-select .p-checkbox-box.p-highlight{background-color:#5d157c;border-color:#5d157c}  .custom-tree-select .p-checkbox-box.p-highlight .p-checkbox-icon{color:#fff;font-size:12px}  .custom-tree-select .p-treenode-children{padding-left:1.5rem}  .custom-dropdown .p-dropdown{border-radius:8px;border:1px solid #ddd;transition:all .3s ease}  .custom-dropdown .p-dropdown:hover{border-color:#5d157c}  .custom-dropdown .p-dropdown.p-focus{border-color:#5d157c;box-shadow:0 0 0 3px #6c00a41a}"]})};var $C=["productsSection"];function YC(i,t){if(i&1){let e=E();s(0,"div",12)(1,"div",13)(2,"button",14),v("click",function(){b(e);let o=_();return C(o.selectTab("ondemand"))}),p(3),M(4,"translate"),c(),s(5,"button",14),v("click",function(){b(e);let o=_();return C(o.selectTab("subscription"))}),p(6),M(7,"translate"),c(),h(8,"div",15),c()()}if(i&2){let e=_();d(2),j("active",e.selectedTab==="ondemand"),d(),T(" ",O(4,8,"sales.products")," "),d(2),j("active",e.selectedTab==="subscription"),d(),T(" ",O(7,10,"sales.subscription")," "),d(2),j("subscription-active",e.selectedTab==="subscription")}}function KC(i,t){i&1&&(s(0,"div",16)(1,"div",17),h(2,"i",18),s(3,"p"),p(4),M(5,"translate"),c()()()),i&2&&(d(4),S(O(5,1,"products.refreshing")))}function XC(i,t){if(i&1&&h(0,"img",26),i&2){let e=_().$implicit,n=_(2);g("src",e.img||n.getCategoryIconFromName(e.name)||"assets/images/products/prod-category.webp",Jt)("alt",e.name)}}function QC(i,t){i&1&&h(0,"i",27)}function JC(i,t){if(i&1){let e=E();s(0,"div",21),v("click",function(){let o=b(e).$implicit,r=_(2);return C(r.selectCategory(o.name))}),s(1,"div",22),y(2,XC,1,2,"img",23)(3,QC,1,0,"i",24),c(),s(4,"span",25),p(5),M(6,"translate"),c()()}if(i&2){let e=t.$implicit,n=_(2);j("active",n.selectedCategory===e.name),d(2),g("ngIf",e.img||n.getCategoryIconFromName(e.name)),d(),g("ngIf",!e.img&&!n.getCategoryIconFromName(e.name)),d(2),S(e.name==="All Items"?O(6,5,"products.all_items"):e.name)}}function ZC(i,t){if(i&1&&(s(0,"div",19),y(1,JC,7,7,"div",20),c()),i&2){let e=_();d(),g("ngForOf",e.allCategories)}}function ev(i,t){if(i&1){let e=E();s(0,"i",38),v("click",function(){b(e);let o=_(2);return C(o.clearSearch())}),c()}}function tv(i,t){if(i&1){let e=E();s(0,"p-tag",42),v("click",function(){let o=b(e).$implicit,r=_(3);return C(r.setSelectedSubcategory(o))}),c()}if(i&2){let e=t.$implicit,n=_(3);g("value",n.truncateText(e.name,7))("severity",(n.selectedSubcategory==null?null:n.selectedSubcategory.product_category_id)===e.product_category_id?"info":"secondary")("pTooltip",e.name)}}function nv(i,t){if(i&1&&(s(0,"div",39)(1,"div",40),y(2,tv,1,3,"p-tag",41),c()()),i&2){let e=_(2);d(2),g("ngForOf",e.subcategories)}}function iv(i,t){i&1&&(s(0,"div",43)(1,"p"),p(2),M(3,"translate"),c()()),i&2&&(d(2),S(O(3,1,"product.loading_products")))}function ov(i,t){if(i&1){let e=E();s(0,"div",46)(1,"div",47)(2,"img",48),v("error",function(o){b(e);let r=_(3);return C(r.onImageError(o))}),c(),s(3,"button",49),v("click",function(){let o=b(e).$implicit,r=_(3);return C(r.edit(o))}),h(4,"i",50),c()(),s(5,"div",51)(6,"h3",52),p(7),c(),s(8,"div",53),p(9),c(),s(10,"div",54)(11,"button",55),v("click",function(o){let r=b(e).$implicit,a=_(3);return C(a.confirmDelete(r,o))}),h(12,"i",56),c(),s(13,"button",57),v("click",function(){let o=b(e).$implicit,r=_(3);return C(r.toggleAvailability(o))}),p(14),c()()()()}if(i&2){let e=t.$implicit,n=_(3);d(2),g("src",n.getProductImage(e),Jt)("alt",e.product_name),d(5),S(e.product_name),d(2),T("\u20B9",e.selling_price||0,""),d(4),j("available",e.visibility)("unavailable",!e.visibility),d(),T(" ",e.visibility?"Available":"Unavailable"," ")}}function rv(i,t){if(i&1&&(s(0,"div",44),y(1,ov,15,9,"div",45),c()),i&2){let e=_(2);d(),g("ngForOf",e.getFilteredProducts())}}function av(i,t){i&1&&(s(0,"div",58),h(1,"i",18),s(2,"p"),p(3),M(4,"translate"),c()()),i&2&&(d(3),S(O(4,1,"products.loading_more")))}function sv(i,t){i&1&&(s(0,"div",59)(1,"p"),p(2,"No more products to load"),c()())}function cv(i,t){i&1&&(s(0,"div",60)(1,"div",61),h(2,"i",27),c(),s(3,"h3"),p(4),M(5,"translate"),c(),s(6,"p"),p(7),M(8,"translate"),c()()),i&2&&(d(4),S(O(5,2,"product.no_products_found")),d(3),S(O(8,4,"product.add_first_product_hint")))}function dv(i,t){if(i&1){let e=E();s(0,"div",28)(1,"div",29)(2,"input",30),M(3,"translate"),N("ngModelChange",function(o){b(e);let r=_();return z(r.search,o)||(r.search=o),C(o)}),v("input",function(o){b(e);let r=_();return C(r.onSearchInputChange(o))}),c(),y(4,ev,1,0,"i",31),c(),y(5,nv,3,1,"div",32)(6,iv,4,3,"div",33)(7,rv,2,1,"div",34)(8,av,5,3,"div",35)(9,sv,3,0,"div",36)(10,cv,9,6,"div",37),c()}if(i&2){let e=_();d(2),ne("placeholder",O(3,9,"providerInfo.catalogue.search")),L("ngModel",e.search),d(2),g("ngIf",e.search),d(),g("ngIf",e.hasSubcategories),d(),g("ngIf",e.isLoadingProducts),d(),g("ngIf",!e.isLoadingProducts&&e.getFilteredProducts().length>0),d(),g("ngIf",e.isLoadingMore&&e.selectedCategory===null),d(),g("ngIf",!e.hasMoreProducts&&!e.isLoadingMore&&e.selectedCategory===null&&e.getFilteredProducts().length>0),d(),g("ngIf",!e.isLoadingProducts&&e.getFilteredProducts().length===0)}}function lv(i,t){i&1&&(s(0,"div",43)(1,"p"),p(2),M(3,"translate"),c()()),i&2&&(d(2),S(O(3,1,"product.loading_subscriptions")))}function pv(i,t){if(i&1){let e=E();s(0,"div",46)(1,"div",47)(2,"img",48),v("error",function(o){b(e);let r=_(3);return C(r.onImageError(o))}),c(),s(3,"button",62),v("click",function(){let o=b(e).$implicit,r=_(3);return C(r.edit(o))}),h(4,"i",50),c()(),s(5,"div",51)(6,"h3",52),p(7),c(),s(8,"div",53),p(9),c(),s(10,"div",54)(11,"button",63),v("click",function(o){let r=b(e).$implicit,a=_(3);return C(a.confirmDelete(r,o))}),h(12,"i",56),c(),s(13,"button",57),v("click",function(){let o=b(e).$implicit,r=_(3);return C(r.toggleAvailability(o))}),p(14),c()()()()}if(i&2){let e=t.$implicit,n=_(3);d(2),g("src",n.getProductImage(e),Jt)("alt",e.product_name),d(5),S(e.product_name),d(2),T("\u20B9",e.selling_price||0,""),d(4),j("available",e.visibility)("unavailable",!e.visibility),d(),T(" ",e.visibility?"Available":"Unavailable"," ")}}function mv(i,t){if(i&1&&(s(0,"div",44),y(1,pv,15,9,"div",45),c()),i&2){let e=_(2);d(),g("ngForOf",e.subscriptionProducts)}}function gv(i,t){i&1&&(s(0,"div",60)(1,"div",61),h(2,"i",27),c(),s(3,"h3"),p(4),M(5,"translate"),c(),s(6,"p"),p(7),M(8,"translate"),c()()),i&2&&(d(4),S(O(5,2,"products.no_subscription_products_found")),d(3),S(O(8,4,"product.add_new_subscription_hint")))}function uv(i,t){if(i&1&&(s(0,"div"),y(1,lv,4,3,"div",33)(2,mv,2,1,"div",34)(3,gv,9,6,"div",37),c()),i&2){let e=_();d(),g("ngIf",e.isLoadingSubscriptions),d(),g("ngIf",!e.isLoadingSubscriptions&&e.subscriptionProducts.length>0),d(),g("ngIf",!e.isLoadingSubscriptions&&e.subscriptionProducts.length===0)}}function fv(i,t){if(i&1){let e=E();s(0,"div",64)(1,"div",65),v("click",function(o){return b(e),C(o.stopPropagation())}),s(2,"div",66)(3,"h2"),p(4),c(),s(5,"button",67),v("click",function(){b(e);let o=_();return C(o.closeAddProductDialog())}),h(6,"i",68),c()(),s(7,"div",69)(8,"add-product",70),v("saveSuccess",function(){b(e);let o=_();return C(o.onProductSaved())})("cancel",function(){b(e);let o=_();return C(o.closeAddProductDialog())}),c()()()()}if(i&2){let e=_();d(4),Qe(" ",e.editProduct?"Edit":"Add"," ",e.selectedTab==="ondemand"?"Product":"Subscription"," "),d(4),g("editFormValues",e.editProduct)}}var Gr=class i{constructor(t,e,n,o,r,a,l,m,u,f){this.productService=t;this.categoryService=e;this.toast=n;this.confirmationService=o;this.cdr=r;this.authService=a;this.router=l;this.backHandleService=m;this.providerInfoService=u;this.translate=f}selectedTab="ondemand";selectedCategory=null;isLoadingProducts=!1;isLoadingSubscriptions=!1;showAddDialog=!1;isRefreshing=!1;businessTypes=[];productData=[];categorizedProducts=[];allCategories=[];fullCategoryList=[];subscriptionProducts=[];editProduct;currentPage=0;pageSize=10;totalProducts=0;hasMoreProducts=!0;isLoadingMore=!1;search="";searchSubject$=new Yt;selectedSubcategory=null;selectedCategoryWithChildren=null;categoriesMap=new Map;categoryNameToIdMap=new Map;destroy$=new Yt;productsSectionRef;scrollListenerAttached=!1;scrollHandler;ngOnInit(){this.registerBackAction();let t=this.authService.getSelectedProviderId();t&&t>0&&(console.log("[ProductComponent] Initializing with provider ID:",t),this.productService.updateProviderUrl(t),this.updateCategoryService(t),this.loadProviderDetails(t)),this.initializeSearchDebounce(),this.loadCategoriesForCurrentProvider(),this.loadInitialData(),this.setupProviderChangeListener()}ngAfterViewInit(){this.setupScrollListener()}setupScrollListener(){setTimeout(()=>{if(this.productsSectionRef?.nativeElement){let t=this.productsSectionRef.nativeElement;this.scrollListenerAttached&&this.scrollHandler&&t.removeEventListener("scroll",this.scrollHandler),this.scrollHandler=()=>this.onProductsSectionScroll(),t.addEventListener("scroll",this.scrollHandler),this.scrollListenerAttached=!0,console.log("[ProductComponent] Scroll listener attached to products section")}else console.warn("[ProductComponent] Products section element not found, using window scroll")},100)}onProductsSectionScroll(){if(this.selectedCategory!==null||this.selectedTab!=="ondemand"||!this.hasMoreProducts||!this.productsSectionRef?.nativeElement)return;let t=this.productsSectionRef.nativeElement,e=t.scrollTop,n=t.scrollHeight,o=t.clientHeight,r=200,a=n-(e+o);a<=r&&this.hasMoreProducts&&!this.isLoadingMore&&!this.isLoadingProducts&&(console.log("[ProductComponent] Container scroll: Near bottom, loading more products...",{scrollTop:e,scrollHeight:n,clientHeight:o,distanceFromBottom:a,hasMoreProducts:this.hasMoreProducts,isLoadingMore:this.isLoadingMore}),this.loadMoreProducts())}ngOnDestroy(){this.productsSectionRef?.nativeElement&&this.scrollHandler&&this.productsSectionRef.nativeElement.removeEventListener("scroll",this.scrollHandler),setTimeout(()=>{this.cleanupBackAction()},100),this.destroy$.next(),this.destroy$.complete()}registerBackAction(){let t=this.router.url;console.log("\u{1F519} [ProductComponent] Registering back action for URL:",t),[t,t.split("?")[0],"/providers/product"].forEach((n,o)=>{let r={id:`product-back-action-${o}`,actionType:"navigate",backNavigationUrl:"/providers/dashboard",callback:()=>{},value:"",forPageUrl:n};this.backHandleService.backAction=this.backHandleService.backAction.filter(a=>!a.id.startsWith("product-back-action-")||a.forPageUrl!==n),this.backHandleService.backAction.push(r)}),console.log("\u{1F519} [ProductComponent] Total back actions:",this.backHandleService.backAction.length)}cleanupBackAction(){let t=this.router.url;console.log("\u{1F519} [ProductComponent] Cleaning up back action for URL:",t);let e=this.backHandleService.backAction.length;this.backHandleService.backAction=this.backHandleService.backAction.filter(o=>!o.id.startsWith("product-back-action-"));let n=this.backHandleService.backAction.length;console.log("\u{1F519} [ProductComponent] Removed",e-n,"back actions")}initializeSearchDebounce(){this.searchSubject$.pipe(Xt(400),Qt(),Pt(this.destroy$)).subscribe(t=>{this.selectedCategory===null&&this.selectedTab==="ondemand"&&(this.currentPage=0,this.productData=[],this.hasMoreProducts=!0,this.loadProducts(void 0,!1)),this.cdr.detectChanges()})}updateSelectedCategoryWithChildren(t){if(!this.selectedCategory){this.selectedCategoryWithChildren=null;return}let e=this.categoryNameToIdMap.get(this.selectedCategory);if(!e){this.selectedCategoryWithChildren=null;return}let n=t.find(r=>r.product_category_id===e);if(!n){this.selectedCategoryWithChildren=null;return}let o=t.filter(r=>r.parent_id===e);this.selectedCategoryWithChildren=H(U({},n),{children:o})}setSelectedSubcategory(t){this.selectedSubcategory=t,this.cdr.detectChanges()}onSearchInputChange(t){let e=t.target.value;this.search=e,this.searchSubject$.next(e)}clearSearch(){this.search="",this.selectedCategory===null&&(this.currentPage=0,this.productData=[],this.hasMoreProducts=!0,this.loadProducts(void 0,!1)),this.cdr.detectChanges()}setupProviderChangeListener(){this.authService.providerChange$.pipe(Pt(this.destroy$)).subscribe(t=>{if(t){let e=t.provider_id;console.log("[ProductComponent] Provider changed to:",t.display_name||t.name,"ID:",e),this.productData=[],this.subscriptionProducts=[],this.categorizedProducts=[],this.allCategories=[],this.selectedCategory=null,this.search="",this.productService.updateProviderUrl(e),this.updateCategoryService(e),this.loadProviderDetails(e),console.log("[ProductComponent] Reloading categories and products for new provider"),this.loadCategoriesForCurrentProvider(),this.loadInitialData(),this.cdr.detectChanges()}})}loadProviderDetails(t){this.providerInfoService.getProviderDetails(t).subscribe({next:e=>{if(e.status&&e.data){let n=e.data;this.businessTypes=n.business_type||[],console.log("[ProductComponent] Provider business types:",this.businessTypes),this.businessTypes.includes("subscription")&&!this.businessTypes.includes("on_demand")?this.selectedTab="subscription":this.businessTypes.includes("on_demand")&&!this.businessTypes.includes("subscription")&&(this.selectedTab="ondemand"),this.cdr.detectChanges()}},error:e=>{console.error("[ProductComponent] Failed to load provider details:",e)}})}updateCategoryService(t){if(!t||t===0){console.warn("Cannot update category service - invalid provider ID:",t);return}this.categoryService.updateProviderUrl(t)}loadCategoriesForCurrentProvider(){let t=this.authService.getSelectedProviderId();if(!t||t===0){console.warn("[ProductComponent] Cannot load categories - invalid provider ID"),this.categoriesMap.clear();return}console.log("[ProductComponent] Loading categories for provider ID:",t),this.categoryService.listWithTotal({limit:1e3}).pipe(Pt(this.destroy$),qe(e=>(console.error("[ProductComponent] Failed to load categories:",e),this.toast.error("Error","Failed to load product categories"),De({data:[]})))).subscribe(e=>{let n=e.data||[];console.log("[ProductComponent] Categories loaded:",n.length,"for provider ID:",t),this.fullCategoryList=n,this.allCategories=n.filter(o=>o.parent_id===null||o.parent_id===void 0),console.log("[ProductComponent] Top-level categories for sidebar:",this.allCategories.length),this.categoriesMap.clear(),this.categoryNameToIdMap.clear(),n.forEach(o=>{this.categoriesMap.set(o.product_category_id,o.name),this.categoryNameToIdMap.set(o.name,o.product_category_id)}),this.categoriesMap.size>0?console.log("[ProductComponent] Categories map populated:",Array.from(this.categoriesMap.entries())):console.warn("[ProductComponent] No categories found for provider ID:",t),this.productData&&this.productData.length>0&&(console.log("[ProductComponent] Recategorizing products after categories loaded"),this.categorizeProducts(this.productData)),this.cdr.detectChanges()})}loadCategories(){this.loadCategoriesForCurrentProvider()}loadInitialData(){this.selectedTab==="ondemand"?this.loadProducts():this.loadSubscriptionProducts()}parseProductVariants(t){if(typeof t.variants=="string")try{t.variants=JSON.parse(t.variants)}catch{t.variants=[]}return t.product_category_id!==void 0&&t.product_category_id!==null?Array.isArray(t.product_category_id)?t.product_category_id=t.product_category_id.map(e=>Number(e)):t.product_category_id=[Number(t.product_category_id)]:t.product_category_id=[],t}extractProductsFromCategoryResponse(t){let e=new Map,n=o=>{o&&(Array.isArray(o)?o.forEach(r=>n(r)):(o.products&&Array.isArray(o.products)&&o.products.forEach(r=>{r.product_id&&e.set(r.product_id,r)}),o.children&&Array.isArray(o.children)&&o.children.forEach(r=>n(r))))};return n(t),Array.from(e.values())}loadProducts(t,e=!1){if(e){if(this.isLoadingMore||!this.hasMoreProducts)return;this.isLoadingMore=!0}else{if(this.isLoadingProducts)return;this.isLoadingProducts=!0,this.currentPage=0,this.productData=[],this.hasMoreProducts=!0}let n=this.authService.getSelectedProviderId();if(console.log("[ProductComponent] loadProducts() called for provider ID:",n,"categoryId:",t,"loadMore:",e),n&&n>0&&this.productService.updateProviderUrl(n),t){let o=e?void 0:{cache:{noCache:!0}};this.productService.getProductsByCategory(n,t).pipe(Pt(this.destroy$),qe(()=>(this.toast.error("Error","Failed to load products"),this.isLoadingProducts=!1,this.isLoadingMore=!1,De([])))).subscribe(r=>{console.log("[ProductComponent] Category-filtered products loaded:",r);let a=[];Array.isArray(r)?r.forEach(f=>{f.products&&Array.isArray(f.products)&&(a=a.concat(f.products))}):r?.data&&Array.isArray(r.data)&&r.data.forEach(f=>{f.products&&Array.isArray(f.products)&&(a=a.concat(f.products))});let l=a.map(f=>this.parseProductVariants(f)),m=l.filter(f=>f.product_type==="service"||f.is_service===!0);console.log("[ProductComponent] Category-filtered service products found:",m.length),m.length>0&&console.log("[ProductComponent] Category-filtered service products details:",m.map(f=>({name:f.product_name,product_type:f.product_type,is_service:f.is_service,product_subtype:f.product_subtype}))),this.productData=l.filter(f=>f.product_type!=="subscription");let u=m.filter(f=>!this.productData.some(x=>x.product_id===f.product_id));if(u.length>0&&console.warn("[ProductComponent] Category-filtered service products filtered out:",u.map(f=>({name:f.product_name,product_type:f.product_type,product_subtype:f.product_subtype}))),this.productData.length===0&&!e){let f=this.selectedCategory||"this category";console.log(`[ProductComponent] No products found for category: ${f}`)}this.categorizeProducts(this.productData),this.isLoadingProducts=!1,this.isLoadingMore=!1,this.cdr.detectChanges()})}else{let o={skip:this.currentPage*this.pageSize,limit:this.pageSize};this.search&&this.search.trim()&&(o.search=this.search.trim()),this.productService.listWithTotal(o).pipe(Pt(this.destroy$),qe(()=>(this.toast.error("Error","Failed to load products"),this.isLoadingProducts=!1,this.isLoadingMore=!1,De({data:[],total:0})))).subscribe(r=>{console.log("[ProductComponent] Products loaded:",r.data?.length||0,"products. Total:",r.total);let a=r.data.map(f=>this.parseProductVariants(f)),l=a.filter(f=>f.product_type==="service"||f.is_service===!0);console.log("[ProductComponent] Service products found:",l.length),l.length>0&&console.log("[ProductComponent] Service products details:",l.map(f=>({name:f.product_name,product_type:f.product_type,is_service:f.is_service,product_subtype:f.product_subtype})));let m=a.filter(f=>f.product_type!=="subscription"),u=l.filter(f=>!m.some(x=>x.product_id===f.product_id));if(u.length>0&&console.warn("[ProductComponent] Service products filtered out:",u.map(f=>({name:f.product_name,product_type:f.product_type,product_subtype:f.product_subtype}))),e&&m.length===0){console.log("[ProductComponent] No more products returned, stopping pagination"),this.hasMoreProducts=!1,this.isLoadingProducts=!1,this.isLoadingMore=!1,this.cdr.detectChanges();return}e?this.productData=[...this.productData,...m]:(this.productData=m,this.productData.length===0&&(this.search.trim()?console.log("[ProductComponent] No products found matching search term:",this.search):console.log("[ProductComponent] No products found"))),this.totalProducts=r.total||0,m.length===0?this.hasMoreProducts=!1:this.hasMoreProducts=this.productData.length<this.totalProducts,console.log("[ProductComponent] Pagination state:",{loaded:this.productData.length,total:this.totalProducts,hasMore:this.hasMoreProducts,currentPage:this.currentPage}),this.currentPage++,this.categorizeProducts(this.productData),this.isLoadingProducts=!1,this.isLoadingMore=!1,this.cdr.detectChanges(),t||setTimeout(()=>this.setupScrollListener(),50)})}}loadMoreProducts(){this.selectedCategory===null&&this.hasMoreProducts&&!this.isLoadingMore?(console.log("[ProductComponent] loadMoreProducts() called - loading page:",this.currentPage+1),this.loadProducts(void 0,!0)):console.log("[ProductComponent] loadMoreProducts() skipped:",{selectedCategory:this.selectedCategory,hasMoreProducts:this.hasMoreProducts,isLoadingMore:this.isLoadingMore})}onWindowScroll(){if(this.selectedCategory!==null||this.selectedTab!=="ondemand"||!this.hasMoreProducts)return;if(this.productsSectionRef?.nativeElement){let o=this.productsSectionRef.nativeElement,r=window.getComputedStyle(o);if(r.overflowY==="auto"||r.overflowY==="scroll")return}let t=window.innerHeight+window.scrollY,e=document.documentElement.scrollHeight;t>=e-300&&this.hasMoreProducts&&!this.isLoadingMore&&!this.isLoadingProducts&&(console.log("[ProductComponent] Window scroll: Near bottom, loading more products..."),this.loadMoreProducts())}loadSubscriptionProducts(){if(this.isLoadingSubscriptions)return;this.isLoadingSubscriptions=!0;let t=this.authService.getSelectedProviderId();console.log("[ProductComponent] loadSubscriptionProducts() called for provider ID:",t),t&&t>0&&this.productService.updateProviderUrl(t),this.productService.listWithTotal({limit:1e3}).pipe(Pt(this.destroy$),qe(e=>(console.error("[ProductComponent] Error loading subscriptions:",e),this.toast.error("Error","Failed to load subscriptions"),this.isLoadingSubscriptions=!1,De({data:[]})))).subscribe(e=>{console.log("[ProductComponent] Subscription products loaded:",e.data?.length||0,"products");let n=e.data.map(o=>this.parseProductVariants(o));this.subscriptionProducts=n.filter(o=>o.product_subtype==="service_subscription"||o.product_subtype==="subscribe"),this.subscriptionProducts.length===0&&console.log("[ProductComponent] No subscription products found"),this.isLoadingSubscriptions=!1,this.cdr.detectChanges()})}categorizeProducts(t){let e=new Map;t.forEach(n=>{let o=n.product_category_id||[],r=new Set;if(o.length===0){this.addProductToCategoryMap(e,"Uncategorized",n);return}o.forEach(a=>{let l=this.fullCategoryList.find(f=>f.product_category_id===a),m="Uncategorized",u;if(l)if(l.parent_id){let f=this.fullCategoryList.find(x=>x.product_category_id===l.parent_id);f?(m=f.name,u=f.product_category_id):m="Uncategorized"}else m=l.name,u=l.product_category_id;else m="Uncategorized";u?r.has(u)||(this.addProductToCategoryMap(e,m,n),r.add(u)):m==="Uncategorized"&&(r.has(-1)||(this.addProductToCategoryMap(e,"Uncategorized",n),r.add(-1)))})}),this.categorizedProducts=Array.from(e.entries()).map(([n,o])=>({categoryName:n,products:o,categoryIcon:o[0]?.product_image_url?.[0]})).sort((n,o)=>n.categoryName==="Uncategorized"?1:o.categoryName==="Uncategorized"?-1:n.categoryName.localeCompare(o.categoryName))}addProductToCategoryMap(t,e,n){t.has(e)||t.set(e,[]),t.get(e).push(n)}getFilteredProducts(){let t=this.selectedCategory?this.categorizedProducts.find(e=>e.categoryName===this.selectedCategory)?.products||[]:this.productData;if(this.selectedSubcategory){let e=this.selectedSubcategory.product_category_id;t=t.filter(n=>n.product_category_id&&Array.isArray(n.product_category_id)?n.product_category_id.includes(e):n.product_category_id===e)}if(this.search&&this.search.trim()){let e=this.search.trim().toLowerCase();t=t.filter(n=>n.product_name.toLowerCase().includes(e))}return t}toggleAvailability(t){let e=!t.visibility,n=t.visibility;t.visibility=e;let o=H(U({},t),{visibility:e,variants:Array.isArray(t.variants)?JSON.stringify(t.variants):t.variants});this.productService.update(o).subscribe({next:()=>{let r=e?"available":"unavailable";this.toast.success("Success",`${t.product_name} is now ${r}.`),this.cdr.detectChanges()},error:r=>{t.visibility=n,console.error("Update error:",r),this.toast.error(this.translate.instant("common.error"),this.translate.instant("products.update_error")),this.cdr.detectChanges()}})}confirmDelete(t,e){e.stopPropagation(),this.confirmationService.confirm({message:this.translate.instant("products.delete_confirmation_msg",{name:t.product_name}),header:this.translate.instant("products.delete_confirmation_title"),icon:"pi pi-exclamation-triangle",accept:()=>{this.deleteProduct(t)},reject:()=>{}})}deleteProduct(t){this.productService.delete(t.product_id).subscribe({next:()=>{this.toast.success("Success",`${t.product_name} deleted successfully.`),this.refreshProductList()},error:e=>{console.error("Delete error:",e),this.toast.error("Error","Failed to delete product.")}})}selectTab(t){this.selectedTab=t,this.selectedCategory=null,this.currentPage=0,this.hasMoreProducts=!0,this.productData=[],this.loadInitialData()}selectCategory(t){if(t==="All Items"&&(t=null),this.selectedCategory=t,this.selectedSubcategory=null,this.currentPage=0,this.hasMoreProducts=!0,this.productData=[],t){let e=this.authService.getSelectedProviderId();e&&e>0&&this.categoryService.listWithTotal({limit:1e3}).pipe(Pt(this.destroy$),qe(()=>De({data:[]}))).subscribe(n=>{let o=n.data||[];this.updateSelectedCategoryWithChildren(o);let r=this.categoryNameToIdMap.get(t);r?(console.log("[ProductComponent] Category selected:",t,"ID:",r),this.loadProducts(r,!1)):(console.warn("[ProductComponent] Category ID not found for:",t),this.loadProducts(void 0,!1))})}else console.log("[ProductComponent] All items selected - loading products with pagination"),this.selectedCategoryWithChildren=null,this.loadProducts(void 0,!1)}edit(t){this.editProduct=U({},t),this.showAddDialog=!0}openAddProductDialog(){this.editProduct=void 0,this.showAddDialog=!0}closeAddProductDialog(){this.showAddDialog=!1}refreshProductList(){console.log("[ProductComponent] Performing complete page refresh..."),console.log("[ProductComponent] Setting isRefreshing to true"),this.isRefreshing=!0,this.cdr.detectChanges(),console.log("[ProductComponent] Loader should now be visible, isRefreshing:",this.isRefreshing),this.productData=[],this.subscriptionProducts=[],this.categorizedProducts=[],this.currentPage=0,this.hasMoreProducts=!0,this.totalProducts=0,this.isLoadingProducts=!1,this.isLoadingSubscriptions=!1,this.isLoadingMore=!1,this.search="",this.selectedCategory=null,this.selectedSubcategory=null,this.selectedCategoryWithChildren=null,this.cdr.detectChanges();let t=this.authService.getSelectedProviderId();if(!t||t===0){this.isRefreshing=!1,this.cdr.detectChanges();return}let e=this.categoryService.listWithTotal({limit:1e3}).pipe(qe(o=>(console.error("[ProductComponent] Failed to reload categories:",o),De({data:[]})))),n=this.selectedTab==="ondemand"?this.productService.listWithTotal({skip:0,limit:this.pageSize}).pipe(qe(o=>(console.error("[ProductComponent] Failed to reload products:",o),De({data:[],total:0})))):this.productService.listWithTotal({limit:1e3}).pipe(qe(o=>(console.error("[ProductComponent] Failed to reload subscriptions:",o),De({data:[],total:0}))));ao({categories:e,products:n}).pipe(Pt(this.destroy$)).subscribe({next:o=>{let r=o.categories.data||[];console.log("[ProductComponent] Categories reloaded:",r.length),this.allCategories=r.filter(l=>l.parent_id===null||l.parent_id===void 0),this.categoriesMap.clear(),this.categoryNameToIdMap.clear(),r.forEach(l=>{this.categoriesMap.set(l.product_category_id,l.name),this.categoryNameToIdMap.set(l.name,l.product_category_id)});let a=o.products.data.map(l=>this.parseProductVariants(l));this.selectedTab==="ondemand"?(this.productData=a.filter(l=>l.product_type!=="subscription"),this.totalProducts=o.products.total||0,this.hasMoreProducts=this.productData.length<this.totalProducts,this.currentPage=1,this.categorizeProducts(this.productData),console.log("[ProductComponent] Products reloaded:",this.productData.length)):(this.subscriptionProducts=a.filter(l=>l.product_subtype==="service_subscription"||l.product_subtype==="subscribe"),console.log("[ProductComponent] Subscriptions reloaded:",this.subscriptionProducts.length)),this.isRefreshing=!1,this.cdr.detectChanges(),console.log("[ProductComponent] Page refresh completed")},error:o=>{console.error("[ProductComponent] Error during page refresh:",o),this.isRefreshing=!1,this.cdr.detectChanges()}})}onProductSaved(){console.log("[ProductComponent] onProductSaved called - starting refresh"),this.isRefreshing=!0,this.cdr.detectChanges(),setTimeout(()=>{this.closeAddProductDialog(),this.toast.success("Success","Changes saved successfully."),this.refreshProductList()},100)}onSearchChange(t){this.searchSubject$.next(t)}getProductImage(t){return t.product_image_url?.[0]||"assets/images/products/product.jpg"}onImageError(t){t.target.src="assets/images/products/product.jpg"}getCategoryIcon(t){return t.categoryIcon||"assets/images/placeholder.jpg"}getCategoryIconFromName(t){let e=this.categorizedProducts.find(o=>o.categoryName===t);return e?.categoryIcon?e.categoryIcon:this.allCategories.find(o=>o.name===t)?.img||null}get hasSubcategories(){return this.selectedCategory!==null&&this.selectedCategoryWithChildren?.children!==void 0&&(this.selectedCategoryWithChildren.children?.length??0)>0}get subcategories(){return this.selectedCategoryWithChildren?.children||[]}get hasNonSubscriptionProducts(){return this.productData.some(t=>t.product_type==="service"||t.product_type==="product")}truncateText(t,e){if(!t)return"";let n=t.trim();return n.length<=e?n:n.substring(0,e)+"..."}canShowProducts(){return this.businessTypes.length===0||this.businessTypes.includes("on_demand")}canShowSubscriptions(){return this.businessTypes.length===0||this.businessTypes.includes("subscription")}static \u0275fac=function(e){return new(e||i)(w(It),w(kn),w(te),w(pe),w(hn),w(G),w(le),w(Ct),w(In),w(li))};static \u0275cmp=R({type:i,selectors:[["app-product"]],viewQuery:function(e,n){if(e&1&&nt($C,5),e&2){let o;it(o=ot())&&(n.productsSectionRef=o.first)}},hostBindings:function(e,n){e&1&&v("scroll",function(){return n.onWindowScroll()},!1,Is)},features:[_n([pe])],decls:13,vars:11,consts:[["productsSection",""],[3,"title","icon","showBack"],["class","tab-switcher-container",4,"ngIf"],["class","page-refresh-loader",4,"ngIf"],[1,"main-layout"],["class","categories-sidebar",4,"ngIf"],[1,"products-section"],["class","ondemand-content",4,"ngIf"],[4,"ngIf"],["title","Add New Item",1,"floating-add-btn",3,"click"],[1,"pi","pi-plus"],["class","dialog-overlay",4,"ngIf"],[1,"tab-switcher-container"],[1,"tab-switcher"],[1,"tab",3,"click"],[1,"tab-slider"],[1,"page-refresh-loader"],[1,"loader-content"],[1,"pi","pi-spin","pi-spinner"],[1,"categories-sidebar"],["class","category-item",3,"active","click",4,"ngFor","ngForOf"],[1,"category-item",3,"click"],[1,"category-icon"],[3,"src","alt",4,"ngIf"],["class","pi pi-box",4,"ngIf"],[1,"category-name"],[3,"src","alt"],[1,"pi","pi-box"],[1,"ondemand-content"],[1,"search-wrapper"],["pInputText","","type","search",1,"search-input",3,"ngModelChange","input","placeholder","ngModel"],["class","pi pi-times clear-search-icon","title","Clear search",3,"click",4,"ngIf"],["class","subcategories-wrapper",4,"ngIf"],["class","loading-placeholder",4,"ngIf"],["class","products-grid",4,"ngIf"],["class","loading-more",4,"ngIf"],["class","end-of-list",4,"ngIf"],["class","empty-state",4,"ngIf"],["title","Clear search",1,"pi","pi-times","clear-search-icon",3,"click"],[1,"subcategories-wrapper"],[1,"subcategory-scroll-container"],["tooltipPosition","top","styleClass","cursor-pointer",3,"value","severity","pTooltip","click",4,"ngFor","ngForOf"],["tooltipPosition","top","styleClass","cursor-pointer",3,"click","value","severity","pTooltip"],[1,"loading-placeholder"],[1,"products-grid"],["class","product-card",4,"ngFor","ngForOf"],[1,"product-card"],[1,"product-image"],[3,"error","src","alt"],["title","Edit Product",1,"edit-icon",3,"click"],[1,"pi","pi-pencil"],[1,"product-info"],[1,"product-name"],[1,"price-info"],[1,"action-buttons"],["title","Delete Product",1,"delete-btn",3,"click"],[1,"pi","pi-trash"],[1,"availability-btn",3,"click"],[1,"loading-more"],[1,"end-of-list"],[1,"empty-state"],[1,"empty-icon"],["title","Edit Subscription",1,"edit-icon",3,"click"],["title","Delete Subscription",1,"delete-btn",3,"click"],[1,"dialog-overlay"],[1,"dialog-content",3,"click"],[1,"dialog-header"],[1,"close-btn",3,"click"],[1,"pi","pi-times"],[1,"dialog-body"],[3,"saveSuccess","cancel","editFormValues"]],template:function(e,n){if(e&1){let o=E();h(0,"app-title-card",1),y(1,YC,9,12,"div",2),h(2,"p-confirmDialog"),y(3,KC,6,3,"div",3),s(4,"div",4),y(5,ZC,2,1,"div",5),s(6,"div",6,0),y(8,dv,11,11,"div",7)(9,uv,4,3,"div",8),c()(),s(10,"button",9),v("click",function(){return b(o),C(n.openAddProductDialog())}),h(11,"i",10),c(),y(12,fv,9,3,"div",11)}e&2&&(g("title","Product")("icon","shopping_bag_outline")("showBack",!0),d(),g("ngIf",n.canShowProducts()&&n.canShowSubscriptions()),d(2),g("ngIf",n.isRefreshing),d(),j("no-sidebar",n.selectedTab==="subscription"),d(),g("ngIf",n.selectedTab==="ondemand"),d(3),g("ngIf",n.selectedTab==="ondemand"),d(),g("ngIf",n.selectedTab==="subscription"),d(3),g("ngIf",n.showAddDialog))},dependencies:[ee,W,be,bc,cc,Z,Y,_e,Dc,he,Ur,ce],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100vh;overflow:hidden}.tab-switcher-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;padding:16px;margin:5px 0;background-color:#fff;border-bottom:1px solid #e5e7eb;flex-shrink:0}.tab-switcher[_ngcontent-%COMP%]{position:relative;display:inline-flex;background:#f1f5f9;border-radius:14px;padding:4px;box-shadow:0 2px 8px #0000000a;width:auto;min-width:320px;max-width:400px}.tab-switcher[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{position:relative;flex:1;padding:10px 28px;font-size:14px;font-weight:600;color:#64748b;background:transparent;border:none;cursor:pointer;transition:color .3s ease;z-index:2;border-radius:10px;-webkit-user-select:none;user-select:none;white-space:nowrap;outline:none}.tab-switcher[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:hover{color:#475569}.tab-switcher[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{color:#7b1fa2}.tab-switcher[_ngcontent-%COMP%]   .tab-slider[_ngcontent-%COMP%]{position:absolute;top:4px;left:4px;width:calc(50% - 4px);height:calc(100% - 8px);background:#fff;border-radius:10px;box-shadow:0 2px 12px #7b1fa226;transition:transform .3s cubic-bezier(.4,0,.2,1);z-index:1}.tab-switcher[_ngcontent-%COMP%]   .tab-slider.subscription-active[_ngcontent-%COMP%]{transform:translate(calc(100% + 4px))}.main-layout[_ngcontent-%COMP%]{display:flex;flex:1;overflow:hidden;background-color:#f9fafb}.main-layout.no-sidebar[_ngcontent-%COMP%]   .products-section[_ngcontent-%COMP%]{width:100%}.categories-sidebar[_ngcontent-%COMP%]{width:100px;background:#fff;border-right:1px solid #e5e7eb;overflow-y:auto;flex-shrink:0;padding-top:8px}.categories-sidebar[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:10px 6px;cursor:pointer;border-bottom:1px solid #f3f4f6;min-height:85px}.categories-sidebar[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]:hover{background-color:#f9fafb}.categories-sidebar[_ngcontent-%COMP%]   .category-item.active[_ngcontent-%COMP%]{background-color:#f3e5f5;border-right:3px solid #7b1fa2}.categories-sidebar[_ngcontent-%COMP%]   .category-item.active[_ngcontent-%COMP%]   .category-name[_ngcontent-%COMP%]{color:#7b1fa2;font-weight:700}.categories-sidebar[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]{width:42px;height:42px;border-radius:50%;margin-bottom:6px;overflow:hidden;border:1px solid #f3f4f6;display:flex;align-items:center;justify-content:center}.categories-sidebar[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.categories-sidebar[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;color:#9ca3af}.categories-sidebar[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-name[_ngcontent-%COMP%]{font-size:11px;text-align:center;color:#374151;font-weight:700;line-height:1.3;word-break:break-word}.products-section[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:0 15px 15px;display:flex;flex-direction:column}.search-wrapper[_ngcontent-%COMP%]{position:sticky;top:-1px;z-index:5;background:#f9fafb;padding:12px 0;margin-top:-1px;margin-bottom:16px;border-bottom:1px solid #e5e7eb;flex-shrink:0}.search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:12px 40px 12px 16px;border:1px solid #e5e7eb;border-radius:12px;font-size:14px;transition:all .2s ease;background:#fff}.search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#7b1fa2;box-shadow:0 0 0 3px #7b1fa21a}.search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.search-wrapper[_ngcontent-%COMP%]   .clear-search-icon[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);cursor:pointer;color:#9ca3af;font-size:16px;transition:color .2s;z-index:6}.search-wrapper[_ngcontent-%COMP%]   .clear-search-icon[_ngcontent-%COMP%]:hover{color:#6b7280}.subcategories-wrapper[_ngcontent-%COMP%]{display:flex;flex-shrink:0;margin-bottom:16px;position:sticky;top:60px;z-index:4;background:#f9fafb;padding:12px 0;border-bottom:1px solid #e5e7eb}.subcategories-wrapper[_ngcontent-%COMP%]   .subcategory-scroll-container[_ngcontent-%COMP%]{display:flex;overflow-x:auto;overflow-y:hidden;gap:8px;flex:1;align-items:center;-ms-overflow-style:none;scrollbar-width:none;scroll-behavior:smooth}.subcategories-wrapper[_ngcontent-%COMP%]   .subcategory-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.subcategories-wrapper[_ngcontent-%COMP%]     p-tag{flex-shrink:0;cursor:pointer}.subcategories-wrapper[_ngcontent-%COMP%]     p-tag .p-tag{cursor:pointer;transition:all .2s;white-space:nowrap}.subcategories-wrapper[_ngcontent-%COMP%]     p-tag .p-tag:hover{opacity:.8;transform:translateY(-1px)}.subcategories-wrapper[_ngcontent-%COMP%]     p-tag .p-tag.p-tag-secondary{background-color:#f5e5ff;color:#323743;font-weight:400}.ondemand-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;overflow-y:auto}.products-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.product-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px #00000014;transition:transform .2s ease,box-shadow .2s ease}.product-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001f}.product-card[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{position:relative;width:100%;height:140px;overflow:hidden;background-color:#f9fafb}.product-card[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.product-card[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]   .edit-icon[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;width:28px;height:28px;border-radius:50%;background:#fffffff2;color:#7b1fa2;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:inset 0 2px 4px #00000026,0 1px 2px #0000001a;transition:all .2s ease;z-index:2}.product-card[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]   .edit-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:13px}.product-card[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]   .edit-icon[_ngcontent-%COMP%]:hover{background:#fff;box-shadow:inset 0 3px 6px #0003,0 1px 3px #00000026;color:#6a1b9a}.product-card[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]   .edit-icon[_ngcontent-%COMP%]:active{transform:scale(.95);box-shadow:inset 0 4px 8px #00000040}.product-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]{padding:14px}.product-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-size:15px;font-weight:500;color:#1f2937;margin:0 0 6px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;text-align:center}.product-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .price-info[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#7b1fa2;margin-bottom:10px;text-align:center}.product-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.product-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{background-color:transparent;border:none;cursor:pointer;padding:4px;display:flex;align-items:center;justify-content:center;transition:all .2s ease;flex-shrink:0}.product-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px;color:#ef4444}.product-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#dc2626;transform:scale(1.15)}.product-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:active   i[_ngcontent-%COMP%]{transform:scale(.95)}.product-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .availability-btn[_ngcontent-%COMP%]{flex:1;padding:6px 10px;border:none;border-radius:6px;font-size:12px;font-weight:600;cursor:pointer;transition:all .3s ease;text-transform:capitalize;text-align:center;display:flex;align-items:center;justify-content:center;line-height:1}.product-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .availability-btn.available[_ngcontent-%COMP%]{background-color:#10b981;color:#fff}.product-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .availability-btn.available[_ngcontent-%COMP%]:hover{background-color:#059669}.product-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .availability-btn.unavailable[_ngcontent-%COMP%]{background-color:#9ca3af;color:#fff}.product-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .availability-btn.unavailable[_ngcontent-%COMP%]:hover{background-color:#6b7280}.product-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .availability-btn[_ngcontent-%COMP%]:active{transform:scale(.98)}.loading-placeholder[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:300px}.loading-placeholder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px;color:#6b7280}.loading-more[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:20px;margin:20px 0}.loading-more[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;color:#7b1fa2;margin-bottom:8px}.loading-more[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin:0}.end-of-list[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:20px;margin:20px 0}.end-of-list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#9ca3af;margin:0;font-style:italic}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:400px;text-align:center}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{width:70px;height:70px;border-radius:50%;background-color:#f3f4f6;display:flex;align-items:center;justify-content:center;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:36px;color:#9ca3af}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#374151;margin:0 0 8px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin:0}.floating-add-btn[_ngcontent-%COMP%]{position:fixed;right:30px;bottom:30px;width:56px;height:56px;border-radius:50%;background:linear-gradient(135deg,#7b1fa2,#9c27b0);color:#fff;border:none;box-shadow:0 4px 12px #7b1fa266;cursor:pointer;display:flex;align-items:center;justify-content:center;z-index:1050;transition:all .3s cubic-bezier(.34,1.56,.64,1)}.floating-add-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px}.floating-add-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 6px 20px #7b1fa280}.floating-add-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.dialog-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0009;display:flex;align-items:center;justify-content:center;z-index:2000;padding:20px}.dialog-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;max-width:500px;width:100%;max-height:90vh;display:flex;flex-direction:column;box-shadow:0 10px 30px #0003}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;border-bottom:1px solid #e5e7eb}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin:0}.dialog-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;font-size:20px;color:#9ca3af;padding:4px}.dialog-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#374151}.dialog-body[_ngcontent-%COMP%]{padding:24px;overflow-y:auto}.page-refresh-loader[_ngcontent-%COMP%]{position:fixed;inset:0;background:#fffffff2;display:flex;align-items:center;justify-content:center;z-index:3000;backdrop-filter:blur(4px);animation:_ngcontent-%COMP%_fadeIn .2s ease-in-out}.page-refresh-loader[_ngcontent-%COMP%]   .loader-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;background:#fff;border-radius:16px;box-shadow:0 10px 40px #0000001a}.page-refresh-loader[_ngcontent-%COMP%]   .loader-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;color:#7b1fa2;margin-bottom:16px}.page-refresh-loader[_ngcontent-%COMP%]   .loader-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#374151;margin:0}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@media (max-width: 480px){.tab-switcher-container[_ngcontent-%COMP%]{padding:16px 8px}.tab-switcher[_ngcontent-%COMP%]{min-width:calc(100vw - 32px);max-width:100%}.tab-switcher[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{padding:10px 20px;font-size:13px}}"]})};function _v(i,t){i&1&&(s(0,"div",11),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"member.name_required")," "))}function hv(i,t){i&1&&(s(0,"div",11),p(1," A group with this name already exists "),c())}function bv(i,t){i&1&&(s(0,"div",12),p(1," Checking availability... "),c())}function Cv(i,t){i&1&&(s(0,"div",11),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"group.maximum_limit_required")," "))}function vv(i,t){i&1&&(s(0,"div",11),p(1),M(2,"translate"),c()),i&2&&(d(),T(" ",O(2,1,"group.order_required")," "))}var qr=class i{constructor(t,e,n,o){this.fb=t;this.groupSrv=e;this.authServ=n;this.toast=o;this.groupForm=this.fb.group({group_name:["",[A.required],[this.duplicateGroupNameValidator.bind(this)]],max_limit:["",[A.required]],priority:["",[A.required]]})}groupForm;editFormValues;saveSuccess=new Ee;onCancelTrigger=new Ee;formExpanded=!1;submitBtnText="Add";ngOnChanges(t){t.editFormValues&&t.editFormValues.currentValue!=null&&this.setEditFormValue()}setEditFormValue(){this.submitBtnText="Update",this.groupForm.controls.group_name?.setValue(this.editFormValues?.group_name),this.groupForm.controls.max_limit?.setValue(this.editFormValues?.max_limit),this.groupForm.controls.priority?.setValue(this.editFormValues?.priority),this.formExpanded=!0}duplicateGroupNameValidator(t){if(!t.value||t.value.trim()==="")return De(null);let e=this.authServ.getSelectedProviderId(),n=this.editFormValues?.group_id;return De(t.value).pipe(Xt(500),Qt(),so(o=>this.groupSrv.checkGroupNameExists(o,e,n)),Kt(o=>o?{duplicateGroupName:!0}:null),qe(()=>De(null)))}onSubmit(){if(this.groupForm.valid){let t=this.editFormValues?.group_id,e=this.groupForm.value;e.provider_id=this.authServ.getSelectedProviderId(),this.groupSrv.createOrUpdate(e,t).subscribe({next:n=>{this.saveSuccess.emit(n),this.editFormValues=void 0,this.groupForm.reset(),this.formExpanded=!1,this.toast.success("Success","Group saved successfully")},error:n=>{console.error("Error saving group:",n),this.toast.error("Error","Failed to save group. Please try again.")}})}}buttonClicked(t){t.buttonType===1?this.onSubmit():t.buttonType===2&&this.onCancel()}onCancel(){this.submitBtnText=="Add"?(this.groupForm.reset(),this.formExpanded=!0):(this.groupForm.reset(),this.formExpanded=!1)}static \u0275fac=function(e){return new(e||i)(w(ue),w(Sn),w(G),w(te))};static \u0275cmp=R({type:i,selectors:[["add-group"]],inputs:{editFormValues:"editFormValues"},outputs:{saveSuccess:"saveSuccess",onCancelTrigger:"onCancelTrigger"},features:[Ze],decls:22,vars:20,consts:[[3,"buttonEventTriggered","compName","title","inputForm","isExpanded","submitBtnText"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","name"],["id","name","type","text","placeholder","Name","formControlName","group_name"],["class","error-message",4,"ngIf"],["class","checking-message",4,"ngIf"],["for","maximumLimit"],["id","maximumLimit","type","text","placeholder","Maximum Limit","formControlName","max_limit"],["for","priority"],["id","priority","type","text","placeholder","order","formControlName","priority"],[1,"error-message"],[1,"checking-message"]],template:function(e,n){if(e&1&&(s(0,"form-template",0),v("buttonEventTriggered",function(r){return n.buttonClicked(r)}),s(1,"form",1),v("ngSubmit",function(){return n.onSubmit()}),s(2,"div",2)(3,"label",3),p(4),M(5,"translate"),c(),h(6,"input",4),y(7,_v,3,3,"div",5)(8,hv,2,0,"div",5)(9,bv,2,0,"div",6),c(),s(10,"div",2)(11,"label",7),p(12),M(13,"translate"),c(),h(14,"input",8),y(15,Cv,3,3,"div",5),c(),s(16,"div",2)(17,"label",9),p(18),M(19,"translate"),c(),h(20,"input",10),y(21,vv,3,3,"div",5),c()()()),e&2){let o,r,a,l,m;g("compName","add-group")("title","Add Group")("inputForm",n.groupForm)("isExpanded",n.formExpanded)("submitBtnText",n.submitBtnText),d(),g("formGroup",n.groupForm),d(3),T("",O(5,14,"profile.name"),":"),d(3),g("ngIf",((o=n.groupForm.get("group_name"))==null?null:o.hasError("required"))&&(((o=n.groupForm.get("group_name"))==null?null:o.dirty)||((o=n.groupForm.get("group_name"))==null?null:o.touched))),d(),g("ngIf",((r=n.groupForm.get("group_name"))==null?null:r.hasError("duplicateGroupName"))&&!((r=n.groupForm.get("group_name"))!=null&&r.hasError("required"))&&((r=n.groupForm.get("group_name"))==null?null:r.dirty)),d(),g("ngIf",((a=n.groupForm.get("group_name"))==null?null:a.pending)&&((a=n.groupForm.get("group_name"))==null?null:a.value)),d(3),T("",O(13,16,"group.maximum_limit"),":"),d(3),g("ngIf",((l=n.groupForm.get("max_limit"))==null?null:l.invalid)&&((l=n.groupForm.get("max_limit"))==null?null:l.touched)),d(3),S(O(19,18,"group.order")),d(3),g("ngIf",((m=n.groupForm.get("priority"))==null?null:m.invalid)&&((m=n.groupForm.get("priority"))==null?null:m.touched))}},dependencies:[W,ye,Z,Y,fe,Me,Oe,Le,ce]})};function Pv(i,t){if(i&1){let e=E();s(0,"div",6),v("click",function(o){let r=b(e).$implicit;return _().handleActionClick(r,o),C(o.stopPropagation())}),s(1,"p-inputSwitch",7),N("ngModelChange",function(o){let r=b(e).$implicit;return z(r.enabled,o)||(r.enabled=o),C(o)}),c()()}if(i&2){let e=t.$implicit;d(),L("ngModel",e.enabled)}}var Wr=class i{constructor(t,e,n,o){this.groupSrv=t;this.authServ=e;this.confirmationService=n;this.toast=o}pageIndex=0;contentPerPage=5;total=0;search="";ngOnInit(){this.triggerGetGrp(void 0)}columns=[{displayName:"Name",displayValue:"group_name"},{displayName:"Max Limit",displayValue:"max_limit"},{displayName:"Order",displayValue:"priority"},{displayName:"Action",displayValue:"action"}];groupData=[];editGroup=void 0;edit(t){this.editGroup=t}remove(t){this.confirmDelete(t)}confirmDelete(t){this.confirmationService.confirm({message:"Are you sure you want to delete this group?",header:"Delete Group",icon:"pi pi-info-circle",acceptLabel:"Delete",rejectLabel:"Cancel",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-secondary",accept:()=>{this.groupSrv.delete(t.group_id).subscribe({next:e=>{this.triggerGetGrp(void 0),this.toast.success("Success","Group deleted successfully")},error:e=>{console.error(e),this.toast.error("Failed","Failed to delete group")}})},reject:e=>{e===Fe.REJECT||Fe.CANCEL}})}handleActionClick(t,e){e?.preventDefault(),this.groupSrv.updateGroup(t).subscribe({next:n=>{this.toast.success("Success","Group Updated successfully")},error:n=>{console.error("Error updating group:",n),this.toast.error("Error","Failed to update group. Please try again.")}})}triggerGetGrp(t){let e={};e={skip:this.pageIndex*this.contentPerPage,limit:this.contentPerPage},t&&t?.search?.trim()!==""&&(e={search:t.search.trim()}),this.groupSrv.listGroup(this.authServ.getSelectedProviderId(),e).subscribe(n=>{this.total=n.total,this.convertGroupSet(n.groups)})}convertGroupSet(t){let e=t.map(n=>H(U({},n),{id:n.group_id??0,action:"viewTemplate"}));setTimeout(()=>{this.groupData=e},200)}onPageChange(t){this.pageIndex=t,this.triggerGetGrp({search:this.search})}onContentPerPageChange(t){this.contentPerPage=t,this.pageIndex=0,this.triggerGetGrp({search:this.search})}onSearchChange(t){this.search=t,this.pageIndex=0,this.triggerGetGrp({search:t})}static \u0275fac=function(e){return new(e||i)(w(Sn),w(G),w(pe),w(te))};static \u0275cmp=R({type:i,selectors:[["app-group"]],decls:8,vars:10,consts:[["viewTemplate",""],[3,"title","icon","showBack"],[1,"card-wrapper"],[1,"card"],[3,"saveSuccess","editFormValues"],[3,"onEditTrigger","onDeleteTrigger","pageChange","searchDataChange","contentPerPageChange","dataSet","columns","totalRecords","pageIndex","contentPerPage","actionTemplate"],[1,"view",3,"click"],[3,"ngModelChange","ngModel"]],template:function(e,n){if(e&1){let o=E();h(0,"app-title-card",1),s(1,"div",2)(2,"mat-card",3)(3,"add-group",4),v("saveSuccess",function(a){return b(o),C(n.triggerGetGrp(a))}),c()()(),h(4,"p-confirmDialog"),s(5,"simple-grid",5),v("onEditTrigger",function(a){return b(o),C(n.edit(a))})("onDeleteTrigger",function(a){return b(o),C(n.remove(a))})("pageChange",function(a){return b(o),C(n.onPageChange(a))})("searchDataChange",function(a){return b(o),C(n.onSearchChange(a))})("contentPerPageChange",function(a){return b(o),C(n.onContentPerPageChange(a))}),c(),y(6,Pv,2,1,"ng-template",null,0,Pe)}if(e&2){let o=ge(7);g("title","Group")("icon","group_add")("showBack",!0),d(3),g("editFormValues",n.editGroup),d(2),g("dataSet",n.groupData)("columns",n.columns)("totalRecords",n.total)("pageIndex",n.pageIndex)("contentPerPage",n.contentPerPage)("actionTemplate",o)}},dependencies:[Re,be,ze,bt,Y,_e,he,qr],styles:["p-inputswitch>div{height:1.5rem}  .p-inputswitch.p-inputswitch-checked .p-inputswitch-slider{background-color:#5d157c!important}"]})};var Hr=class i extends on{constructor(e,n){let o=n.getSelectedProviderId(),r=i.getUrlObj(o);super(e,"order_id",r,"sales");this.authServ=n}list(){return this.setUrl(i.getUrlObj(this.authServ.getSelectedProviderId())),super.list()}static getUrlObj(e,n=0,o=10){let r=Fc({provider_id:e,skip:n,limit:o});return{create:Q.SALES.URL,update:Q.SALES.URL,list:Q.SALES.LIST+"?"+r,delete:Q.SALES.URL}}static \u0275fac=function(n){return new(n||i)(Ae($e),Ae(G))};static \u0275prov=Je({token:i,factory:i.\u0275fac,providedIn:"root"})};function Mv(i,t){if(i&1){let e=E();s(0,"div",5),v("click",function(o){let r=b(e).$implicit,a=_();return C(a.handleActionClick(r,o))}),h(1,"i",6),c()}}var $r=class i{constructor(t,e,n){this.salesService=t;this.router=e;this.backHandleService=n}ngOnInit(){this.registerBackAction(),this.triggerGetSales(void 0)}ngOnDestroy(){setTimeout(()=>{this.cleanupBackAction()},100)}registerBackAction(){let t=this.router.url;[t,t.split("?")[0],"/providers/sales"].forEach((n,o)=>{let r={id:`sales-back-action-${o}`,actionType:"navigate",backNavigationUrl:"/providers/dashboard",callback:()=>{},value:"",forPageUrl:n};this.backHandleService.backAction=this.backHandleService.backAction.filter(a=>!a.id.startsWith("sales-back-action-")||a.forPageUrl!==n),this.backHandleService.backAction.push(r)})}cleanupBackAction(){let t=this.router.url,e=this.backHandleService.backAction.length;this.backHandleService.backAction=this.backHandleService.backAction.filter(n=>!n.id.startsWith("sales-back-action-"))}columns=[{displayName:"Customer Name",displayValue:"user_id"},{displayName:"Price",displayValue:"total_amount"},{displayName:"Status",displayValue:"status"}];salesData=[];editSale;edit(t){this.editSale=t}remove(t){this.salesService.delete(t.order_id).subscribe(e=>{this.triggerGetSales(void 0)})}handleActionClick(t,e){this.salesService.update(t).subscribe(n=>{})}triggerGetSales(t){this.salesService.list().subscribe(e=>{this.convertSalesSet(e)})}convertSalesSet(t){let e=t.map(n=>H(U({},n),{id:n.order_id??0,action:"viewTemplate"}));setTimeout(()=>{this.salesData=e},200)}goToAddProduct(){this.router.navigate(["providers","add-sales"])}static \u0275fac=function(e){return new(e||i)(w(Hr),w(le),w(Ct))};static \u0275cmp=R({type:i,selectors:[["app-sales"]],decls:7,vars:5,consts:[["viewTemplate",""],[3,"title","icon","showBack"],[1,"card-wrapper"],[1,"card"],[3,"onEditTrigger","onDeleteTrigger","dataSet","columns"],[1,"view",3,"click"],[1,"pi","pi-paperclip"]],template:function(e,n){if(e&1){let o=E();h(0,"app-title-card",1),s(1,"div",2)(2,"mat-card",3),h(3,"add-sales"),c()(),s(4,"simple-grid",4),v("onEditTrigger",function(a){return b(o),C(n.edit(a))})("onDeleteTrigger",function(a){return b(o),C(n.remove(a))}),c(),y(5,Mv,2,0,"ng-template",null,0,Pe)}e&2&&(g("title","Sales")("icon","shopping_bag_outline")("showBack",!0),d(4),g("dataSet",n.salesData)("columns",n.columns))},dependencies:[Re,be,ze,Ti]})};function Ov(i,t){if(i&1){let e=E();s(0,"button",13),v("click",function(){b(e);let o=_();return C(o.clearFormName())}),p(1),M(2,"translate"),c()}i&2&&(d(),T(" ",O(2,1,"orders.clear")," "))}function wv(i,t){if(i&1){let e=E();s(0,"div",14),h(1,"input",15),M(2,"translate"),s(3,"button",16),v("click",function(){b(e);let o=_();return C(o.addNewFormName())}),p(4),M(5,"translate"),c()()}i&2&&(d(),ne("placeholder",O(2,2,"setup-reg.add_new_form_name")),d(3),T(" ",O(5,4,"actions.add")," "))}function Sv(i,t){if(i&1){let e=E();s(0,"div",17)(1,"mat-card",18)(2,"form-template",19),v("buttonEventTriggered",function(o){b(e);let r=_();return C(r.buttonClicked(o))}),s(3,"form",20)(4,"div",21)(5,"label"),p(6),M(7,"translate"),c(),h(8,"input",22),M(9,"translate"),c(),s(10,"div",21)(11,"label"),p(12),M(13,"translate"),c(),h(14,"p-dropdown",23),M(15,"translate"),c(),s(16,"div",21)(17,"label"),p(18),M(19,"translate"),c(),h(20,"p-dropdown",24),M(21,"translate"),c()()()()()}if(i&2){let e=_();d(2),g("compName","add-registration-setup-form")("title","Add Fields")("inputForm",e.tempForm)("submitBtnText","Add"),d(),g("formGroup",e.tempForm),d(3),S(O(7,13,"setup-reg.label")),d(2),ne("placeholder",O(9,15,"setup-reg.label")),d(4),S(O(13,17,"setup-reg.element")),d(2),ne("placeholder",O(15,19,"setup-reg.select_element")),g("options",e.elements),d(4),S(O(19,21,"setup-reg.display_for_user")),d(2),ne("placeholder",O(21,23,"setup-reg.select_option")),g("options",e.yesOrNoList)}}function kv(i,t){i&1&&(et(0),s(1,"div",33),h(2,"file-upload"),c(),tt())}function Iv(i,t){i&1&&h(0,"div",34)}function Tv(i,t){if(i&1){let e=E();s(0,"div",21)(1,"div",28),p(2),c(),s(3,"div",29),y(4,kv,3,0,"ng-container",30)(5,Iv,1,0,"ng-template",null,0,Pe),c(),s(7,"div",31),v("click",function(){let o=b(e).index,r=_(2);return C(r.onRemove(o))}),h(8,"i",32),c()()}if(i&2){let e=t.$implicit,n=ge(6);d(2),S(e.label_name),d(),g("ngClass",e.element_type),d(),g("ngIf",e.element_type==="image")("ngIfElse",n)}}function Ev(i,t){if(i&1){let e=E();s(0,"div",35)(1,"button",36),v("click",function(){b(e);let o=_(2);return C(o.submitRegister())}),p(2," Submit "),c()()}}function Fv(i,t){if(i&1&&(s(0,"div",17)(1,"mat-card",18)(2,"div",25),y(3,Tv,9,4,"div",26)(4,Ev,3,0,"div",27),c()()()),i&2){let e=_();d(3),g("ngForOf",e.registrationValues),d(),g("ngIf",e.registrationValues.length>0)}}var Yr=class i{constructor(t,e,n,o,r,a,l,m,u){this.fb=t;this.router=e;this.authService=n;this.setregService=o;this.translate=r;this.cdr=a;this.confirmationService=l;this.toast=m;this.dialog=u;this.registrationForm=this.fb.group({regType:[null,A.required],formName:[null],newFormName:[""]}),this.tempForm=this.fb.group({label_name:["",A.required],element_type:["",A.required],display_for_user:["",A.required]})}registrationForm;tempForm;regTypes=[{name:"User Registration",code:"user"},{name:"Employee Registration",code:"employee"},{name:"Product",code:"product"}];yesOrNoList=[{name:"Yes",code:!0},{name:"No",code:!1}];elements=[{name:"Textbox",code:"box"},{name:"Text area",code:"area"},{name:"Image",code:"image"}];columns=[{displayName:"Form Type",displayValue:"form_type"},{displayName:"Form Name",displayValue:"form_name"}];pageIndex=0;contentPerPage=dt;total=0;searchTerm="";editFormData;isRestricted=!1;registeredForms=[];formNames=[];selectedRegisteredForm;registrationValues=[];registeredFormData=[];ngOnInit(){this.translate.onLangChange.subscribe(t=>{this.cdr.detectChanges()}),this.triggerGetExp(void 0),this.checkForProviderData()}checkForProviderData(){let e=this.router.getCurrentNavigation()?.extras?.state||history.state;if(e&&e.editMode&&e.providerData){let n=e.providerData,o=this.authService.getSelectedProviderId(),r=this.regTypes[0];this.registrationForm.get("regType")?.setValue(r),this.onRegTypeChange(),setTimeout(()=>{let a=this.formNames.find(l=>l.toLowerCase().includes(n.display_name?.toLowerCase())||l.toLowerCase().includes(n.business_name?.toLowerCase()));a?(this.registrationForm.get("formName")?.setValue(a),this.onFormNameChange()):this.registrationForm.get("newFormName")?.setValue(n.display_name)},500)}}onRegTypeChange(){let t=this.registrationForm.get("regType")?.value;if(!t)return;this.registrationForm.get("formName")?.reset(),this.registrationForm.get("newFormName")?.reset(),this.selectedRegisteredForm=void 0,this.registrationValues=[];let e=this.authService.getSelectedProviderId();this.setregService.getRegisteredForm(t.code,e).subscribe({next:n=>{this.registeredForms=n||[],this.formNames=this.registeredForms.map(r=>r.form_name),(t.code==="user"||t.code==="employee")&&this.registeredForms.length>=1?this.isRestricted=!0:this.isRestricted=!1},error:n=>{console.error("Error loading forms:",n),this.registeredForms=[],this.formNames=[]}})}onFormNameChange(){let t=this.registrationForm.get("formName")?.value;this.selectedRegisteredForm=this.registeredForms.find(e=>e.form_name===t),this.registrationValues=this.selectedRegisteredForm?.form_data[0]?.elements||[]}addNewFormName(){if(this.isRestricted){this.toast.error("Error","Action restricted. Only one form allowed for this type.");return}let t=this.registrationForm.get("newFormName")?.value?.trim();if(!t){this.toast.error("Error","Form name cannot be empty");return}if(this.formNames.includes(t)){this.toast.error("Error","Form name already exists");return}let e=this.registrationForm.get("regType")?.value;if(!e){this.toast.error("Error","Please select Registration Type first");return}if((e.code==="user"||e.code==="employee")&&this.registeredForms.length>0){this.toast.error("Error",`Only one ${e.name} is allowed`);return}this.formNames=[...this.formNames,t],this.registrationForm.get("formName")?.setValue(t),this.registrationForm.get("newFormName")?.reset(),this.selectedRegisteredForm=void 0,this.registrationValues=[],this.cdr.markForCheck(),this.toast.success("Success","Form name added successfully")}onSubmit(){if(this.tempForm.valid){let t=U({},this.tempForm.value);this.registrationValues.push(t),this.tempForm.reset()}}buttonClicked(t){t.buttonType===1?this.onSubmit():t.buttonType===2&&this.onCancel()}onCancel(){this.tempForm.reset(),this.registrationForm.reset(),this.registrationValues=[],this.selectedRegisteredForm=void 0,this.editFormData=void 0,this.isRestricted=!1,this.formNames=[],this.registeredForms=[]}onRemove(t){this.registrationValues.splice(t,1)}submitRegister(){let t=this.authService.getSelectedProviderId(),e=this.registrationForm.get("regType")?.value,n=this.registrationForm.get("formName")?.value;if(!e||!n){console.error("Registration Type and Form Name are required");return}if(this.isRestricted&&!this.selectedRegisteredForm){this.toast.error("Error","Action restricted. Cannot create new form for this type.");return}if(this.selectedRegisteredForm)this.selectedRegisteredForm.form_data[0].elements=this.registrationValues,this.selectedRegisteredForm.form_type=e.code,this.setregService.createOrUpdate(this.selectedRegisteredForm,"update").subscribe({next:()=>{this.onRegTypeChange(),this.triggerGetExp(void 0),this.toast.success("Success","Form updated successfully")},error:o=>{console.error("Update failed:",o),this.toast.error("Failed","Failed to update form")}});else{if((e.code==="user"||e.code==="employee")&&this.registeredForms.length>=1){this.toast.error("Error",`Only one ${e.name} is allowed`);return}let r={form_data:[{elements:this.registrationValues}],form_type:e.code,provider_id:t,form_name:n};this.setregService.createOrUpdate(r,"create").subscribe({next:()=>{this.onRegTypeChange(),this.triggerGetExp(void 0),this.toast.success("Success","Form created successfully")},error:a=>{console.error("Create failed:",a),this.toast.error("Failed","Failed to create form")}})}}clearFormName(){this.registrationForm.get("formName")?.reset(),this.selectedRegisteredForm=void 0,this.registrationValues=[]}triggerGetExp(t){let e={skip:this.pageIndex*this.contentPerPage,limit:this.contentPerPage};this.searchTerm&&this.searchTerm.trim()!==""&&(e.search=this.searchTerm.trim());let n=this.authService.getSelectedProviderId();this.setregService.listFormType(n,e).subscribe({next:o=>{let r=Array.isArray(o),a=r?o:o?.data||o?.items||[],l=r?a.slice(this.pageIndex*this.contentPerPage,this.pageIndex*this.contentPerPage+this.contentPerPage):a;this.total=(r?a.length:o?.total??o?.count??a.length)||0,this.convertDataSet(l)},error:o=>{console.error("Error fetching forms:",o)}})}convertDataSet(t){let e=t.map(n=>H(U({},n),{id:n.registration_id??0}));setTimeout(()=>{this.registeredFormData=e},200)}handlePageChange(t){}onPageChange(t){this.pageIndex=t,this.triggerGetExp(void 0)}onContentPerPageChange(t){this.contentPerPage=t,this.pageIndex=0,this.triggerGetExp(void 0)}onSearchChange(t){this.searchTerm=t,this.pageIndex=0,this.triggerGetExp(void 0)}edit(t){this.editFormData=t;let e=this.regTypes.find(n=>n.code===t.form_type);this.registrationForm.get("regType")?.setValue(e),this.onRegTypeChange(),setTimeout(()=>{this.formNames.includes(t.form_name)||this.formNames.push(t.form_name),this.registrationForm.get("formName")?.setValue(t.form_name),this.selectedRegisteredForm=t,this.registrationValues=t.form_data[0]?.elements?[...t.form_data[0].elements]:[]},100)}remove(t){this.confirmDelete(t)}confirmDelete(t){this.confirmationService.confirm({message:"Are you sure you want to delete this Setup?",header:"Delete",icon:"pi pi-info-circle",acceptLabel:"Delete",rejectLabel:"Cancel",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-secondary",accept:()=>{this.setregService.delete(t.registration_id).subscribe({next:e=>{this.triggerGetExp(void 0),this.toast.success("Success","Deleted successfully")},error:e=>{console.error(e),this.toast.error("Failed","Failed to delete")}})},reject:e=>{e===Fe.REJECT||Fe.CANCEL}})}static \u0275fac=function(e){return new(e||i)(w(ue),w(le),w(G),w(yn),w(li),w(hn),w(pe),w(te),w(At))};static \u0275cmp=R({type:i,selectors:[["setup-registration"]],decls:21,vars:28,consts:[["defaultElement",""],[3,"title","icon","showBack"],[1,"registration-setup",3,"formGroup"],[1,"form-group","reg-type"],["for","reg-type"],["id","reg-type","optionLabel","name","formControlName","regType","styleClass","full-width-dropdown",1,"custom-dropdown",3,"onChange","options","placeholder"],["for","formName"],[1,"dropdown-with-clear","flex","items-center","gap-2"],["formControlName","formName",1,"custom-dropdown","full-width",3,"onChange","options","placeholder"],["type","button","class","clear-btn",3,"click",4,"ngIf"],["class","add-new-form mt-4 flex items-center gap-2",4,"ngIf"],["class","card-wrapper",4,"ngIf"],[3,"onEditTrigger","onDeleteTrigger","pageChange","searchDataChange","contentPerPageChange","dataSet","columns","showDateFilter","totalRecords","pageIndex","contentPerPage"],["type","button",1,"clear-btn",3,"click"],[1,"add-new-form","mt-4","flex","items-center","gap-2"],["type","text","formControlName","newFormName",1,"full-width","border",3,"placeholder"],["type","button",3,"click"],[1,"card-wrapper"],[1,"card"],[3,"buttonEventTriggered","compName","title","inputForm","submitBtnText"],[3,"formGroup"],[1,"form-group"],["type","text","formControlName","label_name",1,"form-input",3,"placeholder"],["formControlName","element_type","optionLabel","name","optionValue","code",1,"custom-dropdown",3,"options","placeholder"],["formControlName","display_for_user","optionLabel","name","optionValue","code",1,"custom-dropdown",3,"options","placeholder"],[1,"preview"],["class","form-group",4,"ngFor","ngForOf"],["class","button-container",4,"ngIf"],[1,"label"],[1,"element",3,"ngClass"],[4,"ngIf","ngIfElse"],[1,"close-icon",3,"click"],[1,"pi","pi-times-circle"],[1,"file-upload-container","relative","z-10","pointer-events-none"],[1,"placeholder"],[1,"button-container"],[1,"submit-button",3,"click"]],template:function(e,n){if(e&1&&(h(0,"app-title-card",1),s(1,"div",2)(2,"div",3)(3,"label",4),p(4),M(5,"translate"),c(),s(6,"p-dropdown",5),M(7,"translate"),v("onChange",function(){return n.onRegTypeChange()}),c()(),s(8,"div",3)(9,"label",6),p(10),M(11,"translate"),c(),s(12,"div",7)(13,"p-dropdown",8),M(14,"translate"),v("onChange",function(){return n.onFormNameChange()}),c(),y(15,Ov,3,3,"button",9),c(),y(16,wv,6,6,"div",10),c(),y(17,Sv,22,25,"div",11)(18,Fv,5,2,"div",11),c(),s(19,"simple-grid",12),v("onEditTrigger",function(r){return n.edit(r)})("onDeleteTrigger",function(r){return n.remove(r)})("pageChange",function(r){return n.onPageChange(r)})("searchDataChange",function(r){return n.onSearchChange(r)})("contentPerPageChange",function(r){return n.onContentPerPageChange(r)}),c(),h(20,"p-confirmDialog")),e&2){let o,r,a;g("title","Setup Registration")("icon","group")("showBack",!0),d(),g("formGroup",n.registrationForm),d(3),S(O(5,20,"setup-reg.registration_type")),d(2),ne("placeholder",O(7,22,"setup-reg.select_registration_type")),g("options",n.regTypes),d(4),S(O(11,24,"setup-reg.form_name")),d(3),ne("placeholder",O(14,26,"setup-reg.select_form_name")),g("options",n.formNames),d(2),g("ngIf",(o=n.registrationForm.get("formName"))==null?null:o.value),d(),g("ngIf",!n.isRestricted),d(),g("ngIf",(r=n.registrationForm.get("formName"))==null?null:r.value),d(),g("ngIf",(a=n.registrationForm.get("formName"))==null?null:a.value),d(),g("dataSet",n.registeredFormData)("columns",n.columns)("showDateFilter",!1)("totalRecords",n.total)("pageIndex",n.pageIndex)("contentPerPage",n.contentPerPage)}},dependencies:[Se,ee,W,Re,ht,be,ze,Ve,ye,Z,Y,fe,he,Me,Oe,Le,ce],styles:['@charset "UTF-8";.preview[_ngcontent-%COMP%]{padding:.5rem}.preview[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{position:relative;margin-top:1rem}.preview[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#4f126a;font-weight:700}.preview[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .element[_ngcontent-%COMP%]{color:#bdc1ca;background:#f9f2fd;margin-top:.3rem;min-height:2rem}.preview[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .element[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{padding-left:.5rem}.preview[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .element.area[_ngcontent-%COMP%]{height:5rem;border:1px solid;border-radius:5px;padding:.5rem}.preview[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .element.image[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;color:#9c27b0;font-size:1.2rem}.preview[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .element.image[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{font-size:3rem}.preview[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{position:absolute;right:0;top:0;color:red}.preview[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:1rem;margin-bottom:1rem}.preview[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:2.25Rem;min-width:1rem;padding:0 1rem;border-radius:5px}.preview[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button.submit-button[_ngcontent-%COMP%]{background-color:#5d157c;color:#fff}  .full-width-dropdown{width:100%!important}  .full-width-dropdown .p-dropdown{width:100%!important}  .full-width-dropdown>span{padding:.5rem}.form-group[_ngcontent-%COMP%]{font-size:.875rem;color:#4f126a;display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:.5rem}.reg-type[_ngcontent-%COMP%]{margin:1rem}  .p-dropdown{width:100%!important}.full-width[_ngcontent-%COMP%]{width:100%!important}.border[_ngcontent-%COMP%]{border:1px solid #5d157c;padding:.5rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-size:14px;font-weight:500;color:#333;letter-spacing:.3px}.form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;font-size:14px;color:#333;background-color:#fff;border:1px solid #e0e0e0;border-radius:8px;transition:all .3s ease;box-shadow:0 1px 3px #0000000d}.form-input[_ngcontent-%COMP%]::placeholder, .form-textarea[_ngcontent-%COMP%]::placeholder{color:#999;opacity:1}.form-input[_ngcontent-%COMP%]:hover, .form-textarea[_ngcontent-%COMP%]:hover{border-color:#a080c0;box-shadow:0 2px 6px #a080c026}.form-input[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#a080c0;box-shadow:0 0 0 3px #a080c01a}.form-input[_ngcontent-%COMP%]:disabled, .form-textarea[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;cursor:not-allowed;opacity:.6}.form-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px;font-family:inherit;line-height:1.5}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{appearance:textfield;-moz-appearance:textfield}.error-message[_ngcontent-%COMP%]{margin-top:.5rem;font-size:12px;color:#dc3545;display:flex;align-items:center}.error-message[_ngcontent-%COMP%]:before{content:"\\26a0";margin-right:.25rem}']})};function Dv(i,t){if(i&1&&(s(0,"div",10)(1,"span",11),p(2),c()()),i&2){let e=t.$implicit;d(),g("title",e.group_name),d(),S(e.group_name)}}function Av(i,t){if(i&1&&(s(0,"div",12)(1,"span",11),p(2),c()()),i&2){let e=t.$implicit;d(),g("title",e.group_name),d(),S(e.group_name)}}function Vv(i,t){i&1&&(s(0,"div",13),h(1,"i",14),s(2,"span"),p(3,"Select the group to see plan wise members"),c()())}function Rv(i,t){if(i&1&&(s(0,"span",30),p(1),c()),i&2){let e=t.$implicit,n=_(3);g("title",e.name),d(),S(n.truncateText(e.name,40))}}function Lv(i,t){if(i&1&&(s(0,"span",30),p(1),c()),i&2){let e=t.$implicit,n=_(3);g("title",e.name),d(),S(n.truncateText(e.name,40))}}function zv(i,t){if(i&1){let e=E();s(0,"div",24)(1,"div",25),h(2,"i",26),s(3,"input",27),N("ngModelChange",function(o){b(e);let r=_(2);return z(r.searchQuery,o)||(r.searchQuery=o),C(o)}),v("input",function(){b(e);let o=_(2);return C(o.onSearchChange())}),c()(),s(4,"div",28)(5,"p-dropdown",29),N("ngModelChange",function(o){b(e);let r=_(2);return z(r.selectedPlanFilter,o)||(r.selectedPlanFilter=o),C(o)}),v("onChange",function(){b(e);let o=_(2);return C(o.onPlanFilterChange())}),y(6,Rv,2,2,"ng-template",5)(7,Lv,2,2,"ng-template",6),c()()()}if(i&2){let e=_(2);d(3),L("ngModel",e.searchQuery),d(2),g("options",e.availablePlans),L("ngModel",e.selectedPlanFilter),g("showClear",!0)}}function Nv(i,t){i&1&&(s(0,"div",31),h(1,"div",32),s(2,"p"),p(3),M(4,"translate"),c()()),i&2&&(d(3),T(" ",O(4,1,"providerInfo.subscription.loading_subscriptions")," "))}function Bv(i,t){if(i&1){let e=E();s(0,"button",47),v("click",function(){b(e);let o=_(2).$implicit,r=_(3);return C(r.renewSubscription(o))}),h(1,"i",51),s(2,"span"),p(3,"Renew"),c()()}}function jv(i,t){if(i&1){let e=E();s(0,"button",47),v("click",function(){b(e);let o=_(2).$implicit,r=_(3);return C(r.remindSubscription(o))}),h(1,"i",52),s(2,"span"),p(3,"Remind"),c()()}}function Uv(i,t){if(i&1){let e=E();s(0,"button",47),v("click",function(){b(e);let o=_(2).$implicit,r=_(3);return C(r.payInAdvance(o))}),h(1,"i",53),s(2,"span"),p(3,"Pay in Advance"),c()()}}function Gv(i,t){if(i&1){let e=E();s(0,"button",47),v("click",function(){b(e);let o=_(2).$implicit,r=_(3);return C(r.markAsPaid(o))}),h(1,"i",54),s(2,"span"),p(3,"Mark as Paid"),c()()}}function qv(i,t){if(i&1){let e=E();s(0,"div",46),v("click",function(o){return b(e),C(o.stopPropagation())}),s(1,"button",47),v("click",function(){b(e);let o=_().$implicit,r=_(3);return C(r.viewSubscription(o))}),h(2,"i",48),s(3,"span"),p(4,"View"),c()(),s(5,"button",47),v("click",function(){b(e);let o=_().$implicit,r=_(3);return C(r.deleteSubscription(o))}),h(6,"i",49),s(7,"span"),p(8,"Delete"),c()(),y(9,Bv,4,0,"button",50)(10,jv,4,0,"button",50)(11,Uv,4,0,"button",50)(12,Gv,4,0,"button",50),c()}if(i&2){let e=_().$implicit,n=_(3);yt("top",n.menuPosition.top)("left",n.menuPosition.left),d(9),g("ngIf",e.status==="expired"),d(),g("ngIf",e.status==="expired"),d(),g("ngIf",e.status==="active"),d(),g("ngIf",e.status==="inactive")}}function Wv(i,t){if(i&1){let e=E();s(0,"tr")(1,"td",38),v("click",function(){let o=b(e).$implicit,r=_(3);return C(r.selectSubscription(o))}),p(2),c(),s(3,"td",39),v("click",function(){let o=b(e).$implicit,r=_(3);return C(r.selectSubscription(o))}),p(4),c(),s(5,"td",40),v("click",function(){let o=b(e).$implicit,r=_(3);return C(r.selectSubscription(o))}),s(6,"span",41),p(7),c()(),s(8,"td",42),v("click",function(o){return b(e),C(o.stopPropagation())}),s(9,"button",43),v("click",function(o){let r=b(e).$implicit,a=_(3);return C(a.toggleMenu(r.subscription_id,o))}),h(10,"i",44),c(),y(11,qv,13,8,"div",45),c()()}if(i&2){let e=t.$implicit,n=_(3);j("menu-open",n.openMenuId===e.subscription_id),d(2),T(" ",e.member_name," "),d(2),T(" ",n.getExpiresInText(e)," "),d(2),Mt(e.status),d(),S(e.status),d(4),g("ngIf",n.openMenuId===e.subscription_id)}}function Hv(i,t){i&1&&(s(0,"tr")(1,"td",55),p(2,"No subscriptions found."),c()())}function $v(i,t){if(i&1&&(s(0,"div",33)(1,"table",34)(2,"thead")(3,"tr")(4,"th"),p(5,"Name"),c(),s(6,"th"),p(7,"Expires In"),c(),s(8,"th"),p(9,"Status"),c(),h(10,"th",35),c()(),s(11,"tbody"),y(12,Wv,12,8,"tr",36)(13,Hv,3,0,"tr",37),c()()()),i&2){let e=_(2);d(12),g("ngForOf",e.pagedSubscriptions),d(),g("ngIf",e.pagedSubscriptions.length===0)}}function Yv(i,t){if(i&1){let e=E();s(0,"div",56)(1,"div",57)(2,"span"),p(3,"Show"),c(),s(4,"select",58),N("ngModelChange",function(o){b(e);let r=_(2);return z(r.pageSize,o)||(r.pageSize=o),C(o)}),v("ngModelChange",function(){b(e);let o=_(2);return o.page=1,C(o.updatePagedSubscriptions())}),s(5,"option",59),p(6,"5"),c(),s(7,"option",59),p(8,"10"),c(),s(9,"option",59),p(10,"20"),c()()(),s(11,"div",60)(12,"button",61),v("click",function(){b(e);let o=_(2);return C(o.changePageSubscriptions(-1))}),p(13," < "),c(),s(14,"span",62),p(15),c(),s(16,"button",61),v("click",function(){b(e);let o=_(2);return C(o.changePageSubscriptions(1))}),p(17," > "),c()()()}if(i&2){let e=_(2);d(4),L("ngModel",e.pageSize),d(),g("value",5),d(2),g("value",10),d(2),g("value",20),d(3),g("disabled",e.page===1),d(3),Qe(" Page ",e.page," of ",e.totalPages," "),d(),g("disabled",e.page===e.totalPages)}}function Kv(i,t){if(i&1){let e=E();s(0,"div",63),h(1,"i",64),s(2,"p"),p(3),M(4,"translate"),c(),s(5,"button",65),v("click",function(){b(e);let o=_(2);return C(o.showRegistrationForm=!0)}),h(6,"i",18),p(7),M(8,"translate"),c()()}i&2&&(d(3),T(" ",O(4,2,"providerInfo.subscription.no_subscriptions_found")," "),d(4),T(" ",O(8,4,"providerInfo.subscription.add_new_member")," "))}function Xv(i,t){if(i&1){let e=E();s(0,"div",15)(1,"div",16)(2,"h3"),p(3,"Members"),c(),s(4,"button",17),v("click",function(){b(e);let o=_();return C(o.showRegistrationForm=!0)}),h(5,"i",18),p(6," Add New Member "),c()(),y(7,zv,8,4,"div",19)(8,Nv,5,3,"div",20)(9,$v,14,2,"div",21)(10,Yv,18,8,"div",22)(11,Kv,9,6,"div",23),c()}if(i&2){let e=_();d(7),g("ngIf",!e.isLoadingSubscriptions),d(),g("ngIf",e.isLoadingSubscriptions),d(),g("ngIf",!e.isLoadingSubscriptions&&e.subscriptions.length>0),d(),g("ngIf",!e.isLoadingSubscriptions&&e.subscriptions.length>0),d(),g("ngIf",!e.isLoadingSubscriptions&&e.subscriptions.length===0)}}function Qv(i,t){if(i&1){let e=E();s(0,"div",66),v("click",function(){b(e);let o=_();return C(o.cancelRegistration())}),s(1,"div",67),v("click",function(o){return b(e),C(o.stopPropagation())}),s(2,"div",68)(3,"h3"),p(4),M(5,"translate"),c(),s(6,"button",69),v("click",function(){b(e);let o=_();return C(o.cancelRegistration())}),h(7,"i",70),c()(),s(8,"div",71)(9,"app-register-subscription",72),v("registerBtn",function(o){b(e);let r=_();return C(r.onRegistrationSubmit(o))}),c()()()()}if(i&2){let e=_();d(4),T(" ",O(5,6,"providerInfo.subscription.add_new_member_title")," "),d(5),g("providerId",e.providerId)("isProvider",!0)("groups",e.groups)("allPlans",e.allPlans)("selectedGroupId",e.selectedGroupId)}}function Jv(i,t){if(i&1&&(s(0,"div",76)(1,"span",77),p(2),c(),s(3,"span",78),p(4),c()()),i&2){let e=t.$implicit;d(2),T("",e.key,":"),d(2),S(e.value)}}function Zv(i,t){if(i&1&&(s(0,"div",75)(1,"h4"),p(2,"Additional Information"),c(),y(3,Jv,5,2,"div",80),M(4,"keyvalue"),c()),i&2){let e=_(2);d(3),g("ngForOf",O(4,1,e.viewingSubscription.form_data.fields))}}function e1(i,t){if(i&1){let e=E();s(0,"div",66),v("click",function(){b(e);let o=_();return C(o.closeViewModal())}),s(1,"div",73),v("click",function(o){return b(e),C(o.stopPropagation())}),s(2,"div",68)(3,"h3"),p(4,"Subscription Details"),c(),s(5,"button",69),v("click",function(){b(e);let o=_();return C(o.closeViewModal())}),h(6,"i",70),c()(),s(7,"div",71)(8,"div",74)(9,"div",75)(10,"h4"),p(11,"Member Information"),c(),s(12,"div",76)(13,"span",77),p(14,"Name:"),c(),s(15,"span",78),p(16),c()(),s(17,"div",76)(18,"span",77),p(19,"Mobile:"),c(),s(20,"span",78),p(21),c()(),s(22,"div",76)(23,"span",77),p(24,"Member ID:"),c(),s(25,"span",78),p(26),c()()(),s(27,"div",75)(28,"h4"),p(29,"Subscription Information"),c(),s(30,"div",76)(31,"span",77),p(32,"Subscription ID:"),c(),s(33,"span",78),p(34),c()(),s(35,"div",76)(36,"span",77),p(37,"Order ID:"),c(),s(38,"span",78),p(39),c()(),s(40,"div",76)(41,"span",77),p(42,"Status:"),c(),s(43,"span",41),p(44),c()(),s(45,"div",76)(46,"span",77),p(47,"Plan:"),c(),s(48,"span",78),p(49),c()()(),s(50,"div",75)(51,"h4"),p(52,"Billing Information"),c(),s(53,"div",76)(54,"span",77),p(55,"Amount Paid:"),c(),s(56,"span",78),p(57),c()(),s(58,"div",76)(59,"span",77),p(60,"Billing Type:"),c(),s(61,"span",78),p(62),c()(),s(63,"div",76)(64,"span",77),p(65,"Billing Cycle:"),c(),s(66,"span",78),p(67),c()(),s(68,"div",76)(69,"span",77),p(70,"Auto Renewal:"),c(),s(71,"span",78),p(72),c()()(),s(73,"div",75)(74,"h4"),p(75,"Dates"),c(),s(76,"div",76)(77,"span",77),p(78,"Start Date:"),c(),s(79,"span",78),p(80),M(81,"date"),c()(),s(82,"div",76)(83,"span",77),p(84,"End Date:"),c(),s(85,"span",78),p(86),M(87,"date"),c()(),s(88,"div",76)(89,"span",77),p(90,"Created:"),c(),s(91,"span",78),p(92),M(93,"date"),c()(),s(94,"div",76)(95,"span",77),p(96,"Updated:"),c(),s(97,"span",78),p(98),M(99,"date"),c()()(),y(100,Zv,5,3,"div",79),c()()()()}if(i&2){let e=_();d(16),S(e.viewingSubscription.member_name),d(5),S(e.viewingSubscription.mobile_number),d(5),S(e.viewingSubscription.member_id),d(8),S(e.viewingSubscription.subscription_id),d(5),S(e.viewingSubscription.order_id),d(4),Mt(e.viewingSubscription.status),d(),S(e.viewingSubscription.status),d(5),S(e.viewingSubscription.plan_name),d(8),T("\u20B9",e.viewingSubscription.amount_paid,""),d(5),S(e.viewingSubscription.billing_type),d(5),S(e.viewingSubscription.billing_cycle),d(5),S(e.viewingSubscription.auto_renewal?"Yes":"No"),d(8),S(gt(81,18,e.viewingSubscription.start_date,"mediumDate")),d(6),S(gt(87,21,e.viewingSubscription.end_date,"mediumDate")),d(6),S(gt(93,24,e.viewingSubscription.created_at,"medium")),d(6),S(gt(99,27,e.viewingSubscription.updated_at,"medium")),d(2),g("ngIf",e.viewingSubscription.form_data==null?null:e.viewingSubscription.form_data.fields)}}var Kr=class i{constructor(t,e,n,o,r,a,l,m,u,f){this.router=t;this.auth=e;this.providerInfoService=n;this.http=o;this.renderer=r;this.el=a;this.orderService=l;this.providersOrderService=m;this.messageService=u;this.confirmationService=f}provider;selectedProduct;registrationData=null;selectedGroupId=null;selectedPlanId=null;subscriptions=[];filteredSubscriptions=[];pagedSubscriptions=[];selectedSubscription=null;viewingSubscription=null;isLoadingSubscriptions=!1;showRegistrationForm=!1;menuPosition={top:"0",left:"0"};openMenuId=null;dropdownPosition={top:"0px",right:"0px"};searchQuery="";selectedPlanFilter=null;allPlans=[];availablePlans=[];isLoadingPlans=!1;groups=[];isLoadingGroups=!1;pageSize=10;page=1;totalPages=1;ngOnInit(){console.log("ProviderSubscriptionComponent initialized with product:",this.selectedProduct),this.selectedProduct?.product_id&&this.fetchGroups()}get providerId(){return this.provider?.provider_id}onRegistrationSubmit(t){this.registrationData=t,console.log("Registration submitted, proceeding to checkout:",t);let e=this.availablePlans.find(r=>r.id===t.plan_id);if(!e){console.error("Selected plan not found:",t.plan_id);return}let o={isProvider:!0,data:{registration:t,selectedProduct:this.selectedProduct,group:this.selectedGroupId,plan:e,isNewMember:!0}};sessionStorage.setItem("checkout_navigation_state",JSON.stringify(o)),this.router.navigate(["providers/info/view-cart"],{state:o})}cancelRegistration(){this.showRegistrationForm=!1,this.registrationData=null}onGroupChange(t){this.selectedGroupId=t,this.searchQuery="",this.selectedPlanFilter=null,t&&(this.fetchSubscriptions(),this.updateAvailablePlans())}onPlanChange(t){this.selectedPlanId=t,this.selectedGroupId&&this.fetchSubscriptions()}fetchSubscriptions(){if(!this.selectedGroupId||!this.providerId)return;this.isLoadingSubscriptions=!0,this.subscriptions=[],this.selectedSubscription=null;let t=new Dt().set("provider_id",this.providerId.toString()).set("group_id",this.selectedGroupId.toString()).set("status","active,inactive,expired");this.selectedPlanId&&(t=t.set("plan_id",this.selectedPlanId.toString())),this.selectedProduct?.product_id&&(t=t.set("product_id",this.selectedProduct.product_id.toString())),this.http.get("subscriptions/",{params:t}).pipe(qe(e=>(console.error("Error fetching subscriptions:",e),this.isLoadingSubscriptions=!1,De({data:[]})))).subscribe(e=>{this.subscriptions=e.data||e||[],this.filteredSubscriptions=[...this.subscriptions],this.page=1,this.updatePagedSubscriptions(),this.isLoadingSubscriptions=!1})}selectSubscription(t){this.selectedSubscription=t;let e={id:t.plan_id,name:t.plan_name||t.plan?.name||"Subscription Plan",price:t.amount_paid||t.plan?.price||0,billing_type:t.billing_type||t.plan?.billing_type||"monthly",billing_cycle:t.billing_cycle||t.plan?.billing_cycle||"pre_cycle",provider_id:t.provider_id||this.providerId,group_ids:[{group_id:t.group_id,group_name:t.group?.group_name||""}]},n={group_id:t.group_id,group_name:t.group?.group_name||""},o=H(U({},this.selectedProduct),{product_subtype:this.selectedProduct?.product_subtype||"service_subscription"}),a={isProvider:!0,data:{plan:e,group:n,selectedProduct:o,subscription:t,isExistingMember:!0,member:{member_id:t.member_id,member_name:t.member_name,mobile_number:t.mobile_number}}};sessionStorage.setItem("checkout_navigation_state",JSON.stringify(a)),this.router.navigate(["providers/info/view-cart"],{state:a})}proceedWithSubscription(){if(!this.selectedSubscription){console.error("No subscription selected");return}let e={isProvider:!0,data:{subscription:this.selectedSubscription,selectedProduct:this.selectedProduct,isExistingMember:!0}};sessionStorage.setItem("checkout_navigation_state",JSON.stringify(e)),this.router.navigate(["providers/info/view-cart"],{state:e})}toggleMenu(t,e){if(e&&e.stopPropagation(),this.openMenuId===t)this.openMenuId=null;else if(this.openMenuId=t,e){let o=e.currentTarget.getBoundingClientRect();this.menuPosition={top:`${o.bottom+4}px`,left:`${o.right-140}px`}}}viewSubscription(t){this.openMenuId=null,this.viewingSubscription=t}closeViewModal(){this.viewingSubscription=null}deleteSubscription(t){this.openMenuId=null,this.confirmationService.confirm({message:`Are you sure you want to delete the subscription for ${t.member_name}?`,header:"Delete Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{this.http.delete(`subscriptions/${t.subscription_id}?soft_delete=true`).pipe(qe(e=>(console.error("Error deleting subscription:",e),this.messageService.add({severity:"error",summary:"Delete Failed",detail:e.error?.message||"Failed to delete subscription. Please try again."}),De(null)))).subscribe(e=>{e&&(this.messageService.add({severity:"success",summary:"Deleted",detail:`Subscription for ${t.member_name} has been deleted successfully.`}),this.fetchSubscriptions())})},reject:()=>{}})}renewSubscription(t){this.openMenuId=null;let e={id:t.plan_id,name:t.plan_name||t.plan?.name||"Subscription Plan",price:t.amount_paid||t.plan?.price||0,billing_type:t.billing_type||t.plan?.billing_type||"monthly",billing_cycle:t.billing_cycle||t.plan?.billing_cycle||"pre_cycle",provider_id:t.provider_id||this.providerId,group_ids:[{group_id:t.group_id,group_name:t.group?.group_name||""}]},n={group_id:t.group_id,group_name:t.group?.group_name||""},o=H(U({},this.selectedProduct),{product_subtype:this.selectedProduct?.product_subtype||"service_subscription"}),a={isProvider:!0,data:{plan:e,group:n,selectedProduct:o,subscription:t,isExistingMember:!0,member:{member_id:t.member_id,member_name:t.member_name,mobile_number:t.mobile_number},isRenewal:!0}};sessionStorage.setItem("checkout_navigation_state",JSON.stringify(a)),console.log("Navigating to checkout for renewal:",a),this.router.navigate(["providers/info/view-cart"],{state:a})}markAsPaid(t){console.log("Mark as paid:",t),this.openMenuId=null,this.confirmationService.confirm({message:`Mark subscription for ${t.member_name} as paid?`,header:"Mark as Paid",icon:"pi pi-check-circle",accept:()=>{let e={payment_status:"paid",payment_info:{status:"paid"}};this.http.patch(`provider/${t.provider_id}/orders/${t.order_id}`,e).pipe(qe(n=>(console.error("Error marking order as paid:",n),this.messageService.add({severity:"error",summary:"Update Failed",detail:n.error?.message||"Failed to mark order as paid. Please try again."}),De(null)))).subscribe(n=>{n&&(console.log("Order marked as paid successfully:",n),this.messageService.add({severity:"success",summary:"Updated",detail:`Order for ${t.member_name} has been marked as paid.`}),this.fetchSubscriptions())})},reject:()=>{console.log("Mark as paid cancelled")}})}remindSubscription(t){console.log("Remind subscription:",t),this.openMenuId=null,this.confirmationService.confirm({message:`Send a reminder to ${t.member_name} about their expired subscription?`,header:"Send Reminder",icon:"pi pi-bell",accept:()=>{console.log("Sending reminder to:",{member_name:t.member_name,mobile_number:t.mobile_number,subscription_id:t.subscription_id}),this.messageService.add({severity:"success",summary:"Reminder Sent",detail:`Reminder sent successfully to ${t.member_name} at ${t.mobile_number}`})},reject:()=>{console.log("Reminder cancelled")}})}payInAdvance(t){console.log("Pay in advance:",t),this.openMenuId=null;let e={id:t.plan_id,name:t.plan_name||t.plan?.name||"Subscription Plan",price:t.amount_paid||t.plan?.price||0,billing_type:t.billing_type||t.plan?.billing_type||"monthly",billing_cycle:t.billing_cycle||t.plan?.billing_cycle||"pre_cycle",provider_id:t.provider_id||this.providerId,group_ids:[{group_id:t.group_id,group_name:t.group?.group_name||""}]},n={group_id:t.group_id,group_name:t.group?.group_name||""},o=H(U({},this.selectedProduct),{product_subtype:this.selectedProduct?.product_subtype||"service_subscription"}),a={isProvider:!0,data:{plan:e,group:n,selectedProduct:o,subscription:t,isExistingMember:!0,member:{member_id:t.member_id,member_name:t.member_name,mobile_number:t.mobile_number},isPayInAdvance:!0}};sessionStorage.setItem("checkout_navigation_state",JSON.stringify(a)),console.log("Navigating to checkout for pay in advance:",a),this.router.navigate(["providers/info/view-cart"],{state:a})}createRenewalOrder(t){let e=this.auth.getUserId()||0,n=new Date,o=n.toISOString().split("T")[0],r=new Date(n);t.billing_type==="monthly"?r.setMonth(r.getMonth()+1):t.billing_type==="yearly"?r.setFullYear(r.getFullYear()+1):r.setMonth(r.getMonth()+1);let a=r.toISOString().split("T")[0],l={order_type:"service_subscription",order_subtype:"service_subscription",status:"completed",user_id:t.user_id,member_id:t.member_id,member_name:t.member_name,member_mobile_number:t.mobile_number,provider_id:t.provider_id,fullfillment_type:"none",payment:{method:"cash",status:"paid",transaction_id:"",amount:t.amount_paid,payment_details:{}},delivery_address:{line1:"",city:"",state:"",pincode:"",latlong:""},metadata:{provider_id:t.provider_id,subscription_id:t.subscription_id,plan_id:t.plan_id,product_id:t.product_id,group_id:t.group_id,status:"active",billing_type:t.billing_type,billing_cycle:t.billing_cycle,start_date:o,end_date:a,amount_paid:t.amount_paid,form_data:t.form_data||{fields:{}},member_id:t.member_id,user_id:t.user_id,member_name:t.member_name,mobile_number:Number(t.mobile_number),auto_renewal:"false"},total_amount:t.amount_paid,updated_by:e};this.orderService.createServiceSubscriptionOrder(l).subscribe({next:m=>{let u=m.id||m.order_id;u?this.providersOrderService.updateOrderStatus(u,"completed").subscribe({next:f=>{this.messageService.add({severity:"success",summary:"Renewal Successful",detail:`Subscription renewed and activated successfully for ${t.member_name}`}),this.fetchSubscriptions()},error:f=>{console.error("Error updating order status:",f),this.messageService.add({severity:"warning",summary:"Renewal Created",detail:`Renewal order created for ${t.member_name}, but status update failed. Please update manually.`}),this.fetchSubscriptions()}}):(console.error("No order ID in response:",m),this.messageService.add({severity:"warning",summary:"Renewal Created",detail:`Renewal order created for ${t.member_name}, but could not update status.`}),this.fetchSubscriptions())},error:m=>{console.error("Error creating renewal order:",m),this.messageService.add({severity:"error",summary:"Renewal Failed",detail:m.error?.message||m.message||"Failed to renew subscription. Please try again."})}})}updatePagedSubscriptions(){let t=this.filteredSubscriptions.length;this.totalPages=t?Math.ceil(t/this.pageSize):1;let e=(this.page-1)*this.pageSize,n=e+this.pageSize;this.pagedSubscriptions=this.filteredSubscriptions.slice(e,n)}changePageSubscriptions(t){let e=this.page+t;e<1||e>this.totalPages||(this.page=e,this.updatePagedSubscriptions())}getExpiresInText(t){if(!t.end_date)return"No expiry";let e=new Date;e.setHours(0,0,0,0);let n=new Date(t.end_date);n.setHours(0,0,0,0);let o=n.getTime()-e.getTime(),r=Math.ceil(o/(1e3*60*60*24));if(r<0){let a=Math.abs(r);return`Expired ${a} day${a!==1?"s":""} ago`}else{if(r===0)return"Expires today";if(r===1)return"Expires tomorrow";if(r<=7)return`${r} days`;if(r<=30){let a=Math.floor(r/7),l=r%7;return l===0?`${a} week${a!==1?"s":""}`:`${a}w ${l}d`}else{let a=Math.floor(r/30),l=r%30;return l===0?`${a} month${a!==1?"s":""}`:`${a}m ${l}d`}}}fetchGroups(){!this.providerId||!this.selectedProduct?.product_id||(this.isLoadingGroups=!0,this.http.get("providers/subscription-plans/",{params:{provider_id:this.providerId.toString(),product_id:this.selectedProduct.product_id.toString(),skip:"0",limit:"100"}}).pipe(qe(t=>(console.error("Error fetching groups:",t),this.isLoadingGroups=!1,De({data:[]})))).subscribe(t=>{this.allPlans=(t.data||[]).map(n=>H(U({},n),{name:n.name||n.plan_name||"Unnamed Plan",id:n.id||n.plan_id}));let e=new Map;this.allPlans.forEach(n=>{n.group_ids&&Array.isArray(n.group_ids)?n.group_ids.forEach(o=>{o&&o.group_id&&!e.has(o.group_id)&&e.set(o.group_id,{group_id:o.group_id,group_name:o.group_name})}):n.group_id&&(e.has(n.group_id)||e.set(n.group_id,{group_id:n.group_id,group_name:n.group_name||"Group "+n.group_id}))}),this.groups=Array.from(e.values()),console.log("Fetched groups:",this.groups),this.isLoadingGroups=!1,this.selectedGroupId&&this.updateAvailablePlans()}))}truncateText(t,e=40){return t?t.length<=e?t:t.substring(0,e)+"...":""}updateAvailablePlans(){if(!this.selectedGroupId){this.availablePlans=[];return}this.availablePlans=this.allPlans.filter(t=>t.group_ids?.some(e=>e.group_id===this.selectedGroupId)),console.log("Available plans for group:",this.availablePlans)}applyFilters(){let t=[...this.subscriptions];if(this.searchQuery.trim()){let e=this.searchQuery.toLowerCase().trim();t=t.filter(n=>n.member_name.toLowerCase().includes(e)||n.mobile_number.includes(e))}this.selectedPlanFilter&&(t=t.filter(e=>e.plan_id===this.selectedPlanFilter)),this.filteredSubscriptions=t,this.page=1,this.updatePagedSubscriptions()}onSearchChange(){this.applyFilters()}onPlanFilterChange(){this.applyFilters()}clearFilters(){this.searchQuery="",this.selectedPlanFilter=null,this.applyFilters()}static \u0275fac=function(e){return new(e||i)(w(le),w(G),w(In),w(di),w(Es),w(ks),w(zc),w(Vt),w(kt),w(pe))};static \u0275cmp=R({type:i,selectors:[["provider-subscription"]],inputs:{provider:"provider",selectedProduct:"selectedProduct"},decls:14,vars:7,consts:[[1,"provider-subscription-container"],[1,"unified-selection-flow"],[1,"group-selection-section"],["for","group"],["optionValue","group_id","optionLabel","group_name","placeholder","Select a group","styleClass","group-dropdown","filterBy","group_name",3,"ngModelChange","onChange","options","ngModel","filter"],["pTemplate","item"],["pTemplate","selectedItem"],["class","warning-message",4,"ngIf"],["class","subscription-management",4,"ngIf"],["class","modal-backdrop",3,"click",4,"ngIf"],[1,"group-item"],[1,"group-name",3,"title"],[1,"group-item","selected"],[1,"warning-message"],[1,"pi","pi-info-circle"],[1,"subscription-management"],[1,"section-header"],[1,"add-new-btn-header",3,"click"],[1,"pi","pi-plus"],["class","filter-controls",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","table-wrapper",4,"ngIf"],["class","pagination-bar",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"filter-controls"],[1,"search-wrapper"],[1,"pi","pi-search","search-icon"],["type","text","placeholder","Search by name or mobile number",1,"search-input",3,"ngModelChange","input","ngModel"],[1,"plan-filter-wrapper"],["optionLabel","name","optionValue","id","placeholder","Filter by plan","styleClass","plan-filter-dropdown",3,"ngModelChange","onChange","options","ngModel","showClear"],[3,"title"],[1,"loading-state"],[1,"spinner"],[1,"table-wrapper"],[1,"subscription-table"],[1,"th-actions"],[3,"menu-open",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"td-name",3,"click"],[1,"td-expires",3,"click"],[1,"td-status",3,"click"],[1,"status-badge"],[1,"td-actions",3,"click"],[1,"menu-trigger",3,"click"],[1,"pi","pi-ellipsis-v"],["class","menu-dropdown",3,"top","left","click",4,"ngIf"],[1,"menu-dropdown",3,"click"],[1,"menu-item",3,"click"],[1,"pi","pi-eye"],[1,"pi","pi-trash"],["class","menu-item",3,"click",4,"ngIf"],[1,"pi","pi-refresh"],[1,"pi","pi-bell"],[1,"pi","pi-credit-card"],[1,"pi","pi-check-circle"],["colspan","4",1,"empty-row"],[1,"pagination-bar"],[1,"page-size"],[1,"page-size-select",3,"ngModelChange","ngModel"],[3,"value"],[1,"page-controls"],[1,"page-arrow",3,"click","disabled"],[1,"page-info"],[1,"empty-state"],[1,"pi","pi-inbox"],[1,"add-new-btn-primary",3,"click"],[1,"modal-backdrop",3,"click"],[1,"modal-container",3,"click"],[1,"modal-header"],[1,"modal-close-btn",3,"click"],[1,"pi","pi-times"],[1,"modal-body"],[3,"registerBtn","providerId","isProvider","groups","allPlans","selectedGroupId"],[1,"modal-container","view-subscription-modal",3,"click"],[1,"subscription-details"],[1,"detail-section"],[1,"detail-row"],[1,"detail-label"],[1,"detail-value"],["class","detail-section",4,"ngIf"],["class","detail-row",4,"ngFor","ngForOf"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),p(4,"Group"),c(),s(5,"p-dropdown",4),N("ngModelChange",function(r){return z(n.selectedGroupId,r)||(n.selectedGroupId=r),r}),v("onChange",function(r){return n.onGroupChange(r.value)}),y(6,Dv,3,2,"ng-template",5)(7,Av,3,2,"ng-template",6),c()(),y(8,Vv,4,0,"div",7)(9,Xv,12,5,"div",8),c()(),h(10,"p-toast")(11,"p-confirmDialog"),y(12,Qv,10,8,"div",9)(13,e1,101,30,"div",9)),e&2&&(d(5),g("options",n.groups),L("ngModel",n.selectedGroupId),g("filter",!0),d(3),g("ngIf",!n.selectedGroupId),d(),g("ngIf",n.selectedGroupId&&!n.showRegistrationForm),d(3),g("ngIf",n.showRegistrationForm),d(),g("ngIf",n.viewingSubscription))},dependencies:[ee,W,Pn,Ve,tn,nn,Z,en,Y,_e,On,he,Rc,Zt,Ls,ce],styles:[".provider-subscription-container[_ngcontent-%COMP%]{padding:0;overflow:visible}.unified-selection-flow[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0;overflow:visible}.unified-selection-flow[_ngcontent-%COMP%]   app-select-plan[_ngcontent-%COMP%]{margin:0!important;padding:0!important;display:block}.group-selection-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;box-shadow:0 1px 3px #0000000f,0 1px 2px #0000000a;margin-bottom:0}.group-selection-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:16px;font-weight:600;color:#5d157c;margin-bottom:12px}.group-selection-section[_ngcontent-%COMP%]     .group-dropdown{width:100%}.group-selection-section[_ngcontent-%COMP%]     .group-dropdown .p-dropdown{width:100%;border-radius:10px;border:1px solid #e5e7eb;background-color:#fff;padding:2px 0;transition:all .2s ease}.group-selection-section[_ngcontent-%COMP%]     .group-dropdown .p-dropdown:not(.p-disabled):hover{border-color:#9c27b0;background-color:#fcfaff}.group-selection-section[_ngcontent-%COMP%]     .group-dropdown .p-dropdown.p-focus{border-color:#7b1fa2;box-shadow:0 0 0 3px #7b1fa21a}.group-selection-section[_ngcontent-%COMP%]     .group-dropdown .p-dropdown .p-dropdown-label{padding:10px 12px;font-size:15px;color:#1f2937}.group-selection-section[_ngcontent-%COMP%]     .group-dropdown .p-dropdown .p-dropdown-trigger{width:3rem;color:#6b7280}.group-selection-section[_ngcontent-%COMP%]     .group-dropdown .p-dropdown-panel{border-radius:10px;box-shadow:0 10px 25px #0000001a;border:1px solid #f3f4f6}.group-selection-section[_ngcontent-%COMP%]     .group-dropdown .p-dropdown-panel .p-dropdown-items{padding:6px}.group-selection-section[_ngcontent-%COMP%]     .group-dropdown .p-dropdown-panel .p-dropdown-items .p-dropdown-item{border-radius:6px;margin-bottom:2px;padding:10px 12px}.group-selection-section[_ngcontent-%COMP%]     .group-dropdown .p-dropdown-panel .p-dropdown-items .p-dropdown-item:not(.p-highlight):not(.p-disabled):hover{background-color:#f3e8ff;color:#5d157c}.group-selection-section[_ngcontent-%COMP%]     .group-dropdown .p-dropdown-panel .p-dropdown-items .p-dropdown-item.p-highlight{background-color:#5d157c;color:#fff}.group-selection-section[_ngcontent-%COMP%]   .group-item[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}.group-selection-section[_ngcontent-%COMP%]   .group-item[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]{font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.subscription-management[_ngcontent-%COMP%]{margin-top:0;background:#fff;border-radius:12px;padding:20px 20px 200px;box-shadow:0 1px 3px #0000000f,0 1px 2px #0000000a;overflow:visible}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;padding-bottom:12px;border-bottom:2px solid #f3f4f6}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#1f2937;margin:0}.section-header[_ngcontent-%COMP%]   .add-new-btn[_ngcontent-%COMP%], .section-header[_ngcontent-%COMP%]   .add-new-btn-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:linear-gradient(135deg,#7b1fa2,#9c27b0);color:#fff;border:none;border-radius:8px;padding:10px 20px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s ease}.section-header[_ngcontent-%COMP%]   .add-new-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .section-header[_ngcontent-%COMP%]   .add-new-btn-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.section-header[_ngcontent-%COMP%]   .add-new-btn[_ngcontent-%COMP%]:hover, .section-header[_ngcontent-%COMP%]   .add-new-btn-header[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#6a1b9a,#8e24aa);transform:translateY(-1px);box-shadow:0 4px 12px #7b1fa24d}.section-header[_ngcontent-%COMP%]   .add-new-btn[_ngcontent-%COMP%]:active, .section-header[_ngcontent-%COMP%]   .add-new-btn-header[_ngcontent-%COMP%]:active{transform:translateY(0)}.section-header[_ngcontent-%COMP%]   .add-new-btn-header[_ngcontent-%COMP%]{padding:8px 16px;font-size:13px;white-space:nowrap}.section-header[_ngcontent-%COMP%]   .add-new-btn-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.section-header[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:#f3f4f6;color:#6b7280;border:1px solid #e5e7eb;border-radius:8px;padding:10px 20px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s ease}.section-header[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.section-header[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover{background:#e5e7eb;color:#374151;border-color:#d1d5db}.section-header[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.filter-controls[_ngcontent-%COMP%]{display:flex;gap:12px;margin-bottom:16px;flex-wrap:wrap}@media (max-width: 768px){.filter-controls[_ngcontent-%COMP%]{flex-direction:column;gap:10px}}.filter-controls[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{position:relative;flex:1;min-width:200px}.filter-controls[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#9ca3af;font-size:16px;pointer-events:none}.filter-controls[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:10px 12px 10px 40px;border:1px solid #e5e7eb;border-radius:8px;font-size:14px;color:#1f2937;transition:all .2s ease}.filter-controls[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.filter-controls[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#7b1fa2;box-shadow:0 0 0 3px #7b1fa21a}.filter-controls[_ngcontent-%COMP%]   .plan-filter-wrapper[_ngcontent-%COMP%]{min-width:200px}@media (max-width: 768px){.filter-controls[_ngcontent-%COMP%]   .plan-filter-wrapper[_ngcontent-%COMP%]{width:100%}}.filter-controls[_ngcontent-%COMP%]   .plan-filter-wrapper[_ngcontent-%COMP%]     .plan-filter-dropdown{width:100%}.filter-controls[_ngcontent-%COMP%]   .plan-filter-wrapper[_ngcontent-%COMP%]     .plan-filter-dropdown .p-dropdown{width:100%;border-radius:8px;border-color:#e5e7eb}.filter-controls[_ngcontent-%COMP%]   .plan-filter-wrapper[_ngcontent-%COMP%]     .plan-filter-dropdown .p-dropdown:not(.p-disabled):hover{border-color:#7b1fa2}.filter-controls[_ngcontent-%COMP%]   .plan-filter-wrapper[_ngcontent-%COMP%]     .plan-filter-dropdown .p-dropdown.p-focus{border-color:#7b1fa2;box-shadow:0 0 0 3px #7b1fa21a}.filter-controls[_ngcontent-%COMP%]   .plan-filter-wrapper[_ngcontent-%COMP%]     .plan-filter-dropdown .p-dropdown .p-dropdown-label{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.filter-controls[_ngcontent-%COMP%]   .plan-filter-wrapper[_ngcontent-%COMP%]     .plan-filter-dropdown .p-dropdown-panel .p-dropdown-items .p-dropdown-item span{display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:300px}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:9999;padding:20px;animation:_ngcontent-%COMP%_fadeIn .2s ease-out}.modal-container[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 20px 60px #0000004d;max-width:600px;width:100%;max-height:90vh;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_slideUp .3s ease-out}@media (max-width: 768px){.modal-container[_ngcontent-%COMP%]{max-width:100%;max-height:95vh;border-radius:12px}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #e5e7eb}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#1f2937;margin:0}.modal-header[_ngcontent-%COMP%]   .modal-close-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:36px;height:36px;border:none;background:#f3f4f6;color:#6b7280;border-radius:8px;cursor:pointer;transition:all .2s ease}.modal-header[_ngcontent-%COMP%]   .modal-close-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}.modal-header[_ngcontent-%COMP%]   .modal-close-btn[_ngcontent-%COMP%]:hover{background:#e5e7eb;color:#374151}.modal-header[_ngcontent-%COMP%]   .modal-close-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.modal-body[_ngcontent-%COMP%]{padding:24px;overflow-y:auto;flex:1}@media (max-width: 768px){.modal-body[_ngcontent-%COMP%]{padding:20px}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.subscription-list-container[_ngcontent-%COMP%]{min-height:200px}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px}.loading-state[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #f3f4f6;border-top-color:#7b1fa2;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#6b7280;font-size:14px}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.table-wrapper[_ngcontent-%COMP%]{border-radius:12px;border:1px solid #e5e7eb;box-shadow:0 2px 8px #0000000d;background:#fff;overflow:hidden}@media (max-width: 768px){.table-wrapper[_ngcontent-%COMP%]{border-radius:8px}}.subscription-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:14px;table-layout:fixed}@media (max-width: 768px){.subscription-table[_ngcontent-%COMP%]{font-size:13px}}@media (max-width: 480px){.subscription-table[_ngcontent-%COMP%]{font-size:12px}}.subscription-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#5d157c;color:#fff}.subscription-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:14px 16px;font-weight:600;text-align:left;white-space:nowrap}@media (max-width: 768px){.subscription-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px 14px}}@media (max-width: 480px){.subscription-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px 12px}}.subscription-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:30%}@media (max-width: 768px){.subscription-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:30%}}.subscription-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:35%}@media (max-width: 768px){.subscription-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:35%}}.subscription-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:18%}@media (max-width: 768px){.subscription-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:18%}}.subscription-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th.th-actions[_ngcontent-%COMP%]{text-align:center;width:17%}@media (max-width: 768px){.subscription-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th.th-actions[_ngcontent-%COMP%]{width:17%}}.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #e5e7eb;transition:background .2s;cursor:pointer;position:relative}.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#faf5ff}.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f3e8ff}.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.menu-open[_ngcontent-%COMP%]{z-index:100}.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;vertical-align:middle}@media (max-width: 768px){.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 14px}}@media (max-width: 480px){.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 12px}}.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-name[_ngcontent-%COMP%]{font-weight:500;color:#111827;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:30%}@media (max-width: 768px){.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-name[_ngcontent-%COMP%]{width:30%}}.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-expires[_ngcontent-%COMP%]{color:#111827;font-weight:500;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:35%}@media (max-width: 768px){.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-expires[_ngcontent-%COMP%]{width:35%}}.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-status[_ngcontent-%COMP%]{width:18%}@media (max-width: 768px){.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-status[_ngcontent-%COMP%]{width:18%}}.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-status[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600;text-transform:capitalize;white-space:nowrap}.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-status[_ngcontent-%COMP%]   .status-badge.active[_ngcontent-%COMP%]{background:#dcfce7;color:#16a34a}.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-status[_ngcontent-%COMP%]   .status-badge.inactive[_ngcontent-%COMP%]{background:#fed7aa;color:#ea580c}.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-status[_ngcontent-%COMP%]   .status-badge.expired[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626}.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-status[_ngcontent-%COMP%]   .status-badge.pending[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]{text-align:center;white-space:nowrap;padding:10px 8px;position:relative;width:17%}@media (max-width: 768px){.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]{width:17%}}@media (max-width: 480px){.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]{padding:8px 6px}}.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]   .menu-trigger[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;border:none;background:transparent;color:#6b7280;border-radius:6px;cursor:pointer;transition:all .2s ease;outline:none;padding:0}.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]   .menu-trigger[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]   .menu-trigger[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#5d157c}.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]   .menu-trigger[_ngcontent-%COMP%]:active{background:#e5e7eb}.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]   .menu-trigger[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]   .menu-dropdown[_ngcontent-%COMP%]{position:fixed;background:#fff;border:1px solid #d1d5db;border-radius:10px;box-shadow:0 10px 30px #00000026,0 4px 12px #00000014;z-index:9999;min-width:140px;overflow:visible;animation:_ngcontent-%COMP%_slideDown .2s ease-out;display:block;padding:6px 0;margin-top:4px}.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]   .menu-dropdown[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;width:100%;padding:12px 16px;border:none;background:#fff;color:#374151;font-size:14px;font-weight:500;text-align:left;cursor:pointer;transition:all .2s ease;outline:none;white-space:nowrap}.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]   .menu-dropdown[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;transition:color .2s ease}.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]   .menu-dropdown[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#5d157c}.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]   .menu-dropdown[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#5d157c}.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]   .menu-dropdown[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:active{background:#e5e7eb}.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]   .menu-dropdown[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:focus{outline:none}.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]   .menu-dropdown[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:first-child{border-radius:8px 8px 0 0}.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]   .menu-dropdown[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:last-child{border-radius:0 0 8px 8px}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-8px)}to{opacity:1;transform:translateY(0)}}.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .empty-row[_ngcontent-%COMP%]{text-align:center;padding:40px 16px;color:#6b7280;font-size:14px}@media (max-width: 480px){.subscription-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .empty-row[_ngcontent-%COMP%]{padding:30px 12px;font-size:13px}}.pagination-bar[_ngcontent-%COMP%]{margin-top:16px;display:flex;justify-content:space-between;align-items:center;font-size:14px;color:#6b7280;flex-wrap:wrap;gap:12px}@media (max-width: 480px){.pagination-bar[_ngcontent-%COMP%]{font-size:13px;gap:8px}}.page-size[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}@media (max-width: 480px){.page-size[_ngcontent-%COMP%]{gap:6px}}.page-size-select[_ngcontent-%COMP%]{border-radius:6px;border:1px solid #e5e7eb;padding:6px 12px;font-size:14px;color:#111827;background-color:#fff;cursor:pointer}@media (max-width: 480px){.page-size-select[_ngcontent-%COMP%]{padding:5px 10px;font-size:13px}}.page-size-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#5d157c}.page-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}@media (max-width: 480px){.page-controls[_ngcontent-%COMP%]{gap:8px}}.page-arrow[_ngcontent-%COMP%]{border:none;background:#f3e8ff;color:#5d157c;cursor:pointer;font-size:16px;width:32px;height:32px;border-radius:6px;display:flex;align-items:center;justify-content:center;transition:all .2s}@media (max-width: 480px){.page-arrow[_ngcontent-%COMP%]{width:28px;height:28px;font-size:14px}}.page-arrow[_ngcontent-%COMP%]:hover:not(:disabled){background:#5d157c;color:#fff}.page-arrow[_ngcontent-%COMP%]:disabled{color:#e5e7eb;cursor:default;opacity:.5}.page-info[_ngcontent-%COMP%]{color:#111827;font-weight:500}@media (max-width: 480px){.page-info[_ngcontent-%COMP%]{font-size:13px}}.add-new-section[_ngcontent-%COMP%]{margin-top:12px;padding-top:12px;border-top:1px solid #e5e7eb;display:flex;justify-content:center}.add-new-section[_ngcontent-%COMP%]   .add-new-btn-secondary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:linear-gradient(135deg,#7b1fa2,#9c27b0);color:#fff;border:none;border-radius:10px;padding:12px 28px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 2px 8px #7b1fa233}.add-new-section[_ngcontent-%COMP%]   .add-new-btn-secondary[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.add-new-section[_ngcontent-%COMP%]   .add-new-btn-secondary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#6a1b9a,#8e24aa);transform:translateY(-2px);box-shadow:0 4px 12px #7b1fa24d}.add-new-section[_ngcontent-%COMP%]   .add-new-btn-secondary[_ngcontent-%COMP%]:active{transform:translateY(0)}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;text-align:center}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;color:#d1d5db;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#6b7280;margin:0 0 16px}.empty-state[_ngcontent-%COMP%]   .add-new-btn-primary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:linear-gradient(135deg,#7b1fa2,#9c27b0);color:#fff;border:none;border-radius:10px;padding:12px 28px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 2px 8px #7b1fa233}.empty-state[_ngcontent-%COMP%]   .add-new-btn-primary[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px;margin-bottom:0}.empty-state[_ngcontent-%COMP%]   .add-new-btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#6a1b9a,#8e24aa);transform:translateY(-2px);box-shadow:0 4px 12px #7b1fa24d}.empty-state[_ngcontent-%COMP%]   .add-new-btn-primary[_ngcontent-%COMP%]:active{transform:translateY(0)}@media (max-width: 768px){.section-header[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;align-items:center;gap:12px}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}.section-header[_ngcontent-%COMP%]   .add-new-btn-header[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px}.section-header[_ngcontent-%COMP%]   .add-new-btn-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.subscription-card[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.subscription-card[_ngcontent-%COMP%]   .selection-indicator[_ngcontent-%COMP%]{margin-left:0;margin-top:12px;align-self:flex-end}}.view-subscription-modal[_ngcontent-%COMP%]{max-width:700px}.view-subscription-modal[_ngcontent-%COMP%]   .subscription-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.view-subscription-modal[_ngcontent-%COMP%]   .subscription-details[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]{background:#f9fafb;border-radius:10px;padding:16px}.view-subscription-modal[_ngcontent-%COMP%]   .subscription-details[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#5d157c;margin:0 0 12px;padding-bottom:8px;border-bottom:2px solid #f3e8ff}.view-subscription-modal[_ngcontent-%COMP%]   .subscription-details[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;padding:10px 0;border-bottom:1px solid #e5e7eb}.view-subscription-modal[_ngcontent-%COMP%]   .subscription-details[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.view-subscription-modal[_ngcontent-%COMP%]   .subscription-details[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{font-weight:500;color:#6b7280;font-size:14px;min-width:140px}.view-subscription-modal[_ngcontent-%COMP%]   .subscription-details[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{font-weight:400;color:#111827;font-size:14px;text-align:right;flex:1}.view-subscription-modal[_ngcontent-%COMP%]   .subscription-details[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600;text-transform:capitalize}.view-subscription-modal[_ngcontent-%COMP%]   .subscription-details[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .status-badge.active[_ngcontent-%COMP%]{background:#dcfce7;color:#16a34a}.view-subscription-modal[_ngcontent-%COMP%]   .subscription-details[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .status-badge.inactive[_ngcontent-%COMP%]{background:#fed7aa;color:#ea580c}.view-subscription-modal[_ngcontent-%COMP%]   .subscription-details[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .status-badge.expired[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626}.view-subscription-modal[_ngcontent-%COMP%]   .subscription-details[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .status-badge.pending[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}@media (max-width: 768px){.view-subscription-modal[_ngcontent-%COMP%]   .subscription-details[_ngcontent-%COMP%]{gap:16px}.view-subscription-modal[_ngcontent-%COMP%]   .subscription-details[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]{padding:14px}.view-subscription-modal[_ngcontent-%COMP%]   .subscription-details[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:15px}.view-subscription-modal[_ngcontent-%COMP%]   .subscription-details[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:4px}.view-subscription-modal[_ngcontent-%COMP%]   .subscription-details[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{min-width:auto;font-size:13px}.view-subscription-modal[_ngcontent-%COMP%]   .subscription-details[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{text-align:left;font-size:13px}}.warning-message[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404;padding:.75rem 1rem;border-radius:8px;border:1px solid #ffeeba;border-left:4px solid #ffc107;display:flex;align-items:center;gap:.75rem;font-size:.9rem;font-weight:500;margin-top:1rem;margin-bottom:.5rem}.warning-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem;color:#ffc107}"]})};function n1(i,t){if(i&1){let e=E();s(0,"button",8),v("click",function(){b(e);let o=_(2);return C(o.selectTab(o.BUSINESS_TYPES.ondemand))}),p(1),M(2,"translate"),c()}if(i&2){let e=_(2);j("active",e.selectedTab===e.BUSINESS_TYPES.ondemand),d(),T(" ",O(2,3,"sales.products")," ")}}function i1(i,t){if(i&1){let e=E();s(0,"button",8),v("click",function(){b(e);let o=_(2);return C(o.selectTab(o.BUSINESS_TYPES.subscription))}),p(1),M(2,"translate"),c()}if(i&2){let e=_(2);j("active",e.selectedTab===e.BUSINESS_TYPES.subscription),d(),T(" ",O(2,3,"sales.subscription")," ")}}function o1(i,t){if(i&1&&(s(0,"div",4)(1,"div",5),y(2,n1,3,5,"button",6)(3,i1,3,5,"button",6),h(4,"div",7),c()()),i&2){let e=_();d(2),g("ngIf",e.isOndemandAvailable),d(),g("ngIf",e.isSubscriptionAvailable),d(),j("subscription-active",e.selectedTab===e.BUSINESS_TYPES.subscription)}}function r1(i,t){if(i&1&&h(0,"provider-catalogue",9),i&2){let e=_();g("isProviderView",!0)("provider",e.provider)("activeIndex",e.activeIndex)}}function a1(i,t){i&1&&(s(0,"div",17)(1,"p"),p(2),M(3,"translate"),c()()),i&2&&(d(2),S(O(3,1,"sales.loading_subscription_products")))}function s1(i,t){if(i&1){let e=E();s(0,"div",20),v("click",function(){let o=b(e).$implicit,r=_(4);return C(r.onSubscriptionProductSelected(o))}),s(1,"div",21)(2,"div",22)(3,"img",23),v("error",function(o){b(e);let r=_(4);return C(r.onImageError(o))}),c()()(),s(4,"div",24)(5,"div",25)(6,"h3",26),p(7),c(),s(8,"p",27),p(9),c()(),s(10,"div",28)(11,"button",29),v("click",function(){let o=b(e).$implicit,r=_(4);return C(r.onSubscriptionProductSelected(o))}),p(12),M(13,"translate"),c()()()()}if(i&2){let e=t.$implicit,n=_(4);d(3),g("src",n.getProductImage(e),Jt)("alt",e.product_name),d(4),S(e.product_name),d(2),S(e.title1),d(3),T(" ",O(13,5,"profile.register")," ")}}function c1(i,t){if(i&1&&(s(0,"div",18),y(1,s1,14,7,"div",19),c()),i&2){let e=_(3);d(),g("ngForOf",e.subscriptionProducts)}}function d1(i,t){i&1&&(s(0,"div",30)(1,"div",31),h(2,"i",32),c(),s(3,"h3"),p(4),M(5,"translate"),c(),s(6,"p"),p(7),M(8,"translate"),c()()),i&2&&(d(4),S(O(5,2,"products.no_subscriptions")),d(3),S(O(8,4,"products.no_subscription_msg")))}function l1(i,t){if(i&1&&(s(0,"div",13),y(1,a1,4,3,"div",14)(2,c1,2,1,"div",15)(3,d1,9,6,"div",16),c()),i&2){let e=_(2);d(),g("ngIf",e.isLoadingProducts),d(),g("ngIf",!e.isLoadingProducts),d(),g("ngIf",!e.isLoadingProducts&&e.subscriptionProducts.length===0)}}function p1(i,t){if(i&1){let e=E();s(0,"div",33)(1,"div",34),v("click",function(){b(e);let o=_(2);return C(o.onBackToProducts())}),h(2,"i",35),s(3,"span"),p(4),M(5,"translate"),c()(),h(6,"provider-subscription",36),c()}if(i&2){let e=_(2);d(4),S(O(5,3,"product.back_to_products")),d(2),g("provider",e.provider)("selectedProduct",e.selectedSubscriptionProduct)}}function m1(i,t){if(i&1&&(s(0,"div",10),y(1,l1,4,3,"div",11)(2,p1,7,5,"div",12),c()),i&2){let e=_();d(),g("ngIf",e.showSubscriptionProducts),d(),g("ngIf",e.showSubscriptionFlow&&e.selectedSubscriptionProduct)}}var Xr=class i{constructor(t,e,n,o,r,a,l){this.members=t;this.authServ=e;this.subscriptionProductsService=n;this.providerInfoService=o;this.cdr=r;this.backHandleService=a;this.router=l}provider;selectedTab="on_demand";activeIndex=0;BUSINESS_TYPES=la;subscriptionProducts=[];isLoadingProducts=!1;selectedSubscriptionProduct=null;showSubscriptionProducts=!1;showSubscriptionFlow=!1;productsTabRefreshKey=0;isTabSwitching=!1;providerSubscription;ngOnInit(){try{let t=this.authServ.getSelectedProvider();t&&(this.provider=t,console.log("AddSalesFromProvider: Cached provider loaded:",this.provider?.provider_id),this.validateTabSelection()),this.registerBackAction();let e=t?.provider_id||this.authServ.getSelectedProviderId();e&&this.providerInfoService.getProviderDetails(e).subscribe({next:n=>{n&&n.data&&(console.log("AddSalesFromProvider: Full provider details fetched:",n.data),this.provider=n.data,this.validateTabSelection(),this.cdr.detectChanges())},error:n=>{console.error("AddSalesFromProvider: Error fetching provider details:",n)}}),this.providerSubscription=this.authServ.providerChange$.subscribe(n=>{if(n){console.log("AddSalesFromProvider: Provider changed via auth service");let o=n.provider_id;o&&this.providerInfoService.getProviderDetails(o).subscribe({next:r=>{r&&r.data&&(this.provider=r.data,this.validateTabSelection(),this.cdr.detectChanges())}})}})}catch(t){console.error("AddSalesFromProvider: Error in ngOnInit:",t),this.selectedTab="on_demand"}}validateTabSelection(){if(!this.isOndemandAvailable&&!this.isSubscriptionAvailable){this.selectedTab="on_demand";return}this.isOndemandAvailable&&!this.isSubscriptionAvailable?this.selectedTab!=="on_demand"&&(this.selectedTab="on_demand",this.switchToProductsTab()):this.isSubscriptionAvailable&&!this.isOndemandAvailable?this.selectedTab!=="subscription"&&(this.selectedTab="subscription",this.switchToSubscriptionTab()):this.selectedTab!=="on_demand"&&this.selectedTab!=="subscription"&&(this.selectedTab="on_demand",this.switchToProductsTab()),this.cdr.detectChanges()}get isSubscriptionAvailable(){try{let t=this.provider?.business_type?.includes("subscription")??!1;return console.log("DEBUG: isSubscriptionAvailable:",t,"Provider Type:",this.provider?.business_type),t}catch(t){return console.warn("Error checking subscription availability",t),!1}}get isOndemandAvailable(){try{let t=this.provider?.business_type?.includes("on_demand")??!1;return console.log("DEBUG: isOndemandAvailable:",t,"Provider Type:",this.provider?.business_type),t}catch(t){return console.warn("Error checking ondemand availability",t),!1}}ngOnDestroy(){this.providerSubscription&&this.providerSubscription.unsubscribe(),this.cleanupBackAction()}registerBackAction(){let t=this.router.url;console.log("Registering back action for URL:",t);let e={id:"sales-back-action",actionType:"navigate",backNavigationUrl:"/providers/dashboard",callback:()=>{},value:"",forPageUrl:t};this.backHandleService.backAction=this.backHandleService.backAction.filter(n=>n.forPageUrl!==t),this.backHandleService.backAction.push(e)}cleanupBackAction(){let t=this.router.url;this.backHandleService.backAction=this.backHandleService.backAction.filter(e=>e.forPageUrl!==t),console.log("Back action cleaned up for URL:",t)}selectTab(t){try{if(this.isTabSwitching||this.selectedTab===t)return;if(this.isTabSwitching=!0,this.selectedTab=t,console.log("New selectedTab:",this.selectedTab),this.selectedTab==="on_demand"&&this.isOndemandAvailable)this.switchToProductsTab();else if(this.selectedTab==="subscription"&&this.isSubscriptionAvailable)this.switchToSubscriptionTab();else{console.error("Unknown tab or unavailable:",t),this.isTabSwitching=!1;return}this.cdr.detectChanges(),setTimeout(()=>{this.isTabSwitching=!1},300)}catch(e){console.error("Error in selectTab:",e),this.isTabSwitching=!1}}switchToProductsTab(){this.activeIndex=0,this.showSubscriptionProducts=!1,this.showSubscriptionFlow=!1,this.selectedSubscriptionProduct=null,this.subscriptionProducts=[],this.isLoadingProducts=!1,this.productsTabRefreshKey++}switchToSubscriptionTab(){this.activeIndex=2,this.loadSubscriptionProducts()}loadSubscriptionProducts(){try{this.isLoadingProducts=!0,this.showSubscriptionProducts=!0,this.showSubscriptionFlow=!1;let t=this.provider?.provider_id||this.authServ.getSelectedProviderId();if(!t){console.error("No provider ID available"),this.isLoadingProducts=!1,this.cdr.detectChanges();return}setTimeout(()=>{this.subscriptionProductsService.getSubscriptionProducts(t,void 0,0,10,"subscription","service_subscription").pipe(qe(e=>(console.error("Error loading subscription products:",e),this.isLoadingProducts=!1,this.cdr.detectChanges(),De({data:{total:0,products:[]}})))).subscribe(e=>{this.subscriptionProducts=e.data?.products||[],this.isLoadingProducts=!1,this.cdr.detectChanges()})},100)}catch(t){console.error("Error in loadSubscriptionProducts:",t),this.isLoadingProducts=!1,this.cdr.detectChanges()}}onSubscriptionProductSelected(t){this.selectedSubscriptionProduct=t,this.showSubscriptionProducts=!1,this.showSubscriptionFlow=!0}onBackToProducts(){this.showSubscriptionFlow=!1,this.showSubscriptionProducts=!0,this.selectedSubscriptionProduct=null}getProductImage(t){return t.product_image_url&&t.product_image_url.length>0?t.product_image_url[0]:"assets/images/products/product.jpg"}onImageError(t){let e=t.target;e&&(e.src="assets/images/products/product.jpg")}static \u0275fac=function(e){return new(e||i)(w(rn),w(G),w(Po),w(In),w(hn),w(Ct),w(le))};static \u0275cmp=R({type:i,selectors:[["add-sales-from-provider"]],decls:4,vars:6,consts:[[3,"title","icon","showBack"],["class","tab-switcher-container",4,"ngIf"],[3,"isProviderView","provider","activeIndex",4,"ngIf"],["class","subscription-content",4,"ngIf"],[1,"tab-switcher-container"],[1,"tab-switcher"],["class","tab",3,"active","click",4,"ngIf"],[1,"tab-slider"],[1,"tab",3,"click"],[3,"isProviderView","provider","activeIndex"],[1,"subscription-content"],["class","subscription-products-section",4,"ngIf"],["class","subscription-flow",4,"ngIf"],[1,"subscription-products-section"],["class","loading-placeholder",4,"ngIf"],["class","products-grid",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"loading-placeholder"],[1,"products-grid"],["class","product-card",3,"click",4,"ngFor","ngForOf"],[1,"product-card",3,"click"],[1,"product-image-section"],[1,"image-container"],[1,"product-image",3,"error","src","alt"],[1,"product-content-section"],[1,"product-info"],[1,"product-title"],[1,"product-description"],[1,"action-section"],["type","button",1,"register-btn",3,"click"],[1,"empty-state"],[1,"empty-icon"],[1,"pi","pi-box"],[1,"subscription-flow"],[1,"back-button",3,"click"],[1,"pi","pi-arrow-left"],[3,"provider","selectedProduct"]],template:function(e,n){e&1&&(h(0,"app-title-card",0),y(1,o1,5,4,"div",1)(2,r1,1,3,"provider-catalogue",2)(3,m1,3,2,"div",3)),e&2&&(g("title","Sales")("icon","shopping_bag_outline")("showBack",!0),d(),g("ngIf",n.isOndemandAvailable&&n.isSubscriptionAvailable),d(),g("ngIf",n.selectedTab===n.BUSINESS_TYPES.ondemand),d(),g("ngIf",n.selectedTab===n.BUSINESS_TYPES.subscription))},dependencies:[ee,W,be,Lc,Kr,ce],styles:[".tab-switcher-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;padding:16px;margin:5px 0}.tab-switcher[_ngcontent-%COMP%]{position:relative;display:inline-flex;background:#f1f5f9;border-radius:14px;padding:4px;box-shadow:0 2px 8px #0000000a;width:auto;min-width:320px;max-width:400px}.tab-switcher[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{position:relative;flex:1;padding:10px 28px;font-size:14px;font-weight:600;color:#64748b;background:transparent;border:none;cursor:pointer;transition:color .3s ease;z-index:2;border-radius:10px;-webkit-user-select:none;user-select:none;white-space:nowrap;outline:none}.tab-switcher[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:hover{color:#475569}.tab-switcher[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{color:#7b1fa2}.tab-switcher[_ngcontent-%COMP%]   .tab-slider[_ngcontent-%COMP%]{position:absolute;top:4px;left:4px;width:calc(50% - 4px);height:calc(100% - 8px);background:#fff;border-radius:10px;box-shadow:0 2px 12px #7b1fa226;transition:transform .3s cubic-bezier(.4,0,.2,1);z-index:1}.tab-switcher[_ngcontent-%COMP%]   .tab-slider.subscription-active[_ngcontent-%COMP%]{transform:translate(calc(100% + 4px))}.subscription-content[_ngcontent-%COMP%]{padding:16px}.loading-placeholder[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:40px 20px}.loading-placeholder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:14px;font-weight:600}.products-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-top:16px}.product-card[_ngcontent-%COMP%]{display:flex;background:#fff;border-radius:12px;padding:16px;box-shadow:0 2px 8px #0000001a;cursor:pointer;transition:all .3s ease;border:1px solid #e5e7eb}.product-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 16px #00000026;border-color:#7b1fa2}.product-image-section[_ngcontent-%COMP%]{flex-shrink:0;margin-right:16px}.product-image-section[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:8px;overflow:hidden;background:#f9fafb;display:flex;align-items:center;justify-content:center}.product-image-section[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.product-content-section[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:space-between}.product-info[_ngcontent-%COMP%]   .product-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#1f2937;margin:0 0 4px;line-height:1.4}.product-info[_ngcontent-%COMP%]   .product-description[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin:0;line-height:1.4}.action-section[_ngcontent-%COMP%]{margin-top:12px}.action-section[_ngcontent-%COMP%]   .register-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#7b1fa2,#9c27b0);color:#fff;border:none;border-radius:6px;padding:8px 16px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s ease}.action-section[_ngcontent-%COMP%]   .register-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#6a1b9a,#8e24aa);transform:translateY(-1px)}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{width:64px;height:64px;background:#f3f4f6;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;color:#9ca3af}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#374151;margin:0 0 8px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin:0}.subscription-flow[_ngcontent-%COMP%]{padding:16px 0}.back-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#7b1fa2;font-size:14px;font-weight:500;cursor:pointer;margin-bottom:20px;padding:8px 0}.back-button[_ngcontent-%COMP%]:hover{color:#6a1b9a}.back-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.selected-product-info[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:16px;margin-bottom:24px}.selected-product-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#1e293b;margin:0 0 8px}.selected-product-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#64748b;margin:0}@media (max-width: 480px){.tab-switcher-container[_ngcontent-%COMP%]{padding:16px 8px}.tab-switcher[_ngcontent-%COMP%]{min-width:calc(100vw - 32px);max-width:100%}.tab-switcher[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{padding:10px 20px;font-size:13px}}"]})};function g1(i,t){i&1&&(s(0,"div",5),h(1,"div",6),s(2,"p"),p(3,"Loading order details..."),c()())}function u1(i,t){if(i&1){let e=E();s(0,"div",7)(1,"div",8),h(2,"i",9),c(),s(3,"p",10),p(4),c(),s(5,"button",11),v("click",function(){b(e);let o=_();return C(o.loadOrderDetails())}),h(6,"i",12),p(7," Retry "),c()()}if(i&2){let e=_();d(4),S(e.error)}}function f1(i,t){if(i&1&&(s(0,"div",39)(1,"div",40),p(2),c(),s(3,"div",41)(4,"div",42),p(5),c(),s(6,"div",43),p(7),c()()()),i&2){let e=t.$implicit;d(2),T(" ",e.quantity||e.base_quantity," x "),d(3),S(e.product_name),d(2),T(" \u20B9",e.total_price||e.base_quantity*e.price_per_quantity," ")}}function _1(i,t){if(i&1&&(et(0),y(1,f1,8,3,"div",38),tt()),i&2){let e=_(2);d(),g("ngForOf",e.getProducts())}}function h1(i,t){if(i&1){let e=E();et(0),s(1,"div",53)(2,"img",54),v("click",function(){b(e);let o=_(2).$implicit,r=_(4);return C(r.openImagePreview([r.getFormDataValue(o.label_name)]))}),c(),s(3,"button",55),v("click",function(){b(e);let o=_(2).$implicit,r=_(4);return C(r.downloadImage(r.getFormDataValue(o.label_name)))}),h(4,"i",56),s(5,"span"),p(6,"Download Image"),c()()(),tt()}if(i&2){let e=_(2).$implicit,n=_(4);d(2),g("src",n.getFormDataValue(e.label_name),Jt)}}function b1(i,t){i&1&&(et(0),s(1,"div",57),p(2,"No image provided"),c(),tt())}function C1(i,t){if(i&1&&(et(0),y(1,h1,7,1,"ng-container",25)(2,b1,3,0,"ng-container",25),tt()),i&2){let e=_().$implicit,n=_(4);d(),g("ngIf",n.getFormDataValue(e.label_name)),d(),g("ngIf",!n.getFormDataValue(e.label_name))}}function v1(i,t){if(i&1&&(et(0),s(1,"div",58),p(2),c(),tt()),i&2){let e=_().$implicit,n=_(4);d(2),T(" ",n.getFormDataValue(e.label_name)||"N/A"," ")}}function x1(i,t){if(i&1&&(s(0,"div",49)(1,"label"),p(2),M(3,"titlecase"),c(),et(4,50),y(5,C1,3,2,"ng-container",51)(6,v1,3,1,"ng-container",52),tt(),c()),i&2){let e=t.$implicit;d(2),S(O(3,3,e.label_name)),d(2),g("ngSwitch",e.element_type),d(),g("ngSwitchCase","image")}}function P1(i,t){if(i&1&&(et(0),s(1,"div",47),y(2,x1,7,5,"div",48),c(),tt()),i&2){let e=_(3);d(2),g("ngForOf",e.formElements)}}function y1(i,t){i&1&&(s(0,"p",59),p(1,"No form data available."),c())}function M1(i,t){if(i&1&&(et(0),s(1,"div",44)(2,"h3",45),p(3,"Form Details"),c(),y(4,P1,3,1,"ng-container",46)(5,y1,2,0,"ng-template",null,0,Pe),c(),tt()),i&2){let e=ge(6),n=_(2);d(4),g("ngIf",n.formElements.length>0)("ngIfElse",e)}}function O1(i,t){if(i&1&&(s(0,"div",60)(1,"div",61)(2,"div",62),h(3,"i",63),s(4,"span",45),p(5,"Delivery Type"),c()(),s(6,"p",64),p(7),c()()()),i&2){let e=_(2);d(7),S(e.getDeliveryType())}}function w1(i,t){if(i&1&&(s(0,"div",60)(1,"div",61)(2,"div",62),h(3,"i",65),s(4,"span",45),p(5,"Delivery Address"),c()(),s(6,"p",64),p(7),c()()()),i&2){let e=_(2);d(7),S(e.getDeliveryAddress())}}function S1(i,t){if(i&1&&(s(0,"div",66)(1,"div",67)(2,"div",62),h(3,"i",68),s(4,"span",45),p(5,"Slot"),c()(),s(6,"div",69)(7,"div",70)(8,"span",71),p(9),c(),s(10,"span",71),p(11),M(12,"date"),c()()()()()),i&2){let e=_(2);d(9),S(e.order.slot_info.slot_name),d(2),S(gt(12,2,e.getTimeOnly(e.order.slot_info.start_time),"shortTime"))}}function k1(i,t){if(i&1&&(s(0,"div",76)(1,"span",77),p(2,"Transaction ID:"),c(),s(3,"span",78),p(4),c()()),i&2){let e=_(3);d(4),S(e.order.payment_info.transaction_id)}}function I1(i,t){if(i&1&&(s(0,"div",72)(1,"div",73)(2,"div",62),h(3,"i",74),s(4,"span",45),p(5,"Payment Information"),c()(),s(6,"div",75)(7,"div",76)(8,"span",77),p(9,"Method:"),c(),s(10,"span",78),p(11),c()(),s(12,"div",76)(13,"span",77),p(14,"Status:"),c(),s(15,"span",78),p(16),M(17,"titlecase"),c()(),y(18,k1,5,1,"div",79),c()()()),i&2){let e=_(2);d(11),S(e.getPaymentMethod()),d(4),Mt("status-"+e.getPaymentStatus()),d(),T(" ",O(17,5,e.getPaymentStatus())," "),d(2),g("ngIf",e.order.payment_info.transaction_id)}}function T1(i,t){if(i&1&&(s(0,"div",80)(1,"div",81)(2,"div",62),h(3,"i",82),s(4,"span",45),p(5,"Assigned Employee"),c()(),s(6,"p",83),p(7),c()()()),i&2){let e=_(2);d(7),S(e.getAssignedEmployee())}}function E1(i,t){i&1&&h(0,"i",90)}function F1(i,t){i&1&&h(0,"i",91)}function D1(i,t){i&1&&(s(0,"span"),p(1),M(2,"translate"),c()),i&2&&(d(),S(O(2,1,"orders.accept")))}function A1(i,t){i&1&&(s(0,"span"),p(1),M(2,"translate"),c()),i&2&&(d(),S(O(2,1,"orders.processing")))}function V1(i,t){i&1&&h(0,"i",92)}function R1(i,t){i&1&&h(0,"i",91)}function L1(i,t){i&1&&(s(0,"span"),p(1),M(2,"translate"),c()),i&2&&(d(),S(O(2,1,"orders.reject")))}function z1(i,t){i&1&&(s(0,"span"),p(1),M(2,"translate"),c()),i&2&&(d(),S(O(2,1,"orders.processing")))}function N1(i,t){if(i&1){let e=E();s(0,"div",84)(1,"button",85),v("click",function(){b(e);let o=_(2);return C(o.acceptOrder())}),y(2,E1,1,0,"i",86)(3,F1,1,0,"i",87)(4,D1,3,3,"span",25)(5,A1,3,3,"span",25),c(),s(6,"button",88),v("click",function(){b(e);let o=_(2);return C(o.rejectOrder())}),y(7,V1,1,0,"i",89)(8,R1,1,0,"i",87)(9,L1,3,3,"span",25)(10,z1,3,3,"span",25),c()()}if(i&2){let e=_(2);d(),g("disabled",e.processingOrder),d(),g("ngIf",!e.processingOrder),d(),g("ngIf",e.processingOrder),d(),g("ngIf",!e.processingOrder),d(),g("ngIf",e.processingOrder),d(),g("disabled",e.processingOrder),d(),g("ngIf",!e.processingOrder),d(),g("ngIf",e.processingOrder),d(),g("ngIf",!e.processingOrder),d(),g("ngIf",e.processingOrder)}}function B1(i,t){if(i&1){let e=E();s(0,"div",13)(1,"div",14)(2,"button",15),v("click",function(){b(e);let o=_();return C(o.onBackClick())}),h(3,"i",16),c(),s(4,"h1",17),p(5,"Order Details"),c()(),s(6,"div",18)(7,"div",19),p(8,"CUSTOMER"),c(),s(9,"div",20)(10,"span",21),p(11),c(),s(12,"div",22),p(13),M(14,"titlecase"),c()()(),s(15,"div",23)(16,"div",24),y(17,_1,2,1,"ng-container",25)(18,M1,7,2,"ng-container",25),c(),y(19,O1,8,1,"div",26)(20,w1,8,1,"div",26)(21,S1,13,5,"div",27)(22,I1,19,7,"div",28)(23,T1,8,1,"div",29),h(24,"div",30),s(25,"div",31)(26,"div",32)(27,"span",33),p(28,"Order ID"),c(),s(29,"span",34),p(30),c()(),s(31,"div",32)(32,"span",33),p(33,"Ordered On"),c(),s(34,"span",35),p(35),c()(),s(36,"div",36)(37,"span",33),p(38,"Total Amount"),c(),s(39,"span",35),p(40),c()()(),y(41,N1,11,10,"div",37),c()()}if(i&2){let e=_();d(11),S(e.getCustomerName()),d(),Mt("status-"+e.order.status),d(),T(" ",O(14,16,e.order.status)," "),d(4),g("ngIf",e.isProductOrder()),d(),g("ngIf",e.isFormOrder()),d(),g("ngIf",e.order.address),d(),g("ngIf",e.order.order_type!="product_subscription"&&e.order.address&&e.getDeliveryType()=="door_delivery"),d(),g("ngIf",e.order.slot_info),d(),g("ngIf",e.order.payment_info),d(),g("ngIf",e.order.assigned_to_info),d(7),T("#",e.getOrderId(),""),d(5),Qe("",e.getOrderDate(),", ",e.getOrderTime(),""),d(5),T("\u20B9",e.getTotalAmount(),""),d(),g("ngIf",e.isOrderActionable())}}var Qr=class i{constructor(t,e,n,o,r,a,l,m,u,f){this.router=t;this.route=e;this.location=n;this.orderService=o;this.toast=r;this.dialog=a;this.rnCommunicator=l;this.fb=m;this.backHandleService=u;this.authService=f}order=null;loading=!1;error=null;memberForm=null;registerFormRecords=[];formElementType=Yn;formDetails=null;formElements=[];touchStartX=0;touchStartY=0;touchEndX=0;touchEndY=0;swipeHandled=!1;processingOrder=!1;ngOnInit(){this.registerBackAction(),this.loadOrderDetails()}ngOnDestroy(){setTimeout(()=>{this.cleanupBackAction()},100)}registerBackAction(){let t=this.router.url;[t,t.split("?")[0],"/providers/orders"].forEach((n,o)=>{let r={id:`order-details-back-action-${o}`,actionType:"navigate",backNavigationUrl:"/providers/dashboard",callback:()=>{},value:"",forPageUrl:n};this.backHandleService.backAction=this.backHandleService.backAction.filter(a=>!a.id.startsWith("order-details-back-action-")||a.forPageUrl!==n),this.backHandleService.backAction.push(r)})}cleanupBackAction(){this.backHandleService.backAction=this.backHandleService.backAction.filter(t=>!t.id.startsWith("order-details-back-action-"))}onTouchStart(t){this.touchStartX=t.changedTouches[0].screenX,this.touchStartY=t.changedTouches[0].screenY,this.swipeHandled=!1}onTouchEnd(t){this.touchEndX=t.changedTouches[0].screenX,this.touchEndY=t.changedTouches[0].screenY,this.swipeHandled||(this.handleSwipeGesture(),this.swipeHandled=!0)}handleSwipeGesture(){let t=this.touchEndX-this.touchStartX,e=this.touchEndY-this.touchStartY,n=80,o=40;Math.abs(t)<n||Math.abs(t)<Math.abs(e)||t<0&&this.onBackClick()}loadOrderDetails(){let t=this.router.getCurrentNavigation();if(t?.extras?.state?.order)this.order=t.extras.state.order,this.prepareFormData(),this.fetchFormDetailsIfNeeded();else{let e=this.route.snapshot.paramMap.get("id");e?this.fetchOrderById(parseInt(e)):(this.error="Order ID not found",this.toast.error("Error","Order ID not found"))}}fetchOrderById(t){this.loading=!0,this.error=null,this.orderService.getOrderById(t).subscribe({next:e=>{this.order=e,this.loading=!1,this.prepareFormData(),this.fetchFormDetailsIfNeeded()},error:e=>{console.error("Error fetching order details:",e),this.error="Failed to load order details.",this.loading=!1,this.toast.error("Error","Failed to load order details. Please try again.")}})}fetchFormDetailsIfNeeded(){if(!this.order){console.log("[OrderDetailsComponent] No order data to fetch form details");return}if(console.log("[OrderDetailsComponent] Full Order Metadata:",JSON.stringify(this.order.metadata,null,2)),console.log("[OrderDetailsComponent] Full Order Object (keys):",Object.keys(this.order)),!this.isFormOrder()){console.log("[OrderDetailsComponent] Not identified as a form order");return}let t=this.order.provider_id||this.order.provider_info?.provider_id||this.order.provider_info?.id||this.order?.metadata?.form_data?.provider_id;t||(t=this.authService.getSelectedProviderId(),console.log("[OrderDetailsComponent] provider_id missing from order, using fallback from AuthService:",t));let e=this.order?.metadata,n=e?.form_id||this.order.form_id||e?.form_data?.form_id||e?.form_registration_id||this.order.form_registration_id||e?.registration_id||this.order.registration_id;console.log("[OrderDetailsComponent] Attempting to fetch form details with:",{providerId:t,formId:n}),t&&n?this.orderService.getFormDetails(t,n).subscribe({next:o=>{console.log("[OrderDetailsComponent] Form details fetched successfully:",o),this.formDetails=o,this.formElements=(o?.form_data||[]).flatMap(r=>r.elements||[]),console.log("[OrderDetailsComponent] Extracted form elements:",this.formElements)},error:o=>{console.error("[OrderDetailsComponent] Failed to fetch form details:",o)}}):console.warn("[OrderDetailsComponent] Missing providerId or formId for form details fetch:",{providerId:t,formId:n})}isProductOrder(){let t=this.order?.metadata;return t?Array.isArray(t.products)||t.product_name?!0:Array.isArray(t):!1}isFormOrder(){return!!this.order?.metadata?.form_data||this.order?.order_type==="forms"}getProducts(){let t=this.order?.metadata;return t?Array.isArray(t.products)?t.products??[]:t.product_name?[t]:Array.isArray(t)?t:[]:[]}getFormData(){return this.isFormOrder()?this.order?.metadata?.form_data||{}:{}}prepareFormData(){let t=this.getFormData();if(!t||typeof t!="object"||Array.isArray(t)){this.memberForm=null,this.registerFormRecords=[];return}let e=t,n=Array.isArray(e.member_json_form)?e.member_json_form:[],o=U({},e.member_json_form_obj??{}),r=new Map,a=this.fb.group({}),l=[],m={},u=(P,k,I="box",F=!0)=>{!P||k===void 0||(a.contains(P)||a.addControl(P,this.fb.control({value:this.formatFieldValue(k),disabled:!0})),F&&!l.some(D=>D.label_name===P)&&l.push({label_name:P,element_type:I,display_for_user:!0}))},f=e.member_name;f!==void 0&&(m.member_name=[{value:this.formatFieldValue(f),disabled:!0}]);let x=e.member_mobile_number;if(x!==void 0&&(m.member_mobile_number=[{value:this.formatFieldValue(x),disabled:!0}]),n.length>0||Object.keys(o).length>0)n.forEach(P=>{if(!P||typeof P!="object")return;let k=Object.keys(P).filter(D=>D!=="display_for_user"&&D!=="dispaly_user");if(k.length===0)return;let I=k[0],F=this.normalizeDisplayFlag(P.display_for_user??P.dispaly_user);r.has(I)?r.set(I,r.get(I)||F):r.set(I,F),o[I]===void 0&&(o[I]=P[I])}),Object.entries(o).forEach(([P,k])=>{let I=r.has(P)?r.get(P):!0,F=this.shouldUseTextarea(k)?"area":"box";u(P,k,F,I)});else{let P=new Set(["member_name","member_mobile_number","member_json_form","member_json_form_obj","fields"]),k=e.fields&&typeof e.fields=="object"&&!Array.isArray(e.fields)?e.fields:e;k&&typeof k=="object"&&!Array.isArray(k)&&Object.entries(k).forEach(([I,F])=>{if(P.has(I))return;let D=this.shouldUseTextarea(F)?"area":"box";u(I,F,D)})}if(Object.keys(a.controls).length>0&&(m.member_json_form_obj=a),Object.keys(m).length===0){this.memberForm=null,this.registerFormRecords=[];return}this.memberForm=this.fb.group(m),this.registerFormRecords=l}openImagePreview(t,e=0){!t||t.length===0||this.dialog.open(Mo,{panelClass:"image-preview-dialog",data:{images:t}})}normalizeDisplayFlag(t){if(t==null)return!0;if(typeof t=="boolean")return t;if(typeof t=="number")return t===1;if(typeof t=="string"){let e=t.trim().toLowerCase();return e==="true"||e==="1"||e==="yes"}return!0}formatLabel(t){return t?t.replace(/_/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").split(" ").map(n=>n?n.charAt(0).toUpperCase()+n.slice(1):"").join(" ").trim():""}shouldUseTextarea(t){if(t==null)return!1;let e=this.formatFieldValue(t);return e.length>120||e.includes(`
`)}formatFieldValue(t){if(t==null)return"";if(Array.isArray(t))return t.map(e=>this.formatFieldValue(e)).join(", ");if(typeof t=="object")try{return JSON.stringify(t,null,2)}catch{return String(t)}return String(t)}isImageUrl(t){return typeof t=="string"&&t.match(/\.(jpeg|jpg|png|gif|webp)$/i)!==null}getImageUrls(t){return t?Array.isArray(t)?t.filter(e=>typeof e=="string"&&this.isImageUrl(e)):typeof t=="string"&&this.isImageUrl(t)?[t]:[]:[]}hasImages(t){try{return this.getImageUrls(t).length>0}catch{return!1}}downloadImage(t){try{this.isReactNativeEnvironment()?this.downloadImageInReactNative(t):this.downloadImageInWeb(t)}catch(e){console.error("\u{1F534} Download failed with error:",e),this.toast.error("Error","Failed to download image")}}isReactNativeEnvironment(){return!!window.ReactNativeWebView||!!window.webkit?.messageHandlers}downloadImageInReactNative(t){let e=t.split("/").pop()||`image_${Date.now()}.jpg`;this.rnCommunicator.passActionToRN({action:"DOWNLOAD_IMAGE",value:{url:t,fileName:e,mimeType:"image/jpeg"}}),this.toast.success("Success","Download started")}downloadImageInWeb(t){fetch(t).then(e=>{if(!e.ok)throw new Error("Network response was not ok");return e.blob()}).then(e=>{let n=window.URL.createObjectURL(e),o=document.createElement("a");o.style.display="none",o.href=n;let r=t.split("/").pop()||`image_${Date.now()}.jpg`;o.download=r,document.body.appendChild(o),o.click(),setTimeout(()=>{document.body.removeChild(o),window.URL.revokeObjectURL(n)},100),this.toast.success("Success","Image downloaded")}).catch(e=>{console.error("Fetch download failed, trying direct link:",e);let n=document.createElement("a");n.href=t;let o=t.split("/").pop()||`image_${Date.now()}.jpg`;n.download=o,n.target="_blank",n.rel="noopener noreferrer",document.body.appendChild(n),n.click(),document.body.removeChild(n),this.toast.info("Info","Opening image in new tab")})}onBackClick(){this.router.navigate(["/providers/dashboard"],{queryParams:{tab:"Orders"}})}isOrderActionable(){if(!this.order)return!1;let t=(this.order.status||"").toLowerCase().trim();return!["accepted","completed","cancelled","delivered","delivered","ready"].includes(t)}acceptOrder(){!this.order||this.processingOrder||!this.isOrderActionable()||(this.processingOrder=!0,this.orderService.updateOrderStatus(this.order.id,"accepted").subscribe({next:t=>{this.toast.success("Success","Order accepted successfully."),this.loadOrderDetails(),this.processingOrder=!1},error:t=>{console.error("[OrderDetailsComponent] Error accepting order:",t),this.toast.error("Error","Failed to accept order. Please try again."),this.processingOrder=!1}}))}rejectOrder(){!this.order||this.processingOrder||!this.isOrderActionable()||(this.processingOrder=!0,this.orderService.updateOrderStatus(this.order.id,"cancelled").subscribe({next:t=>{this.toast.success("Success","Order rejected successfully."),this.loadOrderDetails(),this.processingOrder=!1},error:t=>{console.error("[OrderDetailsComponent] Error rejecting order:",t),this.toast.error("Error","Failed to reject order. Please try again."),this.processingOrder=!1}}))}testNavigation(){this.router.navigate(["/providers/dashboard"],{queryParams:{tab:"Orders"}})}onReorder(){this.toast.success("Success","Reorder functionality coming soon!")}getOrderId(){return this.order?.id?.toString()||""}getOrderDate(){return this.order?.created_at?new Date(this.order.created_at).toLocaleDateString("en-US",{month:"long",day:"numeric"}):""}getOrderTime(){return this.order?.created_at?new Date(this.order.created_at).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):""}getDeliveryAddress(){if(!this.order?.address)return"Address not available";let t=this.order.address;return`${t.line1}, ${t.city}, ${t.state} - ${t.pincode}`}getDeliveryType(){let t=this.order?.fullfillment_type;return!t||t.trim()===""?"Not available":t}getPaymentStatus(){return this.order?.payment_info?.status||"Unknown"}getPaymentMethod(){return this.order?.payment_info?.method||"Not specified"}getTotalAmount(){return this.order?.amount||0}getAssignedEmployee(){return this.order?.assigned_to_info?.employee_name||"Not assigned"}getTimeOnly(t){return t?new Date(`1970-01-01T${t}`):null}getCustomerName(){let t=this.order?.customer_name;return!t||t.trim()===""?"Not available":t}getFormDataValue(t){return this.order?.metadata?.form_data?this.order.metadata.form_data[t]:null}static \u0275fac=function(e){return new(e||i)(w(le),w(Co),w(go),w(Vt),w(te),w(At),w(Nc),w(ue),w(Ct),w(G))};static \u0275cmp=R({type:i,selectors:[["order-details"]],hostBindings:function(e,n){e&1&&v("touchstart",function(r){return n.onTouchStart(r)})("touchend",function(r){return n.onTouchEnd(r)})},decls:4,vars:3,consts:[["noFormData",""],[1,"order-details-container"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],["class","order-content",4,"ngIf"],[1,"loading-state"],[1,"loading-spinner"],[1,"error-state"],[1,"error-icon"],[1,"pi","pi-exclamation-triangle"],[1,"error-message"],[1,"retry-button",3,"click"],[1,"pi","pi-refresh","mr-2"],[1,"order-content"],[1,"header"],[1,"back-button",3,"click"],[1,"pi","pi-arrow-left"],[1,"header-title"],[1,"customer-card"],[1,"section-label"],[1,"customer-content"],[1,"customer-name"],[1,"order-status-badge"],[1,"order-card"],[1,"order-items"],[4,"ngIf"],["class","delivery-address",4,"ngIf"],["class","slot-info",4,"ngIf"],["class","payment-info",4,"ngIf"],["class","assigned-employee",4,"ngIf"],[1,"divider"],[1,"order-summary"],[1,"summary-item"],[1,"summary-label"],[1,"summary-value","order-id"],[1,"summary-value"],[1,"summary-item",2,"border-top","2px solid #dee2e6","padding-top","16px","margin-top","8px"],["class","action-buttons",4,"ngIf"],["class","order-item",4,"ngFor","ngForOf"],[1,"order-item"],[1,"quantity-badge"],[1,"item-details"],[1,"item-name"],[1,"item-price"],[1,"form-metadata"],[1,"section-title"],[4,"ngIf","ngIfElse"],[1,"form-details-wrapper"],["class","form-group",4,"ngFor","ngForOf"],[1,"form-group"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"image-preview-wrapper"],["alt","Form Image",1,"form-image",3,"click","src"],["type","button",1,"download-btn",3,"click"],[1,"pi","pi-download"],[1,"form-value","empty"],[1,"form-value"],[1,"no-form-data"],[1,"delivery-address"],[1,"address-section"],[1,"section-header"],[1,"pi","pi-map-marker"],[1,"address-text"],[1,"pi","pi-home"],[1,"slot-info"],[1,"slot-section"],[1,"pi","pi-clock"],[1,"slot-details"],[1,"slot-row"],[1,"slot-value"],[1,"payment-info"],[1,"payment-section"],[1,"pi","pi-credit-card"],[1,"payment-details"],[1,"payment-row"],[1,"payment-label"],[1,"payment-value"],["class","payment-row",4,"ngIf"],[1,"assigned-employee"],[1,"employee-section"],[1,"pi","pi-user"],[1,"employee-name"],[1,"action-buttons"],[1,"btn-accept",3,"click","disabled"],["class","pi pi-check",4,"ngIf"],["class","pi pi-spin pi-spinner",4,"ngIf"],[1,"btn-reject",3,"click","disabled"],["class","pi pi-times",4,"ngIf"],[1,"pi","pi-check"],[1,"pi","pi-spin","pi-spinner"],[1,"pi","pi-times"]],template:function(e,n){e&1&&(s(0,"div",1),y(1,g1,4,0,"div",2)(2,u1,8,1,"div",3)(3,B1,42,18,"div",4),c()),e&2&&(d(),g("ngIf",n.loading),d(),g("ngIf",n.error&&!n.loading),d(),g("ngIf",!n.loading&&!n.error&&n.order))},dependencies:[ee,W,uo,fo,Vs,bn,Zt,ce],styles:['.order-details-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#f5f7fa,#e8eef5);padding:0 0 80px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,sans-serif;touch-action:pan-y;overscroll-behavior:contain}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:50vh}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #e0e0e0;border-top:3px solid #5D157C;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:16px}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:16px}.error-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:50vh;text-align:center;padding:16px}.error-state[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:48px;color:#5d157c;margin-bottom:16px}.error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#666;font-size:16px;margin-bottom:16px}.error-state[_ngcontent-%COMP%]   .retry-button[_ngcontent-%COMP%]{background:#5d157c;color:#fff;border:none;padding:12px 24px;border-radius:8px;font-size:14px;cursor:pointer}.error-state[_ngcontent-%COMP%]   .retry-button[_ngcontent-%COMP%]:hover{background:#4d1166}.order-content[_ngcontent-%COMP%]{max-width:100%;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:14px 16px;background:#f5e8ff;position:sticky;top:0;z-index:100;box-shadow:0 2px 8px #0000000f}.header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{background:none;border:none;font-size:22px;color:#5d157c;cursor:pointer;padding:8px;margin-right:8px;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]:hover{transform:translate(-2px);opacity:.8}.header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]:active{transform:scale(.95)}.header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#5d157c;margin:0;letter-spacing:-.3px}.customer-card[_ngcontent-%COMP%]{background:#fff;margin:12px 16px;border-radius:12px;box-shadow:0 2px 8px #0000000f;padding:16px}.customer-card[_ngcontent-%COMP%]   .section-label[_ngcontent-%COMP%]{font-size:12px;color:#6c757d;font-weight:600;text-transform:uppercase;letter-spacing:.5px;margin-bottom:8px}.customer-card[_ngcontent-%COMP%]   .customer-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:16px}.customer-card[_ngcontent-%COMP%]   .customer-content[_ngcontent-%COMP%]   .customer-name[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#1a1a1a;flex:1;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.details-card[_ngcontent-%COMP%]{background:#fff;margin:0 16px 20px;border-radius:12px;box-shadow:0 2px 8px #0000000f;overflow:hidden}.order-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:24px;box-shadow:0 4px 20px #00000014;transition:box-shadow .3s ease}.order-card[_ngcontent-%COMP%]:hover{box-shadow:0 6px 30px #0000001f}.restaurant-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px}.restaurant-section[_ngcontent-%COMP%]   .restaurant-info[_ngcontent-%COMP%]{display:flex;align-items:center;flex:1}.restaurant-section[_ngcontent-%COMP%]   .restaurant-info[_ngcontent-%COMP%]   .restaurant-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:8px;overflow:hidden;margin-right:12px}.restaurant-section[_ngcontent-%COMP%]   .restaurant-info[_ngcontent-%COMP%]   .restaurant-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.restaurant-section[_ngcontent-%COMP%]   .restaurant-info[_ngcontent-%COMP%]   .restaurant-details[_ngcontent-%COMP%]   .restaurant-name[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#333;margin:0 0 4px}.restaurant-section[_ngcontent-%COMP%]   .restaurant-info[_ngcontent-%COMP%]   .restaurant-details[_ngcontent-%COMP%]   .restaurant-location[_ngcontent-%COMP%]{font-size:14px;color:#666;margin:0}.restaurant-section[_ngcontent-%COMP%]   .delivery-status[_ngcontent-%COMP%]{display:flex;align-items:center}.restaurant-section[_ngcontent-%COMP%]   .delivery-status[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{color:#4caf50;font-size:16px;margin-right:4px}.restaurant-section[_ngcontent-%COMP%]   .delivery-status[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]{font-size:14px;color:#4caf50;font-weight:500}.order-items[_ngcontent-%COMP%]{margin-bottom:24px}.order-items[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;margin-bottom:12px;padding:16px;background:linear-gradient(135deg,#f8f9fb,#fafbfc);border-radius:12px;border:1px solid #e8ecf1;transition:all .3s ease}.order-items[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]:hover{transform:translate(4px);box-shadow:0 2px 12px #0000000f}.order-items[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]   .quantity-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#5d157c,#3c0e50);color:#fff;font-size:13px;font-weight:700;padding:6px 12px;border-radius:16px;margin-right:16px;min-width:32px;text-align:center;box-shadow:0 2px 8px #5d157c4d}.order-items[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]{flex:1}.order-items[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#1a1a1a;margin-bottom:6px;line-height:1.4}.order-items[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-variants[_ngcontent-%COMP%]{font-size:13px;color:#6b7280;margin-bottom:4px}.order-items[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-price[_ngcontent-%COMP%]{font-size:15px;font-weight:700;color:#5d157c;margin-top:4px}.order-items[_ngcontent-%COMP%]   .form-metadata[_ngcontent-%COMP%]{background:linear-gradient(135deg,#faf9fc,#f5f3f9);border-radius:16px;padding:20px;border:1px solid #e8e5f0}.order-items[_ngcontent-%COMP%]   .form-metadata[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#2d3748;margin:0 0 20px;padding-bottom:12px;border-bottom:2px solid #5D157C;display:inline-block}.order-items[_ngcontent-%COMP%]   .form-metadata[_ngcontent-%COMP%]   .form-details-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.order-items[_ngcontent-%COMP%]   .form-metadata[_ngcontent-%COMP%]   .form-details-wrapper[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;padding:12px;background:#fff;border-radius:8px;margin-bottom:8px;transition:all .2s ease}.order-items[_ngcontent-%COMP%]   .form-metadata[_ngcontent-%COMP%]   .form-details-wrapper[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #5d157c14}.order-items[_ngcontent-%COMP%]   .form-metadata[_ngcontent-%COMP%]   .form-details-wrapper[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px;font-weight:700;color:#5d157c;text-transform:uppercase;letter-spacing:.5px}.order-items[_ngcontent-%COMP%]   .form-metadata[_ngcontent-%COMP%]   .form-details-wrapper[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-value[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#291b3c;line-height:1.5}.order-items[_ngcontent-%COMP%]   .form-metadata[_ngcontent-%COMP%]   .form-details-wrapper[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-value.empty[_ngcontent-%COMP%]{color:#a0aec0;font-style:italic}.order-items[_ngcontent-%COMP%]   .form-metadata[_ngcontent-%COMP%]   .form-details-wrapper[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .image-preview-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;align-items:flex-start;padding:8px 0}.order-items[_ngcontent-%COMP%]   .form-metadata[_ngcontent-%COMP%]   .form-details-wrapper[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .image-preview-wrapper[_ngcontent-%COMP%]   .form-image[_ngcontent-%COMP%]{max-width:100%;width:180px;height:auto;border-radius:12px;cursor:pointer;border:1px solid #eee;box-shadow:0 2px 8px #0000000d;transition:transform .2s ease}.order-items[_ngcontent-%COMP%]   .form-metadata[_ngcontent-%COMP%]   .form-details-wrapper[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .image-preview-wrapper[_ngcontent-%COMP%]   .form-image[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.order-items[_ngcontent-%COMP%]   .form-metadata[_ngcontent-%COMP%]   .form-details-wrapper[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .image-preview-wrapper[_ngcontent-%COMP%]   .download-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:#5d157c;color:#fff;border:none;padding:10px 20px;border-radius:10px;font-size:13px;font-weight:700;cursor:pointer;transition:all .2s ease;box-shadow:0 4px 12px #5d157c4d}.order-items[_ngcontent-%COMP%]   .form-metadata[_ngcontent-%COMP%]   .form-details-wrapper[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .image-preview-wrapper[_ngcontent-%COMP%]   .download-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.order-items[_ngcontent-%COMP%]   .form-metadata[_ngcontent-%COMP%]   .form-details-wrapper[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .image-preview-wrapper[_ngcontent-%COMP%]   .download-btn[_ngcontent-%COMP%]:hover{background:#430f59;transform:translateY(-2px);box-shadow:0 6px 16px #5d157c66}.order-items[_ngcontent-%COMP%]   .form-metadata[_ngcontent-%COMP%]   .form-details-wrapper[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .image-preview-wrapper[_ngcontent-%COMP%]   .download-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.order-items[_ngcontent-%COMP%]   .form-metadata[_ngcontent-%COMP%]   .form-details-wrapper[_ngcontent-%COMP%]   .dynamic-group[_ngcontent-%COMP%]{gap:12px}.order-items[_ngcontent-%COMP%]   .form-metadata[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:none}.delivery-address[_ngcontent-%COMP%]{margin-bottom:24px}.delivery-address[_ngcontent-%COMP%]   .address-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#2d3748;margin:0 0 12px;display:flex;align-items:center;gap:8px}.delivery-address[_ngcontent-%COMP%]   .address-section[_ngcontent-%COMP%]   .address-text[_ngcontent-%COMP%]{font-size:14px;color:#4a5568;line-height:1.7;margin:0;padding:16px;background:linear-gradient(135deg,#f8f9fb,#fafbfc);border-radius:12px;border:1px solid #e8ecf1;box-shadow:0 2px 8px #0000000a}.slot-info[_ngcontent-%COMP%]{margin-bottom:24px}.slot-info[_ngcontent-%COMP%]   .slot-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#2d3748;margin:0 0 12px;display:flex;align-items:center;gap:8px}.slot-info[_ngcontent-%COMP%]   .slot-section[_ngcontent-%COMP%]   .slot-details[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fb,#fafbfc);border-radius:12px;padding:16px;border:1px solid #e8ecf1}.slot-info[_ngcontent-%COMP%]   .slot-section[_ngcontent-%COMP%]   .slot-details[_ngcontent-%COMP%]   .slot-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:0}.slot-info[_ngcontent-%COMP%]   .slot-section[_ngcontent-%COMP%]   .slot-details[_ngcontent-%COMP%]   .slot-row[_ngcontent-%COMP%]   .slot-label[_ngcontent-%COMP%]{font-size:14px;color:#6c757d;font-weight:600}.slot-info[_ngcontent-%COMP%]   .slot-section[_ngcontent-%COMP%]   .slot-details[_ngcontent-%COMP%]   .slot-row[_ngcontent-%COMP%]   .slot-value[_ngcontent-%COMP%]{font-size:15px;font-weight:700;color:#212529;padding:6px 12px;background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000000d}.payment-info[_ngcontent-%COMP%]{margin-bottom:24px}.payment-info[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#2d3748;margin:0 0 12px;display:flex;align-items:center;gap:8px}.payment-info[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fb,#fafbfc);border-radius:12px;padding:16px;border:1px solid #e8ecf1}.payment-info[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]   .payment-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid #e8ecf1}.payment-info[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]   .payment-row[_ngcontent-%COMP%]:last-child{border-bottom:none;padding-bottom:0}.payment-info[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]   .payment-row[_ngcontent-%COMP%]:first-child{padding-top:0}.payment-info[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]   .payment-row[_ngcontent-%COMP%]   .payment-label[_ngcontent-%COMP%]{font-size:14px;color:#6c757d;font-weight:600}.payment-info[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]   .payment-row[_ngcontent-%COMP%]   .payment-value[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:#212529}.payment-info[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]   .payment-row[_ngcontent-%COMP%]   .payment-value.status-pending[_ngcontent-%COMP%]{color:#ffc107;padding:4px 12px;background:#fff3cd;border-radius:12px}.payment-info[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]   .payment-row[_ngcontent-%COMP%]   .payment-value.status-paid[_ngcontent-%COMP%]{color:#28a745;padding:4px 12px;background:#d4edda;border-radius:12px}.payment-info[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]   .payment-row[_ngcontent-%COMP%]   .payment-value.status-failed[_ngcontent-%COMP%]{color:#dc3545;padding:4px 12px;background:#f8d7da;border-radius:12px}.assigned-employee[_ngcontent-%COMP%]{margin-bottom:24px}.assigned-employee[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#2d3748;margin:0 0 12px;display:flex;align-items:center;gap:8px}.assigned-employee[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .employee-name[_ngcontent-%COMP%]{font-size:15px;color:#212529;margin:0;padding:16px;background:linear-gradient(135deg,#f8f9fb,#fafbfc);border-radius:12px;font-weight:600;border:1px solid #e8ecf1;display:flex;align-items:center;gap:12px}.assigned-employee[_ngcontent-%COMP%]   .employee-section[_ngcontent-%COMP%]   .employee-name[_ngcontent-%COMP%]:before{content:"";width:40px;height:40px;background:#5d157c;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:16px;flex-shrink:0}.divider[_ngcontent-%COMP%]{height:1px;background:#e0e0e0;margin:20px 0}.rating-section[_ngcontent-%COMP%]{display:flex;align-items:flex-start;margin-bottom:24px}.rating-section[_ngcontent-%COMP%]   .rating-column[_ngcontent-%COMP%]{flex:1;text-align:center}.rating-section[_ngcontent-%COMP%]   .rating-column[_ngcontent-%COMP%]   .rating-title[_ngcontent-%COMP%]{font-size:14px;color:#666;margin:0 0 12px;font-weight:500}.rating-section[_ngcontent-%COMP%]   .rating-column[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:4px}.rating-section[_ngcontent-%COMP%]   .rating-column[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]   .pi[_ngcontent-%COMP%]{font-size:20px;color:#ddd;cursor:pointer;transition:color .2s}.rating-section[_ngcontent-%COMP%]   .rating-column[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]   .pi.pi-star-fill[_ngcontent-%COMP%], .rating-section[_ngcontent-%COMP%]   .rating-column[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]   .pi[_ngcontent-%COMP%]:hover{color:gold}.rating-section[_ngcontent-%COMP%]   .rating-divider[_ngcontent-%COMP%]{width:1px;background:#e0e0e0;margin:0 20px;height:60px}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:12px;padding:0 20px;margin:12px 0}.action-buttons[_ngcontent-%COMP%]   .reorder-button[_ngcontent-%COMP%]{background:#5d157c;color:#fff;border:none;padding:14px 32px;border-radius:25px;font-size:16px;font-weight:600;cursor:pointer;transition:background .2s}.action-buttons[_ngcontent-%COMP%]   .reorder-button[_ngcontent-%COMP%]:hover{background:#5d157c}.action-buttons[_ngcontent-%COMP%]   .btn-accept[_ngcontent-%COMP%], .action-buttons[_ngcontent-%COMP%]   .btn-reject[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;gap:8px;padding:14px 24px;border-radius:12px;font-size:15px;font-weight:600;cursor:pointer;border:none;transition:all .3s ease;min-height:48px}.action-buttons[_ngcontent-%COMP%]   .btn-accept[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .action-buttons[_ngcontent-%COMP%]   .btn-reject[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.action-buttons[_ngcontent-%COMP%]   .btn-accept[_ngcontent-%COMP%]:disabled, .action-buttons[_ngcontent-%COMP%]   .btn-reject[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.action-buttons[_ngcontent-%COMP%]   .btn-accept[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;box-shadow:0 4px 12px #10b9814d}.action-buttons[_ngcontent-%COMP%]   .btn-accept[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#059669,#047857);transform:translateY(-2px);box-shadow:0 6px 16px #10b98166}.action-buttons[_ngcontent-%COMP%]   .btn-accept[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.action-buttons[_ngcontent-%COMP%]   .btn-reject[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff;box-shadow:0 4px 12px #ef44444d}.action-buttons[_ngcontent-%COMP%]   .btn-reject[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#dc2626,#b91c1c);transform:translateY(-2px);box-shadow:0 6px 16px #ef444466}.action-buttons[_ngcontent-%COMP%]   .btn-reject[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.order-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;background:linear-gradient(135deg,#f8f9fa,#e9ecef);padding:20px;border-radius:16px;border:2px dashed #dee2e6}.order-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.order-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%]{font-size:14px;color:#6c757d;font-weight:600}.order-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:#212529}.order-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]:last-child{font-size:14px;color:#5d157c;font-weight:800}.order-summary[_ngcontent-%COMP%]   .summary-separator[_ngcontent-%COMP%]{display:none}.order-status-badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:14px;font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.5px;display:inline-flex;align-items:center;gap:5px;box-shadow:0 2px 6px #00000014;transition:all .3s ease;flex-shrink:0}.order-status-badge[_ngcontent-%COMP%]:before{content:"";width:6px;height:6px;border-radius:50%;display:inline-block;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.order-status-badge.status-pending[_ngcontent-%COMP%]{background:#fff3cd;color:#856404;border:1px solid #ffeaa7}.order-status-badge.status-pending[_ngcontent-%COMP%]:before{background:#ffc107}.order-status-badge.status-accepted[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460;border:1px solid #bee5eb}.order-status-badge.status-accepted[_ngcontent-%COMP%]:before{background:#17a2b8}.order-status-badge.status-delivered[_ngcontent-%COMP%], .order-status-badge.status-completed[_ngcontent-%COMP%]{background:#d4edda;color:#155724;border:1px solid #c3e6cb}.order-status-badge.status-delivered[_ngcontent-%COMP%]:before, .order-status-badge.status-completed[_ngcontent-%COMP%]:before{background:#28a745}.order-status-badge.status-cancelled[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.order-status-badge.status-cancelled[_ngcontent-%COMP%]:before{background:#dc3545}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1;transform:scale(1)}50%{opacity:.7;transform:scale(1.1)}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 767px){.order-details-container[_ngcontent-%COMP%]{touch-action:pan-y;-webkit-overflow-scrolling:touch}.order-card[_ngcontent-%COMP%]{transition:transform .2s ease}.order-card[_ngcontent-%COMP%]:active{transform:scale(.98)}.customer-card[_ngcontent-%COMP%], .details-card[_ngcontent-%COMP%]{transition:transform .2s ease}.customer-card[_ngcontent-%COMP%]:active, .details-card[_ngcontent-%COMP%]:active{transform:scale(.99)}.customer-card[_ngcontent-%COMP%]{margin:12px;padding:14px}.customer-card[_ngcontent-%COMP%]   .section-label[_ngcontent-%COMP%]{font-size:11px;margin-bottom:6px}.customer-card[_ngcontent-%COMP%]   .customer-content[_ngcontent-%COMP%]   .customer-name[_ngcontent-%COMP%]{font-size:15px}.details-card[_ngcontent-%COMP%]{margin:0 12px 20px}.card-section[_ngcontent-%COMP%]{padding:14px}.order-status-badge[_ngcontent-%COMP%]{font-size:10px;padding:5px 10px}}@media (max-width: 380px){.header[_ngcontent-%COMP%]{padding:12px 14px}.header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{font-size:16px}.header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{font-size:20px;padding:6px}.customer-card[_ngcontent-%COMP%]{margin:10px;padding:12px}.customer-card[_ngcontent-%COMP%]   .section-label[_ngcontent-%COMP%]{font-size:10px;margin-bottom:6px}.customer-card[_ngcontent-%COMP%]   .customer-content[_ngcontent-%COMP%]{gap:10px}.customer-card[_ngcontent-%COMP%]   .customer-content[_ngcontent-%COMP%]   .customer-name[_ngcontent-%COMP%]{font-size:14px}.details-card[_ngcontent-%COMP%]{margin:0 10px 20px}.card-section[_ngcontent-%COMP%]{padding:12px}.card-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:15px}.card-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:14px}.order-status-badge[_ngcontent-%COMP%]{font-size:9px;padding:4px 8px}.order-status-badge[_ngcontent-%COMP%]:before{width:5px;height:5px}}']})};var $t=()=>({standalone:!0});function j1(i,t){if(i&1){let e=E();s(0,"button",35),v("click",function(){b(e);let o=_();return C(o.clearProviderSearch())}),h(1,"i",36),c()}if(i&2){let e=_();g("disabled",e.isLoadingProvider)}}function U1(i,t){i&1&&h(0,"i",37)}function G1(i,t){if(i&1&&(s(0,"div",44),p(1),c()),i&2){let e=_().$implicit,n=_(2);d(),T(" ",n.formatBusinessType(e.business_type)," ")}}function q1(i,t){if(i&1){let e=E();s(0,"div",40),v("click",function(){let o=b(e).$implicit,r=_(2);return C(r.selectProviderFromDropdown(o))}),s(1,"div",41)(2,"div",42),p(3),c(),y(4,G1,2,1,"div",43),c()()}if(i&2){let e=t.$implicit;d(3),T(" ",e.business_name||e.display_name||e.name||"N/A"," "),d(),g("ngIf",e.business_type)}}function W1(i,t){if(i&1&&(s(0,"div",38),y(1,q1,5,2,"div",39),c()),i&2){let e=_();d(),g("ngForOf",e.providers)}}function H1(i,t){i&1&&(s(0,"div",38)(1,"div",45),p(2," No providers found. Try a different search term. "),c()())}function $1(i,t){if(i&1&&(s(0,"div",50),p(1),c()),i&2){let e=_(2);d(),T(" ",e.formatBusinessType(e.selectedProvider.business_type)," ")}}function Y1(i,t){if(i&1&&(s(0,"div",46)(1,"div",47)(2,"div",48),p(3),c(),y(4,$1,2,1,"div",49),c()()),i&2){let e=_();d(3),T(" ",e.selectedProvider.business_name||e.selectedProvider.display_name||e.selectedProvider.name||"N/A"," "),d(),g("ngIf",e.selectedProvider.business_type)}}function K1(i,t){i&1&&(s(0,"div",51),p(1," Type at least 2 characters to search providers "),c())}function X1(i,t){i&1&&(s(0,"small",53),p(1),M(2,"translate"),c()),i&2&&(d(),S(O(2,1,"order-review.message_required")))}function Q1(i,t){if(i&1&&(s(0,"div",4)(1,"label",5),p(2),M(3,"translate"),c(),h(4,"input",52),M(5,"translate"),y(6,X1,3,3,"small",19),c()),i&2){let e,n=_();d(2),S(O(3,3,"order-review.message")),d(2),ne("placeholder",O(5,5,"order-review.message_required")),d(2),g("ngIf",((e=n.reviewForm.get("note_msg"))==null?null:e.invalid)&&((e=n.reviewForm.get("note_msg"))==null?null:e.touched))}}function J1(i,t){i&1&&(s(0,"div",54),h(1,"p-checkbox",55),M(2,"translate"),h(3,"p-checkbox",56),M(4,"translate"),c()),i&2&&(d(),ne("label",O(2,2,"order-review.today")),d(2),ne("label",O(4,4,"order-review.schedule")))}function Z1(i,t){i&1&&(s(0,"small",53),p(1),M(2,"translate"),c()),i&2&&(d(),S(O(2,1,"order-review.select_schedule_option")))}function ex(i,t){i&1&&(s(0,"div",54),h(1,"p-checkbox",57),M(2,"translate"),h(3,"p-checkbox",58),M(4,"translate"),c()),i&2&&(d(),ne("label",O(2,2,"order-review.home_delivery")),d(2),ne("label",O(4,4,"order-review.pickup")))}function tx(i,t){i&1&&(s(0,"small",53),p(1),M(2,"translate"),c()),i&2&&(d(),S(O(2,1,"order-review.select_delivery_method")))}var Jr=class i{constructor(t,e,n,o,r,a,l){this.fb=t;this.providerInfoService=e;this.providerListService=n;this.authService=o;this.toast=r;this.router=a;this.backHandleService=l;this.reviewForm=this.fb.group({noteMsgEnabled:[!1],note_msg:[""],include_service:[!1],order_schedule_enabled:[!1],order_today:[!1],order_schedule:[!1],button_label:[""],delivery_method_enabled:[!1],delivery_home:[!1],delivery_pickup:[!1]}),this.reviewForm.get("noteMsgEnabled")?.valueChanges.subscribe(m=>{let u=this.reviewForm.get("note_msg");m?u?.addValidators([A.required,A.minLength(5)]):(u?.clearValidators(),u?.setValue("")),u?.updateValueAndValidity({emitEvent:!1})}),this.searchSubject$.pipe(Xt(400),Qt(),so(m=>m&&m.trim().length>=2?(this.isSearchingProviders=!0,this.providerListService.searchProviders(m.trim(),0,20).pipe(qe(u=>(console.error("Error searching providers:",u),this.toast.error("Error","Failed to search providers"),De([]))))):(this.providers=[],De([]))),Pt(this.destroy$)).subscribe(m=>{this.providers=m,this.isSearchingProviders=!1,this.showProviderDropdown=m.length>0&&this.providerSearchText.trim().length>=2})}destroy$=new Yt;searchSubject$=new Yt;ngOnInit(){this.registerBackAction()}ngOnDestroy(){setTimeout(()=>{this.cleanupBackAction()},100),this.destroy$.next(),this.destroy$.complete(),this.searchSubject$.complete()}registerBackAction(){let t=this.router.url;console.log("\u{1F519} [OrderReviewComponent] Registering back action for URL:",t),[t,t.split("?")[0],"/providers/order-review"].forEach((n,o)=>{let r={id:`order-review-back-action-${o}`,actionType:"navigate",backNavigationUrl:"/providers/dashboard",callback:()=>{},value:"",forPageUrl:n};this.backHandleService.backAction=this.backHandleService.backAction.filter(a=>!a.id.startsWith("order-review-back-action-")||a.forPageUrl!==n),this.backHandleService.backAction.push(r),console.log("\u{1F519} [OrderReviewComponent] Back action registered:",r)}),console.log("\u{1F519} [OrderReviewComponent] Total back actions:",this.backHandleService.backAction.length)}cleanupBackAction(){let t=this.router.url;console.log("\u{1F519} [OrderReviewComponent] Cleaning up back action for URL:",t);let e=this.backHandleService.backAction.length;this.backHandleService.backAction=this.backHandleService.backAction.filter(o=>!o.id.startsWith("order-review-back-action-"));let n=this.backHandleService.backAction.length;console.log("\u{1F519} [OrderReviewComponent] Removed",e-n,"back actions")}reviewForm;searchProvider="";autoMessage=!0;isLoadingProvider=!1;currentSettingsId;currentProviderId;providers=[];selectedProvider=null;isSearchingProviders=!1;providerSearchText="";showProviderDropdown=!1;scheduleOptions=[{label:"today",value:"today"},{label:"tomorrow",value:"tomorrow"},{label:"custom",value:"custom"}];orderSchedule="today";deliveryOptions=[{label:"pickup",value:"pickup"},{label:"delivery",value:"delivery"},{label:"instant",value:"instant"},{label:"self",value:"self"}];deliveryMethod="pickup";orderType=["on_demand"];orderTypeOptions=[{label:"On Demand",value:"on_demand"},{label:"Product Subscription",value:"product_subscription"},{label:"Service Subscription",value:"service_subscription"},{label:"Form",value:"form"}];includeService=!0;productTypes=[];productTypeOptions=[{label:"Standard",value:"standard"},{label:"Flexible",value:"flexible"},{label:"Product Subscription",value:"product_subscription"},{label:"Hybrid",value:"hybrid"},{label:"Service subscription",value:"service"},{label:"Forms",value:"forms"}];requireKyc=!1;enableUserById=!1;orderStatusList=[{label:"accepted",value:"accepted"},{label:"processing",value:"processing"},{label:"pending",value:"pending"},{label:"weekly",value:"weekly"},{label:"completed",value:"completed"},{label:"cancelled",value:"cancelled"},{label:"delayed",value:"delayed"},{label:"delivered",value:"delivered"}];selectedStatuses=[];exploreMemberOnly=!1;visibleGlobal=!1;paymentCashOnHand=!0;paymentOnline=!0;convenienceFee=!1;platformFee=!1;yesNoOptions=[{label:"Yes",value:"yes"},{label:"No",value:"no"}];enableUserMyId="yes";get requiresAtLeastOneSchedule(){return this.reviewForm.get("order_schedule_enabled")?.value?!(this.reviewForm.get("order_today")?.value||this.reviewForm.get("order_schedule")?.value):!1}get requiresAtLeastOneDelivery(){return this.reviewForm.get("delivery_method_enabled")?.value?!(this.reviewForm.get("delivery_home")?.value||this.reviewForm.get("delivery_pickup")?.value):!1}get requiresAtLeastOnePayment(){return!(this.paymentCashOnHand||this.paymentOnline)}get requiresProductTypes(){return(this.productTypes?.length||0)===0}onProviderSearchInput(t){let e=t?.target?.value||this.providerSearchText||"";this.providerSearchText=e,e.trim().length>=2?this.searchSubject$.next(e):(this.providers=[],this.showProviderDropdown=!1)}selectProviderFromDropdown(t){this.selectedProvider=t,this.currentProviderId=t.provider_id,this.providerSearchText=t.business_name||t.display_name||t.name||"",this.showProviderDropdown=!1,this.loadProviderSettingsById(t.provider_id)}clearProviderSearch(){this.providerSearchText="",this.providers=[],this.selectedProvider=null,this.showProviderDropdown=!1,this.currentProviderId=void 0,this.currentSettingsId=void 0}onInputBlur(){setTimeout(()=>{this.showProviderDropdown=!1},200)}onInputFocus(){this.providers.length>0&&this.providerSearchText.trim().length>=2&&(this.showProviderDropdown=!0)}formatBusinessType(t){return t?Array.isArray(t)?t.join(", "):String(t):""}loadProviderSettingsById(t){this.isLoadingProvider=!0,this.providerInfoService.getProviderSettings(t).subscribe({next:e=>{this.currentSettingsId=e.id,this.loadProviderSettings(e),this.isLoadingProvider=!1,this.toast.success("Success","Provider settings loaded successfully")},error:e=>{console.error("Error loading provider settings:",e),e?.status===404?(this.currentSettingsId=void 0,this.toast.info("Info","No existing settings found. You can create new settings.")):this.toast.error("Error","Failed to load provider settings"),this.isLoadingProvider=!1}})}onSearchProvider(){let t=parseInt(this.searchProvider.trim(),10);if(!t||isNaN(t)){this.toast.error("Error","Please enter a valid provider ID");return}this.loadProviderSettingsById(t)}loadProviderSettings(t){this.reviewForm.patchValue({order_schedule_enabled:t.slots_enabled||!1,noteMsgEnabled:!!(t.note&&t.note.trim()),note_msg:t.note||"",button_label:t.button_label||"",include_service:!1}),this.exploreMemberOnly=t.member_only||!1,this.visibleGlobal=t.visible||!1,this.enableUserMyId=t.my_id?"yes":"no",this.paymentCashOnHand=t.payment_type?.includes("cash")||!1,this.paymentOnline=t.payment_type?.includes("online")||!1,this.convenienceFee=t.fees_config?.includes("convenience")||!1,this.platformFee=t.fees_config?.includes("platform")||!1,t.metadata&&Array.isArray(t.metadata)&&this.parseMetadata(t.metadata),t.order_status&&Array.isArray(t.order_status)?this.selectedStatuses=[...t.order_status]:this.selectedStatuses=[]}parseMetadata(t){let e=new Set;t.forEach(o=>{Object.keys(o).forEach(r=>{r==="standard"?e.add("standard"):r==="flexible"?e.add("flexible"):r==="product_subscription"?e.add("product_subscription"):r==="service_subscription"?e.add("service"):r==="hybrid"?e.add("hybrid"):r==="forms"&&e.add("forms")})}),this.productTypes=Array.from(e);let n=t[0];if(n){let o=Object.keys(n)[0],r=n[o];if(r){let a=r.deliver||[],l=a.some(f=>f!=="none");this.reviewForm.patchValue({delivery_method_enabled:l,delivery_home:a.includes("Door_step")||a.includes("home"),delivery_pickup:a.includes("pickup")});let m=r.book_type||[],u=m.some(f=>f!=="default");this.reviewForm.patchValue({order_schedule_enabled:u,order_today:m.includes("today"),order_schedule:m.includes("schedule")})}}}onSave(){if(this.reviewForm.get("noteMsgEnabled")?.value&&this.reviewForm.get("note_msg")?.invalid){this.reviewForm.get("note_msg")?.markAsTouched();return}let t=this.reviewForm.get("order_schedule_enabled")?.value,e=this.reviewForm.get("delivery_method_enabled")?.value;if(t&&this.requiresAtLeastOneSchedule||e&&this.requiresAtLeastOneDelivery||this.requiresAtLeastOnePayment||this.requiresProductTypes)return;let n=this.currentProviderId||parseInt(this.searchProvider.trim(),10)||this.authService.getSelectedProviderId?.()||this.authService.getProviderInfo?.()?.[0]?.provider_id||0;if(!n||n===0){this.toast.error("Error","Please enter a provider ID first");return}let o=this.reviewForm.get("delivery_home")?.value===!0,r=this.reviewForm.get("delivery_pickup")?.value===!0,a=this.reviewForm.get("order_today")?.value===!0,l=this.reviewForm.get("order_schedule")?.value===!0,m=()=>e?[...r?["pickup"]:[],...o?["Door_step"]:[]]:[],u=(I=!1)=>{let F=I?["default"]:[];return t?[...F,...a?["today"]:[],...l?["schedule"]:[]]:F},f=[];(this.productTypes||[]).forEach(I=>{I==="standard"?f.push({standard:{deliver:["none",...m()],book_type:u(!0)}}):I==="flexible"?f.push({flexible:{deliver:m(),book_type:u(!1)}}):I==="product_subscription"?f.push({product_subscription:{deliver:m(),book_type:u(!1)}}):I==="service_subscription"?f.push({service_subscription:{deliver:m(),book_type:u(!1)}}):I==="hybrid"?f.push({hybrid:{deliver:m(),book_type:u(!1)}}):(I==="forms"||I==="form")&&f.push({forms:{deliver:m(),book_type:u(!1)}})});let P={provider_id:n,slots_enabled:t===!0,note:this.reviewForm.get("note_msg")?.value||"",button_label:this.reviewForm.get("button_label")?.value||"",member_only:this.exploreMemberOnly===!0,visible:this.visibleGlobal===!0,my_id:this.enableUserMyId==="yes",fees:this.convenienceFee||this.platformFee,fees_config:[...this.convenienceFee?["convenience"]:[],...this.platformFee?["platform"]:[]],metadata:f,payment_type:[...this.paymentCashOnHand?["cash"]:[],...this.paymentOnline?["online"]:[]],order_status:this.selectedStatuses||[]},k=!!this.currentSettingsId;this.providerInfoService.createOrUpdateProviderSettings(P,this.currentSettingsId).subscribe({next:I=>{!k&&I?.id&&(this.currentSettingsId=I.id),this.toast.success("Success",k?"Settings updated successfully":"Settings created successfully")},error:I=>{console.error("Error saving settings:",I),this.toast.error("Failed",`Failed to ${k?"update":"create"} settings`)}})}static \u0275fac=function(e){return new(e||i)(w(ue),w(In),w(Bc),w(G),w(te),w(le),w(Ct))};static \u0275cmp=R({type:i,selectors:[["app-order-review"]],decls:113,vars:117,consts:[[3,"title","icon","showBack"],[1,"review-page","grid"],[1,"filter-panel","col-12","md:col-4",3,"formGroup"],[1,"card"],[1,"form-section"],[1,"form-label"],[1,"provider-search-container"],[1,"search-box"],["placeholder","Search by provider name or business type...","type","text","autocomplete","off",1,"input-style",3,"ngModelChange","input","focus","blur","ngModel","ngModelOptions","disabled"],["class","icon-btn","type","button",3,"disabled","click",4,"ngIf"],["class","pi pi-spin pi-spinner search-spinner",4,"ngIf"],["class","provider-dropdown",4,"ngIf"],["class","selected-provider-display",4,"ngIf"],["class","search-hint",4,"ngIf"],[1,"toggle-row"],["formControlName","noteMsgEnabled"],["class","form-section",4,"ngIf"],["formControlName","order_schedule_enabled"],["class","checkbox-group order-schedule-options",4,"ngIf"],["class","error",4,"ngIf"],["formControlName","delivery_method_enabled"],[1,"form-block"],[1,"block-label"],["optionLabel","label","optionValue","value","defaultLabel","",1,"full-width",3,"ngModelChange","options","ngModel","ngModelOptions"],["optionLabel","label","optionValue","value","display","chip","panelStyleClass","custom-multiselect-panel",1,"custom-multiselect",3,"ngModelChange","options","ngModel","ngModelOptions","maxSelectedLabels","showToggleAll","placeholder"],["formControlName","include_service"],["formControlName","button_label","placeholder","Eg:  Book,  Donate,  ",1,"input-style"],["optionLabel","label","optionValue","value","display","chip","panelStyleClass","custom-multiselect-panel","defaultLabel","",1,"custom-multiselect",3,"ngModelChange","options","ngModel","ngModelOptions","showToggleAll"],[1,"access-card","card-lite"],[1,"row-line","with-toggle"],[3,"ngModelChange","ngModel","ngModelOptions"],[1,"sub-card"],[1,"section-title"],["optionLabel","label","optionValue","value",1,"yes-no",3,"ngModelChange","options","ngModel","ngModelOptions"],["pButton","","type","button","label","Save",1,"p-button-primary","full-width",3,"click","disabled"],["type","button",1,"icon-btn",3,"click","disabled"],[1,"pi","pi-times"],[1,"pi","pi-spin","pi-spinner","search-spinner"],[1,"provider-dropdown"],["class","provider-dropdown-item",3,"click",4,"ngFor","ngForOf"],[1,"provider-dropdown-item",3,"click"],[1,"provider-item"],[1,"provider-name"],["class","provider-type",4,"ngIf"],[1,"provider-type"],[1,"no-results"],[1,"selected-provider-display"],[1,"selected-provider-info"],[1,"selected-provider-name"],["class","selected-provider-type",4,"ngIf"],[1,"selected-provider-type"],[1,"search-hint"],["formControlName","note_msg",1,"input-style",3,"placeholder"],[1,"error"],[1,"checkbox-group","order-schedule-options"],["binary","true","formControlName","order_today",3,"label"],["binary","true","formControlName","order_schedule",3,"label"],["binary","true","formControlName","delivery_home",3,"label"],["binary","true","formControlName","delivery_pickup",3,"label"]],template:function(e,n){if(e&1&&(h(0,"app-title-card",0),s(1,"div",1)(2,"div",2)(3,"mat-card",3)(4,"div",4)(5,"label",5),p(6),M(7,"translate"),c(),s(8,"div",6)(9,"div",7)(10,"input",8),N("ngModelChange",function(r){return z(n.providerSearchText,r)||(n.providerSearchText=r),r}),v("input",function(r){return n.onProviderSearchInput(r)})("focus",function(){return n.onInputFocus()})("blur",function(){return n.onInputBlur()}),c(),y(11,j1,2,1,"button",9)(12,U1,1,0,"i",10),c(),y(13,W1,2,1,"div",11)(14,H1,3,0,"div",11),c(),y(15,Y1,5,2,"div",12)(16,K1,2,0,"div",13),c(),s(17,"div",14)(18,"label",5),p(19),M(20,"translate"),c(),h(21,"p-inputSwitch",15),c(),y(22,Q1,7,7,"div",16),s(23,"div",14)(24,"label",5),p(25),M(26,"translate"),c(),h(27,"p-inputSwitch",17),c(),y(28,J1,5,6,"div",18)(29,Z1,3,3,"small",19),s(30,"div",14)(31,"label",5),p(32),M(33,"translate"),c(),h(34,"p-inputSwitch",20),c(),y(35,ex,5,6,"div",18)(36,tx,3,3,"small",19),s(37,"div",21)(38,"label",22),p(39),M(40,"translate"),c(),s(41,"p-multiSelect",23),N("ngModelChange",function(r){return z(n.orderType,r)||(n.orderType=r),r}),c()(),s(42,"div",4)(43,"label",5),p(44),M(45,"translate"),c(),s(46,"p-multiSelect",24),M(47,"translate"),N("ngModelChange",function(r){return z(n.selectedStatuses,r)||(n.selectedStatuses=r),r}),c()(),s(48,"div",14)(49,"label",5),p(50),M(51,"translate"),c(),h(52,"p-inputSwitch",25),c(),s(53,"div",4)(54,"label",5),p(55),M(56,"translate"),c(),h(57,"input",26),c(),s(58,"div",21)(59,"label",22),p(60),M(61,"translate"),c(),s(62,"p-multiSelect",27),N("ngModelChange",function(r){return z(n.productTypes,r)||(n.productTypes=r),r}),c()(),s(63,"div",21)(64,"label",22),p(65),M(66,"translate"),c(),s(67,"div",28)(68,"div",29)(69,"span"),p(70),M(71,"translate"),c(),s(72,"p-inputSwitch",30),N("ngModelChange",function(r){return z(n.exploreMemberOnly,r)||(n.exploreMemberOnly=r),r}),c()(),s(73,"div",29)(74,"span"),p(75),M(76,"translate"),c(),s(77,"p-inputSwitch",30),N("ngModelChange",function(r){return z(n.visibleGlobal,r)||(n.visibleGlobal=r),r}),c()()()(),s(78,"div",31)(79,"div",32),p(80),M(81,"translate"),c(),s(82,"div",29)(83,"span"),p(84),M(85,"translate"),c(),s(86,"p-inputSwitch",30),N("ngModelChange",function(r){return z(n.paymentCashOnHand,r)||(n.paymentCashOnHand=r),r}),c()(),s(87,"div",29)(88,"span"),p(89),M(90,"translate"),c(),s(91,"p-inputSwitch",30),N("ngModelChange",function(r){return z(n.paymentOnline,r)||(n.paymentOnline=r),r}),c()()(),s(92,"div",21)(93,"label",22),p(94),M(95,"translate"),c(),s(96,"div",29)(97,"span"),p(98),M(99,"translate"),c(),s(100,"p-inputSwitch",30),N("ngModelChange",function(r){return z(n.convenienceFee,r)||(n.convenienceFee=r),r}),c()(),s(101,"div",29)(102,"span"),p(103),M(104,"translate"),c(),s(105,"p-inputSwitch",30),N("ngModelChange",function(r){return z(n.platformFee,r)||(n.platformFee=r),r}),c()()(),s(106,"div",21)(107,"label",22),p(108),M(109,"translate"),c(),s(110,"p-selectButton",33),N("ngModelChange",function(r){return z(n.enableUserMyId,r)||(n.enableUserMyId=r),r}),c()(),s(111,"div",21)(112,"button",34),v("click",function(){return n.onSave()}),c()()()()()),e&2){let o,r,a;g("title","Order review")("icon","rate_review")("showBack",!0),d(2),g("formGroup",n.reviewForm),d(4),S(O(7,66,"order-review.provider")),d(4),L("ngModel",n.providerSearchText),g("ngModelOptions",se(106,$t))("disabled",n.isLoadingProvider),d(),g("ngIf",n.providerSearchText||n.selectedProvider),d(),g("ngIf",n.isSearchingProviders),d(),g("ngIf",n.showProviderDropdown&&n.providers.length>0),d(),g("ngIf",n.showProviderDropdown&&!n.isSearchingProviders&&n.providers.length===0&&n.providerSearchText.trim().length>=2),d(),g("ngIf",n.selectedProvider),d(),g("ngIf",!n.isSearchingProviders&&(!n.providerSearchText||n.providerSearchText.length<2)&&n.selectedProvider===null),d(3),S(O(20,68,"order-review.note_message")),d(3),g("ngIf",(o=n.reviewForm.get("noteMsgEnabled"))==null?null:o.value),d(3),S(O(26,70,"order-review.order_schedule")),d(3),g("ngIf",(r=n.reviewForm.get("order_schedule_enabled"))==null?null:r.value),d(),g("ngIf",n.requiresAtLeastOneSchedule),d(3),S(O(33,72,"order-review.delivery_method")),d(3),g("ngIf",(a=n.reviewForm.get("delivery_method_enabled"))==null?null:a.value),d(),g("ngIf",n.requiresAtLeastOneDelivery),d(3),S(O(40,74,"order-review.order_type")),d(2),g("options",n.orderTypeOptions),L("ngModel",n.orderType),g("ngModelOptions",se(107,$t)),d(3),S(O(45,76,"order-review.order_status")),d(2),ne("placeholder",O(47,78,"order-review.select_order_status")),g("options",n.orderStatusList),L("ngModel",n.selectedStatuses),g("ngModelOptions",se(108,$t))("maxSelectedLabels",999)("showToggleAll",!1),d(4),S(O(51,80,"order-review.include_service")),d(5),S(O(56,82,"order-review.service_button_label_customisation")),d(5),S(O(61,84,"order-review.product_type")),d(2),g("options",n.productTypeOptions),L("ngModel",n.productTypes),g("ngModelOptions",se(109,$t))("showToggleAll",!1),d(3),S(O(66,86,"order-review.access")),d(5),S(O(71,88,"order-review.explore_page_member_only")),d(2),L("ngModel",n.exploreMemberOnly),g("ngModelOptions",se(110,$t)),d(3),S(O(76,90,"order-review.visible_global")),d(2),L("ngModel",n.visibleGlobal),g("ngModelOptions",se(111,$t)),d(3),T(" ",O(81,92,"order-review.payment_mode")," "),d(4),S(O(85,94,"order-review.cash_on_hand")),d(2),L("ngModel",n.paymentCashOnHand),g("ngModelOptions",se(112,$t)),d(3),S(O(90,96,"order-review.online")),d(2),L("ngModel",n.paymentOnline),g("ngModelOptions",se(113,$t)),d(3),S(O(95,98,"order-review.fee_to_be_added")),d(4),S(O(99,100,"order-review.convenience_fee")),d(2),L("ngModel",n.convenienceFee),g("ngModelOptions",se(114,$t)),d(3),S(O(104,102,"order-review.platform_fee")),d(2),L("ngModel",n.platformFee),g("ngModelOptions",se(115,$t)),d(3),S(O(109,104,"order-review.enable_user_my_id")),d(2),g("options",n.yesNoOptions),L("ngModel",n.enableUserMyId),g("ngModelOptions",se(116,$t)),d(2),g("disabled",n.requiresAtLeastOneSchedule||n.requiresAtLeastOneDelivery||n.requiresAtLeastOnePayment||n.requiresProductTypes)}},dependencies:[ee,W,be,ze,Mn,jc,bt,Oo,Z,Y,fe,_e,So,Me,Oe,ce],styles:[".review-page[_ngcontent-%COMP%]{padding:16px;font-family:Roboto,Segoe UI,-apple-system,BlinkMacSystemFont,sans-serif}.filter-panel[_ngcontent-%COMP%]{background:#fff;border-radius:12px}.section-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}.search-field[_ngcontent-%COMP%]{flex:1;max-width:200px}.section[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:8px;text-transform:capitalize}.method-chips[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{cursor:pointer}.w-100[_ngcontent-%COMP%], .full-width[_ngcontent-%COMP%]{width:100%}.content[_ngcontent-%COMP%]{flex:1;background:#fff;border-radius:12px;padding:16px}.toolbar[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.placeholder[_ngcontent-%COMP%]{margin-top:24px;color:#777}.card[_ngcontent-%COMP%]{box-shadow:0 6.25px 14px #171a1f33,0 0 2px #171a1f33;border-radius:14px;padding:16px}.block-label[_ngcontent-%COMP%], .form-label[_ngcontent-%COMP%]{color:#5d157c;font-weight:700;margin-bottom:6px;display:flex;align-items:center;gap:8px;font-size:14px}.with-toggle[_ngcontent-%COMP%]{display:inline-block;margin-right:8px}.form-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:14px 0}.form-block.subtle[_ngcontent-%COMP%]   .subtext[_ngcontent-%COMP%]{color:#6b6b6b;font-weight:600;margin-bottom:6px;font-size:12px}.options-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-top:8px}.stacked-options[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;gap:10px 12px;margin-top:12px}.card-lite[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 6.25px 14px #171a1f22,0 0 2px #171a1f22;padding:10px}.sub-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 6.25px 14px #171a1f22,0 0 2px #171a1f22;margin-top:10px;padding:10px}.row-line[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin:8px 0}.toggle-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin:10px 0}.section-title[_ngcontent-%COMP%]{color:#5d157c;font-weight:700;margin:8px 0;font-size:14px}.yes-no[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:is(.p-button){padding:4px 16px}  .yes-no .p-button{border:2px solid #5d157c;color:#5d157c;background:#fff}  .yes-no .p-button.p-highlight{background:#5d157c;color:#fff;border-color:#5d157c}[_nghost-%COMP%]     .p-inputtext{border:2px solid #5d157c;border-radius:10px}  .p-multiselect{width:100%;border:2px solid #5d157c;border-radius:10px;min-height:auto!important;height:auto!important}  .custom-multiselect .p-multiselect{min-height:auto!important;height:auto!important}  .custom-multiselect .p-multiselect-label-container{overflow:visible!important;max-height:none!important}  .p-multiselect .p-multiselect-label{padding:8px 12px;display:flex;flex-wrap:wrap;gap:5px;min-height:auto!important;max-height:none!important;overflow:visible!important;align-items:flex-start}  .p-multiselect .p-multiselect-token{border-radius:15px;color:#5d157c;background-color:#f8ecfc}  .p-inputswitch-checked .p-inputswitch-slider{background:#5d157c}  .p-checkbox .p-checkbox-box{border:2px solid #5d157c;border-radius:6px}  .p-checkbox .p-checkbox-box.p-highlight{border-color:#5d157c;background:#5d157c}.input-style[_ngcontent-%COMP%]{background-color:#f8ecfc;border-radius:12px;border:none;padding:10px 14px;font-size:14px;color:#333;width:100%}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;background:#f9f2fd;border-radius:12px;padding-right:10px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;background:transparent;padding:12px;flex-grow:1}.icon-btn[_ngcontent-%COMP%]{background:none;border:none;color:#5d157c;font-size:16px;cursor:pointer}.form-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.error[_ngcontent-%COMP%]{color:#d32f2f;font-size:12px;margin-top:6px}  .p-button.p-button-primary.full-width{width:100%;background:#5d157c;border:2px solid #5d157c;color:#fff;border-radius:10px;padding:10px 16px;font-weight:600;box-shadow:0 6.25px 14px #171a1f33,0 0 2px #171a1f22}  .p-button.p-button-primary.full-width:hover{background:#4a0f6f;border-color:#4a0f6f}  .custom-dropdown{width:100%;border:2px solid #5d157c;border-radius:10px}  .custom-dropdown .p-dropdown{width:100%;border:2px solid #5d157c;border-radius:10px}.provider-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:8px 0}.provider-name[_ngcontent-%COMP%]{font-weight:600;color:#333;font-size:14px}.provider-type[_ngcontent-%COMP%]{font-size:12px;color:#666;margin-top:4px}.search-hint[_ngcontent-%COMP%]{font-size:12px;color:#666;margin-top:6px;display:flex;align-items:center;gap:6px}.search-hint[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.provider-search-container[_ngcontent-%COMP%]{position:relative;width:100%}.search-spinner[_ngcontent-%COMP%]{color:#5d157c;font-size:16px;margin-right:8px}.provider-dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;background:#fff;border:2px solid #5d157c;border-radius:10px;margin-top:4px;max-height:300px;overflow-y:auto;z-index:1000;box-shadow:0 6.25px 14px #171a1f33,0 0 2px #171a1f22}.provider-dropdown-item[_ngcontent-%COMP%]{padding:12px;cursor:pointer;border-bottom:1px solid #f0f0f0;transition:background-color .2s}.provider-dropdown-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.provider-dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f9f2fd}.provider-dropdown-item[_ngcontent-%COMP%]   .provider-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.provider-dropdown-item[_ngcontent-%COMP%]   .provider-name[_ngcontent-%COMP%]{font-weight:600;color:#333;font-size:14px}.provider-dropdown-item[_ngcontent-%COMP%]   .provider-type[_ngcontent-%COMP%]{font-size:12px;color:#666}.no-results[_ngcontent-%COMP%]{padding:12px;text-align:center;color:#666;font-size:14px}.selected-provider-display[_ngcontent-%COMP%]{margin-top:8px;padding:12px;background:#f9f2fd;border:2px solid #5d157c;border-radius:10px}.selected-provider-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.selected-provider-name[_ngcontent-%COMP%]{font-weight:600;color:#333;font-size:14px}.selected-provider-type[_ngcontent-%COMP%]{font-size:12px;color:#666}"]})};var Zr=class i{constructor(t){this.http=t}getPendingCommunities(t=0,e=100){let n=new Dt({fromObject:{skip:t.toString(),limit:e.toString()}});return console.log("GET Pending Communities - Endpoint:",Q.COMMUNITY_APPROVAL.PENDING_LIST),this.http.get(Q.COMMUNITY_APPROVAL.PENDING_LIST,{params:n})}approveCommunity(t,e){let n=Q.COMMUNITY_APPROVAL.APPROVE.replace(":id",t.toString()),o=new Dt({fromObject:{admin_id:e.toString()}});return this.http.put(n,null,{params:o})}rejectCommunity(t){let e=Q.COMMUNITY_APPROVAL.DELETE.replace(":id",t.toString());return this.http.delete(e)}static \u0275fac=function(e){return new(e||i)(Ae($e))};static \u0275prov=Je({token:i,factory:i.\u0275fac,providedIn:"root"})};var ix=["categoryFileUpload"];function ox(i,t){i&1&&(s(0,"div",18),h(1,"div",19),s(2,"p"),p(3,"Loading pending communities..."),c()())}function rx(i,t){if(i&1){let e=E();s(0,"tr")(1,"td",25),p(2),c(),s(3,"td",26),p(4),c(),s(5,"td",27)(6,"div",28)(7,"button",29),v("click",function(){let o=b(e).$implicit,r=_(3);return C(r.viewGroup(o))}),h(8,"i",30),c(),s(9,"button",31),v("click",function(){let o=b(e).$implicit,r=_(3);return C(r.onApprove(o.id))}),h(10,"i",32),c(),s(11,"button",33),v("click",function(){let o=b(e).$implicit,r=_(3);return C(r.onReject(o.id))}),h(12,"i",34),c()()()()}if(i&2){let e=t.$implicit;d(2),S(e.name),d(2),S(e.description)}}function ax(i,t){i&1&&(s(0,"tr")(1,"td",35),p(2,"No pending communities."),c()())}function sx(i,t){if(i&1&&(s(0,"div",20)(1,"table",21)(2,"thead")(3,"tr")(4,"th"),p(5,"Name"),c(),s(6,"th"),p(7,"Description"),c(),s(8,"th",22),p(9,"Actions"),c()()(),s(10,"tbody"),y(11,rx,13,2,"tr",23)(12,ax,3,0,"tr",24),c()()()),i&2){let e=_(2);d(11),g("ngForOf",e.pagedPending),d(),g("ngIf",e.pagedPending.length===0)}}function cx(i,t){if(i&1){let e=E();s(0,"div",36)(1,"div",37)(2,"span"),p(3,"Show"),c(),s(4,"select",38),N("ngModelChange",function(o){b(e);let r=_(2);return z(r.pageSizePending,o)||(r.pageSizePending=o),C(o)}),v("ngModelChange",function(){b(e);let o=_(2);return o.pagePending=1,C(o.updatePagedPending())}),s(5,"option",39),p(6,"5"),c(),s(7,"option",39),p(8,"10"),c(),s(9,"option",39),p(10,"20"),c()()(),s(11,"div",40)(12,"button",41),v("click",function(){b(e);let o=_(2);return C(o.changePagePending(-1))}),p(13," < "),c(),s(14,"span",42),p(15),c(),s(16,"button",41),v("click",function(){b(e);let o=_(2);return C(o.changePagePending(1))}),p(17," > "),c()()()}if(i&2){let e=_(2);d(4),L("ngModel",e.pageSizePending),d(),g("value",5),d(2),g("value",10),d(2),g("value",20),d(3),g("disabled",e.pagePending===1),d(3),Qe(" Page ",e.pagePending," of ",e.totalPagesPending," "),d(),g("disabled",e.pagePending===e.totalPagesPending)}}function dx(i,t){if(i&1){let e=E();s(0,"div",13)(1,"input",14),N("ngModelChange",function(o){b(e);let r=_();return z(r.searchPending,o)||(r.searchPending=o),C(o)}),v("ngModelChange",function(){b(e);let o=_();return C(o.applySearchPending())}),c(),y(2,ox,4,0,"div",15)(3,sx,13,2,"div",16)(4,cx,18,8,"div",17),c()}if(i&2){let e=_();d(),L("ngModel",e.searchPending),d(),g("ngIf",e.isLoadingPending),d(),g("ngIf",!e.isLoadingPending),d(),g("ngIf",!e.isLoadingPending&&e.pagedPending.length>0)}}function lx(i,t){i&1&&(s(0,"div",18),h(1,"div",19),s(2,"p"),p(3,"Loading categories..."),c()())}function px(i,t){if(i&1&&h(0,"img",60),i&2){let e=_().$implicit;g("src",e.category_icon,Jt)("alt",e.name)}}function mx(i,t){if(i&1&&h(0,"i",61),i&2){let e=_().index,n=_(3);g("ngClass",n.getCategoryIcon(e))}}function gx(i,t){i&1&&(s(0,"div",65),h(1,"i",66),s(2,"p"),p(3,"No communities in this category yet"),c()())}function ux(i,t){i&1&&(s(0,"span",80),p(1,"Premium"),c())}function fx(i,t){if(i&1&&(s(0,"span",73),h(1,"i",81),p(2),c()),i&2){let e=_().$implicit;d(2),T(" \u20B9",e.join_fee," ")}}function _x(i,t){if(i&1){let e=E();s(0,"div",67),v("mouseenter",function(){let o=b(e).$implicit,r=_(5);return C(r.hoveredCommunityId=o.id)})("mouseleave",function(){b(e);let o=_(5);return C(o.hoveredCommunityId=null)}),s(1,"div",68)(2,"div",69)(3,"h4"),p(4),c(),y(5,ux,2,0,"span",70),c(),s(6,"p",71),p(7),c(),s(8,"div",72)(9,"span",73),h(10,"i",74),p(11),c(),y(12,fx,3,1,"span",75),c()(),s(13,"div",76)(14,"button",77),v("click",function(){let o=b(e).$implicit,r=_(5);return C(r.editCommunity(o))}),h(15,"i",78),c(),s(16,"button",79),v("click",function(o){let r=b(e).$implicit,a=_(5);return C(a.deleteCommunityItem(r,o))}),h(17,"i",58),c()()()}if(i&2){let e=t.$implicit,n=_(5);d(4),S(e.name),d(),g("ngIf",e.is_premium),d(2),T(" ",e.description," "),d(4),T(" ",e.members_count||0," members "),d(),g("ngIf",e.join_fee&&n.parseFloat(e.join_fee)>0),d(2),j("visible",n.hoveredCommunityId===e.id),d(2),j("visible",n.hoveredCommunityId===e.id)}}function hx(i,t){if(i&1&&(s(0,"div",62),y(1,gx,4,0,"div",63)(2,_x,18,9,"div",64),c()),i&2){let e=_().$implicit,n=_(3);d(),g("ngIf",n.getCommunitiesByCategory(e.id).length===0),d(),g("ngForOf",n.getCommunitiesByCategory(e.id))}}function bx(i,t){if(i&1){let e=E();s(0,"div",48)(1,"div",49),v("click",function(){let o=b(e).$implicit,r=_(3);return C(r.toggleCategoryExpansion(o.id))}),s(2,"div",50),y(3,px,1,2,"img",51)(4,mx,1,1,"i",52),c(),s(5,"div",53)(6,"h3"),p(7),c(),s(8,"p"),p(9),c(),s(10,"span",54),p(11),c()(),s(12,"div",55),v("click",function(o){return b(e),C(o.stopPropagation())}),s(13,"i",56),v("click",function(){let o=b(e).$implicit,r=_(3);return C(r.toggleCategoryExpansion(o.id))}),c(),s(14,"button",57),v("click",function(o){let r=b(e).$implicit,a=_(3);return C(a.deleteCategory(r,o))}),h(15,"i",58),c()()(),y(16,hx,3,2,"div",59),c()}if(i&2){let e=t.$implicit,n=t.index,o=_(3);d(2),yt("background",e.category_icon?"transparent":o.getCategoryColor(n)),j("has-image",e.category_icon),d(),g("ngIf",e.category_icon),d(),g("ngIf",!e.category_icon),d(3),S(e.name),d(2),S(e.description||"No description"),d(2),Qe("",o.getCommunitiesByCategory(e.id).length," ",o.getCommunitiesByCategory(e.id).length===1?"community":"communities",""),d(2),g("ngClass",o.isCategoryExpanded(e.id)?"pi-chevron-up":"pi-chevron-down"),d(3),g("ngIf",o.isCategoryExpanded(e.id))}}function Cx(i,t){i&1&&(s(0,"div",82),h(1,"i",66),s(2,"p"),p(3,"No categories found"),c()())}function vx(i,t){if(i&1&&(s(0,"div",45),y(1,bx,17,12,"div",46)(2,Cx,4,0,"div",47),c()),i&2){let e=_(2);d(),g("ngForOf",e.filteredCategories),d(),g("ngIf",e.filteredCategories.length===0)}}function xx(i,t){if(i&1){let e=E();s(0,"div",13)(1,"input",43),N("ngModelChange",function(o){b(e);let r=_();return z(r.searchCategory,o)||(r.searchCategory=o),C(o)}),v("ngModelChange",function(){b(e);let o=_();return C(o.applySearchCategory())}),c(),y(2,lx,4,0,"div",15)(3,vx,3,2,"div",44),c()}if(i&2){let e=_();d(),L("ngModel",e.searchCategory),d(),g("ngIf",e.isLoadingCategories),d(),g("ngIf",!e.isLoadingCategories)}}function Px(i,t){i&1&&(s(0,"span",98),p(1," Category name is required (min 3 characters) "),c())}function yx(i,t){i&1&&(s(0,"span"),p(1,"Create Category"),c())}function Mx(i,t){i&1&&(s(0,"span"),p(1,"Creating..."),c())}function Ox(i,t){if(i&1){let e=E();s(0,"div",83),v("click",function(){b(e);let o=_();return C(o.closeCategoryFormModal())}),s(1,"div",84),v("click",function(o){return b(e),C(o.stopPropagation())}),s(2,"div",85)(3,"h2"),p(4,"Add New Category"),c(),s(5,"button",86),v("click",function(){b(e);let o=_();return C(o.closeCategoryFormModal())}),h(6,"i",87),c()(),s(7,"form",88)(8,"div",89)(9,"label"),p(10,"Category Name "),s(11,"span",90),p(12,"*"),c()(),h(13,"input",91),y(14,Px,2,0,"span",92),c(),s(15,"div",89)(16,"label"),p(17,"Description"),c(),h(18,"textarea",93),c(),s(19,"div",89)(20,"label"),p(21,"Category Icon"),c(),s(22,"file-upload",94,0),v("uploadedUrls",function(o){b(e);let r=_();return C(r.afterCategoryImageUpload(o))}),c()()(),s(24,"div",95)(25,"button",96),v("click",function(){b(e);let o=_();return C(o.closeCategoryFormModal())}),p(26," Cancel "),c(),s(27,"button",97),v("click",function(){b(e);let o=_();return C(o.submitCategory())}),y(28,yx,2,0,"span",24)(29,Mx,2,0,"span",24),c()()()()}if(i&2){let e,n,o,r=_();d(7),g("formGroup",r.categoryForm),d(6),j("error",((e=r.categoryForm.get("name"))==null?null:e.invalid)&&((e=r.categoryForm.get("name"))==null?null:e.touched)),d(),g("ngIf",((n=r.categoryForm.get("name"))==null?null:n.invalid)&&((n=r.categoryForm.get("name"))==null?null:n.touched)),d(8),g("enableMultiple",!1)("uploadedFileName",(o=r.categoryForm.get("category_icon"))==null?null:o.value)("uploadTitle","Upload category icon / Tap to upload"),d(5),g("disabled",r.categoryForm.invalid||r.isSavingCategory),d(),g("ngIf",!r.isSavingCategory),d(),g("ngIf",r.isSavingCategory)}}function wx(i,t){i&1&&(s(0,"span",98),p(1," Community name is required (min 3 characters) "),c())}function Sx(i,t){i&1&&(s(0,"span",98),p(1," Description is required (min 10 characters) "),c())}function kx(i,t){if(i&1&&(s(0,"option",39),p(1),c()),i&2){let e=t.$implicit;g("value",e.id),d(),T(" ",e.name," ")}}function Ix(i,t){i&1&&(s(0,"span",98),p(1," Please select a category "),c())}function Tx(i,t){i&1&&(s(0,"span",98),p(1," Address is required "),c())}function Ex(i,t){if(i&1&&(s(0,"span"),p(1),c()),i&2){let e=_(2);d(),S(e.isEditMode?"Update Community":"Create Community")}}function Fx(i,t){if(i&1&&(s(0,"span"),p(1),c()),i&2){let e=_(2);d(),S(e.isEditMode?"Updating...":"Creating...")}}function Dx(i,t){if(i&1){let e=E();s(0,"div",83),v("click",function(){b(e);let o=_();return C(o.closeCommunityFormModal())}),s(1,"div",99),v("click",function(o){return b(e),C(o.stopPropagation())}),s(2,"div",85)(3,"h2"),p(4),c(),s(5,"button",86),v("click",function(){b(e);let o=_();return C(o.closeCommunityFormModal())}),h(6,"i",87),c()(),s(7,"form",88)(8,"div",89)(9,"label"),p(10,"Community Name "),s(11,"span",90),p(12,"*"),c()(),h(13,"input",100),y(14,wx,2,0,"span",92),c(),s(15,"div",89)(16,"label"),p(17,"Description "),s(18,"span",90),p(19,"*"),c()(),h(20,"textarea",101),y(21,Sx,2,0,"span",92),c(),s(22,"div",89)(23,"label"),p(24,"Category "),s(25,"span",90),p(26,"*"),c()(),s(27,"select",102)(28,"option",103),p(29,"Select a category"),c(),y(30,kx,2,2,"option",104),c(),y(31,Ix,2,0,"span",92),c(),s(32,"div",89)(33,"label"),p(34,"Address "),s(35,"span",90),p(36,"*"),c()(),h(37,"input",105),y(38,Tx,2,0,"span",92),c(),s(39,"div",106)(40,"div",89)(41,"label"),p(42,"Latitude"),c(),h(43,"input",107),c(),s(44,"div",89)(45,"label"),p(46,"Longitude"),c(),h(47,"input",108),c()(),s(48,"div",89)(49,"label"),p(50,"Join Type "),s(51,"span",90),p(52,"*"),c()(),s(53,"select",109)(54,"option",110),p(55,"Direct Join"),c(),s(56,"option",111),p(57,"Request Form Join"),c()()(),s(58,"div",89)(59,"label"),p(60,"Join Fee (\u20B9)"),c(),h(61,"input",112),c(),s(62,"div",113),h(63,"input",114),s(64,"label",115),p(65,"Mark as Premium Community"),c()()(),s(66,"div",95)(67,"button",96),v("click",function(){b(e);let o=_();return C(o.closeCommunityFormModal())}),p(68," Cancel "),c(),s(69,"button",97),v("click",function(){b(e);let o=_();return C(o.submitCommunity())}),y(70,Ex,2,1,"span",24)(71,Fx,2,1,"span",24),c()()()()}if(i&2){let e,n,o,r,a,l,m,u,f=_();d(4),S(f.isEditMode?"Edit Community":"Add New Community"),d(3),g("formGroup",f.communityForm),d(6),j("error",((e=f.communityForm.get("name"))==null?null:e.invalid)&&((e=f.communityForm.get("name"))==null?null:e.touched)),d(),g("ngIf",((n=f.communityForm.get("name"))==null?null:n.invalid)&&((n=f.communityForm.get("name"))==null?null:n.touched)),d(6),j("error",((o=f.communityForm.get("description"))==null?null:o.invalid)&&((o=f.communityForm.get("description"))==null?null:o.touched)),d(),g("ngIf",((r=f.communityForm.get("description"))==null?null:r.invalid)&&((r=f.communityForm.get("description"))==null?null:r.touched)),d(6),j("error",((a=f.communityForm.get("categoryId"))==null?null:a.invalid)&&((a=f.communityForm.get("categoryId"))==null?null:a.touched)),d(3),g("ngForOf",f.categories),d(),g("ngIf",((l=f.communityForm.get("categoryId"))==null?null:l.invalid)&&((l=f.communityForm.get("categoryId"))==null?null:l.touched)),d(6),j("error",((m=f.communityForm.get("address"))==null?null:m.invalid)&&((m=f.communityForm.get("address"))==null?null:m.touched)),d(),g("ngIf",((u=f.communityForm.get("address"))==null?null:u.invalid)&&((u=f.communityForm.get("address"))==null?null:u.touched)),d(31),g("disabled",f.communityForm.invalid||f.isSavingCommunity),d(),g("ngIf",!f.isSavingCommunity),d(),g("ngIf",f.isSavingCommunity)}}function Ax(i,t){if(i&1){let e=E();s(0,"div",83),v("click",function(){b(e);let o=_();return C(o.closeConfirmModal())}),s(1,"div",116),v("click",function(o){return b(e),C(o.stopPropagation())}),s(2,"div",117),h(3,"i",118),c(),s(4,"h2"),p(5),c(),s(6,"p"),p(7),c(),s(8,"div",95)(9,"button",96),v("click",function(){b(e);let o=_();return C(o.closeConfirmModal())}),p(10," Cancel "),c(),s(11,"button",119),v("click",function(){b(e);let o=_();return C(o.confirmDelete())}),p(12,"Delete"),c()()()()}if(i&2){let e=_();d(5),S(e.confirmTitle),d(2),S(e.confirmMessage)}}function Vx(i,t){if(i&1){let e=E();s(0,"div",83),v("click",function(){b(e);let o=_();return C(o.closeSuccessModal())}),s(1,"div",120),v("click",function(o){return b(e),C(o.stopPropagation())}),s(2,"div",121),h(3,"i",61),c(),s(4,"h2"),p(5),c(),s(6,"p"),p(7),c(),s(8,"button",122),v("click",function(){b(e);let o=_();return C(o.closeSuccessModal())}),p(9,"OK"),c()()()}if(i&2){let e=_();d(2),j("error",e.isError),d(),g("ngClass",e.isError?"pi-times-circle":"pi-check-circle"),d(2),S(e.successTitle),d(2),S(e.successMessage)}}function Rx(i,t){if(i&1&&(s(0,"div",125)(1,"div",126)(2,"label"),p(3,"Name:"),c(),s(4,"span"),p(5),c()(),s(6,"div",126)(7,"label"),p(8,"Description:"),c(),s(9,"p",127),p(10),c()(),s(11,"div",126)(12,"label"),p(13,"Category:"),c(),s(14,"span"),p(15),c()(),s(16,"div",126)(17,"label"),p(18,"Type:"),c(),s(19,"span",128),p(20),c()(),s(21,"div",126)(22,"label"),p(23,"Address:"),c(),s(24,"span"),p(25),c()(),s(26,"div",126)(27,"label"),p(28,"Created By:"),c(),s(29,"span"),p(30),c()(),s(31,"div",129)(32,"small"),p(33),M(34,"date"),c()()()),i&2){let e=_(2);d(5),S(e.selectedCommunityForView.name),d(5),T(" ",e.selectedCommunityForView.description||"No description provided"," "),d(5),S(e.selectedCommunityForView.category_name||e.getCategoryName(e.selectedCommunityForView.category_id)),d(5),S((e.selectedCommunityForView.type==null?null:e.selectedCommunityForView.type.replace("_"," "))||"N/A"),d(5),S(e.selectedCommunityForView.address||"N/A"),d(5),S(e.selectedCommunityForView.created_by_name||"Unknown"),d(3),T("Created: ",gt(34,7,e.selectedCommunityForView.created_at,"mediumDate"),"")}}function Lx(i,t){if(i&1){let e=E();s(0,"div",83),v("click",function(){b(e);let o=_();return C(o.closeViewModal())}),s(1,"div",123),v("click",function(o){return b(e),C(o.stopPropagation())}),s(2,"div",85)(3,"h2"),p(4,"Community Details"),c(),s(5,"button",86),v("click",function(){b(e);let o=_();return C(o.closeViewModal())}),h(6,"i",87),c()(),y(7,Rx,35,10,"div",124),s(8,"div",95)(9,"button",122),v("click",function(){b(e);let o=_();return C(o.closeViewModal())}),p(10,"Close"),c()()()()}if(i&2){let e=_();d(7),g("ngIf",e.selectedCommunityForView)}}var ea=class i{constructor(t,e,n,o,r){this.router=t;this.fb=e;this.communityApprovalService=n;this.communityCategoryService=o;this.communityService=r}categoryFileUpload;pendingCommunities=[];filteredPending=[];pagedPending=[];searchPending="";pageSizePending=10;pagePending=1;totalPagesPending=1;categories=[];filteredCategories=[];searchCategory="";approvedCommunities=[];expandedCategories=new Set;hoveredCommunityId=null;activeTab="approval";isLoadingPending=!1;isLoadingCategories=!1;isSavingCategory=!1;isSavingCommunity=!1;hoveredCategoryId=null;categoryForm;communityForm;showCategoryFormModal=!1;showCommunityFormModal=!1;showSuccessModal=!1;successTitle="";successMessage="";isError=!1;showConfirmModal=!1;confirmTitle="";confirmMessage="";confirmAction=null;isEditMode=!1;selectedCommunity=null;showViewModal=!1;selectedCommunityForView=null;currentUserId=1;ngOnInit(){this.initializeForms(),this.loadPendingCommunities(),this.loadCategories()}initializeForms(){this.categoryForm=this.fb.group({name:["",[A.required,A.minLength(3)]],description:[""],category_icon:[null]}),this.communityForm=this.fb.group({name:["",[A.required,A.minLength(3)]],description:["",[A.required,A.minLength(10)]],categoryId:["",[A.required]],address:["",[A.required]],latitude:[""],longitude:[""],type:["direct_join",[A.required]],joinFee:["0.00"],isPremium:[!1]})}switchTab(t){this.activeTab=t,t==="approval"?this.loadPendingCommunities():(this.loadCategories(),this.loadApprovedCommunities())}loadCategories(){this.isLoadingCategories=!0,this.communityCategoryService.getCategories(0,100).subscribe({next:t=>{this.categories=t||[],this.applySearchCategory(),this.isLoadingCategories=!1},error:t=>{console.error("\u274C Error loading categories:",t),this.categories=[],this.isLoadingCategories=!1,this.showError("Failed to load categories")}})}applySearchCategory(){let t=this.searchCategory.toLowerCase();this.filteredCategories=this.categories.filter(e=>(e.name||"").toLowerCase().includes(t)||(e.description||"").toLowerCase().includes(t))}openCategoryFormModal(){this.showCategoryFormModal=!0,this.categoryForm.reset()}closeCategoryFormModal(){this.showCategoryFormModal=!1,this.categoryForm.reset(),this.categoryFileUpload&&this.categoryFileUpload.reset()}afterCategoryImageUpload(t){t&&t.length>0&&this.categoryForm.get("category_icon")?.setValue(t[0])}submitCategory(){if(this.categoryForm.invalid){Object.keys(this.categoryForm.controls).forEach(e=>{this.categoryForm.get(e)?.markAsTouched()});return}let t=this.categoryForm.value;this.isSavingCategory=!0,this.communityCategoryService.createCategory(t).subscribe({next:e=>{this.isSavingCategory=!1,this.closeCategoryFormModal(),this.loadCategories(),this.showSuccess("Category Created!",`"${e.name}" has been created successfully.`)},error:e=>{console.error("\u274C Error creating category:",e),this.isSavingCategory=!1,this.showError(e.error?.message||"Failed to create category")}})}deleteCategory(t,e){e.stopPropagation(),this.confirmTitle="Delete Category",this.confirmMessage=`Are you sure you want to delete "${t.name}"? This action cannot be undone.`,this.confirmAction=()=>{this.communityCategoryService.deleteCategory(t.id).subscribe({next:()=>{this.loadCategories(),this.showSuccess("Category Deleted!",`"${t.name}" has been deleted.`)},error:n=>{console.error("\u274C Error deleting category:",n),this.showError(n.error?.message||"Failed to delete category")}})},this.showConfirmModal=!0}getCategoryIcon(t){let e=["pi-briefcase","pi-book","pi-heart","pi-star","pi-users","pi-home","pi-lightbulb","pi-palette","pi-trophy","pi-flag"];return e[t%e.length]}getCategoryColor(t){let e=["#667eea","#f093fb","#4facfe","#43e97b","#fa709a","#feca57","#48dbfb","#ff9ff3","#54a0ff","#5f27cd"];return e[t%e.length]}loadApprovedCommunities(){this.communityService.getCommunities(0,100,void 0,!0).subscribe({next:t=>{this.approvedCommunities=t||[],this.updateCategoryCommunityCounts()},error:t=>{console.error("\u274C Error loading approved communities:",t),this.approvedCommunities=[]}})}getCommunitiesByCategory(t){return this.approvedCommunities.filter(e=>e.category_id===t)}updateCategoryCommunityCounts(){this.categories.forEach(t=>{let e=this.approvedCommunities.filter(n=>n.category_id===t.id).length})}toggleCategoryExpansion(t){this.expandedCategories.has(t)?this.expandedCategories.delete(t):this.expandedCategories.add(t)}isCategoryExpanded(t){return this.expandedCategories.has(t)}editCommunity(t){this.isEditMode=!0,this.selectedCommunity=t,this.communityForm.patchValue({name:t.name,description:t.description,categoryId:t.category_id.toString(),address:t.address||"",latitude:t.latitude||"",longitude:t.longitude||"",type:t.type,joinFee:t.join_fee||"0.00",isPremium:t.is_premium||!1}),this.showCommunityFormModal=!0}deleteCommunityItem(t,e){e.stopPropagation(),this.confirmTitle="Delete Community",this.confirmMessage=`Are you sure you want to delete "${t.name}"? This action cannot be undone.`,this.confirmAction=()=>{this.communityService.deleteCommunity(t.id).subscribe({next:()=>{this.loadApprovedCommunities(),this.showSuccess("Community Deleted!",`"${t.name}" has been deleted.`)},error:n=>{console.error("\u274C Error deleting community:",n),this.showError(n.error?.message||"Failed to delete community")}})},this.showConfirmModal=!0}confirmDelete(){this.confirmAction&&this.confirmAction(),this.closeConfirmModal()}closeConfirmModal(){this.showConfirmModal=!1,this.confirmTitle="",this.confirmMessage="",this.confirmAction=null}loadPendingCommunities(){this.isLoadingPending=!0,this.communityApprovalService.getPendingCommunities().subscribe({next:t=>{this.pendingCommunities=t||[],this.applySearchPending(),this.isLoadingPending=!1},error:t=>{console.error("\u274C Error loading pending communities:",t),this.pendingCommunities=[],this.isLoadingPending=!1,this.showError("Failed to load pending communities")}})}applySearchPending(){let t=this.searchPending.toLowerCase();this.filteredPending=this.pendingCommunities.filter(e=>(e.name||"").toLowerCase().includes(t)||(e.description||"").toLowerCase().includes(t)),this.pagePending=1,this.updatePagedPending()}updatePagedPending(){let t=this.filteredPending.length;this.totalPagesPending=t?Math.ceil(t/this.pageSizePending):1;let e=(this.pagePending-1)*this.pageSizePending,n=e+this.pageSizePending;this.pagedPending=this.filteredPending.slice(e,n)}changePagePending(t){let e=this.pagePending+t;e<1||e>this.totalPagesPending||(this.pagePending=e,this.updatePagedPending())}openCommunityFormModal(){this.showCommunityFormModal=!0,this.communityForm.reset({type:"direct_join",joinFee:"0.00",isPremium:!1})}closeCommunityFormModal(){this.showCommunityFormModal=!1,this.communityForm.reset(),this.isEditMode=!1,this.selectedCommunity=null}submitCommunity(){if(this.communityForm.invalid){Object.keys(this.communityForm.controls).forEach(n=>{this.communityForm.get(n)?.markAsTouched()});return}let t=this.communityForm.value,e={name:t.name,description:t.description,category_id:parseInt(t.categoryId),address:t.address,latitude:t.latitude||void 0,longitude:t.longitude||void 0,type:t.type,join_fee:t.joinFee,is_premium:t.isPremium};this.isSavingCommunity=!0,this.isEditMode&&this.selectedCommunity?this.communityService.updateCommunity(this.selectedCommunity.id,e).subscribe({next:n=>{console.log("\u2705 Community updated:",n),this.isSavingCommunity=!1,this.closeCommunityFormModal(),this.loadApprovedCommunities(),this.showSuccess("Community Updated!",`"${n.name}" has been updated successfully.`)},error:n=>{console.error("\u274C Error updating community:",n),this.isSavingCommunity=!1,this.showError(n.error?.message||"Failed to update community")}}):this.communityService.createCommunity(e,this.currentUserId).subscribe({next:n=>{console.log("\u2705 Community created:",n),this.isSavingCommunity=!1,this.closeCommunityFormModal(),this.loadPendingCommunities(),this.showSuccess("Community Created!",`"${n.name}" has been submitted for approval.`)},error:n=>{console.error("\u274C Error creating community:",n),this.isSavingCommunity=!1,this.showError(n.error?.message||"Failed to create community")}})}onApprove(t){let e=this.currentUserId;this.communityApprovalService.approveCommunity(t,e).subscribe({next:()=>{this.loadPendingCommunities(),this.showSuccess("Approved!","Community has been approved successfully.")},error:n=>{console.error("\u274C Error approving community:",n),this.showError(n.error?.message||"Failed to approve community")}})}onReject(t){confirm("Are you sure you want to reject this community?")&&this.communityApprovalService.rejectCommunity(t).subscribe({next:()=>{this.loadPendingCommunities(),this.showSuccess("Rejected!","Community has been rejected.")},error:e=>{console.error("\u274C Error rejecting community:",e),this.showError(e.error?.message||"Failed to reject community")}})}viewGroup(t){this.selectedCommunityForView=t,this.showViewModal=!0}closeViewModal(){this.showViewModal=!1,this.selectedCommunityForView=null}getCategoryName(t){if(!t)return"N/A";let e=this.categories.find(n=>n.id===t);return e?e.name:"Unknown Category"}goBack(){this.router.navigate(["customers"])}parseFloat(t){return parseFloat(t)}closeSuccessModal(){this.showSuccessModal=!1,this.successTitle="",this.successMessage="",this.isError=!1}showSuccess(t,e){this.isError=!1,this.successTitle=t,this.successMessage=e,this.showSuccessModal=!0,setTimeout(()=>{this.closeSuccessModal()},3e3)}showError(t){this.isError=!0,this.successTitle="Error",this.successMessage=t,this.showSuccessModal=!0,setTimeout(()=>{this.closeSuccessModal()},3e3)}static \u0275fac=function(e){return new(e||i)(w(le),w(ue),w(Zr),w(Uc),w(Gc))};static \u0275cmp=R({type:i,selectors:[["app-community-approval"]],viewQuery:function(e,n){if(e&1&&nt(ix,5),e&2){let o;it(o=ot())&&(n.categoryFileUpload=o.first)}},decls:22,vars:13,consts:[["categoryFileUpload",""],[1,"approval-page"],[1,"header"],[1,"back-btn",3,"click"],[1,"pi","pi-arrow-left"],[1,"toggle-tabs"],[1,"toggle-container"],[1,"toggle-option",3,"click"],[1,"toggle-slider"],["class","tab-content",4,"ngIf"],[1,"fab",3,"click"],[1,"pi","pi-plus"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"tab-content"],["type","text","placeholder","Search pending communities...",1,"search-input",3,"ngModelChange","ngModel"],["class","loading",4,"ngIf"],["class","table-wrapper",4,"ngIf"],["class","pagination-bar",4,"ngIf"],[1,"loading"],[1,"spinner"],[1,"table-wrapper"],[1,"approval-table"],[1,"th-actions"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"td-name"],[1,"td-desc"],[1,"td-actions"],[1,"action-buttons"],["title","View Details",1,"icon-btn","icon-btn-view",3,"click"],[1,"pi","pi-eye"],["title","Approve",1,"icon-btn","icon-btn-approve",3,"click"],[1,"fa","fa-check"],["title","Reject",1,"icon-btn","icon-btn-reject",3,"click"],[1,"fa","fa-times"],["colspan","3",1,"empty-row"],[1,"pagination-bar"],[1,"page-size"],[1,"page-size-select",3,"ngModelChange","ngModel"],[3,"value"],[1,"page-controls"],[1,"page-arrow",3,"click","disabled"],[1,"page-info"],["type","text","placeholder","Search categories...",1,"search-input",3,"ngModelChange","ngModel"],["class","categories-grid",4,"ngIf"],[1,"categories-grid"],["class","category-card",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"category-card"],[1,"category-header-section",3,"click"],[1,"category-icon"],["class","category-image",3,"src","alt",4,"ngIf"],["class","pi",3,"ngClass",4,"ngIf"],[1,"category-info"],[1,"community-count"],[1,"category-actions",3,"click"],[1,"pi","chevron-icon",3,"click","ngClass"],["title","Delete category",1,"delete-category-btn",3,"click"],[1,"pi","pi-trash"],["class","communities-list",4,"ngIf"],[1,"category-image",3,"src","alt"],[1,"pi",3,"ngClass"],[1,"communities-list"],["class","empty-communities",4,"ngIf"],["class","community-item",3,"mouseenter","mouseleave",4,"ngFor","ngForOf"],[1,"empty-communities"],[1,"pi","pi-inbox"],[1,"community-item",3,"mouseenter","mouseleave"],[1,"community-item-content"],[1,"community-item-header"],["class","premium-badge",4,"ngIf"],[1,"community-item-description"],[1,"community-item-meta"],[1,"meta-item"],[1,"pi","pi-users"],["class","meta-item",4,"ngIf"],[1,"community-actions"],["title","Edit community",1,"action-btn","edit-btn",3,"click"],[1,"pi","pi-pencil"],["title","Delete community",1,"action-btn","delete-btn",3,"click"],[1,"premium-badge"],[1,"pi","pi-money-bill"],[1,"empty-state"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"pi","pi-times"],[1,"modal-body",3,"formGroup"],[1,"form-group"],[1,"required"],["type","text","formControlName","name","placeholder","Enter category name"],["class","error-message",4,"ngIf"],["formControlName","description","placeholder","Enter description (optional)","rows","3"],[3,"uploadedUrls","enableMultiple","uploadedFileName","uploadTitle"],[1,"modal-footer"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click","disabled"],[1,"error-message"],[1,"modal-content","large",3,"click"],["type","text","formControlName","name","placeholder","Enter community name"],["formControlName","description","placeholder","Describe your community","rows","4"],["formControlName","categoryId"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","address","placeholder","Enter location/address"],[1,"form-row"],["type","text","formControlName","latitude","placeholder","Optional"],["type","text","formControlName","longitude","placeholder","Optional"],["formControlName","type"],["value","direct_join"],["value","request_form_join"],["type","number","formControlName","joinFee","placeholder","0.00","step","0.01","min","0"],[1,"form-group","checkbox"],["type","checkbox","id","isPremium","formControlName","isPremium"],["for","isPremium"],[1,"modal-content","confirm-modal",3,"click"],[1,"modal-icon","warning"],[1,"pi","pi-exclamation-triangle"],[1,"btn-danger",3,"click"],[1,"modal-content","success-modal",3,"click"],[1,"modal-icon"],[1,"btn-primary",3,"click"],[1,"modal-content","view-modal",3,"click"],["class","modal-body",4,"ngIf"],[1,"modal-body"],[1,"detail-row"],[1,"description-text"],[1,"capitalize"],[1,"detail-row","meta-info"]],template:function(e,n){e&1&&(s(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return n.goBack()}),h(3,"i",4),c(),s(4,"h1"),p(5,"Community Management"),c()(),s(6,"div",5)(7,"div",6)(8,"button",7),v("click",function(){return n.switchTab("approval")}),p(9," Approval "),c(),s(10,"button",7),v("click",function(){return n.switchTab("category")}),p(11," Category "),c(),h(12,"div",8),c()(),y(13,dx,5,4,"div",9)(14,xx,4,3,"div",9),s(15,"button",10),v("click",function(){return n.activeTab==="approval"?n.openCommunityFormModal():n.openCategoryFormModal()}),h(16,"i",11),c(),y(17,Ox,30,10,"div",12)(18,Dx,72,18,"div",12)(19,Ax,13,2,"div",12)(20,Vx,10,5,"div",12)(21,Lx,11,1,"div",12),c()),e&2&&(d(8),j("active",n.activeTab==="approval"),d(2),j("active",n.activeTab==="category"),d(2),j("right",n.activeTab==="category"),d(),g("ngIf",n.activeTab==="approval"),d(),g("ngIf",n.activeTab==="category"),d(3),g("ngIf",n.showCategoryFormModal),d(),g("ngIf",n.showCommunityFormModal),d(),g("ngIf",n.showConfirmModal),d(),g("ngIf",n.showSuccessModal),d(),g("ngIf",n.showViewModal))},dependencies:[Se,ee,W,ht,ye,tn,nn,Z,ct,ho,en,Y,fe,xn,_e,Me,Oe,Zt],styles:[".approval-page[_ngcontent-%COMP%]{min-height:100vh;background:#f5f7fa;padding-bottom:80px;position:relative}.header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px 20px;background:#fff;box-shadow:0 2px 8px #0000001a;position:sticky;top:0;z-index:100;gap:12px}@media (max-width: 480px){.header[_ngcontent-%COMP%]{padding:12px 16px;gap:8px}}.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{background:#f0f0f0;border:none;width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s;flex-shrink:0}@media (max-width: 480px){.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{width:36px;height:36px}}.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#333;font-size:18px}@media (max-width: 480px){.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}}.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:#e0e0e0;transform:scale(1.05)}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px;font-weight:700;margin:0;color:#333}@media (max-width: 768px){.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 480px){.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:16px}}.toggle-tabs[_ngcontent-%COMP%]{padding:16px 20px;background:#fff;display:flex;justify-content:center}@media (max-width: 480px){.toggle-tabs[_ngcontent-%COMP%]{padding:12px 16px}}.toggle-tabs[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]{position:relative;display:flex;background:#f3e8ff;border-radius:50px;padding:4px;width:100%;max-width:400px}@media (max-width: 768px){.toggle-tabs[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]{max-width:100%}}.toggle-tabs[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]   .toggle-option[_ngcontent-%COMP%]{flex:1;padding:12px 24px;border:none;background:transparent;color:#4a1163;font-weight:600;font-size:14px;cursor:pointer;z-index:2;transition:color .3s;border-radius:50px;white-space:nowrap}@media (max-width: 480px){.toggle-tabs[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]   .toggle-option[_ngcontent-%COMP%]{padding:10px 16px;font-size:13px}}.toggle-tabs[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]   .toggle-option.active[_ngcontent-%COMP%]{color:#fff}.toggle-tabs[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]   .toggle-slider[_ngcontent-%COMP%]{position:absolute;top:4px;left:4px;width:calc(50% - 4px);height:calc(100% - 8px);background:#5d157c;border-radius:50px;transition:transform .3s ease;z-index:1}.toggle-tabs[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]   .toggle-slider.right[_ngcontent-%COMP%]{transform:translate(100%)}.tab-content[_ngcontent-%COMP%]{padding:20px}@media (max-width: 768px){.tab-content[_ngcontent-%COMP%]{padding:16px}}@media (max-width: 480px){.tab-content[_ngcontent-%COMP%]{padding:12px}}.search-input[_ngcontent-%COMP%]{width:100%;border-radius:12px;border:1px solid #e5e7eb;padding:12px 16px;font-size:14px;color:#111827;box-shadow:0 1px 2px #0000000d;outline:none;margin-bottom:20px;box-sizing:border-box}@media (max-width: 480px){.search-input[_ngcontent-%COMP%]{padding:10px 14px;font-size:13px;margin-bottom:16px}}.search-input[_ngcontent-%COMP%]::placeholder{color:#6b7280}.search-input[_ngcontent-%COMP%]:focus{border-color:#5d157c;box-shadow:0 0 0 3px #5d157c1a}.loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;gap:16px}@media (max-width: 480px){.loading[_ngcontent-%COMP%]{padding:40px 16px;gap:12px}}.loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid #f0f0f0;border-top-color:#5d157c;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@media (max-width: 480px){.loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border-width:3px}}.loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px}@media (max-width: 480px){.loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.table-wrapper[_ngcontent-%COMP%]{border-radius:12px;border:1px solid #e5e7eb;box-shadow:0 2px 8px #0000000d;background:#fff;overflow:hidden}@media (max-width: 768px){.table-wrapper[_ngcontent-%COMP%]{border-radius:8px}}.approval-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:14px;table-layout:fixed}@media (max-width: 768px){.approval-table[_ngcontent-%COMP%]{font-size:13px}}@media (max-width: 480px){.approval-table[_ngcontent-%COMP%]{font-size:12px}}.approval-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#5d157c;color:#fff}.approval-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:14px 16px;font-weight:600;text-align:left;white-space:nowrap}@media (max-width: 768px){.approval-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px 14px}}@media (max-width: 480px){.approval-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px 12px}}.approval-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:25%}@media (max-width: 768px){.approval-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:30%}}@media (max-width: 480px){.approval-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:35%}}.approval-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:50%}@media (max-width: 768px){.approval-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:40%}}@media (max-width: 480px){.approval-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:35%}}.approval-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th.th-actions[_ngcontent-%COMP%]{text-align:center;width:25%}@media (max-width: 768px){.approval-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th.th-actions[_ngcontent-%COMP%]{width:30%}}@media (max-width: 480px){.approval-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th.th-actions[_ngcontent-%COMP%]{width:30%}}.approval-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #e5e7eb;transition:background .2s}.approval-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}.approval-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#faf5ff}.approval-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f3e8ff}.approval-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;vertical-align:middle}@media (max-width: 768px){.approval-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 14px}}@media (max-width: 480px){.approval-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 12px}}.approval-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-name[_ngcontent-%COMP%]{font-weight:500;color:#111827;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.approval-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-desc[_ngcontent-%COMP%]{color:#6b7280;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:0}.approval-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]{text-align:center;white-space:nowrap;padding:10px 8px}@media (max-width: 480px){.approval-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]{padding:8px 6px}}.approval-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:inline-flex;gap:8px;justify-content:center;align-items:center}@media (max-width: 480px){.approval-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{gap:6px}}.approval-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .empty-row[_ngcontent-%COMP%]{text-align:center;padding:40px 16px;color:#6b7280;font-size:14px}@media (max-width: 480px){.approval-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .empty-row[_ngcontent-%COMP%]{padding:30px 12px;font-size:13px}}.icon-btn[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;border:1px solid transparent;background-color:#fff;cursor:pointer;font-size:14px;transition:all .2s;flex-shrink:0}@media (max-width: 480px){.icon-btn[_ngcontent-%COMP%]{width:32px;height:32px;font-size:13px}}.icon-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{pointer-events:none}.icon-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.icon-btn-approve[_ngcontent-%COMP%]{border-color:#16a34a;color:#16a34a}.icon-btn-approve[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#dcfce7;transform:scale(1.1)}.icon-btn-reject[_ngcontent-%COMP%]{border-color:#dc2626;color:#dc2626}.icon-btn-reject[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#fee2e2;transform:scale(1.1)}.pagination-bar[_ngcontent-%COMP%]{margin-top:16px;display:flex;justify-content:space-between;align-items:center;font-size:14px;color:#6b7280;flex-wrap:wrap;gap:12px}@media (max-width: 480px){.pagination-bar[_ngcontent-%COMP%]{font-size:13px;gap:8px}}.page-size[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}@media (max-width: 480px){.page-size[_ngcontent-%COMP%]{gap:6px}}.page-size-select[_ngcontent-%COMP%]{border-radius:6px;border:1px solid #e5e7eb;padding:6px 12px;font-size:14px;color:#111827;background-color:#fff;cursor:pointer}@media (max-width: 480px){.page-size-select[_ngcontent-%COMP%]{padding:5px 10px;font-size:13px}}.page-size-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#5d157c}.page-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}@media (max-width: 480px){.page-controls[_ngcontent-%COMP%]{gap:8px}}.page-arrow[_ngcontent-%COMP%]{border:none;background:#f3e8ff;color:#5d157c;cursor:pointer;font-size:16px;width:32px;height:32px;border-radius:6px;display:flex;align-items:center;justify-content:center;transition:all .2s}@media (max-width: 480px){.page-arrow[_ngcontent-%COMP%]{width:28px;height:28px;font-size:14px}}.page-arrow[_ngcontent-%COMP%]:hover:not(:disabled){background:#5d157c;color:#fff}.page-arrow[_ngcontent-%COMP%]:disabled{color:#e5e7eb;cursor:default;opacity:.5}.page-info[_ngcontent-%COMP%]{color:#111827;font-weight:500}@media (max-width: 480px){.page-info[_ngcontent-%COMP%]{font-size:13px}}.categories-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:16px;padding:4px}@media (max-width: 1200px){.categories-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(280px,1fr))}}@media (max-width: 768px){.categories-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:12px}}@media (max-width: 640px){.categories-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.category-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:0;box-shadow:0 2px 8px #00000014;transition:all .3s;position:relative;overflow:hidden}@media (max-width: 768px){.category-card[_ngcontent-%COMP%]{border-radius:10px}}.category-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #0000001f}.category-card[_ngcontent-%COMP%]   .category-header-section[_ngcontent-%COMP%]{padding:16px;display:flex;align-items:center;gap:14px;cursor:pointer;transition:background .2s;position:relative}@media (max-width: 768px){.category-card[_ngcontent-%COMP%]   .category-header-section[_ngcontent-%COMP%]{padding:14px;gap:12px}}@media (max-width: 480px){.category-card[_ngcontent-%COMP%]   .category-header-section[_ngcontent-%COMP%]{padding:12px;gap:10px}}.category-card[_ngcontent-%COMP%]   .category-header-section[_ngcontent-%COMP%]:hover{background:#f9f9f9}.category-card[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]{width:52px;height:52px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0;overflow:hidden}@media (max-width: 768px){.category-card[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]{width:48px;height:48px}}@media (max-width: 480px){.category-card[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:10px}}.category-card[_ngcontent-%COMP%]   .category-icon.has-image[_ngcontent-%COMP%]{background:#f5f5f5}.category-card[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]   .category-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:inherit}.category-card[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:26px;color:#fff}@media (max-width: 768px){.category-card[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 480px){.category-card[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:22px}}.category-card[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]{flex:1;min-width:0;cursor:pointer}.category-card[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:16px;font-weight:600;color:#333;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@media (max-width: 768px){.category-card[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:15px}}@media (max-width: 480px){.category-card[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:14px}}.category-card[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 6px;font-size:13px;color:#666;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;line-height:1.4}@media (max-width: 768px){.category-card[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 480px){.category-card[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:11px}}.category-card[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]   .community-count[_ngcontent-%COMP%]{font-size:12px;color:#5d157c;font-weight:500}@media (max-width: 480px){.category-card[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]   .community-count[_ngcontent-%COMP%]{font-size:11px}}.category-card[_ngcontent-%COMP%]   .category-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-left:auto;flex-shrink:0}@media (max-width: 480px){.category-card[_ngcontent-%COMP%]   .category-actions[_ngcontent-%COMP%]{gap:8px}}.category-card[_ngcontent-%COMP%]   .chevron-icon[_ngcontent-%COMP%]{font-size:18px;color:#999;transition:transform .3s;cursor:pointer;flex-shrink:0}@media (max-width: 480px){.category-card[_ngcontent-%COMP%]   .chevron-icon[_ngcontent-%COMP%]{font-size:16px}}.category-card[_ngcontent-%COMP%]   .chevron-icon[_ngcontent-%COMP%]:hover{color:#666}.category-card[_ngcontent-%COMP%]   .delete-category-btn[_ngcontent-%COMP%]{width:34px;height:34px;border-radius:50%;background:#fee2e2;border:none;color:#dc2626;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s;flex-shrink:0}@media (max-width: 768px){.category-card[_ngcontent-%COMP%]   .delete-category-btn[_ngcontent-%COMP%]{width:30px;height:30px}}@media (max-width: 480px){.category-card[_ngcontent-%COMP%]   .delete-category-btn[_ngcontent-%COMP%]{width:28px;height:28px}}.category-card[_ngcontent-%COMP%]   .delete-category-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}@media (max-width: 480px){.category-card[_ngcontent-%COMP%]   .delete-category-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:13px}}.category-card[_ngcontent-%COMP%]   .delete-category-btn[_ngcontent-%COMP%]:hover{background:#dc2626;color:#fff;transform:scale(1.1)}.category-card[_ngcontent-%COMP%]   .communities-list[_ngcontent-%COMP%]{border-top:1px solid #f0f0f0;padding:12px 16px 16px;background:#fafafa}@media (max-width: 768px){.category-card[_ngcontent-%COMP%]   .communities-list[_ngcontent-%COMP%]{padding:10px 14px 14px}}@media (max-width: 480px){.category-card[_ngcontent-%COMP%]   .communities-list[_ngcontent-%COMP%]{padding:8px 12px 12px}}.category-card[_ngcontent-%COMP%]   .empty-communities[_ngcontent-%COMP%]{text-align:center;padding:30px 20px;color:#999}@media (max-width: 480px){.category-card[_ngcontent-%COMP%]   .empty-communities[_ngcontent-%COMP%]{padding:20px 16px}}.category-card[_ngcontent-%COMP%]   .empty-communities[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:36px;color:#ddd;margin-bottom:8px}@media (max-width: 480px){.category-card[_ngcontent-%COMP%]   .empty-communities[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:28px}}.category-card[_ngcontent-%COMP%]   .empty-communities[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:13px}@media (max-width: 480px){.category-card[_ngcontent-%COMP%]   .empty-communities[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}}.category-card[_ngcontent-%COMP%]   .community-item[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:12px;margin-bottom:10px;display:flex;align-items:flex-start;gap:12px;position:relative;transition:all .2s;border:1px solid #e5e7eb}@media (max-width: 768px){.category-card[_ngcontent-%COMP%]   .community-item[_ngcontent-%COMP%]{padding:10px;gap:10px}}@media (max-width: 480px){.category-card[_ngcontent-%COMP%]   .community-item[_ngcontent-%COMP%]{padding:8px;gap:8px;margin-bottom:8px}}.category-card[_ngcontent-%COMP%]   .community-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.category-card[_ngcontent-%COMP%]   .community-item[_ngcontent-%COMP%]:hover{box-shadow:0 2px 8px #00000014;border-color:#f3e8ff}.category-card[_ngcontent-%COMP%]   .community-item[_ngcontent-%COMP%]:hover   .community-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{opacity:1;pointer-events:all}@media (max-width: 768px){.category-card[_ngcontent-%COMP%]   .community-item[_ngcontent-%COMP%]   .community-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{opacity:1;pointer-events:all}}.category-card[_ngcontent-%COMP%]   .community-item-content[_ngcontent-%COMP%]{flex:1;min-width:0}.category-card[_ngcontent-%COMP%]   .community-item-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:6px}.category-card[_ngcontent-%COMP%]   .community-item-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:14px;font-weight:600;color:#333;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1}@media (max-width: 480px){.category-card[_ngcontent-%COMP%]   .community-item-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:13px}}.category-card[_ngcontent-%COMP%]   .community-item-header[_ngcontent-%COMP%]   .premium-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;font-size:10px;padding:3px 8px;border-radius:12px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}@media (max-width: 480px){.category-card[_ngcontent-%COMP%]   .community-item-header[_ngcontent-%COMP%]   .premium-badge[_ngcontent-%COMP%]{font-size:9px;padding:2px 6px}}.category-card[_ngcontent-%COMP%]   .community-item-description[_ngcontent-%COMP%]{margin:0 0 8px;font-size:12px;color:#666;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;line-height:1.4}@media (max-width: 480px){.category-card[_ngcontent-%COMP%]   .community-item-description[_ngcontent-%COMP%]{font-size:11px;-webkit-line-clamp:1}}.category-card[_ngcontent-%COMP%]   .community-item-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex-wrap:wrap}@media (max-width: 480px){.category-card[_ngcontent-%COMP%]   .community-item-meta[_ngcontent-%COMP%]{gap:8px}}.category-card[_ngcontent-%COMP%]   .community-item-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:11px;color:#888}@media (max-width: 480px){.category-card[_ngcontent-%COMP%]   .community-item-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]{font-size:10px}}.category-card[_ngcontent-%COMP%]   .community-item-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}@media (max-width: 480px){.category-card[_ngcontent-%COMP%]   .community-item-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:11px}}.category-card[_ngcontent-%COMP%]   .community-actions[_ngcontent-%COMP%]{display:flex;gap:6px;flex-shrink:0}@media (max-width: 480px){.category-card[_ngcontent-%COMP%]   .community-actions[_ngcontent-%COMP%]{gap:4px}}.category-card[_ngcontent-%COMP%]   .community-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:6px;border:none;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s;opacity:0;pointer-events:none}@media (max-width: 480px){.category-card[_ngcontent-%COMP%]   .community-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{width:28px;height:28px}}.category-card[_ngcontent-%COMP%]   .community-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:13px}@media (max-width: 480px){.category-card[_ngcontent-%COMP%]   .community-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}}.category-card[_ngcontent-%COMP%]   .community-actions[_ngcontent-%COMP%]   .action-btn.edit-btn[_ngcontent-%COMP%]{background:#e0f2fe;color:#0284c7}.category-card[_ngcontent-%COMP%]   .community-actions[_ngcontent-%COMP%]   .action-btn.edit-btn[_ngcontent-%COMP%]:hover{background:#0284c7;color:#fff;transform:scale(1.05)}.category-card[_ngcontent-%COMP%]   .community-actions[_ngcontent-%COMP%]   .action-btn.delete-btn[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626}.category-card[_ngcontent-%COMP%]   .community-actions[_ngcontent-%COMP%]   .action-btn.delete-btn[_ngcontent-%COMP%]:hover{background:#dc2626;color:#fff;transform:scale(1.05)}.category-card[_ngcontent-%COMP%]   .community-actions[_ngcontent-%COMP%]   .action-btn.visible[_ngcontent-%COMP%]{opacity:1;pointer-events:all}.empty-state[_ngcontent-%COMP%]{grid-column:1/-1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;gap:12px}@media (max-width: 480px){.empty-state[_ngcontent-%COMP%]{padding:40px 16px;gap:10px}}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:64px;color:#ddd}@media (max-width: 480px){.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px}}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#999;font-size:16px;margin:0}@media (max-width: 480px){.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}.fab[_ngcontent-%COMP%]{position:fixed;bottom:30px;right:30px;width:60px;height:60px;border-radius:50%;background:linear-gradient(135deg,#5d157c,#4a1163);border:none;color:#fff;font-size:24px;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 4px 20px #5d157c66;transition:all .3s;z-index:999}@media (max-width: 768px){.fab[_ngcontent-%COMP%]{width:56px;height:56px;bottom:24px;right:24px}}@media (max-width: 480px){.fab[_ngcontent-%COMP%]{width:52px;height:52px;bottom:20px;right:20px;font-size:22px}}.fab[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:28px}@media (max-width: 768px){.fab[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 480px){.fab[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px}}.fab[_ngcontent-%COMP%]:hover{transform:scale(1.1) rotate(90deg);box-shadow:0 8px 30px #5d157c99}.fab[_ngcontent-%COMP%]:active{transform:scale(.95) rotate(90deg)}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;backdrop-filter:blur(5px);display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px;animation:_ngcontent-%COMP%_fadeIn .3s;overflow-y:auto}@media (max-width: 768px){.modal-overlay[_ngcontent-%COMP%]{padding:16px}}@media (max-width: 480px){.modal-overlay[_ngcontent-%COMP%]{padding:12px}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:20px;max-width:500px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px #0000004d;animation:_ngcontent-%COMP%_slideUp .3s}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]{max-width:100%;max-height:95vh;border-radius:16px}}@media (max-width: 480px){.modal-content[_ngcontent-%COMP%]{max-height:none;margin:20px 0;border-radius:12px}}.modal-content.large[_ngcontent-%COMP%]{max-width:600px}@media (max-width: 768px){.modal-content.large[_ngcontent-%COMP%]{max-width:100%}}.modal-content.success-modal[_ngcontent-%COMP%]{max-width:400px;text-align:center;padding:40px 32px 32px}@media (max-width: 768px){.modal-content.success-modal[_ngcontent-%COMP%]{max-width:100%;padding:32px 24px 24px}}@media (max-width: 480px){.modal-content.success-modal[_ngcontent-%COMP%]{padding:28px 20px 20px}}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]{margin-bottom:20px}@media (max-width: 480px){.modal-content.success-modal[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]{margin-bottom:16px}}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:72px;color:#2ed573}@media (max-width: 768px){.modal-content.success-modal[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:64px}}@media (max-width: 480px){.modal-content.success-modal[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:56px}}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-icon.error[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#e74c3c}.modal-content.success-modal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 12px;font-size:22px;font-weight:700;color:#333}@media (max-width: 768px){.modal-content.success-modal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 480px){.modal-content.success-modal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}}.modal-content.success-modal[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 24px;font-size:14px;color:#666;line-height:1.6}@media (max-width: 480px){.modal-content.success-modal[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;margin-bottom:20px}}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f5f7fa}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ddd;border-radius:3px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ccc}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(50px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:24px;border-bottom:1px solid #f0f0f0}@media (max-width: 768px){.modal-header[_ngcontent-%COMP%]{padding:20px}}@media (max-width: 480px){.modal-header[_ngcontent-%COMP%]{padding:16px}}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:700;color:#333}@media (max-width: 768px){.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 480px){.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px}}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:#f5f7fa;border:none;width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s;flex-shrink:0}@media (max-width: 480px){.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{width:32px;height:32px}}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#666;font-size:18px}@media (max-width: 480px){.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#e0e0e0;transform:rotate(90deg)}.modal-body[_ngcontent-%COMP%]{padding:24px}@media (max-width: 768px){.modal-body[_ngcontent-%COMP%]{padding:20px}}@media (max-width: 480px){.modal-body[_ngcontent-%COMP%]{padding:16px}}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}@media (max-width: 480px){.form-group[_ngcontent-%COMP%]{margin-bottom:16px}}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-size:14px;font-weight:600;color:#333}@media (max-width: 480px){.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px;margin-bottom:6px}}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#e74c3c;margin-left:4px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;background:#f5f7fa;border:1px solid #e0e0e0;border-radius:10px;padding:12px 16px;color:#333;font-size:14px;transition:all .3s;box-sizing:border-box}@media (max-width: 480px){.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px 14px;font-size:13px;border-radius:8px}}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::placeholder{color:#999}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#5d157c;background:#fff;box-shadow:0 0 0 3px #5d157c1a}.form-group[_ngcontent-%COMP%]   input.error[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea.error[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select.error[_ngcontent-%COMP%]{border-color:#e74c3c}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px;font-family:inherit}@media (max-width: 480px){.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:70px}}.form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:pointer}.form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:block;margin-top:6px;font-size:12px;color:#e74c3c}@media (max-width: 480px){.form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{font-size:11px;margin-top:4px}}.form-group.checkbox[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:10px}@media (max-width: 480px){.form-group.checkbox[_ngcontent-%COMP%]{gap:8px}}.form-group.checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;margin-top:2px;cursor:pointer;accent-color:#5d157c;flex-shrink:0}.form-group.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0;cursor:pointer;font-weight:500;color:#666}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}@media (max-width: 640px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}}.modal-footer[_ngcontent-%COMP%]{display:flex;gap:12px;padding:20px 24px;border-top:1px solid #f0f0f0}@media (max-width: 768px){.modal-footer[_ngcontent-%COMP%]{padding:16px 20px}}@media (max-width: 480px){.modal-footer[_ngcontent-%COMP%]{padding:12px 16px;gap:8px}}.modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:14px 24px;border-radius:12px;font-weight:600;font-size:14px;cursor:pointer;transition:all .3s;border:none}@media (max-width: 768px){.modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 20px}}@media (max-width: 480px){.modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 16px;font-size:13px;border-radius:10px}}.modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:#f5f7fa;color:#666;border:1px solid #e0e0e0}.modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background:#e0e0e0}.modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:#5d157c;color:#fff}.modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 16px #5d157c66;background:#4a1163}.modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.modal-footer[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]{background:#dc2626;color:#fff}.modal-footer[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 16px #dc262666;background:#b21d1d}.confirm-modal[_ngcontent-%COMP%]{max-width:450px;text-align:center}@media (max-width: 480px){.confirm-modal[_ngcontent-%COMP%]{max-width:90%}}.confirm-modal[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 20px}@media (max-width: 480px){.confirm-modal[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]{width:70px;height:70px;margin-bottom:16px}}.confirm-modal[_ngcontent-%COMP%]   .modal-icon.warning[_ngcontent-%COMP%]{background:#fef3c7}.confirm-modal[_ngcontent-%COMP%]   .modal-icon.warning[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:40px;color:#f59e0b}@media (max-width: 480px){.confirm-modal[_ngcontent-%COMP%]   .modal-icon.warning[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:36px}}.confirm-modal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 12px;font-size:22px;font-weight:700;color:#333}@media (max-width: 480px){.confirm-modal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;margin-bottom:10px}}.confirm-modal[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 24px;font-size:15px;color:#666;line-height:1.6}@media (max-width: 480px){.confirm-modal[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin-bottom:20px}}.confirm-modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center}@media (max-width: 480px){.confirm-modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{gap:10px}}.confirm-modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;max-width:150px}@media (max-width: 480px){.confirm-modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{max-width:none}}@media (max-width: 896px) and (orientation: landscape){.modal-content[_ngcontent-%COMP%]{max-height:85vh}.loading[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{padding:40px 20px}}@media (max-width: 360px){.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:15px}.toggle-tabs[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]   .toggle-option[_ngcontent-%COMP%]{padding:8px 12px;font-size:12px}.fab[_ngcontent-%COMP%]{width:48px;height:48px;bottom:16px;right:16px}.fab[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:22px}}.view-modal[_ngcontent-%COMP%]{max-width:500px;width:90%}.modal-body[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{margin-bottom:16px;display:flex;flex-direction:column;gap:4px}.modal-body[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#6b7280;font-size:13px}.modal-body[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px;color:#111827;margin:0;line-height:1.5}.modal-body[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .description-text[_ngcontent-%COMP%]{white-space:pre-wrap;background:#f9fafb;padding:10px;border-radius:8px;border:1px solid #e5e7eb;font-size:14px}.modal-body[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.modal-body[_ngcontent-%COMP%]   .detail-row.meta-info[_ngcontent-%COMP%]{margin-top:24px;padding-top:16px;border-top:1px solid #e5e7eb}.modal-body[_ngcontent-%COMP%]   .detail-row.meta-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#6b7280;font-size:12px}.icon-btn-view[_ngcontent-%COMP%]{border-color:#5d157c;color:#5d157c}.icon-btn-view[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#f3e8ff;transform:scale(1.1)}"]})};function zx(i,t){i&1&&(s(0,"div",10),h(1,"div",11),s(2,"p"),p(3,"Loading providers..."),c()())}function Nx(i,t){if(i&1){let e=E();s(0,"tr")(1,"td",17),p(2),c(),s(3,"td",18),p(4),c(),s(5,"td",19)(6,"div",20)(7,"button",21),v("click",function(){let o=b(e).$implicit,r=_(2);return C(r.openEditModal(o))}),h(8,"i",22),c(),s(9,"button",23),v("click",function(o){let r=b(e).$implicit,a=_(2);return C(a.deleteProvider(r,o))}),h(10,"i",24),c()()()()}if(i&2){let e=t.$implicit;d(2),S(e.provider_id),d(2),S(e.display_name)}}function Bx(i,t){i&1&&(s(0,"tr")(1,"td",25),h(2,"i",26),s(3,"p"),p(4,"No providers found"),c()()())}function jx(i,t){if(i&1&&(s(0,"div",12)(1,"table",13)(2,"thead")(3,"tr")(4,"th"),p(5,"ID"),c(),s(6,"th"),p(7,"Provider Name"),c(),s(8,"th",14),p(9,"Actions"),c()()(),s(10,"tbody"),y(11,Nx,11,2,"tr",15)(12,Bx,5,0,"tr",16),c()()()),i&2){let e=_();d(11),g("ngForOf",e.pagedProviders)("ngForTrackBy",e.trackByProviderId),d(),g("ngIf",e.pagedProviders.length===0&&!e.isLoading)}}function Ux(i,t){if(i&1){let e=E();s(0,"div",27)(1,"div",28)(2,"span"),p(3,"Show"),c(),s(4,"select",29),N("ngModelChange",function(o){b(e);let r=_();return z(r.pageSize,o)||(r.pageSize=o),C(o)}),v("ngModelChange",function(){b(e);let o=_();return o.currentPage=1,C(o.updatePaged())}),s(5,"option",30),p(6,"5"),c(),s(7,"option",30),p(8,"10"),c(),s(9,"option",30),p(10,"20"),c(),s(11,"option",30),p(12,"50"),c()()(),s(13,"div",31)(14,"button",32),v("click",function(){b(e);let o=_();return C(o.changePage(-1))}),p(15," < "),c(),s(16,"span",33),p(17),c(),s(18,"button",32),v("click",function(){b(e);let o=_();return C(o.changePage(1))}),p(19," > "),c()()()}if(i&2){let e=_();d(4),L("ngModel",e.pageSize),d(),g("value",5),d(2),g("value",10),d(2),g("value",20),d(2),g("value",50),d(3),g("disabled",e.currentPage===1),d(3),Qe(" Page ",e.currentPage," of ",e.totalPages," "),d(),g("disabled",e.currentPage===e.totalPages)}}function Gx(i,t){if(i&1){let e=E();s(0,"div",34),v("click",function(){b(e);let o=_();return C(o.closeSuccessModal())}),s(1,"div",35),v("click",function(o){return b(e),C(o.stopPropagation())}),s(2,"div",36),h(3,"i",37),c(),s(4,"h2"),p(5),c(),s(6,"p"),p(7),c(),s(8,"button",38),v("click",function(){b(e);let o=_();return C(o.closeSuccessModal())}),p(9,"OK"),c()()()}if(i&2){let e=_();d(2),j("error",e.isError),d(),g("ngClass",e.isError?"pi-times-circle":"pi-check-circle"),d(2),S(e.successTitle),d(2),S(e.successMessage)}}var ta=class i{constructor(t,e){this.router=t;this.providerManagementService=e}providers=[];filteredProviders=[];pagedProviders=[];searchQuery="";pageSize=10;currentPage=1;totalPages=1;isLoading=!1;showSuccessModal=!1;successTitle="";successMessage="";isError=!1;ngOnInit(){this.loadProviders()}loadProviders(){this.isLoading=!0,this.providerManagementService.getProviders(0,1e3).subscribe({next:t=>{this.providers=Array.isArray(t)?t:[],this.applySearch(),this.isLoading=!1},error:t=>{console.error("\u274C Error loading providers:",t),this.providers=[],this.filteredProviders=[],this.pagedProviders=[],this.isLoading=!1,this.showError("Failed to load providers")}})}applySearch(){let t=this.searchQuery.toLowerCase().trim();t?this.filteredProviders=this.providers.filter(e=>(e.display_name||"").toLowerCase().includes(t)||(e.business_name||"").toLowerCase().includes(t)||(e.status||"").toLowerCase().includes(t)):this.filteredProviders=[...this.providers],this.currentPage=1,this.updatePaged()}updatePaged(){let t=this.filteredProviders.length;this.totalPages=t>0?Math.ceil(t/this.pageSize):1;let e=(this.currentPage-1)*this.pageSize,n=e+this.pageSize;this.pagedProviders=this.filteredProviders.slice(e,n)}changePage(t){let e=this.currentPage+t;e<1||e>this.totalPages||(this.currentPage=e,this.updatePaged())}openEditModal(t){this.providerManagementService.getProviderById(t.provider_id).subscribe({next:e=>{this.router.navigate(["providers/info/buisiness-form"],{state:{editData:e,editMode:!0}})},error:e=>{console.error("\u274C Error fetching provider details:",e),this.showError("Failed to fetch provider details")}})}deleteProvider(t,e){e.stopPropagation(),confirm(`Delete provider "${t.display_name}"? This action cannot be undone.`)&&this.providerManagementService.deleteProvider(t.provider_id).subscribe({next:()=>{this.loadProviders(),this.showSuccess("Provider Deleted!",`"${t.display_name}" has been deleted.`)},error:n=>{console.error("\u274C Error deleting provider:",n),this.showError(n.error?.message||"Failed to delete provider")}})}trackByProviderId(t,e){return e.provider_id}goBack(){this.router.navigate(["providers"])}getStatusClass(t){switch(t?.toLowerCase()){case"active":return"status-active";case"inactive":return"status-inactive";default:return"status-default"}}closeSuccessModal(){this.showSuccessModal=!1,this.successTitle="",this.successMessage="",this.isError=!1}showSuccess(t,e){this.isError=!1,this.successTitle=t,this.successMessage=e,this.showSuccessModal=!0}showError(t){this.isError=!0,this.successTitle="Error",this.successMessage=t,this.showSuccessModal=!0}static \u0275fac=function(e){return new(e||i)(w(le),w(Ai))};static \u0275cmp=R({type:i,selectors:[["app-provider-management"]],decls:12,vars:5,consts:[[1,"provider-page"],[1,"header"],[1,"back-btn",3,"click"],[1,"pi","pi-arrow-left"],[1,"tab-content"],["type","text","placeholder","Search providers by name...",1,"search-input",3,"ngModelChange","ngModel"],["class","loading",4,"ngIf"],["class","table-wrapper",4,"ngIf"],["class","pagination-bar",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"loading"],[1,"spinner"],[1,"table-wrapper"],[1,"provider-table"],[1,"th-actions"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"td-id"],[1,"td-name"],[1,"td-actions"],[1,"action-buttons"],["title","Edit Provider",1,"icon-btn","icon-btn-edit",3,"click"],[1,"pi","pi-pencil"],["title","Delete Provider",1,"icon-btn","icon-btn-delete",3,"click"],[1,"pi","pi-trash"],["colspan","3",1,"empty-row"],[1,"pi","pi-inbox"],[1,"pagination-bar"],[1,"page-size"],[1,"page-size-select",3,"ngModelChange","ngModel"],[3,"value"],[1,"page-controls"],[1,"page-arrow",3,"click","disabled"],[1,"page-info"],[1,"modal-overlay",3,"click"],[1,"modal-content","success-modal",3,"click"],[1,"modal-icon"],[1,"pi",3,"ngClass"],[1,"btn-primary",3,"click"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"button",2),v("click",function(){return n.goBack()}),h(3,"i",3),c(),s(4,"h1"),p(5,"Provider Management"),c()(),s(6,"div",4)(7,"input",5),N("ngModelChange",function(r){return z(n.searchQuery,r)||(n.searchQuery=r),r}),v("ngModelChange",function(){return n.applySearch()}),c(),y(8,zx,4,0,"div",6)(9,jx,13,3,"div",7)(10,Ux,20,9,"div",8),c(),y(11,Gx,10,5,"div",9),c()),e&2&&(d(7),L("ngModel",n.searchQuery),d(),g("ngIf",n.isLoading),d(),g("ngIf",!n.isLoading),d(),g("ngIf",!n.isLoading&&n.pagedProviders.length>0),d(),g("ngIf",n.showSuccessModal))},dependencies:[Se,ee,W,tn,nn,Z,en,Y,_e],styles:[".provider-page[_ngcontent-%COMP%]{min-height:100vh;background:#f5f7fa;padding-bottom:40px}.header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px 20px;background:#fff;box-shadow:0 2px 8px #0000001a;position:sticky;top:0;z-index:100;gap:12px}@media (max-width: 480px){.header[_ngcontent-%COMP%]{padding:12px 16px;gap:8px}}.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{background:#f0f0f0;border:none;width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s;flex-shrink:0}@media (max-width: 480px){.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{width:36px;height:36px}}.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#333;font-size:18px}@media (max-width: 480px){.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}}.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:#e0e0e0;transform:scale(1.05)}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px;font-weight:700;margin:0;color:#333}@media (max-width: 768px){.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 480px){.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:16px}}.tab-content[_ngcontent-%COMP%]{padding:20px}@media (max-width: 768px){.tab-content[_ngcontent-%COMP%]{padding:16px}}@media (max-width: 480px){.tab-content[_ngcontent-%COMP%]{padding:12px}}.search-input[_ngcontent-%COMP%]{width:100%;border-radius:12px;border:1px solid #e5e7eb;padding:12px 16px;font-size:14px;color:#111827;box-shadow:0 1px 2px #0000000d;outline:none;margin-bottom:20px;box-sizing:border-box}@media (max-width: 480px){.search-input[_ngcontent-%COMP%]{padding:10px 14px;font-size:13px;margin-bottom:16px}}.search-input[_ngcontent-%COMP%]::placeholder{color:#6b7280}.search-input[_ngcontent-%COMP%]:focus{border-color:#5d157c;box-shadow:0 0 0 3px #5d157c1a}.loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;gap:16px}@media (max-width: 480px){.loading[_ngcontent-%COMP%]{padding:40px 16px;gap:12px}}.loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid #f0f0f0;border-top-color:#5d157c;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@media (max-width: 480px){.loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border-width:3px}}.loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px}@media (max-width: 480px){.loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.table-wrapper[_ngcontent-%COMP%]{border-radius:12px;border:1px solid #e5e7eb;box-shadow:0 2px 8px #0000000d;background:#fff;overflow-x:auto}@media (max-width: 768px){.table-wrapper[_ngcontent-%COMP%]{border-radius:8px}}.provider-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:14px}@media (max-width: 768px){.provider-table[_ngcontent-%COMP%]{font-size:13px}}@media (max-width: 480px){.provider-table[_ngcontent-%COMP%]{font-size:12px}}.provider-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#5d157c;color:#fff}.provider-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:14px 16px;font-weight:600;text-align:left;white-space:nowrap}@media (max-width: 768px){.provider-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px 14px}}@media (max-width: 480px){.provider-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px 12px}}.provider-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:100px}@media (max-width: 768px){.provider-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:80px}}@media (max-width: 480px){.provider-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:70px}}.provider-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th.th-actions[_ngcontent-%COMP%]{text-align:center;width:150px}@media (max-width: 768px){.provider-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th.th-actions[_ngcontent-%COMP%]{width:120px}}@media (max-width: 480px){.provider-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th.th-actions[_ngcontent-%COMP%]{width:100px}}.provider-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #e5e7eb;transition:background .2s}.provider-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}.provider-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#faf5ff}.provider-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f3e8ff}.provider-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;vertical-align:middle}@media (max-width: 768px){.provider-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 14px}}@media (max-width: 480px){.provider-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 12px}}.provider-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-id[_ngcontent-%COMP%]{font-weight:600;color:#5d157c;font-family:Courier New,monospace;font-size:13px}@media (max-width: 480px){.provider-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-id[_ngcontent-%COMP%]{font-size:12px}}.provider-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-name[_ngcontent-%COMP%]{font-weight:500;color:#111827}.provider-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]{text-align:center;white-space:nowrap;padding:10px 8px}@media (max-width: 480px){.provider-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]{padding:8px 6px}}.provider-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:inline-flex;gap:8px;justify-content:center;align-items:center}@media (max-width: 480px){.provider-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{gap:6px}}.provider-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .empty-row[_ngcontent-%COMP%]{text-align:center;padding:60px 16px;color:#6b7280;font-size:14px}@media (max-width: 480px){.provider-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .empty-row[_ngcontent-%COMP%]{padding:40px 12px;font-size:13px}}.provider-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .empty-row[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:block;font-size:48px;color:#ddd;margin-bottom:12px}@media (max-width: 480px){.provider-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .empty-row[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:40px}}.provider-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .empty-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.icon-btn[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;border:1px solid transparent;background-color:#fff;cursor:pointer;font-size:14px;transition:all .2s;flex-shrink:0}@media (max-width: 480px){.icon-btn[_ngcontent-%COMP%]{width:32px;height:32px;font-size:13px}}.icon-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{pointer-events:none}.icon-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.icon-btn-edit[_ngcontent-%COMP%]{border-color:#2563eb;color:#2563eb}.icon-btn-edit[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#dbeafe;transform:scale(1.1)}.icon-btn-delete[_ngcontent-%COMP%]{border-color:#dc2626;color:#dc2626}.icon-btn-delete[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#fee2e2;transform:scale(1.1)}.pagination-bar[_ngcontent-%COMP%]{margin-top:16px;display:flex;justify-content:space-between;align-items:center;font-size:14px;color:#6b7280;flex-wrap:wrap;gap:12px}@media (max-width: 480px){.pagination-bar[_ngcontent-%COMP%]{font-size:13px;gap:8px}}.page-size[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}@media (max-width: 480px){.page-size[_ngcontent-%COMP%]{gap:6px}}.page-size-select[_ngcontent-%COMP%]{border-radius:6px;border:1px solid #e5e7eb;padding:6px 12px;font-size:14px;color:#111827;background-color:#fff;cursor:pointer}@media (max-width: 480px){.page-size-select[_ngcontent-%COMP%]{padding:5px 10px;font-size:13px}}.page-size-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#5d157c}.page-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}@media (max-width: 480px){.page-controls[_ngcontent-%COMP%]{gap:8px}}.page-arrow[_ngcontent-%COMP%]{border:none;background:#f3e8ff;color:#5d157c;cursor:pointer;font-size:16px;width:32px;height:32px;border-radius:6px;display:flex;align-items:center;justify-content:center;transition:all .2s}@media (max-width: 480px){.page-arrow[_ngcontent-%COMP%]{width:28px;height:28px;font-size:14px}}.page-arrow[_ngcontent-%COMP%]:hover:not(:disabled){background:#5d157c;color:#fff}.page-arrow[_ngcontent-%COMP%]:disabled{color:#e5e7eb;cursor:default;opacity:.5}.page-info[_ngcontent-%COMP%]{color:#111827;font-weight:500}@media (max-width: 480px){.page-info[_ngcontent-%COMP%]{font-size:13px}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;backdrop-filter:blur(5px);display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px;animation:_ngcontent-%COMP%_fadeIn .3s}@media (max-width: 768px){.modal-overlay[_ngcontent-%COMP%]{padding:16px}}@media (max-width: 480px){.modal-overlay[_ngcontent-%COMP%]{padding:12px;align-items:flex-start;overflow-y:auto}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:20px;max-width:500px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px #0000004d;animation:_ngcontent-%COMP%_slideUp .3s}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]{max-width:100%;max-height:95vh;border-radius:16px}}@media (max-width: 480px){.modal-content[_ngcontent-%COMP%]{max-height:none;margin:20px 0;border-radius:12px}}.modal-content.large[_ngcontent-%COMP%]{max-width:600px}@media (max-width: 768px){.modal-content.large[_ngcontent-%COMP%]{max-width:100%}}.modal-content.success-modal[_ngcontent-%COMP%]{max-width:400px;text-align:center;padding:40px 32px 32px}@media (max-width: 768px){.modal-content.success-modal[_ngcontent-%COMP%]{max-width:100%;padding:32px 24px 24px}}@media (max-width: 480px){.modal-content.success-modal[_ngcontent-%COMP%]{padding:28px 20px 20px}}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]{margin-bottom:20px}@media (max-width: 480px){.modal-content.success-modal[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]{margin-bottom:16px}}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:72px;color:#2ed573}@media (max-width: 768px){.modal-content.success-modal[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:64px}}@media (max-width: 480px){.modal-content.success-modal[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:56px}}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-icon.error[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#e74c3c}.modal-content.success-modal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 12px;font-size:22px;font-weight:700;color:#333}@media (max-width: 768px){.modal-content.success-modal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 480px){.modal-content.success-modal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}}.modal-content.success-modal[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 24px;font-size:14px;color:#666;line-height:1.6}@media (max-width: 480px){.modal-content.success-modal[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;margin-bottom:20px}}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f5f7fa}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ddd;border-radius:3px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ccc}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(50px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:24px;border-bottom:1px solid #f0f0f0}@media (max-width: 768px){.modal-header[_ngcontent-%COMP%]{padding:20px}}@media (max-width: 480px){.modal-header[_ngcontent-%COMP%]{padding:16px}}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:700;color:#333}@media (max-width: 768px){.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 480px){.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px}}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:#f5f7fa;border:none;width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s;flex-shrink:0}@media (max-width: 480px){.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{width:32px;height:32px}}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#666;font-size:18px}@media (max-width: 480px){.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#e0e0e0;transform:rotate(90deg)}.modal-body[_ngcontent-%COMP%]{padding:24px}@media (max-width: 768px){.modal-body[_ngcontent-%COMP%]{padding:20px}}@media (max-width: 480px){.modal-body[_ngcontent-%COMP%]{padding:16px}}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}@media (max-width: 480px){.form-group[_ngcontent-%COMP%]{margin-bottom:16px}}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-size:14px;font-weight:600;color:#333}@media (max-width: 480px){.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px;margin-bottom:6px}}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#e74c3c;margin-left:4px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;background:#f5f7fa;border:1px solid #e0e0e0;border-radius:10px;padding:12px 16px;color:#333;font-size:14px;transition:all .3s;box-sizing:border-box}@media (max-width: 480px){.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px 14px;font-size:13px;border-radius:8px}}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::placeholder{color:#999}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#5d157c;background:#fff;box-shadow:0 0 0 3px #5d157c1a}.form-group[_ngcontent-%COMP%]   input.error[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea.error[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select.error[_ngcontent-%COMP%]{border-color:#e74c3c}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px;font-family:inherit}@media (max-width: 480px){.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:70px}}.form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:pointer}.form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:block;margin-top:6px;font-size:12px;color:#e74c3c}@media (max-width: 480px){.form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{font-size:11px;margin-top:4px}}.modal-footer[_ngcontent-%COMP%]{display:flex;gap:12px;padding:20px 24px;border-top:1px solid #f0f0f0}@media (max-width: 768px){.modal-footer[_ngcontent-%COMP%]{padding:16px 20px}}@media (max-width: 480px){.modal-footer[_ngcontent-%COMP%]{padding:12px 16px;gap:8px}}.modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:14px 24px;border-radius:12px;font-weight:600;font-size:14px;cursor:pointer;transition:all .3s;border:none}@media (max-width: 768px){.modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 20px}}@media (max-width: 480px){.modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 16px;font-size:13px;border-radius:10px}}.modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:#f5f7fa;color:#666;border:1px solid #e0e0e0}.modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background:#e0e0e0}.modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:#5d157c;color:#fff}.modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 16px #5d157c66;background:#4a1163}.modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@media (max-width: 1024px){.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media (max-width: 360px){.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:15px}.provider-table[_ngcontent-%COMP%]{font-size:11px}.provider-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .provider-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 10px}}"]})};var na=class i{constructor(t){this.http=t}getAllKyc(){return this.http.get(Q.PROVIDER.KYC.LIST_ALL).pipe(Kt(t=>t.data||[]))}getAllPendingKyc(){let t=new Dt({fromObject:{status:"Pending"}});return this.http.get(Q.PROVIDER.KYC.LIST_ALL,{params:t}).pipe(Kt(e=>e.data||[]))}getAllVerifiedKyc(){let t=new Dt({fromObject:{status:"Verified"}});return this.http.get(Q.PROVIDER.KYC.LIST_ALL,{params:t}).pipe(Kt(e=>e.data||[]))}getKycById(t){let e=Q.PROVIDER.KYC.GET_BY_ID.replace(":kyc_id",t.toString());return this.http.get(e)}updateKycStatus(t,e){let n={kyc_id:t,status:e};return this.http.put(Q.PROVIDER.KYC.UPDATE,n)}static \u0275fac=function(e){return new(e||i)(Ae($e))};static \u0275prov=Je({token:i,factory:i.\u0275fac,providedIn:"root"})};var Wx=i=>({error:i});function Hx(i,t){i&1&&(s(0,"div",15),h(1,"div",16),s(2,"p"),p(3,"Loading pending KYC records..."),c()())}function $x(i,t){if(i&1){let e=E();s(0,"tr")(1,"td",22),p(2),c(),s(3,"td",23),p(4),c(),s(5,"td",24)(6,"span"),p(7),c()(),s(8,"td",25)(9,"div",26)(10,"button",27),v("click",function(){let o=b(e).$implicit,r=_(3);return C(r.onVerify(o.kyc_id))}),h(11,"i",28),c(),s(12,"button",29),v("click",function(){let o=b(e).$implicit,r=_(3);return C(r.onReject(o.kyc_id))}),h(13,"i",30),c()()()()}if(i&2){let e=t.$implicit,n=_(3);d(2),T("#",e.kyc_id||"N/A",""),d(2),S(e.contact_name||"Unknown"),d(2),Mt(n.getStatusClass(e.status||"pending")),d(),T(" ",e.status||"Pending"," ")}}function Yx(i,t){i&1&&(s(0,"tr")(1,"td",31),p(2," No pending KYC records found. "),c()())}function Kx(i,t){if(i&1&&(s(0,"div",17)(1,"table",18)(2,"thead")(3,"tr")(4,"th"),p(5,"KYC ID"),c(),s(6,"th"),p(7,"Contact Name"),c(),s(8,"th"),p(9,"Status"),c(),s(10,"th",19),p(11,"Actions"),c()()(),s(12,"tbody"),y(13,$x,14,5,"tr",20)(14,Yx,3,0,"tr",21),c()()()),i&2){let e=_(2);d(13),g("ngForOf",e.pagedKyc),d(),g("ngIf",e.pagedKyc.length===0)}}function Xx(i,t){if(i&1){let e=E();s(0,"div",32)(1,"div",33)(2,"span"),p(3,"Show"),c(),s(4,"select",34),N("ngModelChange",function(o){b(e);let r=_(2);return z(r.pageSizeKyc,o)||(r.pageSizeKyc=o),C(o)}),v("ngModelChange",function(){b(e);let o=_(2);return o.pageKyc=1,C(o.updatePagedPending())}),s(5,"option",35),p(6,"5"),c(),s(7,"option",35),p(8,"10"),c(),s(9,"option",35),p(10,"20"),c(),s(11,"option",35),p(12,"50"),c()()(),s(13,"div",36)(14,"button",37),v("click",function(){b(e);let o=_(2);return C(o.changePagePending(-1))}),p(15," < "),c(),s(16,"span",38),p(17),c(),s(18,"button",37),v("click",function(){b(e);let o=_(2);return C(o.changePagePending(1))}),p(19," > "),c()()()}if(i&2){let e=_(2);d(4),L("ngModel",e.pageSizeKyc),d(),g("value",5),d(2),g("value",10),d(2),g("value",20),d(2),g("value",50),d(3),g("disabled",e.pageKyc===1),d(3),Qe(" Page ",e.pageKyc," of ",e.totalPagesKyc," "),d(),g("disabled",e.pageKyc===e.totalPagesKyc)}}function Qx(i,t){if(i&1){let e=E();s(0,"div",10)(1,"input",11),N("ngModelChange",function(o){b(e);let r=_();return z(r.searchKyc,o)||(r.searchKyc=o),C(o)}),v("ngModelChange",function(){b(e);let o=_();return C(o.applySearchPending())}),c(),y(2,Hx,4,0,"div",12)(3,Kx,15,2,"div",13)(4,Xx,20,9,"div",14),c()}if(i&2){let e=_();d(),L("ngModel",e.searchKyc),d(),g("ngIf",e.isLoadingPending),d(),g("ngIf",!e.isLoadingPending),d(),g("ngIf",!e.isLoadingPending&&e.pagedKyc.length>0)}}function Jx(i,t){i&1&&(s(0,"div",15),h(1,"div",16),s(2,"p"),p(3,"Loading verified KYC records..."),c()())}function Zx(i,t){if(i&1&&(s(0,"tr")(1,"td",22),p(2),c(),s(3,"td",23),p(4),c(),s(5,"td",24)(6,"span"),p(7),c()()()),i&2){let e=t.$implicit,n=_(3);d(2),T("#",e.kyc_id||"N/A",""),d(2),S(e.contact_name||"Unknown"),d(2),Mt(n.getStatusClass(e.status||"verified")),d(),T(" ",e.status||"Verified"," ")}}function eP(i,t){i&1&&(s(0,"tr")(1,"td",41),p(2," No verified KYC records found. "),c()())}function tP(i,t){if(i&1&&(s(0,"div",17)(1,"table",40)(2,"thead")(3,"tr")(4,"th"),p(5,"KYC ID"),c(),s(6,"th"),p(7,"Contact Name"),c(),s(8,"th"),p(9,"Status"),c()()(),s(10,"tbody"),y(11,Zx,8,5,"tr",20)(12,eP,3,0,"tr",21),c()()()),i&2){let e=_(2);d(11),g("ngForOf",e.pagedVerified),d(),g("ngIf",e.pagedVerified.length===0)}}function nP(i,t){if(i&1){let e=E();s(0,"div",32)(1,"div",33)(2,"span"),p(3,"Show"),c(),s(4,"select",34),N("ngModelChange",function(o){b(e);let r=_(2);return z(r.pageSizeVerified,o)||(r.pageSizeVerified=o),C(o)}),v("ngModelChange",function(){b(e);let o=_(2);return o.pageVerified=1,C(o.updatePagedVerified())}),s(5,"option",35),p(6,"5"),c(),s(7,"option",35),p(8,"10"),c(),s(9,"option",35),p(10,"20"),c(),s(11,"option",35),p(12,"50"),c()()(),s(13,"div",36)(14,"button",37),v("click",function(){b(e);let o=_(2);return C(o.changePageVerified(-1))}),p(15," < "),c(),s(16,"span",38),p(17),c(),s(18,"button",37),v("click",function(){b(e);let o=_(2);return C(o.changePageVerified(1))}),p(19," > "),c()()()}if(i&2){let e=_(2);d(4),L("ngModel",e.pageSizeVerified),d(),g("value",5),d(2),g("value",10),d(2),g("value",20),d(2),g("value",50),d(3),g("disabled",e.pageVerified===1),d(3),Qe(" Page ",e.pageVerified," of ",e.totalPagesVerified," "),d(),g("disabled",e.pageVerified===e.totalPagesVerified)}}function iP(i,t){if(i&1){let e=E();s(0,"div",10)(1,"input",39),N("ngModelChange",function(o){b(e);let r=_();return z(r.searchVerified,o)||(r.searchVerified=o),C(o)}),v("ngModelChange",function(){b(e);let o=_();return C(o.applySearchVerified())}),c(),y(2,Jx,4,0,"div",12)(3,tP,13,2,"div",13)(4,nP,20,9,"div",14),c()}if(i&2){let e=_();d(),L("ngModel",e.searchVerified),d(),g("ngIf",e.isLoadingVerified),d(),g("ngIf",!e.isLoadingVerified),d(),g("ngIf",!e.isLoadingVerified&&e.pagedVerified.length>0)}}function oP(i,t){if(i&1){let e=E();s(0,"div",42),v("click",function(){b(e);let o=_();return C(o.closeSuccessModal())}),s(1,"div",43),v("click",function(o){return b(e),C(o.stopPropagation())}),s(2,"div",44),h(3,"i",45),c(),s(4,"h2"),p(5),c(),s(6,"p"),p(7),c(),s(8,"button",46),v("click",function(){b(e);let o=_();return C(o.closeSuccessModal())}),p(9,"OK"),c()()()}if(i&2){let e=_();d(2),g("ngClass",ln(4,Wx,e.isError)),d(),g("ngClass",e.isError?"pi-times-circle":"pi-check-circle"),d(2),S(e.successTitle),d(2),S(e.successMessage)}}function rP(i,t){if(i&1){let e=E();s(0,"div",42),v("click",function(){b(e);let o=_();return C(o.closeConfirmModal())}),s(1,"div",47),v("click",function(o){return b(e),C(o.stopPropagation())}),s(2,"h2"),p(3),c(),s(4,"p"),p(5),c(),s(6,"div",48)(7,"button",49),v("click",function(){b(e);let o=_();return C(o.closeConfirmModal())}),p(8,"Cancel"),c(),s(9,"button",46),v("click",function(){b(e);let o=_();return C(o.onConfirm())}),p(10,"Confirm"),c()()()()}if(i&2){let e=_();d(3),S(e.confirmTitle),d(2),S(e.confirmMessage)}}var ia=class i{constructor(t,e){this.router=t;this.providerKycService=e}kycList=[];filteredKyc=[];pagedKyc=[];searchKyc="";pageSizeKyc=10;pageKyc=1;totalPagesKyc=1;activeTab="pending";verifiedKycList=[];filteredVerified=[];pagedVerified=[];searchVerified="";pageSizeVerified=10;pageVerified=1;totalPagesVerified=1;isLoadingPending=!1;isLoadingVerified=!1;showSuccessModal=!1;successTitle="";successMessage="";isError=!1;showConfirmModal=!1;confirmTitle="";confirmMessage="";pendingAction=null;ngOnInit(){this.loadPendingKyc(),this.loadVerifiedKyc()}switchTab(t){this.activeTab=t,t==="pending"?this.loadPendingKyc():this.loadVerifiedKyc()}loadPendingKyc(){this.isLoadingPending=!0,this.providerKycService.getAllPendingKyc().subscribe({next:t=>{this.kycList=t||[],this.applySearchPending(),this.isLoadingPending=!1},error:t=>{console.error("\u274C Error loading pending KYC:",t),this.kycList=[],this.isLoadingPending=!1,this.showError("Failed to load pending KYC")}})}applySearchPending(){let t=this.searchKyc.toLowerCase();this.filteredKyc=this.kycList.filter(e=>(e.contact_name||"").toLowerCase().includes(t)||(e.kyc_id?.toString()||"").includes(t)||(e.status||"").toLowerCase().includes(t)),this.pageKyc=1,this.updatePagedPending()}updatePagedPending(){let t=this.filteredKyc.length;this.totalPagesKyc=t?Math.ceil(t/this.pageSizeKyc):1;let e=(this.pageKyc-1)*this.pageSizeKyc,n=e+this.pageSizeKyc;this.pagedKyc=this.filteredKyc.slice(e,n)}changePagePending(t){let e=this.pageKyc+t;e<1||e>this.totalPagesKyc||(this.pageKyc=e,this.updatePagedPending())}loadVerifiedKyc(){this.isLoadingVerified=!0,this.providerKycService.getAllVerifiedKyc().subscribe({next:t=>{this.verifiedKycList=t||[],this.applySearchVerified(),this.isLoadingVerified=!1},error:t=>{console.error("\u274C Error loading verified KYC:",t),this.verifiedKycList=[],this.isLoadingVerified=!1,this.showError("Failed to load verified KYC")}})}applySearchVerified(){let t=this.searchVerified.toLowerCase();this.filteredVerified=this.verifiedKycList.filter(e=>(e.contact_name||"").toLowerCase().includes(t)||(e.kyc_id?.toString()||"").includes(t)),this.pageVerified=1,this.updatePagedVerified()}updatePagedVerified(){let t=this.filteredVerified.length;this.totalPagesVerified=t?Math.ceil(t/this.pageSizeVerified):1;let e=(this.pageVerified-1)*this.pageSizeVerified,n=e+this.pageSizeVerified;this.pagedVerified=this.filteredVerified.slice(e,n)}changePageVerified(t){let e=this.pageVerified+t;e<1||e>this.totalPagesVerified||(this.pageVerified=e,this.updatePagedVerified())}onVerify(t){this.openConfirmModal("Verify Provider?","Are you sure you want to verify this provider's KYC? This action cannot be undone.",()=>this.executeVerify(t))}executeVerify(t){this.providerKycService.updateKycStatus(t,"Verified").subscribe({next:()=>{this.loadPendingKyc(),this.loadVerifiedKyc(),this.showSuccess("Verified!","KYC has been verified successfully.")},error:e=>{console.error("\u274C Error verifying KYC:",e),this.showError(e.error?.message||"Failed to verify KYC")}})}onReject(t){this.openConfirmModal("Reject Provider?","Are you sure you want to reject this provider's KYC? They will be notified.",()=>this.executeReject(t))}executeReject(t){this.providerKycService.updateKycStatus(t,"Rejected").subscribe({next:()=>{this.loadPendingKyc(),this.showSuccess("Rejected!","KYC has been rejected.")},error:e=>{console.error("\u274C Error rejecting KYC:",e),this.showError(e.error?.message||"Failed to reject KYC")}})}goBack(){this.router.navigate(["/providers"])}openConfirmModal(t,e,n){this.confirmTitle=t,this.confirmMessage=e,this.pendingAction=n,this.showConfirmModal=!0}closeConfirmModal(){this.showConfirmModal=!1,this.pendingAction=null}onConfirm(){this.pendingAction&&this.pendingAction(),this.closeConfirmModal()}closeSuccessModal(){this.showSuccessModal=!1,this.successTitle="",this.successMessage="",this.isError=!1}showSuccess(t,e){this.isError=!1,this.successTitle=t,this.successMessage=e,this.showSuccessModal=!0}showError(t){this.isError=!0,this.successTitle="Error",this.successMessage=t,this.showSuccessModal=!0}getStatusClass(t){switch(t?.toLowerCase()){case"verified":return"status-verified";case"pending":return"status-pending";case"rejected":return"status-rejected";default:return"status-default"}}formatDate(t){return t?new Date(t).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"N/A"}static \u0275fac=function(e){return new(e||i)(w(le),w(na))};static \u0275cmp=R({type:i,selectors:[["app-provider-kyc-list"]],decls:17,vars:10,consts:[[1,"kyc-page"],[1,"header"],[1,"back-btn",3,"click"],[1,"pi","pi-arrow-left"],[1,"toggle-tabs"],[1,"toggle-container"],[1,"toggle-option",3,"click"],[1,"toggle-slider"],["class","tab-content",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"tab-content"],["type","text","placeholder","Search by contact name, KYC ID, or status...",1,"search-input",3,"ngModelChange","ngModel"],["class","loading",4,"ngIf"],["class","table-wrapper",4,"ngIf"],["class","pagination-bar",4,"ngIf"],[1,"loading"],[1,"spinner"],[1,"table-wrapper"],[1,"kyc-table"],[1,"th-actions"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"td-kyc-id"],[1,"td-name"],[1,"td-status"],[1,"td-actions"],[1,"action-buttons"],["title","Verify KYC",1,"icon-btn","icon-btn-approve",3,"click"],[1,"fa","fa-check"],["title","Reject KYC",1,"icon-btn","icon-btn-reject",3,"click"],[1,"fa","fa-times"],["colspan","4",1,"empty-row"],[1,"pagination-bar"],[1,"page-size"],[1,"page-size-select",3,"ngModelChange","ngModel"],[3,"value"],[1,"page-controls"],[1,"page-arrow",3,"click","disabled"],[1,"page-info"],["type","text","placeholder","Search verified KYC records...",1,"search-input",3,"ngModelChange","ngModel"],[1,"kyc-table","verified"],["colspan","3",1,"empty-row"],[1,"modal-overlay",3,"click"],[1,"modal-content","success-modal",3,"click"],[1,"modal-icon",3,"ngClass"],[1,"pi",3,"ngClass"],[1,"btn-primary",3,"click"],[1,"modal-content","confirm-modal",3,"click"],[1,"modal-actions"],[1,"btn-secondary",3,"click"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"button",2),v("click",function(){return n.goBack()}),h(3,"i",3),c(),s(4,"h1"),p(5,"Provider KYC Management"),c()(),s(6,"div",4)(7,"div",5)(8,"button",6),v("click",function(){return n.switchTab("pending")}),p(9," Pending KYC "),c(),s(10,"button",6),v("click",function(){return n.switchTab("verified")}),p(11," Verified KYC "),c(),h(12,"div",7),c()(),y(13,Qx,5,4,"div",8)(14,iP,5,4,"div",8)(15,oP,10,6,"div",9)(16,rP,11,2,"div",9),c()),e&2&&(d(8),j("active",n.activeTab==="pending"),d(2),j("active",n.activeTab==="verified"),d(2),j("right",n.activeTab==="verified"),d(),g("ngIf",n.activeTab==="pending"),d(),g("ngIf",n.activeTab==="verified"),d(),g("ngIf",n.showSuccessModal),d(),g("ngIf",n.showConfirmModal))},dependencies:[Se,ee,W,tn,nn,Z,en,Y,_e],styles:[".kyc-page[_ngcontent-%COMP%]{min-height:100vh;background:#f5f7fa;padding-bottom:80px;position:relative}.header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px 20px;background:#fff;box-shadow:0 2px 8px #0000001a;position:sticky;top:0;z-index:100;gap:12px}@media (max-width: 480px){.header[_ngcontent-%COMP%]{padding:12px 16px;gap:8px}}.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{background:#f0f0f0;border:none;width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s;flex-shrink:0}@media (max-width: 480px){.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{width:36px;height:36px}}.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#333;font-size:18px}@media (max-width: 480px){.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}}.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:#e0e0e0;transform:scale(1.05)}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px;font-weight:700;margin:0;color:#333}@media (max-width: 768px){.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 480px){.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:16px}}.toggle-tabs[_ngcontent-%COMP%]{padding:16px 20px;background:#fff;display:flex;justify-content:center}@media (max-width: 480px){.toggle-tabs[_ngcontent-%COMP%]{padding:12px 16px}}.toggle-tabs[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]{position:relative;display:flex;background:#f3e8ff;border-radius:50px;padding:4px;width:100%;max-width:400px}@media (max-width: 768px){.toggle-tabs[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]{max-width:100%}}.toggle-tabs[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]   .toggle-option[_ngcontent-%COMP%]{flex:1;padding:12px 24px;border:none;background:transparent;color:#4a1163;font-weight:600;font-size:14px;cursor:pointer;z-index:2;transition:color .3s;border-radius:50px;white-space:nowrap}@media (max-width: 480px){.toggle-tabs[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]   .toggle-option[_ngcontent-%COMP%]{padding:10px 16px;font-size:13px}}.toggle-tabs[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]   .toggle-option.active[_ngcontent-%COMP%]{color:#fff}.toggle-tabs[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]   .toggle-slider[_ngcontent-%COMP%]{position:absolute;top:4px;left:4px;width:calc(50% - 4px);height:calc(100% - 8px);background:#5d157c;border-radius:50px;transition:transform .3s ease;z-index:1}.toggle-tabs[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]   .toggle-slider.right[_ngcontent-%COMP%]{transform:translate(100%)}.tab-content[_ngcontent-%COMP%]{padding:20px}@media (max-width: 768px){.tab-content[_ngcontent-%COMP%]{padding:16px}}@media (max-width: 480px){.tab-content[_ngcontent-%COMP%]{padding:12px}}.search-input[_ngcontent-%COMP%]{width:100%;border-radius:12px;border:1px solid #e5e7eb;padding:12px 16px;font-size:14px;color:#111827;box-shadow:0 1px 2px #0000000d;outline:none;margin-bottom:20px;box-sizing:border-box}@media (max-width: 480px){.search-input[_ngcontent-%COMP%]{padding:10px 14px;font-size:13px;margin-bottom:16px}}.search-input[_ngcontent-%COMP%]::placeholder{color:#6b7280}.search-input[_ngcontent-%COMP%]:focus{border-color:#5d157c;box-shadow:0 0 0 3px #5d157c1a}.loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;gap:16px}@media (max-width: 480px){.loading[_ngcontent-%COMP%]{padding:40px 16px;gap:12px}}.loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid #f0f0f0;border-top-color:#5d157c;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@media (max-width: 480px){.loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border-width:3px}}.loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px}@media (max-width: 480px){.loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.table-wrapper[_ngcontent-%COMP%]{border-radius:12px;border:1px solid #e5e7eb;box-shadow:0 2px 8px #0000000d;background:#fff;overflow-x:auto}@media (max-width: 768px){.table-wrapper[_ngcontent-%COMP%]{border-radius:8px}}.kyc-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:14px;table-layout:auto}@media (max-width: 768px){.kyc-table[_ngcontent-%COMP%]{font-size:13px}}@media (max-width: 480px){.kyc-table[_ngcontent-%COMP%]{font-size:12px}}.kyc-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#5d157c;color:#fff}.kyc-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px 16px;font-weight:600;text-align:left;white-space:nowrap}@media (max-width: 768px){.kyc-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px 12px}}@media (max-width: 480px){.kyc-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:8px 10px}}.kyc-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:100px}@media (max-width: 768px){.kyc-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:80px}}.kyc-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:auto;min-width:150px}.kyc-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:120px;text-align:center}@media (max-width: 768px){.kyc-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:100px}}.kyc-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th.th-actions[_ngcontent-%COMP%]{text-align:center;width:100px}@media (max-width: 768px){.kyc-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th.th-actions[_ngcontent-%COMP%]{width:90px}}@media (max-width: 480px){.kyc-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th.th-actions[_ngcontent-%COMP%]{width:80px}}.kyc-table.verified[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:100px}@media (max-width: 768px){.kyc-table.verified[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:80px}}.kyc-table.verified[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:auto;min-width:200px}.kyc-table.verified[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:120px;text-align:center}@media (max-width: 768px){.kyc-table.verified[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:100px}}.kyc-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #e5e7eb;transition:background .2s}.kyc-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}.kyc-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#faf5ff}.kyc-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f3e8ff}.kyc-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 16px;vertical-align:middle}@media (max-width: 768px){.kyc-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 12px}}@media (max-width: 480px){.kyc-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px 10px}}.kyc-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-kyc-id[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-weight:600;color:#4a1163;font-size:13px;white-space:nowrap}@media (max-width: 768px){.kyc-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-kyc-id[_ngcontent-%COMP%]{font-size:12px}}.kyc-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-name[_ngcontent-%COMP%]{font-weight:500;color:#111827;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:200px}@media (max-width: 768px){.kyc-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-name[_ngcontent-%COMP%]{max-width:150px}}.kyc-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-status[_ngcontent-%COMP%]{text-align:center}.kyc-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-status[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:20px;font-size:11px;font-weight:600;white-space:nowrap}@media (max-width: 768px){.kyc-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-status[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:3px 8px;font-size:10px}}.kyc-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-status[_ngcontent-%COMP%]   span.status-verified[_ngcontent-%COMP%]{background:#dcfce7;color:#16a34a}.kyc-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-status[_ngcontent-%COMP%]   span.status-pending[_ngcontent-%COMP%]{background:#fef3c7;color:#f59e0b}.kyc-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-status[_ngcontent-%COMP%]   span.status-rejected[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626}.kyc-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-status[_ngcontent-%COMP%]   span.status-default[_ngcontent-%COMP%]{background:#f3f4f6;color:#6b7280}.kyc-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]{text-align:center;white-space:nowrap;padding:8px}@media (max-width: 480px){.kyc-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]{padding:6px}}.kyc-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:inline-flex;gap:6px;justify-content:center;align-items:center}@media (max-width: 480px){.kyc-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{gap:4px}}.kyc-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .empty-row[_ngcontent-%COMP%]{text-align:center;padding:40px 16px;color:#6b7280;font-size:14px}@media (max-width: 480px){.kyc-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .empty-row[_ngcontent-%COMP%]{padding:30px 12px;font-size:13px}}.icon-btn[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;border:1px solid transparent;background-color:#fff;cursor:pointer;font-size:13px;transition:all .2s;flex-shrink:0}@media (max-width: 768px){.icon-btn[_ngcontent-%COMP%]{width:30px;height:30px;font-size:12px}}@media (max-width: 480px){.icon-btn[_ngcontent-%COMP%]{width:28px;height:28px;font-size:11px}}.icon-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{pointer-events:none}.icon-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.icon-btn-approve[_ngcontent-%COMP%]{border-color:#16a34a;color:#16a34a}.icon-btn-approve[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#dcfce7;transform:scale(1.1)}.icon-btn-reject[_ngcontent-%COMP%]{border-color:#dc2626;color:#dc2626}.icon-btn-reject[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#fee2e2;transform:scale(1.1)}.pagination-bar[_ngcontent-%COMP%]{margin-top:16px;display:flex;justify-content:space-between;align-items:center;font-size:14px;color:#6b7280;flex-wrap:wrap;gap:12px}@media (max-width: 480px){.pagination-bar[_ngcontent-%COMP%]{font-size:13px;gap:8px}}.page-size[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}@media (max-width: 480px){.page-size[_ngcontent-%COMP%]{gap:6px}}.page-size-select[_ngcontent-%COMP%]{border-radius:6px;border:1px solid #e5e7eb;padding:6px 12px;font-size:14px;color:#111827;background-color:#fff;cursor:pointer}@media (max-width: 480px){.page-size-select[_ngcontent-%COMP%]{padding:5px 10px;font-size:13px}}.page-size-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#5d157c}.page-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}@media (max-width: 480px){.page-controls[_ngcontent-%COMP%]{gap:8px}}.page-arrow[_ngcontent-%COMP%]{border:none;background:#f3e8ff;color:#5d157c;cursor:pointer;font-size:16px;width:32px;height:32px;border-radius:6px;display:flex;align-items:center;justify-content:center;transition:all .2s}@media (max-width: 480px){.page-arrow[_ngcontent-%COMP%]{width:28px;height:28px;font-size:14px}}.page-arrow[_ngcontent-%COMP%]:hover:not(:disabled){background:#5d157c;color:#fff}.page-arrow[_ngcontent-%COMP%]:disabled{color:#e5e7eb;cursor:default;opacity:.5}.page-info[_ngcontent-%COMP%]{color:#111827;font-weight:500}@media (max-width: 480px){.page-info[_ngcontent-%COMP%]{font-size:13px}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;backdrop-filter:blur(5px);display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px;animation:_ngcontent-%COMP%_fadeIn .3s}@media (max-width: 768px){.modal-overlay[_ngcontent-%COMP%]{padding:16px}}@media (max-width: 480px){.modal-overlay[_ngcontent-%COMP%]{padding:12px;align-items:flex-start;overflow-y:auto}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:20px;max-width:500px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px #0000004d;animation:_ngcontent-%COMP%_slideUp .3s}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]{max-width:100%;max-height:95vh;border-radius:16px}}@media (max-width: 480px){.modal-content[_ngcontent-%COMP%]{max-height:none;margin:20px 0;border-radius:12px}}.modal-content.success-modal[_ngcontent-%COMP%]{max-width:400px;text-align:center;padding:40px 32px 32px}@media (max-width: 768px){.modal-content.success-modal[_ngcontent-%COMP%]{max-width:100%;padding:32px 24px 24px}}@media (max-width: 480px){.modal-content.success-modal[_ngcontent-%COMP%]{padding:28px 20px 20px}}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]{margin-bottom:20px}@media (max-width: 480px){.modal-content.success-modal[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]{margin-bottom:16px}}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:72px;color:#2ed573}@media (max-width: 768px){.modal-content.success-modal[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:64px}}@media (max-width: 480px){.modal-content.success-modal[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:56px}}.modal-content.success-modal[_ngcontent-%COMP%]   .modal-icon.error[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#e74c3c}.modal-content.success-modal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 12px;font-size:22px;font-weight:700;color:#333}@media (max-width: 768px){.modal-content.success-modal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 480px){.modal-content.success-modal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}}.modal-content.success-modal[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 24px;font-size:14px;color:#666;line-height:1.6}@media (max-width: 480px){.modal-content.success-modal[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;margin-bottom:20px}}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f5f7fa}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ddd;border-radius:3px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ccc}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(50px);opacity:0}to{transform:translateY(0);opacity:1}}.btn-primary[_ngcontent-%COMP%]{flex:1;padding:14px 24px;border-radius:12px;font-weight:600;font-size:14px;cursor:pointer;transition:all .3s;border:none;background:#5d157c;color:#fff}@media (max-width: 768px){.btn-primary[_ngcontent-%COMP%]{padding:12px 20px}}@media (max-width: 480px){.btn-primary[_ngcontent-%COMP%]{padding:10px 16px;font-size:13px;border-radius:10px}}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 16px #5d157c66;background:#4a1163}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@media (max-width: 896px) and (orientation: landscape){.modal-content[_ngcontent-%COMP%]{max-height:85vh}.loading[_ngcontent-%COMP%]{padding:40px 20px}}@media (max-width: 360px){.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:15px}.toggle-tabs[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]   .toggle-option[_ngcontent-%COMP%]{padding:8px 12px;font-size:12px}}.btn-secondary[_ngcontent-%COMP%]{flex:1;padding:14px 24px;border-radius:12px;font-weight:600;font-size:14px;cursor:pointer;transition:all .3s;background:transparent;color:#5d157c;border:1px solid #5d157c}@media (max-width: 768px){.btn-secondary[_ngcontent-%COMP%]{padding:12px 20px}}.btn-secondary[_ngcontent-%COMP%]:hover{background:#f3e8ff}.confirm-modal[_ngcontent-%COMP%]{padding:32px;max-width:400px;text-align:center}.confirm-modal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 16px;font-size:20px;color:#333}.confirm-modal[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:24px;line-height:1.5}.confirm-modal[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]{display:flex;gap:12px}"]})};var aP=()=>({width:"100%"});function sP(i,t){if(i&1&&(s(0,"div",14)(1,"div",15),p(2),c(),s(3,"div",16),p(4),c()()),i&2){let e=t.$implicit;d(2),S(e.display_name),d(2),S(e.business_name)}}function cP(i,t){i&1&&(s(0,"div",17),h(1,"div",18),s(2,"p"),p(3,"Loading role configurations..."),c()())}function dP(i,t){i&1&&(s(0,"div",19),h(1,"i",20),s(2,"h3"),p(3,"No Provider Selected"),c(),s(4,"p"),p(5,"Please select a provider from the dropdown above to manage role-based tab access"),c()())}function lP(i,t){if(i&1){let e=E();s(0,"button",25),v("click",function(){b(e);let o=_(3);return C(o.openAddRoleModal())}),h(1,"i",26),p(2," Add Role "),c()}}function pP(i,t){if(i&1&&(s(0,"div",23)(1,"h3"),p(2,"Configured Roles"),c(),y(3,lP,3,0,"button",24),c()),i&2){let e=_(2);d(3),g("ngIf",e.getAvailableRolesToAdd().length>0)}}function mP(i,t){if(i&1&&(s(0,"span",39),p(1),c()),i&2){let e=t.$implicit;d(),T(" ",e," ")}}function gP(i,t){i&1&&(s(0,"span",40),p(1," No tabs assigned "),c())}function uP(i,t){if(i&1){let e=E();s(0,"tr")(1,"td",30)(2,"span",31),p(3),M(4,"titlecase"),c()(),s(5,"td",32)(6,"div",33),y(7,mP,2,1,"span",34)(8,gP,2,0,"span",35),c()(),s(9,"td",36)(10,"button",37),v("click",function(){let o=b(e).$implicit,r=_(3);return C(r.openTabAssignmentModal(o))}),h(11,"i",38),p(12," Manage "),c()()()}if(i&2){let e=t.$implicit,n=_(3);d(2),g("ngClass",n.getRoleBadgeClass(e.role)),d(),T(" ",O(4,6,e.role)," "),d(4),g("ngForOf",e.tabs),d(),g("ngIf",e.tabs.length===0),d(2),fn("title","Manage Tab Access for ",e.role,"")}}function fP(i,t){if(i&1&&(s(0,"div",21)(1,"table",27)(2,"thead")(3,"tr")(4,"th"),p(5,"Role"),c(),s(6,"th"),p(7,"Assigned Tabs"),c(),s(8,"th",28),p(9,"Actions"),c()()(),s(10,"tbody"),y(11,uP,13,8,"tr",29),c()()()),i&2){let e=_(2);d(11),g("ngForOf",e.roleConfigurations)}}function _P(i,t){if(i&1&&(s(0,"div",21),y(1,pP,4,1,"div",22)(2,fP,12,1,"div",10),c()),i&2){let e=_();d(),g("ngIf",e.roleConfigurations.length>0),d(),g("ngIf",e.roleConfigurations.length>0)}}function hP(i,t){if(i&1){let e=E();s(0,"div",41)(1,"div",42),h(2,"i",43),s(3,"p"),p(4,"No role configurations found for this provider"),c(),s(5,"div",44)(6,"button",45),v("click",function(){b(e);let o=_();return C(o.initializeRoleConfigs())}),h(7,"i",26),p(8," Initialize All Roles "),c(),s(9,"span",46),p(10,"OR"),c(),s(11,"button",25),v("click",function(){b(e);let o=_();return C(o.openAddRoleModal())}),h(12,"i",26),p(13," Add Specific Role "),c()()()()}}function bP(i,t){if(i&1){let e=E();s(0,"div",59)(1,"input",60),N("ngModelChange",function(o){b(e);let r=_(2);return z(r.selectedRoleToAdd,o)||(r.selectedRoleToAdd=o),C(o)}),c(),s(2,"label",61)(3,"span",31),p(4),M(5,"titlecase"),c()()()}if(i&2){let e=t.$implicit,n=_(2);d(),g("id","role-"+e)("value",e),L("ngModel",n.selectedRoleToAdd),d(),g("for","role-"+e),d(),g("ngClass",n.getRoleBadgeClass(e)),d(),T(" ",O(5,6,e)," ")}}function CP(i,t){if(i&1){let e=E();s(0,"div",47),v("click",function(){b(e);let o=_();return C(o.closeAddRoleModal())}),s(1,"div",48),v("click",function(o){return b(e),C(o.stopPropagation())}),s(2,"div",49)(3,"h2"),p(4,"Add New Role"),c(),s(5,"button",50),v("click",function(){b(e);let o=_();return C(o.closeAddRoleModal())}),h(6,"i",51),c()(),s(7,"div",52)(8,"div",53)(9,"label"),p(10,"Select Role to Configure"),c(),s(11,"div",54),y(12,bP,6,8,"div",55),c()()(),s(13,"div",56)(14,"button",57),v("click",function(){b(e);let o=_();return C(o.closeAddRoleModal())}),p(15,"Cancel"),c(),s(16,"button",58),v("click",function(){b(e);let o=_();return C(o.confirmAddRole())}),p(17," Add Role "),c()()()()}if(i&2){let e=_();d(12),g("ngForOf",e.getAvailableRolesToAdd()),d(4),g("disabled",!e.selectedRoleToAdd)}}function vP(i,t){if(i&1){let e=E();s(0,"label",73)(1,"input",74),v("change",function(){let o=b(e).$implicit,r=_(3);return C(r.toggleTab(o))}),c(),s(2,"span"),p(3),c()()}if(i&2){let e=t.$implicit,n=_(3);d(),g("checked",n.isTabSelected(e)),d(2),S(e)}}function xP(i,t){if(i&1&&(s(0,"div",52)(1,"div",65)(2,"p",66)(3,"span",31),p(4),M(5,"titlecase"),c()()(),s(6,"div",67)(7,"label",68),p(8,"Tabs"),c(),s(9,"div",69),y(10,vP,4,2,"label",70),c()(),s(11,"div",71),h(12,"i",72),p(13),c()()),i&2){let e=_(2);d(3),g("ngClass",e.getRoleBadgeClass(e.selectedRoleConfig.role)),d(),T(" ",O(5,4,e.selectedRoleConfig.role)," "),d(6),g("ngForOf",e.availableTabs),d(3),T(" ",e.selectedTabs.length," selected ")}}function PP(i,t){i&1&&(s(0,"span"),p(1,"Save Changes"),c())}function yP(i,t){i&1&&(s(0,"span"),p(1,"Saving..."),c())}function MP(i,t){if(i&1){let e=E();s(0,"div",47),v("click",function(){b(e);let o=_();return C(o.closeTabAssignmentModal())}),s(1,"div",62),v("click",function(o){return b(e),C(o.stopPropagation())}),s(2,"div",49)(3,"h2"),p(4,"Manage Tab Access"),c(),s(5,"button",50),v("click",function(){b(e);let o=_();return C(o.closeTabAssignmentModal())}),h(6,"i",51),c()(),y(7,xP,14,6,"div",63),s(8,"div",56)(9,"button",57),v("click",function(){b(e);let o=_();return C(o.closeTabAssignmentModal())}),p(10," Cancel "),c(),s(11,"button",58),v("click",function(){b(e);let o=_();return C(o.saveTabAssignment())}),y(12,PP,2,0,"span",64)(13,yP,2,0,"span",64),c()()()()}if(i&2){let e=_();d(7),g("ngIf",e.selectedRoleConfig),d(4),g("disabled",e.isSaving),d(),g("ngIf",!e.isSaving),d(),g("ngIf",e.isSaving)}}var oa=class i{constructor(t,e,n,o,r){this.location=t;this.rbacService=e;this.http=n;this.messageService=o;this.confirmationService=r}isLoading=!1;isLoadingProviders=!1;isLazyLoading=!1;isSaving=!1;providers=[];selectedProviderId=null;pageSize=10;totalProviders=0;searchQuery="";searchTimeout;roleConfigurations=[];availableRoles=["admin","manager","employee","user"];availableTabs=["Explore","Dashboards","Orders","Dues","Slots","Group","Transaction"];showTabAssignmentModal=!1;showAddRoleModal=!1;selectedRoleConfig=null;selectedTabs=[];selectedRoleToAdd=null;ngOnInit(){}loadProviders(t=0,e=20,n=!1){if(console.log("loadProviders called with:",{skip:t,limit:e,isSearch:n}),!this.searchQuery){this.providers=[],this.totalProviders=0,this.isLoadingProviders=!1,this.isLazyLoading=!1;return}t===0?this.isLoadingProviders=!0:this.isLazyLoading=!0;let o={skip:t,limit:e};this.searchQuery&&(o.search=this.searchQuery),this.http.get("providers_new",{params:o}).subscribe({next:r=>{let l=(r.items||[]).map(m=>({provider_id:m.provider_id,display_name:m.display_name||m.business_name||"Unknown Provider",business_name:m.business_name||"",status:m.status||""}));if(t===0)this.providers=l;else{let m=new Set(this.providers.map(f=>f.provider_id)),u=l.filter(f=>!m.has(f.provider_id));this.providers=[...this.providers,...u]}this.totalProviders=r.total||r.count||(t===0?this.providers.length:this.totalProviders),this.isLoadingProviders=!1,this.isLazyLoading=!1},error:r=>{console.error("Error loading providers:",r),this.isLoadingProviders=!1,this.isLazyLoading=!1,t===0&&this.providers.length===0&&(this.providers=[])}})}loadMoreProviders(t){if(console.log("loadMoreProviders event:",t),this.isLoadingProviders||this.isLazyLoading||this.providers.length>=this.totalProviders&&this.totalProviders>0)return;let e=t.rows||10;(t.first||0)+e>=this.providers.length&&this.loadProviders(this.providers.length,this.pageSize)}onFilter(t){this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.searchQuery=t.filter||"",this.providers=[],this.loadProviders(0,this.pageSize,!0)},500)}onProviderChange(){this.selectedProviderId?this.loadRoleConfigurations():this.roleConfigurations=[]}loadRoleConfigurations(t=!1){if(!this.selectedProviderId)return;this.isLoading=!0;let e=t?{cache:{noCache:!0}}:{};this.http.get(`rbac/providers/${this.selectedProviderId}/tab-configs`,e).subscribe({next:n=>{Array.isArray(n)?this.roleConfigurations=n.map(o=>({provider_id:o.provider_id,role:o.role,tabs:o.tabs||[],id:o.id})):this.roleConfigurations=[],this.isLoading=!1},error:n=>{console.error("Error loading role configurations:",n),this.roleConfigurations=[],this.isLoading=!1}})}getAvailableRolesToAdd(){let t=this.roleConfigurations.map(e=>e.role);return this.availableRoles.filter(e=>!t.includes(e))}initializeRoleConfigs(){if(!this.selectedProviderId)return;let t=this.getAvailableRolesToAdd();if(t.length===0){this.messageService.add({severity:"info",summary:"Info",detail:"All roles are already configured"});return}let e=t.map(n=>({provider_id:this.selectedProviderId,role:n,tabs:[]}));this.roleConfigurations=[...this.roleConfigurations,...e],this.messageService.add({severity:"info",summary:"Initialized",detail:"Added missing role configurations. Click Manage to assign tabs."})}openAddRoleModal(){if(this.getAvailableRolesToAdd().length===0){this.messageService.add({severity:"info",summary:"Info",detail:"All roles are already configured"});return}this.selectedRoleToAdd=null,this.showAddRoleModal=!0}closeAddRoleModal(){this.showAddRoleModal=!1,this.selectedRoleToAdd=null}confirmAddRole(){if(!this.selectedRoleToAdd||!this.selectedProviderId)return;let t={provider_id:this.selectedProviderId,role:this.selectedRoleToAdd,tabs:[]};this.roleConfigurations.push(t),this.closeAddRoleModal(),this.openTabAssignmentModal(t)}openTabAssignmentModal(t){this.selectedRoleConfig=t,this.selectedTabs=[...t.tabs||[]],this.showTabAssignmentModal=!0}closeTabAssignmentModal(){this.showTabAssignmentModal=!1,this.selectedRoleConfig=null,this.selectedTabs=[]}deleteRole(t){}toggleTab(t){let e=this.selectedTabs.indexOf(t);e>-1?this.selectedTabs.splice(e,1):this.selectedTabs.push(t)}isTabSelected(t){return this.selectedTabs.includes(t)}saveTabAssignment(){!this.selectedRoleConfig||!this.selectedProviderId||this.confirmationService.confirm({message:`Are you sure you want to save the changes for ${this.selectedRoleConfig.role}?`,accept:()=>{this.isSaving=!0;let t={provider_id:this.selectedProviderId,role:this.selectedRoleConfig.role,tabs:this.selectedTabs};(this.selectedRoleConfig.id?this.http.put(`rbac/providers/${this.selectedProviderId}/tab-config/${this.selectedRoleConfig.role}`,this.selectedTabs):this.http.post(`rbac/providers/${this.selectedProviderId}/tab-config`,t)).subscribe({next:n=>{this.messageService.add({severity:"success",summary:"Success",detail:`Tab access ${this.selectedRoleConfig?.id?"updated":"configured"} successfully for ${this.selectedRoleConfig?.role} role`}),this.selectedRoleConfig&&(this.selectedRoleConfig.tabs=[...this.selectedTabs]),this.isSaving=!1,this.closeTabAssignmentModal(),this.loadRoleConfigurations(!0)},error:n=>{console.error("Error saving tab configuration:",n),this.selectedRoleConfig?.id?this.http.post(`rbac/providers/${this.selectedProviderId}/tab-config`,t).subscribe({next:o=>{this.messageService.add({severity:"success",summary:"Success",detail:`Tab access configured successfully for ${this.selectedRoleConfig?.role} role`}),this.selectedRoleConfig&&(this.selectedRoleConfig.tabs=[...this.selectedTabs]),this.isSaving=!1,this.closeTabAssignmentModal(),this.loadRoleConfigurations(!0)},error:o=>{console.error("Error creating tab configuration:",o),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to configure tab access"}),this.isSaving=!1}}):(this.messageService.add({severity:"error",summary:"Error",detail:"Failed to configure tab access"}),this.isSaving=!1)}})}})}goBack(){this.location.back()}getRoleBadgeClass(t){return{admin:"role-admin",manager:"role-manager",employee:"role-employee",contractor:"role-contractor",user:"role-contractor"}[t.toLowerCase()]||"role-default"}static \u0275fac=function(e){return new(e||i)(w(go),w(wo),w($e),w(kt),w(pe))};static \u0275cmp=R({type:i,selectors:[["app-provider-access-management"]],decls:20,vars:18,consts:[[1,"access-management-page"],[1,"header"],[1,"back-btn",3,"click"],[1,"pi","pi-arrow-left"],[1,"filters-section"],[1,"filter-group"],["optionLabel","display_name","optionValue","provider_id","placeholder","Search and select provider...","filterBy","display_name,business_name","scrollHeight","400px","emptyMessage","Type to search","emptyFilterMessage","Type to search","panelStyleClass","centered-dropdown-panel",1,"provider-dropdown",3,"ngModelChange","onChange","onLazyLoad","onFilter","options","ngModel","filter","showClear","loading","virtualScroll","virtualScrollItemSize","lazy","rows"],["pTemplate","item"],["class","loading",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","table-wrapper",4,"ngIf"],["class","empty-state-container",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],["header","Confirmation","icon","pi pi-exclamation-triangle"],[1,"provider-option"],[1,"provider-name"],[1,"provider-business"],[1,"loading"],[1,"spinner"],[1,"empty-state"],[1,"pi","pi-building"],[1,"table-wrapper"],["class","table-actions-header",4,"ngIf"],[1,"table-actions-header"],["class","btn-secondary-small",3,"click",4,"ngIf"],[1,"btn-secondary-small",3,"click"],[1,"pi","pi-plus"],[1,"roles-table"],[1,"th-actions"],[4,"ngFor","ngForOf"],[1,"td-role"],[1,"role-badge",3,"ngClass"],[1,"td-tabs"],[1,"tabs-list"],["class","tab-badge",4,"ngFor","ngForOf"],["class","no-tabs",4,"ngIf"],[1,"td-actions"],[1,"action-btn","edit-btn",3,"click","title"],[1,"pi","pi-pencil"],[1,"tab-badge"],[1,"no-tabs"],[1,"empty-state-container"],[1,"empty-content"],[1,"pi","pi-inbox","empty-icon"],[1,"empty-actions"],[1,"btn-primary-small",3,"click"],[1,"divider-text"],[1,"modal-overlay",3,"click"],[1,"modal-content","small-modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"pi","pi-times"],[1,"modal-body"],[1,"form-group"],[1,"radio-group"],["class","radio-item",4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click","disabled"],[1,"radio-item"],["type","radio","name","roleToAdd",3,"ngModelChange","id","value","ngModel"],[3,"for"],[1,"modal-content",3,"click"],["class","modal-body",4,"ngIf"],[4,"ngIf"],[1,"role-info"],[1,"role-description"],[1,"tabs-selection"],[1,"section-label"],[1,"tabs-grid"],["class","tab-checkbox",4,"ngFor","ngForOf"],[1,"selected-count"],[1,"pi","pi-check-circle"],[1,"tab-checkbox"],["type","checkbox",3,"change","checked"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"button",2),v("click",function(){return n.goBack()}),h(3,"i",3),c(),s(4,"h1"),p(5,"Provider Access Management"),c()(),s(6,"div",4)(7,"div",5)(8,"label"),p(9,"Select Provider"),c(),s(10,"p-dropdown",6),N("ngModelChange",function(r){return z(n.selectedProviderId,r)||(n.selectedProviderId=r),r}),v("onChange",function(){return n.onProviderChange()})("onLazyLoad",function(r){return n.loadMoreProviders(r)})("onFilter",function(r){return n.onFilter(r)}),y(11,sP,5,2,"ng-template",7),c()()(),y(12,cP,4,0,"div",8)(13,dP,6,0,"div",9)(14,_P,3,2,"div",10)(15,hP,14,0,"div",11),c(),y(16,CP,18,2,"div",12)(17,MP,14,4,"div",12),h(18,"p-toast")(19,"p-confirmDialog",13)),e&2&&(d(10),st(se(17,aP)),g("options",n.providers),L("ngModel",n.selectedProviderId),g("filter",!0)("showClear",!0)("loading",n.isLoadingProviders)("virtualScroll",!0)("virtualScrollItemSize",50)("lazy",!0)("rows",10),d(2),g("ngIf",n.isLoading),d(),g("ngIf",!n.selectedProviderId&&!n.isLoading),d(),g("ngIf",n.selectedProviderId&&!n.isLoading),d(),g("ngIf",n.selectedProviderId&&!n.isLoading&&n.roleConfigurations.length===0),d(),g("ngIf",n.showAddRoleModal),d(),g("ngIf",n.showTabAssignmentModal))},dependencies:[Se,ee,W,Pn,Ve,Z,vn,Y,_e,On,he,bn],styles:[".access-management-page[_ngcontent-%COMP%]{min-height:100vh;background:#f8fafc;padding-bottom:40px;font-family:Inter,system-ui,-apple-system,sans-serif}.header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:20px 32px;background:#fff;border-bottom:1px solid #e2e8f0;position:sticky;top:0;z-index:100;gap:16px}@media (max-width: 480px){.header[_ngcontent-%COMP%]{padding:16px 20px;gap:12px}}.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{background:transparent;border:1px solid #e2e8f0;width:36px;height:36px;border-radius:8px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease}.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#64748b;font-size:14px}.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:#f1f5f9;border-color:#cbd5e1}.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#1e293b}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin:0;color:#1e293b;letter-spacing:-.01em}.filters-section[_ngcontent-%COMP%]{padding:24px 32px 0;display:flex;flex-direction:column;gap:20px;max-width:1200px;margin:0 auto}@media (max-width: 768px){.filters-section[_ngcontent-%COMP%]{padding:20px}}.search-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:400px}.search-container[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:14px;top:50%;transform:translateY(-50%);color:#64748b;font-size:16px;pointer-events:none}.search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;border-radius:8px;border:1px solid #e2e8f0;padding:10px 40px;font-size:14px;color:#1e293b;background:#fff;outline:none;transition:all .2s;box-shadow:0 1px 2px #0000000d}.search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#64748b}.search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{border-color:#5d157c;box-shadow:0 0 0 3px #5d157c1a}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#1e293b}@media (max-width: 480px){.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px}}.filter-group[_ngcontent-%COMP%]     .role-dropdown .p-dropdown, .filter-group[_ngcontent-%COMP%]     .provider-dropdown .p-dropdown{border-radius:12px;border:1px solid #e2e8f0;box-shadow:0 1px 2px #0000000d}.filter-group[_ngcontent-%COMP%]     .role-dropdown .p-dropdown:hover, .filter-group[_ngcontent-%COMP%]     .provider-dropdown .p-dropdown:hover{border-color:#5d157c}.filter-group[_ngcontent-%COMP%]     .role-dropdown .p-dropdown.p-focus, .filter-group[_ngcontent-%COMP%]     .provider-dropdown .p-dropdown.p-focus{border-color:#5d157c;box-shadow:0 0 0 3px #5d157c1a}.provider-option[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;padding:4px 0}.provider-option[_ngcontent-%COMP%]   .provider-name[_ngcontent-%COMP%]{font-weight:600;color:#1e293b;font-size:13px}.provider-option[_ngcontent-%COMP%]   .provider-business[_ngcontent-%COMP%]{font-size:11px;color:#64748b}.dropdown-footer[_ngcontent-%COMP%]{padding:6px 10px;text-align:center;border-top:1px solid #e2e8f0;background:#f9fafb}.dropdown-footer[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#64748b;font-size:11px;font-weight:500}.loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 16px;gap:12px}@media (max-width: 480px){.loading[_ngcontent-%COMP%]{padding:30px 12px;gap:10px}}.loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #f0f0f0;border-top-color:#5d157c;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@media (max-width: 480px){.loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:30px;height:30px;border-width:2px}}.loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:13px}@media (max-width: 480px){.loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.empty-state[_ngcontent-%COMP%], .empty-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 16px;text-align:center}.empty-state[_ngcontent-%COMP%]   i.pi-inbox[_ngcontent-%COMP%], .empty-row[_ngcontent-%COMP%]   i.pi-inbox[_ngcontent-%COMP%]{font-size:32px;color:#e2e8f0;margin-bottom:12px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .empty-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 16px;color:#64748b;font-size:13px}.table-wrapper[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #e2e8f0;background:#fff;box-shadow:0 1px 2px #0000000d;max-width:1200px;margin:16px auto;overflow:hidden}@media (max-width: 768px){.table-wrapper[_ngcontent-%COMP%]{margin:16px}}.roles-table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0;font-size:13px}.roles-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#f8fafc}.roles-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:16px 24px;font-weight:600;color:#64748b;font-size:12px;letter-spacing:.02em;text-align:left;border-bottom:1px solid #e2e8f0;height:48px}.roles-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th.th-actions[_ngcontent-%COMP%]{text-align:right;padding-right:24px}.roles-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background .1s}.roles-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f5f9}.roles-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.roles-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px 24px;vertical-align:middle;border-bottom:1px solid #e2e8f0;color:#1e293b}.roles-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{padding-left:24px}.roles-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-right:24px}.roles-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-name[_ngcontent-%COMP%]{font-weight:500;color:#1e293b}.roles-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-contact[_ngcontent-%COMP%]   .contact-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.roles-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-contact[_ngcontent-%COMP%]   .contact-info[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{color:#64748b;font-size:12px}@media (max-width: 480px){.roles-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-contact[_ngcontent-%COMP%]   .contact-info[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{font-size:11px}}.roles-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-contact[_ngcontent-%COMP%]   .contact-info[_ngcontent-%COMP%]   .mobile[_ngcontent-%COMP%]{color:#1e293b;font-weight:500}.roles-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-role[_ngcontent-%COMP%]{width:20%}.roles-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-role[_ngcontent-%COMP%]   .role-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:2px 8px;border-radius:4px;font-size:11px;font-weight:600}.roles-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-role[_ngcontent-%COMP%]   .role-badge.role-admin[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.roles-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-role[_ngcontent-%COMP%]   .role-badge.role-manager[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.roles-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-role[_ngcontent-%COMP%]   .role-badge.role-employee[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.roles-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-role[_ngcontent-%COMP%]   .role-badge.role-contractor[_ngcontent-%COMP%]{background:#ffedd5;color:#9a3412}.roles-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-role[_ngcontent-%COMP%]   .role-badge.role-default[_ngcontent-%COMP%]{background:#f3f0ff;color:#4a1163}.roles-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-tabs[_ngcontent-%COMP%]   .tabs-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:4px}.roles-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-tabs[_ngcontent-%COMP%]   .tabs-list[_ngcontent-%COMP%]   .tab-badge[_ngcontent-%COMP%]{display:inline-block;padding:2px 6px;background:#f1f5f9;color:#1e293b;border:1px solid #e2e8f0;border-radius:4px;font-size:11px}.roles-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-tabs[_ngcontent-%COMP%]   .tabs-list[_ngcontent-%COMP%]   .no-tabs[_ngcontent-%COMP%]{color:#64748b;font-size:12px}.roles-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]{width:15%;text-align:right}.roles-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{background:transparent;color:#5d157c;font-weight:500;font-size:12px;padding:6px 12px}.roles-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover{background:#f3f0ff;color:#4a1163;box-shadow:none;border-radius:4px}.btn-primary-small[_ngcontent-%COMP%], .btn-secondary-small[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:8px;height:32px;padding:0 12px;border-radius:6px;font-size:13px;font-weight:500;cursor:pointer;transition:all .2s ease;white-space:nowrap}.btn-primary-small[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .btn-secondary-small[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.btn-primary-small[_ngcontent-%COMP%]{background:#5d157c;color:#fff;border:1px solid transparent}.btn-primary-small[_ngcontent-%COMP%]:hover{background:#4a1163;box-shadow:0 1px 2px #0000001a}.btn-secondary-small[_ngcontent-%COMP%]{background:#fff;color:#1e293b;border:1px solid #e2e8f0;box-shadow:0 1px 2px #0000000d}.btn-secondary-small[_ngcontent-%COMP%]:hover{background:#f8fafc;border-color:#cbd5e1;color:#5d157c}.btn-secondary-small[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#5d157c}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0f172a66;backdrop-filter:blur(2px);display:flex;align-items:center;justify-content:center;z-index:1000;padding:16px;animation:_ngcontent-%COMP%_fadeIn .2s}@media (max-width: 480px){.modal-overlay[_ngcontent-%COMP%]{padding:10px}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:10px;width:100%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 10px 25px -5px #0000001a,0 8px 10px -6px #0000001a;border:1px solid rgba(255,255,255,.1);animation:_ngcontent-%COMP%_slideUp .3s}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]{max-width:90%}}@media (max-width: 480px){.modal-content[_ngcontent-%COMP%]{border-radius:10px;max-height:85vh}}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background:#fff;padding:16px 20px;border-bottom:1px solid #e2e8f0}@media (max-width: 480px){.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{padding:14px 16px}}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600;color:#1e293b}@media (max-width: 480px){.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:15px}}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:transparent;border:none;width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s}@media (max-width: 480px){.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{width:26px;height:26px}}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px;color:#64748b}@media (max-width: 480px){.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#f3f4f6}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#1e293b}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:20px}@media (max-width: 480px){.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:16px}}.modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{padding:12px 20px;background:#f8fafc;border-top:1px solid #e2e8f0;display:flex;justify-content:flex-end;gap:10px}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}.table-actions-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid #e2e8f0;background:#fff}.table-actions-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:14px;font-weight:600;color:#1e293b}.empty-state-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:400px;background:#fff;border-radius:8px;border:1px dashed #e2e8f0;margin:16px 24px}.empty-state-container[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;max-width:400px}.empty-state-container[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:48px;color:#8e9bae;margin-bottom:24px;display:inline-flex;align-items:center;justify-content:center;width:96px;height:96px;background:#f8fafc;border-radius:50%}.empty-state-container[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#1e293b;margin:0 0 32px;font-size:15px;font-weight:500;line-height:1.5}.empty-state-container[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center;justify-content:center;width:100%}.empty-state-container[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   .divider-text[_ngcontent-%COMP%]{font-size:12px;color:#64748b;font-weight:600;text-transform:uppercase;letter-spacing:.05em;margin:0 4px}@media (max-width: 768px){.empty-state-container[_ngcontent-%COMP%]{margin:16px;min-height:300px}}.small-modal[_ngcontent-%COMP%]{max-width:360px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:10px;font-size:13px;font-weight:600;color:#1e293b}.radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.radio-group[_ngcontent-%COMP%]   .radio-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:10px;border:1px solid #e2e8f0;border-radius:6px;cursor:pointer;transition:all .2s;font-size:13px}.radio-group[_ngcontent-%COMP%]   .radio-item[_ngcontent-%COMP%]:hover{background:#f9fafb;border-color:#f3f0ff}.radio-group[_ngcontent-%COMP%]   .radio-item[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{width:16px;height:16px;accent-color:#5d157c;cursor:pointer}.radio-group[_ngcontent-%COMP%]   .radio-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0;cursor:pointer;display:flex;align-items:center;font-size:13px}.radio-group[_ngcontent-%COMP%]   .radio-item[_ngcontent-%COMP%]:has(input:checked){border-color:#5d157c;background:#f3f0ff}.radio-group[_ngcontent-%COMP%]   .radio-item[_ngcontent-%COMP%]:has(input:checked)   label[_ngcontent-%COMP%]{color:#5d157c}.modal-body[_ngcontent-%COMP%]{padding:20px}@media (max-width: 480px){.modal-body[_ngcontent-%COMP%]{padding:16px}}.modal-body[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]   .role-info[_ngcontent-%COMP%]{margin-bottom:20px;padding-bottom:16px}.modal-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:18px;font-weight:600;color:#1e293b}@media (max-width: 480px){.modal-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}}.modal-body[_ngcontent-%COMP%]   .user-role[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]   .role-description[_ngcontent-%COMP%]{margin:0 0 8px}.modal-body[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#64748b;line-height:1.5}@media (max-width: 480px){.modal-body[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{font-size:13px}}.modal-body[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1e293b;font-weight:600}.tabs-selection[_ngcontent-%COMP%]   .section-label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:600;color:#1e293b;margin-bottom:12px}@media (max-width: 480px){.tabs-selection[_ngcontent-%COMP%]   .section-label[_ngcontent-%COMP%]{font-size:13px;margin-bottom:10px}}.tabs-selection[_ngcontent-%COMP%]   .tabs-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:12px}@media (max-width: 480px){.tabs-selection[_ngcontent-%COMP%]   .tabs-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:10px}}.tabs-selection[_ngcontent-%COMP%]   .tabs-grid[_ngcontent-%COMP%]   .tab-checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px;border:2px solid #e2e8f0;border-radius:10px;cursor:pointer;transition:all .2s}@media (max-width: 480px){.tabs-selection[_ngcontent-%COMP%]   .tabs-grid[_ngcontent-%COMP%]   .tab-checkbox[_ngcontent-%COMP%]{padding:10px}}.tabs-selection[_ngcontent-%COMP%]   .tabs-grid[_ngcontent-%COMP%]   .tab-checkbox[_ngcontent-%COMP%]:hover{border-color:#5d157c;background:#f3f0ff}.tabs-selection[_ngcontent-%COMP%]   .tabs-grid[_ngcontent-%COMP%]   .tab-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer;accent-color:#5d157c}@media (max-width: 480px){.tabs-selection[_ngcontent-%COMP%]   .tabs-grid[_ngcontent-%COMP%]   .tab-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px}}.tabs-selection[_ngcontent-%COMP%]   .tabs-grid[_ngcontent-%COMP%]   .tab-checkbox[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;cursor:pointer;font-size:14px;color:#1e293b;font-weight:500}@media (max-width: 480px){.tabs-selection[_ngcontent-%COMP%]   .tabs-grid[_ngcontent-%COMP%]   .tab-checkbox[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px}}.tabs-selection[_ngcontent-%COMP%]   .tabs-grid[_ngcontent-%COMP%]   .tab-checkbox[_ngcontent-%COMP%]:has(input:checked){border-color:#5d157c;background:#f3f0ff}.selected-count[_ngcontent-%COMP%]{margin-top:16px;padding:12px;background:#dcfce7;border-radius:8px;display:flex;align-items:center;gap:8px;font-size:14px;font-weight:600;color:#166534}@media (max-width: 480px){.selected-count[_ngcontent-%COMP%]{margin-top:12px;padding:10px;font-size:13px}}.selected-count[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}@media (max-width: 480px){.selected-count[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}}.btn-primary[_ngcontent-%COMP%]{padding:10px 24px;background:#5d157c;color:#fff;border-radius:8px;border:none;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#4a1163;transform:translateY(-1px);box-shadow:0 4px 6px -1px #5d157c33}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;background:#9ca3af}@media (max-width: 480px){.btn-primary[_ngcontent-%COMP%]{padding:8px 16px;font-size:13px}}.btn-secondary[_ngcontent-%COMP%]{padding:10px 24px;background:#fff;color:#1e293b;border:1px solid #e2e8f0;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#f8fafc;border-color:#cbd5e1;color:#5d157c}.btn-secondary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}@media (max-width: 480px){.btn-secondary[_ngcontent-%COMP%]{padding:8px 16px;font-size:13px}}  .centered-dropdown-panel .p-dropdown-empty-message{text-align:center!important;justify-content:center!important;display:flex}"]})};var OP=()=>({width:"400px","max-width":"95vw"}),wP=(i,t,e,n)=>({"bg-red-50 text-red-600 border-red-200":i,"bg-yellow-50 text-yellow-600 border-yellow-200":t,"bg-green-50 text-green-600 border-green-200":e,"bg-blue-50 text-blue-600 border-blue-200":n}),SP=(i,t,e,n)=>({"bg-yellow-50 text-yellow-600 border-yellow-200":i,"bg-blue-50 text-blue-600 border-blue-200":t,"bg-green-50 text-green-600 border-green-200":e,"bg-gray-50 text-gray-600 border-gray-200":n});function kP(i,t){i&1&&h(0,"div",10)}function IP(i,t){i&1&&(s(0,"div",11),h(1,"div",12),c())}function TP(i,t){if(i&1){let e=E();s(0,"div",13)(1,"button",14),v("click",function(o){return b(e),C(o.stopPropagation())}),h(2,"i",15),c(),s(3,"div",16)(4,"div",17)(5,"button",18),v("click",function(o){let r=b(e).$implicit;return _().viewGrievance(r.id),C(o.stopPropagation())}),h(6,"i",19),p(7," View "),c(),s(8,"button",20),v("click",function(o){let r=b(e).$implicit;return _().deleteGrievance(r.id),C(o.stopPropagation())}),h(9,"i",21),p(10," Delete "),c()()()()}}function EP(i,t){if(i&1){let e=E();s(0,"div",22)(1,"div",23)(2,"h3",24),p(3," Grievance Details "),c(),s(4,"button",25),v("click",function(){b(e);let o=_();return C(o.showViewModal=!1)}),h(5,"i",26),c()(),s(6,"div",27)(7,"div",28)(8,"div")(9,"span",29),p(10,"ID"),c(),s(11,"span",30),p(12),c()(),s(13,"div")(14,"span",29),p(15,"Reference No"),c(),s(16,"span",31),p(17),c()(),s(18,"div")(19,"span",29),p(20,"Priority"),c(),s(21,"span",32),p(22),c()(),s(23,"div")(24,"span",33),p(25,"Status"),c(),s(26,"span",34),p(27),c()()(),s(28,"div",35)(29,"span",36),p(30,"Description"),c(),s(31,"div",37),p(32),c()()(),s(33,"div",38)(34,"button",39),v("click",function(){b(e);let o=_();return C(o.showViewModal=!1)}),p(35," Close "),c()()()}if(i&2){let e=_();d(12),T("#",e.selectedGrievance.id,""),d(5),S(e.selectedGrievance.reference_number),d(4),g("ngClass",ca(7,wP,e.selectedGrievance.priority.toLowerCase()==="high",e.selectedGrievance.priority.toLowerCase()==="medium",e.selectedGrievance.priority.toLowerCase()==="low",e.selectedGrievance.priority.toLowerCase()==="normal")),d(),S(e.selectedGrievance.priority),d(4),g("ngClass",ca(12,SP,e.selectedGrievance.status==="open",e.selectedGrievance.status==="in_progress",e.selectedGrievance.status==="resolved",e.selectedGrievance.status==="closed")),d(),S(e.getStatusDisplay(e.selectedGrievance.status)),d(5),T(" ",e.selectedGrievance.description||"No description provided for this grievance."," ")}}function FP(i,t){i&1&&(s(0,"div",40),h(1,"div",41),s(2,"span",42),p(3,"Loading details..."),c()())}var ra=class i{constructor(t,e,n,o,r,a){this.router=t;this.http=e;this.confirmationService=n;this.messageService=o;this.sanitizer=r;this.authService=a}grievances=[];isLoading=!0;searchQuery="";providerChangeSubscription;pageIndex=0;contentPerPage=10;totalRecords=0;columns=[{displayName:"ID",displayValue:"id"},{displayName:"Reference No.",displayValue:"reference_number"},{displayName:"Status",displayValue:"status_badge"},{displayName:"Priority",displayValue:"priority_badge",isHtml:!0},{displayName:"Action",displayValue:"action"}];selectedGrievance=null;showViewModal=!1;ngOnInit(){this.fetchGrievances(),this.setupProviderChangeListener()}setupProviderChangeListener(){this.providerChangeSubscription=this.authService.providerChange$.subscribe(t=>{t&&this.fetchGrievances()})}getPriorityClass(t){let e=(t||"").toLowerCase();return e==="high"?"bg-red-100 text-red-600":e==="medium"?"bg-yellow-100 text-yellow-600":e==="low"?"bg-green-100 text-green-600":"bg-blue-100 text-blue-600"}fetchGrievances(){this.isLoading=!0;let t=this.authService.getSelectedProviderId(),e={skip:this.pageIndex*this.contentPerPage,limit:this.contentPerPage};t&&(e.provider_id=t),this.searchQuery&&this.searchQuery.trim()!==""&&(e.search=this.searchQuery.trim()),this.http.get("grievances",{params:e}).subscribe({next:n=>{let o=n.data||n||[];this.totalRecords=n.total||o.length,this.grievances=o.map(r=>H(U({},r),{status_badge:this.getStatusDisplay(r.status),priority_badge:this.sanitizer.bypassSecurityTrustHtml(`<span class="px-2 py-1 text-xs font-semibold rounded-full uppercase ${this.getPriorityClass(r.priority)}">${(r.priority||"NORMAL").toUpperCase()}</span>`),action:"viewTemplate"})),this.isLoading=!1},error:n=>{console.error("Error fetching grievances:",n),this.isLoading=!1,this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load grievances."})}})}applySearch(){this.pageIndex=0,this.fetchGrievances()}onPageChange(t){this.pageIndex=t,this.fetchGrievances()}onContentPerPageChange(t){this.contentPerPage=t,this.pageIndex=0,this.fetchGrievances()}onSearchChange(t){this.searchQuery=t,this.pageIndex=0,this.fetchGrievances()}getStatusDisplay(t){return t?t.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "):""}getGrievanceTypeDisplay(t){return t?t==="provider_related"?"Provider Issue":t==="app_related"?"App Issue":t.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "):"Unknown"}viewGrievance(t){this.showViewModal=!0,this.selectedGrievance=null,this.http.get(`grievances/${t}`).subscribe({next:e=>{this.selectedGrievance=e},error:e=>{this.showViewModal=!1,this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load grievance details"})}})}deleteGrievance(t){this.confirmationService.confirm({message:"Are you sure you want to delete this grievance?",header:"Confirm Deletion",icon:"pi pi-exclamation-triangle",accept:()=>{this.http.delete(`grievances/${t}`).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Success",detail:"Grievance deleted"}),this.fetchGrievances()},error:e=>{this.messageService.add({severity:"error",summary:"Error",detail:"Failed to delete grievance"})}})}})}goBack(){this.router.navigate(["/providers/dashboard"],{queryParams:{tab:"Town Admin"}})}ngOnDestroy(){this.providerChangeSubscription&&this.providerChangeSubscription.unsubscribe()}static \u0275fac=function(e){return new(e||i)(w(le),w($e),w(pe),w(kt),w(Bs),w(G))};static \u0275cmp=R({type:i,selectors:[["app-grievance-management"]],features:[_n([pe,kt])],decls:13,vars:24,consts:[["actionTemplate",""],["viewLoading",""],[3,"title","icon","showBack"],[1,"table-card-wrapper","p-4"],[1,"card","p-4","rounded-xl","shadow-sm","bg-white","border","border-gray-100"],["class","flex flex-row justify-between items-center mb-4",4,"ngIf"],["class","flex justify-center items-center py-10",4,"ngIf"],[3,"pageChange","searchDataChange","contentPerPageChange","onRowClick","dataSet","columns","showDateFilter","enableRowActions","actionTemplate","totalRecords","pageIndex","contentPerPage"],["styleClass","rounded-lg overflow-hidden shadow-2xl",3,"visibleChange","visible","modal","draggable","resizable","showHeader","dismissableMask"],["class","flex flex-col",4,"ngIf","ngIfElse"],[1,"flex","flex-row","justify-between","items-center","mb-4"],[1,"flex","justify-center","items-center","py-10"],[1,"loading-spinner","w-10","h-10","border-4","border-indigo-200","border-t-indigo-600","rounded-full","animate-spin"],[1,"relative","group/menu","inline-block","text-left"],[1,"p-2","text-gray-500","hover:text-gray-700","hover:bg-gray-100","rounded-full","transition-colors","flex","items-center","justify-center",3,"click"],[1,"pi","pi-ellipsis-v"],[1,"absolute","right-full","top-0","mr-2","w-32","origin-top-right","rounded-md","bg-white","shadow-lg","ring-1","ring-black","ring-opacity-5","invisible","group-hover/menu:visible","opacity-0","group-hover/menu:opacity-100","transition-all","z-10"],["role","menu","aria-orientation","vertical","aria-labelledby","options-menu",1,"py-1"],["role","menuitem",1,"w-full","text-left","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100","hover:text-indigo-600","flex","items-center",3,"click"],[1,"pi","pi-eye","mr-2"],["role","menuitem",1,"w-full","text-left","px-4","py-2","text-sm","text-red-600","hover:bg-red-50","flex","items-center",3,"click"],[1,"pi","pi-trash","mr-2"],[1,"flex","flex-col"],[1,"px-5","py-2.5","border-b","border-gray-100","flex","justify-between","items-center","bg-gray-50/80"],[1,"text-[13px]","font-semibold","text-gray-800","flex","items-center"],[1,"p-1","text-gray-400","hover:text-gray-600","rounded-md","hover:bg-gray-200","transition-colors","focus:outline-none","flex","items-center","justify-center",3,"click"],[1,"pi","pi-times","text-[11px]"],[1,"px-5","py-3"],[1,"bg-gray-50/50","rounded-lg","p-3","mb-3","grid","grid-cols-2","gap-y-3","gap-x-3","border","border-gray-100"],[1,"text-[10px]","uppercase","tracking-wider","text-gray-500","font-semibold","block","mb-0.5"],[1,"text-sm","font-semibold","text-gray-800"],[1,"text-sm","font-semibold","text-indigo-600"],[1,"px-2","py-0.5","text-[10px]","font-bold","tracking-wide","rounded-md","uppercase","border","inline-block",3,"ngClass"],[1,"text-[11px]","uppercase","tracking-wider","text-gray-500","font-semibold","block","mb-1"],[1,"px-2.5","py-1","text-[10px]","font-bold","tracking-wide","rounded-md","capitalize","border","inline-block","mt-0.5",3,"ngClass"],[1,"mb-1"],[1,"text-[10px]","uppercase","tracking-wider","text-gray-500","font-semibold","block","mb-1","px-1"],[1,"bg-white","border","border-gray-100","p-3","rounded-lg","text-gray-700","text-xs","leading-snug","whitespace-pre-wrap","shadow-sm"],[1,"px-4","py-1.5","border-t","border-gray-100","flex","justify-end","bg-gray-50/80"],[1,"px-4","py-1.5","text-[11px]","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","shadow-sm","hover:bg-gray-50","focus:outline-none","focus:ring-1","focus:ring-offset-1","focus:ring-indigo-500","transition-all",3,"click"],[1,"flex","flex-col","justify-center","items-center","p-8","h-40"],[1,"loading-spinner","w-8","h-8","border-[3px]","border-indigo-100","border-t-indigo-600","rounded-full","animate-spin","mb-3"],[1,"text-xs","font-medium","text-gray-500"]],template:function(e,n){if(e&1){let o=E();h(0,"app-title-card",2),s(1,"div",3)(2,"div",4),y(3,kP,1,0,"div",5)(4,IP,2,0,"div",6),h(5,"p-confirmDialog"),s(6,"simple-grid",7),v("pageChange",function(a){return b(o),C(n.onPageChange(a))})("searchDataChange",function(a){return b(o),C(n.onSearchChange(a))})("contentPerPageChange",function(a){return b(o),C(n.onContentPerPageChange(a))})("onRowClick",function(a){return b(o),C(n.viewGrievance(a.id))}),c(),y(7,TP,11,0,"ng-template",null,0,Pe),c()(),s(9,"p-dialog",8),N("visibleChange",function(a){return b(o),z(n.showViewModal,a)||(n.showViewModal=a),C(a)}),y(10,EP,36,17,"div",9)(11,FP,4,0,"ng-template",null,1,Pe),c()}if(e&2){let o=ge(8),r=ge(12);g("title","Grievance Management")("icon","report_problem")("showBack",!0),d(3),g("ngIf",!1),d(),g("ngIf",n.isLoading),d(2),g("dataSet",n.grievances)("columns",n.columns)("showDateFilter",!1)("enableRowActions",!1)("actionTemplate",o)("totalRecords",n.totalRecords)("pageIndex",n.pageIndex)("contentPerPage",n.contentPerPage),d(3),st(se(23,OP)),L("visible",n.showViewModal),g("modal",!0)("draggable",!1)("resizable",!1)("showHeader",!1)("dismissableMask",!0),d(),g("ngIf",n.selectedGrievance)("ngIfElse",r)}},dependencies:[Se,W,Re,be,he,wn],styles:[".grievance-page[_ngcontent-%COMP%]{padding:var(--padding-md);background:var(--surface-card);border-radius:var(--border-radius-lg);display:flex;flex-direction:column;gap:var(--padding-md);height:100%}.header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--padding-md)}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:var(--font-size-xl);font-family:var(--font-primary);color:var(--text-color);margin:0}.back-btn[_ngcontent-%COMP%]{background:transparent;border:none;font-size:var(--font-size-lg);color:var(--text-color);cursor:pointer;padding:var(--padding-xs);border-radius:var(--border-radius-sm);display:flex;align-items:center;justify-content:center;transition:background-color .2s}.back-btn[_ngcontent-%COMP%]:hover{background-color:var(--surface-hover)}.tab-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--padding-md);flex:1}.search-input[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:.75rem 1rem;border:1px solid var(--surface-border);border-radius:var(--border-radius-md);background:var(--surface-ground);color:var(--text-color);font-family:var(--font-primary);font-size:var(--font-size-sm);transition:border-color .2s,box-shadow .2s}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px rgba(var(--primary-color-rgb),.2)}.search-input[_ngcontent-%COMP%]::placeholder{color:var(--text-color-secondary)}.loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--padding-xl);gap:var(--padding-sm);color:var(--text-color-secondary)}.loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid var(--surface-border);border-top-color:var(--primary-color);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto;border:1px solid var(--surface-border);border-radius:var(--border-radius-md);background:var(--surface-card)}.provider-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-family:var(--font-primary)}.provider-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .provider-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;text-align:left;border-bottom:1px solid var(--surface-border);color:var(--text-color)}.provider-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--surface-ground);font-weight:600;font-size:var(--font-size-sm);color:var(--text-color-secondary);white-space:nowrap}.provider-table[_ngcontent-%COMP%]   th.th-actions[_ngcontent-%COMP%]{text-align:center}.provider-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:var(--font-size-md);vertical-align:middle}.provider-table[_ngcontent-%COMP%]   td.td-id[_ngcontent-%COMP%]{font-weight:500;color:var(--text-color-secondary)}.provider-table[_ngcontent-%COMP%]   td.td-name[_ngcontent-%COMP%]{font-weight:500}.provider-table[_ngcontent-%COMP%]   td.td-actions[_ngcontent-%COMP%]{text-align:center}.provider-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .2s}.provider-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:var(--surface-hover)}.provider-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.empty-row[_ngcontent-%COMP%]{text-align:center!important;padding:3rem!important;color:var(--text-color-secondary)!important}.empty-row[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:1rem;color:var(--surface-border)}.empty-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:var(--font-size-md)}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:center}.icon-btn[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:var(--border-radius-sm);border:none;display:flex;align-items:center;justify-content:center;cursor:pointer;background:var(--surface-ground);transition:all .2s}.icon-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.icon-btn-view[_ngcontent-%COMP%]{color:var(--primary-color)}.icon-btn-view[_ngcontent-%COMP%]:hover{background:rgba(var(--primary-color-rgb),.1)}.pagination-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-top:var(--padding-md);border-top:1px solid var(--surface-border);flex-wrap:wrap;gap:1rem}.page-size[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:var(--font-size-sm);color:var(--text-color-secondary)}.page-size-select[_ngcontent-%COMP%]{padding:.25rem .5rem;border:1px solid var(--surface-border);border-radius:var(--border-radius-sm);background:var(--surface-card);color:var(--text-color);cursor:pointer;font-family:inherit}.page-size-select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color)}.page-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.page-info[_ngcontent-%COMP%]{font-size:var(--font-size-sm);color:var(--text-color-secondary)}.page-arrow[_ngcontent-%COMP%]{background:var(--surface-ground);border:1px solid var(--surface-border);color:var(--text-color);width:32px;height:32px;border-radius:var(--border-radius-sm);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s;font-weight:700}.page-arrow[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--surface-hover);border-color:var(--primary-color);color:var(--primary-color)}.page-arrow[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;background:var(--surface-card)}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .75rem;border-radius:var(--border-radius-xl);font-size:var(--font-size-xs);font-weight:600;text-transform:capitalize}.status-badge.status-open[_ngcontent-%COMP%]{background-color:rgba(var(--warning-color-rgb),.1);color:var(--warning-color);border:1px solid rgba(var(--warning-color-rgb),.2)}.status-badge.status-in-progress[_ngcontent-%COMP%]{background-color:rgba(var(--info-color-rgb),.1);color:var(--info-color);border:1px solid rgba(var(--info-color-rgb),.2)}.status-badge.status-resolved[_ngcontent-%COMP%]{background-color:rgba(var(--success-color-rgb),.1);color:var(--success-color);border:1px solid rgba(var(--success-color-rgb),.2)}.status-badge.status-closed[_ngcontent-%COMP%]{background-color:rgba(var(--text-color-secondary-rgb),.1);color:var(--text-color-secondary);border:1px solid rgba(var(--text-color-secondary-rgb),.2)}.status-badge.priority-high[_ngcontent-%COMP%]{background-color:rgba(var(--danger-color-rgb),.1);color:var(--danger-color);border:1px solid rgba(var(--danger-color-rgb),.2)}.status-badge.priority-medium[_ngcontent-%COMP%]{background-color:rgba(var(--warning-color-rgb),.1);color:var(--warning-color);border:1px solid rgba(var(--warning-color-rgb),.2)}.status-badge.priority-low[_ngcontent-%COMP%]{background-color:rgba(var(--success-color-rgb),.1);color:var(--success-color);border:1px solid rgba(var(--success-color-rgb),.2)}.status-badge.priority-normal[_ngcontent-%COMP%]{background-color:rgba(var(--info-color-rgb),.1);color:var(--info-color);border:1px solid rgba(var(--info-color-rgb),.2)}"]})};var DP=[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",component:vr},{path:"category",component:yr},{path:"sales",component:$r},{path:"add-sales",component:Xr},{path:"members",component:wr},{path:"enquiry",component:kr},{path:"expenses",component:Tr},{path:"approval",component:Fr},{path:"subscription-setup",component:Ar},{path:"employee-setup",component:Rr},{path:"setup-registration",component:Yr},{path:"settings",component:Lr},{path:"member-card-setup",component:Nr},{path:"slots",component:jr},{path:"product",component:Gr},{path:"provider-management",component:ta},{path:"provider-kyc",component:ia},{path:"group",component:Wr},{path:"community-approval",component:ea},{path:"provider-access",component:oa},{path:"grievance-management",component:ra},{path:"orders/:id",component:Qr},{path:"order-review",component:Jr},{path:"info",loadChildren:()=>import("./chunk-D7OFPFO3.js").then(i=>i.ProviderInfoModule)}],aa=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=lo({type:i});static \u0275inj=co({imports:[da.forChild(DP),da]})};var vp=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=lo({type:i});static \u0275inj=co({imports:[Ns,Hc,aa,qc,Wc,$s,Ys,$c,Qs,hc,rc.pick({Search:ic,X:oc,ChevronRight:Zs,Minus:tc,Plus:nc,Filter:ec}),Xs]})};export{vp as ProvidersModule};
