import{$ as ut,B as Nt,C as Re,Cb as G,D as Fe,G as De,J as Ne,Jb as Wt,K as jt,Kb as Jt,L as Lt,Lb as Qt,M as zt,Mb as Ue,Nb as Xt,O as Vt,Ob as Be,Pb as Zt,Q as je,Qb as en,R as At,Rb as tn,S as Ut,Tb as nn,Vb as on,Wa as Ve,Wb as rn,Xa as Ct,Xb as an,Ya as Gt,_ as I,aa as Bt,ab as Kt,ea as Le,fb as qt,gb as Ht,ib as Ae,k as B,ka as ft,l as z,ma as ve,na as $,o as Ft,oa as ze,pa as y,q as T,qb as Yt,r as Dt,s as _t,ua as Q,ub as vt,v as fe,va as $t,w as D,wa as be,x as Ce,y as Ee}from"./chunk-2T5CPM73.js";import{Ac as yt,Bd as Et,Ca as h,Cb as u,Cd as Rt,Da as O,Ec as _,Fc as f,Gb as d,Gc as re,Hb as se,Hc as St,Ib as pe,Ic as U,Kb as Pe,Lb as Ot,Mb as ge,Nb as Mt,Pb as Pt,Qb as xt,Rb as r,Sb as o,Tb as m,Ub as Z,Vb as ee,Wb as te,Wc as J,Xb as P,_b as v,a as ne,aa as me,ac as l,b as ie,dc as Y,e as pt,gb as H,ia as A,ja as ke,kb as a,lb as C,lc as F,mc as s,md as It,n as we,na as E,nc as g,oa as ht,oc as M,od as L,pc as W,qd as k,rc as xe,rd as S,sa as x,sc as ye,ta as Te,tc as Se,vd as wt,wc as de,wd as kt,xc as N,xd as _e,y as oe,yc as gt,yd as ue,zd as Tt}from"./chunk-P6FHP7DN.js";var mn=pt(ft());var cn=n=>({"background-image":n});function vn(n,t){if(n&1&&m(0,"div",12),n&2){let e=l(2).$implicit;d("ngStyle",N(1,cn,"url("+e.image_url+")"))}}function bn(n,t){if(n&1&&(r(0,"div",13),m(1,"img",14),o()),n&2){let e=l(4);a(),d("src",e.defaultCatIcon,H)}}function hn(n,t){if(n&1&&m(0,"div",12),n&2){let e=l().$implicit;d("ngStyle",N(1,cn,"url("+e.image_url+")"))}}function On(n,t){if(n&1&&(r(0,"div",13),m(1,"img",14),o()),n&2){let e=l(5);a(),d("src",e.defaultCatIcon,H)}}function Mn(n,t){if(n&1){let e=P();r(0,"div",15),v("click",function(){let c=h(e).$implicit,p=l(4);return O(p.onCategorySelect(c))}),r(1,"div",16),s(2),o(),u(3,hn,1,3,"div",7)(4,On,2,1,"div",8),o()}if(n&2){let e=t.$implicit;a(2),g(e.name),a(),d("ngIf",e.validImage),a(),d("ngIf",!e.validImage)}}function Pn(n,t){if(n&1){let e=P();r(0,"div",5)(1,"div",6),u(2,vn,1,3,"div",7)(3,bn,2,1,"div",8),s(4),o(),r(5,"div",9),v("click",function(){h(e);let c=l().$implicit,p=l(2);return O(p.onCategorySelect(c))}),s(6),_(7,"translate"),o()(),r(8,"div",10),u(9,Mn,5,3,"div",11),o()}if(n&2){let e=l().$implicit;a(2),d("ngIf",e.validImage),a(),d("ngIf",!e.validImage),a(),M(" ",e.name," "),a(2),g(f(7,5,"recommends.view_all")),a(3),d("ngForOf",e.children)}}function xn(n,t){if(n&1&&u(0,Pn,10,7),n&2){let e=t.$implicit;ge(e.children!=null&&e.children.length?0:-1)}}function yn(n,t){if(n&1&&Pt(0,xn,1,1,null,null,Mt),n&2){let e=l();xt(e.categories)}}function Sn(n,t){n&1&&m(0,"div",21)}function In(n,t){if(n&1&&(r(0,"div",17),m(1,"div",18),o(),r(2,"div",19),u(3,Sn,1,0,"div",20),o()),n&2){let e=l();a(3),d("ngForOf",e.placeholderCategories)}}var $e=class n{constructor(t,e,i,c){this._customerService=t;this._route=e;this.translate=i;this.cdr=c}defaultCatIcon="/assets/images/svg/gen-cat.svg";isCategoryLoading=!0;placeholderCategories=Array(3).fill({});ngOnInit(){console.log("[RecommendsComponent] Current language:",this.translate.currentLang),console.log("[RecommendsComponent] Default language:",this.translate.defaultLang),this.translate.get("recommends.title").subscribe(t=>{console.log("[RecommendsComponent] Translation for recommends.title:",t)}),this.translate.onLangChange.subscribe(t=>{console.log("[RecommendsComponent] Language changed to:",t.lang),console.log("[RecommendsComponent] New translation for recommends.title:",t.translations["recommends.title"]),this.cdr.detectChanges()}),this._customerService.getCategoriesSubject().subscribe(t=>{t&&(this.isCategoryLoading=!1,this.categories=t,this.categories.forEach(e=>{vt(e.image_url).then(i=>{e.validImage=i}),e.children?.length===0&&this.categoriesWithoutChild.push(e),e.children?.forEach(i=>{vt(i.image_url).then(c=>{i.validImage=c})})}))}),this._customerService.setAllCategoriesSubject()}categories=[];categoriesWithoutChild=[];onCategorySelect(t){console.log(t),this._customerService.categorySelectedFromHomePage=t,this._route.navigate(["customers","search-providers"])}testTranslation(){console.log("[RecommendsComponent] Testing translation..."),console.log("Current language:",this.translate.currentLang),console.log("Default language:",this.translate.defaultLang),this.translate.get("recommends.title").subscribe(i=>{console.log("Translation result:",i)});let t=["en","fr","ta","hi"],e=this.translate.currentLang;t.forEach(i=>{this.translate.use(i).subscribe(()=>{this.translate.get("recommends.title").subscribe(c=>{console.log(`Translation for ${i}:`,c)})})}),this.translate.use(e)}refreshTranslation(){console.log("[RecommendsComponent] Forcing translation refresh..."),this.translate.get("recommends.title").subscribe(t=>{console.log("[RecommendsComponent] Current translation:",t),this.cdr.detectChanges()})}static \u0275fac=function(e){return new(e||n)(C(G),C(T),C(B),C(J))};static \u0275cmp=x({type:n,selectors:[["app-recommends"]],decls:9,vars:5,consts:[[1,"cat0container"],[1,"cat0title"],[1,"cat0dottedlines"],[1,"categories-list-container"],[1,"categories-list"],[1,"category-title-container"],[1,"category-title"],["class","category-image",3,"ngStyle",4,"ngIf"],["class","category-image",4,"ngIf"],[1,"category-view-more",3,"click"],[1,"category-item-container"],["class","category-item",3,"click",4,"ngFor","ngForOf"],[1,"category-image",3,"ngStyle"],[1,"category-image"],[3,"src"],[1,"category-item",3,"click"],[1,"category-name"],[1,"category-title-container","loading-placeholder"],[1,"category-title","skeleton-animation"],[1,"category-item-container","loading-placeholder"],["class","category-item skeleton-animation",4,"ngFor","ngForOf"],[1,"category-item","skeleton-animation"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1),s(2),_(3,"translate"),o(),m(4,"div",2),o(),r(5,"div",3)(6,"div",4),u(7,yn,2,0)(8,In,4,1),o()()),e&2&&(a(2),g(f(3,3,"recommends.title")),a(5),ge(i.categories.length&&!i.isCategoryLoading?7:-1),a(),ge(i.categories.length===0&&i.isCategoryLoading?8:-1))},dependencies:[k,S,wt,z],styles:['.cat0container[_ngcontent-%COMP%]{position:relative;margin:1rem 0}.cat0container[_ngcontent-%COMP%]   .cat0title[_ngcontent-%COMP%]{background-color:#5d157c;color:#fff;border-radius:50px;padding:.5rem 2rem;margin:auto;text-align:center;width:fit-content}.cat0container[_ngcontent-%COMP%]   .cat0dottedlines[_ngcontent-%COMP%]{border:none;height:1px;position:relative;top:-20px;z-index:-1}.cat0container[_ngcontent-%COMP%]   .cat0dottedlines[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;border-radius:8px;background-image:repeating-linear-gradient(to right,#5D157C 0,#5D157C 8px,transparent 0px,transparent 12px);background-repeat:no-repeat;background-size:100% .125rem,.125rem 100%,100% .125rem,.125rem 100%;background-position:top left,top right,bottom right,bottom left;pointer-events:none}.categories-list-container[_ngcontent-%COMP%]{font-family:Segoe UI,sans-serif;padding:1rem;padding-top:0;padding-bottom:80px}.categories-list-container[_ngcontent-%COMP%]   .categories-list[_ngcontent-%COMP%]   .category-title-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:1.5rem 0 .5rem}.categories-list-container[_ngcontent-%COMP%]   .categories-list[_ngcontent-%COMP%]   .category-title-container[_ngcontent-%COMP%]   .category-title[_ngcontent-%COMP%]{display:flex;align-items:center;font-weight:700;color:#5d157c}.categories-list-container[_ngcontent-%COMP%]   .categories-list[_ngcontent-%COMP%]   .category-title-container[_ngcontent-%COMP%]   .category-title[_ngcontent-%COMP%]   .category-image[_ngcontent-%COMP%]{width:18px;height:18px;background-size:cover;background-position:center;margin-right:.5rem}.categories-list-container[_ngcontent-%COMP%]   .categories-list[_ngcontent-%COMP%]   .category-title-container[_ngcontent-%COMP%]   .category-title[_ngcontent-%COMP%]   .category-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.categories-list-container[_ngcontent-%COMP%]   .categories-list[_ngcontent-%COMP%]   .category-title-container[_ngcontent-%COMP%]   .category-view-more[_ngcontent-%COMP%]{font-size:.8rem;color:#7c3aed;font-weight:500;cursor:pointer}.categories-list-container[_ngcontent-%COMP%]   .categories-list[_ngcontent-%COMP%]   .category-title-container.loading-placeholder[_ngcontent-%COMP%]   .category-title[_ngcontent-%COMP%]{height:1.5rem;width:100%;position:relative;background:#e4e4e4!important}.categories-list-container[_ngcontent-%COMP%]   .categories-list[_ngcontent-%COMP%]   .category-item-container[_ngcontent-%COMP%]{display:flex;overflow-x:auto;gap:1rem;padding:.5rem 0;scroll-snap-type:x mandatory}.categories-list-container[_ngcontent-%COMP%]   .categories-list[_ngcontent-%COMP%]   .category-item-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.categories-list-container[_ngcontent-%COMP%]   .categories-list[_ngcontent-%COMP%]   .category-item-container.loading-placeholder[_ngcontent-%COMP%]{overflow:hidden}.categories-list-container[_ngcontent-%COMP%]   .categories-list[_ngcontent-%COMP%]   .category-item-container.loading-placeholder[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]{width:7.9rem;height:7rem;background:#e4e4e4!important;position:relative;box-shadow:none}.categories-list-container[_ngcontent-%COMP%]   .categories-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]{flex:0 0 auto;text-align:center;cursor:pointer;scroll-snap-align:start;background:linear-gradient(134.42deg,#fff 4%,#ffda6dfa);box-shadow:0 0 1.5px #1c191d45,0 0 2px #1c191d52;padding:.5rem 1rem;border-radius:4px}.categories-list-container[_ngcontent-%COMP%]   .categories-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-name[_ngcontent-%COMP%]{width:80px;background:#5d157c;color:#fff;font-size:.75rem;padding:.25rem .4rem;border-radius:5px;margin-bottom:.3rem;font-weight:500;display:block;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;position:relative;left:-15px}.categories-list-container[_ngcontent-%COMP%]   .categories-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-image[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:12px;background-size:cover;background-position:center;background-color:#f5f5f5}.categories-list-container[_ngcontent-%COMP%]   .categories-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:12px;object-fit:cover}.categories-list-container[_ngcontent-%COMP%]   .others-title[_ngcontent-%COMP%]{font-weight:600;font-size:1rem;color:#5d157c;margin:1.5rem 0 .5rem}.categories-list-container[_ngcontent-%COMP%]   .without-child[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem}']})};var Ke=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-offers-nearby"]],decls:0,vars:0,template:function(e,i){}})};var qe=class n{constructor(t,e){this.http=t;this.authService=e}configureTabs(t){let e=`rbac/providers/${t.provider_id}/tab-config`;return this.http.post(e,t)}getTabConfig(t,e){let i=`rbac/providers/${t}/tab-config?role=${e}`;return this.http.get(i)}updateTabConfig(t){let e=`rbac/providers/${t.provider_id}/tab-config`;return this.http.put(e,t)}getUserTabAccess(t,e){let i=`rbac/providers/${t}/user/${e}/tabaccess`;return this.http.get(i)}static \u0275fac=function(e){return new(e||n)(E($),E(y))};static \u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})};var En=()=>[1,2,3,4,5],sn=(n,t)=>({"even-card":n,"odd-card":t});function Rn(n,t){if(n&1&&(r(0,"div",7)(1,"div",8),m(2,"div",9),r(3,"div",10),m(4,"div",11),r(5,"div",12),m(6,"div",13)(7,"div",14),o()()(),m(8,"div",15),o()),n&2){let e=t.index;d("ngClass",gt(1,sn,e%2===0,e%2===1))}}function Fn(n,t){n&1&&(r(0,"div",5),u(1,Rn,9,4,"div",6),o()),n&2&&(a(),d("ngForOf",de(1,En)))}function Dn(n,t){if(n&1){let e=P();r(0,"div",16)(1,"div",17),s(2,"\u26A0\uFE0F"),o(),r(3,"p"),s(4),o(),r(5,"button",18),v("click",function(){h(e);let c=l();return O(c.refreshMyIdCards())}),s(6,"Retry"),o()()}if(n&2){let e=l();a(4),g(e.errorMessage)}}function Nn(n,t){n&1&&(r(0,"div",19)(1,"div",20),s(2,"\u{1F194}"),o(),r(3,"p"),s(4,"No ID cards found"),o(),r(5,"p",21),s(6,"Your membership IDs will appear here once you're registered with providers."),o()())}function jn(n,t){if(n&1&&m(0,"img",35),n&2){let e=l().$implicit;d("src",e.provider_details.provider_logo_url,H)("alt",e.provider_details.provider_display_name)}}function Ln(n,t){if(n&1&&(r(0,"div",36),s(1),o()),n&2){let e=l().$implicit,i=l();a(),M(" ",i.getInitials(e)," ")}}function zn(n,t){if(n&1&&(r(0,"div",37),m(1,"img",35),o()),n&2){let e=l().$implicit;a(),d("src",e.provider_details.provider_logo_url,H)("alt",e.provider_details.provider_display_name+" logo")}}function Vn(n,t){if(n&1&&(r(0,"div",38),s(1),o()),n&2){let e=l().$implicit,i=l();a(),M(" ",i.getProviderInitials(e.provider_details.provider_display_name)," ")}}function An(n,t){if(n&1){let e=P();r(0,"div",22),v("click",function(){let c=h(e).$implicit,p=l();return O(p.onCardClick(c))}),r(1,"div",23)(2,"div",24),s(3),o(),r(4,"div",25)(5,"div",26),u(6,jn,1,2,"img",27)(7,Ln,2,1,"div",28),o(),r(8,"div",29)(9,"div",30),s(10),o(),r(11,"div",31),s(12),o()()()(),r(13,"div",32),u(14,zn,2,2,"div",33)(15,Vn,2,1,"div",34),o()()}if(n&2){let e=t.$implicit,i=t.index,c=l();d("ngClass",gt(8,sn,i%2===0,i%2===1)),a(3),g(e.provider_details.provider_display_name),a(3),d("ngIf",e.provider_details.provider_logo_url),a(),d("ngIf",!e.provider_details.provider_logo_url),a(3),g(c.getCardName(e)),a(2),g(c.getCardRole(e)),a(2),d("ngIf",e.provider_details.provider_logo_url),a(),d("ngIf",!e.provider_details.provider_logo_url)}}var He=class n{constructor(t,e,i,c,p){this._customerService=t;this._authService=e;this._rbacService=i;this._toast=c;this._router=p}myIdGroups=[];allMyIdCards=[];isLoading=!1;errorMessage="";totalCount=0;destroy$=new we;ngOnInit(){this.loadMyIdCards()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadMyIdCards(){this.isLoading=!0,this.errorMessage="";let t=this._authService.getUserId();if(!t){this.errorMessage="User ID not found",this.isLoading=!1,console.error("User ID not found");return}console.log("Loading MyId cards for user:",t),this._customerService.getMyIdEmpMember(t).pipe(me(this.destroy$)).subscribe({next:e=>{console.log("MyId API Response:",e),e&&e.data?(this.myIdGroups=e.data,this.totalCount=e.total_count,this.allMyIdCards=[],this.myIdGroups.forEach(i=>{this.allMyIdCards.push(...i.data)}),console.log("MyId groups loaded:",this.myIdGroups),console.log("Total MyId cards:",this.allMyIdCards.length)):(this.errorMessage="No MyId cards found",console.log("No MyId cards found")),this.isLoading=!1},error:e=>{console.error("Error loading MyId cards:",e),this.errorMessage="Failed to load MyId cards",this.isLoading=!1}})}refreshMyIdCards(){this.loadMyIdCards()}getInitials(t){let e=t.member_name||t.employee_name;if(!e)return"??";let i=e.trim().split(" ");return i.length>=2?(i[0][0]+i[1][0]).toUpperCase():e.substring(0,2).toUpperCase()}getProviderInitials(t){if(!t)return"??";let e=t.trim().split(" ");return e.length>=2?(e[0][0]+e[1][0]).toUpperCase():t.substring(0,2).toUpperCase()}getCardName(t){return t.member_name||t.employee_name||"Unknown"}getCardRole(t){return t.role?t.role:t.member_id?"Member":t.employee_id?"Employee":"Member"}getCardId(t){return t.member_id||t.employee_id||0}onCardClick(t){console.log("Card clicked:",t);let e=this.getCardRole(t).toLowerCase();console.log("Card role:",e),e==="member"||e==="user"?(console.log("Navigating to member details..."),this.navigateToMemberDetails(t)):(console.log("Checking employee tab access..."),this.checkEmployeeTabAccess(t))}navigateToMemberDetails(t){console.log("Navigating to member details with card:",t),this._router.navigate(["/customers/member-details"],{state:{card:t,role:this.getCardRole(t).toLowerCase()}}).then(e=>{console.log("Navigation result:",e),e||(console.log("Trying relative navigation..."),this._router.navigate(["member-details"],{state:{card:t}}))}).catch(e=>{console.error("Navigation error:",e),this._router.navigate(["member-details"],{state:{card:t}})})}checkEmployeeTabAccess(t){let e=t.provider_details.provider_id,i=this._authService.getUserId();if(!e||!i){this._toast.error("Error","Unable to get provider or user information");return}console.log(`Checking tab access for provider ${e}, user ${i}`),this._rbacService.getUserTabAccess(e,i).pipe(me(this.destroy$)).subscribe({next:c=>{if(console.log("User tab access response:",c),c){let p=c.tabs,b=c.role,R=c.provider_id,X=c.user_id;console.log("Navigating to providers dashboard with tab access:",p),this._router.navigate(["/providers/dashboard"],{state:{userTabAccess:{provider_id:R,user_id:X,role:b,tabs:p},card:t}})}else this._toast.info("Access Information","No specific tab access found for this user")},error:c=>{console.error("Error getting user tab access:",c),this._toast.error("Error","Failed to get user access information")}})}static \u0275fac=function(e){return new(e||n)(C(G),C(y),C(qe),C(Q),C(T))};static \u0275cmp=x({type:n,selectors:[["my-ids"]],decls:5,vars:4,consts:[[1,"my-id-card-containers"],["class","skeleton-cards",4,"ngIf"],["class","error-state",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","my-id-card",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"skeleton-cards"],["class","skeleton-card even-card",3,"ngClass",4,"ngFor","ngForOf"],[1,"skeleton-card","even-card",3,"ngClass"],[1,"skeleton-content"],[1,"skeleton-title"],[1,"skeleton-user-info"],[1,"skeleton-avatar"],[1,"skeleton-text"],[1,"skeleton-name"],[1,"skeleton-role"],[1,"skeleton-logo"],[1,"error-state"],[1,"error-icon"],[1,"retry-button",3,"click"],[1,"empty-state"],[1,"empty-icon"],[1,"empty-subtitle"],[1,"my-id-card",3,"click","ngClass"],[1,"my-id-card-desc"],[1,"title"],[1,"user-info"],[1,"profile-pic"],[3,"src","alt",4,"ngIf"],["class","default-avatar",4,"ngIf"],[1,"user-name-info"],[1,"user-name"],[1,"user-role"],[1,"my-id-profile"],["class","provider-logo",4,"ngIf"],["class","default-logo",4,"ngIf"],[3,"src","alt"],[1,"default-avatar"],[1,"provider-logo"],[1,"default-logo"]],template:function(e,i){e&1&&(r(0,"div",0),u(1,Fn,2,2,"div",1)(2,Dn,7,1,"div",2)(3,Nn,7,0,"div",3)(4,An,16,11,"div",4),o()),e&2&&(a(),d("ngIf",i.isLoading),a(),d("ngIf",i.errorMessage&&!i.isLoading),a(),d("ngIf",!i.isLoading&&!i.errorMessage&&i.allMyIdCards.length===0),a(),d("ngForOf",i.allMyIdCards))},dependencies:[L,k,S],styles:[".my-id-card-containers[_ngcontent-%COMP%]{padding:1.25rem 0;margin-top:0}.my-id-card-containers[_ngcontent-%COMP%]   .skeleton-cards[_ngcontent-%COMP%]   .skeleton-card[_ngcontent-%COMP%]{display:flex;border-radius:.75rem;margin-bottom:1rem;box-shadow:0 2.5px 6.5px #1c191d4a,0 0 2px #1c191d52;justify-content:space-between;align-items:center;padding:1.25rem;height:100px;background-color:#f8f9fa}.my-id-card-containers[_ngcontent-%COMP%]   .skeleton-cards[_ngcontent-%COMP%]   .skeleton-card.even-card[_ngcontent-%COMP%]{background-color:#ffe17f}.my-id-card-containers[_ngcontent-%COMP%]   .skeleton-cards[_ngcontent-%COMP%]   .skeleton-card.odd-card[_ngcontent-%COMP%]{background-color:#f8f4ff}.my-id-card-containers[_ngcontent-%COMP%]   .skeleton-cards[_ngcontent-%COMP%]   .skeleton-card[_ngcontent-%COMP%]   .skeleton-content[_ngcontent-%COMP%]{flex:1}.my-id-card-containers[_ngcontent-%COMP%]   .skeleton-cards[_ngcontent-%COMP%]   .skeleton-card[_ngcontent-%COMP%]   .skeleton-content[_ngcontent-%COMP%]   .skeleton-title[_ngcontent-%COMP%]{width:60%;height:.875rem;background:linear-gradient(90deg,#e2e8f0 25%,#f1f5f9,#e2e8f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s infinite;border-radius:.25rem;margin-bottom:.75rem}.my-id-card-containers[_ngcontent-%COMP%]   .skeleton-cards[_ngcontent-%COMP%]   .skeleton-card[_ngcontent-%COMP%]   .skeleton-content[_ngcontent-%COMP%]   .skeleton-user-info[_ngcontent-%COMP%]{display:flex;align-items:center}.my-id-card-containers[_ngcontent-%COMP%]   .skeleton-cards[_ngcontent-%COMP%]   .skeleton-card[_ngcontent-%COMP%]   .skeleton-content[_ngcontent-%COMP%]   .skeleton-user-info[_ngcontent-%COMP%]   .skeleton-avatar[_ngcontent-%COMP%]{width:3rem;height:3rem;border-radius:50%;background:linear-gradient(90deg,#e2e8f0 25%,#f1f5f9,#e2e8f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s infinite}.my-id-card-containers[_ngcontent-%COMP%]   .skeleton-cards[_ngcontent-%COMP%]   .skeleton-card[_ngcontent-%COMP%]   .skeleton-content[_ngcontent-%COMP%]   .skeleton-user-info[_ngcontent-%COMP%]   .skeleton-text[_ngcontent-%COMP%]{margin-left:.875rem}.my-id-card-containers[_ngcontent-%COMP%]   .skeleton-cards[_ngcontent-%COMP%]   .skeleton-card[_ngcontent-%COMP%]   .skeleton-content[_ngcontent-%COMP%]   .skeleton-user-info[_ngcontent-%COMP%]   .skeleton-text[_ngcontent-%COMP%]   .skeleton-name[_ngcontent-%COMP%]{width:4rem;height:1rem;background:linear-gradient(90deg,#e2e8f0 25%,#f1f5f9,#e2e8f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s infinite;border-radius:.25rem;margin-bottom:.25rem}.my-id-card-containers[_ngcontent-%COMP%]   .skeleton-cards[_ngcontent-%COMP%]   .skeleton-card[_ngcontent-%COMP%]   .skeleton-content[_ngcontent-%COMP%]   .skeleton-user-info[_ngcontent-%COMP%]   .skeleton-text[_ngcontent-%COMP%]   .skeleton-role[_ngcontent-%COMP%]{width:2.5rem;height:.8125rem;background:linear-gradient(90deg,#e2e8f0 25%,#f1f5f9,#e2e8f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s infinite;border-radius:.25rem}.my-id-card-containers[_ngcontent-%COMP%]   .skeleton-cards[_ngcontent-%COMP%]   .skeleton-card[_ngcontent-%COMP%]   .skeleton-logo[_ngcontent-%COMP%]{width:5rem;height:5rem;border-radius:6px;background:linear-gradient(90deg,#e2e8f0 25%,#f1f5f9,#e2e8f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s infinite}.my-id-card-containers[_ngcontent-%COMP%]   .error-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem 2rem;text-align:center}.my-id-card-containers[_ngcontent-%COMP%]   .error-state[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:1rem}.my-id-card-containers[_ngcontent-%COMP%]   .error-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:.875rem;margin-bottom:1rem}.my-id-card-containers[_ngcontent-%COMP%]   .error-state[_ngcontent-%COMP%]   .retry-button[_ngcontent-%COMP%]{background-color:#9421c5;color:#fff;border:none;padding:.5rem 1rem;border-radius:.25rem;font-size:.875rem;cursor:pointer}.my-id-card-containers[_ngcontent-%COMP%]   .error-state[_ngcontent-%COMP%]   .retry-button[_ngcontent-%COMP%]:hover{background-color:#7c1ba3}.my-id-card-containers[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem 2rem;text-align:center}.my-id-card-containers[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem}.my-id-card-containers[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:.875rem;margin-bottom:.5rem}.my-id-card-containers[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-subtitle[_ngcontent-%COMP%]{font-size:.75rem;color:#999}.my-id-card-containers[_ngcontent-%COMP%]   .my-id-card[_ngcontent-%COMP%]{display:flex;border-radius:6px;margin-bottom:1rem;box-shadow:0 2.5px 6.5px #1c191d4a,0 0 2px #1c191d52;justify-content:space-between;align-items:center;padding:1.25rem;height:100px;transition:all .3s cubic-bezier(.4,0,.2,1);cursor:pointer;border:none}.my-id-card-containers[_ngcontent-%COMP%]   .my-id-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #1c191d4a,0 0 3px #1c191d52}.my-id-card-containers[_ngcontent-%COMP%]   .my-id-card[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 1.5px 4px #1c191d4a,0 0 1px #1c191d52}.my-id-card-containers[_ngcontent-%COMP%]   .my-id-card.even-card[_ngcontent-%COMP%]{background-color:#ffe17f}.my-id-card-containers[_ngcontent-%COMP%]   .my-id-card.odd-card[_ngcontent-%COMP%]{background-color:#f8f4ff}.my-id-card-containers[_ngcontent-%COMP%]   .my-id-card[_ngcontent-%COMP%]   .my-id-card-desc[_ngcontent-%COMP%]{flex:1}.my-id-card-containers[_ngcontent-%COMP%]   .my-id-card[_ngcontent-%COMP%]   .my-id-card-desc[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:#000;margin-bottom:1rem;line-height:1.2;letter-spacing:-.01em}.my-id-card-containers[_ngcontent-%COMP%]   .my-id-card[_ngcontent-%COMP%]   .my-id-card-desc[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{display:flex;align-items:center}.my-id-card-containers[_ngcontent-%COMP%]   .my-id-card[_ngcontent-%COMP%]   .my-id-card-desc[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .profile-pic[_ngcontent-%COMP%]{width:3rem;height:3rem;flex-shrink:0}.my-id-card-containers[_ngcontent-%COMP%]   .my-id-card[_ngcontent-%COMP%]   .my-id-card-desc[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .profile-pic[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;object-fit:cover;border:2px solid rgba(255,255,255,.8)}.my-id-card-containers[_ngcontent-%COMP%]   .my-id-card[_ngcontent-%COMP%]   .my-id-card-desc[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .profile-pic[_ngcontent-%COMP%]   .default-avatar[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;background-color:#9ca3af;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:.875rem;border:2px solid rgba(255,255,255,.8)}.my-id-card-containers[_ngcontent-%COMP%]   .my-id-card[_ngcontent-%COMP%]   .my-id-card-desc[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-name-info[_ngcontent-%COMP%]{margin-left:.875rem}.my-id-card-containers[_ngcontent-%COMP%]   .my-id-card[_ngcontent-%COMP%]   .my-id-card-desc[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-name-info[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:#9421c5;line-height:1.2;margin-bottom:.25rem;letter-spacing:-.01em}.my-id-card-containers[_ngcontent-%COMP%]   .my-id-card[_ngcontent-%COMP%]   .my-id-card-desc[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-name-info[_ngcontent-%COMP%]   .user-role[_ngcontent-%COMP%]{font-size:.8125rem;color:#6b7280;line-height:1.2;text-transform:capitalize;font-weight:500}.my-id-card-containers[_ngcontent-%COMP%]   .my-id-card[_ngcontent-%COMP%]   .my-id-profile[_ngcontent-%COMP%]{width:5rem;height:5rem;display:flex;align-items:center;justify-content:center;flex-shrink:0}.my-id-card-containers[_ngcontent-%COMP%]   .my-id-card[_ngcontent-%COMP%]   .my-id-profile[_ngcontent-%COMP%]   .provider-logo[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background-color:#fff;border-radius:6px;box-shadow:0 2.5px 6.5px #1c191d4a,0 0 2px #1c191d52}.my-id-card-containers[_ngcontent-%COMP%]   .my-id-card[_ngcontent-%COMP%]   .my-id-profile[_ngcontent-%COMP%]   .provider-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}.my-id-card-containers[_ngcontent-%COMP%]   .my-id-card[_ngcontent-%COMP%]   .my-id-profile[_ngcontent-%COMP%]   .default-logo[_ngcontent-%COMP%]{width:4rem;height:4rem;border-radius:6px;background-color:#fff;color:#9421c5;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.5rem;box-shadow:0 2.5px 6.5px #1c191d4a,0 0 2px #1c191d52;letter-spacing:-.02em}@keyframes _ngcontent-%COMP%_skeleton-loading{0%{background-position:-200% 0}to{background-position:200% 0}}"]})};var We=class n{constructor(t,e){this.http=t;this.authService=e}getUserSubscriptions(t,e,i,c){let p=I.PROVIDER_INFO.GET_USER_SUBSCRIPTION_LIST,b=[];return t&&b.push(`user_id=${t}`),e&&b.push(`status=${e}`),i!==void 0&&b.push(`skip=${i}`),c!==void 0&&b.push(`limit=${c}`),b.length>0&&(p+=`?${b.join("&")}`),console.log("[SubscriptionService] Fetching subscriptions from:",p),this.http.get(p).pipe(oe(R=>({status:!0,data:R})))}getSubscriptionById(t){let e=`${I.PROVIDER_INFO.GET_SUBSCRIPTION_LIST}${t}`;return console.log("[SubscriptionService] Fetching subscription:",e),this.http.get(e).pipe(oe(i=>({status:!0,data:i})))}createSubscription(t){let e=I.PROVIDER_INFO.CREATE_SUBSCRIPTION;return console.log("[SubscriptionService] Creating subscription:",t),this.http.post(e,t).pipe(oe(i=>({status:!0,data:i})))}cancelSubscription(t){let e=`${I.PROVIDER_INFO.GET_SUBSCRIPTION_LIST}${t}`;return console.log("[SubscriptionService] Cancelling subscription:",t),this.http.put(e,{status:"cancelled"}).pipe(oe(i=>({status:!0,data:i})))}renewSubscription(t,e){let i=`${I.PROVIDER_INFO.GET_SUBSCRIPTION_LIST}${t}`;console.log("[SubscriptionService] Renewing subscription:",t);let c={status:"active"};return e&&(c.end_date=e),this.http.put(i,c).pipe(oe(p=>({status:!0,data:p})))}getActiveSubscriptionsCount(){return this.getUserSubscriptions(void 0,"active").pipe(oe(t=>t.data?.total||0))}hasActiveSubscription(t){return this.getUserSubscriptions(void 0,"active").pipe(oe(e=>{if(!e.data?.grouped_subscriptions)return!1;let i=e.data.grouped_subscriptions.find(c=>c.provider.provider_id===t);return i?i.subscriptions.length>0:!1}))}static \u0275fac=function(e){return new(e||n)(E($),E(y))};static \u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})};var $n=(n,t,e,i)=>({"card-active":n,"card-expired":t,"card-cancelled":e,"card-pending":i});function Gn(n,t){n&1&&(r(0,"div",5),m(1,"div",6),r(2,"p",7),s(3,"Loading subscriptions..."),o()())}function Kn(n,t){if(n&1){let e=P();r(0,"div",8)(1,"div",9),s(2,"\u26A0\uFE0F"),o(),r(3,"p",10),s(4),o(),r(5,"button",11),v("click",function(){h(e);let c=l();return O(c.refresh())}),s(6,"Retry"),o()()}if(n&2){let e=l();a(4),g(e.error)}}function qn(n,t){n&1&&(r(0,"div",12)(1,"div",13),s(2,"\u{1F4ED}"),o(),r(3,"p",14),s(4,"No subscriptions found"),o()())}function Hn(n,t){if(n&1&&(r(0,"span",38),s(1),o()),n&2){let e=l().$implicit;a(),M(" - ",e.product.name,"")}}function Yn(n,t){if(n&1&&(r(0,"div",39),s(1),o()),n&2){let e=l().$implicit;a(),M(" ",e.provider_business_name," ")}}function Wn(n,t){if(n&1&&(r(0,"div",40),s(1),o()),n&2){let e=l().$implicit,i=l(2);a(),M(" \u26A0\uFE0F ",i.getExpiringMessage(e)," ")}}function Jn(n,t){if(n&1&&(r(0,"div",41),s(1),o()),n&2){let e=l().$implicit,i=l(2);a(),M(" \u{1F534} ",i.getExpiringMessage(e)," ")}}function Qn(n,t){if(n&1&&(r(0,"div",26),s(1),o()),n&2){let e=l().$implicit;a(),M("Group: ",e.group.group_name,"")}}function Xn(n,t){if(n&1){let e=P();r(0,"button",42),v("click",function(){h(e);let c=l().$implicit,p=l(2);return O(p.cancelSubscription(c))}),s(1," Cancel "),o()}}function Zn(n,t){if(n&1){let e=P();r(0,"button",43),v("click",function(){h(e);let c=l().$implicit,p=l(2);return O(p.renewSubscription(c))}),s(1," Renew "),o()}}function ei(n,t){if(n&1&&(r(0,"div",17)(1,"div",18)(2,"div",19),s(3),u(4,Hn,2,1,"span",20),o(),u(5,Yn,2,1,"div",21),r(6,"div",22),s(7),_(8,"titlecase"),o(),u(9,Wn,2,1,"div",23)(10,Jn,2,1,"div",24),o(),r(11,"div",25)(12,"div")(13,"div",26),s(14),o(),u(15,Qn,2,1,"div",27),o(),r(16,"div")(17,"div",28)(18,"span",29),s(19),_(20,"date"),_(21,"date"),o()(),r(22,"div",30),s(23),o()()(),r(24,"div",31)(25,"div",32)(26,"span",33),s(27,"Billing:"),o(),r(28,"span",34),s(29),_(30,"titlecase"),o()(),r(31,"div",35),u(32,Xn,2,0,"button",36)(33,Zn,2,0,"button",37),o()()()),n&2){let e=t.$implicit,i=l(2);d("ngClass",yt(25,$n,i.getDisplayStatus(e)==="active",i.getDisplayStatus(e)==="inactive"||i.getDisplayStatus(e)==="expired",i.getDisplayStatus(e)==="cancelled",i.getDisplayStatus(e)==="pending"||i.getDisplayStatus(e)==="pending_payment")),a(3),M(" ",(e.member==null?null:e.member.member_name)||e.product.name||e.plan.name," "),a(),d("ngIf",e.member==null?null:e.member.member_name),a(),d("ngIf",e.provider_business_name),a(2),g(i.getDisplayStatus(e)==="pending_payment"?"Pending":f(8,15,i.getDisplayStatus(e))),a(2),d("ngIf",i.isExpiringSoon(e)),a(),d("ngIf",i.isOverdue(e)),a(4),M("Sub ID: ",e.subscription_id,""),a(),d("ngIf",e.group==null?null:e.group.group_name),a(4),W("Valid: ",re(20,17,e.start_date,"MMM d, y")," - ",re(21,20,e.end_date,"MMM d, y"),""),a(4),M("\u20B9",e.amount_paid,""),a(6),M(" ",f(30,23,e.billing_type)," "),a(3),d("ngIf",i.getDisplayStatus(e)==="active"&&!i.isExpiringSoon(e)&&!i.isOverdue(e)&&!i.isGracePeriodExpired(e)),a(),d("ngIf",i.getDisplayStatus(e)==="inactive"||i.getDisplayStatus(e)==="expired"||i.isExpiringSoon(e)||i.isOverdue(e)||i.isGracePeriodExpired(e))}}function ti(n,t){if(n&1&&(r(0,"div",15),u(1,ei,34,30,"div",16),o()),n&2){let e=l();a(),d("ngForOf",e.subscriptions)}}function ni(n,t){if(n&1){let e=P();r(0,"button",44),v("click",function(){h(e);let c=l();return O(c.refresh())}),m(1,"i",45),o()}if(n&2){let e=l();d("disabled",e.loading),a(),pe("spinning",e.loading)}}var Je=class n{constructor(t,e,i,c){this.subscriptionService=t;this.toastService=e;this.authService=i;this.router=c}subscriptions=[];groupedSubscriptions=[];loading=!1;error=null;selectedStatus="all";selectedProvider;totalCount=0;activeCount=0;inactiveCount=0;ngOnInit(){this.loadSubscriptions()}loadSubscriptions(){this.loading=!0,this.error=null;let t=this.selectedStatus==="all"?void 0:this.selectedStatus;console.log("[MySubscriptions] Loading subscriptions with filters:",{providerId:this.selectedProvider,status:t});let e=this.authService.getUserId();this.subscriptionService.getUserSubscriptions(e,t).subscribe({next:i=>{console.log("[MySubscriptions] Subscriptions loaded:",i),i.status&&i.data&&(this.groupedSubscriptions=i.data.grouped_subscriptions||[],this.subscriptions=this.groupedSubscriptions.reduce((c,p)=>{let b=p.subscriptions.map(R=>ie(ne({},R),{provider_name:p.provider.name,provider_business_name:p.provider.business_name,provider_logo_url:p.provider.logo_url}));return[...c,...b]},[]),this.totalCount=i.data.total||this.subscriptions.length,this.activeCount=this.subscriptions.filter(c=>c.status==="active").length,this.inactiveCount=this.subscriptions.filter(c=>c.status==="inactive"||c.status==="pending_payment").length,console.log("[MySubscriptions] Stats:",{total:this.totalCount,active:this.activeCount,inactive:this.inactiveCount,providers:this.groupedSubscriptions.length,subscriptions:this.subscriptions.length})),this.loading=!1},error:i=>{console.error("[MySubscriptions] Error loading subscriptions:",i),this.error="Failed to load subscriptions. Please try again.",this.loading=!1,this.toastService.error("Error","Failed to load subscriptions")}})}onStatusFilterChange(t){this.selectedStatus=t,this.loadSubscriptions()}onProviderFilterChange(t){this.selectedProvider=t,this.loadSubscriptions()}cancelSubscription(t){let e=t.member?.member_name||t.product?.name||"this subscription";confirm(`Are you sure you want to cancel the subscription for ${e}?`)&&this.subscriptionService.cancelSubscription(t.subscription_id).subscribe({next:i=>{console.log("[MySubscriptions] Subscription cancelled:",i),this.toastService.success("Success","Subscription cancelled successfully"),this.loadSubscriptions()},error:i=>{console.error("[MySubscriptions] Error cancelling subscription:",i),this.toastService.error("Error","Failed to cancel subscription")}})}renewSubscription(t){console.log("MySubscriptions: renewSubscription called",t);let e={plan:{id:t.plan_id,name:t.plan.name,price:t.plan.price,group_id:t.group_id,Subscription_cycle_start_Date:t.plan.Subscription_cycle_start_Date},group:{group_id:t.group_id,group_name:t.group.group_name},selectedProduct:{product_id:t.product_id,name:t.product.name},isRenewal:!0,subscriptionId:t.subscription_id,orderId:t.order_id,memberId:t.member_id,memberName:t.member?.member_name,originalSubscription:t};console.log("Navigating to customers checkout with payload:",e);let i={isProvider:!1,data:e};sessionStorage.setItem("checkout_navigation_state",JSON.stringify(i)),this.router.navigate(["customers/info/view-cart"],{state:i})}getStatusClass(t){switch(t.toLowerCase()){case"active":return"status-active";case"inactive":return"status-expired";case"cancelled":return"status-cancelled";case"pending":case"pending_payment":return"status-pending";case"expired":return"status-expired";default:return""}}getPaymentStatusClass(t){switch(t.toLowerCase()){case"paid":return"payment-paid";case"pending":return"payment-pending";case"failed":return"payment-failed";default:return""}}getDaysRemaining(t){let e=new Date(t),i=new Date;e.setHours(0,0,0,0),i.setHours(0,0,0,0);let c=e.getTime()-i.getTime();return Math.round(c/(1e3*60*60*24))}isExpiringSoon(t){if(t.status!=="active")return!1;let e=this.getDaysRemaining(t.end_date);return e>=0&&e<=7}isOverdue(t){let e=this.getDaysRemaining(t.end_date);return e<0&&e>=-15}isGracePeriodExpired(t){return this.getDaysRemaining(t.end_date)<-15}getDisplayStatus(t){return this.isGracePeriodExpired(t)?"expired":t.status}getOverdueDays(t){let e=this.getDaysRemaining(t);return Math.abs(e)}getExpiringMessage(t){let e=this.getDaysRemaining(t.end_date);if(e<0&&e>=-15){let i=Math.abs(e);return`Overdue by ${i} day${i>1?"s":""}`}else{if(e===0)return"Expiring Today";if(e>0&&e<=7)return`Expiring in ${e} day${e>1?"s":""}`}return""}isActive(t){return t.status==="active"}isInactive(t){return t.status==="inactive"||t.status==="pending_payment"}refresh(){this.loadSubscriptions()}static \u0275fac=function(e){return new(e||n)(C(We),C(Q),C(y),C(T))};static \u0275cmp=x({type:n,selectors:[["my-subscriptions"]],decls:5,vars:5,consts:[["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","empty-container",4,"ngIf"],["class","subscription-card-container",4,"ngIf"],["class","refresh-floating-btn",3,"disabled","click",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"loading-text"],[1,"error-container"],[1,"error-icon"],[1,"error-text"],[1,"retry-btn",3,"click"],[1,"empty-container"],[1,"empty-icon"],[1,"empty-text"],[1,"subscription-card-container"],["class","subscription-card",3,"ngClass",4,"ngFor","ngForOf"],[1,"subscription-card",3,"ngClass"],[1,"card-info"],[1,"card-name"],["class","card-product-name",4,"ngIf"],["class","card-provider-name",4,"ngIf"],[1,"card-status-badge"],["class","expiring-alert",4,"ngIf"],["class","overdue-alert",4,"ngIf"],[1,"card-owner-info"],[1,"card-owner-number"],["class","card-owner-number",4,"ngIf"],[1,"card-dates"],[1,"date-info"],[1,"card-amount"],[1,"card-info-footer"],[1,"payment-status-wrapper"],[1,"payment-label"],[1,"payment-status","payment-paid"],[1,"add-btn-container"],["class","add-btn cancel-btn",3,"click",4,"ngIf"],["class","add-btn renew-btn",3,"click",4,"ngIf"],[1,"card-product-name"],[1,"card-provider-name"],[1,"expiring-alert"],[1,"overdue-alert"],[1,"add-btn","cancel-btn",3,"click"],[1,"add-btn","renew-btn",3,"click"],[1,"refresh-floating-btn",3,"click","disabled"],[1,"pi","pi-refresh"]],template:function(e,i){e&1&&u(0,Gn,4,0,"div",0)(1,Kn,7,1,"div",1)(2,qn,5,0,"div",2)(3,ti,2,1,"div",3)(4,ni,2,3,"button",4),e&2&&(d("ngIf",i.loading),a(),d("ngIf",i.error&&!i.loading),a(),d("ngIf",!i.loading&&!i.error&&i.subscriptions.length===0),a(),d("ngIf",!i.loading&&!i.error&&i.subscriptions.length>0),a(),d("ngIf",i.subscriptions.length>0))},dependencies:[L,k,S,_e,ue],styles:[".stats-info[_ngcontent-%COMP%]{display:flex;justify-content:space-around;background:linear-gradient(62.66deg,#3498db1a 1%,#4b00821a 82%);margin:1rem;padding:1rem;border-radius:.5rem;box-shadow:0 2px 8px #0000001a;border:1px solid rgba(52,152,219,.2)}.stats-info[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.25rem}.stats-info[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.688rem;color:indigo;font-weight:600}.stats-info[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#3498db}.stats-info[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-number.active-color[_ngcontent-%COMP%]{color:#28a745}.stats-info[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-number.inactive-color[_ngcontent-%COMP%]{color:#dc3545}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:50vh}.loading-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid #e0e0e0;border-top-color:#5d157c;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:16px}.loading-container[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%]{color:#333;font-size:14px;font-weight:600}.error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:50vh;padding:2rem;text-align:center}.error-container[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:16px}.error-container[_ngcontent-%COMP%]   .error-text[_ngcontent-%COMP%]{color:#666;font-size:16px;margin-bottom:20px}.error-container[_ngcontent-%COMP%]   .retry-btn[_ngcontent-%COMP%]{background:linear-gradient(62.66deg,#3498db 1%,indigo 82%);color:#fff;border:none;padding:12px 24px;border-radius:8px;font-weight:700;cursor:pointer;box-shadow:0 4px 15px #3498db4d}.error-container[_ngcontent-%COMP%]   .retry-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #3498db66}.empty-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:50vh;text-align:center}.empty-container[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:16px}.empty-container[_ngcontent-%COMP%]   .empty-text[_ngcontent-%COMP%]{color:#666;font-size:16px}.refresh-floating-btn[_ngcontent-%COMP%]{position:fixed;bottom:100px;right:20px;width:56px;height:56px;background:linear-gradient(62.66deg,#3498db 1%,indigo 82%);border:none;border-radius:50%;color:#fff;font-size:24px;cursor:pointer;box-shadow:0 4px 20px #3498db66;transition:all .3s ease;z-index:100}.refresh-floating-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:scale(1.1);box-shadow:0 6px 30px #3498db99}.refresh-floating-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.refresh-floating-btn[_ngcontent-%COMP%]   i.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.subscription-card-container[_ngcontent-%COMP%]{padding-bottom:80px}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]{background:linear-gradient(62.66deg,#3498db 1%,indigo 82%);border-radius:.75rem;min-height:10.438rem;margin:1rem 1rem .5rem;color:#fff;padding:1rem;display:flex;flex-direction:column;justify-content:space-between;position:relative;box-shadow:0 4px 15px #0003;transition:all .3s ease}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 25px #0000004d}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]{align-self:start;width:100%;position:relative}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   .card-name[_ngcontent-%COMP%]{font-weight:700;font-size:1rem;margin-bottom:.25rem}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   .card-name[_ngcontent-%COMP%]   .card-product-name[_ngcontent-%COMP%]{font-weight:500;font-size:.875rem;opacity:.9}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   .card-provider-name[_ngcontent-%COMP%]{font-weight:500;font-size:.75rem;margin-bottom:.25rem;opacity:.9;display:flex;align-items:center;gap:.25rem}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   .card-desc[_ngcontent-%COMP%]{font-weight:400;font-size:.75rem;margin-bottom:.5rem}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   .card-status-badge[_ngcontent-%COMP%]{position:absolute;top:0;right:0;background:#ffffff4d;backdrop-filter:blur(10px);padding:.25rem .75rem;border-radius:1rem;font-size:.625rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px;border:1px solid rgba(255,255,255,.5);box-shadow:0 2px 8px #00000026}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   .expiring-alert[_ngcontent-%COMP%], .subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   .overdue-alert[_ngcontent-%COMP%]{margin-top:.5rem;padding:.375rem .625rem;border-radius:.5rem;font-size:.688rem;font-weight:700;text-align:center;animation:_ngcontent-%COMP%_pulse-alert 1.5s ease-in-out infinite}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   .expiring-alert[_ngcontent-%COMP%]{background:#ffc10766;border:1px solid rgba(255,193,7,.6);color:#fff}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   .overdue-alert[_ngcontent-%COMP%]{background:#dc354566;border:1px solid rgba(220,53,69,.6);color:#fff}@keyframes _ngcontent-%COMP%_pulse-alert{0%,to{opacity:1;transform:scale(1)}50%{opacity:.85;transform:scale(1.02)}}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-owner-info[_ngcontent-%COMP%]{padding:.75rem 0;display:flex;justify-content:space-between;align-items:center;flex-direction:column}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-owner-info[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-owner-info[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{align-items:flex-start;flex:1}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-owner-info[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{align-items:center;flex:1}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-owner-info[_ngcontent-%COMP%]   .card-owner-name[_ngcontent-%COMP%]{font-size:.75rem;font-weight:700;margin-bottom:.125rem}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-owner-info[_ngcontent-%COMP%]   .card-owner-number[_ngcontent-%COMP%]{font-size:.688rem;font-weight:500;opacity:.9}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-owner-info[_ngcontent-%COMP%]   .card-dates[_ngcontent-%COMP%]{margin-bottom:.25rem}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-owner-info[_ngcontent-%COMP%]   .card-dates[_ngcontent-%COMP%]   .date-info[_ngcontent-%COMP%]{font-size:.625rem;font-weight:500;opacity:.85;line-height:1.3;text-align:right}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-owner-info[_ngcontent-%COMP%]   .card-amount[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:800;text-shadow:0 2px 4px rgba(0,0,0,.2)}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-info-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-info-footer[_ngcontent-%COMP%]   .payment-status-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex:1}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-info-footer[_ngcontent-%COMP%]   .payment-status-wrapper[_ngcontent-%COMP%]   .payment-label[_ngcontent-%COMP%]{font-size:.688rem;font-weight:600;opacity:.9}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-info-footer[_ngcontent-%COMP%]   .payment-status-wrapper[_ngcontent-%COMP%]   .payment-status[_ngcontent-%COMP%]{font-size:.688rem;font-weight:700;padding:.25rem .625rem;border-radius:.5rem;text-transform:uppercase;letter-spacing:.5px;background:#ffffff40;backdrop-filter:blur(5px);border:1px solid rgba(255,255,255,.3)}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-info-footer[_ngcontent-%COMP%]   .payment-status-wrapper[_ngcontent-%COMP%]   .payment-status.payment-paid[_ngcontent-%COMP%]{background:#28a74566;border-color:#28a74599;color:#fff}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-info-footer[_ngcontent-%COMP%]   .payment-status-wrapper[_ngcontent-%COMP%]   .payment-status.payment-pending[_ngcontent-%COMP%]{background:#ffc10766;border-color:#ffc10799;color:#fff}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-info-footer[_ngcontent-%COMP%]   .payment-status-wrapper[_ngcontent-%COMP%]   .payment-status.payment-failed[_ngcontent-%COMP%]{background:#dc354566;border-color:#dc354599;color:#fff}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-info-footer[_ngcontent-%COMP%]   .add-btn-container[_ngcontent-%COMP%]{margin-left:auto;display:flex;gap:.5rem;flex-wrap:wrap}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-info-footer[_ngcontent-%COMP%]   .add-btn-container[_ngcontent-%COMP%]   button.add-btn[_ngcontent-%COMP%]{color:#310b41;background-color:#fff;font-size:.688rem;height:1.75rem;font-weight:700;padding:0 .75rem;border-radius:.375rem;border:none;cursor:pointer;transition:all .3s ease;white-space:nowrap}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-info-footer[_ngcontent-%COMP%]   .add-btn-container[_ngcontent-%COMP%]   button.add-btn[_ngcontent-%COMP%]:hover{background:#ffffffe6;transform:scale(1.05)}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-info-footer[_ngcontent-%COMP%]   .add-btn-container[_ngcontent-%COMP%]   button.add-btn.cancel-btn[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-info-footer[_ngcontent-%COMP%]   .add-btn-container[_ngcontent-%COMP%]   button.add-btn.cancel-btn[_ngcontent-%COMP%]:hover{background:#c82333}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-info-footer[_ngcontent-%COMP%]   .add-btn-container[_ngcontent-%COMP%]   button.add-btn.renew-btn[_ngcontent-%COMP%]{background:#28a745;color:#fff}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-info-footer[_ngcontent-%COMP%]   .add-btn-container[_ngcontent-%COMP%]   button.add-btn.renew-btn[_ngcontent-%COMP%]:hover{background:#218838}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]{margin:.5rem}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-info-footer[_ngcontent-%COMP%]{flex-wrap:wrap;gap:.5rem}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-info-footer[_ngcontent-%COMP%]   .payment-status[_ngcontent-%COMP%]{flex:1 1 100%;text-align:center}.subscription-card-container[_ngcontent-%COMP%]   .subscription-card[_ngcontent-%COMP%]   .card-info-footer[_ngcontent-%COMP%]   .add-btn-container[_ngcontent-%COMP%]{flex:1}.refresh-floating-btn[_ngcontent-%COMP%]{bottom:80px;right:16px}}"]})};var he=class n extends be{constructor(e,i){let c=i.getSelectedProviderId(),p={list:I.ORDER.OVERDUE_LIST.replace("_PROVIDER_ID_",c.toString()),create:"",update:"",delete:""};super(e,"",p,"data");this.authServ=i}getOrdersByProvider(e,i,c,p,b,R,X=0,fn=10,bt="created"){let ce=`orders/?provider_id=${e}`;return i&&(ce+=`&search=${encodeURIComponent(i)}`),c&&(ce+=`&${bt==="delivery"?"delivery_from":"created_from"}=${c}`),p&&(ce+=`&${bt==="delivery"?"delivery_to":"created_to"}=${p}`),b&&(ce+=`&user_id=${b}`),R&&(ce+=`&status=${R}`),ce+=`&skip=${X}&limit=${fn}`,this.http.get(ce)}updateOrderStatus(e,i){let c=this.authServ.getUserId(),p=`orders/${e}/status?status=${i}&updated_by=${c}`;return this.http.patch(p,{})}updateOrder(e,i){let c=this.authServ.getUserId(),p=this.authServ.getSelectedProviderId();return this.http.put(`provider/${p}/orders/${e}`,ie(ne({},i),{updated_by:c}))}assignOrder(e,i){let c=this.authServ.getSelectedProviderId();return this.http.put(`provider/${c}/orders/${e}`,i)}getOrderById(e){return this.http.get(`orders/${e}`)}getRecentOrders(e,i=0,c=10){console.log("Fetching recent orders for user:",e);let p=`${I.ORDER.RECENT_ORDERS}?skip=${i}&limit=${c}&user_id=${e}`;return this.http.get(p)}static \u0275fac=function(i){return new(i||n)(E($),E(y))};static \u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})};var oi=()=>[1,2,3,4,5],ri=()=>[1,2];function ai(n,t){n&1&&(r(0,"div",10)(1,"div",11),m(2,"div",12)(3,"div",13),o(),r(4,"div",14),m(5,"div",15),r(6,"div",16),m(7,"div",17)(8,"div",18),o(),m(9,"div",19),o(),r(10,"div",20),m(11,"div",21),o()())}function ci(n,t){n&1&&(r(0,"div",8),u(1,ai,12,0,"div",9),o()),n&2&&(a(),d("ngForOf",de(1,oi)))}function si(n,t){if(n&1){let e=P();r(0,"div",22)(1,"div",23),m(2,"i",24),o(),r(3,"p",25),s(4),o(),r(5,"button",26),v("click",function(){h(e);let c=l();return O(c.refreshOrders())}),s(6,"Try Again"),o()()}if(n&2){let e=l();a(4),g(e.errorMessage)}}function di(n,t){n&1&&(r(0,"div",27)(1,"div",28),m(2,"i",29),o(),r(3,"h3",30),s(4,"No Orders Yet"),o(),r(5,"p",31),s(6,"Your recent orders will appear here once you start shopping."),o(),r(7,"button",32),s(8,"Explore Products"),o()())}function li(n,t){if(n&1&&m(0,"img",61),n&2){let e=l().$implicit,i=l(2);d("src",i.getProviderLogo(e),H)("alt",i.getProviderName(e))}}function mi(n,t){if(n&1&&(r(0,"div",62),s(1),o()),n&2){let e=l().$implicit,i=l(2);a(),M(" ",i.getOrderInitials(i.getProviderName(e))," ")}}function pi(n,t){if(n&1&&(r(0,"div",77)(1,"span",78),s(2,"Subscription Plan"),o(),r(3,"span",79),s(4),o()()),n&2){let e=l(3).$implicit,i=l(2);a(4),g(i.formatCurrency(i.getOrderTotal(e)*.8))}}function gi(n,t){if(n&1&&(r(0,"div",77)(1,"span",78),s(2,"Fresh Produce"),o(),r(3,"span",79),s(4),o()()),n&2){let e=l(3).$implicit,i=l(2);a(4),g(i.formatCurrency(i.getOrderTotal(e)*.7))}}function _i(n,t){if(n&1&&(r(0,"div",74)(1,"div",75),s(2,"Details"),o(),u(3,pi,5,1,"div",76)(4,gi,5,1,"div",76),r(5,"div",77)(6,"span",78),s(7,"Delivery"),o(),r(8,"span",79),s(9),o()(),r(10,"div",77)(11,"span",78),s(12,"GST"),o(),r(13,"span",79),s(14),o()(),r(15,"div",80)(16,"span",78),s(17,"Total"),o(),r(18,"span",79),s(19),o()()()),n&2){let e=l(2).$implicit,i=l(2);a(3),d("ngIf",e.order_type==="product_subscription"),a(),d("ngIf",e.order_type==="ondemand"),a(5),g(i.formatCurrency(25)),a(5),g(i.formatCurrency(2)),a(5),g(i.formatCurrency(i.getOrderTotal(e)))}}function ui(n,t){if(n&1){let e=P();r(0,"div",63)(1,"div",64)(2,"div",65),m(3,"input",66),o(),r(4,"div",67)(5,"span",68),s(6),o()(),r(7,"div",69)(8,"span",70),s(9),o()()(),r(10,"div",71),v("click",function(){h(e);let c=l().$implicit,p=l(2);return O(p.toggleOrderExpansion(c.id))}),r(11,"span",72),s(12,"Summary"),o(),m(13,"i",59),o(),u(14,_i,20,5,"div",73),o()}if(n&2){let e=l().$implicit,i=l(2);a(3),d("checked",e.payment_status==="paid"),a(3),g(e.display_order_id),a(3),g(i.formatCurrency(i.getOrderTotal(e))),a(4),d("ngClass",i.isOrderExpanded(e.id)?"pi-chevron-up":"pi-chevron-down"),a(),d("ngIf",i.isOrderExpanded(e.id))}}function fi(n,t){if(n&1){let e=P();r(0,"div",39)(1,"div",40)(2,"div",41)(3,"span",42),s(4),o(),m(5,"i",43),o(),r(6,"div",44)(7,"span",45),s(8),o()()(),r(9,"div",46)(10,"div",47),u(11,li,1,2,"img",48)(12,mi,2,1,"div",49),o(),r(13,"div",50)(14,"div",51)(15,"span",52),s(16),o()(),r(17,"div",53)(18,"span",54),s(19),o()()(),r(20,"div",55)(21,"button",56),s(22),o()()(),r(23,"div",57),v("click",function(){let c=h(e).$implicit,p=l(2);return O(p.toggleOrderExpansion(c.id))}),r(24,"div",58),m(25,"i",59),o()(),u(26,ui,15,5,"div",60),o()}if(n&2){let e=t.$implicit,i=l(2);a(4),g(i.getProviderName(e)),a(3),d("ngClass",i.getOrderStatusClass(e.status)),a(),M(" ",i.getOrderStatusText(e.status)," "),a(3),d("ngIf",i.getProviderLogo(e)),a(),d("ngIf",!i.getProviderLogo(e)),a(4),M(" ",e.order_type==="product_subscription"?"Subscription Order":"Fresh items, 5 kg....."," "),a(3),g(i.formatCurrency(i.getOrderTotal(e))),a(2),d("ngClass",i.getPaymentStatusClass(e.payment_status)),a(),M(" ",i.getPaymentStatusText(e.payment_status)," "),a(3),d("ngClass",i.isOrderExpanded(e.id)?"pi-chevron-up":"pi-chevron-down"),a(),d("ngIf",i.isOrderExpanded(e.id))}}function Ci(n,t){n&1&&m(0,"i",86)}function vi(n,t){n&1&&m(0,"i",87)}function bi(n,t){n&1&&(r(0,"span"),s(1,"Load More Orders"),o())}function hi(n,t){n&1&&(r(0,"span"),s(1,"Loading..."),o())}function Oi(n,t){if(n&1){let e=P();r(0,"div",81)(1,"button",82),v("click",function(){h(e);let c=l(2);return O(c.loadMoreOrders())}),u(2,Ci,1,0,"i",83)(3,vi,1,0,"i",84)(4,bi,2,0,"span",85)(5,hi,2,0,"span",85),o()()}if(n&2){let e=l(2);a(),d("disabled",e.isLoadingMore),a(),d("ngIf",!e.isLoadingMore),a(),d("ngIf",e.isLoadingMore),a(),d("ngIf",!e.isLoadingMore),a(),d("ngIf",e.isLoadingMore)}}function Mi(n,t){n&1&&(r(0,"div",10)(1,"div",11),m(2,"div",12)(3,"div",13),o(),r(4,"div",14),m(5,"div",15),r(6,"div",16),m(7,"div",17)(8,"div",18),o(),m(9,"div",19),o(),r(10,"div",20),m(11,"div",21),o()())}function Pi(n,t){n&1&&(r(0,"div",88),u(1,Mi,12,0,"div",9),o()),n&2&&(a(),d("ngForOf",de(1,ri)))}function xi(n,t){if(n&1&&(r(0,"div",33),u(1,fi,27,11,"div",34)(2,Oi,6,5,"div",35)(3,Pi,2,2,"div",36),r(4,"div",37)(5,"p",38),s(6),o()()()),n&2){let e=l();a(),d("ngForOf",e.recentOrders),a(),d("ngIf",e.hasMoreOrders),a(),d("ngIf",e.isLoadingMore&&e.recentOrders.length>0),a(3),W(" Showing ",e.recentOrders.length," of ",e.totalCount," orders ")}}var Qe=class n{constructor(t,e){this.orderService=t;this.authService=e}recentOrders=[];isLoading=!1;isLoadingMore=!1;errorMessage="";totalCount=0;currentPage=0;pageSize=10;hasMoreOrders=!1;expandedOrders=new Set;destroy$=new we;ngOnInit(){this.loadRecentOrders()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadRecentOrders(){this.isLoading=!0,this.errorMessage="";let t=this.authService.getUserId();if(!t){this.errorMessage="User ID not found",this.isLoading=!1;return}this.orderService.getRecentOrders(t,this.currentPage*this.pageSize,this.pageSize).pipe(me(this.destroy$)).subscribe({next:e=>{console.log("Orders API Response:",e),e&&e.orders?(this.currentPage===0?this.recentOrders=e.orders:this.recentOrders=[...this.recentOrders,...e.orders],this.totalCount=e.total,this.hasMoreOrders=this.recentOrders.length<this.totalCount,console.log("Orders loaded:",this.recentOrders.length,"Total:",this.totalCount)):this.errorMessage="No orders found",this.isLoading=!1},error:e=>{console.error("Error loading recent orders:",e),this.errorMessage="Failed to load orders. Please try again.",this.isLoading=!1}})}loadMoreOrders(){!this.isLoadingMore&&this.hasMoreOrders&&(this.currentPage++,this.loadMoreRecentOrders())}loadMoreRecentOrders(){this.isLoadingMore=!0;let t=this.authService.getUserId();if(!t){this.errorMessage="User ID not found",this.isLoadingMore=!1;return}this.orderService.getRecentOrders(t,this.currentPage*this.pageSize,this.pageSize).pipe(me(this.destroy$)).subscribe({next:e=>{console.log("Load More Orders API Response:",e),e&&e.orders&&(this.recentOrders=[...this.recentOrders,...e.orders],this.totalCount=e.total,this.hasMoreOrders=this.recentOrders.length<this.totalCount,console.log("More orders loaded:",this.recentOrders.length,"Total:",this.totalCount)),this.isLoadingMore=!1},error:e=>{console.error("Error loading more orders:",e),this.errorMessage="Failed to load more orders. Please try again.",this.isLoadingMore=!1}})}refreshOrders(){this.currentPage=0,this.recentOrders=[],this.loadRecentOrders()}getOrderStatusClass(t){switch(t?.toLowerCase()){case"delivered":case"completed":return"status-delivered";case"pending":return"status-pending";case"processing":case"ready":return"status-processing";case"cancelled":return"status-cancelled";case"accepted":return"status-accepted";default:return"status-default"}}getOrderStatusText(t){return t?.charAt(0).toUpperCase()+t?.slice(1).toLowerCase()||"Unknown"}formatOrderDate(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}getOrderTotal(t){return t.amount||0}formatCurrency(t){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(t)}getOrderItems(t){return t.order_items&&t.order_items.length>0?t.order_items:t.products_info&&Array.isArray(t.products_info)&&t.products_info.length>0?t.products_info:t.metadata?.products&&t.metadata.products.length>0?t.metadata.products:[]}getItemName(t){return t.product_name||t.name||t.title||"Unknown Item"}getProviderName(t){return t.provider_info?.business_name?t.provider_info.business_name:t.provider_info?.name?t.provider_info.name:"Unknown Provider"}getProviderLogo(t){return t.provider_info?.logo_url||null}toggleOrderExpansion(t){this.expandedOrders.has(t)?this.expandedOrders.delete(t):this.expandedOrders.add(t)}isOrderExpanded(t){return this.expandedOrders.has(t)}getOrderInitials(t){if(!t)return"??";let e=t.trim().split(" ");return e.length>=2?(e[0][0]+e[1][0]).toUpperCase():t.substring(0,2).toUpperCase()}getPaymentStatusClass(t){switch(t?.toLowerCase()){case"paid":return"payment-paid";case"pending":return"payment-pending";default:return"payment-pending"}}getPaymentStatusText(t){switch(t?.toLowerCase()){case"paid":return"Paid";case"pending":return"Pay";default:return"Pay"}}static \u0275fac=function(e){return new(e||n)(C(he),C(y))};static \u0275cmp=x({type:n,selectors:[["my-orders"]],decls:10,vars:4,consts:[[1,"my-order-container"],["class","skeleton-orders",4,"ngIf"],["class","error-state",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","orders-list",4,"ngIf"],[1,"app-footer"],[1,"footer-text"],[1,"footer-logo"],[1,"skeleton-orders"],["class","skeleton-order",4,"ngFor","ngForOf"],[1,"skeleton-order"],[1,"skeleton-vendor-header"],[1,"skeleton-vendor-name"],[1,"skeleton-status-badge"],[1,"skeleton-vendor-content"],[1,"skeleton-product-image"],[1,"skeleton-product-info"],[1,"skeleton-product-text"],[1,"skeleton-product-price"],[1,"skeleton-payment-button"],[1,"skeleton-expandable-section"],[1,"skeleton-expand-indicator"],[1,"error-state"],[1,"error-icon"],[1,"pi","pi-exclamation-triangle"],[1,"error-message"],[1,"retry-button",3,"click"],[1,"empty-state"],[1,"empty-icon"],[1,"pi","pi-shopping-bag"],[1,"empty-title"],[1,"empty-subtitle"],["routerLink","/customers/info",1,"explore-button"],[1,"orders-list"],["class","vendor-order-card",4,"ngFor","ngForOf"],["class","load-more-section",4,"ngIf"],["class","load-more-skeleton",4,"ngIf"],[1,"orders-info"],[1,"orders-count"],[1,"vendor-order-card"],[1,"vendor-header"],[1,"vendor-name"],[1,"vendor-title"],[1,"pi","pi-share-alt","share-icon"],[1,"order-status"],[1,"status-badge",3,"ngClass"],[1,"vendor-content"],[1,"product-image-section"],["class","product-image",3,"src","alt",4,"ngIf"],["class","provider-initials",4,"ngIf"],[1,"product-info-section"],[1,"product-description"],[1,"product-text"],[1,"product-price"],[1,"price-value"],[1,"payment-section"],[1,"payment-button",3,"ngClass"],[1,"expandable-section",3,"click"],[1,"expand-indicator"],[1,"pi",3,"ngClass"],["class","order-details",4,"ngIf"],[1,"product-image",3,"src","alt"],[1,"provider-initials"],[1,"order-details"],[1,"order-summary-header"],[1,"order-checkbox"],["type","checkbox",1,"order-check",3,"checked"],[1,"order-id-display"],[1,"order-id-text"],[1,"order-total-amount"],[1,"total-amount"],[1,"summary-section",3,"click"],[1,"summary-label"],["class","order-line-items",4,"ngIf"],[1,"order-line-items"],[1,"details-header"],["class","line-item",4,"ngIf"],[1,"line-item"],[1,"item-name"],[1,"item-price"],[1,"line-item","total-line"],[1,"load-more-section"],[1,"load-more-button",3,"click","disabled"],["class","pi pi-chevron-down",4,"ngIf"],["class","pi pi-spin pi-spinner",4,"ngIf"],[4,"ngIf"],[1,"pi","pi-chevron-down"],[1,"pi","pi-spin","pi-spinner"],[1,"load-more-skeleton"]],template:function(e,i){e&1&&(r(0,"div",0),u(1,ci,2,2,"div",1)(2,si,7,1,"div",2)(3,di,9,0,"div",3)(4,xi,7,5,"div",4),r(5,"div",5)(6,"span",6),s(7,"Made with"),o(),r(8,"div",7),s(9,"V"),o()()()),e&2&&(a(),d("ngIf",i.isLoading&&i.recentOrders.length===0),a(),d("ngIf",i.errorMessage&&!i.isLoading),a(),d("ngIf",!i.isLoading&&!i.errorMessage&&i.recentOrders.length===0),a(),d("ngIf",!i.isLoading&&!i.errorMessage&&i.recentOrders.length>0))},dependencies:[L,k,S,Dt],styles:[".my-order-container[_ngcontent-%COMP%]{padding:0;margin:0;min-height:100vh}.my-order-container[_ngcontent-%COMP%]   .orders-header[_ngcontent-%COMP%]{background-color:#fff;padding:1rem 1.25rem;border-bottom:1px solid #e5e7eb;display:flex;justify-content:space-between;align-items:center}.my-order-container[_ngcontent-%COMP%]   .orders-header[_ngcontent-%COMP%]   .orders-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#1f2937;margin:0}.my-order-container[_ngcontent-%COMP%]   .orders-header[_ngcontent-%COMP%]   .refresh-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background:#5d157c;color:#fff;border:none;border-radius:.5rem;font-weight:500;font-size:.875rem;cursor:pointer;transition:all .2s ease}.my-order-container[_ngcontent-%COMP%]   .orders-header[_ngcontent-%COMP%]   .refresh-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#3c0e50}.my-order-container[_ngcontent-%COMP%]   .orders-header[_ngcontent-%COMP%]   .refresh-button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.my-order-container[_ngcontent-%COMP%]   .orders-header[_ngcontent-%COMP%]   .refresh-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.875rem}.my-order-container[_ngcontent-%COMP%]   .skeleton-orders[_ngcontent-%COMP%]{padding:1rem;background-color:#f3f4f6}.my-order-container[_ngcontent-%COMP%]   .skeleton-orders[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]{background:#fff;border-radius:.75rem;margin-bottom:.75rem;box-shadow:0 2px 4px #0000001a;overflow:hidden}.my-order-container[_ngcontent-%COMP%]   .skeleton-orders[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-vendor-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 1rem .5rem}.my-order-container[_ngcontent-%COMP%]   .skeleton-orders[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-vendor-header[_ngcontent-%COMP%]   .skeleton-vendor-name[_ngcontent-%COMP%]{width:40%;height:.875rem;background:linear-gradient(90deg,#e2e8f0 25%,#f1f5f9,#e2e8f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s infinite;border-radius:.25rem}.my-order-container[_ngcontent-%COMP%]   .skeleton-orders[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-vendor-header[_ngcontent-%COMP%]   .skeleton-status-badge[_ngcontent-%COMP%]{width:20%;height:1.25rem;background:linear-gradient(90deg,#e2e8f0 25%,#f1f5f9,#e2e8f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s infinite;border-radius:.5rem}.my-order-container[_ngcontent-%COMP%]   .skeleton-orders[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-vendor-content[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.5rem 1rem 1rem;gap:.75rem}.my-order-container[_ngcontent-%COMP%]   .skeleton-orders[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-vendor-content[_ngcontent-%COMP%]   .skeleton-product-image[_ngcontent-%COMP%]{width:3.5rem;height:3.5rem;background:linear-gradient(90deg,#e2e8f0 25%,#f1f5f9,#e2e8f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s infinite;border-radius:.5rem;flex-shrink:0}.my-order-container[_ngcontent-%COMP%]   .skeleton-orders[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-vendor-content[_ngcontent-%COMP%]   .skeleton-product-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.25rem}.my-order-container[_ngcontent-%COMP%]   .skeleton-orders[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-vendor-content[_ngcontent-%COMP%]   .skeleton-product-info[_ngcontent-%COMP%]   .skeleton-product-text[_ngcontent-%COMP%]{width:80%;height:.875rem;background:linear-gradient(90deg,#e2e8f0 25%,#f1f5f9,#e2e8f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s infinite;border-radius:.25rem}.my-order-container[_ngcontent-%COMP%]   .skeleton-orders[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-vendor-content[_ngcontent-%COMP%]   .skeleton-product-info[_ngcontent-%COMP%]   .skeleton-product-price[_ngcontent-%COMP%]{width:30%;height:.875rem;background:linear-gradient(90deg,#e2e8f0 25%,#f1f5f9,#e2e8f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s infinite;border-radius:.25rem}.my-order-container[_ngcontent-%COMP%]   .skeleton-orders[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-vendor-content[_ngcontent-%COMP%]   .skeleton-payment-button[_ngcontent-%COMP%]{width:4rem;height:2rem;background:linear-gradient(90deg,#e2e8f0 25%,#f1f5f9,#e2e8f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s infinite;border-radius:.375rem}.my-order-container[_ngcontent-%COMP%]   .skeleton-orders[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-expandable-section[_ngcontent-%COMP%]{padding:.5rem 1rem;border-top:1px solid #e5e7eb;display:flex;justify-content:center}.my-order-container[_ngcontent-%COMP%]   .skeleton-orders[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-expandable-section[_ngcontent-%COMP%]   .skeleton-expand-indicator[_ngcontent-%COMP%]{width:1rem;height:1rem;background:linear-gradient(90deg,#e2e8f0 25%,#f1f5f9,#e2e8f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s infinite;border-radius:50%}.my-order-container[_ngcontent-%COMP%]   .load-more-skeleton[_ngcontent-%COMP%]{padding:0 1rem 1rem;background-color:#f3f4f6}.my-order-container[_ngcontent-%COMP%]   .load-more-skeleton[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]{background:#fff;border-radius:.75rem;margin-bottom:.75rem;box-shadow:0 2px 4px #0000001a;overflow:hidden}.my-order-container[_ngcontent-%COMP%]   .load-more-skeleton[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-vendor-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 1rem .5rem}.my-order-container[_ngcontent-%COMP%]   .load-more-skeleton[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-vendor-header[_ngcontent-%COMP%]   .skeleton-vendor-name[_ngcontent-%COMP%]{width:40%;height:.875rem;background:linear-gradient(90deg,#e2e8f0 25%,#f1f5f9,#e2e8f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s infinite;border-radius:.25rem}.my-order-container[_ngcontent-%COMP%]   .load-more-skeleton[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-vendor-header[_ngcontent-%COMP%]   .skeleton-status-badge[_ngcontent-%COMP%]{width:20%;height:1.25rem;background:linear-gradient(90deg,#e2e8f0 25%,#f1f5f9,#e2e8f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s infinite;border-radius:.5rem}.my-order-container[_ngcontent-%COMP%]   .load-more-skeleton[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-vendor-content[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.5rem 1rem 1rem;gap:.75rem}.my-order-container[_ngcontent-%COMP%]   .load-more-skeleton[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-vendor-content[_ngcontent-%COMP%]   .skeleton-product-image[_ngcontent-%COMP%]{width:3.5rem;height:3.5rem;background:linear-gradient(90deg,#e2e8f0 25%,#f1f5f9,#e2e8f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s infinite;border-radius:.5rem;flex-shrink:0}.my-order-container[_ngcontent-%COMP%]   .load-more-skeleton[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-vendor-content[_ngcontent-%COMP%]   .skeleton-product-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.25rem}.my-order-container[_ngcontent-%COMP%]   .load-more-skeleton[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-vendor-content[_ngcontent-%COMP%]   .skeleton-product-info[_ngcontent-%COMP%]   .skeleton-product-text[_ngcontent-%COMP%]{width:80%;height:.875rem;background:linear-gradient(90deg,#e2e8f0 25%,#f1f5f9,#e2e8f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s infinite;border-radius:.25rem}.my-order-container[_ngcontent-%COMP%]   .load-more-skeleton[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-vendor-content[_ngcontent-%COMP%]   .skeleton-product-info[_ngcontent-%COMP%]   .skeleton-product-price[_ngcontent-%COMP%]{width:30%;height:.875rem;background:linear-gradient(90deg,#e2e8f0 25%,#f1f5f9,#e2e8f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s infinite;border-radius:.25rem}.my-order-container[_ngcontent-%COMP%]   .load-more-skeleton[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-vendor-content[_ngcontent-%COMP%]   .skeleton-payment-button[_ngcontent-%COMP%]{width:4rem;height:2rem;background:linear-gradient(90deg,#e2e8f0 25%,#f1f5f9,#e2e8f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s infinite;border-radius:.375rem}.my-order-container[_ngcontent-%COMP%]   .load-more-skeleton[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-expandable-section[_ngcontent-%COMP%]{padding:.5rem 1rem;border-top:1px solid #e5e7eb;display:flex;justify-content:center}.my-order-container[_ngcontent-%COMP%]   .load-more-skeleton[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-expandable-section[_ngcontent-%COMP%]   .skeleton-expand-indicator[_ngcontent-%COMP%]{width:1rem;height:1rem;background:linear-gradient(90deg,#e2e8f0 25%,#f1f5f9,#e2e8f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s infinite;border-radius:50%}.my-order-container[_ngcontent-%COMP%]   .error-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem 2rem;background:#fff;border-radius:1rem;margin:1rem}.my-order-container[_ngcontent-%COMP%]   .error-state[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{margin-bottom:1rem}.my-order-container[_ngcontent-%COMP%]   .error-state[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:#ef4444}.my-order-container[_ngcontent-%COMP%]   .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#4b5563;font-size:1rem;margin-bottom:1.5rem;text-align:center}.my-order-container[_ngcontent-%COMP%]   .error-state[_ngcontent-%COMP%]   .retry-button[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:#5d157c;color:#fff;border:none;border-radius:.5rem;font-weight:600;cursor:pointer;transition:all .2s ease}.my-order-container[_ngcontent-%COMP%]   .error-state[_ngcontent-%COMP%]   .retry-button[_ngcontent-%COMP%]:hover{background:#3c0e50}.my-order-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;background:#fff;border-radius:1rem;margin:1rem}.my-order-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{margin-bottom:1.5rem}.my-order-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#9ca3af}.my-order-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#374151;margin:0 0 .5rem}.my-order-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-subtitle[_ngcontent-%COMP%]{color:#6b7280;font-size:1rem;margin:0 0 2rem;text-align:center}.my-order-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .explore-button[_ngcontent-%COMP%]{padding:.875rem 2rem;background:#5d157c;color:#fff;border:none;border-radius:.75rem;font-weight:600;cursor:pointer;transition:all .2s ease}.my-order-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .explore-button[_ngcontent-%COMP%]:hover{background:#3c0e50}.my-order-container[_ngcontent-%COMP%]   .orders-list-container[_ngcontent-%COMP%]{height:calc(100vh - 120px);background-color:#f3f4f6;display:flex;flex-direction:column}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]{padding:1rem;background-color:#f3f4f6;flex:1;overflow-y:auto;overflow-x:hidden}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]{background:#fff;border-radius:.75rem;margin-bottom:.75rem;box-shadow:0 2px 4px #0000001a;overflow:hidden}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .vendor-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 1rem .5rem}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .vendor-header[_ngcontent-%COMP%]   .vendor-name[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .vendor-header[_ngcontent-%COMP%]   .vendor-name[_ngcontent-%COMP%]   .vendor-title[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#1f2937;max-width:150px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .vendor-header[_ngcontent-%COMP%]   .vendor-name[_ngcontent-%COMP%]   .share-icon[_ngcontent-%COMP%]{font-size:.875rem;color:#9ca3af;cursor:pointer}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .vendor-header[_ngcontent-%COMP%]   .order-status[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:.25rem .5rem;border-radius:.375rem;font-size:.75rem;font-weight:600;text-transform:capitalize}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .vendor-header[_ngcontent-%COMP%]   .order-status[_ngcontent-%COMP%]   .status-badge.status-delivered[_ngcontent-%COMP%]{background-color:#10b9811a;color:#10b981}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .vendor-header[_ngcontent-%COMP%]   .order-status[_ngcontent-%COMP%]   .status-badge.status-pending[_ngcontent-%COMP%]{background-color:#f59e0b1a;color:#f59e0b}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .vendor-header[_ngcontent-%COMP%]   .order-status[_ngcontent-%COMP%]   .status-badge.status-processing[_ngcontent-%COMP%]{background-color:#5d157c1a;color:#5d157c}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .vendor-header[_ngcontent-%COMP%]   .order-status[_ngcontent-%COMP%]   .status-badge.status-cancelled[_ngcontent-%COMP%]{background-color:#ef44441a;color:#ef4444}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .vendor-header[_ngcontent-%COMP%]   .order-status[_ngcontent-%COMP%]   .status-badge.status-accepted[_ngcontent-%COMP%]{background-color:#10b9811a;color:#10b981}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .vendor-header[_ngcontent-%COMP%]   .order-status[_ngcontent-%COMP%]   .status-badge.status-default[_ngcontent-%COMP%]{background-color:#f3f4f6;color:#4b5563}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .vendor-content[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.5rem 1rem 1rem;gap:.75rem}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .vendor-content[_ngcontent-%COMP%]   .product-image-section[_ngcontent-%COMP%]{width:3.5rem;height:3.5rem;flex-shrink:0}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .vendor-content[_ngcontent-%COMP%]   .product-image-section[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:.5rem;object-fit:cover}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .vendor-content[_ngcontent-%COMP%]   .product-image-section[_ngcontent-%COMP%]   .provider-initials[_ngcontent-%COMP%]{width:100%;height:100%;background:#5d157c;color:#fff;border-radius:.5rem;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1rem}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .vendor-content[_ngcontent-%COMP%]   .product-info-section[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.25rem}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .vendor-content[_ngcontent-%COMP%]   .product-info-section[_ngcontent-%COMP%]   .product-description[_ngcontent-%COMP%]   .product-text[_ngcontent-%COMP%]{font-size:.875rem;color:#374151;line-height:1.3}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .vendor-content[_ngcontent-%COMP%]   .product-info-section[_ngcontent-%COMP%]   .product-price[_ngcontent-%COMP%]   .price-value[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#1f2937}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .vendor-content[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-button[_ngcontent-%COMP%]{padding:.5rem 1rem;border:none;border-radius:.375rem;font-size:.75rem;font-weight:600;cursor:pointer;transition:all .2s ease}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .vendor-content[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-button.payment-paid[_ngcontent-%COMP%], .my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .vendor-content[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-button.payment-pending[_ngcontent-%COMP%]{background:#5d157c;color:#fff}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .vendor-content[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-button[_ngcontent-%COMP%]:hover{opacity:.9}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .expandable-section[_ngcontent-%COMP%]{padding:.5rem 1rem;border-top:1px solid #e5e7eb;cursor:pointer;display:flex;justify-content:center}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .expandable-section[_ngcontent-%COMP%]   .expand-indicator[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.875rem;color:#9ca3af}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .expandable-section[_ngcontent-%COMP%]:hover{background:#f9fafb}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .expandable-section[_ngcontent-%COMP%]:hover   .expand-indicator[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#4b5563}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]{border-top:1px solid #e5e7eb;background:#f9fafb}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .order-summary-header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1rem;gap:.75rem}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .order-summary-header[_ngcontent-%COMP%]   .order-checkbox[_ngcontent-%COMP%]   .order-check[_ngcontent-%COMP%]{width:1rem;height:1rem;accent-color:#5D157C}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .order-summary-header[_ngcontent-%COMP%]   .order-id-display[_ngcontent-%COMP%]{flex:1}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .order-summary-header[_ngcontent-%COMP%]   .order-id-display[_ngcontent-%COMP%]   .order-id-text[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#1f2937}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .order-summary-header[_ngcontent-%COMP%]   .order-total-amount[_ngcontent-%COMP%]   .total-amount[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:#f97316}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .summary-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem 1rem;cursor:pointer;border-top:1px solid #e5e7eb}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .summary-section[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#5d157c}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .summary-section[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.875rem;color:#5d157c}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .summary-section[_ngcontent-%COMP%]:hover{background:#fff}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .order-line-items[_ngcontent-%COMP%]{padding:0 1rem 1rem}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .order-line-items[_ngcontent-%COMP%]   .details-header[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#374151;margin-bottom:.75rem;padding-top:.5rem}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .order-line-items[_ngcontent-%COMP%]   .line-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.375rem 0;font-size:.875rem}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .order-line-items[_ngcontent-%COMP%]   .line-item[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{color:#374151}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .order-line-items[_ngcontent-%COMP%]   .line-item[_ngcontent-%COMP%]   .item-price[_ngcontent-%COMP%]{color:#1f2937;font-weight:500}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .order-line-items[_ngcontent-%COMP%]   .line-item.total-line[_ngcontent-%COMP%]{border-top:1px solid #e5e7eb;padding-top:.5rem;margin-top:.5rem;font-weight:600}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .order-line-items[_ngcontent-%COMP%]   .line-item.total-line[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{color:#1f2937}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .order-line-items[_ngcontent-%COMP%]   .line-item.total-line[_ngcontent-%COMP%]   .item-price[_ngcontent-%COMP%]{color:#1f2937;font-weight:700}.my-order-container[_ngcontent-%COMP%]   .load-more-section[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:1.5rem 0}.my-order-container[_ngcontent-%COMP%]   .load-more-section[_ngcontent-%COMP%]   .load-more-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.875rem 2rem;background:#5d157c;color:#fff;border:none;border-radius:.75rem;font-weight:600;font-size:.875rem;cursor:pointer;transition:all .2s ease}.my-order-container[_ngcontent-%COMP%]   .load-more-section[_ngcontent-%COMP%]   .load-more-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#3c0e50}.my-order-container[_ngcontent-%COMP%]   .load-more-section[_ngcontent-%COMP%]   .load-more-button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.my-order-container[_ngcontent-%COMP%]   .load-more-section[_ngcontent-%COMP%]   .load-more-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.my-order-container[_ngcontent-%COMP%]   .orders-info[_ngcontent-%COMP%]{text-align:center;margin-top:1rem;padding:1rem}.my-order-container[_ngcontent-%COMP%]   .orders-info[_ngcontent-%COMP%]   .orders-count[_ngcontent-%COMP%]{color:#6b7280;font-size:.875rem;margin:0}.my-order-container[_ngcontent-%COMP%]   .app-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.25rem;padding:1rem;background:#f3f4f6}.my-order-container[_ngcontent-%COMP%]   .app-footer[_ngcontent-%COMP%]   .footer-text[_ngcontent-%COMP%]{font-size:.75rem;color:#6b7280}.my-order-container[_ngcontent-%COMP%]   .app-footer[_ngcontent-%COMP%]   .footer-logo[_ngcontent-%COMP%]{width:1rem;height:1rem;background:#5d157c;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.625rem;font-weight:700}@keyframes _ngcontent-%COMP%_skeleton-loading{0%{background-position:-200% 0}to{background-position:200% 0}}@media (max-width: 768px){.my-order-container[_ngcontent-%COMP%]   .orders-header[_ngcontent-%COMP%]{padding:.75rem 1rem}.my-order-container[_ngcontent-%COMP%]   .orders-header[_ngcontent-%COMP%]   .orders-title[_ngcontent-%COMP%]{font-size:1.125rem}.my-order-container[_ngcontent-%COMP%]   .orders-header[_ngcontent-%COMP%]   .refresh-button[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:.75rem}.my-order-container[_ngcontent-%COMP%]   .skeleton-orders[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-vendor-header[_ngcontent-%COMP%], .my-order-container[_ngcontent-%COMP%]   .load-more-skeleton[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-vendor-header[_ngcontent-%COMP%]{padding:.75rem .75rem .5rem}.my-order-container[_ngcontent-%COMP%]   .skeleton-orders[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-vendor-content[_ngcontent-%COMP%], .my-order-container[_ngcontent-%COMP%]   .load-more-skeleton[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-vendor-content[_ngcontent-%COMP%]{padding:.5rem .75rem .75rem}.my-order-container[_ngcontent-%COMP%]   .skeleton-orders[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-vendor-content[_ngcontent-%COMP%]   .skeleton-product-image[_ngcontent-%COMP%], .my-order-container[_ngcontent-%COMP%]   .load-more-skeleton[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-vendor-content[_ngcontent-%COMP%]   .skeleton-product-image[_ngcontent-%COMP%]{width:3rem;height:3rem}.my-order-container[_ngcontent-%COMP%]   .skeleton-orders[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-vendor-content[_ngcontent-%COMP%]   .skeleton-product-info[_ngcontent-%COMP%]   .skeleton-product-text[_ngcontent-%COMP%], .my-order-container[_ngcontent-%COMP%]   .load-more-skeleton[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-vendor-content[_ngcontent-%COMP%]   .skeleton-product-info[_ngcontent-%COMP%]   .skeleton-product-text[_ngcontent-%COMP%]{width:75%}.my-order-container[_ngcontent-%COMP%]   .skeleton-orders[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-vendor-content[_ngcontent-%COMP%]   .skeleton-payment-button[_ngcontent-%COMP%], .my-order-container[_ngcontent-%COMP%]   .load-more-skeleton[_ngcontent-%COMP%]   .skeleton-order[_ngcontent-%COMP%]   .skeleton-vendor-content[_ngcontent-%COMP%]   .skeleton-payment-button[_ngcontent-%COMP%]{width:3.5rem;height:1.75rem}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]{padding:.75rem}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .vendor-header[_ngcontent-%COMP%]{padding:.75rem .75rem .5rem}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .vendor-header[_ngcontent-%COMP%]   .vendor-name[_ngcontent-%COMP%]   .vendor-title[_ngcontent-%COMP%]{max-width:120px}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .vendor-content[_ngcontent-%COMP%]{padding:.5rem .75rem .75rem}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .vendor-content[_ngcontent-%COMP%]   .product-image-section[_ngcontent-%COMP%]{width:3rem;height:3rem}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .vendor-content[_ngcontent-%COMP%]   .product-info-section[_ngcontent-%COMP%]   .product-description[_ngcontent-%COMP%]   .product-text[_ngcontent-%COMP%], .my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .vendor-content[_ngcontent-%COMP%]   .product-info-section[_ngcontent-%COMP%]   .product-price[_ngcontent-%COMP%]   .price-value[_ngcontent-%COMP%]{font-size:.8125rem}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .vendor-content[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-button[_ngcontent-%COMP%]{padding:.375rem .75rem;font-size:.6875rem}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .order-summary-header[_ngcontent-%COMP%]{padding:.75rem}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .order-summary-header[_ngcontent-%COMP%]   .order-total-amount[_ngcontent-%COMP%]   .total-amount[_ngcontent-%COMP%]{font-size:.875rem}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .summary-section[_ngcontent-%COMP%]{padding:.5rem .75rem}.my-order-container[_ngcontent-%COMP%]   .orders-list[_ngcontent-%COMP%]   .vendor-order-card[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .order-line-items[_ngcontent-%COMP%]{padding:0 .75rem .75rem}.my-order-container[_ngcontent-%COMP%]   .app-footer[_ngcontent-%COMP%]{padding:.75rem}}"]})};var Xe=class n extends be{constructor(e,i){let c=i.getSelectedProviderId(),b={list:I.TRANSACTION.LIST.replace("_PROVIDER_ID_",c.toString()),create:"",update:"",delete:""};super(e,"",b,"transactions");this.authServ=i}getGroupedTransactions(e){let i="",c=Object.entries(e||{}).filter(([p,b])=>b!=null&&b!=="").map(([p,b])=>`${encodeURIComponent(p)}=${encodeURIComponent(b)}`).join("&");return c&&(i=`?${c}`),this.http.get(this.url.list+i)}static \u0275fac=function(i){return new(i||n)(E($),E(y))};static \u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ii=()=>[1,2,3,4];function wi(n,t){n&1&&(r(0,"div",6),m(1,"div",7),r(2,"div",8),m(3,"div",9)(4,"div",10),o(),m(5,"div",11),o())}function ki(n,t){n&1&&(Z(0),u(1,wi,6,0,"div",5),ee()),n&2&&(a(),d("ngForOf",de(1,Ii)))}function Ti(n,t){if(n&1){let e=P();r(0,"div",18)(1,"button",19),v("click",function(){h(e);let c=l().$implicit,p=l(2);return O(p.toggleViewAll(c.key))}),s(2),_(3,"translate"),_(4,"translate"),o()()}if(n&2){let e=l().$implicit,i=l(2);a(2),M(" ",i.expandedDates[e.key]?f(3,1,"transactions.hide"):f(4,3,"transactions.view_all")," ")}}function Ei(n,t){if(n&1&&(r(0,"div",20)(1,"div",21)(2,"i",22),s(3),o()(),r(4,"div",23)(5,"div",24),s(6),_(7,"translate"),o(),r(8,"div",25),s(9),_(10,"titlecase"),o()(),r(11,"div",26),s(12),_(13,"currency"),o()()),n&2){let e=t.$implicit;a(),d("ngClass",e.amount>0?"transaction-icon":"transaction-icon debit"),a(2),M(" ",e.amount>0?"arrow_downward":"arrow_upward"," "),a(3),g(e.description||f(7,7,"transactions.unknown")),a(3),g(f(10,9,e.transaction_type)),a(2),d("ngClass",e.amount>0?"amount-green":"amount-red"),a(),W(" ",e.amount>0?"+":"-","",St(13,11,e.amount,"INR","symbol","1.2-2")," ")}}function Ri(n,t){if(n&1&&(r(0,"div")(1,"div",13)(2,"div",14),s(3),o(),u(4,Ti,5,5,"div",15),o(),r(5,"div",16),u(6,Ei,14,16,"div",17),o()()),n&2){let e=t.$implicit,i=l(2);a(3),g(e.key),a(),d("ngIf",e.value.length>3),a(2),d("ngForOf",i.getVisibleTransactions(e.key,e.value))}}function Fi(n,t){if(n&1&&(Z(0),u(1,Ri,7,3,"div",12),_(2,"keyvalue"),ee()),n&2){let e=l();a(),d("ngForOf",f(2,1,e.groupedTransactions))}}function Di(n,t){n&1&&(r(0,"div",28)(1,"div",29),s(2),_(3,"translate"),o(),r(4,"div",30),s(5),_(6,"translate"),o()()),n&2&&(a(2),g(f(3,2,"transactions.no_transactions_title")),a(3),g(f(6,4,"transactions.no_transactions_desc")))}function Ni(n,t){if(n&1&&u(0,Di,7,6,"div",27),n&2){let e=l();d("ngIf",!e.isLoading)}}var Ze=class n{constructor(t){this.transactionService=t}pageIndex=0;contentPerPage=Bt;total=0;searchTerm="";date_from=null;date_to=null;isLoading=!1;groupedTransactions={};expandedDates={};ngOnInit(){}toggleViewAll(t){this.expandedDates[t]=!this.expandedDates[t]}getVisibleTransactions(t,e){return this.expandedDates[t]?e:e.slice(0,3)}triggerGetData(){this.isLoading=!0;let t={skip:this.pageIndex*this.contentPerPage,limit:this.contentPerPage};this.searchTerm.trim()&&(t.search=this.searchTerm.trim()),this.date_from&&this.date_to&&(t.from_date=this.date_from,t.to_date=this.date_to),this.transactionService.getGroupedTransactions(t).subscribe({next:e=>{this.groupedTransactions=e.transactions,this.total=e.total_count,this.isLoading=!1},error:e=>{console.error("Failed to load transactions:",e),this.groupedTransactions={},this.isLoading=!1}})}onWeekChanged(t){console.log("Week Range:",t.start,"to",t.end);let e=Ct(t.start,"yyyy-MM-dd"),i=Ct(t.end,"yyyy-MM-dd");this.date_from=e,this.date_to=i,this.triggerGetData()}static \u0275fac=function(e){return new(e||n)(C(Xe))};static \u0275cmp=x({type:n,selectors:[["my-transactions"]],decls:7,vars:5,consts:[["noData",""],[3,"weekChanged"],[1,"container","mx-auto","max-w-md","py-4"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["class","animate-pulse flex items-center p-4 bg-white rounded-xl shadow-sm mb-3",4,"ngFor","ngForOf"],[1,"animate-pulse","flex","items-center","p-4","bg-white","rounded-xl","shadow-sm","mb-3"],[1,"w-6","h-6","rounded-full","bg-gray-200"],[1,"ml-4","flex-1","space-y-2"],[1,"h-4","bg-gray-200","rounded","w-3/4"],[1,"h-3","bg-gray-100","rounded","w-1/2"],[1,"w-14","h-4","bg-gray-200","rounded","ml-4"],[4,"ngFor","ngForOf"],[1,"flex","justify-between"],[1,"text-sm","font-semibold","text-purple-900","mb-2","mt-4"],["class","flex justify-end mb-1",4,"ngIf"],[1,"space-y-3"],["class","flex items-center p-4 bg-white rounded-xl shadow-sm card-border",4,"ngFor","ngForOf"],[1,"flex","justify-end","mb-1"],[1,"text-sm","text-purple-900","hover:text-purple-900","font-medium",3,"click"],[1,"flex","items-center","p-4","bg-white","rounded-xl","shadow-sm","card-border"],[3,"ngClass"],[1,"material-icons","rotate-45"],[1,"ml-4","flex-1"],[1,"font-semibold","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"amount-text",3,"ngClass"],["class","text-center py-12 text-gray-500",4,"ngIf"],[1,"text-center","py-12","text-gray-500"],[1,"text-lg","font-medium","mb-2"],[1,"text-sm"]],template:function(e,i){if(e&1){let c=P();r(0,"app-weekly-calendar",1),v("weekChanged",function(b){return h(c),O(i.onWeekChanged(b))}),o(),r(1,"div",2),u(2,ki,2,2,"ng-container",3)(3,Fi,3,3,"ng-container",4),_(4,"keyvalue"),u(5,Ni,1,1,"ng-template",null,0,U),o()}if(e&2){let c=F(6);a(2),d("ngIf",i.isLoading),a(),d("ngIf",!i.isLoading&&i.groupedTransactions&&f(4,3,i.groupedTransactions).length>0)("ngIfElse",c)}},dependencies:[L,k,S,Kt,_e,Et,Tt,z],styles:["[_nghost-%COMP%]{display:block;min-height:100vh;padding:1rem .25rem}.card-border[_ngcontent-%COMP%]{border:1px solid #e3e0e4}.transaction-icon[_ngcontent-%COMP%]{width:25px;height:25px;display:flex;justify-content:center;align-items:center;border-radius:9999px;border:2px solid #075822;background-color:#e6f5ec}.transaction-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#075822;font-size:18px;transition:transform .2s ease}.transaction-icon[_ngcontent-%COMP%]   i.rotate-45[_ngcontent-%COMP%]{transform:rotate(-45deg)}.transaction-icon.debit[_ngcontent-%COMP%]{border-color:#ef4444;background-color:#fee2e2}.transaction-icon.debit[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ef4444}.amount-text[_ngcontent-%COMP%]{font-weight:700;font-size:.875rem;text-align:right;min-width:70px}.amount-green[_ngcontent-%COMP%]{color:#075822}.amount-red[_ngcontent-%COMP%]{color:#ef4444}"]})};function Ai(n,t){n&1&&(Z(0),m(1,"app-recents")(2,"app-favorites")(3,"app-recommends")(4,"app-offers-nearby"),ee())}function Ui(n,t){n&1&&m(0,"my-subscriptions")}function Bi(n,t){n&1&&m(0,"my-ids")}function $i(n,t){n&1&&m(0,"my-transactions")}function Gi(n,t){n&1&&m(0,"my-orders")}var et=class n{constructor(t,e,i,c){this._customerService=t;this._webviewService=e;this._commonService=i;this._auth=c}viewMode="view";messageFromReactNative="";homeViewContent=ut.HOME;homeTAB_LIST=ut;homeSlides=Array.from({length:5},(t,e)=>({id:e+1,src:`./assets/images/banner/banner_${e+1}.png`,title:`bannerBanner ${e+1}`,subtitle:"Some subtitle here"}));ngOnInit(){this._webviewService.passActionToRN({action:mn.ACTIONS.showHeader,value:!0}),this.viewMode=this._customerService.customerViewMode,this._commonService.hasInitialRecord.subscribe(t=>{console.log("custoner.oniniti"),console.log("user_id ",this._auth.getUserId()),console.log("hasRecord ",t),t&&this.fetchDashboardData()})}_bottomSheet=ht(Wt);nextTrigger(t){}previousTrigger(t){}fetchDashboardData(){try{console.log("fetchDashboardData111"),this._customerService.getCustomerDashboardData().subscribe({next:t=>{this._customerService.recents=t.recents,this._customerService.favorites=t.favorites},error:t=>{}})}catch{}}changeHomeContentView(t){this.homeViewContent=t}static \u0275fac=function(e){return new(e||n)(C(G),C(ve),C(ze),C(y))};static \u0275cmp=x({type:n,selectors:[["app-customers"]],decls:9,vars:8,consts:[[1,"custom-search-container","m-4",3,"appSwiper","previous"],[3,"slides"],[3,"onMenuTabChange"],[4,"ngIf"]],template:function(e,i){e&1&&(m(0,"app-search-bar"),r(1,"div",0),m(2,"app-ad-viwer",1),r(3,"app-menu-tabs",2),v("onMenuTabChange",function(p){return i.changeHomeContentView(p)}),o(),u(4,Ai,5,0,"ng-container",3)(5,Ui,1,0,"my-subscriptions",3)(6,Bi,1,0,"my-ids",3)(7,$i,1,0,"my-transactions",3)(8,Gi,1,0,"my-orders",3),o()),e&2&&(a(),d("appSwiper",i.nextTrigger.bind(i))("previous",i.previousTrigger.bind(i)),a(),d("slides",i.homeSlides),a(2),d("ngIf",i.homeViewContent===i.homeTAB_LIST.HOME),a(),d("ngIf",i.homeViewContent===i.homeTAB_LIST.My_SUBSCRIPTIONS),a(),d("ngIf",i.homeViewContent===i.homeTAB_LIST.My_IDS),a(),d("ngIf",i.homeViewContent===i.homeTAB_LIST.My_TRANSACTION),a(),d("ngIf",i.homeViewContent===i.homeTAB_LIST.My_ORDERS))},dependencies:[S,Ue,Xt,Be,Zt,en,tn,$e,Ke,He,Je,Qe,Ze],styles:[".custom-search-container[_ngcontent-%COMP%]{margin-top:.3rem}"]})};var Oe=pt(ft());function qi(n,t){if(n&1&&(r(0,"div",13)(1,"span"),s(2,"Verified:"),o(),r(3,"span"),s(4),_(5,"date"),o()()),n&2){let e=l().$implicit;a(4),g(re(5,1,e.verified_at,"medium"))}}function Hi(n,t){if(n&1&&(r(0,"div",8)(1,"div",9)(2,"div",10),s(3,"KYC Submission"),o(),r(4,"div",11),s(5),o()(),r(6,"div",12)(7,"div",13)(8,"span"),s(9,"Name:"),o(),r(10,"span"),s(11),o()(),r(12,"div",13)(13,"span"),s(14,"Business:"),o(),r(15,"span"),s(16),o()(),r(17,"div",13)(18,"span"),s(19,"Submitted:"),o(),r(20,"span"),s(21),_(22,"date"),o()(),u(23,qi,6,4,"div",14),o()()),n&2){let e=t.$implicit,i=l(2);a(4),d("ngClass",i.getStatusClass(e.status)),a(),g(e.status),a(6),g(e.contact_name),a(5),g(e.business_name),a(5),g(re(22,6,e.submitted_at,"medium")),a(2),d("ngIf",e.verified_at)}}function Yi(n,t){if(n&1&&(r(0,"div",6),u(1,Hi,24,9,"div",7),o()),n&2){let e=l();a(),d("ngForOf",e.kycSubmissions)}}function Wi(n,t){if(n&1){let e=P();r(0,"button",18),v("click",function(c){return h(e),l(2).toggleForm(),c.preventDefault(),O(c.stopPropagation())}),s(1," Submit New KYC "),o()}}function Ji(n,t){if(n&1){let e=P();r(0,"button",19),v("click",function(){h(e);let c=l(2);return O(c.goToOneTown())}),s(1,"One town "),m(2,"i",20),o()}}function Qi(n,t){if(n&1&&(r(0,"div",15),u(1,Wi,2,0,"button",16)(2,Ji,3,0,"button",17),o()),n&2){let e=l();a(),d("ngIf",!e.showForm),a(),d("ngIf",e.hasKYC)}}function Xi(n,t){if(n&1){let e=P();r(0,"form",21),v("ngSubmit",function(){h(e);let c=l();return O(c.onSubmit())}),r(1,"div",22)(2,"span",23),s(3,"KYC "),o()(),r(4,"div",24)(5,"label",25),s(6),_(7,"translate"),o(),m(8,"input",26),_(9,"translate"),o(),r(10,"div",24)(11,"label",27),s(12),_(13,"translate"),o(),m(14,"input",28),_(15,"translate"),o(),r(16,"div",24)(17,"label",29),s(18),_(19,"translate"),o(),m(20,"input",30),_(21,"translate"),o(),r(22,"div",24)(23,"label",31),s(24),_(25,"translate"),o(),m(26,"input",32),_(27,"translate"),o(),r(28,"div",24)(29,"label",33),s(30),_(31,"translate"),o(),m(32,"p-dropdown",34),_(33,"translate"),o(),r(34,"div",24)(35,"label",35),s(36),_(37,"translate"),o(),m(38,"input",36),_(39,"translate"),o(),r(40,"div",24)(41,"label",37),s(42),_(43,"translate"),o(),m(44,"input",38),_(45,"translate"),o(),r(46,"div",39),v("click",function(){h(e);let c=l();return O(c.getLocation())}),m(47,"i",40),r(48,"span"),s(49),_(50,"translate"),o()(),r(51,"div",41)(52,"button",42),s(53,"Submit"),o(),r(54,"button",43),v("click",function(c){return h(e),l().toggleForm(),c.preventDefault(),O(c.stopPropagation())}),s(55,"Cancel"),o()()()}if(n&2){let e=l();d("formGroup",e.kycForm),a(6),g(f(7,18,"kyc.name")),a(2),d("placeholder",f(9,20,"kycPlaceholders.name_example")),a(4),g(f(13,22,"kyc.business_name")),a(2),d("placeholder",f(15,24,"kycPlaceholders.business_example")),a(4),g(f(19,26,"kyc.phone_number")),a(2),d("placeholder",f(21,28,"kycPlaceholders.phone_example")),a(4),g(f(25,30,"kyc.alt_number")),a(2),d("placeholder",f(27,32,"kycPlaceholders.alt_phone_example")),a(4),g(f(31,34,"kyc.types_of_business")),a(2),Y("placeholder",f(33,36,"kyc.select")),d("options",e.businessTypes),a(4),g(f(37,38,"kyc.address_line")),a(2),d("placeholder",f(39,40,"kycPlaceholders.address_example")),a(4),g(f(43,42,"kyc.district_city")),a(2),d("placeholder",f(45,44,"kycPlaceholders.address_example")),a(5),M("",f(50,46,"kyc.click_to_detect")," "),a(3),d("disabled",!e.kycForm.valid)}}var tt=class n{constructor(t,e,i,c,p,b,R){this.fb=t;this.router=e;this.auth=i;this._webviewService=c;this._customerService=p;this.translate=b;this.cdr=R;this.kycForm=this.fb.group({contact_name:["",D.required],business_name:["",D.required],business_type:["",D.required],phone_number:["",D.required],alt_number:["",D.required],address_line_1:["",D.required],address_line_2:["",D.required],latitude:["",D.required],longitude:["",D.required]})}kycForm;businessTypes=[];hasKYC=!1;isVerified=!0;kycProgress=[];activeKycStatus=0;showForm=!1;kycSubmissions=[];isLoading=!0;kycSlides=Array.from({length:3},(t,e)=>({id:e+1,src:`./assets/images/kyc/banner_${e+1}.png`,title:`KYC Banner ${e+1}`,subtitle:"Some subtitle here"}));ngOnInit(){this.loadBusinessTypes(),this.getKYC(),this.translate.onLangChange.subscribe(t=>{console.log("[KycProcessComponent] Language changed to:",this.translate.currentLang),console.log("[KycProcessComponent] Language changed:",t.lang),this.loadBusinessTypes(),this.cdr.detectChanges()}),this._customerService.kycLocation.subscribe(t=>{this.kycForm.get("latitude")?.setValue(t.lat_lon.latitude),this.kycForm.get("longitude")?.setValue(t.lat_lon.longitude),this.kycForm.get("address_line_2")?.setValue(t.address.city)})}loadBusinessTypes(){this.businessTypes=[this.translate.instant("kyc.business_types.product_selling"),this.translate.instant("kyc.business_types.service"),this.translate.instant("kyc.business_types.others")]}getKYC(){this._customerService.getKYCbyUser(this.auth.getUserId()).subscribe(t=>{let c=(b=>b?Array.isArray(b)?b:[b]:[])(t).filter(b=>b&&typeof b.status=="string"&&b.kyc_id);if(this.kycSubmissions=c.sort((b,R)=>new Date(b.submitted_at).getTime()-new Date(R.submitted_at).getTime()),this.kycSubmissions.length===0){this.hasKYC=!1,this.isVerified=!1,this.kycProgress=[],this.activeKycStatus=0,this.openNewForm(),this.isLoading=!1;return}let p=this.kycSubmissions.length?this.kycSubmissions[this.kycSubmissions.length-1]:void 0;this.hasKYC=this.kycSubmissions.length>0,this.isVerified=this.kycSubmissions.some(b=>(b.status||"").toLowerCase()==="Verified".toLowerCase()),p&&typeof p.status=="string"&&(this.activeKycStatus=Object.keys(Le).findIndex(b=>b.toLowerCase()===p.status.toLowerCase()),this.showProgressBar(p)),this.showForm=!1,this.isLoading=!1},t=>{this.isLoading=!1})}fillForm(t){Object.keys(this.kycForm.controls).forEach(e=>{let i=this.kycForm.get(e),c=t[e];i&&c&&(i.setValue(c),i.disable())})}showProgressBar(t){let e=Object.keys(Le).findIndex(i=>i==="Rejected");this.kycProgress=[{label:"Submitted",completed:!0},{label:"Pending",completed:!0},{label:this.activeKycStatus===e?"Rejected":"Verified",completed:t.status==="Verified",rejected:t.status==="Rejected"}]}onSubmit(){if(this.kycForm.valid){let t=this.kycForm.value;t.phone_number=t.phone_number.toString(),t.alt_number=t.alt_number.toString();let e=this.auth.getUserId(),i=ie(ne({},t),{user_id:e,status:"Pending"});console.log(JSON.stringify(i));try{this._customerService.submitKYC(i).subscribe({next:c=>{console.log(JSON.stringify(c));let p=c||null;p?(this.kycSubmissions=[...this.kycSubmissions,p],this.hasKYC=this.kycSubmissions.length>0,this.isVerified=this.kycSubmissions.some(b=>(b.status||"").toLowerCase()==="Verified".toLowerCase()),this.activeKycStatus=Object.keys(Le).findIndex(b=>b.toLowerCase()===p.status.toLowerCase()),this.openNewForm()):this.getKYC()},error:c=>{console.log(JSON.stringify(c)),console.log(JSON.stringify(c.message))},complete:()=>console.log("Completed")})}catch(c){console.log(c.message)}}}getLocation(){this.hasKYC||this._webviewService.passActionToRN({action:Oe.ACTIONS.mapView,value:Oe.MapViewAction.AddressMap,mapPage:Oe.MapPage.KYC})}goToOneTown(){let t={providerId:this.auth.oneTownProviderId};console.log("Fadsf"),this.router.navigate(["customers","info"],{state:t})}startNewForm(){this.openNewForm()}getStatusClass(t){let e=(t||"").toLowerCase();return e==="Verified".toLowerCase()?"verified":e==="Pending".toLowerCase()?"pending":e==="Rejected".toLowerCase()?"rejected":"submitted"}openNewForm(){this.showForm=!0,Object.keys(this.kycForm.controls).forEach(t=>{let e=this.kycForm.get(t);e&&(e.enable(),e.reset(""))})}closeFormAndRestoreLatest(){let t=this.kycSubmissions.length?this.kycSubmissions[this.kycSubmissions.length-1]:void 0;t&&(this.fillForm(t),this.showProgressBar(t),this.hasKYC=!0,this.isVerified=t.status==="Verified"),this.showForm=!1}toggleForm(){this.isLoading||(this.showForm?this.closeFormAndRestoreLatest():this.openNewForm())}static \u0275fac=function(e){return new(e||n)(C(je),C(T),C(y),C(ve),C(G),C(B),C(J))};static \u0275cmp=x({type:n,selectors:[["app-kyc-process"]],decls:6,vars:4,consts:[[1,"kyc-form-container"],[1,"kyc-header"],[1,"slides-container",3,"slides"],["class","kyc-cards",4,"ngIf"],["class","button-container",4,"ngIf"],["class","kyc-form",3,"formGroup","ngSubmit",4,"ngIf"],[1,"kyc-cards"],["class","kyc-card",4,"ngFor","ngForOf"],[1,"kyc-card"],[1,"kyc-card-header"],[1,"kyc-title"],[1,"kyc-status",3,"ngClass"],[1,"kyc-card-body"],[1,"kyc-row"],["class","kyc-row",4,"ngIf"],[1,"button-container"],["type","button","class","new-submit-link",3,"click",4,"ngIf"],["class","href-link href",3,"click",4,"ngIf"],["type","button",1,"new-submit-link",3,"click"],[1,"href-link","href",3,"click"],[1,"pi","pi-external-link"],[1,"kyc-form",3,"ngSubmit","formGroup"],[1,"form-title"],[1,"pre-kyc"],[1,"form-field"],["for","name"],["id","name","type","text","formControlName","contact_name",3,"placeholder"],["for","businessName"],["id","businessName","type","text","formControlName","business_name",3,"placeholder"],["for","phone_number"],["id","phone_number","type","number","formControlName","phone_number",3,"placeholder"],["for","alt_number"],["id","alt_number","type","number","formControlName","alt_number",3,"placeholder"],["for","businessType"],["id","businessType","formControlName","business_type",3,"options","placeholder"],["for","address"],["id","address","type","text","formControlName","address_line_1",3,"placeholder"],["for","location"],["id","location","readonly","","type","text","formControlName","address_line_2",3,"placeholder"],[1,"location-detected",3,"click"],[1,"map-pin-icon"],[1,"form-actions"],["type","submit",1,"submit-button",3,"disabled"],["type","button",1,"cancel-button",3,"click"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1),m(2,"app-ad-viwer",2),o(),u(3,Yi,2,1,"div",3)(4,Qi,3,2,"div",4)(5,Xi,56,48,"form",5),o()),e&2&&(a(2),d("slides",i.kycSlides),a(),d("ngIf",!i.isLoading&&i.kycSubmissions.length>0),a(),d("ngIf",!i.isLoading),a(),d("ngIf",i.showForm&&!i.isLoading))},dependencies:[L,k,S,Ve,Re,fe,Fe,Ce,Ee,Be,De,Ne,ue,z],styles:['.kyc-form-container[_ngcontent-%COMP%]{--content-max-width: clamp(18rem, 92vw, 35rem);max-width:clamp(20rem,92vw,60rem);margin-left:auto;margin-right:auto;background:#fff;border-radius:12px;box-shadow:0 .25rem .75rem #0000001a;margin-bottom:0;overflow-y:auto;overflow-x:hidden;position:relative;min-height:100vh;padding-bottom:clamp(3.5rem,9vh,6rem)}.kyc-form-container[_ngcontent-%COMP%]   .href-link.href[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:clamp(.375rem,2.2vw,.625rem);margin:.5rem auto;padding:clamp(.5rem,2.5vw,.75rem) clamp(.75rem,5vw,1.25rem);background:#5d157c;color:#fff;text-decoration:none;border-radius:1.25rem;font-weight:500;font-size:clamp(.75rem,3.5vw,.875rem);transition:all .3s ease}.kyc-form-container[_ngcontent-%COMP%]   .href-link.href[_ngcontent-%COMP%]:hover{background:#4a1d96;transform:translateY(-1px)}.kyc-form-container[_ngcontent-%COMP%]   .href-link.href[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:clamp(.75rem,3vw,.875rem);transition:transform .3s ease}.kyc-form-container[_ngcontent-%COMP%]   .href-link.href[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:translate(.125rem)}.kyc-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:.75rem;padding:0 .75rem 1rem;max-width:var(--content-max-width);margin-left:auto;margin-right:auto}.kyc-card[_ngcontent-%COMP%]{background:#fff;border-radius:.5rem;border:.0625rem solid #e5e7eb;box-shadow:0 .0625rem .125rem #0000000d;padding:.75rem}.kyc-card-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:.5rem}.kyc-title[_ngcontent-%COMP%]{font-weight:600}.kyc-status[_ngcontent-%COMP%]{font-size:.75rem;padding:.125rem .5rem;border-radius:999px;border:.0625rem solid transparent}.kyc-status.pending[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e;border-color:#f59e0b}.kyc-status.verified[_ngcontent-%COMP%]{background:#dcfce7;color:#065f46;border-color:#22c55e}.kyc-status.submitted[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af;border-color:#3b82f6}.kyc-status.rejected[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b;border-color:#ef4444}.kyc-card-body[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:6px}.kyc-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;font-size:.875rem}.kyc-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{color:#6b7280}.new-submit-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:clamp(.375rem,2.2vw,.625rem);margin:.5rem auto;padding:clamp(.5rem,2.5vw,.75rem) clamp(.75rem,5vw,1.25rem);background:#5d157c;color:#fff;text-decoration:none;border-radius:1.25rem;font-weight:500;font-size:clamp(.75rem,3.5vw,.875rem);transition:all .3s ease}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:clamp(.5rem,3vw,.75rem) clamp(.5rem,4vw,1rem);gap:clamp(.5rem,4vw,.75rem);flex-wrap:wrap;max-width:var(--content-max-width);width:100%;margin-left:auto;margin-right:auto}.button-container[_ngcontent-%COMP%] > .new-submit-link[_ngcontent-%COMP%], .button-container[_ngcontent-%COMP%] > .href-link.href[_ngcontent-%COMP%]{flex:1 1 auto;min-width:7.5rem;margin:0;min-height:clamp(2.25rem,7vw,2.5rem)}.kyc-header[_ngcontent-%COMP%]{position:relative;height:clamp(10rem,28vh,16.25rem);overflow:hidden;background:#fff;display:flex;flex-direction:column}.kyc-header[_ngcontent-%COMP%]   app-ad-viwer[_ngcontent-%COMP%]{display:flex;padding:clamp(.5rem,2vw,.75rem) clamp(.75rem,3vw,1rem) clamp(1rem,3vw,1.25rem) clamp(.75rem,3vw,1rem);overflow:visible}.header-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.header-text[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;color:#fff;padding:1.25rem 1.5rem .75rem;text-align:center;background:#0000004d;backdrop-filter:blur(.5rem);margin:0;flex-shrink:0;text-shadow:0 .25rem .5rem rgba(0,0,0,.5);letter-spacing:.125rem;text-transform:uppercase;position:relative}.header-text[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:.5rem;left:50%;transform:translate(-50%);width:5rem;height:.1875rem;background:linear-gradient(90deg,#e9a213,#ffb84d);border-radius:2px}.kyc-form[_ngcontent-%COMP%]{--field-max-width: var(--content-max-width);max-width:var(--content-max-width);margin-left:auto;margin-right:auto;padding:clamp(1rem,3.5vw,1.5rem) clamp(1rem,4vw,1.25rem);background:#fff;margin-top:8px}.form-title[_ngcontent-%COMP%]{margin-bottom:clamp(16px,4vw,32px);text-align:center;padding:clamp(.75rem,3vw,1.5rem);background:#f9f2fd;border-radius:16px;border:.0625rem solid #e2e8f0;box-shadow:0 .5rem 1.5rem #5d157c1f;position:relative;overflow:hidden}.form-title[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:clamp(.125rem,.6vw,.25rem);background:#5d157c}.form-title[_ngcontent-%COMP%]   .pre-kyc[_ngcontent-%COMP%]{font-size:clamp(1.125rem,3.2vw,1.5rem);font-weight:700;color:#5d157c;display:block;margin-bottom:clamp(.375rem,1.2vw,.5rem);position:relative}.form-title[_ngcontent-%COMP%]   .pre-kyc[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:clamp(-.375rem,-.8vw,-.25rem);left:50%;transform:translate(-50%);width:clamp(2.5rem,10vw,5rem);height:clamp(.125rem,.6vw,.1875rem);background:#e9a213;border-radius:2px}.business-provider[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#f97316;display:block}.form-field[_ngcontent-%COMP%]{font-size:.875rem;color:#5d157c;display:flex;flex-direction:column;margin-top:.5rem;margin-bottom:clamp(12px,3vw,20px);position:relative;max-width:var(--field-max-width);width:100%;margin-left:auto;margin-right:auto}.form-field[_ngcontent-%COMP%]:last-of-type{margin-bottom:clamp(1rem,3.5vw,1.5rem)}.form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:clamp(.125rem,.8vw,.375rem);color:#4f126a;font-size:clamp(.75rem,2.6vw,.875rem)}.form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:after{content:" *";color:#ef4444}.form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:#f9f2fd;height:clamp(2.5rem,6vh,3rem);border-radius:3.125rem;padding-left:1rem;width:100%;max-width:var(--field-max-width);border:none;font-size:clamp(.875rem,2.8vw,1rem);color:#4f126a;transition:all .3s ease}.form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{border:.0625rem solid #5D157C;outline:0;background:#fff}.form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#9ca3af;font-weight:400}.form-field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-field[_ngcontent-%COMP%]     .p-dropdown{background:#f9f2fd;height:clamp(2.5rem,6vh,3rem);border-radius:3.125rem;width:100%;max-width:var(--field-max-width);border:none;font-size:clamp(.875rem,2.8vw,1rem);color:#4f126a;transition:all .3s ease;cursor:pointer;display:flex;align-items:center}.form-field[_ngcontent-%COMP%]     .p-dropdown .p-dropdown-label{background:transparent;padding:0 1rem;height:100%;line-height:clamp(2.5rem,6vh,3rem)}.form-field[_ngcontent-%COMP%]     .p-dropdown.p-focus .p-dropdown-label{border:.0625rem solid #5D157C;outline:0;background:#fff}.form-field[_ngcontent-%COMP%]     .p-dropdown .p-dropdown-trigger{height:100%;width:clamp(2.25rem,6vh,2.75rem);border-top-right-radius:50px;border-bottom-right-radius:50px;background:transparent;color:#5d157c}.form-field[_ngcontent-%COMP%]     .p-dropdown .p-dropdown-trigger .p-dropdown-trigger-icon{color:#5d157c}.form-field[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;font-size:12px;margin-top:4px}  .p-dropdown{width:100%}  .p-dropdown .p-dropdown-label{background:#f9f2fd;height:2.25rem;border-radius:50px;padding-left:1rem;border:none;font-size:.875rem;color:#4f126a;transition:all .3s ease}  .p-dropdown .p-dropdown-label:focus{border:1px solid #5D157C;outline:0;background:#fff}  .p-dropdown .p-dropdown-trigger{color:#5d157c;width:2.5rem}  .p-dropdown .p-dropdown-panel{border-radius:8px;box-shadow:0 4px 12px #0000001a;border:1px solid #e2e8f0}  .p-dropdown .p-dropdown-items .p-dropdown-item{padding:10px 16px;border-radius:4px;margin:2px 4px}  .p-dropdown .p-dropdown-items .p-dropdown-item:hover{background-color:#f3f4f6}  .p-dropdown .p-dropdown-items .p-dropdown-item.p-highlight{background-color:#5d157c;color:#fff}.location-detected[_ngcontent-%COMP%]{display:flex;align-items:center;padding:clamp(.75rem,2.8vw,1rem);background-color:#f9f2fd;border:.0625rem solid #e2e8f0;border-radius:.625rem;margin-bottom:clamp(.75rem,3vw,1.25rem);font-weight:600;color:#5d157c;cursor:pointer;transition:all .3s ease}.location-detected[_ngcontent-%COMP%]:hover{background-color:#f1f5f9;border-color:#5d157c;transform:translateY(-1px)}.map-pin-icon[_ngcontent-%COMP%]{margin-right:8px;color:#5d157c;font-size:clamp(.875rem,2.6vw,1rem)}.submit-button[_ngcontent-%COMP%]{width:100%;max-width:var(--content-max-width);padding:clamp(.5rem,2vw,.75rem) clamp(.875rem,2.8vw,1.125rem);background:linear-gradient(135deg,#5d157c,#8b5fbf);color:#fff;border:none;border-radius:12px;font-size:clamp(.8125rem,2.2vw,.9375rem);font-weight:700;cursor:pointer;transition:all .3s ease;box-shadow:0 .25rem .75rem #5d157c4d;text-transform:uppercase;letter-spacing:.5px}.submit-button[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#4a1d96,#7c4dbf);transform:translateY(-3px);box-shadow:0 8px 20px #5d157c66}.submit-button[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(-1px)}.submit-button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;box-shadow:0 2px 6px #5d157c33;transform:none}.form-actions[_ngcontent-%COMP%]{display:flex;gap:clamp(.5rem,3vw,.75rem);align-items:stretch;justify-content:space-between;max-width:var(--content-max-width);margin-left:auto;margin-right:auto}.form-actions[_ngcontent-%COMP%]   .submit-button[_ngcontent-%COMP%]{flex:1 1 0;width:auto;order:2}.cancel-button[_ngcontent-%COMP%]{flex:1 1 0;width:auto;padding:clamp(.5rem,2vw,.75rem) clamp(.875rem,2.8vw,1.125rem);background:#fff;color:#5d157c;border:.125rem solid rgba(93,21,124,.35);border-radius:12px;font-size:clamp(.8125rem,2.2vw,.9375rem);font-weight:700;cursor:pointer;transition:all .3s ease;text-transform:uppercase;letter-spacing:.5px;order:1}.cancel-button[_ngcontent-%COMP%]:hover{background:#f9f2fd;box-shadow:0 .25rem .75rem #5d157c26;transform:translateY(-2px)}.cancel-button[_ngcontent-%COMP%]:active{transform:translateY(-1px)}  .p-steps{padding:24px;background:#f8fafc;border-bottom:1px solid #e2e8f0;margin:0}  .p-steps .p-steps-item .p-steps-number{width:36px;height:36px;border-radius:50%;background:#e5e7eb;color:#6b7280;font-weight:600;font-size:14px;display:flex;align-items:center;justify-content:center;transition:all .3s ease}  .p-steps .p-steps-item.p-highlight .p-steps-number{background-color:#28a745;color:#fff;box-shadow:0 2px 8px #28a7454d}  .p-steps .p-steps-item .p-steps-title{font-weight:500;color:#374151;margin-top:6px;font-size:12px}  .p-steps .p-steps-item.p-highlight .p-steps-title{color:#28a745;font-weight:600}']})};var nt=class n{constructor(t){this.fb=t;this.registrationForm=this.fb.group({name:["",D.required],gender:["",D.required],age:["",[D.required,D.min(1)]],startDate:["",D.required]})}registrationForm;ngOnInit(){}onSubmit(){this.registrationForm?.valid&&console.log(this.registrationForm.value)}static \u0275fac=function(e){return new(e||n)(C(je))};static \u0275cmp=x({type:n,selectors:[["app-class-registration"]],decls:53,vars:2,consts:[[1,"registration-container"],[1,"header-image"],["src","assets/silambat-practice.jpg","alt","Silambat Practice"],["href","#",1,"back-button"],[1,"fas","fa-chevron-left"],[1,"like-button"],[1,"far","fa-heart"],[1,"title-stats"],[1,"stats"],[1,"stat"],[1,"fas","fa-share"],[1,"fas","fa-star"],["href","#",1,"active"],["href","#"],[1,"registration-form"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","text","formControlName","name","placeholder","Name"],["formControlName","gender"],["value","","disabled","","selected",""],["value","male"],["value","female"],["value","other"],["type","number","formControlName","age","placeholder","Age"],["type","date","formControlName","startDate","placeholder","Subscription Start Date"],["type","submit",3,"disabled"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1),m(2,"img",2),r(3,"a",3),m(4,"i",4),o(),r(5,"button",5),m(6,"i",6),o()(),r(7,"div",7)(8,"h1"),s(9,"Shanmuga Silambat."),o(),r(10,"div",8)(11,"div",9)(12,"span"),s(13,"231"),o(),r(14,"span"),s(15,"Like"),o()(),r(16,"div",9),m(17,"i",10),r(18,"span"),s(19,"Share"),o()(),r(20,"div",9),m(21,"i",11),r(22,"span"),s(23,"4.5 rated"),o()()()(),r(24,"nav")(25,"a",12),s(26,"Explore"),o(),r(27,"a",13),s(28,"About Us"),o(),r(29,"a",13),s(30,"Contact Us"),o()(),r(31,"div",14)(32,"h2"),s(33,"Registration"),o(),r(34,"form",15),v("ngSubmit",function(){return i.onSubmit()}),r(35,"div",16),m(36,"input",17),o(),r(37,"div",16)(38,"select",18)(39,"option",19),s(40,"Gender"),o(),r(41,"option",20),s(42,"Male"),o(),r(43,"option",21),s(44,"Female"),o(),r(45,"option",22),s(46,"Other"),o()()(),r(47,"div",16),m(48,"input",23),o(),r(49,"div",16),m(50,"input",24),o(),r(51,"button",25),s(52,"Proceed"),o()()()()),e&2&&(a(34),d("formGroup",i.registrationForm),a(17),d("disabled",!i.registrationForm.valid))},dependencies:[Re,Lt,zt,fe,Fe,jt,Ce,Ee,De,Ne],styles:[".registration-container[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;background-color:#fff;min-height:100vh}.header-image[_ngcontent-%COMP%]{position:relative;height:192px;overflow:hidden}.header-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.back-button[_ngcontent-%COMP%], .like-button[_ngcontent-%COMP%]{position:absolute;background:none;border:none;color:#fff;font-size:1.5rem}.back-button[_ngcontent-%COMP%]{top:1rem;left:1rem}.like-button[_ngcontent-%COMP%]{bottom:1rem;right:1rem}.title-stats[_ngcontent-%COMP%]{padding:1rem;border-bottom:1px solid #e5e7eb}.title-stats[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin-bottom:.75rem}.stats[_ngcontent-%COMP%]{display:flex;gap:1rem;font-size:.875rem;color:#6b7280}.stat[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem}nav[_ngcontent-%COMP%]{display:flex;gap:1.5rem;padding:1rem;border-bottom:1px solid #e5e7eb;font-size:.875rem}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#6b7280}nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:#7c3aed;font-weight:500}.registration-form[_ngcontent-%COMP%]{padding:1rem}.registration-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#7c3aed;margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #d1d5db;border-radius:.375rem;background-color:#f3e8ff}button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.75rem;background-color:#7c3aed;color:#fff;border:none;border-radius:.375rem;font-weight:500;cursor:pointer}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#6d28d9}button[type=submit][_ngcontent-%COMP%]:disabled{background-color:#9ca3af;cursor:not-allowed}"]})};var gn=pt(ft());var _n=n=>({active:n}),Zi=n=>({selected:n}),ae=n=>({$implicit:n});function eo(n,t){if(n&1&&m(0,"i",22),n&2){let e=l().$implicit;se("background-image","url("+e.image_url+")")}}function to(n,t){n&1&&m(0,"i",23)}function no(n,t){if(n&1){let e=P();r(0,"span",16),v("click",function(){let c=h(e).$implicit,p=l(2);return O(p.onCategorySelect(c))}),r(1,"div",17),u(2,eo,1,2,"i",21)(3,to,1,0,"ng-template",null,4,U),o(),r(5,"div",19),s(6),o()()}if(n&2){let e=t.$implicit,i=F(4),c=l(2);d("ngClass",N(4,_n,c.activeCategory&&e.provider_category_id===c.activeCategory.provider_category_id)),a(2),d("ngIf",e.validImage)("ngIfElse",i),a(4),g(e.name)}}function io(n,t){if(n&1){let e=P();r(0,"div",15)(1,"span",16),v("click",function(){h(e);let c=l();return O(c.onCategorySelect("All"))}),r(2,"div",17),m(3,"i",18),o(),r(4,"div",19),s(5,"Discovery"),o()(),u(6,no,7,6,"span",20),o()}if(n&2){let e=l();a(),d("ngClass",N(2,_n,!e.activeCategory)),a(5),d("ngForOf",e.categories)}}function oo(n,t){n&1&&(r(0,"span",24)(1,"div",17),m(2,"div",26),o()())}function ro(n,t){if(n&1&&(r(0,"div",15)(1,"span",24)(2,"div",17),m(3,"i",18),o(),r(4,"div",19),s(5,"Discovery"),o()(),u(6,oo,3,0,"span",25),o()),n&2){let e=l();a(6),d("ngForOf",e.placeholderCategories)}}function ao(n,t){if(n&1){let e=P();r(0,"span",27),v("click",function(){let c=h(e).$implicit,p=l();return O(p.subcategorySelected(c.category))}),s(1),o()}if(n&2){let e=t.$implicit;d("ngClass",N(2,Zi,e.selected)),a(),g(e.category)}}function co(n,t){n&1&&te(0)}function so(n,t){n&1&&te(0)}function lo(n,t){n&1&&te(0)}function mo(n,t){if(n&1&&(Z(0),u(1,co,1,0,"ng-container",30)(2,so,1,0,"ng-container",30)(3,lo,1,0,"ng-container",30),ee()),n&2){let e=l().$implicit;l();let i=F(12),c=F(14),p=F(18);a(),d("ngTemplateOutlet",p)("ngTemplateOutletContext",N(6,ae,e)),a(),d("ngTemplateOutlet",c)("ngTemplateOutletContext",N(8,ae,e)),a(),d("ngTemplateOutlet",i)("ngTemplateOutletContext",N(10,ae,e))}}function po(n,t){n&1&&te(0)}function go(n,t){n&1&&te(0)}function _o(n,t){if(n&1&&(Z(0),u(1,po,1,0,"ng-container",30),r(2,"div",31)(3,"div",32),s(4),o(),r(5,"div",33),s(6),o(),r(7,"div",34)(8,"span",35),s(9," storefront "),o(),r(10,"span",36),s(11),o()()(),u(12,go,1,0,"ng-container",30),ee()),n&2){let e=l().$implicit;l();let i=F(12),c=F(16);a(),d("ngTemplateOutlet",c)("ngTemplateOutletContext",N(7,ae,e)),a(3),g(e.title1),a(2),g(e.title2),a(5),g(e.provider_name),a(),d("ngTemplateOutlet",i)("ngTemplateOutletContext",N(9,ae,e))}}function uo(n,t){n&1&&te(0)}function fo(n,t){n&1&&te(0)}function Co(n,t){n&1&&te(0)}function vo(n,t){if(n&1&&(Z(0),u(1,uo,1,0,"ng-container",30)(2,fo,1,0,"ng-container",30)(3,Co,1,0,"ng-container",30),ee()),n&2){let e=l().$implicit;l();let i=F(12),c=F(14),p=F(16);a(),d("ngTemplateOutlet",p)("ngTemplateOutletContext",N(6,ae,e)),a(),d("ngTemplateOutlet",c)("ngTemplateOutletContext",N(8,ae,e)),a(),d("ngTemplateOutlet",i)("ngTemplateOutletContext",N(10,ae,e))}}function bo(n,t){if(n&1){let e=P();r(0,"div",28),v("click",function(){let c=h(e).$implicit,p=l();return O(p.cardClicked(c))}),u(1,mo,4,12,"ng-container",29)(2,_o,13,11,"ng-container",29)(3,vo,4,12,"ng-container",29),o()}if(n&2){let e=t.$implicit,i=t.index;Ot("provider-card-container ",e.type,""),pe("even",i%2===0)("old",i%2===1),a(),d("ngIf",e.type==="provider"),a(),d("ngIf",e.type==="product"),a(),d("ngIf",e.type==="service")}}function ho(n,t){if(n&1){let e=P();r(0,"span",40),v("click",function(c){h(e);let p=l().$implicit,b=l();return O(b.removeFromFavorites(p.provider_id.toString(),c))}),s(1," thumb_up "),o()}}function Oo(n,t){if(n&1){let e=P();r(0,"span",41),v("click",function(c){h(e);let p=l().$implicit,b=l();return O(b.addToFavorites(p,c))}),s(1," thumb_up "),o()}}function Mo(n,t){if(n&1&&(r(0,"div",37),u(1,ho,2,0,"span",38)(2,Oo,2,0,"span",39),o()),n&2){let e=t.$implicit,i=l();a(),ge(i.isInFavorites(e.provider_id.toString())?1:2)}}function Po(n,t){if(n&1&&(r(0,"div",32),s(1),o()),n&2){let e=l().$implicit;a(),M(" ",e.provider_name,"")}}function xo(n,t){if(n&1&&(r(0,"div",31)(1,"div",32),s(2),o(),u(3,Po,2,1,"div",42),r(4,"div",33),s(5),o(),r(6,"div",34)(7,"span",35),s(8," pin_drop "),o(),r(9,"span",36),s(10),o()()()),n&2){let e=t.$implicit;a(2),g(e.title1),a(),d("ngIf",e.type==="provider"&&!e.title1&&e.provider_name),a(2),g(e.title2),a(5),M("",e.distance," km")}}function yo(n,t){if(n&1&&m(0,"div",45),n&2){let e=l().$implicit;se("background-image","url("+e.product_image_url[0]+")")}}function So(n,t){if(n&1&&m(0,"div",46),n&2){l(2);let e=F(16);se("background-image","url("+e+")")}}function Io(n,t){if(n&1&&(r(0,"div",43),u(1,yo,1,2,"div",44)(2,So,1,2,"ng-template",null,5,U),o()),n&2){let e=t.$implicit,i=F(3);a(),d("ngIf",e.validProductImage)("ngIfElse",i)}}function wo(n,t){if(n&1&&m(0,"div",45),n&2){let e=l().$implicit;se("background-image","url("+e.logo_url+")")}}function ko(n,t){if(n&1&&(r(0,"div",46),s(1),o()),n&2){let e=l().$implicit;a(),M(" ",e.logoShorten," ")}}function To(n,t){if(n&1&&(r(0,"div",43),u(1,wo,1,2,"div",44)(2,ko,2,1,"ng-template",null,6,U),o()),n&2){let e=t.$implicit,i=F(3);a(),d("ngIf",e.validProviderLogo)("ngIfElse",i)}}var it=class n{constructor(t,e,i,c){this._customerService=t;this._webviewService=e;this._commonService=i;this._router=c}isCategoryLoading=!1;ngOnInit(){this._webviewService.passActionToRN({action:gn.ACTIONS.showHeader,value:!1}),this.isCategoryLoading=!0,this.favorites=this._customerService.favorites,this._customerService._favorites$.subscribe(t=>{t&&(this.favorites=t)}),this._customerService.getCategoriesSubject().subscribe(t=>{t&&(this.isCategoryLoading=!1,this.categories=t,this.categories.forEach(e=>{this.checkImageExists(e.image_url).then(i=>{e.validImage=i})}))}),this._customerService.setAllCategoriesSubject(),this._customerService.categorySelectedFromHomePage&&(this.onCategorySelect(this._customerService.categorySelectedFromHomePage),this._customerService.categorySelectedFromHomePage=void 0),this.selectedSearchType=this.subcategoryList.map(t=>({category:t.toLowerCase(),selected:!1}))}favorites=[];selectedSearchType=[];searchBarValue;productPlaceholderImage="assets/images/product-placeholder.png";subcategoryList=["Product","Service","Provider"];categories=[];placeholderCategories=Array.from({length:5});activeCategory;searchResults=[];searchMetadata={total:0,limit:0,offset:0,current_page:0,total_pages:0,has_next:!1,has_prev:!1};onCategorySelect(t){t==="All"?this.activeCategory=void 0:this.activeCategory=t;let e=this.selectedSearchType.filter(i=>i.selected).map(i=>i.category);this.searchBarValue?t!=="All"?this.searchApiTrigger({search_term:this.searchBarValue,search_type:e,provider_category_id:t.provider_category_id}):this.searchApiTrigger({search_term:this.searchBarValue,search_type:e}):this.activeCategory&&this.searchApiTrigger({provider_category_id:this.activeCategory.provider_category_id,search_type:e})}searchApiTrigger(t){let{search_term:e,provider_category_id:i,search_type:c}=t,p={search_term:e,latitude:0,longitude:0,radius:this._commonService.searchKmsSubject.getValue().toString(),offset:t.offset||0,provider_category_id:i||void 0,search_type:c?.join(",")||void 0};this._customerService.search(p).subscribe({next:b=>{let R=b.content.filter(X=>X.type==="product"||X.type==="service"||X.type==="provider");R.length===0&&b.metadata.offset===0?(this.searchResults=[],this.searchMetadata={total:0,limit:0,offset:0,current_page:0,total_pages:0,has_next:!1,has_prev:!1}):R.length>0&&b.metadata.offset==0?(this.searchResults=[...R],this.searchMetadata=b.metadata,this.setProviderLogo()):(this.searchResults.push(...R),this.searchMetadata=b.metadata,this.setProviderLogo())},error:b=>{console.error(b)}})}subcategorySelected(t){let e=this.selectedSearchType.find(i=>i.category===t.toLowerCase());if(e){e.selected?e.selected=!1:(this.selectedSearchType.forEach(c=>c.selected=!1),e.selected=!0);let i=this.selectedSearchType.filter(c=>c.selected).map(c=>c.category);this.searchBarValue?this.searchApiTrigger({search_term:this.searchBarValue,search_type:i,offset:0}):this.searchApiTrigger({search_term:"",search_type:i,offset:0})}}searchTriggered(t){this.searchBarValue=t,this.searchResults=[];let e=this.selectedSearchType.filter(i=>i.selected).map(i=>i.category);this.searchApiTrigger({search_term:t,search_type:e,offset:0,provider_category_id:this.activeCategory?.provider_category_id})}checkImageExists(t){return new Promise(e=>{let i=new Image;i.onload=()=>e(!0),i.onerror=()=>e(!1),i.src=t})}setProviderLogo(){this.searchResults.filter(t=>t.validProviderLogo===void 0||t.validProductImage===void 0).forEach(t=>{this.checkImageExists(t.logo_url).then(e=>{t.validProviderLogo=e}),t.logoShorten=t.provider_name.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().substring(0,2),t.product_image_url&&t.product_image_url[0]?this.checkImageExists(t.product_image_url[0]).then(e=>{t.validProductImage=e}):t.validProductImage=!1})}addToFavorites(t,e){e.stopPropagation(),this._customerService.addToLocalFavorites(t),this._customerService.addFavorites(t.provider_id).subscribe({next:i=>{console.log(i),this.favorites=this._customerService.favorites},error:i=>{console.error(i)}})}removeFromFavorites(t,e){e.stopPropagation(),this._customerService.removeFromLocalFavorites(t),this._customerService.removeFavorite(t).subscribe({next:i=>{console.log(i),this.favorites=this._customerService.favorites},error:i=>{console.error(i)}})}isInFavorites(t){return this.favorites&&this.favorites.length>0&&this.favorites.some(e=>e.provider_id.toString()===t.toString())}onScroll(t){let e=t.target,i=e.scrollTop,c=e.scrollHeight,p=e.clientHeight;i+p>=c-10&&this.loadMoreData()}loadMoreData(){if(!this.searchMetadata.has_next)return;let t=this.searchMetadata.offset+this.searchMetadata.limit*this.searchMetadata.current_page,e=this.selectedSearchType.filter(i=>i.selected);this.searchApiTrigger({search_term:this.searchBarValue,search_type:e.map(i=>i.category),provider_category_id:this.activeCategory?.provider_category_id,offset:t})}cardClicked(t){if(t.type!=="product"){let e={providerId:t.provider_id};this._router.navigate(["customers","info"],{state:e})}else{let e={productId:t.product_id,providerId:t.provider_id};this._router.navigate(["customers","info"],{state:e})}}static \u0275fac=function(e){return new(e||n)(C(G),C(ve),C(ze),C(T))};static \u0275cmp=x({type:n,selectors:[["search-page"]],decls:19,vars:5,consts:[["addToFavoriteTemplate",""],["providerDetailsTemplate",""],["productPlaceholderImage",""],["providerPlaceholderImage",""],["errorImage",""],["errorImageOnProduct",""],["errorImageOnProviderLogo",""],[3,"onSearch","isSearchPage"],["class","categories-container",4,"ngIf"],[1,"search-subcategory-list-container"],[1,"filter-icon-container"],[1,"material-symbols-outlined","filter-icon"],["class","sub-category",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"search-results",3,"scroll"],[3,"class","even","old","click",4,"ngFor","ngForOf"],[1,"categories-container"],[1,"category-wrap",3,"click","ngClass"],[1,"category-icon-wrap"],[1,"pi","pi-globe"],[1,"category-name"],["class","category-wrap",3,"ngClass","click",4,"ngFor","ngForOf"],["class","image_url",3,"background-image",4,"ngIf","ngIfElse"],[1,"image_url"],[1,"pi","pi-book"],[1,"category-wrap"],["class","category-wrap ",4,"ngFor","ngForOf"],[1,"skeleton-icon","skeleton-animation"],[1,"sub-category",3,"click","ngClass"],[3,"click"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"provider-info"],[1,"title"],[1,"sub"],[1,"tag-view"],[1,"material-symbols-outlined","icon"],[1,"distance"],[1,"add-to-favorite"],[1,"material-icons"],[1,"material-symbols-outlined"],[1,"material-icons",3,"click"],[1,"material-symbols-outlined",3,"click"],["class","title",4,"ngIf"],[1,"provider-icon-wrap"],["class","provider-icon has-logo",3,"background-image",4,"ngIf","ngIfElse"],[1,"provider-icon","has-logo"],[1,"provider-icon"]],template:function(e,i){if(e&1){let c=P();r(0,"app-search-bar",7),v("onSearch",function(b){return h(c),O(i.searchTriggered(b))}),o(),u(1,io,7,4,"div",8)(2,ro,7,1,"div",8),r(3,"div",9)(4,"span",10)(5,"span",11),s(6," filter_list "),o(),s(7," Filter "),o(),u(8,ao,2,4,"span",12),o(),r(9,"div",13),v("scroll",function(b){return h(c),O(i.onScroll(b))}),u(10,bo,4,10,"div",14),o(),u(11,Mo,3,1,"ng-template",null,0,U)(13,xo,11,4,"ng-template",null,1,U)(15,Io,4,2,"ng-template",null,2,U)(17,To,4,2,"ng-template",null,3,U)}e&2&&(d("isSearchPage",!0),a(),d("ngIf",!i.isCategoryLoading),a(),d("ngIf",i.isCategoryLoading),a(6),d("ngForOf",i.selectedSearchType),a(2),d("ngForOf",i.searchResults))},dependencies:[L,k,S,kt,Ue],styles:['body{overflow:hidden}.categories-container[_ngcontent-%COMP%]{display:flex;width:auto;overflow:auto;scrollbar-width:none;background-color:#4f126a}.categories-container[_ngcontent-%COMP%]   .category-wrap[_ngcontent-%COMP%]{width:auto;margin:.5rem;position:relative}.categories-container[_ngcontent-%COMP%]   .category-wrap.active[_ngcontent-%COMP%], .categories-container[_ngcontent-%COMP%]   .category-wrap.active[_ngcontent-%COMP%]   .category-icon-wrap[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .categories-container[_ngcontent-%COMP%]   .category-wrap.active[_ngcontent-%COMP%]   .category-name[_ngcontent-%COMP%]{color:#ff0}.categories-container[_ngcontent-%COMP%]   .category-wrap.active[_ngcontent-%COMP%]:after{content:"";background-color:#ff0;position:absolute;bottom:-.3125rem;width:100%;height:.1875rem}.categories-container[_ngcontent-%COMP%]   .category-wrap[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{white-space:nowrap;text-align:center;margin:.125rem;color:#fff}.categories-container[_ngcontent-%COMP%]   .category-wrap[_ngcontent-%COMP%]   div.category-name[_ngcontent-%COMP%]{font-size:.6875rem}.categories-container[_ngcontent-%COMP%]   .category-wrap[_ngcontent-%COMP%]   div.category-icon-wrap[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.375rem}.search-subcategory-list-container[_ngcontent-%COMP%]{margin-top:.3125rem;margin-bottom:.3125rem}.search-subcategory-list-container[_ngcontent-%COMP%]   .filter-icon-container[_ngcontent-%COMP%]{color:#5d157c}.search-subcategory-list-container[_ngcontent-%COMP%]   .filter-icon-container[_ngcontent-%COMP%]   .filter-icon[_ngcontent-%COMP%]{color:#5d157c;vertical-align:sub}.search-subcategory-list-container[_ngcontent-%COMP%]   .sub-category[_ngcontent-%COMP%]{border:.0625rem solid #5d157c;border-radius:.3125rem;margin:.1875rem;padding:.0625rem .625rem}.search-subcategory-list-container[_ngcontent-%COMP%]   .sub-category.selected[_ngcontent-%COMP%]{background-color:#5d157c;color:#fff}.search-results[_ngcontent-%COMP%]{margin-top:.5rem;padding-left:.15rem;padding-right:.15rem;height:80%;overflow-y:auto;padding-bottom:2rem;background-color:#fff}.search-results[_ngcontent-%COMP%]   .provider-card-container[_ngcontent-%COMP%]{position:relative;height:5.6rem;border-radius:.375rem;box-shadow:0 .15625rem .40625rem #1c191d4a,0 0 .125rem #1c191d52;display:flex;justify-content:space-between;align-items:center;width:95%;background-color:#f9f2fd;margin:auto;margin-top:.625rem}.search-results[_ngcontent-%COMP%]   .provider-card-container[_ngcontent-%COMP%]   .add-to-favorite[_ngcontent-%COMP%]{margin-right:.625rem;color:#5d157c}.search-results[_ngcontent-%COMP%]   .provider-card-container[_ngcontent-%COMP%]   .provider-icon-wrap[_ngcontent-%COMP%]   .provider-icon[_ngcontent-%COMP%]{margin-top:.5rem;margin-left:1rem;display:inline-block;width:3.875rem;height:3.875rem;border-radius:50%;line-height:3.875rem;text-align:center;font-size:1.5rem;font-weight:700;border-radius:.75rem;color:#5d157c;background-color:#fff;box-shadow:0 .15625rem .40625rem #1c191d4a,0 0 .125rem #1c191d52}.search-results[_ngcontent-%COMP%]   .provider-card-container[_ngcontent-%COMP%]   .provider-icon-wrap[_ngcontent-%COMP%]   .provider-icon.has-logo[_ngcontent-%COMP%]{background-position:center;background-repeat:no-repeat;background-size:contain}.search-results[_ngcontent-%COMP%]   .provider-card-container[_ngcontent-%COMP%]   .provider-info[_ngcontent-%COMP%]{display:inline-block;font-size:1rem;margin-left:.5rem;flex:1}.search-results[_ngcontent-%COMP%]   .provider-card-container[_ngcontent-%COMP%]   .provider-info[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:.875rem;color:#5d157c;font-weight:700}.search-results[_ngcontent-%COMP%]   .provider-card-container[_ngcontent-%COMP%]   .provider-info[_ngcontent-%COMP%]   .sub[_ngcontent-%COMP%]{font-weight:400;color:#243156;font-size:.6875rem}.search-results[_ngcontent-%COMP%]   .provider-card-container[_ngcontent-%COMP%]   .provider-info[_ngcontent-%COMP%]   .tag-view[_ngcontent-%COMP%]{background-color:#e9a213c9;border-radius:3.125rem;padding:.3125rem .5rem;display:inline;font-size:.875rem}.search-results[_ngcontent-%COMP%]   .provider-card-container[_ngcontent-%COMP%]   .provider-info[_ngcontent-%COMP%]   .tag-view[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{vertical-align:middle;font-size:1.125rem;margin-right:.3125rem}.search-results[_ngcontent-%COMP%]   .provider-card-container[_ngcontent-%COMP%]   .provider-info[_ngcontent-%COMP%]   .tag-view[_ngcontent-%COMP%]   span.distance[_ngcontent-%COMP%]{display:inline-block;max-width:9rem;overflow:hidden;white-space:nowrap;vertical-align:middle;text-overflow:ellipsis;font-size:.75rem}.skeleton-icon[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;margin:0 auto!important;position:relative;overflow:hidden;border-radius:.625rem}.loading-placeholder[_ngcontent-%COMP%]   .skeleton-icon[_ngcontent-%COMP%]{width:2rem;height:2rem;border-radius:50%;background:#e0e0e0;margin:0 auto;animation:_ngcontent-%COMP%_shimmer 1.5s infinite linear}.loading-placeholder[_ngcontent-%COMP%]   .skeleton-text[_ngcontent-%COMP%]{width:3.75rem;height:.75rem;background:#e0e0e0;margin:.5rem auto 0;border-radius:.25rem;animation:_ngcontent-%COMP%_shimmer 1.5s infinite linear}@keyframes _ngcontent-%COMP%_shimmer{0%{background-color:#e0e0e0}50%{background-color:#f5f5f5}to{background-color:#e0e0e0}}']})};function Eo(n,t){if(n&1&&m(0,"i"),n&2){let e=l().$implicit;Pe(e.icon)}}function Ro(n,t){if(n&1){let e=P();r(0,"div",8)(1,"div",9)(2,"div",10),u(3,Eo,1,3,"i",11),o()(),r(4,"div",2),s(5),_(6,"translate"),o(),r(7,"div",3),s(8),_(9,"translate"),o(),r(10,"div",4)(11,"button",12),v("click",function(){let c=h(e).$implicit,p=l();return O(p.actionExecute(c))}),s(12),_(13,"translate"),o()()()}if(n&2){let e=t.$implicit;a(3),d("ngIf",e.iconType==="primeng"),a(2),M(" ",f(6,4,e.titleKey)," "),a(3),M(" ",f(9,6,e.descKey)," "),a(4),M(" ",f(13,8,e.actionNameKey)," ")}}var ot=class n{constructor(t,e,i){this.router=t;this.translate=e;this.cdr=i}ngOnInit(){this.translate.onLangChange.subscribe(t=>{console.log("[JoinTownComponent] Language changed to:",this.translate.currentLang),console.log("[JoinTownComponent] Language changed:",t.lang),this.cdr.detectChanges()})}cards=[{icon:"pi pi-building",iconType:"primeng",titleKey:"joinTown.cards.join_business.title",descKey:"joinTown.cards.join_business.desc",actionNameKey:"joinTown.cards.join_business.action",action:"goToNav",url:"kyc"},{icon:"pi pi-check-circle",iconType:"primeng",titleKey:"joinTown.cards.volunteer.title",descKey:"joinTown.cards.volunteer.desc",actionNameKey:"joinTown.cards.volunteer.action",action:"goToExt"},{icon:"pi pi-megaphone",iconType:"primeng",titleKey:"joinTown.cards.announcements.title",descKey:"joinTown.cards.announcements.desc",actionNameKey:"joinTown.cards.announcements.action",action:"goToExt"},{icon:"pi pi-users",iconType:"primeng",titleKey:"joinTown.cards.explore_services.title",descKey:"joinTown.cards.explore_services.desc",actionNameKey:"joinTown.cards.explore_services.action",action:"goToNav",url:"search-providers"}];actionExecute(t){t.action==="goToNav"&&this.router.navigate(["customers",t.url])}gotoKyc(){this.router.navigate(["customers","kyc"])}static \u0275fac=function(e){return new(e||n)(C(T),C(B),C(J))};static \u0275cmp=x({type:n,selectors:[["join-town"]],decls:15,vars:10,consts:[[1,"home-banner"],[1,"banner-content"],[1,"title"],[1,"desc"],[1,"action"],["mat-flat-button","",3,"click"],[1,"main-content-grid"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"icon-wrap"],[1,"icon"],[3,"class",4,"ngIf"],[1,"button-for-action",3,"click"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),s(3),_(4,"translate"),o(),r(5,"div",3)(6,"p"),s(7),_(8,"translate"),o()(),r(9,"div",4)(10,"button",5),v("click",function(){return i.gotoKyc()}),s(11),_(12,"translate"),o()()()(),r(13,"div",6),u(14,Ro,14,10,"div",7),o()),e&2&&(a(3),g(f(4,4,"joinTown.banner_title")),a(4),g(f(8,6,"joinTown.banner_desc")),a(4),g(f(12,8,"joinTown.join_as_business")),a(3),d("ngForOf",i.cards))},dependencies:[k,S,Yt,z],styles:[".home-banner[_ngcontent-%COMP%]{height:14rem;background-repeat:no-repeat;background-color:#f2cb57;display:flex;justify-content:center;align-items:center;border-radius:0 0 1.5rem 1.5rem}.home-banner[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]{text-align:center;line-height:2}.home-banner[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.9rem;color:#5d157c;font-weight:600;font-family:Roboto}.home-banner[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{color:#171a1f;font-size:1rem}.home-banner[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#5d157c}.main-content-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;row-gap:1rem;column-gap:1rem;padding:1rem 1rem 5rem;text-align:center;background-color:#ececec}.main-content-grid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;box-shadow:0 0 1px #171a1f12,0 0 2px #171a1f1f;border-radius:12px;padding:1rem 1rem 1.25rem}.main-content-grid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:first-child{padding-top:1.5rem}.main-content-grid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .icon-wrap[_ngcontent-%COMP%]{text-align:center;padding-top:.25rem}.main-content-grid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .icon-wrap[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:4rem;height:4rem;border-radius:50%;background:#324477;display:flex;justify-content:center;align-items:center;color:#fff;font-size:2rem;margin:auto;margin-top:.25rem}.main-content-grid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .icon-wrap[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem}.main-content-grid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.125rem}.main-content-grid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{font-size:.875rem;color:#8c8d8b;margin-bottom:1rem}.main-content-grid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   .button-for-action[_ngcontent-%COMP%]{border-radius:.5rem;background-color:#5d157c;color:#fff;padding:0 .625rem;font-size:.875rem;height:2.5rem}"]})};function Fo(n,t){n&1&&(r(0,"div",4),m(1,"div",5),r(2,"p"),s(3),_(4,"translate"),o()()),n&2&&(a(3),g(f(4,1,"profile.loading")))}function Do(n,t){if(n&1){let e=P();r(0,"div",6)(1,"div",7),m(2,"i",8),o(),r(3,"p",9),s(4),o(),r(5,"button",10),v("click",function(){h(e);let c=l();return O(c.retryFetchUserInfo())}),m(6,"i",11),s(7," Retry "),o()()}if(n&2){let e=l();a(4),g(e.error)}}function No(n,t){if(n&1){let e=P();r(0,"div",40),v("click",function(){let c=h(e).$implicit,p=l(2);return O(p.onCommunityClick(c))}),r(1,"div",41),m(2,"i",42),o(),r(3,"div",43)(4,"div",44),s(5),o(),r(6,"div",45),m(7,"i",46),s(8),_(9,"translate"),o()(),m(10,"i",37),o()}if(n&2){let e=t.$implicit;a(),se("background-color",e.color),a(4),g(e.name),a(3),W(" ",e.orders," ",f(9,5,"profile.orders")," ")}}function jo(n,t){if(n&1){let e=P();r(0,"div",47)(1,"div",48),m(2,"i",49),o(),r(3,"div",50)(4,"div",51),s(5),o(),r(6,"div",52),s(7),o()(),r(8,"button",27),v("click",function(){h(e);let c=l(2);return O(c.onEditInterest())}),m(9,"i",28),s(10),_(11,"translate"),o()()}if(n&2){let e=t.$implicit;a(5),g(e.label),a(2),g(e.value),a(3),M(" ",f(11,3,"profile.edit")," ")}}function Lo(n,t){if(n&1){let e=P();r(0,"div")(1,"div",12)(2,"div",13)(3,"span"),s(4),o()(),r(5,"h2",14),s(6),o(),r(7,"button",15),v("click",function(){h(e);let c=l();return O(c.onViewFullProfile())}),r(8,"span"),s(9),_(10,"translate"),o(),m(11,"i",16),o()(),r(12,"div",17)(13,"h3",18),s(14),_(15,"translate"),o(),r(16,"div",19)(17,"div",20),m(18,"i",21),o(),r(19,"div",22)(20,"div",23),s(21),_(22,"translate"),o(),r(23,"div",24),s(24),o()()(),r(25,"div",19)(26,"div",20),m(27,"i",25),o(),r(28,"div",22)(29,"div",23),s(30),_(31,"translate"),o(),r(32,"div",24),s(33),o()()(),r(34,"div",19)(35,"div",20),m(36,"i",26),o(),r(37,"div",22)(38,"div",23),s(39),_(40,"translate"),o(),r(41,"div",24),s(42),m(43,"br"),s(44),o()(),r(45,"button",27),v("click",function(){h(e);let c=l();return O(c.onEditAddress())}),m(46,"i",28),s(47),_(48,"translate"),o()()(),r(49,"div",17)(50,"h3",18),s(51),_(52,"translate"),o(),r(53,"div",29),u(54,No,11,7,"div",30),o()(),r(55,"div",17)(56,"h3",18),s(57),_(58,"translate"),o(),r(59,"div",31),u(60,jo,12,5,"div",32),o()(),r(61,"div",33)(62,"button",34),v("click",function(){h(e);let c=l();return O(c.onGrievanceRegistration())}),r(63,"div",35),m(64,"i",36),o(),r(65,"span"),s(66),_(67,"translate"),o(),m(68,"i",37),o(),r(69,"button",38),v("click",function(){h(e);let c=l();return O(c.onLogout())}),r(70,"div",35),m(71,"i",39),o(),r(72,"span"),s(73),_(74,"translate"),o(),m(75,"i",37),o()()()}if(n&2){let e=l();a(4),g(e.profile.initials),a(2),g(e.profile.name),a(3),g(f(10,18,"profile.view_full")),a(5),g(f(15,20,"profile.contact_details")),a(7),g(f(22,22,"profile.phone_number")),a(3),g(e.profile.phone),a(6),g(f(31,24,"profile.email_address")),a(3),g(e.profile.email),a(6),g(f(40,26,"profile.residential_address")),a(3),M(" ",e.profile.address.street,""),a(2),M(" ",e.profile.address.city," "),a(3),M(" ",f(48,28,"profile.edit")," "),a(4),g(f(52,30,"profile.communities")),a(3),d("ngForOf",e.communities),a(3),g(f(58,32,"profile.my_interests")),a(3),d("ngForOf",e.interests),a(6),g(f(67,34,"profile.grievance_registration")),a(7),g(f(74,36,"profile.logout"))}}var rt=class n{constructor(t,e,i,c,p,b){this.router=t;this.location=e;this.authService=i;this.toast=c;this.translate=p;this.cdr=b}loading=!1;error=null;userInfo=null;addresses=[];profile={initials:"JD",name:"John Doe",phone:"+1 234 567 8900",email:"john.doe@example.com",address:{street:"123 Community Lane,",city:"Cityville, CA 90210"}};communities=[{id:"1",name:"Volunteer Hub Network",icon:"M12 2L2 7v10c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7l-10-5z",orders:12,color:"#5D157C"},{id:"2",name:"Local Artisans Market",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z",orders:5,color:"#5D157C"}];interests=[{type:"primary",label:"Primary Interest",value:"Freelancer"},{type:"secondary",label:"Secondary Interest",value:"Local Events Organizer"}];ngOnInit(){this.fetchUserInfo(),this.translate.onLangChange.subscribe(t=>{console.log("[UserProfileComponent] Language changed to:",this.translate.currentLang),console.log("[UserProfileComponent] Language changed:",t.lang),this.cdr.detectChanges()})}fetchUserInfo(){this.loading=!0,this.error=null;let t=this.authService.getUserId();if(!t){this.error="User ID not found. Please login again.",this.loading=!1,this.toast.error("Error","User ID not found. Please login again.");return}this.authService.changeProfileApi(t).subscribe({next:e=>{console.log("User info response:",e),e&&e.user?(this.userInfo=e.user,this.lastUserResponse=e,this.updateProfileFromUserInfo()):e&&e.user_id?(this.userInfo=e,this.updateProfileFromUserInfo()):(this.error="Invalid user data received.",this.toast.error("Error","Invalid user data received.")),this.loading=!1},error:e=>{console.error("Error fetching user info:",e),this.error="Failed to load user information.",this.loading=!1,this.toast.error("Error","Failed to load user information. Please try again.")}})}updateProfileFromUserInfo(){if(!this.userInfo)return;this.profile.name=this.userInfo.name||"Unknown User",this.profile.initials=this.getInitials(this.userInfo.name);let t=this.lastUserResponse;if(t?.user){this.profile.phone=t.user.mobile_number||this.profile.phone,this.profile.email=t.user.email||this.profile.email;let e=Array.isArray(t.addresses)?t.addresses:[];if(e.length){this.addresses=e.map(c=>({id:c.id,formatted_address:c.formatted_address||c.address_line1}));let i=this.addresses[0];i?.formatted_address&&(this.profile.address.street=i.formatted_address,this.profile.address.city="")}}}getInitials(t){return t?t.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2):"U"}onViewFullProfile(){console.log("View full profile clicked")}onEditAddress(){console.log("Edit address clicked")}onEditInterest(){console.log("Edit interest clicked")}onCommunityClick(t){console.log("Community clicked:",t.name)}onGrievanceRegistration(){console.log("Grievance registration clicked"),this.router.navigate(["/customers/grievance"])}onLogout(){console.log("Logout clicked")}onNavigateBack(){this.location.back()}onNotifications(){console.log("Notifications clicked")}onTabClick(t){console.log("Tab clicked:",t)}retryFetchUserInfo(){this.fetchUserInfo()}static \u0275fac=function(e){return new(e||n)(C(T),C(It),C(y),C(Q),C(B),C(J))};static \u0275cmp=x({type:n,selectors:[["user-profile"]],decls:4,vars:3,consts:[[1,"profile-container"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],[4,"ngIf"],[1,"loading-state"],[1,"loading-spinner"],[1,"error-state"],[1,"error-icon"],[1,"pi","pi-exclamation-triangle"],[1,"error-message"],[1,"retry-button",3,"click"],[1,"pi","pi-refresh","mr-2"],[1,"profile-section"],[1,"profile-avatar"],[1,"profile-name"],[1,"view-profile-button",3,"click"],[1,"pi","pi-arrow-right","ml-2","text-sm"],[1,"section"],[1,"section-title"],[1,"contact-item"],[1,"contact-icon"],[1,"pi","pi-phone","text-base"],[1,"contact-info"],[1,"contact-label"],[1,"contact-value"],[1,"pi","pi-envelope","text-base"],[1,"pi","pi-map-marker","text-base"],[1,"edit-button",3,"click"],[1,"pi","pi-pencil","mr-1","text-sm"],[1,"community-list"],["class","community-item",3,"click",4,"ngFor","ngForOf"],[1,"interests-list"],["class","interest-item",4,"ngFor","ngForOf"],[1,"menu-section"],[1,"menu-item",3,"click"],[1,"menu-icon"],[1,"pi","pi-exclamation-circle","text-base"],[1,"pi","pi-chevron-right","text-sm","chevron"],[1,"menu-item","logout",3,"click"],[1,"pi","pi-sign-out","text-base"],[1,"community-item",3,"click"],[1,"community-icon"],[1,"pi","pi-users","text-base"],[1,"community-info"],[1,"community-name"],[1,"community-orders"],[1,"pi","pi-shopping-cart","mr-1","text-xs"],[1,"interest-item"],[1,"interest-icon"],[1,"pi","pi-user","text-base"],[1,"interest-info"],[1,"interest-label"],[1,"interest-value"]],template:function(e,i){e&1&&(r(0,"div",0),u(1,Fo,5,3,"div",1)(2,Do,8,1,"div",2)(3,Lo,76,38,"div",3),o()),e&2&&(a(),d("ngIf",i.loading),a(),d("ngIf",i.error&&!i.loading),a(),d("ngIf",!i.loading&&!i.error))},dependencies:[k,S,z],styles:[".profile-container[_ngcontent-%COMP%]{max-width:375px;margin:0 auto;background-color:#f8fafc;min-height:100vh;position:relative;overflow-x:hidden}.header[_ngcontent-%COMP%]{background-color:#fff;border-bottom:1px solid #e3e0e4;position:sticky;top:0;z-index:100}.header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 0;height:44px;margin:1rem 0}.header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{background:none;border:none;color:#374151;cursor:pointer;display:flex;align-items:center;padding:4px}.header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]:hover{color:#6366f1}.header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#111827;margin:0;flex:1;text-align:center}.header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .notification-button[_ngcontent-%COMP%]{background:none;border:none;color:#374151;cursor:pointer;display:flex;align-items:center;padding:4px;margin-right:8px}.header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .notification-button[_ngcontent-%COMP%]:hover{color:#6366f1}.header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .profile-avatar-mini[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;background-color:#5d157c;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600;font-size:14px}.profile-section[_ngcontent-%COMP%]{background-color:#fff;padding:24px 16px;text-align:center;border-bottom:1px solid #e2e8f0;margin-bottom:12px}.profile-section[_ngcontent-%COMP%]   .profile-avatar[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background-color:#5d157c;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600;font-size:32px;margin:0 auto 16px}.profile-section[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#111827;margin:0 0 8px}.profile-section[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{margin-bottom:16px}.profile-section[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-type[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;font-weight:500;margin-bottom:4px}.profile-section[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-status[_ngcontent-%COMP%]{font-size:12px;color:#9ca3af;font-weight:500;padding:2px 8px;border-radius:12px;background:#f3f4f6;display:inline-block}.profile-section[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-status.active[_ngcontent-%COMP%]{color:#059669;background:#d1fae5}.profile-section[_ngcontent-%COMP%]   .view-profile-button[_ngcontent-%COMP%]{background-color:#5d157c;color:#fff;border:none;border-radius:8px;padding:12px 24px;font-size:16px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;margin:0 auto;transition:background-color .2s}.profile-section[_ngcontent-%COMP%]   .view-profile-button[_ngcontent-%COMP%]:hover{background-color:#4f46e5}.profile-section[_ngcontent-%COMP%]   .view-profile-button[_ngcontent-%COMP%]:active{background-color:#4338ca}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e5e7eb;border-top:4px solid #5D157C;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:16px}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;font-size:16px;font-weight:500}.error-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.error-state[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:48px;color:#dc2626;margin-bottom:16px}.error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#dc2626;font-size:16px;font-weight:500;margin-bottom:16px}.error-state[_ngcontent-%COMP%]   .retry-button[_ngcontent-%COMP%]{padding:12px 24px;background:#5d157c;color:#fff;border:none;border-radius:8px;font-weight:600;font-size:14px;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center}.error-state[_ngcontent-%COMP%]   .retry-button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#4a0f63,#6a1fd9);transform:translateY(-1px);box-shadow:0 4px 12px #5d157c4d}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.section[_ngcontent-%COMP%]{background-color:#fff;margin-bottom:12px;border-radius:8px;border:1px solid #e3e0e4}.section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#111827;margin:0;padding:16px 16px 0}.contact-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;padding:16px;border-bottom:1px solid #e3e0e4;position:relative}.contact-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.contact-item[_ngcontent-%COMP%]   .contact-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:8px;background-color:#f8fafc;display:flex;align-items:center;justify-content:center;color:#6b7280;margin-right:12px;flex-shrink:0}.contact-item[_ngcontent-%COMP%]   .contact-info[_ngcontent-%COMP%]{flex:1}.contact-item[_ngcontent-%COMP%]   .contact-info[_ngcontent-%COMP%]   .contact-label[_ngcontent-%COMP%]{font-size:12px;color:#9ca3af;margin-bottom:4px;font-weight:500}.contact-item[_ngcontent-%COMP%]   .contact-info[_ngcontent-%COMP%]   .contact-value[_ngcontent-%COMP%]{font-size:14px;color:#111827;line-height:1.4}.contact-item[_ngcontent-%COMP%]   .edit-button[_ngcontent-%COMP%]{background:none;border:none;color:#5d157c;cursor:pointer;display:flex;align-items:center;gap:4px;font-size:14px;font-weight:500;padding:4px 8px;border-radius:4px}.contact-item[_ngcontent-%COMP%]   .edit-button[_ngcontent-%COMP%]:hover{background-color:#f8fafc}.community-list[_ngcontent-%COMP%]   .community-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px;border-bottom:1px solid #e3e0e4;cursor:pointer;transition:background-color .2s}.community-list[_ngcontent-%COMP%]   .community-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.community-list[_ngcontent-%COMP%]   .community-item[_ngcontent-%COMP%]:hover{background-color:#f8fafc}.community-list[_ngcontent-%COMP%]   .community-item[_ngcontent-%COMP%]   .community-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:8px;display:flex;align-items:center;justify-content:center;color:#fff;margin-right:12px;flex-shrink:0}.community-list[_ngcontent-%COMP%]   .community-item[_ngcontent-%COMP%]   .community-info[_ngcontent-%COMP%]{flex:1}.community-list[_ngcontent-%COMP%]   .community-item[_ngcontent-%COMP%]   .community-info[_ngcontent-%COMP%]   .community-name[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#111827;margin-bottom:4px}.community-list[_ngcontent-%COMP%]   .community-item[_ngcontent-%COMP%]   .community-info[_ngcontent-%COMP%]   .community-orders[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;display:flex;align-items:center;gap:4px}.community-list[_ngcontent-%COMP%]   .community-item[_ngcontent-%COMP%]   .chevron[_ngcontent-%COMP%]{color:#9ca3af}.interests-list[_ngcontent-%COMP%]   .interest-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px;border-bottom:1px solid #e3e0e4}.interests-list[_ngcontent-%COMP%]   .interest-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.interests-list[_ngcontent-%COMP%]   .interest-item[_ngcontent-%COMP%]   .interest-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:8px;background-color:#f8fafc;display:flex;align-items:center;justify-content:center;color:#6b7280;margin-right:12px;flex-shrink:0}.interests-list[_ngcontent-%COMP%]   .interest-item[_ngcontent-%COMP%]   .interest-info[_ngcontent-%COMP%]{flex:1}.interests-list[_ngcontent-%COMP%]   .interest-item[_ngcontent-%COMP%]   .interest-info[_ngcontent-%COMP%]   .interest-label[_ngcontent-%COMP%]{font-size:12px;color:#9ca3af;margin-bottom:4px;font-weight:500}.interests-list[_ngcontent-%COMP%]   .interest-item[_ngcontent-%COMP%]   .interest-info[_ngcontent-%COMP%]   .interest-value[_ngcontent-%COMP%]{font-size:14px;color:#111827;font-weight:500}.interests-list[_ngcontent-%COMP%]   .interest-item[_ngcontent-%COMP%]   .edit-button[_ngcontent-%COMP%]{background:none;border:none;color:#5d157c;cursor:pointer;display:flex;align-items:center;gap:4px;font-size:14px;font-weight:500;padding:4px 8px;border-radius:4px}.interests-list[_ngcontent-%COMP%]   .interest-item[_ngcontent-%COMP%]   .edit-button[_ngcontent-%COMP%]:hover{background-color:#f8fafc}.menu-section[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;border:1px solid #e3e0e4;margin-bottom:12px}.menu-section[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px;border:none;background:none;cursor:pointer;width:100%;text-align:left;border-bottom:1px solid #e3e0e4;transition:background-color .2s}.menu-section[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.menu-section[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover{background-color:#f8fafc}.menu-section[_ngcontent-%COMP%]   .menu-item.logout[_ngcontent-%COMP%], .menu-section[_ngcontent-%COMP%]   .menu-item.logout[_ngcontent-%COMP%]   .menu-icon[_ngcontent-%COMP%]{color:#dc2626}.menu-section[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .menu-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:8px;background-color:#f8fafc;display:flex;align-items:center;justify-content:center;color:#6b7280;margin-right:12px;flex-shrink:0}.menu-section[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;font-size:14px;font-weight:500;color:#111827}.menu-section[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .chevron[_ngcontent-%COMP%]{color:#9ca3af}.bottom-nav[_ngcontent-%COMP%]{position:fixed;bottom:0;left:50%;transform:translate(-50%);width:100%;max-width:375px;background-color:#fff;border-top:1px solid #e3e0e4;display:flex;justify-content:space-around;padding:8px 0 calc(8px + env(safe-area-inset-bottom));z-index:100}.bottom-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;display:flex;flex-direction:column;align-items:center;gap:4px;padding:4px 8px;border-radius:8px;transition:all .2s;position:relative;min-width:44px}.bottom-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover{background-color:#f8fafc}.bottom-nav[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]{color:#5d157c}.bottom-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:10px;font-weight:500;color:#6b7280}.bottom-nav[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#5d157c}.bottom-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .notification-badge[_ngcontent-%COMP%]{position:absolute;top:-2px;right:8px;background-color:#dc2626;color:#fff;border-radius:50%;width:16px;height:16px;display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:600}.footer[_ngcontent-%COMP%]{background-color:#fff;padding:16px;text-align:center;margin-bottom:80px}.footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:4px;font-size:12px;color:#6b7280}.footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   .visily-text[_ngcontent-%COMP%]{color:#3b82f6;font-weight:600}@media (max-width: 375px){.profile-container[_ngcontent-%COMP%], .bottom-nav[_ngcontent-%COMP%]{max-width:100%}}@media (max-height: 667px){.header[_ngcontent-%COMP%]{padding-top:env(safe-area-inset-top)}}@media (prefers-color-scheme: dark){.profile-container[_ngcontent-%COMP%]{background-color:#fff;color:#000}.header[_ngcontent-%COMP%]{background-color:#fff;border-bottom-color:#e3e0e4}.section[_ngcontent-%COMP%]{background-color:#fff;border-color:#e3e0e4}.profile-section[_ngcontent-%COMP%]{background-color:#fff;border-bottom-color:#e3e0e4}.menu-section[_ngcontent-%COMP%]{background-color:#fff;border-color:#e3e0e4}.bottom-nav[_ngcontent-%COMP%]{background-color:#fff;border-top-color:#e3e0e4}.footer[_ngcontent-%COMP%]{background-color:#fff}.contact-item[_ngcontent-%COMP%], .community-item[_ngcontent-%COMP%], .interest-item[_ngcontent-%COMP%], .menu-item[_ngcontent-%COMP%]{border-bottom-color:#e3e0e4}.contact-icon[_ngcontent-%COMP%], .interest-icon[_ngcontent-%COMP%], .menu-icon[_ngcontent-%COMP%]{background-color:#fff}.section-title[_ngcontent-%COMP%], .profile-name[_ngcontent-%COMP%], .header-title[_ngcontent-%COMP%], .contact-value[_ngcontent-%COMP%], .community-name[_ngcontent-%COMP%], .interest-value[_ngcontent-%COMP%], .menu-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f8fafc}.contact-label[_ngcontent-%COMP%], .community-orders[_ngcontent-%COMP%]{color:#94a3b8}}"]})};function zo(n,t){if(n&1&&(r(0,"div",28),m(1,"i",22),o()),n&2){let e=l().$implicit;a(),d("ngClass",e.isExpanded?"pi-chevron-up":"pi-chevron-down")}}function Vo(n,t){if(n&1){let e=P();r(0,"div",31),v("click",function(){let c=h(e).$implicit,p=l(3);return O(p.onSubIssueClick(c))}),r(1,"div",32),m(2,"i",22),o(),r(3,"span",33),s(4),o(),r(5,"div",17),m(6,"i",18),o()()}if(n&2){let e=t.$implicit;a(2),d("ngClass","pi-"+e.icon+" text-sm text-[#8C8D8B]"),a(2),g(e.title)}}function Ao(n,t){if(n&1&&(r(0,"div",29),u(1,Vo,7,2,"div",30),o()),n&2){let e=l().$implicit;a(),d("ngForOf",e.subItems)}}function Uo(n,t){if(n&1){let e=P();r(0,"div",19)(1,"div",20),v("click",function(){let c=h(e).$implicit,p=l();return O(p.onIssueTypeClick(c))}),r(2,"div",21),m(3,"i",22),o(),r(4,"div",23)(5,"h3",24),s(6),o(),r(7,"p",25),s(8),o()(),u(9,zo,2,1,"div",26),o(),u(10,Ao,2,1,"div",27),o()}if(n&2){let e=t.$implicit;pe("expanded",e.isExpanded),a(3),d("ngClass","pi-"+e.icon+" text-xl text-[#5D157C]"),a(3),g(e.title),a(2),g(e.description),a(),d("ngIf",e.type==="expandable"),a(),d("ngIf",e.isExpanded&&e.subItems)}}var at=class n{constructor(t,e,i){this.router=t;this.translate=e;this.cdr=i}issueTypes=[{id:"provider-related",title:"Provider Related",description:"Concerns about services from a specific community provider.",icon:"building",type:"expandable",isExpanded:!1,subItems:[{id:"incorrect-info",title:"Incorrect Provider Information",icon:"info"},{id:"unresponsive-provider",title:"Unresponsive Provider",icon:"volume-off"},{id:"missed-appointment",title:"Missed Appointment or Delay",icon:"calendar-x"},{id:"unprofessional-behavior",title:"Unprofessional Behavior",icon:"user-minus"},{id:"poor-service",title:"Incomplete or Poor Quality Service",icon:"thumbs-down"},{id:"overcharging",title:"Overcharging or Unexpected Fees",icon:"credit-card"},{id:"safety-concern",title:"Safety or Trust Concern",icon:"shield-alert"},{id:"remove-provider",title:"Request to Remove or Block Provider",icon:"user-x"},{id:"other-provider-issues",title:"Other Provider Issues",icon:"dots-horizontal"}]},{id:"app-related",title:"App Related",description:"Issues concerning application functionality or user experience.",icon:"desktop",type:"clickable",isExpanded:!1,subItems:[]}];ngOnInit(){this.translate.onLangChange.subscribe(t=>{console.log("[GrievanceComponent] Language changed to:",this.translate.currentLang),console.log("[GrievanceComponent] Language changed:",t.lang),this.cdr.detectChanges()})}onBackClick(){console.log("Back button clicked")}onIssueTypeClick(t){t.type==="expandable"?t.isExpanded=!t.isExpanded:this.router.navigate(["/customers/support"],{state:{issueType:"app_related"}})}onSubIssueClick(t){console.log("Sub-issue selected:",t.id),this.router.navigate(["/customers/support"],{state:{issueType:"providers_related"}})}onFaqSupportClick(){console.log("FAQ / Support clicked")}static \u0275fac=function(e){return new(e||n)(C(T),C(B),C(J))};static \u0275cmp=x({type:n,selectors:[["grievance"]],decls:26,vars:1,consts:[[1,"select-issue-container"],[1,"header"],[1,"header-content"],[1,"back-button",3,"click"],[1,"pi","pi-chevron-left","text-xl","text-gray-700"],[1,"header-title"],[1,"content"],[1,"issue-types"],["class","issue-type-card",3,"expanded",4,"ngFor","ngForOf"],[1,"help-section"],[1,"help-card"],[1,"help-content"],[1,"help-title"],[1,"help-description"],[1,"faq-button",3,"click"],[1,"faq-icon"],[1,"pi","pi-headphones","text-base","text-[#5D157C]"],[1,"chevron"],[1,"pi","pi-chevron-right","text-sm","text-gray-400"],[1,"issue-type-card"],[1,"issue-type-item",3,"click"],[1,"issue-icon"],[1,"pi",3,"ngClass"],[1,"issue-content"],[1,"issue-title"],[1,"issue-description"],["class","expand-icon",4,"ngIf"],["class","sub-items",4,"ngIf"],[1,"expand-icon"],[1,"sub-items"],["class","sub-item",3,"click",4,"ngFor","ngForOf"],[1,"sub-item",3,"click"],[1,"sub-icon"],[1,"sub-title"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),v("click",function(){return i.onBackClick()}),m(4,"i",4),o(),r(5,"h1",5),s(6,"Select Issue Type"),o()()(),r(7,"div",6)(8,"div",7),u(9,Uo,11,7,"div",8),o(),r(10,"div",9)(11,"div",10)(12,"div",11)(13,"h3",12),s(14,"Ready to help?"),o(),r(15,"p",13),s(16," Choose an option below to get started."),m(17,"br"),s(18," We're here to assist you. "),o()(),r(19,"button",14),v("click",function(){return i.onFaqSupportClick()}),r(20,"div",15),m(21,"i",16),o(),r(22,"span"),s(23,"FAQ / Support"),o(),r(24,"div",17),m(25,"i",18),o()()()()()()),e&2&&(a(9),d("ngForOf",i.issueTypes))},dependencies:[L,k,S],styles:[".select-issue-container[_ngcontent-%COMP%]{max-width:375px;margin:0 auto;min-height:100vh;position:relative;overflow-x:hidden}.header[_ngcontent-%COMP%]{background-color:#fff;border-bottom:1px solid #e3e0e4;position:sticky;top:0;z-index:100}.header[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px 16px;font-size:14px;font-weight:600;color:#111827}.header[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:15px;font-weight:600;letter-spacing:-.3px}.header[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .status-icons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.header[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .status-icons[_ngcontent-%COMP%]   .signal-strength[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:2px}.header[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .status-icons[_ngcontent-%COMP%]   .signal-strength[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{width:3px;background-color:#fff;border-radius:1px}.header[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .status-icons[_ngcontent-%COMP%]   .signal-strength[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:nth-child(1){height:4px}.header[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .status-icons[_ngcontent-%COMP%]   .signal-strength[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:nth-child(2){height:6px}.header[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .status-icons[_ngcontent-%COMP%]   .signal-strength[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:nth-child(3){height:8px}.header[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .status-icons[_ngcontent-%COMP%]   .signal-strength[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:nth-child(4){height:10px}.header[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .status-icons[_ngcontent-%COMP%]   .wifi-icon[_ngcontent-%COMP%]{color:#111827;display:flex;align-items:center;margin:0 2px}.header[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .status-icons[_ngcontent-%COMP%]   .battery-icon[_ngcontent-%COMP%]{display:flex;align-items:center}.header[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .status-icons[_ngcontent-%COMP%]   .battery-icon[_ngcontent-%COMP%]   .battery-body[_ngcontent-%COMP%]{width:22px;height:11px;border:1px solid #e3e0e4;border-radius:2px;background-color:#fff;position:relative}.header[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .status-icons[_ngcontent-%COMP%]   .battery-icon[_ngcontent-%COMP%]   .battery-tip[_ngcontent-%COMP%]{width:1px;height:6px;background-color:#fff;border-radius:0 1px 1px 0;margin-left:1px}.header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;align-items:center;padding:15px 16px}.header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{background:none;border:none;color:#374151;cursor:pointer;display:flex;align-items:center;padding:4px;margin-right:12px}.header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]:hover{color:#5d157c}.header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#111827;margin:0}.content[_ngcontent-%COMP%]{padding:16px 16px 100px}.issue-types[_ngcontent-%COMP%]{margin-bottom:24px}.issue-types[_ngcontent-%COMP%]   .issue-type-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;border:1px solid #e2e8f0;margin-bottom:12px;overflow:hidden;transition:all .3s ease}.issue-types[_ngcontent-%COMP%]   .issue-type-card.expanded[_ngcontent-%COMP%]{box-shadow:0 2px 8px #0000001a}.issue-types[_ngcontent-%COMP%]   .issue-type-card[_ngcontent-%COMP%]   .issue-type-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;padding:16px;cursor:pointer;transition:background-color .2s}.issue-types[_ngcontent-%COMP%]   .issue-type-card[_ngcontent-%COMP%]   .issue-type-item[_ngcontent-%COMP%]:hover{background-color:#f8fafc}.issue-types[_ngcontent-%COMP%]   .issue-type-card[_ngcontent-%COMP%]   .issue-type-item[_ngcontent-%COMP%]   .issue-icon[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:50%;background-color:#ece5f0;display:flex;align-items:center;justify-content:center;color:#5d157c;margin-right:12px;flex-shrink:0}.issue-types[_ngcontent-%COMP%]   .issue-type-card[_ngcontent-%COMP%]   .issue-type-item[_ngcontent-%COMP%]   .issue-content[_ngcontent-%COMP%]{flex:1}.issue-types[_ngcontent-%COMP%]   .issue-type-card[_ngcontent-%COMP%]   .issue-type-item[_ngcontent-%COMP%]   .issue-content[_ngcontent-%COMP%]   .issue-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#111827;margin:0 0 4px}.issue-types[_ngcontent-%COMP%]   .issue-type-card[_ngcontent-%COMP%]   .issue-type-item[_ngcontent-%COMP%]   .issue-content[_ngcontent-%COMP%]   .issue-description[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin:0;line-height:1.4}.issue-types[_ngcontent-%COMP%]   .issue-type-card[_ngcontent-%COMP%]   .issue-type-item[_ngcontent-%COMP%]   .expand-icon[_ngcontent-%COMP%]{color:#9ca3af;display:flex;align-items:center;margin-left:8px;transition:transform .3s ease}.issue-types[_ngcontent-%COMP%]   .issue-type-card.expanded[_ngcontent-%COMP%]   .issue-type-item[_ngcontent-%COMP%]   .expand-icon[_ngcontent-%COMP%]{transform:rotate(180deg)}.issue-types[_ngcontent-%COMP%]   .issue-type-card[_ngcontent-%COMP%]   .sub-items[_ngcontent-%COMP%]{border-top:1px solid #e3e0e4}.issue-types[_ngcontent-%COMP%]   .issue-type-card[_ngcontent-%COMP%]   .sub-items[_ngcontent-%COMP%]   .sub-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px 16px;cursor:pointer;transition:background-color .2s;border-bottom:1px solid #e3e0e4}.issue-types[_ngcontent-%COMP%]   .issue-type-card[_ngcontent-%COMP%]   .sub-items[_ngcontent-%COMP%]   .sub-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.issue-types[_ngcontent-%COMP%]   .issue-type-card[_ngcontent-%COMP%]   .sub-items[_ngcontent-%COMP%]   .sub-item[_ngcontent-%COMP%]:hover{background-color:#f1f5f9}.issue-types[_ngcontent-%COMP%]   .issue-type-card[_ngcontent-%COMP%]   .sub-items[_ngcontent-%COMP%]   .sub-item[_ngcontent-%COMP%]   .sub-icon[_ngcontent-%COMP%]{width:25px;height:25px;display:flex;align-items:center;justify-content:center;color:#6b7280;margin-right:12px;flex-shrink:0}.issue-types[_ngcontent-%COMP%]   .issue-type-card[_ngcontent-%COMP%]   .sub-items[_ngcontent-%COMP%]   .sub-item[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%]{flex:1;font-size:14px;font-weight:500;color:#374151}.issue-types[_ngcontent-%COMP%]   .issue-type-card[_ngcontent-%COMP%]   .sub-items[_ngcontent-%COMP%]   .sub-item[_ngcontent-%COMP%]   .chevron[_ngcontent-%COMP%]{color:#9ca3af;display:flex;align-items:center}.help-section[_ngcontent-%COMP%]   .help-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;border:1px solid #e3e0e4;overflow:hidden}.help-section[_ngcontent-%COMP%]   .help-card[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{padding:20px 16px;text-align:center}.help-section[_ngcontent-%COMP%]   .help-card[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#111827;margin:0 0 8px}.help-section[_ngcontent-%COMP%]   .help-card[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]   .help-description[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin:0;line-height:1.5}.help-section[_ngcontent-%COMP%]   .help-card[_ngcontent-%COMP%]   .faq-button[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;padding:16px;background:none;border:none;border-top:1px solid #f1f5f9;cursor:pointer;transition:background-color .2s}.help-section[_ngcontent-%COMP%]   .help-card[_ngcontent-%COMP%]   .faq-button[_ngcontent-%COMP%]:hover{background-color:#f8fafc}.help-section[_ngcontent-%COMP%]   .help-card[_ngcontent-%COMP%]   .faq-button[_ngcontent-%COMP%]   .faq-icon[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;align-items:center;justify-content:center;color:#5d157c;margin-right:6px;flex-shrink:0}.help-section[_ngcontent-%COMP%]   .help-card[_ngcontent-%COMP%]   .faq-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;font-size:16px;font-weight:600;color:#5d157c;text-align:left}.help-section[_ngcontent-%COMP%]   .help-card[_ngcontent-%COMP%]   .faq-button[_ngcontent-%COMP%]   .chevron[_ngcontent-%COMP%]{color:#9ca3af;display:flex;align-items:center}@media (max-width: 375px){.select-issue-container[_ngcontent-%COMP%]{max-width:100%}}.sub-items[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .3s ease}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}"]})};var ct=class n extends be{constructor(e,i){let c=i.getSelectedProviderId(),p=n.getUrlObj(c);super(e,"provider_id",p,"items");this.authServ=i}list(){let e=this.authServ.getSelectedProviderId();return this.setUrl(n.getUrlObj(e)),super.list()}createOrUpdate(e,i){return i&&this.setUrl(n.getUrlObj(i)),super.createOrUpdate(e,i)}getProvider(e){return this.http.get(`${I.PROVIDER_INFO.PROVIDER_URL}/${e}`)}static getUrlObj(e){let i=`${I.PROVIDER_INFO.PROVIDER_URL}`;return{create:I.PROVIDER_INFO.PROVIDER_REGISTER,update:`${I.PROVIDER_INFO.PROVIDER_UPDATE}/${e}`,list:i,delete:I.PROVIDER_INFO.PROVIDER_URL}}static \u0275fac=function(i){return new(i||n)(E($),E(y))};static \u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})};var Me=class n{constructor(t,e){this.http=t;this.authService=e}createGrievance(t){let e=this.authService.getUserId(),i=ie(ne({},t),{created_by_user_id:e});return this.http.post(I.GRIEVANCE.CREATE,i)}getGrievances(t=1,e=10){let i=this.authService.getUserId(),c=`?page=${t}&limit=${e}&user_id=${i}`;return this.http.get(`${I.GRIEVANCE.LIST}${c}`)}getGrievanceById(t){let e=I.GRIEVANCE.GET.replace(":id",t.toString());return this.http.get(e)}updateGrievance(t,e){let i=I.GRIEVANCE.UPDATE.replace(":id",t.toString());return this.http.put(i,e)}deleteGrievance(t){let e=I.GRIEVANCE.DELETE.replace(":id",t.toString());return this.http.delete(e)}resolveGrievance(t,e){let i=this.authService.getUserId(),c=I.GRIEVANCE.UPDATE.replace(":id",t.toString()),p={status:"resolved",resolved_by_user_id:i,resolved_at:new Date().toISOString(),resolution_notes:e};return this.http.put(c,p)}getGrievancesByProvider(t,e=1,i=10){let c=`?provider_id=${t}&page=${e}&limit=${i}`;return this.http.get(`${I.GRIEVANCE.LIST}${c}`)}getGrievancesByOrder(t,e=1,i=10){let c=`?order_id=${t}&page=${e}&limit=${i}`;return this.http.get(`${I.GRIEVANCE.LIST}${c}`)}static \u0275fac=function(e){return new(e||n)(E($),E(y))};static \u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})};function Go(n,t){n&1&&(r(0,"div",10),m(1,"div",11),r(2,"p"),s(3),_(4,"translate"),o()()),n&2&&(a(3),g(f(4,1,"support.loading")))}function Ko(n,t){if(n&1){let e=P();r(0,"div",12)(1,"p",13),s(2),o(),r(3,"button",14),v("click",function(){h(e);let c=l();return O(c.retryLoading())}),s(4),_(5,"translate"),o()()}if(n&2){let e=l();a(2),g(e.error),a(2),g(f(5,2,"support.retry"))}}function qo(n,t){n&1&&(r(0,"div",21),s(1),_(2,"translate"),o()),n&2&&(a(),M(" ",f(2,1,"support.select_provider_first")," "))}function Ho(n,t){n&1&&(r(0,"div",21),s(1),_(2,"translate"),o()),n&2&&(a(),M(" ",f(2,1,"support.loading_orders")," "))}function Yo(n,t){n&1&&(r(0,"div",21),s(1),_(2,"translate"),o()),n&2&&(a(),M(" ",f(2,1,"support.no_orders_for_provider")," "))}function Wo(n,t){if(n&1){let e=P();r(0,"div",31)(1,"div",32),m(2,"i"),r(3,"span",33),s(4),o(),r(5,"span",34),s(6),o(),r(7,"span",35),s(8),_(9,"date"),o()(),r(10,"button",36),_(11,"translate"),v("click",function(){let c=h(e).index,p=l(3);return O(p.removeAttachment(c))}),m(12,"i",37),o()()}if(n&2){let e=t.$implicit,i=l(3);a(2),Pe(i.isImageFile(e.file_url)?"pi pi-image":"pi pi-file"),a(2),g(i.getFileName(e.file_url)),a(2),g(i.getFileSize(e.file_url)),a(2),g(re(9,6,e.uploaded_at,"short")),a(2),Y("title",f(11,9,"support.remove_attachment"))}}function Jo(n,t){if(n&1&&(r(0,"div",28)(1,"h4",29),s(2),_(3,"translate"),o(),u(4,Wo,13,11,"div",30),o()),n&2){let e=l(2);a(2),g(f(3,2,"support.uploaded_files")),a(2),d("ngForOf",e.uploadedFiles)}}function Qo(n,t){n&1&&(r(0,"span"),s(1),_(2,"translate"),o()),n&2&&(a(),g(f(2,1,"support.submit_report")))}function Xo(n,t){n&1&&(r(0,"span"),s(1),_(2,"translate"),o()),n&2&&(a(),g(f(2,1,"support.submitting")))}function Zo(n,t){if(n&1){let e=P();r(0,"div")(1,"div",15)(2,"label",16),s(3),_(4,"translate"),o(),r(5,"p-dropdown",17),_(6,"translate"),_(7,"translate"),Se("ngModelChange",function(c){h(e);let p=l();return ye(p.selectedProvider,c)||(p.selectedProvider=c),O(c)}),v("onChange",function(){h(e);let c=l();return O(c.onProviderChange())}),o()(),r(8,"div",15)(9,"label",16),s(10),_(11,"translate"),o(),r(12,"p-dropdown",18),_(13,"translate"),Se("ngModelChange",function(c){h(e);let p=l();return ye(p.selectedOrder,c)||(p.selectedOrder=c),O(c)}),o(),u(14,qo,3,3,"div",19)(15,Ho,3,3,"div",19)(16,Yo,3,3,"div",19),o(),r(17,"div",15)(18,"label",16),s(19),_(20,"translate"),o(),r(21,"p-dropdown",20),_(22,"translate"),Se("ngModelChange",function(c){h(e);let p=l();return ye(p.priority,c)||(p.priority=c),O(c)}),o(),r(23,"div",21)(24,"span"),s(25),_(26,"titlecase"),o(),s(27),_(28,"translate"),o()(),r(29,"div",15)(30,"label",16),s(31),_(32,"translate"),o(),r(33,"div",22)(34,"textarea",23),_(35,"translate"),Se("ngModelChange",function(c){h(e);let p=l();return ye(p.description,c)||(p.description=c),O(c)}),v("input",function(c){h(e);let p=l();return O(p.updateCharacterCount(c))}),o(),r(36,"div",24),s(37),_(38,"translate"),o()()(),r(39,"div",15)(40,"label",16),s(41),_(42,"translate"),o(),r(43,"file-upload",25),_(44,"translate"),v("uploadedUrls",function(c){h(e);let p=l();return O(p.onFilesUploaded(c))}),o(),u(45,Jo,5,4,"div",26),o(),r(46,"button",27),v("click",function(){h(e);let c=l();return O(c.submitReport())}),u(47,Qo,3,3,"span",9)(48,Xo,3,3,"span",9),o()()}if(n&2){let e=l();a(3),g(f(4,37,"support.select_provider")),a(2),Y("placeholder",f(6,39,"support.placeholder_provider")),Y("filterPlaceholder",f(7,41,"support.search_providers")),d("options",e.providers),xe("ngModel",e.selectedProvider),d("showClear",!0)("filter",!0),a(5),g(f(11,43,"support.select_order")),a(2),Y("placeholder",f(13,45,"support.placeholder_order")),d("options",e.orders),xe("ngModel",e.selectedOrder),d("showClear",!0)("filter",!0)("disabled",!e.selectedProvider),a(2),d("ngIf",!e.selectedProvider),a(),d("ngIf",e.ordersLoading),a(),d("ngIf",e.selectedProvider&&!e.ordersLoading&&e.orders.length===0),a(3),g(f(20,47,"support.priority")),a(2),Y("placeholder",f(22,49,"support.placeholder_priority")),d("options",e.priorityOptions),xe("ngModel",e.priority),a(3),Pe("priority-"+e.priority),a(),g(f(26,51,e.priority)),a(2),M(" ",f(28,53,"support.priority_selected")," "),a(4),g(f(32,55,"support.detailed_description")),a(3),Y("placeholder",f(35,57,"support.detailed_description_ph")),xe("ngModel",e.description),a(3),W("",e.characterCount," / 500 ",f(38,59,"support.characters"),""),a(4),g(f(42,61,"support.attachments")),a(2),Y("uploadTitle",f(44,63,"support.add_attachments")),d("enableMultiple",!0),a(2),d("ngIf",e.uploadedFiles.length>0),a(),d("disabled",!e.selectedProvider||!e.selectedOrder||!e.description.trim()||!e.grievanceType||!e.priority||e.submitting),a(),d("ngIf",!e.submitting),a(),d("ngIf",e.submitting)}}var st=class n{constructor(t,e,i,c,p,b,R){this.router=t;this.providerListService=e;this.orderService=i;this.authService=c;this.grievanceService=p;this.toast=b;this.translate=R;let X=this.router.getCurrentNavigation();this.grievanceType=X?.extras?.state?.issueType}selectedProvider="";selectedOrder="";description="";characterCount=0;uploadedFiles=[];isUploading=!1;loading=!1;error=null;providersLoading=!1;ordersLoading=!1;submitting=!1;grievanceType="";priority="medium";providers=[];orders=[];priorityOptions=[];isValidGrievanceType(t){return["provider_related","order_related","payment_related","delivery_related","other"].includes(t)}ngOnInit(){this.loadTranslations(),this.loadData()}loadTranslations(){this.translate.get(["grievanceTypes.provider_related","grievanceTypes.order_related","grievanceTypes.payment_related","grievanceTypes.delivery_related","grievanceTypes.other"]).subscribe(t=>{this.priorityOptions=[{label:"Low",value:"low"},{label:"Medium",value:"medium"},{label:"High",value:"high"},{label:"Urgent",value:"urgent"}]})}loadData(){this.loading=!0,this.fetchProviders()}getGrievanceTypeLabel(t){let e=`grievanceTypes.${t}`;return this.translate.instant(e)||t}fetchProviders(){this.providersLoading=!0,this.error=null,this.providerListService.list().subscribe({next:t=>{this.providers=t||[],this.providersLoading=!1,this.updateLoadingState()},error:t=>{this.error="Failed to load providers.",this.providersLoading=!1,this.updateLoadingState(),console.error("Error fetching providers:",t)}})}fetchOrders(t){this.ordersLoading=!0,this.error=null;try{this.orderService.getOrdersByProvider(t).subscribe({next:e=>{this.orders=e||[],this.ordersLoading=!1,this.orders.length===0&&console.log("No orders found for provider:",t),this.updateLoadingState()},error:e=>{this.error="Failed to load orders for the selected provider.",this.ordersLoading=!1,this.updateLoadingState(),console.error("Error fetching orders:",e)}})}catch(e){this.error="Error accessing provider information.",this.ordersLoading=!1,this.updateLoadingState(),console.error("Error in fetchOrders:",e)}}onProviderChange(){if(this.selectedOrder="",this.orders=[],this.selectedProvider){let t=parseInt(this.selectedProvider);t&&!isNaN(t)?this.fetchOrders(t):this.error="Invalid provider selected."}}updateLoadingState(){this.loading=this.providersLoading||this.ordersLoading}goBack(){console.log("Going back...")}updateCharacterCount(t){this.characterCount=t.target.value.length}addAttachments(){console.log("Adding attachments...")}onFilesUploaded(t){let e=this.authService.getUserId(),i=new Date().toISOString();try{this.uploadedFiles=t.map(c=>({file_url:c,uploaded_by_user_id:e,uploaded_at:i}))}catch{this.error="Error processing uploaded files. Please try again."}}submitReport(){if(!this.selectedProvider||!this.selectedOrder||!this.description.trim()||!this.grievanceType||!this.priority){this.toast.error("Validation Error","Please fill in all required fields");return}this.submitting=!0,this.error=null;let t={grievance_type:this.grievanceType,provider_id:parseInt(this.selectedProvider),order_id:parseInt(this.selectedOrder),description:this.description.trim(),attachments:this.uploadedFiles,priority:this.priority};this.grievanceService.createGrievance(t).subscribe({next:e=>{console.log("Grievance submitted successfully:",e),this.submitting=!1,this.toast.success("Success","Grievance submitted successfully! We will review your complaint and get back to you soon."),this.resetForm(),setTimeout(()=>{this.router.navigate(["/customers/confirmation"])},2e3)},error:e=>{console.error("Error submitting grievance:",e),this.submitting=!1;let i=e?.error?.message||"Failed to submit grievance. Please try again.";this.toast.error("Submission Failed",i),this.error="Failed to submit grievance. Please try again."}})}resetForm(){this.selectedProvider="",this.selectedOrder="",this.description="",this.characterCount=0,this.uploadedFiles=[],this.priority="medium",this.error=null}getProviderDisplayName(t){return t.business_name||`Provider #${t.provider_id}`}getOrderDisplayName(t){return`Order #${t.display_order_id}`}retryLoading(){this.error=null,this.fetchProviders()}removeAttachment(t){t>=0&&t<this.uploadedFiles.length&&(this.uploadedFiles.splice(t,1),console.log("Attachment removed:",t))}getFileName(t){try{return new URL(t).pathname.split("/").pop()||"Unknown file"}catch{return"Unknown file"}}getFileSize(t){return"Unknown size"}isImageFile(t){let e=[".jpg",".jpeg",".png",".gif",".bmp",".webp"],i=this.getFileName(t).toLowerCase();return e.some(c=>i.endsWith(c))}static \u0275fac=function(e){return new(e||n)(C(T),C(ct),C(he),C(y),C(Me),C(Q),C(B))};static \u0275cmp=x({type:n,selectors:[["support-form"]],decls:15,vars:9,consts:[[1,"support-form-container"],[1,"header"],[1,"back-button",3,"click"],[1,"pi","pi-chevron-left","text-xl","text-gray-700"],[1,"header-title"],[1,"content"],[1,"main-title"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],[4,"ngIf"],[1,"loading-state"],[1,"loading-spinner"],[1,"error-state"],[1,"error-message"],[1,"retry-button",3,"click"],[1,"form-group"],[1,"form-label"],["optionLabel","business_name","optionValue","provider_id",1,"w-full","custom-dropdown",3,"ngModelChange","onChange","options","ngModel","placeholder","showClear","filter","filterPlaceholder"],["optionLabel","display_order_id","optionValue","id","filterPlaceholder","Search orders...",1,"w-full","custom-dropdown",3,"ngModelChange","options","ngModel","placeholder","showClear","filter","disabled"],["class","helper-text",4,"ngIf"],["optionLabel","label","optionValue","value",1,"w-full","custom-dropdown",3,"ngModelChange","options","ngModel","placeholder"],[1,"helper-text"],[1,"textarea-wrapper"],["maxlength","500",1,"form-textarea",3,"ngModelChange","input","ngModel","placeholder"],[1,"character-count"],[3,"uploadedUrls","enableMultiple","uploadTitle"],["class","attachments-list",4,"ngIf"],[1,"submit-button",3,"click","disabled"],[1,"attachments-list"],[1,"attachments-title"],["class","attachment-item",4,"ngFor","ngForOf"],[1,"attachment-item"],[1,"attachment-info"],[1,"file-name"],[1,"file-size"],[1,"upload-time"],["type","button",1,"remove-attachment-btn",3,"click","title"],[1,"pi","pi-times"]],template:function(e,i){e&1&&(r(0,"div",0),m(1,"p-toast"),r(2,"div",1)(3,"button",2),v("click",function(){return i.goBack()}),m(4,"i",3),o(),r(5,"h1",4),s(6),_(7,"translate"),o()(),r(8,"div",5)(9,"h2",6),s(10),_(11,"translate"),o(),u(12,Go,5,3,"div",7)(13,Ko,6,4,"div",8)(14,Zo,49,65,"div",9),o()()),e&2&&(a(6),g(f(7,5,"support.describe_issue")),a(4),g(f(11,7,"support.tell_more")),a(2),d("ngIf",i.loading),a(),d("ngIf",i.error),a(),d("ngIf",!i.loading&&!i.error))},dependencies:[k,S,Ve,fe,Ce,Vt,Nt,Gt,$t,_e,ue,z],styles:[".support-form-container[_ngcontent-%COMP%]{max-width:375px;margin:0 auto;background:#fff;min-height:100vh;position:relative}.header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px 16px;background:#fff;border-bottom:1px solid #f0f0f0;position:sticky;top:0;z-index:100}.back-button[_ngcontent-%COMP%]{background:none;border:none;padding:8px;margin-right:12px;cursor:pointer;color:#333;display:flex;align-items:center;justify-content:center}.back-button[_ngcontent-%COMP%]:hover{background:#f5f5f5;border-radius:4px}.header-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#333;margin:0}.content[_ngcontent-%COMP%]{padding:24px 16px 100px}.main-title[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#333;margin:0 0 32px;line-height:1.2;text-align:center}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;text-align:center}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #f3f3f3;border-top:3px solid #5D157C;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:16px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;text-align:center}.error-message[_ngcontent-%COMP%]{color:#d32f2f;font-size:16px;margin-bottom:16px;line-height:1.4}.retry-button[_ngcontent-%COMP%]{padding:12px 24px;background:#5d157c;color:#fff;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:background-color .2s ease}.retry-button[_ngcontent-%COMP%]:hover{background:#3c0e50}.form-group[_ngcontent-%COMP%]{margin-bottom:24px}.form-label[_ngcontent-%COMP%]{display:block;font-size:16px;font-weight:500;color:#333;margin-bottom:8px}.helper-text[_ngcontent-%COMP%]{font-size:12px;color:#666;margin-top:4px;font-style:italic}.grievance-type-display[_ngcontent-%COMP%]{padding:12px 16px;background:#f5f5f5;border:1px solid #e0e0e0;border-radius:8px;min-height:48px;display:flex;align-items:center}.grievance-type-badge[_ngcontent-%COMP%]{background:#5d157c;color:#fff;padding:6px 12px;border-radius:16px;font-size:14px;font-weight:500;display:inline-block}.priority-high[_ngcontent-%COMP%]{color:#d32f2f;font-weight:600}.priority-urgent[_ngcontent-%COMP%]{color:#c62828;font-weight:700}.priority-medium[_ngcontent-%COMP%]{color:#f57c00;font-weight:500}.priority-low[_ngcontent-%COMP%]{color:#388e3c;font-weight:500}.attachments-list[_ngcontent-%COMP%]{margin-top:16px;border:1px solid #e0e0e0;border-radius:8px;padding:16px;background:#f9f9f9}.attachments-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#333;margin:0 0 12px}.attachment-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:8px 12px;background:#fff;border:1px solid #e0e0e0;border-radius:6px;margin-bottom:8px;transition:all .2s ease}.attachment-item[_ngcontent-%COMP%]:hover{border-color:#5d157c;box-shadow:0 2px 4px #0000001a}.attachment-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex:1}.attachment-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#5d157c;font-size:16px;min-width:16px}.file-name[_ngcontent-%COMP%]{font-size:14px;color:#333;font-weight:500;flex:1;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.file-size[_ngcontent-%COMP%]{font-size:12px;color:#666;margin-left:8px;white-space:nowrap}.upload-time[_ngcontent-%COMP%]{font-size:12px;color:#666;margin-left:auto;white-space:nowrap}.remove-attachment-btn[_ngcontent-%COMP%]{background:none;border:none;color:#d32f2f;cursor:pointer;padding:4px 8px;border-radius:4px;transition:background-color .2s ease;margin-left:8px}.remove-attachment-btn[_ngcontent-%COMP%]:hover{background:#ffebee}.remove-attachment-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.select-wrapper[_ngcontent-%COMP%]{position:relative}.form-select[_ngcontent-%COMP%]{width:100%;padding:16px;border:2px solid #e0e0e0;border-radius:8px;font-size:16px;background:#fff;appearance:none;cursor:pointer;color:#333}.form-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#5d157c}.select-icon[_ngcontent-%COMP%]{position:absolute;right:16px;top:50%;transform:translateY(-50%);color:#666;pointer-events:none}.textarea-wrapper[_ngcontent-%COMP%]{position:relative}.form-textarea[_ngcontent-%COMP%]{width:100%;min-height:120px;padding:16px;border:2px solid #5D157C;border-radius:8px;font-size:16px;font-family:inherit;resize:vertical;background:#fff;color:#333}.form-textarea[_ngcontent-%COMP%]::placeholder{color:#999}.form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#5d157c}.character-count[_ngcontent-%COMP%]{position:absolute;bottom:12px;right:16px;font-size:12px;color:#999;background:#fff;padding:0 4px}.attachment-button[_ngcontent-%COMP%]{width:100%;padding:16px;border:2px solid #5D157C;border-radius:8px;background:#fff;color:#5d157c;font-size:16px;font-weight:500;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;margin-bottom:24px;transition:all .2s ease}.attachment-button[_ngcontent-%COMP%]:hover{background:#f8f6ff}.submit-button[_ngcontent-%COMP%]{width:100%;padding:16px;background:#5d157c;color:#fff;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:background-color .2s ease}.submit-button[_ngcontent-%COMP%]:hover{background:#5d157c}.submit-button[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed;opacity:.6}@media (max-width: 375px){.support-form-container[_ngcontent-%COMP%]{max-width:100%}.content[_ngcontent-%COMP%]{padding:20px 12px 80px}.main-title[_ngcontent-%COMP%]{font-size:24px;text-align:center}}"]})};var dt=class n{constructor(t){this.router=t}referenceNumber="GRV-2023-5739";returnToHome(){console.log("Returning to home..."),this.router.navigate(["/customers"])}static \u0275fac=function(e){return new(e||n)(C(T))};static \u0275cmp=x({type:n,selectors:[["grievance-confirmation"]],inputs:{referenceNumber:"referenceNumber"},decls:21,vars:13,consts:[[1,"thank-you-container"],[1,"content"],[1,"success-icon-wrapper"],[1,"success-icon"],[1,"pi","pi-check-circle","text-[48px]"],[1,"main-content","text-center"],[1,"title","text-xl","font-semibold","mb-2"],[1,"description","text-sm","text-gray-600","mb-4"],[1,"reference-section","mb-4"],[1,"reference-label","text-sm","text-gray-500"],[1,"reference-number","text-lg","font-bold","text-[#5D157C]"],[1,"return-button","bg-[#5D157C]","text-white","px-4","py-2","rounded-lg",3,"click"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),m(4,"i",4),o()(),r(5,"div",5)(6,"h1",6),s(7),_(8,"translate"),o(),r(9,"p",7),s(10),_(11,"translate"),o(),r(12,"div",8)(13,"p",9),s(14),_(15,"translate"),o(),r(16,"div",10),s(17),o()(),r(18,"button",11),v("click",function(){return i.returnToHome()}),s(19),_(20,"translate"),o()()()()),e&2&&(a(7),g(f(8,5,"grievance.thank_you")),a(3),M(" ",f(11,7,"grievance.submitted_desc")," "),a(4),g(f(15,9,"grievance.reference_label")),a(3),M(" ",i.referenceNumber," "),a(2),M(" ",f(20,11,"grievance.return_home")," "))},dependencies:[z],styles:[".thank-you-container[_ngcontent-%COMP%]{max-width:375px;margin:0 auto;background:#fff;min-height:100vh;position:relative;display:flex;flex-direction:column}.content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 24px;text-align:center}.success-icon-wrapper[_ngcontent-%COMP%]{margin-bottom:32px}.success-icon[_ngcontent-%COMP%]{width:120px;height:120px;background:#f3f0ff;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto;color:#5d157c}.main-content[_ngcontent-%COMP%]{width:100%;max-width:320px}.title[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#333;margin:0 0 24px;line-height:1.2}.description[_ngcontent-%COMP%]{font-size:16px;color:#666;line-height:1.5;margin:0 0 40px}.reference-section[_ngcontent-%COMP%]{margin-bottom:40px}.reference-label[_ngcontent-%COMP%]{font-size:16px;color:#666;margin:0 0 8px}.reference-number[_ngcontent-%COMP%]{display:inline-block;background:#f3f0ff;color:#5d157c;font-size:16px;font-weight:600;padding:8px 16px;border-radius:6px;letter-spacing:.5px}.return-button[_ngcontent-%COMP%]{width:100%;padding:16px 24px;background:#5d157c;color:#fff;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:background-color .2s ease;box-shadow:0 2px 4px #8b5cf633}.return-button[_ngcontent-%COMP%]:hover{background:#5d157c;box-shadow:0 4px 8px #8b5cf64d}.return-button[_ngcontent-%COMP%]:active{transform:translateY(1px);box-shadow:0 1px 2px #8b5cf633}@media (max-width: 375px){.thank-you-container[_ngcontent-%COMP%]{max-width:100%}.content[_ngcontent-%COMP%]{padding:32px 16px}.title[_ngcontent-%COMP%]{font-size:28px}.success-icon[_ngcontent-%COMP%]{width:100px;height:100px;color:#5d157c}}@keyframes _ngcontent-%COMP%_fadeInScale{0%{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}.success-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInScale .6s ease-out}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.main-content[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .8s ease-out .2s both}"]})};function er(n,t){n&1&&(r(0,"div",7)(1,"div",8),m(2,"i",9),o(),r(3,"p"),s(4,"Loading member details..."),o()())}function tr(n,t){if(n&1&&m(0,"img",21),n&2){let e=l(2);d("src",e.getMemberProfileImage(),H)("alt",e.getMemberName())}}function nr(n,t){if(n&1&&(r(0,"div",22),s(1),o()),n&2){let e=l(2);a(),M(" ",e.getMemberInitials()," ")}}function ir(n,t){if(n&1&&(r(0,"div",10)(1,"div",11),s(2),o(),r(3,"div",12)(4,"div",13)(5,"div",14)(6,"span",15),s(7,"Name:"),o(),r(8,"span",16),s(9),o()(),r(10,"div",14)(11,"span",15),s(12,"Age:"),o(),r(13,"span",16),s(14),o()(),r(15,"div",14)(16,"span",15),s(17,"Mobile:"),o(),r(18,"span",16),s(19),o()(),r(20,"div",14)(21,"span",15),s(22,"Profile"),o(),r(23,"span",17),s(24,"View Profile"),o()()(),r(25,"div",18)(26,"div",19),u(27,tr,1,2,"img",20)(28,nr,2,1,"ng-template",null,0,U),o()()()()),n&2){let e=F(29),i=l();a(2),g(i.getProviderName()),a(7),g(i.getMemberName()),a(5),g(i.getMemberAge()),a(5),g(i.getMemberMobile()),a(8),d("ngIf",i.getMemberProfileImage())("ngIfElse",e)}}function or(n,t){if(n&1){let e=P();r(0,"div",23)(1,"div",24),s(2,"\u26A0\uFE0F"),o(),r(3,"p"),s(4,"Member information not found"),o(),r(5,"button",25),v("click",function(){h(e);let c=l();return O(c.goBack())}),s(6,"Go Back"),o()()}}var lt=class n{constructor(t,e,i,c,p){this.route=t;this.router=e;this.memberService=i;this.toast=c;this.authService=p}memberCard=null;memberDetails=null;isLoading=!1;ngOnInit(){setTimeout(()=>{this.loadMemberData()},0)}loadMemberData(){console.log("Checking for navigation state...");let t=this.router.getCurrentNavigation();console.log("Router navigation:",t);let e=t?.extras?.state;if(e||(e=window.history.state,console.log("Browser history state:",e)),!e){setTimeout(()=>{let i=this.router.getCurrentNavigation();console.log("Delayed navigation:",i);let c=i?.extras?.state||window.history.state;c&&c.card?(this.memberCard=c.card,console.log("Member card loaded (delayed):",this.memberCard),this.loadMemberDetails()):(console.error("No member card found even with delay"),this.handleMissingData())},100);return}console.log("Final state:",e),e&&e.card?(this.memberCard=e.card,console.log("Member card loaded:",this.memberCard),this.loadMemberDetails()):(console.error("No member card found in navigation state"),this.handleMissingData())}handleMissingData(){this.toast.error("Error","Member information not found"),this.goBack()}loadMemberDetails(){if(!this.memberCard?.member_id){this.toast.error("Error","Member ID not found");return}this.isLoading=!0,this.memberDetails={member_id:this.memberCard.member_id,member_name:this.memberCard.member_name||"Unknown",user_id:"",member_mobile_number:"",member_json_form:[],member_json_form_obj:{},provider_id:this.memberCard.provider_details.provider_id,myid_enabled:!0},this.isLoading=!1}goBack(){this.router.navigate(["../"],{relativeTo:this.route})}getMemberName(){return this.memberDetails?.member_name||this.memberCard?.member_name||"Unknown"}getMemberAge(){if(this.memberDetails?.member_json_form_obj){let t=this.memberDetails.member_json_form_obj.Age||this.memberDetails.member_json_form_obj.age||this.memberDetails.member_json_form_obj.AGE;return t?String(t):"N/A"}return"N/A"}getMemberMobile(){return this.memberDetails?.member_mobile_number||"N/A"}getProviderName(){return this.memberCard?.provider_details.provider_display_name||"Unknown Provider"}getMemberProfileImage(){return this.memberDetails?.member_json_form_obj?this.memberDetails.member_json_form_obj.profile_image||this.memberDetails.member_json_form_obj["Profile Image"]||this.memberDetails.member_json_form_obj.photo:null}getMemberInitials(){let t=this.getMemberName();if(!t)return"??";let e=t.trim().split(" ");return e.length>=2?(e[0][0]+e[1][0]).toUpperCase():t.substring(0,2).toUpperCase()}static \u0275fac=function(e){return new(e||n)(C(Ft),C(T),C(Ae),C(Q),C(y))};static \u0275cmp=x({type:n,selectors:[["member-details"]],decls:6,vars:6,consts:[["defaultAvatar",""],[3,"title","icon","showBack"],[1,"card-wrapper"],[1,"card"],["class","loading-state",4,"ngIf"],["class","member-details-card",4,"ngIf"],["class","error-state",4,"ngIf"],[1,"loading-state"],[1,"loading-spinner"],[1,"pi","pi-spin","pi-spinner"],[1,"member-details-card"],[1,"company-name"],[1,"member-info-section"],[1,"member-details"],[1,"detail-item"],[1,"detail-label"],[1,"detail-value"],[1,"detail-value","profile-link"],[1,"profile-section"],[1,"profile-image-container"],["class","profile-image",3,"src","alt",4,"ngIf","ngIfElse"],[1,"profile-image",3,"src","alt"],[1,"default-avatar"],[1,"error-state"],[1,"error-icon"],[1,"retry-button",3,"click"]],template:function(e,i){e&1&&(m(0,"app-title-card",1),r(1,"div",2)(2,"mat-card",3),u(3,er,5,0,"div",4)(4,ir,30,6,"div",5)(5,or,7,0,"div",6),o()()),e&2&&(d("title","Members")("icon","group")("showBack",!0),a(3),d("ngIf",i.isLoading),a(),d("ngIf",!i.isLoading&&i.memberCard),a(),d("ngIf",!i.isLoading&&!i.memberCard))},dependencies:[S,Ht,qt],styles:[".card-wrapper[_ngcontent-%COMP%]{padding:1.25rem;font-family:Roboto,sans-serif}.card[_ngcontent-%COMP%]{border-radius:6px;box-shadow:0 2.5px 6.5px #1c191d4a,0 0 2px #1c191d52;padding:2rem;min-height:400px;font-family:Roboto,sans-serif}.card[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem;color:#6b7280}.card[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:1rem;color:#5d157c}.card[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem}.card[_ngcontent-%COMP%]   .error-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem;color:#6b7280}.card[_ngcontent-%COMP%]   .error-state[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem}.card[_ngcontent-%COMP%]   .error-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1rem}.card[_ngcontent-%COMP%]   .error-state[_ngcontent-%COMP%]   .retry-button[_ngcontent-%COMP%]{background-color:#5d157c;color:#fff;border:none;border-radius:6px;padding:.75rem 1.5rem;font-size:.875rem;font-weight:600;cursor:pointer;transition:background-color .2s ease;font-family:Roboto,sans-serif}.card[_ngcontent-%COMP%]   .error-state[_ngcontent-%COMP%]   .retry-button[_ngcontent-%COMP%]:hover{background-color:#4a115a}.card[_ngcontent-%COMP%]   .member-details-card[_ngcontent-%COMP%]   .company-name[_ngcontent-%COMP%]{text-align:center;font-size:1.5rem;font-weight:700;color:#5d157c;margin-bottom:2rem;font-family:Roboto,sans-serif}.card[_ngcontent-%COMP%]   .member-details-card[_ngcontent-%COMP%]   .member-info-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:3rem}.card[_ngcontent-%COMP%]   .member-details-card[_ngcontent-%COMP%]   .member-info-section[_ngcontent-%COMP%]   .member-details[_ngcontent-%COMP%]{flex:1}.card[_ngcontent-%COMP%]   .member-details-card[_ngcontent-%COMP%]   .member-info-section[_ngcontent-%COMP%]   .member-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:2rem}.card[_ngcontent-%COMP%]   .member-details-card[_ngcontent-%COMP%]   .member-info-section[_ngcontent-%COMP%]   .member-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{font-size:1rem;color:#6b7280;margin-bottom:.5rem;font-weight:500;font-family:Roboto,sans-serif}.card[_ngcontent-%COMP%]   .member-details-card[_ngcontent-%COMP%]   .member-info-section[_ngcontent-%COMP%]   .member-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{font-size:1.125rem;color:#5d157c;font-weight:600;font-family:Roboto,sans-serif}.card[_ngcontent-%COMP%]   .member-details-card[_ngcontent-%COMP%]   .member-info-section[_ngcontent-%COMP%]   .member-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-value.profile-link[_ngcontent-%COMP%]{color:#5d157c;cursor:pointer;text-decoration:underline}.card[_ngcontent-%COMP%]   .member-details-card[_ngcontent-%COMP%]   .member-info-section[_ngcontent-%COMP%]   .member-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-value.profile-link[_ngcontent-%COMP%]:hover{color:#4a115a}.card[_ngcontent-%COMP%]   .member-details-card[_ngcontent-%COMP%]   .member-info-section[_ngcontent-%COMP%]   .profile-section[_ngcontent-%COMP%]{flex-shrink:0}.card[_ngcontent-%COMP%]   .member-details-card[_ngcontent-%COMP%]   .member-info-section[_ngcontent-%COMP%]   .profile-section[_ngcontent-%COMP%]   .profile-image-container[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:8px;overflow:hidden;box-shadow:0 2.5px 6.5px #1c191d4a,0 0 2px #1c191d52}.card[_ngcontent-%COMP%]   .member-details-card[_ngcontent-%COMP%]   .member-info-section[_ngcontent-%COMP%]   .profile-section[_ngcontent-%COMP%]   .profile-image-container[_ngcontent-%COMP%]   .profile-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.card[_ngcontent-%COMP%]   .member-details-card[_ngcontent-%COMP%]   .member-info-section[_ngcontent-%COMP%]   .profile-section[_ngcontent-%COMP%]   .profile-image-container[_ngcontent-%COMP%]   .default-avatar[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#9ca3af;color:#fff;display:flex;align-items:center;justify-content:center;font-size:3rem;font-weight:600;font-family:Roboto,sans-serif}@media (max-width: 768px){.card-wrapper[_ngcontent-%COMP%]{padding:1rem;font-family:Roboto,sans-serif}.card[_ngcontent-%COMP%]{padding:1.5rem;font-family:Roboto,sans-serif}.card[_ngcontent-%COMP%]   .member-details-card[_ngcontent-%COMP%]   .company-name[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:1.5rem;font-family:Roboto,sans-serif}.card[_ngcontent-%COMP%]   .member-details-card[_ngcontent-%COMP%]   .member-info-section[_ngcontent-%COMP%]{flex-direction:column;gap:2rem}.card[_ngcontent-%COMP%]   .member-details-card[_ngcontent-%COMP%]   .member-info-section[_ngcontent-%COMP%]   .member-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{margin-bottom:1.5rem}.card[_ngcontent-%COMP%]   .member-details-card[_ngcontent-%COMP%]   .member-info-section[_ngcontent-%COMP%]   .member-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{font-size:.875rem;font-family:Roboto,sans-serif}.card[_ngcontent-%COMP%]   .member-details-card[_ngcontent-%COMP%]   .member-info-section[_ngcontent-%COMP%]   .member-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{font-size:1rem;font-family:Roboto,sans-serif}.card[_ngcontent-%COMP%]   .member-details-card[_ngcontent-%COMP%]   .member-info-section[_ngcontent-%COMP%]   .profile-section[_ngcontent-%COMP%]{align-self:center}.card[_ngcontent-%COMP%]   .member-details-card[_ngcontent-%COMP%]   .member-info-section[_ngcontent-%COMP%]   .profile-section[_ngcontent-%COMP%]   .profile-image-container[_ngcontent-%COMP%]{width:120px;height:120px}.card[_ngcontent-%COMP%]   .member-details-card[_ngcontent-%COMP%]   .member-info-section[_ngcontent-%COMP%]   .profile-section[_ngcontent-%COMP%]   .profile-image-container[_ngcontent-%COMP%]   .default-avatar[_ngcontent-%COMP%]{font-size:2.5rem;font-family:Roboto,sans-serif}}"]})};var rr=[{path:"",component:et},{path:"search-providers",component:it},{path:"join",component:ot},{path:"kyc",component:tt},{path:"favouritesListed",component:on},{path:"recentsListed",component:rn},{path:"class-reg",component:nt},{path:"user-profile",component:rt},{path:"grievance",component:at},{path:"support",component:st},{path:"confirmation",component:dt},{path:"member-details",component:lt},{path:"info",loadChildren:()=>import("./chunk-63MGN57V.js").then(n=>n.ProviderInfoModule)}],mt=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=Te({type:n});static \u0275inj=ke({imports:[_t.forChild(rr),_t]})};var un=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=Te({type:n});static \u0275inj=ke({providers:[Me,G,Ae],imports:[Rt,Jt,Qt,nn,an,mt,Ut,At]})};export{he as a,qe as b,ct as c,un as d};
